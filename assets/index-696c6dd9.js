(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function jM(i,e){const t=Object.create(null),n=i.split(",");for(let r=0;r<n.length;r++)t[n[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}function y1(i){if(pt(i)){const e={};for(let t=0;t<i.length;t++){const n=i[t],r=Hn(n)?ane(n):y1(n);if(r)for(const s in r)e[s]=r[s]}return e}else{if(Hn(i))return i;if(Ui(i))return i}}const rne=/;(?![^(]*\))/g,sne=/:([^]+)/,one=/\/\*.*?\*\//gs;function ane(i){const e={};return i.replace(one,"").split(rne).forEach(t=>{if(t){const n=t.split(sne);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ll(i){let e="";if(Hn(i))e=i;else if(pt(i))for(let t=0;t<i.length;t++){const n=Ll(i[t]);n&&(e+=n+" ")}else if(Ui(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}const lne="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cne=jM(lne);function QV(i){return!!i||i===""}const wa=i=>Hn(i)?i:i==null?"":pt(i)||Ui(i)&&(i.toString===tG||!Tt(i.toString))?JSON.stringify(i,KV,2):String(i),KV=(i,e)=>e&&e.__v_isRef?KV(i,e.value):Wp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r])=>(t[`${n} =>`]=r,t),{})}:JV(e)?{[`Set(${e.size})`]:[...e.values()]}:Ui(e)&&!pt(e)&&!iG(e)?String(e):e,ki={},Hp=[],Pa=()=>{},une=()=>!1,hne=/^on[^a-z]/,W8=i=>hne.test(i),HM=i=>i.startsWith("onUpdate:"),Ar=Object.assign,WM=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},dne=Object.prototype.hasOwnProperty,jt=(i,e)=>dne.call(i,e),pt=Array.isArray,Wp=i=>$8(i)==="[object Map]",JV=i=>$8(i)==="[object Set]",Tt=i=>typeof i=="function",Hn=i=>typeof i=="string",$M=i=>typeof i=="symbol",Ui=i=>i!==null&&typeof i=="object",eG=i=>Ui(i)&&Tt(i.then)&&Tt(i.catch),tG=Object.prototype.toString,$8=i=>tG.call(i),fne=i=>$8(i).slice(8,-1),iG=i=>$8(i)==="[object Object]",qM=i=>Hn(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Y4=jM(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),q8=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},pne=/-(\w)/g,B0=q8(i=>i.replace(pne,(e,t)=>t?t.toUpperCase():"")),mne=/\B([A-Z])/g,Kd=q8(i=>i.replace(mne,"-$1").toLowerCase()),X8=q8(i=>i.charAt(0).toUpperCase()+i.slice(1)),B7=q8(i=>i?`on${X8(i)}`:""),vv=(i,e)=>!Object.is(i,e),Z4=(i,e)=>{for(let t=0;t<i.length;t++)i[t](e)},z5=(i,e,t)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value:t})},rS=i=>{const e=parseFloat(i);return isNaN(e)?i:e},gne=i=>{const e=Hn(i)?Number(i):NaN;return isNaN(e)?i:e};let GL;const vne=()=>GL||(GL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ma;class nG{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ma,!e&&ma&&(this.index=(ma.scopes||(ma.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=ma;try{return ma=this,e()}finally{ma=t}}}on(){ma=this}off(){ma=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function yne(i){return new nG(i)}function xne(i,e=ma){e&&e.active&&e.effects.push(i)}function _ne(){return ma}const XM=i=>{const e=new Set(i);return e.w=0,e.n=0,e},rG=i=>(i.w&Ru)>0,sG=i=>(i.n&Ru)>0,bne=({deps:i})=>{if(i.length)for(let e=0;e<i.length;e++)i[e].w|=Ru},wne=i=>{const{deps:e}=i;if(e.length){let t=0;for(let n=0;n<e.length;n++){const r=e[n];rG(r)&&!sG(r)?r.delete(i):e[t++]=r,r.w&=~Ru,r.n&=~Ru}e.length=t}},k5=new WeakMap;let o2=0,Ru=1;const sS=30;let Sa;const pd=Symbol(""),oS=Symbol("");class YM{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,xne(this,n)}run(){if(!this.active)return this.fn();let e=Sa,t=vu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Sa,Sa=this,vu=!0,Ru=1<<++o2,o2<=sS?bne(this):jL(this),this.fn()}finally{o2<=sS&&wne(this),Ru=1<<--o2,Sa=this.parent,vu=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Sa===this?this.deferStop=!0:this.active&&(jL(this),this.onStop&&this.onStop(),this.active=!1)}}function jL(i){const{deps:e}=i;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(i);e.length=0}}let vu=!0;const oG=[];function am(){oG.push(vu),vu=!1}function lm(){const i=oG.pop();vu=i===void 0?!0:i}function Ns(i,e,t){if(vu&&Sa){let n=k5.get(i);n||k5.set(i,n=new Map);let r=n.get(t);r||n.set(t,r=XM()),aG(r)}}function aG(i,e){let t=!1;o2<=sS?sG(i)||(i.n|=Ru,t=!rG(i)):t=!i.has(Sa),t&&(i.add(Sa),Sa.deps.push(i))}function Wl(i,e,t,n,r,s){const o=k5.get(i);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&pt(i)){const l=Number(n);o.forEach((c,h)=>{(h==="length"||h>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":pt(i)?qM(t)&&a.push(o.get("length")):(a.push(o.get(pd)),Wp(i)&&a.push(o.get(oS)));break;case"delete":pt(i)||(a.push(o.get(pd)),Wp(i)&&a.push(o.get(oS)));break;case"set":Wp(i)&&a.push(o.get(pd));break}if(a.length===1)a[0]&&aS(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);aS(XM(l))}}function aS(i,e){const t=pt(i)?i:[...i];for(const n of t)n.computed&&HL(n);for(const n of t)n.computed||HL(n)}function HL(i,e){(i!==Sa||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}function Sne(i,e){var t;return(t=k5.get(i))===null||t===void 0?void 0:t.get(e)}const Ane=jM("__proto__,__v_isRef,__isVue"),lG=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter($M)),Tne=ZM(),Mne=ZM(!1,!0),Ene=ZM(!0),WL=Cne();function Cne(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...t){const n=Wt(this);for(let s=0,o=this.length;s<o;s++)Ns(n,"get",s+"");const r=n[e](...t);return r===-1||r===!1?n[e](...t.map(Wt)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...t){am();const n=Wt(this)[e].apply(this,t);return lm(),n}}),i}function Dne(i){const e=Wt(this);return Ns(e,"has",i),e.hasOwnProperty(i)}function ZM(i=!1,e=!1){return function(n,r,s){if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(i?e?Wne:fG:e?dG:hG).get(n))return n;const o=pt(n);if(!i){if(o&&jt(WL,r))return Reflect.get(WL,r,s);if(r==="hasOwnProperty")return Dne}const a=Reflect.get(n,r,s);return($M(r)?lG.has(r):Ane(r))||(i||Ns(n,"get",r),e)?a:br(a)?o&&qM(r)?a:a.value:Ui(a)?i?pG(a):C3(a):a}}const Pne=cG(),Lne=cG(!0);function cG(i=!1){return function(t,n,r,s){let o=t[n];if(x1(o)&&br(o)&&!br(r))return!1;if(!i&&(!B5(r)&&!x1(r)&&(o=Wt(o),r=Wt(r)),!pt(t)&&br(o)&&!br(r)))return o.value=r,!0;const a=pt(t)&&qM(n)?Number(n)<t.length:jt(t,n),l=Reflect.set(t,n,r,s);return t===Wt(s)&&(a?vv(r,o)&&Wl(t,"set",n,r):Wl(t,"add",n,r)),l}}function Ine(i,e){const t=jt(i,e);i[e];const n=Reflect.deleteProperty(i,e);return n&&t&&Wl(i,"delete",e,void 0),n}function One(i,e){const t=Reflect.has(i,e);return(!$M(e)||!lG.has(e))&&Ns(i,"has",e),t}function Rne(i){return Ns(i,"iterate",pt(i)?"length":pd),Reflect.ownKeys(i)}const uG={get:Tne,set:Pne,deleteProperty:Ine,has:One,ownKeys:Rne},Nne={get:Ene,set(i,e){return!0},deleteProperty(i,e){return!0}},Fne=Ar({},uG,{get:Mne,set:Lne}),QM=i=>i,Y8=i=>Reflect.getPrototypeOf(i);function wy(i,e,t=!1,n=!1){i=i.__v_raw;const r=Wt(i),s=Wt(e);t||(e!==s&&Ns(r,"get",e),Ns(r,"get",s));const{has:o}=Y8(r),a=n?QM:t?tE:yv;if(o.call(r,e))return a(i.get(e));if(o.call(r,s))return a(i.get(s));i!==r&&i.get(e)}function Sy(i,e=!1){const t=this.__v_raw,n=Wt(t),r=Wt(i);return e||(i!==r&&Ns(n,"has",i),Ns(n,"has",r)),i===r?t.has(i):t.has(i)||t.has(r)}function Ay(i,e=!1){return i=i.__v_raw,!e&&Ns(Wt(i),"iterate",pd),Reflect.get(i,"size",i)}function $L(i){i=Wt(i);const e=Wt(this);return Y8(e).has.call(e,i)||(e.add(i),Wl(e,"add",i,i)),this}function qL(i,e){e=Wt(e);const t=Wt(this),{has:n,get:r}=Y8(t);let s=n.call(t,i);s||(i=Wt(i),s=n.call(t,i));const o=r.call(t,i);return t.set(i,e),s?vv(e,o)&&Wl(t,"set",i,e):Wl(t,"add",i,e),this}function XL(i){const e=Wt(this),{has:t,get:n}=Y8(e);let r=t.call(e,i);r||(i=Wt(i),r=t.call(e,i)),n&&n.call(e,i);const s=e.delete(i);return r&&Wl(e,"delete",i,void 0),s}function YL(){const i=Wt(this),e=i.size!==0,t=i.clear();return e&&Wl(i,"clear",void 0,void 0),t}function Ty(i,e){return function(n,r){const s=this,o=s.__v_raw,a=Wt(o),l=e?QM:i?tE:yv;return!i&&Ns(a,"iterate",pd),o.forEach((c,h)=>n.call(r,l(c),l(h),s))}}function My(i,e,t){return function(...n){const r=this.__v_raw,s=Wt(r),o=Wp(s),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=r[i](...n),h=t?QM:e?tE:yv;return!e&&Ns(s,"iterate",l?oS:pd),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function gc(i){return function(...e){return i==="delete"?!1:this}}function zne(){const i={get(s){return wy(this,s)},get size(){return Ay(this)},has:Sy,add:$L,set:qL,delete:XL,clear:YL,forEach:Ty(!1,!1)},e={get(s){return wy(this,s,!1,!0)},get size(){return Ay(this)},has:Sy,add:$L,set:qL,delete:XL,clear:YL,forEach:Ty(!1,!0)},t={get(s){return wy(this,s,!0)},get size(){return Ay(this,!0)},has(s){return Sy.call(this,s,!0)},add:gc("add"),set:gc("set"),delete:gc("delete"),clear:gc("clear"),forEach:Ty(!0,!1)},n={get(s){return wy(this,s,!0,!0)},get size(){return Ay(this,!0)},has(s){return Sy.call(this,s,!0)},add:gc("add"),set:gc("set"),delete:gc("delete"),clear:gc("clear"),forEach:Ty(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=My(s,!1,!1),t[s]=My(s,!0,!1),e[s]=My(s,!1,!0),n[s]=My(s,!0,!0)}),[i,t,e,n]}const[kne,Bne,Une,Vne]=zne();function KM(i,e){const t=e?i?Vne:Une:i?Bne:kne;return(n,r,s)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?n:Reflect.get(jt(t,r)&&r in n?t:n,r,s)}const Gne={get:KM(!1,!1)},jne={get:KM(!1,!0)},Hne={get:KM(!0,!1)},hG=new WeakMap,dG=new WeakMap,fG=new WeakMap,Wne=new WeakMap;function $ne(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qne(i){return i.__v_skip||!Object.isExtensible(i)?0:$ne(fne(i))}function C3(i){return x1(i)?i:JM(i,!1,uG,Gne,hG)}function Xne(i){return JM(i,!1,Fne,jne,dG)}function pG(i){return JM(i,!0,Nne,Hne,fG)}function JM(i,e,t,n,r){if(!Ui(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const s=r.get(i);if(s)return s;const o=qne(i);if(o===0)return i;const a=new Proxy(i,o===2?n:t);return r.set(i,a),a}function $p(i){return x1(i)?$p(i.__v_raw):!!(i&&i.__v_isReactive)}function x1(i){return!!(i&&i.__v_isReadonly)}function B5(i){return!!(i&&i.__v_isShallow)}function mG(i){return $p(i)||x1(i)}function Wt(i){const e=i&&i.__v_raw;return e?Wt(e):i}function eE(i){return z5(i,"__v_skip",!0),i}const yv=i=>Ui(i)?C3(i):i,tE=i=>Ui(i)?pG(i):i;function gG(i){vu&&Sa&&(i=Wt(i),aG(i.dep||(i.dep=XM())))}function vG(i,e){i=Wt(i);const t=i.dep;t&&aS(t)}function br(i){return!!(i&&i.__v_isRef===!0)}function Ul(i){return yG(i,!1)}function Yne(i){return yG(i,!0)}function yG(i,e){return br(i)?i:new Zne(i,e)}class Zne{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Wt(e),this._value=t?e:yv(e)}get value(){return gG(this),this._value}set value(e){const t=this.__v_isShallow||B5(e)||x1(e);e=t?e:Wt(e),vv(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:yv(e),vG(this))}}function yu(i){return br(i)?i.value:i}const Qne={get:(i,e,t)=>yu(Reflect.get(i,e,t)),set:(i,e,t,n)=>{const r=i[e];return br(r)&&!br(t)?(r.value=t,!0):Reflect.set(i,e,t,n)}};function xG(i){return $p(i)?i:new Proxy(i,Qne)}class Kne{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Sne(Wt(this._object),this._key)}}function _G(i,e,t){const n=i[e];return br(n)?n:new Kne(i,e,t)}var bG;class Jne{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[bG]=!1,this._dirty=!0,this.effect=new YM(e,()=>{this._dirty||(this._dirty=!0,vG(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=Wt(this);return gG(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}bG="__v_isReadonly";function ere(i,e,t=!1){let n,r;const s=Tt(i);return s?(n=i,r=Pa):(n=i.get,r=i.set),new Jne(n,r,s||!r,t)}function xu(i,e,t,n){let r;try{r=n?i(...n):i()}catch(s){Z8(s,e,t)}return r}function Vo(i,e,t,n){if(Tt(i)){const s=xu(i,e,t,n);return s&&eG(s)&&s.catch(o=>{Z8(o,e,t)}),s}const r=[];for(let s=0;s<i.length;s++)r.push(Vo(i[s],e,t,n));return r}function Z8(i,e,t,n=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](i,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){xu(l,null,10,[i,o,a]);return}}tre(i,t,r,n)}function tre(i,e,t,n=!0){console.error(i)}let xv=!1,lS=!1;const Rr=[];let f0=0;const qp=[];let Cl=null,qh=0;const wG=Promise.resolve();let iE=null;function SG(i){const e=iE||wG;return i?e.then(this?i.bind(this):i):e}function ire(i){let e=f0+1,t=Rr.length;for(;e<t;){const n=e+t>>>1;_v(Rr[n])<i?e=n+1:t=n}return e}function nE(i){(!Rr.length||!Rr.includes(i,xv&&i.allowRecurse?f0+1:f0))&&(i.id==null?Rr.push(i):Rr.splice(ire(i.id),0,i),AG())}function AG(){!xv&&!lS&&(lS=!0,iE=wG.then(MG))}function nre(i){const e=Rr.indexOf(i);e>f0&&Rr.splice(e,1)}function rre(i){pt(i)?qp.push(...i):(!Cl||!Cl.includes(i,i.allowRecurse?qh+1:qh))&&qp.push(i),AG()}function ZL(i,e=xv?f0+1:0){for(;e<Rr.length;e++){const t=Rr[e];t&&t.pre&&(Rr.splice(e,1),e--,t())}}function TG(i){if(qp.length){const e=[...new Set(qp)];if(qp.length=0,Cl){Cl.push(...e);return}for(Cl=e,Cl.sort((t,n)=>_v(t)-_v(n)),qh=0;qh<Cl.length;qh++)Cl[qh]();Cl=null,qh=0}}const _v=i=>i.id==null?1/0:i.id,sre=(i,e)=>{const t=_v(i)-_v(e);if(t===0){if(i.pre&&!e.pre)return-1;if(e.pre&&!i.pre)return 1}return t};function MG(i){lS=!1,xv=!0,Rr.sort(sre);const e=Pa;try{for(f0=0;f0<Rr.length;f0++){const t=Rr[f0];t&&t.active!==!1&&xu(t,null,14)}}finally{f0=0,Rr.length=0,TG(),xv=!1,iE=null,(Rr.length||qp.length)&&MG()}}function ore(i,e,...t){if(i.isUnmounted)return;const n=i.vnode.props||ki;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in n){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:d}=n[h]||ki;d&&(r=t.map(f=>Hn(f)?f.trim():f)),u&&(r=t.map(rS))}let a,l=n[a=B7(e)]||n[a=B7(B0(e))];!l&&s&&(l=n[a=B7(Kd(e))]),l&&Vo(l,i,6,r);const c=n[a+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,Vo(c,i,6,r)}}function EG(i,e,t=!1){const n=e.emitsCache,r=n.get(i);if(r!==void 0)return r;const s=i.emits;let o={},a=!1;if(!Tt(i)){const l=c=>{const h=EG(c,e,!0);h&&(a=!0,Ar(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!s&&!a?(Ui(i)&&n.set(i,null),null):(pt(s)?s.forEach(l=>o[l]=null):Ar(o,s),Ui(i)&&n.set(i,o),o)}function Q8(i,e){return!i||!W8(e)?!1:(e=e.slice(2).replace(/Once$/,""),jt(i,e[0].toLowerCase()+e.slice(1))||jt(i,Kd(e))||jt(i,e))}let Qs=null,CG=null;function U5(i){const e=Qs;return Qs=i,CG=i&&i.type.__scopeId||null,e}function So(i,e=Qs,t){if(!e||i._n)return i;const n=(...r)=>{n._d&&oI(-1);const s=U5(e);let o;try{o=i(...r)}finally{U5(s),n._d&&oI(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function U7(i){const{type:e,vnode:t,proxy:n,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:h,renderCache:u,data:d,setupState:f,ctx:p,inheritAttrs:m}=i;let y,g;const v=U5(i);try{if(t.shapeFlag&4){const _=r||n;y=u0(h.call(_,_,u,s,f,d,p)),g=l}else{const _=e;y=u0(_.length>1?_(s,{attrs:l,slots:a,emit:c}):_(s,null)),g=e.props?l:are(l)}}catch(_){L2.length=0,Z8(_,i,1),y=Gt(La)}let x=y;if(g&&m!==!1){const _=Object.keys(g),{shapeFlag:w}=x;_.length&&w&7&&(o&&_.some(HM)&&(g=lre(g,o)),x=Nu(x,g))}return t.dirs&&(x=Nu(x),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&(x.transition=t.transition),y=x,U5(v),y}const are=i=>{let e;for(const t in i)(t==="class"||t==="style"||W8(t))&&((e||(e={}))[t]=i[t]);return e},lre=(i,e)=>{const t={};for(const n in i)(!HM(n)||!(n.slice(9)in e))&&(t[n]=i[n]);return t};function cre(i,e,t){const{props:n,children:r,component:s}=i,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?QL(n,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==n[d]&&!Q8(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?QL(n,o,c):!0:!!o;return!1}function QL(i,e,t){const n=Object.keys(e);if(n.length!==Object.keys(i).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==i[s]&&!Q8(t,s))return!0}return!1}function ure({vnode:i,parent:e},t){for(;e&&e.subTree===i;)(i=e.vnode).el=t,e=e.parent}const hre=i=>i.__isSuspense;function dre(i,e){e&&e.pendingBranch?pt(i)?e.effects.push(...i):e.effects.push(i):rre(i)}function D2(i,e){if(En){let t=En.provides;const n=En.parent&&En.parent.provides;n===t&&(t=En.provides=Object.create(n)),t[i]=e}}function zr(i,e,t=!1){const n=En||Qs;if(n){const r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&i in r)return r[i];if(arguments.length>1)return t&&Tt(e)?e.call(n.proxy):e}}function DG(i,e){return rE(i,null,e)}const Ey={};function Zt(i,e,t){return rE(i,e,t)}function rE(i,e,{immediate:t,deep:n,flush:r,onTrack:s,onTrigger:o}=ki){const a=_ne()===(En==null?void 0:En.scope)?En:null;let l,c=!1,h=!1;if(br(i)?(l=()=>i.value,c=B5(i)):$p(i)?(l=()=>i,n=!0):pt(i)?(h=!0,c=i.some(x=>$p(x)||B5(x)),l=()=>i.map(x=>{if(br(x))return x.value;if($p(x))return sd(x);if(Tt(x))return xu(x,a,2)})):Tt(i)?e?l=()=>xu(i,a,2):l=()=>{if(!(a&&a.isUnmounted))return u&&u(),Vo(i,a,3,[d])}:l=Pa,e&&n){const x=l;l=()=>sd(x())}let u,d=x=>{u=g.onStop=()=>{xu(x,a,4)}},f;if(wv)if(d=Pa,e?t&&Vo(e,a,3,[l(),h?[]:void 0,d]):l(),r==="sync"){const x=ose();f=x.__watcherHandles||(x.__watcherHandles=[])}else return Pa;let p=h?new Array(i.length).fill(Ey):Ey;const m=()=>{if(g.active)if(e){const x=g.run();(n||c||(h?x.some((_,w)=>vv(_,p[w])):vv(x,p)))&&(u&&u(),Vo(e,a,3,[x,p===Ey?void 0:h&&p[0]===Ey?[]:p,d]),p=x)}else g.run()};m.allowRecurse=!!e;let y;r==="sync"?y=m:r==="post"?y=()=>gs(m,a&&a.suspense):(m.pre=!0,a&&(m.id=a.uid),y=()=>nE(m));const g=new YM(l,y);e?t?m():p=g.run():r==="post"?gs(g.run.bind(g),a&&a.suspense):g.run();const v=()=>{g.stop(),a&&a.scope&&WM(a.scope.effects,g)};return f&&f.push(v),v}function fre(i,e,t){const n=this.proxy,r=Hn(i)?i.includes(".")?PG(n,i):()=>n[i]:i.bind(n,n);let s;Tt(e)?s=e:(s=e.handler,t=e);const o=En;_1(this);const a=rE(r,s.bind(n),t);return o?_1(o):md(),a}function PG(i,e){const t=e.split(".");return()=>{let n=i;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function sd(i,e){if(!Ui(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),br(i))sd(i.value,e);else if(pt(i))for(let t=0;t<i.length;t++)sd(i[t],e);else if(JV(i)||Wp(i))i.forEach(t=>{sd(t,e)});else if(iG(i))for(const t in i)sd(i[t],e);return i}function pre(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return cm(()=>{i.isMounted=!0}),NG(()=>{i.isUnmounting=!0}),i}const ho=[Function,Array],mre={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ho,onEnter:ho,onAfterEnter:ho,onEnterCancelled:ho,onBeforeLeave:ho,onLeave:ho,onAfterLeave:ho,onLeaveCancelled:ho,onBeforeAppear:ho,onAppear:ho,onAfterAppear:ho,onAppearCancelled:ho},setup(i,{slots:e}){const t=YG(),n=pre();let r;return()=>{const s=e.default&&OG(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==La){o=m;break}}const a=Wt(i),{mode:l}=a;if(n.isLeaving)return V7(o);const c=KL(o);if(!c)return V7(o);const h=cS(c,a,n,t);uS(c,h);const u=t.subTree,d=u&&KL(u);let f=!1;const{getTransitionKey:p}=c.type;if(p){const m=p();r===void 0?r=m:m!==r&&(r=m,f=!0)}if(d&&d.type!==La&&(!Xh(c,d)||f)){const m=cS(d,a,n,t);if(uS(d,m),l==="out-in")return n.isLeaving=!0,m.afterLeave=()=>{n.isLeaving=!1,t.update.active!==!1&&t.update()},V7(o);l==="in-out"&&c.type!==La&&(m.delayLeave=(y,g,v)=>{const x=IG(n,d);x[String(d.key)]=d,y._leaveCb=()=>{g(),y._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=v})}return o}}},LG=mre;function IG(i,e){const{leavingVNodes:t}=i;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function cS(i,e,t,n){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:u,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:g,onAppearCancelled:v}=e,x=String(i.key),_=IG(t,i),w=(A,E)=>{A&&Vo(A,n,9,E)},b=(A,E)=>{const T=E[1];w(A,E),pt(A)?A.every(M=>M.length<=1)&&T():A.length<=1&&T()},S={mode:s,persisted:o,beforeEnter(A){let E=a;if(!t.isMounted)if(r)E=m||a;else return;A._leaveCb&&A._leaveCb(!0);const T=_[x];T&&Xh(i,T)&&T.el._leaveCb&&T.el._leaveCb(),w(E,[A])},enter(A){let E=l,T=c,M=h;if(!t.isMounted)if(r)E=y||l,T=g||c,M=v||h;else return;let C=!1;const D=A._enterCb=P=>{C||(C=!0,P?w(M,[A]):w(T,[A]),S.delayedLeave&&S.delayedLeave(),A._enterCb=void 0)};E?b(E,[A,D]):D()},leave(A,E){const T=String(i.key);if(A._enterCb&&A._enterCb(!0),t.isUnmounting)return E();w(u,[A]);let M=!1;const C=A._leaveCb=D=>{M||(M=!0,E(),D?w(p,[A]):w(f,[A]),A._leaveCb=void 0,_[T]===i&&delete _[T])};_[T]=i,d?b(d,[A,C]):C()},clone(A){return cS(A,e,t,n)}};return S}function V7(i){if(K8(i))return i=Nu(i),i.children=null,i}function KL(i){return K8(i)?i.children?i.children[0]:void 0:i}function uS(i,e){i.shapeFlag&6&&i.component?uS(i.component.subTree,e):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function OG(i,e=!1,t){let n=[],r=0;for(let s=0;s<i.length;s++){let o=i[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===is?(o.patchFlag&128&&r++,n=n.concat(OG(o.children,e,a))):(e||o.type!==La)&&n.push(a!=null?Nu(o,{key:a}):o)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function st(i){return Tt(i)?{setup:i,name:i.name}:i}const Q4=i=>!!i.type.__asyncLoader,K8=i=>i.type.__isKeepAlive;function gre(i,e){RG(i,"a",e)}function vre(i,e){RG(i,"da",e)}function RG(i,e,t=En){const n=i.__wdc||(i.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return i()});if(J8(e,n,t),t){let r=t.parent;for(;r&&r.parent;)K8(r.parent.vnode)&&yre(n,e,t,r),r=r.parent}}function yre(i,e,t,n){const r=J8(e,i,n,!0);sE(()=>{WM(n[e],r)},t)}function J8(i,e,t=En,n=!1){if(t){const r=t[i]||(t[i]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;am(),_1(t);const a=Vo(e,t,i,o);return md(),lm(),a});return n?r.unshift(s):r.push(s),s}}const cc=i=>(e,t=En)=>(!wv||i==="sp")&&J8(i,(...n)=>e(...n),t),xre=cc("bm"),cm=cc("m"),_re=cc("bu"),bre=cc("u"),NG=cc("bum"),sE=cc("um"),wre=cc("sp"),Sre=cc("rtg"),Are=cc("rtc");function Tre(i,e=En){J8("ec",i,e)}function V5(i,e){const t=Qs;if(t===null)return i;const n=ix(t)||t.proxy,r=i.dirs||(i.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=ki]=e[s];o&&(Tt(o)&&(o={mounted:o,updated:o}),o.deep&&sd(a),r.push({dir:o,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return i}function vh(i,e,t,n){const r=i.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(am(),Vo(l,t,8,[i.el,a,i,e]),lm())}}const FG="components";function oE(i,e){return Ere(FG,i,!0,e)||i}const Mre=Symbol();function Ere(i,e,t=!0,n=!1){const r=Qs||En;if(r){const s=r.type;if(i===FG){const a=nse(s,!1);if(a&&(a===e||a===B0(e)||a===X8(B0(e))))return s}const o=JL(r[i]||s[i],e)||JL(r.appContext[i],e);return!o&&n?s:o}}function JL(i,e){return i&&(i[e]||i[B0(e)]||i[X8(B0(e))])}function zG(i,e,t,n){let r;const s=t&&t[n];if(pt(i)||Hn(i)){r=new Array(i.length);for(let o=0,a=i.length;o<a;o++)r[o]=e(i[o],o,void 0,s&&s[o])}else if(typeof i=="number"){r=new Array(i);for(let o=0;o<i;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(Ui(i))if(i[Symbol.iterator])r=Array.from(i,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(i);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(i[c],c,a,s&&s[a])}}else r=[];return t&&(t[n]=r),r}const hS=i=>i?ZG(i)?ix(i)||i.proxy:hS(i.parent):null,P2=Ar(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>hS(i.parent),$root:i=>hS(i.root),$emit:i=>i.emit,$options:i=>aE(i),$forceUpdate:i=>i.f||(i.f=()=>nE(i.update)),$nextTick:i=>i.n||(i.n=SG.bind(i.proxy)),$watch:i=>fre.bind(i)}),G7=(i,e)=>i!==ki&&!i.__isScriptSetup&&jt(i,e),Cre={get({_:i},e){const{ctx:t,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=i;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(G7(n,e))return o[e]=1,n[e];if(r!==ki&&jt(r,e))return o[e]=2,r[e];if((c=i.propsOptions[0])&&jt(c,e))return o[e]=3,s[e];if(t!==ki&&jt(t,e))return o[e]=4,t[e];dS&&(o[e]=0)}}const h=P2[e];let u,d;if(h)return e==="$attrs"&&Ns(i,"get",e),h(i);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==ki&&jt(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,jt(d,e))return d[e]},set({_:i},e,t){const{data:n,setupState:r,ctx:s}=i;return G7(r,e)?(r[e]=t,!0):n!==ki&&jt(n,e)?(n[e]=t,!0):jt(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(s[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:s}},o){let a;return!!t[o]||i!==ki&&jt(i,o)||G7(e,o)||(a=s[0])&&jt(a,o)||jt(n,o)||jt(P2,o)||jt(r.config.globalProperties,o)},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:jt(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};let dS=!0;function Dre(i){const e=aE(i),t=i.proxy,n=i.ctx;dS=!1,e.beforeCreate&&eI(e.beforeCreate,i,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:y,beforeDestroy:g,beforeUnmount:v,destroyed:x,unmounted:_,render:w,renderTracked:b,renderTriggered:S,errorCaptured:A,serverPrefetch:E,expose:T,inheritAttrs:M,components:C,directives:D,filters:P}=e;if(c&&Pre(c,n,null,i.appContext.config.unwrapInjectedRef),o)for(const G in o){const U=o[G];Tt(U)&&(n[G]=U.bind(t))}if(r){const G=r.call(t,t);Ui(G)&&(i.data=C3(G))}if(dS=!0,s)for(const G in s){const U=s[G],Z=Tt(U)?U.bind(t,t):Tt(U.get)?U.get.bind(t,t):Pa,$=!Tt(U)&&Tt(U.set)?U.set.bind(t):Pa,W=Io({get:Z,set:$});Object.defineProperty(n,G,{enumerable:!0,configurable:!0,get:()=>W.value,set:X=>W.value=X})}if(a)for(const G in a)kG(a[G],n,t,G);if(l){const G=Tt(l)?l.call(t):l;Reflect.ownKeys(G).forEach(U=>{D2(U,G[U])})}h&&eI(h,i,"c");function k(G,U){pt(U)?U.forEach(Z=>G(Z.bind(t))):U&&G(U.bind(t))}if(k(xre,u),k(cm,d),k(_re,f),k(bre,p),k(gre,m),k(vre,y),k(Tre,A),k(Are,b),k(Sre,S),k(NG,v),k(sE,_),k(wre,E),pt(T))if(T.length){const G=i.exposed||(i.exposed={});T.forEach(U=>{Object.defineProperty(G,U,{get:()=>t[U],set:Z=>t[U]=Z})})}else i.exposed||(i.exposed={});w&&i.render===Pa&&(i.render=w),M!=null&&(i.inheritAttrs=M),C&&(i.components=C),D&&(i.directives=D)}function Pre(i,e,t=Pa,n=!1){pt(i)&&(i=fS(i));for(const r in i){const s=i[r];let o;Ui(s)?"default"in s?o=zr(s.from||r,s.default,!0):o=zr(s.from||r):o=zr(s),br(o)&&n?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function eI(i,e,t){Vo(pt(i)?i.map(n=>n.bind(e.proxy)):i.bind(e.proxy),e,t)}function kG(i,e,t,n){const r=n.includes(".")?PG(t,n):()=>t[n];if(Hn(i)){const s=e[i];Tt(s)&&Zt(r,s)}else if(Tt(i))Zt(r,i.bind(t));else if(Ui(i))if(pt(i))i.forEach(s=>kG(s,e,t,n));else{const s=Tt(i.handler)?i.handler.bind(t):e[i.handler];Tt(s)&&Zt(r,s,i)}}function aE(i){const e=i.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=i.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>G5(l,c,o,!0)),G5(l,e,o)),Ui(e)&&s.set(e,l),l}function G5(i,e,t,n=!1){const{mixins:r,extends:s}=e;s&&G5(i,s,t,!0),r&&r.forEach(o=>G5(i,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=Lre[o]||t&&t[o];i[o]=a?a(i[o],e[o]):e[o]}return i}const Lre={data:tI,props:Rh,emits:Rh,methods:Rh,computed:Rh,beforeCreate:Kr,created:Kr,beforeMount:Kr,mounted:Kr,beforeUpdate:Kr,updated:Kr,beforeDestroy:Kr,beforeUnmount:Kr,destroyed:Kr,unmounted:Kr,activated:Kr,deactivated:Kr,errorCaptured:Kr,serverPrefetch:Kr,components:Rh,directives:Rh,watch:Ore,provide:tI,inject:Ire};function tI(i,e){return e?i?function(){return Ar(Tt(i)?i.call(this,this):i,Tt(e)?e.call(this,this):e)}:e:i}function Ire(i,e){return Rh(fS(i),fS(e))}function fS(i){if(pt(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function Kr(i,e){return i?[...new Set([].concat(i,e))]:e}function Rh(i,e){return i?Ar(Ar(Object.create(null),i),e):e}function Ore(i,e){if(!i)return e;if(!e)return i;const t=Ar(Object.create(null),i);for(const n in e)t[n]=Kr(i[n],e[n]);return t}function Rre(i,e,t,n=!1){const r={},s={};z5(s,tx,1),i.propsDefaults=Object.create(null),BG(i,e,r,s);for(const o in i.propsOptions[0])o in r||(r[o]=void 0);t?i.props=n?r:Xne(r):i.type.props?i.props=r:i.props=s,i.attrs=s}function Nre(i,e,t,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=i,a=Wt(r),[l]=i.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=i.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(Q8(i.emitsOptions,d))continue;const f=e[d];if(l)if(jt(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=B0(d);r[p]=pS(l,a,p,f,i,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{BG(i,e,r,s)&&(c=!0);let h;for(const u in a)(!e||!jt(e,u)&&((h=Kd(u))===u||!jt(e,h)))&&(l?t&&(t[u]!==void 0||t[h]!==void 0)&&(r[u]=pS(l,a,u,void 0,i,!0)):delete r[u]);if(s!==a)for(const u in s)(!e||!jt(e,u))&&(delete s[u],c=!0)}c&&Wl(i,"set","$attrs")}function BG(i,e,t,n){const[r,s]=i.propsOptions;let o=!1,a;if(e)for(let l in e){if(Y4(l))continue;const c=e[l];let h;r&&jt(r,h=B0(l))?!s||!s.includes(h)?t[h]=c:(a||(a={}))[h]=c:Q8(i.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=Wt(t),c=a||ki;for(let h=0;h<s.length;h++){const u=s[h];t[u]=pS(r,l,u,c[u],i,!jt(c,u))}}return o}function pS(i,e,t,n,r,s){const o=i[t];if(o!=null){const a=jt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&Tt(l)){const{propsDefaults:c}=r;t in c?n=c[t]:(_1(r),n=c[t]=l.call(null,e),md())}else n=l}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Kd(t))&&(n=!0))}return n}function UG(i,e,t=!1){const n=e.propsCache,r=n.get(i);if(r)return r;const s=i.props,o={},a=[];let l=!1;if(!Tt(i)){const h=u=>{l=!0;const[d,f]=UG(u,e,!0);Ar(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}if(!s&&!l)return Ui(i)&&n.set(i,Hp),Hp;if(pt(s))for(let h=0;h<s.length;h++){const u=B0(s[h]);iI(u)&&(o[u]=ki)}else if(s)for(const h in s){const u=B0(h);if(iI(u)){const d=s[h],f=o[u]=pt(d)||Tt(d)?{type:d}:Object.assign({},d);if(f){const p=sI(Boolean,f.type),m=sI(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||jt(f,"default"))&&a.push(u)}}}const c=[o,a];return Ui(i)&&n.set(i,c),c}function iI(i){return i[0]!=="$"}function nI(i){const e=i&&i.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:i===null?"null":""}function rI(i,e){return nI(i)===nI(e)}function sI(i,e){return pt(e)?e.findIndex(t=>rI(t,i)):Tt(e)&&rI(e,i)?0:-1}const VG=i=>i[0]==="_"||i==="$stable",lE=i=>pt(i)?i.map(u0):[u0(i)],Fre=(i,e,t)=>{if(e._n)return e;const n=So((...r)=>lE(e(...r)),t);return n._c=!1,n},GG=(i,e,t)=>{const n=i._ctx;for(const r in i){if(VG(r))continue;const s=i[r];if(Tt(s))e[r]=Fre(r,s,n);else if(s!=null){const o=lE(s);e[r]=()=>o}}},jG=(i,e)=>{const t=lE(e);i.slots.default=()=>t},zre=(i,e)=>{if(i.vnode.shapeFlag&32){const t=e._;t?(i.slots=Wt(e),z5(e,"_",t)):GG(e,i.slots={})}else i.slots={},e&&jG(i,e);z5(i.slots,tx,1)},kre=(i,e,t)=>{const{vnode:n,slots:r}=i;let s=!0,o=ki;if(n.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(Ar(r,e),!t&&a===1&&delete r._):(s=!e.$stable,GG(e,r)),o=e}else e&&(jG(i,e),o={default:1});if(s)for(const a in r)!VG(a)&&!(a in o)&&delete r[a]};function HG(){return{app:null,config:{isNativeTag:une,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bre=0;function Ure(i,e){return function(n,r=null){Tt(n)||(n=Object.assign({},n)),r!=null&&!Ui(r)&&(r=null);const s=HG(),o=new Set;let a=!1;const l=s.app={_uid:Bre++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:ase,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&Tt(c.install)?(o.add(c),c.install(l,...h)):Tt(c)&&(o.add(c),c(l,...h))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,h){return h?(s.components[c]=h,l):s.components[c]},directive(c,h){return h?(s.directives[c]=h,l):s.directives[c]},mount(c,h,u){if(!a){const d=Gt(n,r);return d.appContext=s,h&&e?e(d,c):i(d,c,u),a=!0,l._container=c,c.__vue_app__=l,ix(d.component)||d.component.proxy}},unmount(){a&&(i(null,l._container),delete l._container.__vue_app__)},provide(c,h){return s.provides[c]=h,l}};return l}}function mS(i,e,t,n,r=!1){if(pt(i)){i.forEach((d,f)=>mS(d,e&&(pt(e)?e[f]:e),t,n,r));return}if(Q4(n)&&!r)return;const s=n.shapeFlag&4?ix(n.component)||n.component.proxy:n.el,o=r?null:s,{i:a,r:l}=i,c=e&&e.r,h=a.refs===ki?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(Hn(c)?(h[c]=null,jt(u,c)&&(u[c]=null)):br(c)&&(c.value=null)),Tt(l))xu(l,a,12,[o,h]);else{const d=Hn(l),f=br(l);if(d||f){const p=()=>{if(i.f){const m=d?jt(u,l)?u[l]:h[l]:l.value;r?pt(m)&&WM(m,s):pt(m)?m.includes(s)||m.push(s):d?(h[l]=[s],jt(u,l)&&(u[l]=h[l])):(l.value=[s],i.k&&(h[i.k]=l.value))}else d?(h[l]=o,jt(u,l)&&(u[l]=o)):f&&(l.value=o,i.k&&(h[i.k]=o))};o?(p.id=-1,gs(p,t)):p()}}}const gs=dre;function Vre(i){return Gre(i)}function Gre(i,e){const t=vne();t.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=Pa,insertStaticContent:p}=i,m=(L,z,Y,J=null,ee=null,F=null,N=!1,te=null,le=!!z.dynamicChildren)=>{if(L===z)return;L&&!Xh(L,z)&&(J=q(L),X(L,ee,F,!0),L=null),z.patchFlag===-2&&(le=!1,z.dynamicChildren=null);const{type:re,ref:ue,shapeFlag:pe}=z;switch(re){case ex:y(L,z,Y,J);break;case La:g(L,z,Y,J);break;case K4:L==null&&v(z,Y,J,N);break;case is:C(L,z,Y,J,ee,F,N,te,le);break;default:pe&1?w(L,z,Y,J,ee,F,N,te,le):pe&6?D(L,z,Y,J,ee,F,N,te,le):(pe&64||pe&128)&&re.process(L,z,Y,J,ee,F,N,te,le,Q)}ue!=null&&ee&&mS(ue,L&&L.ref,F,z||L,!z)},y=(L,z,Y,J)=>{if(L==null)n(z.el=a(z.children),Y,J);else{const ee=z.el=L.el;z.children!==L.children&&c(ee,z.children)}},g=(L,z,Y,J)=>{L==null?n(z.el=l(z.children||""),Y,J):z.el=L.el},v=(L,z,Y,J)=>{[L.el,L.anchor]=p(L.children,z,Y,J,L.el,L.anchor)},x=({el:L,anchor:z},Y,J)=>{let ee;for(;L&&L!==z;)ee=d(L),n(L,Y,J),L=ee;n(z,Y,J)},_=({el:L,anchor:z})=>{let Y;for(;L&&L!==z;)Y=d(L),r(L),L=Y;r(z)},w=(L,z,Y,J,ee,F,N,te,le)=>{N=N||z.type==="svg",L==null?b(z,Y,J,ee,F,N,te,le):E(L,z,ee,F,N,te,le)},b=(L,z,Y,J,ee,F,N,te)=>{let le,re;const{type:ue,props:pe,shapeFlag:xe,transition:Se,dirs:we}=L;if(le=L.el=o(L.type,F,pe&&pe.is,pe),xe&8?h(le,L.children):xe&16&&A(L.children,le,null,J,ee,F&&ue!=="foreignObject",N,te),we&&vh(L,null,J,"created"),S(le,L,L.scopeId,N,J),pe){for(const Ee in pe)Ee!=="value"&&!Y4(Ee)&&s(le,Ee,null,pe[Ee],F,L.children,J,ee,B);"value"in pe&&s(le,"value",null,pe.value),(re=pe.onVnodeBeforeMount)&&Ha(re,J,L)}we&&vh(L,null,J,"beforeMount");const ce=(!ee||ee&&!ee.pendingBranch)&&Se&&!Se.persisted;ce&&Se.beforeEnter(le),n(le,z,Y),((re=pe&&pe.onVnodeMounted)||ce||we)&&gs(()=>{re&&Ha(re,J,L),ce&&Se.enter(le),we&&vh(L,null,J,"mounted")},ee)},S=(L,z,Y,J,ee)=>{if(Y&&f(L,Y),J)for(let F=0;F<J.length;F++)f(L,J[F]);if(ee){let F=ee.subTree;if(z===F){const N=ee.vnode;S(L,N,N.scopeId,N.slotScopeIds,ee.parent)}}},A=(L,z,Y,J,ee,F,N,te,le=0)=>{for(let re=le;re<L.length;re++){const ue=L[re]=te?Vc(L[re]):u0(L[re]);m(null,ue,z,Y,J,ee,F,N,te)}},E=(L,z,Y,J,ee,F,N)=>{const te=z.el=L.el;let{patchFlag:le,dynamicChildren:re,dirs:ue}=z;le|=L.patchFlag&16;const pe=L.props||ki,xe=z.props||ki;let Se;Y&&yh(Y,!1),(Se=xe.onVnodeBeforeUpdate)&&Ha(Se,Y,z,L),ue&&vh(z,L,Y,"beforeUpdate"),Y&&yh(Y,!0);const we=ee&&z.type!=="foreignObject";if(re?T(L.dynamicChildren,re,te,Y,J,we,F):N||U(L,z,te,null,Y,J,we,F,!1),le>0){if(le&16)M(te,z,pe,xe,Y,J,ee);else if(le&2&&pe.class!==xe.class&&s(te,"class",null,xe.class,ee),le&4&&s(te,"style",pe.style,xe.style,ee),le&8){const ce=z.dynamicProps;for(let Ee=0;Ee<ce.length;Ee++){const ve=ce[Ee],Re=pe[ve],se=xe[ve];(se!==Re||ve==="value")&&s(te,ve,Re,se,ee,L.children,Y,J,B)}}le&1&&L.children!==z.children&&h(te,z.children)}else!N&&re==null&&M(te,z,pe,xe,Y,J,ee);((Se=xe.onVnodeUpdated)||ue)&&gs(()=>{Se&&Ha(Se,Y,z,L),ue&&vh(z,L,Y,"updated")},J)},T=(L,z,Y,J,ee,F,N)=>{for(let te=0;te<z.length;te++){const le=L[te],re=z[te],ue=le.el&&(le.type===is||!Xh(le,re)||le.shapeFlag&70)?u(le.el):Y;m(le,re,ue,null,J,ee,F,N,!0)}},M=(L,z,Y,J,ee,F,N)=>{if(Y!==J){if(Y!==ki)for(const te in Y)!Y4(te)&&!(te in J)&&s(L,te,Y[te],null,N,z.children,ee,F,B);for(const te in J){if(Y4(te))continue;const le=J[te],re=Y[te];le!==re&&te!=="value"&&s(L,te,re,le,N,z.children,ee,F,B)}"value"in J&&s(L,"value",Y.value,J.value)}},C=(L,z,Y,J,ee,F,N,te,le)=>{const re=z.el=L?L.el:a(""),ue=z.anchor=L?L.anchor:a("");let{patchFlag:pe,dynamicChildren:xe,slotScopeIds:Se}=z;Se&&(te=te?te.concat(Se):Se),L==null?(n(re,Y,J),n(ue,Y,J),A(z.children,Y,ue,ee,F,N,te,le)):pe>0&&pe&64&&xe&&L.dynamicChildren?(T(L.dynamicChildren,xe,Y,ee,F,N,te),(z.key!=null||ee&&z===ee.subTree)&&WG(L,z,!0)):U(L,z,Y,ue,ee,F,N,te,le)},D=(L,z,Y,J,ee,F,N,te,le)=>{z.slotScopeIds=te,L==null?z.shapeFlag&512?ee.ctx.activate(z,Y,J,N,le):P(z,Y,J,ee,F,N,le):I(L,z,le)},P=(L,z,Y,J,ee,F,N)=>{const te=L.component=Kre(L,J,ee);if(K8(L)&&(te.ctx.renderer=Q),Jre(te),te.asyncDep){if(ee&&ee.registerDep(te,k),!L.el){const le=te.subTree=Gt(La);g(null,le,z,Y)}return}k(te,L,z,Y,ee,F,N)},I=(L,z,Y)=>{const J=z.component=L.component;if(cre(L,z,Y))if(J.asyncDep&&!J.asyncResolved){G(J,z,Y);return}else J.next=z,nre(J.update),J.update();else z.el=L.el,J.vnode=z},k=(L,z,Y,J,ee,F,N)=>{const te=()=>{if(L.isMounted){let{next:ue,bu:pe,u:xe,parent:Se,vnode:we}=L,ce=ue,Ee;yh(L,!1),ue?(ue.el=we.el,G(L,ue,N)):ue=we,pe&&Z4(pe),(Ee=ue.props&&ue.props.onVnodeBeforeUpdate)&&Ha(Ee,Se,ue,we),yh(L,!0);const ve=U7(L),Re=L.subTree;L.subTree=ve,m(Re,ve,u(Re.el),q(Re),L,ee,F),ue.el=ve.el,ce===null&&ure(L,ve.el),xe&&gs(xe,ee),(Ee=ue.props&&ue.props.onVnodeUpdated)&&gs(()=>Ha(Ee,Se,ue,we),ee)}else{let ue;const{el:pe,props:xe}=z,{bm:Se,m:we,parent:ce}=L,Ee=Q4(z);if(yh(L,!1),Se&&Z4(Se),!Ee&&(ue=xe&&xe.onVnodeBeforeMount)&&Ha(ue,ce,z),yh(L,!0),pe&&ne){const ve=()=>{L.subTree=U7(L),ne(pe,L.subTree,L,ee,null)};Ee?z.type.__asyncLoader().then(()=>!L.isUnmounted&&ve()):ve()}else{const ve=L.subTree=U7(L);m(null,ve,Y,J,L,ee,F),z.el=ve.el}if(we&&gs(we,ee),!Ee&&(ue=xe&&xe.onVnodeMounted)){const ve=z;gs(()=>Ha(ue,ce,ve),ee)}(z.shapeFlag&256||ce&&Q4(ce.vnode)&&ce.vnode.shapeFlag&256)&&L.a&&gs(L.a,ee),L.isMounted=!0,z=Y=J=null}},le=L.effect=new YM(te,()=>nE(re),L.scope),re=L.update=()=>le.run();re.id=L.uid,yh(L,!0),re()},G=(L,z,Y)=>{z.component=L;const J=L.vnode.props;L.vnode=z,L.next=null,Nre(L,z.props,J,Y),kre(L,z.children,Y),am(),ZL(),lm()},U=(L,z,Y,J,ee,F,N,te,le=!1)=>{const re=L&&L.children,ue=L?L.shapeFlag:0,pe=z.children,{patchFlag:xe,shapeFlag:Se}=z;if(xe>0){if(xe&128){$(re,pe,Y,J,ee,F,N,te,le);return}else if(xe&256){Z(re,pe,Y,J,ee,F,N,te,le);return}}Se&8?(ue&16&&B(re,ee,F),pe!==re&&h(Y,pe)):ue&16?Se&16?$(re,pe,Y,J,ee,F,N,te,le):B(re,ee,F,!0):(ue&8&&h(Y,""),Se&16&&A(pe,Y,J,ee,F,N,te,le))},Z=(L,z,Y,J,ee,F,N,te,le)=>{L=L||Hp,z=z||Hp;const re=L.length,ue=z.length,pe=Math.min(re,ue);let xe;for(xe=0;xe<pe;xe++){const Se=z[xe]=le?Vc(z[xe]):u0(z[xe]);m(L[xe],Se,Y,null,ee,F,N,te,le)}re>ue?B(L,ee,F,!0,!1,pe):A(z,Y,J,ee,F,N,te,le,pe)},$=(L,z,Y,J,ee,F,N,te,le)=>{let re=0;const ue=z.length;let pe=L.length-1,xe=ue-1;for(;re<=pe&&re<=xe;){const Se=L[re],we=z[re]=le?Vc(z[re]):u0(z[re]);if(Xh(Se,we))m(Se,we,Y,null,ee,F,N,te,le);else break;re++}for(;re<=pe&&re<=xe;){const Se=L[pe],we=z[xe]=le?Vc(z[xe]):u0(z[xe]);if(Xh(Se,we))m(Se,we,Y,null,ee,F,N,te,le);else break;pe--,xe--}if(re>pe){if(re<=xe){const Se=xe+1,we=Se<ue?z[Se].el:J;for(;re<=xe;)m(null,z[re]=le?Vc(z[re]):u0(z[re]),Y,we,ee,F,N,te,le),re++}}else if(re>xe)for(;re<=pe;)X(L[re],ee,F,!0),re++;else{const Se=re,we=re,ce=new Map;for(re=we;re<=xe;re++){const Mt=z[re]=le?Vc(z[re]):u0(z[re]);Mt.key!=null&&ce.set(Mt.key,re)}let Ee,ve=0;const Re=xe-we+1;let se=!1,be=0;const Ge=new Array(Re);for(re=0;re<Re;re++)Ge[re]=0;for(re=Se;re<=pe;re++){const Mt=L[re];if(ve>=Re){X(Mt,ee,F,!0);continue}let mt;if(Mt.key!=null)mt=ce.get(Mt.key);else for(Ee=we;Ee<=xe;Ee++)if(Ge[Ee-we]===0&&Xh(Mt,z[Ee])){mt=Ee;break}mt===void 0?X(Mt,ee,F,!0):(Ge[mt-we]=re+1,mt>=be?be=mt:se=!0,m(Mt,z[mt],Y,null,ee,F,N,te,le),ve++)}const et=se?jre(Ge):Hp;for(Ee=et.length-1,re=Re-1;re>=0;re--){const Mt=we+re,mt=z[Mt],yi=Mt+1<ue?z[Mt+1].el:J;Ge[re]===0?m(null,mt,Y,yi,ee,F,N,te,le):se&&(Ee<0||re!==et[Ee]?W(mt,Y,yi,2):Ee--)}}},W=(L,z,Y,J,ee=null)=>{const{el:F,type:N,transition:te,children:le,shapeFlag:re}=L;if(re&6){W(L.component.subTree,z,Y,J);return}if(re&128){L.suspense.move(z,Y,J);return}if(re&64){N.move(L,z,Y,Q);return}if(N===is){n(F,z,Y);for(let pe=0;pe<le.length;pe++)W(le[pe],z,Y,J);n(L.anchor,z,Y);return}if(N===K4){x(L,z,Y);return}if(J!==2&&re&1&&te)if(J===0)te.beforeEnter(F),n(F,z,Y),gs(()=>te.enter(F),ee);else{const{leave:pe,delayLeave:xe,afterLeave:Se}=te,we=()=>n(F,z,Y),ce=()=>{pe(F,()=>{we(),Se&&Se()})};xe?xe(F,we,ce):ce()}else n(F,z,Y)},X=(L,z,Y,J=!1,ee=!1)=>{const{type:F,props:N,ref:te,children:le,dynamicChildren:re,shapeFlag:ue,patchFlag:pe,dirs:xe}=L;if(te!=null&&mS(te,null,Y,L,!0),ue&256){z.ctx.deactivate(L);return}const Se=ue&1&&xe,we=!Q4(L);let ce;if(we&&(ce=N&&N.onVnodeBeforeUnmount)&&Ha(ce,z,L),ue&6)V(L.component,Y,J);else{if(ue&128){L.suspense.unmount(Y,J);return}Se&&vh(L,null,z,"beforeUnmount"),ue&64?L.type.remove(L,z,Y,ee,Q,J):re&&(F!==is||pe>0&&pe&64)?B(re,z,Y,!1,!0):(F===is&&pe&384||!ee&&ue&16)&&B(le,z,Y),J&&j(L)}(we&&(ce=N&&N.onVnodeUnmounted)||Se)&&gs(()=>{ce&&Ha(ce,z,L),Se&&vh(L,null,z,"unmounted")},Y)},j=L=>{const{type:z,el:Y,anchor:J,transition:ee}=L;if(z===is){H(Y,J);return}if(z===K4){_(L);return}const F=()=>{r(Y),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(L.shapeFlag&1&&ee&&!ee.persisted){const{leave:N,delayLeave:te}=ee,le=()=>N(Y,F);te?te(L.el,F,le):le()}else F()},H=(L,z)=>{let Y;for(;L!==z;)Y=d(L),r(L),L=Y;r(z)},V=(L,z,Y)=>{const{bum:J,scope:ee,update:F,subTree:N,um:te}=L;J&&Z4(J),ee.stop(),F&&(F.active=!1,X(N,L,z,Y)),te&&gs(te,z),gs(()=>{L.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},B=(L,z,Y,J=!1,ee=!1,F=0)=>{for(let N=F;N<L.length;N++)X(L[N],z,Y,J,ee)},q=L=>L.shapeFlag&6?q(L.component.subTree):L.shapeFlag&128?L.suspense.next():d(L.anchor||L.el),K=(L,z,Y)=>{L==null?z._vnode&&X(z._vnode,null,null,!0):m(z._vnode||null,L,z,null,null,null,Y),ZL(),TG(),z._vnode=L},Q={p:m,um:X,m:W,r:j,mt:P,mc:A,pc:U,pbc:T,n:q,o:i};let oe,ne;return e&&([oe,ne]=e(Q)),{render:K,hydrate:oe,createApp:Ure(K,oe)}}function yh({effect:i,update:e},t){i.allowRecurse=e.allowRecurse=t}function WG(i,e,t=!1){const n=i.children,r=e.children;if(pt(n)&&pt(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Vc(r[s]),a.el=o.el),t||WG(o,a)),a.type===ex&&(a.el=o.el)}}function jre(i){const e=i.slice(),t=[0];let n,r,s,o,a;const l=i.length;for(n=0;n<l;n++){const c=i[n];if(c!==0){if(r=t[t.length-1],i[r]<c){e[n]=r,t.push(n);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,i[t[a]]<c?s=a+1:o=a;c<i[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const Hre=i=>i.__isTeleport,is=Symbol(void 0),ex=Symbol(void 0),La=Symbol(void 0),K4=Symbol(void 0),L2=[];let Ta=null;function ur(i=!1){L2.push(Ta=i?null:[])}function Wre(){L2.pop(),Ta=L2[L2.length-1]||null}let bv=1;function oI(i){bv+=i}function $G(i){return i.dynamicChildren=bv>0?Ta||Hp:null,Wre(),bv>0&&Ta&&Ta.push(i),i}function wr(i,e,t,n,r,s){return $G(Be(i,e,t,n,r,s,!0))}function $re(i,e,t,n,r){return $G(Gt(i,e,t,n,r,!0))}function gS(i){return i?i.__v_isVNode===!0:!1}function Xh(i,e){return i.type===e.type&&i.key===e.key}const tx="__vInternal",qG=({key:i})=>i??null,J4=({ref:i,ref_key:e,ref_for:t})=>i!=null?Hn(i)||br(i)||Tt(i)?{i:Qs,r:i,k:e,f:!!t}:i:null;function Be(i,e=null,t=null,n=0,r=null,s=i===is?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&qG(e),ref:e&&J4(e),scopeId:CG,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Qs};return a?(cE(l,t),s&128&&i.normalize(l)):t&&(l.shapeFlag|=Hn(t)?8:16),bv>0&&!o&&Ta&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ta.push(l),l}const Gt=qre;function qre(i,e=null,t=null,n=0,r=null,s=!1){if((!i||i===Mre)&&(i=La),gS(i)){const a=Nu(i,e,!0);return t&&cE(a,t),bv>0&&!s&&Ta&&(a.shapeFlag&6?Ta[Ta.indexOf(i)]=a:Ta.push(a)),a.patchFlag|=-2,a}if(rse(i)&&(i=i.__vccOpts),e){e=Xre(e);let{class:a,style:l}=e;a&&!Hn(a)&&(e.class=Ll(a)),Ui(l)&&(mG(l)&&!pt(l)&&(l=Ar({},l)),e.style=y1(l))}const o=Hn(i)?1:hre(i)?128:Hre(i)?64:Ui(i)?4:Tt(i)?2:0;return Be(i,e,t,n,r,o,s,!0)}function Xre(i){return i?mG(i)||tx in i?Ar({},i):i:null}function Nu(i,e,t=!1){const{props:n,ref:r,patchFlag:s,children:o}=i,a=e?Yre(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:a,key:a&&qG(a),ref:e&&e.ref?t&&r?pt(r)?r.concat(J4(e)):[r,J4(e)]:J4(e):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==is?s===-1?16:s|16:s,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Nu(i.ssContent),ssFallback:i.ssFallback&&Nu(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function vs(i=" ",e=0){return Gt(ex,null,i,e)}function XG(i,e){const t=Gt(K4,null,i);return t.staticCount=e,t}function kQe(i="",e=!1){return e?(ur(),$re(La,null,i)):Gt(La,null,i)}function u0(i){return i==null||typeof i=="boolean"?Gt(La):pt(i)?Gt(is,null,i.slice()):typeof i=="object"?Vc(i):Gt(ex,null,String(i))}function Vc(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Nu(i)}function cE(i,e){let t=0;const{shapeFlag:n}=i;if(e==null)e=null;else if(pt(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),cE(i,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(tx in e)?e._ctx=Qs:r===3&&Qs&&(Qs.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:Qs},t=32):(e=String(e),n&64?(t=16,e=[vs(e)]):t=8);i.children=e,i.shapeFlag|=t}function Yre(...i){const e={};for(let t=0;t<i.length;t++){const n=i[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Ll([e.class,n.class]));else if(r==="style")e.style=y1([e.style,n.style]);else if(W8(r)){const s=e[r],o=n[r];o&&s!==o&&!(pt(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=n[r])}return e}function Ha(i,e,t,n=null){Vo(i,e,7,[t,n])}const Zre=HG();let Qre=0;function Kre(i,e,t){const n=i.type,r=(e?e.appContext:i.appContext)||Zre,s={uid:Qre++,vnode:i,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new nG(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:UG(n,r),emitsOptions:EG(n,r),emit:null,emitted:null,propsDefaults:ki,inheritAttrs:n.inheritAttrs,ctx:ki,data:ki,props:ki,attrs:ki,slots:ki,refs:ki,setupState:ki,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ore.bind(null,s),i.ce&&i.ce(s),s}let En=null;const YG=()=>En||Qs,_1=i=>{En=i,i.scope.on()},md=()=>{En&&En.scope.off(),En=null};function ZG(i){return i.vnode.shapeFlag&4}let wv=!1;function Jre(i,e=!1){wv=e;const{props:t,children:n}=i.vnode,r=ZG(i);Rre(i,t,r,e),zre(i,n);const s=r?ese(i,e):void 0;return wv=!1,s}function ese(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=eE(new Proxy(i.ctx,Cre));const{setup:n}=t;if(n){const r=i.setupContext=n.length>1?ise(i):null;_1(i),am();const s=xu(n,i,0,[i.props,r]);if(lm(),md(),eG(s)){if(s.then(md,md),e)return s.then(o=>{aI(i,o,e)}).catch(o=>{Z8(o,i,0)});i.asyncDep=s}else aI(i,s,e)}else QG(i,e)}function aI(i,e,t){Tt(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Ui(e)&&(i.setupState=xG(e)),QG(i,t)}let lI;function QG(i,e,t){const n=i.type;if(!i.render){if(!e&&lI&&!n.render){const r=n.template||aE(i).template;if(r){const{isCustomElement:s,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Ar(Ar({isCustomElement:s,delimiters:a},o),l);n.render=lI(r,c)}}i.render=n.render||Pa}_1(i),am(),Dre(i),lm(),md()}function tse(i){return new Proxy(i.attrs,{get(e,t){return Ns(i,"get","$attrs"),e[t]}})}function ise(i){const e=n=>{i.exposed=n||{}};let t;return{get attrs(){return t||(t=tse(i))},slots:i.slots,emit:i.emit,expose:e}}function ix(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(xG(eE(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in P2)return P2[t](i)},has(e,t){return t in e||t in P2}}))}function nse(i,e=!0){return Tt(i)?i.displayName||i.name:i.name||e&&i.__name}function rse(i){return Tt(i)&&"__vccOpts"in i}const Io=(i,e)=>ere(i,e,wv);function uE(i,e,t){const n=arguments.length;return n===2?Ui(e)&&!pt(e)?gS(e)?Gt(i,null,[e]):Gt(i,e):Gt(i,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&gS(t)&&(t=[t]),Gt(i,e,t))}const sse=Symbol(""),ose=()=>zr(sse),ase="3.2.47",lse="http://www.w3.org/2000/svg",Yh=typeof document<"u"?document:null,cI=Yh&&Yh.createElement("template"),cse={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,n)=>{const r=e?Yh.createElementNS(lse,i):Yh.createElement(i,t?{is:t}:void 0);return i==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:i=>Yh.createTextNode(i),createComment:i=>Yh.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Yh.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,n,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{cI.innerHTML=n?`<svg>${i}</svg>`:i;const a=cI.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function use(i,e,t){const n=i._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}function hse(i,e,t){const n=i.style,r=Hn(t);if(t&&!r){if(e&&!Hn(e))for(const s in e)t[s]==null&&vS(n,s,"");for(const s in t)vS(n,s,t[s])}else{const s=n.display;r?e!==t&&(n.cssText=t):e&&i.removeAttribute("style"),"_vod"in i&&(n.display=s)}}const uI=/\s*!important$/;function vS(i,e,t){if(pt(t))t.forEach(n=>vS(i,e,n));else if(t==null&&(t=""),e.startsWith("--"))i.setProperty(e,t);else{const n=dse(i,e);uI.test(t)?i.setProperty(Kd(n),t.replace(uI,""),"important"):i[n]=t}}const hI=["Webkit","Moz","ms"],j7={};function dse(i,e){const t=j7[e];if(t)return t;let n=B0(e);if(n!=="filter"&&n in i)return j7[e]=n;n=X8(n);for(let r=0;r<hI.length;r++){const s=hI[r]+n;if(s in i)return j7[e]=s}return e}const dI="http://www.w3.org/1999/xlink";function fse(i,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?i.removeAttributeNS(dI,e.slice(6,e.length)):i.setAttributeNS(dI,e,t);else{const s=cne(e);t==null||s&&!QV(t)?i.removeAttribute(e):i.setAttribute(e,s?"":t)}}function pse(i,e,t,n,r,s,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,r,s),i[e]=t??"";return}if(e==="value"&&i.tagName!=="PROGRESS"&&!i.tagName.includes("-")){i._value=t;const l=t??"";(i.value!==l||i.tagName==="OPTION")&&(i.value=l),t==null&&i.removeAttribute(e);return}let a=!1;if(t===""||t==null){const l=typeof i[e];l==="boolean"?t=QV(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{i[e]=t}catch{}a&&i.removeAttribute(e)}function fp(i,e,t,n){i.addEventListener(e,t,n)}function mse(i,e,t,n){i.removeEventListener(e,t,n)}function gse(i,e,t,n,r=null){const s=i._vei||(i._vei={}),o=s[e];if(n&&o)o.value=n;else{const[a,l]=vse(e);if(n){const c=s[e]=_se(n,r);fp(i,a,c,l)}else o&&(mse(i,a,o,l),s[e]=void 0)}}const fI=/(?:Once|Passive|Capture)$/;function vse(i){let e;if(fI.test(i)){e={};let n;for(;n=i.match(fI);)i=i.slice(0,i.length-n[0].length),e[n[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Kd(i.slice(2)),e]}let H7=0;const yse=Promise.resolve(),xse=()=>H7||(yse.then(()=>H7=0),H7=Date.now());function _se(i,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Vo(bse(n,t.value),e,5,[n])};return t.value=i,t.attached=xse(),t}function bse(i,e){if(pt(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const pI=/^on[a-z]/,wse=(i,e,t,n,r=!1,s,o,a,l)=>{e==="class"?use(i,n,r):e==="style"?hse(i,t,n):W8(e)?HM(e)||gse(i,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Sse(i,e,n,r))?pse(i,e,n,s,o,a,l):(e==="true-value"?i._trueValue=n:e==="false-value"&&(i._falseValue=n),fse(i,e,n,r))};function Sse(i,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in i&&pI.test(e)&&Tt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA"||pI.test(e)&&Hn(t)?!1:e in i}const vc="transition",rg="animation",hE=(i,{slots:e})=>uE(LG,Ase(i),e);hE.displayName="Transition";const KG={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hE.props=Ar({},LG.props,KG);const xh=(i,e=[])=>{pt(i)?i.forEach(t=>t(...e)):i&&i(...e)},mI=i=>i?pt(i)?i.some(e=>e.length>1):i.length>1:!1;function Ase(i){const e={};for(const C in i)C in KG||(e[C]=i[C]);if(i.css===!1)return e;const{name:t="v",type:n,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:u=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=i,p=Tse(r),m=p&&p[0],y=p&&p[1],{onBeforeEnter:g,onEnter:v,onEnterCancelled:x,onLeave:_,onLeaveCancelled:w,onBeforeAppear:b=g,onAppear:S=v,onAppearCancelled:A=x}=e,E=(C,D,P)=>{_h(C,D?h:a),_h(C,D?c:o),P&&P()},T=(C,D)=>{C._isLeaving=!1,_h(C,u),_h(C,f),_h(C,d),D&&D()},M=C=>(D,P)=>{const I=C?S:v,k=()=>E(D,C,P);xh(I,[D,k]),gI(()=>{_h(D,C?l:s),yc(D,C?h:a),mI(I)||vI(D,n,m,k)})};return Ar(e,{onBeforeEnter(C){xh(g,[C]),yc(C,s),yc(C,o)},onBeforeAppear(C){xh(b,[C]),yc(C,l),yc(C,c)},onEnter:M(!1),onAppear:M(!0),onLeave(C,D){C._isLeaving=!0;const P=()=>T(C,D);yc(C,u),Cse(),yc(C,d),gI(()=>{C._isLeaving&&(_h(C,u),yc(C,f),mI(_)||vI(C,n,y,P))}),xh(_,[C,P])},onEnterCancelled(C){E(C,!1),xh(x,[C])},onAppearCancelled(C){E(C,!0),xh(A,[C])},onLeaveCancelled(C){T(C),xh(w,[C])}})}function Tse(i){if(i==null)return null;if(Ui(i))return[W7(i.enter),W7(i.leave)];{const e=W7(i);return[e,e]}}function W7(i){return gne(i)}function yc(i,e){e.split(/\s+/).forEach(t=>t&&i.classList.add(t)),(i._vtc||(i._vtc=new Set)).add(e)}function _h(i,e){e.split(/\s+/).forEach(n=>n&&i.classList.remove(n));const{_vtc:t}=i;t&&(t.delete(e),t.size||(i._vtc=void 0))}function gI(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let Mse=0;function vI(i,e,t,n){const r=i._endId=++Mse,s=()=>{r===i._endId&&n()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=Ese(i,e);if(!o)return n();const c=o+"end";let h=0;const u=()=>{i.removeEventListener(c,d),s()},d=f=>{f.target===i&&++h>=l&&u()};setTimeout(()=>{h<l&&u()},a+1),i.addEventListener(c,d)}function Ese(i,e){const t=window.getComputedStyle(i),n=p=>(t[p]||"").split(", "),r=n(`${vc}Delay`),s=n(`${vc}Duration`),o=yI(r,s),a=n(`${rg}Delay`),l=n(`${rg}Duration`),c=yI(a,l);let h=null,u=0,d=0;e===vc?o>0&&(h=vc,u=o,d=s.length):e===rg?c>0&&(h=rg,u=c,d=l.length):(u=Math.max(o,c),h=u>0?o>c?vc:rg:null,d=h?h===vc?s.length:l.length:0);const f=h===vc&&/\b(transform|all)(,|$)/.test(n(`${vc}Property`).toString());return{type:h,timeout:u,propCount:d,hasTransform:f}}function yI(i,e){for(;i.length<e.length;)i=i.concat(i);return Math.max(...e.map((t,n)=>xI(t)+xI(i[n])))}function xI(i){return Number(i.slice(0,-1).replace(",","."))*1e3}function Cse(){return document.body.offsetHeight}const _I=i=>{const e=i.props["onUpdate:modelValue"]||!1;return pt(e)?t=>Z4(e,t):e};function Dse(i){i.target.composing=!0}function bI(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const BQe={created(i,{modifiers:{lazy:e,trim:t,number:n}},r){i._assign=_I(r);const s=n||r.props&&r.props.type==="number";fp(i,e?"change":"input",o=>{if(o.target.composing)return;let a=i.value;t&&(a=a.trim()),s&&(a=rS(a)),i._assign(a)}),t&&fp(i,"change",()=>{i.value=i.value.trim()}),e||(fp(i,"compositionstart",Dse),fp(i,"compositionend",bI),fp(i,"change",bI))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,modifiers:{lazy:t,trim:n,number:r}},s){if(i._assign=_I(s),i.composing||document.activeElement===i&&i.type!=="range"&&(t||n&&i.value.trim()===e||(r||i.type==="number")&&rS(i.value)===e))return;const o=e??"";i.value!==o&&(i.value=o)}},Pse={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},UQe=(i,e)=>t=>{if(!("key"in t))return;const n=Kd(t.key);if(e.some(r=>r===n||Pse[r]===n))return i(t)},j5={beforeMount(i,{value:e},{transition:t}){i._vod=i.style.display==="none"?"":i.style.display,t&&e?t.beforeEnter(i):sg(i,e)},mounted(i,{value:e},{transition:t}){t&&e&&t.enter(i)},updated(i,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(i),sg(i,!0),n.enter(i)):n.leave(i,()=>{sg(i,!1)}):sg(i,e))},beforeUnmount(i,{value:e}){sg(i,e)}};function sg(i,e){i.style.display=e?i._vod:"none"}const Lse=Ar({patchProp:wse},cse);let wI;function Ise(){return wI||(wI=Vre(Lse))}const Ose=(...i)=>{const e=Ise().createApp(...i),{mount:t}=e;return e.mount=n=>{const r=Rse(n);if(!r)return;const s=e._component;!Tt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Rse(i){return Hn(i)?document.querySelector(i):i}var Nse=!1;/*!
  * pinia v2.0.30
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Fse=Symbol();var SI;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(SI||(SI={}));function zse(){const i=yne(!0),e=i.run(()=>Ul({}));let t=[],n=[];const r=eE({install(s){r._a=s,s.provide(Fse,r),s.config.globalProperties.$pinia=r,n.forEach(o=>t.push(o)),n=[]},use(s){return!this._a&&!Nse?n.push(s):t.push(s),this},_p:t,_a:null,_e:i,_s:new Map,state:e});return r}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const pp=typeof window<"u";function kse(i){return i.__esModule||i[Symbol.toStringTag]==="Module"}const ci=Object.assign;function $7(i,e){const t={};for(const n in e){const r=e[n];t[n]=Ba(r)?r.map(i):i(r)}return t}const I2=()=>{},Ba=Array.isArray,Bse=/\/$/,Use=i=>i.replace(Bse,"");function q7(i,e,t="/"){let n,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=i(s)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=Hse(n??e,t),{fullPath:n+(s&&"?")+s+o,path:n,query:r,hash:o}}function Vse(i,e){const t=e.query?i(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function AI(i,e){return!e||!i.toLowerCase().startsWith(e.toLowerCase())?i:i.slice(e.length)||"/"}function Gse(i,e,t){const n=e.matched.length-1,r=t.matched.length-1;return n>-1&&n===r&&b1(e.matched[n],t.matched[r])&&JG(e.params,t.params)&&i(e.query)===i(t.query)&&e.hash===t.hash}function b1(i,e){return(i.aliasOf||i)===(e.aliasOf||e)}function JG(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(!jse(i[t],e[t]))return!1;return!0}function jse(i,e){return Ba(i)?TI(i,e):Ba(e)?TI(e,i):i===e}function TI(i,e){return Ba(e)?i.length===e.length&&i.every((t,n)=>t===e[n]):i.length===1&&i[0]===e}function Hse(i,e){if(i.startsWith("/"))return i;if(!i)return e;const t=e.split("/"),n=i.split("/");let r=t.length-1,s,o;for(s=0;s<n.length;s++)if(o=n[s],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(s-(s===n.length?1:0)).join("/")}var Sv;(function(i){i.pop="pop",i.push="push"})(Sv||(Sv={}));var O2;(function(i){i.back="back",i.forward="forward",i.unknown=""})(O2||(O2={}));function Wse(i){if(!i)if(pp){const e=document.querySelector("base");i=e&&e.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),Use(i)}const $se=/^[^#]+#/;function qse(i,e){return i.replace($se,"#")+e}function Xse(i,e){const t=document.documentElement.getBoundingClientRect(),n=i.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const nx=()=>({left:window.pageXOffset,top:window.pageYOffset});function Yse(i){let e;if("el"in i){const t=i.el,n=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=Xse(r,i)}else e=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function MI(i,e){return(history.state?history.state.position-e:-1)+i}const yS=new Map;function Zse(i,e){yS.set(i,e)}function Qse(i){const e=yS.get(i);return yS.delete(i),e}let Kse=()=>location.protocol+"//"+location.host;function ej(i,e){const{pathname:t,search:n,hash:r}=e,s=i.indexOf("#");if(s>-1){let a=r.includes(i.slice(s))?i.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),AI(l,"")}return AI(t,i)+n+r}function Jse(i,e,t,n){let r=[],s=[],o=null;const a=({state:d})=>{const f=ej(i,location),p=t.value,m=e.value;let y=0;if(d){if(t.value=f,e.value=d,o&&o===p){o=null;return}y=m?d.position-m.position:0}else n(f);r.forEach(g=>{g(t.value,p,{delta:y,type:Sv.pop,direction:y?y>0?O2.forward:O2.back:O2.unknown})})};function l(){o=t.value}function c(d){r.push(d);const f=()=>{const p=r.indexOf(d);p>-1&&r.splice(p,1)};return s.push(f),f}function h(){const{history:d}=window;d.state&&d.replaceState(ci({},d.state,{scroll:nx()}),"")}function u(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:c,destroy:u}}function EI(i,e,t,n=!1,r=!1){return{back:i,current:e,forward:t,replaced:n,position:window.history.length,scroll:r?nx():null}}function eoe(i){const{history:e,location:t}=window,n={value:ej(i,t)},r={value:e.state};r.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const u=i.indexOf("#"),d=u>-1?(t.host&&document.querySelector("base")?i:i.slice(u))+l:Kse()+i+l;try{e[h?"replaceState":"pushState"](c,"",d),r.value=c}catch(f){console.error(f),t[h?"replace":"assign"](d)}}function o(l,c){const h=ci({},e.state,EI(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,h,!0),n.value=l}function a(l,c){const h=ci({},r.value,e.state,{forward:l,scroll:nx()});s(h.current,h,!0);const u=ci({},EI(n.value,l,null),{position:h.position+1},c);s(l,u,!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function toe(i){i=Wse(i);const e=eoe(i),t=Jse(i,e.state,e.location,e.replace);function n(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=ci({location:"",base:i,go:n,createHref:qse.bind(null,i)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ioe(i){return typeof i=="string"||i&&typeof i=="object"}function tj(i){return typeof i=="string"||typeof i=="symbol"}const xc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ij=Symbol("");var CI;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(CI||(CI={}));function w1(i,e){return ci(new Error,{type:i,[ij]:!0},e)}function al(i,e){return i instanceof Error&&ij in i&&(e==null||!!(i.type&e))}const DI="[^/]+?",noe={sensitive:!1,strict:!1,start:!0,end:!0},roe=/[.+*?^${}()[\]/\\]/g;function soe(i,e){const t=ci({},noe,e),n=[];let r=t.start?"^":"";const s=[];for(const c of i){const h=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let u=0;u<c.length;u++){const d=c[u];let f=40+(t.sensitive?.25:0);if(d.type===0)u||(r+="/"),r+=d.value.replace(roe,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:y,regexp:g}=d;s.push({name:p,repeatable:m,optional:y});const v=g||DI;if(v!==DI){f+=10;try{new RegExp(`(${v})`)}catch(_){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+_.message)}}let x=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;u||(x=y&&c.length<2?`(?:/${x})`:"/"+x),y&&(x+="?"),r+=x,f+=20,y&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}h.push(f)}n.push(h)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const h=c.match(o),u={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",p=s[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(c){let h="",u=!1;for(const d of i){(!u||!h.endsWith("/"))&&(h+="/"),u=!1;for(const f of d)if(f.type===0)h+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:y}=f,g=p in c?c[p]:"";if(Ba(g)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Ba(g)?g.join("/"):g;if(!v)if(y)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);h+=v}}return h||"/"}return{re:o,score:n,keys:s,parse:a,stringify:l}}function ooe(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=e[t]-i[t];if(n)return n;t++}return i.length<e.length?i.length===1&&i[0]===40+40?-1:1:i.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function aoe(i,e){let t=0;const n=i.score,r=e.score;for(;t<n.length&&t<r.length;){const s=ooe(n[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-n.length)===1){if(PI(n))return 1;if(PI(r))return-1}return r.length-n.length}function PI(i){const e=i[i.length-1];return i.length>0&&e[e.length-1]<0}const loe={type:0,value:""},coe=/[a-zA-Z0-9_]/;function uoe(i){if(!i)return[[]];if(i==="/")return[[loe]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,n=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",h="";function u(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<i.length;){if(l=i[a++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),t=1):d();break;case 4:d(),t=n;break;case 1:l==="("?t=2:coe.test(l)?d():(u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=3:h+=l;break;case 3:u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),r}function hoe(i,e,t){const n=soe(uoe(i.path),t),r=ci(n,{record:i,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function doe(i,e){const t=[],n=new Map;e=OI({strict:!1,end:!0,sensitive:!1},e);function r(h){return n.get(h)}function s(h,u,d){const f=!d,p=foe(h);p.aliasOf=d&&d.record;const m=OI(e,h),y=[p];if("alias"in h){const x=typeof h.alias=="string"?[h.alias]:h.alias;for(const _ of x)y.push(ci({},p,{components:d?d.record.components:p.components,path:_,aliasOf:d?d.record:p}))}let g,v;for(const x of y){const{path:_}=x;if(u&&_[0]!=="/"){const w=u.record.path,b=w[w.length-1]==="/"?"":"/";x.path=u.record.path+(_&&b+_)}if(g=hoe(x,u,m),d?d.alias.push(g):(v=v||g,v!==g&&v.alias.push(g),f&&h.name&&!II(g)&&o(h.name)),p.children){const w=p.children;for(let b=0;b<w.length;b++)s(w[b],g,d&&d.children[b])}d=d||g,(g.record.components&&Object.keys(g.record.components).length||g.record.name||g.record.redirect)&&l(g)}return v?()=>{o(v)}:I2}function o(h){if(tj(h)){const u=n.get(h);u&&(n.delete(h),t.splice(t.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=t.indexOf(h);u>-1&&(t.splice(u,1),h.record.name&&n.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return t}function l(h){let u=0;for(;u<t.length&&aoe(h,t[u])>=0&&(h.record.path!==t[u].record.path||!nj(h,t[u]));)u++;t.splice(u,0,h),h.record.name&&!II(h)&&n.set(h.record.name,h)}function c(h,u){let d,f={},p,m;if("name"in h&&h.name){if(d=n.get(h.name),!d)throw w1(1,{location:h});m=d.record.name,f=ci(LI(u.params,d.keys.filter(v=>!v.optional).map(v=>v.name)),h.params&&LI(h.params,d.keys.map(v=>v.name))),p=d.stringify(f)}else if("path"in h)p=h.path,d=t.find(v=>v.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=u.name?n.get(u.name):t.find(v=>v.re.test(u.path)),!d)throw w1(1,{location:h,currentLocation:u});m=d.record.name,f=ci({},u.params,h.params),p=d.stringify(f)}const y=[];let g=d;for(;g;)y.unshift(g.record),g=g.parent;return{name:m,path:p,params:f,matched:y,meta:moe(y)}}return i.forEach(h=>s(h)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function LI(i,e){const t={};for(const n of e)n in i&&(t[n]=i[n]);return t}function foe(i){return{path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:void 0,beforeEnter:i.beforeEnter,props:poe(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}}}function poe(i){const e={},t=i.props||!1;if("component"in i)e.default=t;else for(const n in i.components)e[n]=typeof t=="boolean"?t:t[n];return e}function II(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function moe(i){return i.reduce((e,t)=>ci(e,t.meta),{})}function OI(i,e){const t={};for(const n in i)t[n]=n in e?e[n]:i[n];return t}function nj(i,e){return e.children.some(t=>t===i||nj(i,t))}const rj=/#/g,goe=/&/g,voe=/\//g,yoe=/=/g,xoe=/\?/g,sj=/\+/g,_oe=/%5B/g,boe=/%5D/g,oj=/%5E/g,woe=/%60/g,aj=/%7B/g,Soe=/%7C/g,lj=/%7D/g,Aoe=/%20/g;function dE(i){return encodeURI(""+i).replace(Soe,"|").replace(_oe,"[").replace(boe,"]")}function Toe(i){return dE(i).replace(aj,"{").replace(lj,"}").replace(oj,"^")}function xS(i){return dE(i).replace(sj,"%2B").replace(Aoe,"+").replace(rj,"%23").replace(goe,"%26").replace(woe,"`").replace(aj,"{").replace(lj,"}").replace(oj,"^")}function Moe(i){return xS(i).replace(yoe,"%3D")}function Eoe(i){return dE(i).replace(rj,"%23").replace(xoe,"%3F")}function Coe(i){return i==null?"":Eoe(i).replace(voe,"%2F")}function H5(i){try{return decodeURIComponent(""+i)}catch{}return""+i}function Doe(i){const e={};if(i===""||i==="?")return e;const n=(i[0]==="?"?i.slice(1):i).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(sj," "),o=s.indexOf("="),a=H5(o<0?s:s.slice(0,o)),l=o<0?null:H5(s.slice(o+1));if(a in e){let c=e[a];Ba(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function RI(i){let e="";for(let t in i){const n=i[t];if(t=Moe(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ba(n)?n.map(s=>s&&xS(s)):[n&&xS(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function Poe(i){const e={};for(const t in i){const n=i[t];n!==void 0&&(e[t]=Ba(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const Loe=Symbol(""),NI=Symbol(""),rx=Symbol(""),cj=Symbol(""),_S=Symbol("");function og(){let i=[];function e(n){return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}function t(){i=[]}return{add:e,list:()=>i,reset:t}}function Gc(i,e,t,n,r){const s=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(w1(4,{from:t,to:e})):u instanceof Error?a(u):ioe(u)?a(w1(2,{from:e,to:u})):(s&&n.enterCallbacks[r]===s&&typeof u=="function"&&s.push(u),o())},c=i.call(n&&n.instances[r],e,t,l);let h=Promise.resolve(c);i.length<3&&(h=h.then(l)),h.catch(u=>a(u))})}function X7(i,e,t,n){const r=[];for(const s of i)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(Ioe(a)){const c=(a.__vccOpts||a)[e];c&&r.push(Gc(c,t,n,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const h=kse(c)?c.default:c;s.components[o]=h;const d=(h.__vccOpts||h)[e];return d&&Gc(d,t,n,s,o)()}))}}return r}function Ioe(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function FI(i){const e=zr(rx),t=zr(cj),n=Io(()=>e.resolve(yu(i.to))),r=Io(()=>{const{matched:l}=n.value,{length:c}=l,h=l[c-1],u=t.matched;if(!h||!u.length)return-1;const d=u.findIndex(b1.bind(null,h));if(d>-1)return d;const f=zI(l[c-2]);return c>1&&zI(h)===f&&u[u.length-1].path!==f?u.findIndex(b1.bind(null,l[c-2])):d}),s=Io(()=>r.value>-1&&Foe(t.params,n.value.params)),o=Io(()=>r.value>-1&&r.value===t.matched.length-1&&JG(t.params,n.value.params));function a(l={}){return Noe(l)?e[yu(i.replace)?"replace":"push"](yu(i.to)).catch(I2):Promise.resolve()}return{route:n,href:Io(()=>n.value.href),isActive:s,isExactActive:o,navigate:a}}const Ooe=st({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:FI,setup(i,{slots:e}){const t=C3(FI(i)),{options:n}=zr(rx),r=Io(()=>({[kI(i.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[kI(i.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return i.custom?s:uE("a",{"aria-current":t.isExactActive?i.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),Roe=Ooe;function Noe(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const e=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return i.preventDefault&&i.preventDefault(),!0}}function Foe(i,e){for(const t in e){const n=e[t],r=i[t];if(typeof n=="string"){if(n!==r)return!1}else if(!Ba(r)||r.length!==n.length||n.some((s,o)=>s!==r[o]))return!1}return!0}function zI(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const kI=(i,e,t)=>i??e??t,zoe=st({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:e,slots:t}){const n=zr(_S),r=Io(()=>i.route||n.value),s=zr(NI,0),o=Io(()=>{let c=yu(s);const{matched:h}=r.value;let u;for(;(u=h[c])&&!u.components;)c++;return c}),a=Io(()=>r.value.matched[o.value]);D2(NI,Io(()=>o.value+1)),D2(Loe,a),D2(_S,r);const l=Ul();return Zt(()=>[l.value,a.value,i.name],([c,h,u],[d,f,p])=>{h&&(h.instances[u]=c,f&&f!==h&&c&&c===d&&(h.leaveGuards.size||(h.leaveGuards=f.leaveGuards),h.updateGuards.size||(h.updateGuards=f.updateGuards))),c&&h&&(!f||!b1(h,f)||!d)&&(h.enterCallbacks[u]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,h=i.name,u=a.value,d=u&&u.components[h];if(!d)return BI(t.default,{Component:d,route:c});const f=u.props[h],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=uE(d,ci({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[h]=null)},ref:l}));return BI(t.default,{Component:y,route:c})||y}}});function BI(i,e){if(!i)return null;const t=i(e);return t.length===1?t[0]:t}const uj=zoe;function koe(i){const e=doe(i.routes,i),t=i.parseQuery||Doe,n=i.stringifyQuery||RI,r=i.history,s=og(),o=og(),a=og(),l=Yne(xc);let c=xc;pp&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=$7.bind(null,V=>""+V),u=$7.bind(null,Coe),d=$7.bind(null,H5);function f(V,B){let q,K;return tj(V)?(q=e.getRecordMatcher(V),K=B):K=V,e.addRoute(K,q)}function p(V){const B=e.getRecordMatcher(V);B&&e.removeRoute(B)}function m(){return e.getRoutes().map(V=>V.record)}function y(V){return!!e.getRecordMatcher(V)}function g(V,B){if(B=ci({},B||l.value),typeof V=="string"){const L=q7(t,V,B.path),z=e.resolve({path:L.path},B),Y=r.createHref(L.fullPath);return ci(L,z,{params:d(z.params),hash:H5(L.hash),redirectedFrom:void 0,href:Y})}let q;if("path"in V)q=ci({},V,{path:q7(t,V.path,B.path).path});else{const L=ci({},V.params);for(const z in L)L[z]==null&&delete L[z];q=ci({},V,{params:u(V.params)}),B.params=u(B.params)}const K=e.resolve(q,B),Q=V.hash||"";K.params=h(d(K.params));const oe=Vse(n,ci({},V,{hash:Toe(Q),path:K.path})),ne=r.createHref(oe);return ci({fullPath:oe,hash:Q,query:n===RI?Poe(V.query):V.query||{}},K,{redirectedFrom:void 0,href:ne})}function v(V){return typeof V=="string"?q7(t,V,l.value.path):ci({},V)}function x(V,B){if(c!==V)return w1(8,{from:B,to:V})}function _(V){return S(V)}function w(V){return _(ci(v(V),{replace:!0}))}function b(V){const B=V.matched[V.matched.length-1];if(B&&B.redirect){const{redirect:q}=B;let K=typeof q=="function"?q(V):q;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=v(K):{path:K},K.params={}),ci({query:V.query,hash:V.hash,params:"path"in K?{}:V.params},K)}}function S(V,B){const q=c=g(V),K=l.value,Q=V.state,oe=V.force,ne=V.replace===!0,L=b(q);if(L)return S(ci(v(L),{state:typeof L=="object"?ci({},Q,L.state):Q,force:oe,replace:ne}),B||q);const z=q;z.redirectedFrom=B;let Y;return!oe&&Gse(n,K,q)&&(Y=w1(16,{to:z,from:K}),$(K,K,!0,!1)),(Y?Promise.resolve(Y):E(z,K)).catch(J=>al(J)?al(J,2)?J:Z(J):G(J,z,K)).then(J=>{if(J){if(al(J,2))return S(ci({replace:ne},v(J.to),{state:typeof J.to=="object"?ci({},Q,J.to.state):Q,force:oe}),B||z)}else J=M(z,K,!0,ne,Q);return T(z,K,J),J})}function A(V,B){const q=x(V,B);return q?Promise.reject(q):Promise.resolve()}function E(V,B){let q;const[K,Q,oe]=Boe(V,B);q=X7(K.reverse(),"beforeRouteLeave",V,B);for(const L of K)L.leaveGuards.forEach(z=>{q.push(Gc(z,V,B))});const ne=A.bind(null,V,B);return q.push(ne),wf(q).then(()=>{q=[];for(const L of s.list())q.push(Gc(L,V,B));return q.push(ne),wf(q)}).then(()=>{q=X7(Q,"beforeRouteUpdate",V,B);for(const L of Q)L.updateGuards.forEach(z=>{q.push(Gc(z,V,B))});return q.push(ne),wf(q)}).then(()=>{q=[];for(const L of V.matched)if(L.beforeEnter&&!B.matched.includes(L))if(Ba(L.beforeEnter))for(const z of L.beforeEnter)q.push(Gc(z,V,B));else q.push(Gc(L.beforeEnter,V,B));return q.push(ne),wf(q)}).then(()=>(V.matched.forEach(L=>L.enterCallbacks={}),q=X7(oe,"beforeRouteEnter",V,B),q.push(ne),wf(q))).then(()=>{q=[];for(const L of o.list())q.push(Gc(L,V,B));return q.push(ne),wf(q)}).catch(L=>al(L,8)?L:Promise.reject(L))}function T(V,B,q){for(const K of a.list())K(V,B,q)}function M(V,B,q,K,Q){const oe=x(V,B);if(oe)return oe;const ne=B===xc,L=pp?history.state:{};q&&(K||ne?r.replace(V.fullPath,ci({scroll:ne&&L&&L.scroll},Q)):r.push(V.fullPath,Q)),l.value=V,$(V,B,q,ne),Z()}let C;function D(){C||(C=r.listen((V,B,q)=>{if(!H.listening)return;const K=g(V),Q=b(K);if(Q){S(ci(Q,{replace:!0}),K).catch(I2);return}c=K;const oe=l.value;pp&&Zse(MI(oe.fullPath,q.delta),nx()),E(K,oe).catch(ne=>al(ne,12)?ne:al(ne,2)?(S(ne.to,K).then(L=>{al(L,20)&&!q.delta&&q.type===Sv.pop&&r.go(-1,!1)}).catch(I2),Promise.reject()):(q.delta&&r.go(-q.delta,!1),G(ne,K,oe))).then(ne=>{ne=ne||M(K,oe,!1),ne&&(q.delta&&!al(ne,8)?r.go(-q.delta,!1):q.type===Sv.pop&&al(ne,20)&&r.go(-1,!1)),T(K,oe,ne)}).catch(I2)}))}let P=og(),I=og(),k;function G(V,B,q){Z(V);const K=I.list();return K.length?K.forEach(Q=>Q(V,B,q)):console.error(V),Promise.reject(V)}function U(){return k&&l.value!==xc?Promise.resolve():new Promise((V,B)=>{P.add([V,B])})}function Z(V){return k||(k=!V,D(),P.list().forEach(([B,q])=>V?q(V):B()),P.reset()),V}function $(V,B,q,K){const{scrollBehavior:Q}=i;if(!pp||!Q)return Promise.resolve();const oe=!q&&Qse(MI(V.fullPath,0))||(K||!q)&&history.state&&history.state.scroll||null;return SG().then(()=>Q(V,B,oe)).then(ne=>ne&&Yse(ne)).catch(ne=>G(ne,V,B))}const W=V=>r.go(V);let X;const j=new Set,H={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:y,getRoutes:m,resolve:g,options:i,push:_,replace:w,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:I.add,isReady:U,install(V){const B=this;V.component("RouterLink",Roe),V.component("RouterView",uj),V.config.globalProperties.$router=B,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>yu(l)}),pp&&!X&&l.value===xc&&(X=!0,_(r.location).catch(Q=>{}));const q={};for(const Q in xc)q[Q]=Io(()=>l.value[Q]);V.provide(rx,B),V.provide(cj,C3(q)),V.provide(_S,l);const K=V.unmount;j.add(V),V.unmount=function(){j.delete(V),j.size<1&&(c=xc,C&&C(),C=null,l.value=xc,X=!1,k=!1),K()}}};return H}function wf(i){return i.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function Boe(i,e){const t=[],n=[],r=[],s=Math.max(e.matched.length,i.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(i.matched.find(c=>b1(c,a))?n.push(a):t.push(a));const l=i.matched[o];l&&(e.matched.find(c=>b1(c,l))||r.push(l))}return[t,n,r]}function VQe(){return zr(rx)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Uoe=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[t++],o=i[t++],a=i[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=i[t++],o=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,a=o?i[r+1]:0,l=r+2<i.length,c=l?i[r+2]:0,h=s>>2,u=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),n.push(t[h],t[u],t[d],t[f])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hj(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Uoe(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=t[i.charAt(r++)],a=r<i.length?t[i.charAt(r)]:0;++r;const c=r<i.length?t[i.charAt(r)]:64;++r;const u=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||a==null||c==null||u==null)throw Error();const d=s<<2|a>>4;if(n.push(d),c!==64){const f=a<<4&240|c>>2;if(n.push(f),u!==64){const p=c<<6&192|u;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},Voe=function(i){const e=hj(i);return dj.encodeByteArray(e,!0)},W5=function(i){return Voe(i).replace(/\./g,"")},fj=function(i){try{return dj.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Goe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const joe=()=>Goe().__FIREBASE_DEFAULTS__,Hoe=()=>{if(typeof process>"u"||typeof process.env>"u")return;const i={}.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Woe=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&fj(i[1]);return e&&JSON.parse(e)},sx=()=>{try{return joe()||Hoe()||Woe()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},pj=i=>{var e,t;return(t=(e=sx())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},mj=i=>{const e=pj(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},$oe=()=>{var i;return(i=sx())===null||i===void 0?void 0:i.config},gj=i=>{var e;return(e=sx())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qoe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i),a="";return[W5(JSON.stringify(t)),W5(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xoe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jr())}function Yoe(){var i;const e=(i=sx())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zoe(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Qoe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Koe(){const i=jr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Joe(){try{return typeof indexedDB=="object"}catch{return!1}}function eae(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tae="FirebaseError";class Y0 extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=tae,Object.setPrototypeOf(this,Y0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D3.prototype.create)}}class D3{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?iae(s,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Y0(r,a,n)}}function iae(i,e){return i.replace(nae,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const nae=/\{\$([^}]+)}/g;function rae(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function $5(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const s=i[r],o=e[r];if(UI(s)&&UI(o)){if(!$5(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function UI(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function a2(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function l2(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function sae(i,e){const t=new oae(i,e);return t.subscribe.bind(t)}class oae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");aae(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=Y7),r.error===void 0&&(r.error=Y7),r.complete===void 0&&(r.complete=Y7);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aae(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Y7(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(i){return i&&i._delegate?i._delegate:i}class Fu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lae{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new qoe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uae(e))try{this.getOrInitializeService({instanceIdentifier:Nh})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=Nh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nh){return this.instances.has(e)}getOptions(e=Nh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cae(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Nh){return this.component?this.component.multipleInstances?e:Nh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cae(i){return i===Nh?void 0:i}function uae(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Kt||(Kt={}));const dae={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},fae=Kt.INFO,pae={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},mae=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=pae[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fE{constructor(e){this.name=e,this._logLevel=fae,this._logHandler=mae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const gae=(i,e)=>e.some(t=>i instanceof t);let VI,GI;function vae(){return VI||(VI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yae(){return GI||(GI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yj=new WeakMap,bS=new WeakMap,xj=new WeakMap,Z7=new WeakMap,pE=new WeakMap;function xae(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{t(_u(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&yj.set(t,i)}).catch(()=>{}),pE.set(e,i),e}function _ae(i){if(bS.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});bS.set(i,e)}let wS={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return bS.get(i);if(e==="objectStoreNames")return i.objectStoreNames||xj.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _u(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function bae(i){wS=i(wS)}function wae(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(Q7(this),e,...t);return xj.set(n,e.sort?e.sort():[e]),_u(n)}:yae().includes(i)?function(...e){return i.apply(Q7(this),e),_u(yj.get(this))}:function(...e){return _u(i.apply(Q7(this),e))}}function Sae(i){return typeof i=="function"?wae(i):(i instanceof IDBTransaction&&_ae(i),gae(i,vae())?new Proxy(i,wS):i)}function _u(i){if(i instanceof IDBRequest)return xae(i);if(Z7.has(i))return Z7.get(i);const e=Sae(i);return e!==i&&(Z7.set(i,e),pE.set(e,i)),e}const Q7=i=>pE.get(i);function Aae(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,e),a=_u(o);return n&&o.addEventListener("upgradeneeded",l=>{n(_u(o.result),l.oldVersion,l.newVersion,_u(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const Tae=["get","getKey","getAll","getAllKeys","count"],Mae=["put","add","delete","clear"],K7=new Map;function jI(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(K7.get(e))return K7.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=Mae.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Tae.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return K7.set(e,s),s}bae(i=>({...i,get:(e,t,n)=>jI(e,t)||i.get(e,t,n),has:(e,t)=>!!jI(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Cae(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Cae(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const SS="@firebase/app",HI="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new fE("@firebase/app"),Dae="@firebase/app-compat",Pae="@firebase/analytics-compat",Lae="@firebase/analytics",Iae="@firebase/app-check-compat",Oae="@firebase/app-check",Rae="@firebase/auth",Nae="@firebase/auth-compat",Fae="@firebase/database",zae="@firebase/database-compat",kae="@firebase/functions",Bae="@firebase/functions-compat",Uae="@firebase/installations",Vae="@firebase/installations-compat",Gae="@firebase/messaging",jae="@firebase/messaging-compat",Hae="@firebase/performance",Wae="@firebase/performance-compat",$ae="@firebase/remote-config",qae="@firebase/remote-config-compat",Xae="@firebase/storage",Yae="@firebase/storage-compat",Zae="@firebase/firestore",Qae="@firebase/firestore-compat",Kae="firebase",Jae="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="[DEFAULT]",e0e={[SS]:"fire-core",[Dae]:"fire-core-compat",[Lae]:"fire-analytics",[Pae]:"fire-analytics-compat",[Oae]:"fire-app-check",[Iae]:"fire-app-check-compat",[Rae]:"fire-auth",[Nae]:"fire-auth-compat",[Fae]:"fire-rtdb",[zae]:"fire-rtdb-compat",[kae]:"fire-fn",[Bae]:"fire-fn-compat",[Uae]:"fire-iid",[Vae]:"fire-iid-compat",[Gae]:"fire-fcm",[jae]:"fire-fcm-compat",[Hae]:"fire-perf",[Wae]:"fire-perf-compat",[$ae]:"fire-rc",[qae]:"fire-rc-compat",[Xae]:"fire-gcs",[Yae]:"fire-gcs-compat",[Zae]:"fire-fst",[Qae]:"fire-fst-compat","fire-js":"fire-js",[Kae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Map,TS=new Map;function t0e(i,e){try{i.container.addComponent(e)}catch(t){Nd.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Fd(i){const e=i.name;if(TS.has(e))return Nd.debug(`There were multiple attempts to register component ${e}.`),!1;TS.set(e,i);for(const t of q5.values())t0e(t,i);return!0}function ox(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0e={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},bu=new D3("app","Firebase",i0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=Jae;function _j(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:AS,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw bu.create("bad-app-name",{appName:String(r)});if(t||(t=$oe()),!t)throw bu.create("no-options");const s=q5.get(r);if(s){if($5(t,s.options)&&$5(n,s.config))return s;throw bu.create("duplicate-app",{appName:r})}const o=new hae(r);for(const l of TS.values())o.addComponent(l);const a=new n0e(t,n,o);return q5.set(r,a),a}function mE(i=AS){const e=q5.get(i);if(!e&&i===AS)return _j();if(!e)throw bu.create("no-app",{appName:i});return e}function D0(i,e,t){var n;let r=(n=e0e[i])!==null&&n!==void 0?n:i;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nd.warn(a.join(" "));return}Fd(new Fu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0e="firebase-heartbeat-database",s0e=1,Av="firebase-heartbeat-store";let J7=null;function bj(){return J7||(J7=Aae(r0e,s0e,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Av)}}}).catch(i=>{throw bu.create("idb-open",{originalErrorMessage:i.message})})),J7}async function o0e(i){try{return(await bj()).transaction(Av).objectStore(Av).get(wj(i))}catch(e){if(e instanceof Y0)Nd.warn(e.message);else{const t=bu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nd.warn(t.message)}}}async function WI(i,e){try{const n=(await bj()).transaction(Av,"readwrite");return await n.objectStore(Av).put(e,wj(i)),n.done}catch(t){if(t instanceof Y0)Nd.warn(t.message);else{const n=bu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Nd.warn(n.message)}}}function wj(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0e=1024,l0e=30*24*60*60*1e3;class c0e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h0e(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=$I();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=l0e}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$I(),{heartbeatsToSend:t,unsentEntries:n}=u0e(this._heartbeatsCache.heartbeats),r=W5(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function $I(){return new Date().toISOString().substring(0,10)}function u0e(i,e=a0e){const t=[];let n=i.slice();for(const r of i){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),qI(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),qI(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class h0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Joe()?eae().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await o0e(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return WI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return WI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function qI(i){return W5(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0e(i){Fd(new Fu("platform-logger",e=>new Eae(e),"PRIVATE")),Fd(new Fu("heartbeat",e=>new c0e(e),"PRIVATE")),D0(SS,HI,i),D0(SS,HI,"esm2017"),D0("fire-js","")}d0e("");var f0e="firebase",p0e="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */D0(f0e,p0e,"app");var m0e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e,gE=gE||{},yt=m0e||self;function X5(){}function ax(i){var e=typeof i;return e=e!="object"?e:i?Array.isArray(i)?"array":e:"null",e=="array"||e=="object"&&typeof i.length=="number"}function L3(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function g0e(i){return Object.prototype.hasOwnProperty.call(i,e_)&&i[e_]||(i[e_]=++v0e)}var e_="closure_uid_"+(1e9*Math.random()>>>0),v0e=0;function y0e(i,e,t){return i.call.apply(i.bind,arguments)}function x0e(i,e,t){if(!i)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),i.apply(e,r)}}return function(){return i.apply(e,arguments)}}function kr(i,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?kr=y0e:kr=x0e,kr.apply(null,arguments)}function Cy(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),i.apply(this,n)}}function Tr(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(n,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(n,o)}}function th(){this.s=this.s,this.o=this.o}var _0e=0;th.prototype.s=!1;th.prototype.na=function(){!this.s&&(this.s=!0,this.M(),_0e!=0)&&g0e(this)};th.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sj=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if(typeof i=="string")return typeof e!="string"||e.length!=1?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function vE(i){const e=i.length;if(0<e){const t=Array(e);for(let n=0;n<e;n++)t[n]=i[n];return t}return[]}function XI(i,e){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(ax(n)){const r=i.length||0,s=n.length||0;i.length=r+s;for(let o=0;o<s;o++)i[r+o]=n[o]}else i.push(n)}}function Br(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var b0e=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{yt.addEventListener("test",X5,e),yt.removeEventListener("test",X5,e)}catch{}return i}();function Y5(i){return/^[\s\xa0]*$/.test(i)}var YI=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function t_(i,e){return i<e?-1:i>e?1:0}function lx(){var i=yt.navigator;return i&&(i=i.userAgent)?i:""}function p0(i){return lx().indexOf(i)!=-1}function yE(i){return yE[" "](i),i}yE[" "]=X5;function w0e(i){var e=T0e;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}var S0e=p0("Opera"),S1=p0("Trident")||p0("MSIE"),Aj=p0("Edge"),MS=Aj||S1,Tj=p0("Gecko")&&!(lx().toLowerCase().indexOf("webkit")!=-1&&!p0("Edge"))&&!(p0("Trident")||p0("MSIE"))&&!p0("Edge"),A0e=lx().toLowerCase().indexOf("webkit")!=-1&&!p0("Edge");function Mj(){var i=yt.document;return i?i.documentMode:void 0}var Z5;e:{var i_="",n_=function(){var i=lx();if(Tj)return/rv:([^\);]+)(\)|;)/.exec(i);if(Aj)return/Edge\/([\d\.]+)/.exec(i);if(S1)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(A0e)return/WebKit\/(\S+)/.exec(i);if(S0e)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(n_&&(i_=n_?n_[1]:""),S1){var r_=Mj();if(r_!=null&&r_>parseFloat(i_)){Z5=String(r_);break e}}Z5=i_}var T0e={};function M0e(){return w0e(function(){let i=0;const e=YI(String(Z5)).split("."),t=YI("9").split("."),n=Math.max(e.length,t.length);for(let o=0;i==0&&o<n;o++){var r=e[o]||"",s=t[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;i=t_(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||t_(r[2].length==0,s[2].length==0)||t_(r[2],s[2]),r=r[3],s=s[3]}while(i==0)}return 0<=i})}var ES;if(yt.document&&S1){var ZI=Mj();ES=ZI||parseInt(Z5,10)||void 0}else ES=void 0;var E0e=ES;function Tv(i,e){if(Br.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,n=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Tj){e:{try{yE(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=i.fromElement:t=="mouseout"&&(e=i.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:C0e[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Tv.X.h.call(this)}}Tr(Tv,Br);var C0e={2:"touch",3:"pen",4:"mouse"};Tv.prototype.h=function(){Tv.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var I3="closure_listenable_"+(1e6*Math.random()|0),D0e=0;function P0e(i,e,t,n,r){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!n,this.ha=r,this.key=++D0e,this.ba=this.ea=!1}function cx(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function xE(i,e,t){for(const n in i)e.call(t,i[n],n,i)}function Ej(i){const e={};for(const t in i)e[t]=i[t];return e}const QI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cj(i,e){let t,n;for(let r=1;r<arguments.length;r++){n=arguments[r];for(t in n)i[t]=n[t];for(let s=0;s<QI.length;s++)t=QI[s],Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t])}}function ux(i){this.src=i,this.g={},this.h=0}ux.prototype.add=function(i,e,t,n,r){var s=i.toString();i=this.g[s],i||(i=this.g[s]=[],this.h++);var o=DS(i,e,n,r);return-1<o?(e=i[o],t||(e.ea=!1)):(e=new P0e(e,this.src,s,!!n,r),e.ea=t,i.push(e)),e};function CS(i,e){var t=e.type;if(t in i.g){var n=i.g[t],r=Sj(n,e),s;(s=0<=r)&&Array.prototype.splice.call(n,r,1),s&&(cx(e),i.g[t].length==0&&(delete i.g[t],i.h--))}}function DS(i,e,t,n){for(var r=0;r<i.length;++r){var s=i[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==n)return r}return-1}var _E="closure_lm_"+(1e6*Math.random()|0),s_={};function Dj(i,e,t,n,r){if(n&&n.once)return Lj(i,e,t,n,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Dj(i,e[s],t,n,r);return null}return t=SE(t),i&&i[I3]?i.N(e,t,L3(n)?!!n.capture:!!n,r):Pj(i,e,t,!1,n,r)}function Pj(i,e,t,n,r,s){if(!e)throw Error("Invalid event type");var o=L3(r)?!!r.capture:!!r,a=wE(i);if(a||(i[_E]=a=new ux(i)),t=a.add(e,t,n,o,s),t.proxy)return t;if(n=L0e(),t.proxy=n,n.src=i,n.listener=t,i.addEventListener)b0e||(r=o),r===void 0&&(r=!1),i.addEventListener(e.toString(),n,r);else if(i.attachEvent)i.attachEvent(Oj(e.toString()),n);else if(i.addListener&&i.removeListener)i.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return t}function L0e(){function i(t){return e.call(i.src,i.listener,t)}const e=I0e;return i}function Lj(i,e,t,n,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Lj(i,e[s],t,n,r);return null}return t=SE(t),i&&i[I3]?i.O(e,t,L3(n)?!!n.capture:!!n,r):Pj(i,e,t,!0,n,r)}function Ij(i,e,t,n,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ij(i,e[s],t,n,r);else n=L3(n)?!!n.capture:!!n,t=SE(t),i&&i[I3]?(i=i.i,e=String(e).toString(),e in i.g&&(s=i.g[e],t=DS(s,t,n,r),-1<t&&(cx(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete i.g[e],i.h--)))):i&&(i=wE(i))&&(e=i.g[e.toString()],i=-1,e&&(i=DS(e,t,n,r)),(t=-1<i?e[i]:null)&&bE(t))}function bE(i){if(typeof i!="number"&&i&&!i.ba){var e=i.src;if(e&&e[I3])CS(e.i,i);else{var t=i.type,n=i.proxy;e.removeEventListener?e.removeEventListener(t,n,i.capture):e.detachEvent?e.detachEvent(Oj(t),n):e.addListener&&e.removeListener&&e.removeListener(n),(t=wE(e))?(CS(t,i),t.h==0&&(t.src=null,e[_E]=null)):cx(i)}}}function Oj(i){return i in s_?s_[i]:s_[i]="on"+i}function I0e(i,e){if(i.ba)i=!0;else{e=new Tv(e,this);var t=i.listener,n=i.ha||i.src;i.ea&&bE(i),i=t.call(n,e)}return i}function wE(i){return i=i[_E],i instanceof ux?i:null}var o_="__closure_events_fn_"+(1e9*Math.random()>>>0);function SE(i){return typeof i=="function"?i:(i[o_]||(i[o_]=function(e){return i.handleEvent(e)}),i[o_])}function hr(){th.call(this),this.i=new ux(this),this.P=this,this.I=null}Tr(hr,th);hr.prototype[I3]=!0;hr.prototype.removeEventListener=function(i,e,t,n){Ij(this,i,e,t,n)};function Sr(i,e){var t,n=i.I;if(n)for(t=[];n;n=n.I)t.push(n);if(i=i.P,n=e.type||e,typeof e=="string")e=new Br(e,i);else if(e instanceof Br)e.target=e.target||i;else{var r=e;e=new Br(n,i),Cj(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=Dy(o,n,!0,e)&&r}if(o=e.g=i,r=Dy(o,n,!0,e)&&r,r=Dy(o,n,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=Dy(o,n,!1,e)&&r}hr.prototype.M=function(){if(hr.X.M.call(this),this.i){var i=this.i,e;for(e in i.g){for(var t=i.g[e],n=0;n<t.length;n++)cx(t[n]);delete i.g[e],i.h--}}this.I=null};hr.prototype.N=function(i,e,t,n){return this.i.add(String(i),e,!1,t,n)};hr.prototype.O=function(i,e,t,n){return this.i.add(String(i),e,!0,t,n)};function Dy(i,e,t,n){if(e=i.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&CS(i.i,o),r=a.call(l,n)!==!1&&r}}return r&&!n.defaultPrevented}var AE=yt.JSON.stringify;function O0e(){var i=Fj;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}let R0e=class{constructor(){this.h=this.g=null}add(e,t){const n=Rj.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};var Rj=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new N0e,i=>i.reset());let N0e=class{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}};function F0e(i){yt.setTimeout(()=>{throw i},0)}function Nj(i,e){PS||z0e(),LS||(PS(),LS=!0),Fj.add(i,e)}var PS;function z0e(){var i=yt.Promise.resolve(void 0);PS=function(){i.then(k0e)}}var LS=!1,Fj=new R0e;function k0e(){for(var i;i=O0e();){try{i.h.call(i.g)}catch(t){F0e(t)}var e=Rj;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}LS=!1}function hx(i,e){hr.call(this),this.h=i||1,this.g=e||yt,this.j=kr(this.lb,this),this.l=Date.now()}Tr(hx,hr);$e=hx.prototype;$e.ca=!1;$e.R=null;$e.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Sr(this,"tick"),this.ca&&(TE(this),this.start()))}};$e.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function TE(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}$e.M=function(){hx.X.M.call(this),TE(this),delete this.g};function ME(i,e,t){if(typeof i=="function")t&&(i=kr(i,t));else if(i&&typeof i.handleEvent=="function")i=kr(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:yt.setTimeout(i,e||0)}function zj(i){i.g=ME(()=>{i.g=null,i.i&&(i.i=!1,zj(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}let B0e=class extends th{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zj(this)}M(){super.M(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Mv(i){th.call(this),this.h=i,this.g={}}Tr(Mv,th);var KI=[];function kj(i,e,t,n){Array.isArray(t)||(t&&(KI[0]=t.toString()),t=KI);for(var r=0;r<t.length;r++){var s=Dj(e,t[r],n||i.handleEvent,!1,i.h||i);if(!s)break;i.g[s.key]=s}}function Bj(i){xE(i.g,function(e,t){this.g.hasOwnProperty(t)&&bE(e)},i),i.g={}}Mv.prototype.M=function(){Mv.X.M.call(this),Bj(this)};Mv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function dx(){this.g=!0}dx.prototype.Aa=function(){this.g=!1};function U0e(i,e,t,n,r,s){i.info(function(){if(i.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");o=2<=u.length&&u[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function V0e(i,e,t,n,r,s,o){i.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function Mp(i,e,t,n){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+j0e(i,t)+(n?" "+n:"")})}function G0e(i,e){i.info(function(){return"TIMEOUT: "+e})}dx.prototype.info=function(){};function j0e(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var n=t[i];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return AE(t)}catch{return e}}var Jd={},JI=null;function fx(){return JI=JI||new hr}Jd.Pa="serverreachability";function Uj(i){Br.call(this,Jd.Pa,i)}Tr(Uj,Br);function Ev(i){const e=fx();Sr(e,new Uj(e))}Jd.STAT_EVENT="statevent";function Vj(i,e){Br.call(this,Jd.STAT_EVENT,i),this.stat=e}Tr(Vj,Br);function rs(i){const e=fx();Sr(e,new Vj(e,i))}Jd.Qa="timingevent";function Gj(i,e){Br.call(this,Jd.Qa,i),this.size=e}Tr(Gj,Br);function O3(i,e){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){i()},e)}var px={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},jj={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function EE(){}EE.prototype.h=null;function eO(i){return i.h||(i.h=i.i())}function Hj(){}var R3={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function CE(){Br.call(this,"d")}Tr(CE,Br);function DE(){Br.call(this,"c")}Tr(DE,Br);var IS;function mx(){}Tr(mx,EE);mx.prototype.g=function(){return new XMLHttpRequest};mx.prototype.i=function(){return{}};IS=new mx;function N3(i,e,t,n){this.l=i,this.j=e,this.m=t,this.U=n||1,this.S=new Mv(this),this.O=H0e,i=MS?125:void 0,this.T=new hx(i),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Wj}function Wj(){this.i=null,this.g="",this.h=!1}var H0e=45e3,OS={},Q5={};$e=N3.prototype;$e.setTimeout=function(i){this.O=i};function RS(i,e,t){i.K=1,i.v=vx($l(e)),i.s=t,i.P=!0,$j(i,null)}function $j(i,e){i.F=Date.now(),F3(i),i.A=$l(i.v);var t=i.A,n=i.U;Array.isArray(n)||(n=[String(n)]),eH(t.i,"t",n),i.C=0,t=i.l.H,i.h=new Wj,i.g=bH(i.l,t?e:null,!i.s),0<i.N&&(i.L=new B0e(kr(i.La,i,i.g),i.N)),kj(i.S,i.g,"readystatechange",i.ib),e=i.H?Ej(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Ev(),U0e(i.j,i.u,i.A,i.m,i.U,i.s)}$e.ib=function(i){i=i.target;const e=this.L;e&&Ol(i)==3?e.l():this.La(i)};$e.La=function(i){try{if(i==this.g)e:{const h=Ol(this.g);var e=this.g.Ea();const u=this.g.aa();if(!(3>h)&&(h!=3||MS||this.g&&(this.h.h||this.g.fa()||rO(this.g)))){this.I||h!=4||e==7||(e==8||0>=u?Ev(3):Ev(2)),gx(this);var t=this.g.aa();this.Y=t;t:if(qj(this)){var n=rO(this.g);i="";var r=n.length,s=Ol(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){od(this),R2(this);var o="";break t}this.h.i=new yt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,i+=this.h.i.decode(n[e],{stream:s&&e==r-1});n.splice(0,r),this.h.g+=i,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=t==200,V0e(this.j,this.u,this.A,this.m,this.U,h,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y5(a)){var c=a;break t}}c=null}if(t=c)Mp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,NS(this,t);else{this.i=!1,this.o=3,rs(12),od(this),R2(this);break e}}this.P?(Xj(this,h,o),MS&&this.i&&h==3&&(kj(this.S,this.T,"tick",this.hb),this.T.start())):(Mp(this.j,this.m,o,null),NS(this,o)),h==4&&od(this),this.i&&!this.I&&(h==4?vH(this.l,this):(this.i=!1,F3(this)))}else t==400&&0<o.indexOf("Unknown SID")?(this.o=3,rs(12)):(this.o=0,rs(13)),od(this),R2(this)}}}catch{}finally{}};function qj(i){return i.g?i.u=="GET"&&i.K!=2&&i.l.Da:!1}function Xj(i,e,t){let n=!0,r;for(;!i.I&&i.C<t.length;)if(r=W0e(i,t),r==Q5){e==4&&(i.o=4,rs(14),n=!1),Mp(i.j,i.m,null,"[Incomplete Response]");break}else if(r==OS){i.o=4,rs(15),Mp(i.j,i.m,t,"[Invalid Chunk]"),n=!1;break}else Mp(i.j,i.m,r,null),NS(i,r);qj(i)&&r!=Q5&&r!=OS&&(i.h.g="",i.C=0),e!=4||t.length!=0||i.h.h||(i.o=1,rs(16),n=!1),i.i=i.i&&n,n?0<t.length&&!i.$&&(i.$=!0,e=i.l,e.g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),FE(e),e.K=!0,rs(11))):(Mp(i.j,i.m,t,"[Invalid Chunked Response]"),od(i),R2(i))}$e.hb=function(){if(this.g){var i=Ol(this.g),e=this.g.fa();this.C<e.length&&(gx(this),Xj(this,i,e),this.i&&i!=4&&F3(this))}};function W0e(i,e){var t=i.C,n=e.indexOf(`
`,t);return n==-1?Q5:(t=Number(e.substring(t,n)),isNaN(t)?OS:(n+=1,n+t>e.length?Q5:(e=e.substr(n,t),i.C=n+t,e)))}$e.cancel=function(){this.I=!0,od(this)};function F3(i){i.V=Date.now()+i.O,Yj(i,i.O)}function Yj(i,e){if(i.B!=null)throw Error("WatchDog timer not null");i.B=O3(kr(i.gb,i),e)}function gx(i){i.B&&(yt.clearTimeout(i.B),i.B=null)}$e.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(G0e(this.j,this.A),this.K!=2&&(Ev(),rs(17)),od(this),this.o=2,R2(this)):Yj(this,this.V-i)};function R2(i){i.l.G==0||i.I||vH(i.l,i)}function od(i){gx(i);var e=i.L;e&&typeof e.na=="function"&&e.na(),i.L=null,TE(i.T),Bj(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function NS(i,e){try{var t=i.l;if(t.G!=0&&(t.g==i||FS(t.h,i))){if(!i.J&&FS(t.h,i)&&t.G==3){try{var n=t.Fa.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var r=n;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<i.F)e6(t),_x(t);else break e;NE(t),rs(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&t.A==0&&!t.v&&(t.v=O3(kr(t.cb,t),6e3));if(1>=nH(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ad(t,11)}else if((i.J||t.g==i)&&e6(t),!Y5(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const h=c[3];h!=null&&(t.ma=h,t.j.info("VER="+t.ma));const u=c[4];u!=null&&(t.Ca=u,t.j.info("SVER="+t.Ca));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(n=1.5*d,t.J=n,t.j.info("backChannelRequestTimeoutMs_="+n)),n=t;const f=i.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=n.h;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(PE(s,s.h),s.h=null))}if(n.D){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(n.za=m,Hi(n.F,n.D,m))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms")),n=t;var o=i;if(n.sa=_H(n,n.H?n.ka:null,n.V),o.J){rH(n.h,o);var a=o,l=n.J;l&&a.setTimeout(l),a.B&&(gx(a),F3(a)),n.g=o}else mH(n);0<t.i.length&&bx(t)}else c[0]!="stop"&&c[0]!="close"||ad(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ad(t,7):RE(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}Ev(4)}catch{}}function $0e(i){if(i.W&&typeof i.W=="function")return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if(typeof i=="string")return i.split("");if(ax(i)){for(var e=[],t=i.length,n=0;n<t;n++)e.push(i[n]);return e}e=[],t=0;for(n in i)e[t++]=i[n];return e}function q0e(i){if(i.oa&&typeof i.oa=="function")return i.oa();if(!i.W||typeof i.W!="function"){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ax(i)||typeof i=="string"){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const n in i)e[t++]=n;return e}}}function Zj(i,e){if(i.forEach&&typeof i.forEach=="function")i.forEach(e,void 0);else if(ax(i)||typeof i=="string")Array.prototype.forEach.call(i,e,void 0);else for(var t=q0e(i),n=$0e(i),r=n.length,s=0;s<r;s++)e.call(void 0,n[s],t&&t[s],i)}var Qj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X0e(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var n=i[t].indexOf("="),r=null;if(0<=n){var s=i[t].substring(0,n);r=i[t].substring(n+1)}else s=i[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function gd(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof gd){this.h=e!==void 0?e:i.h,K5(this,i.j),this.s=i.s,this.g=i.g,J5(this,i.m),this.l=i.l,e=i.i;var t=new Cv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),tO(this,t),this.o=i.o}else i&&(t=String(i).match(Qj))?(this.h=!!e,K5(this,t[1]||"",!0),this.s=c2(t[2]||""),this.g=c2(t[3]||"",!0),J5(this,t[4]),this.l=c2(t[5]||"",!0),tO(this,t[6]||"",!0),this.o=c2(t[7]||"")):(this.h=!!e,this.i=new Cv(null,this.h))}gd.prototype.toString=function(){var i=[],e=this.j;e&&i.push(u2(e,iO,!0),":");var t=this.g;return(t||e=="file")&&(i.push("//"),(e=this.s)&&i.push(u2(e,iO,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&i.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&i.push("/"),i.push(u2(t,t.charAt(0)=="/"?Q0e:Z0e,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",u2(t,J0e)),i.join("")};function $l(i){return new gd(i)}function K5(i,e,t){i.j=t?c2(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function J5(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function tO(i,e,t){e instanceof Cv?(i.i=e,ele(i.i,i.h)):(t||(e=u2(e,K0e)),i.i=new Cv(e,i.h))}function Hi(i,e,t){i.i.set(e,t)}function vx(i){return Hi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function c2(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function u2(i,e,t){return typeof i=="string"?(i=encodeURI(i).replace(e,Y0e),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Y0e(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var iO=/[#\/\?@]/g,Z0e=/[#\?:]/g,Q0e=/[#\?]/g,K0e=/[#\?@]/g,J0e=/#/g;function Cv(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ih(i){i.g||(i.g=new Map,i.h=0,i.i&&X0e(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}$e=Cv.prototype;$e.add=function(i,e){ih(this),this.i=null,i=hm(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this};function Kj(i,e){ih(i),e=hm(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Jj(i,e){return ih(i),e=hm(i,e),i.g.has(e)}$e.forEach=function(i,e){ih(this),this.g.forEach(function(t,n){t.forEach(function(r){i.call(e,r,n,this)},this)},this)};$e.oa=function(){ih(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let n=0;n<e.length;n++){const r=i[n];for(let s=0;s<r.length;s++)t.push(e[n])}return t};$e.W=function(i){ih(this);let e=[];if(typeof i=="string")Jj(this,i)&&(e=e.concat(this.g.get(hm(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e};$e.set=function(i,e){return ih(this),this.i=null,i=hm(this,i),Jj(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this};$e.get=function(i,e){return i?(i=this.W(i),0<i.length?String(i[0]):e):e};function eH(i,e,t){Kj(i,e),0<t.length&&(i.i=null,i.g.set(hm(i,e),vE(t)),i.h+=t.length)}$e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var n=e[t];const s=encodeURIComponent(String(n)),o=this.W(n);for(n=0;n<o.length;n++){var r=s;o[n]!==""&&(r+="="+encodeURIComponent(String(o[n]))),i.push(r)}}return this.i=i.join("&")};function hm(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ele(i,e){e&&!i.j&&(ih(i),i.i=null,i.g.forEach(function(t,n){var r=n.toLowerCase();n!=r&&(Kj(this,n),eH(this,r,t))},i)),i.j=e}var tle=class{constructor(e,t){this.h=e,this.g=t}};function tH(i){this.l=i||ile,yt.PerformanceNavigationTiming?(i=yt.performance.getEntriesByType("navigation"),i=0<i.length&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(yt.g&&yt.g.Ga&&yt.g.Ga()&&yt.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ile=10;function iH(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function nH(i){return i.h?1:i.g?i.g.size:0}function FS(i,e){return i.h?i.h==e:i.g?i.g.has(e):!1}function PE(i,e){i.g?i.g.add(e):i.h=e}function rH(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}tH.prototype.cancel=function(){if(this.i=sH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function sH(i){if(i.h!=null)return i.i.concat(i.h.D);if(i.g!=null&&i.g.size!==0){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return vE(i.i)}function LE(){}LE.prototype.stringify=function(i){return yt.JSON.stringify(i,void 0)};LE.prototype.parse=function(i){return yt.JSON.parse(i,void 0)};function nle(){this.g=new LE}function rle(i,e,t){const n=t||"";try{Zj(i,function(r,s){let o=r;L3(r)&&(o=AE(r)),e.push(n+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(n+"type="+encodeURIComponent("_badmap")),r}}function sle(i,e){const t=new dx;if(yt.Image){const n=new Image;n.onload=Cy(Py,t,n,"TestLoadImage: loaded",!0,e),n.onerror=Cy(Py,t,n,"TestLoadImage: error",!1,e),n.onabort=Cy(Py,t,n,"TestLoadImage: abort",!1,e),n.ontimeout=Cy(Py,t,n,"TestLoadImage: timeout",!1,e),yt.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=i}else e(!1)}function Py(i,e,t,n,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(n)}catch{}}function z3(i){this.l=i.ac||null,this.j=i.jb||!1}Tr(z3,EE);z3.prototype.g=function(){return new yx(this.l,this.j)};z3.prototype.i=function(i){return function(){return i}}({});function yx(i,e){hr.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=IE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tr(yx,hr);var IE=0;$e=yx.prototype;$e.open=function(i,e){if(this.readyState!=IE)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Dv(this)};$e.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||yt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};$e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,k3(this)),this.readyState=IE};$e.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Dv(this)),this.g&&(this.readyState=3,Dv(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof yt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oH(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))};function oH(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}$e.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?k3(this):Dv(this),this.readyState==3&&oH(this)}};$e.Va=function(i){this.g&&(this.response=this.responseText=i,k3(this))};$e.Ua=function(i){this.g&&(this.response=i,k3(this))};$e.ga=function(){this.g&&k3(this)};function k3(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Dv(i)}$e.setRequestHeader=function(i,e){this.v.append(i,e)};$e.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""};$e.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,i.push(t[0]+": "+t[1]),t=e.next();return i.join(`\r
`)};function Dv(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(yx.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});var ole=yt.JSON.parse;function fn(i){hr.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aH,this.K=this.L=!1}Tr(fn,hr);var aH="",ale=/^https?$/i,lle=["POST","PUT"];$e=fn.prototype;$e.Ka=function(i){this.L=i};$e.da=function(i,e,t,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():IS.g(),this.C=this.u?eO(this.u):eO(IS),this.g.onreadystatechange=kr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(s){nO(this,s);return}if(i=t||"",t=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var r in n)t.set(r,n[r]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const s of n.keys())t.set(s,n.get(s));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=yt.FormData&&i instanceof yt.FormData,!(0<=Sj(lle,e))||n||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uH(this),0<this.B&&((this.K=cle(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.qa,this)):this.A=ME(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(s){nO(this,s)}};function cle(i){return S1&&M0e()&&typeof i.timeout=="number"&&i.ontimeout!==void 0}$e.qa=function(){typeof gE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))};function nO(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,lH(i),xx(i)}function lH(i){i.D||(i.D=!0,Sr(i,"complete"),Sr(i,"error"))}$e.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Sr(this,"complete"),Sr(this,"abort"),xx(this))};$e.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xx(this,!0)),fn.X.M.call(this)};$e.Ha=function(){this.s||(this.F||this.v||this.l?cH(this):this.fb())};$e.fb=function(){cH(this)};function cH(i){if(i.h&&typeof gE<"u"&&(!i.C[1]||Ol(i)!=4||i.aa()!=2)){if(i.v&&Ol(i)==4)ME(i.Ha,0,i);else if(Sr(i,"readystatechange"),Ol(i)==4){i.h=!1;try{const a=i.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var n;if(n=a===0){var r=String(i.H).match(Qj)[1]||null;if(!r&&yt.self&&yt.self.location){var s=yt.self.location.protocol;r=s.substr(0,s.length-1)}n=!ale.test(r?r.toLowerCase():"")}t=n}if(t)Sr(i,"complete"),Sr(i,"success");else{i.m=6;try{var o=2<Ol(i)?i.g.statusText:""}catch{o=""}i.j=o+" ["+i.aa()+"]",lH(i)}}finally{xx(i)}}}}function xx(i,e){if(i.g){uH(i);const t=i.g,n=i.C[0]?X5:null;i.g=null,i.C=null,e||Sr(i,"ready");try{t.onreadystatechange=n}catch{}}}function uH(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(yt.clearTimeout(i.A),i.A=null)}function Ol(i){return i.g?i.g.readyState:0}$e.aa=function(){try{return 2<Ol(this)?this.g.status:-1}catch{return-1}};$e.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};$e.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&e.indexOf(i)==0&&(e=e.substring(i.length)),ole(e)}};function rO(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case aH:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}$e.Ea=function(){return this.m};$e.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hH(i){let e="";return xE(i,function(t,n){e+=n,e+=":",e+=t,e+=`\r
`}),e}function OE(i,e,t){e:{for(n in t){var n=!1;break e}n=!0}n||(t=hH(t),typeof i=="string"?t!=null&&encodeURIComponent(String(t)):Hi(i,e,t))}function ag(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function dH(i){this.Ca=0,this.i=[],this.j=new dx,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ag("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ag("baseRetryDelayMs",5e3,i),this.bb=ag("retryDelaySeedMs",1e4,i),this.$a=ag("forwardChannelMaxRetries",2,i),this.ta=ag("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new tH(i&&i.concurrentRequestLimit),this.Fa=new nle,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}$e=dH.prototype;$e.ma=8;$e.G=1;function RE(i){if(fH(i),i.G==3){var e=i.U++,t=$l(i.F);Hi(t,"SID",i.I),Hi(t,"RID",e),Hi(t,"TYPE","terminate"),B3(i,t),e=new N3(i,i.j,e,void 0),e.K=2,e.v=vx($l(t)),t=!1,yt.navigator&&yt.navigator.sendBeacon&&(t=yt.navigator.sendBeacon(e.v.toString(),"")),!t&&yt.Image&&(new Image().src=e.v,t=!0),t||(e.g=bH(e.l,null),e.g.da(e.v)),e.F=Date.now(),F3(e)}xH(i)}function _x(i){i.g&&(FE(i),i.g.cancel(),i.g=null)}function fH(i){_x(i),i.u&&(yt.clearTimeout(i.u),i.u=null),e6(i),i.h.cancel(),i.m&&(typeof i.m=="number"&&yt.clearTimeout(i.m),i.m=null)}function bx(i){iH(i.h)||i.m||(i.m=!0,Nj(i.Ja,i),i.C=0)}function ule(i,e){return nH(i.h)>=i.h.j-(i.m?1:0)?!1:i.m?(i.i=e.D.concat(i.i),!0):i.G==1||i.G==2||i.C>=(i.Za?0:i.$a)?!1:(i.m=O3(kr(i.Ja,i,e),yH(i,i.C)),i.C++,!0)}$e.Ja=function(i){if(this.m)if(this.m=null,this.G==1){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const r=new N3(this,this.j,i,void 0);let s=this.s;if(this.S&&(s?(s=Ej(s),Cj(s,this.S)):s=this.S),this.o!==null||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var n=this.i[t];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pH(this,r,e),t=$l(this.F),Hi(t,"RID",i),Hi(t,"CVER",22),this.D&&Hi(t,"X-HTTP-Session-Id",this.D),B3(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(hH(s)))+"&"+e:this.o&&OE(t,this.o,s)),PE(this.h,r),this.Ya&&Hi(t,"TYPE","init"),this.O?(Hi(t,"$req",e),Hi(t,"SID","null"),r.Z=!0,RS(r,t,null)):RS(r,t,e),this.G=2}}else this.G==3&&(i?sO(this,i):this.i.length==0||iH(this.h)||sO(this))};function sO(i,e){var t;e?t=e.m:t=i.U++;const n=$l(i.F);Hi(n,"SID",i.I),Hi(n,"RID",t),Hi(n,"AID",i.T),B3(i,n),i.o&&i.s&&OE(n,i.o,i.s),t=new N3(i,i.j,t,i.C+1),i.o===null&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=pH(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),PE(i.h,t),RS(t,n,e)}function B3(i,e){i.ia&&xE(i.ia,function(t,n){Hi(e,n,t)}),i.l&&Zj({},function(t,n){Hi(e,n,t)})}function pH(i,e,t){t=Math.min(i.i.length,t);var n=i.l?kr(i.l.Ra,i.l,i):null;e:{var r=i.i;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].h;const h=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{rle(h,o,"req"+c+"_")}catch{n&&n(h)}}if(a){n=o.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,n}function mH(i){i.g||i.u||(i.Z=1,Nj(i.Ia,i),i.A=0)}function NE(i){return i.g||i.u||3<=i.A?!1:(i.Z++,i.u=O3(kr(i.Ia,i),yH(i,i.A)),i.A++,!0)}$e.Ia=function(){if(this.u=null,gH(this),this.$&&!(this.K||this.g==null||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=O3(kr(this.eb,this),i)}};$e.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,rs(10),_x(this),gH(this))};function FE(i){i.B!=null&&(yt.clearTimeout(i.B),i.B=null)}function gH(i){i.g=new N3(i,i.j,"rpc",i.Z),i.o===null&&(i.g.H=i.s),i.g.N=0;var e=$l(i.sa);Hi(e,"RID","rpc"),Hi(e,"SID",i.I),Hi(e,"CI",i.L?"0":"1"),Hi(e,"AID",i.T),Hi(e,"TYPE","xmlhttp"),B3(i,e),i.o&&i.s&&OE(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=vx($l(e)),t.s=null,t.P=!0,$j(t,i)}$e.cb=function(){this.v!=null&&(this.v=null,_x(this),NE(this),rs(19))};function e6(i){i.v!=null&&(yt.clearTimeout(i.v),i.v=null)}function vH(i,e){var t=null;if(i.g==e){e6(i),FE(i),i.g=null;var n=2}else if(FS(i.h,e))t=e.D,rH(i.h,e),n=1;else return;if(i.G!=0){if(i.pa=e.Y,e.i)if(n==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=i.C;n=fx(),Sr(n,new Gj(n,t)),bx(i)}else mH(i);else if(r=e.o,r==3||r==0&&0<i.pa||!(n==1&&ule(i,e)||n==2&&NE(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),r){case 1:ad(i,5);break;case 4:ad(i,10);break;case 3:ad(i,6);break;default:ad(i,2)}}}function yH(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ad(i,e){if(i.j.info("Error code "+e),e==2){var t=null;i.l&&(t=null);var n=kr(i.kb,i);t||(t=new gd("//www.google.com/images/cleardot.gif"),yt.location&&yt.location.protocol=="http"||K5(t,"https"),vx(t)),sle(t.toString(),n)}else rs(2);i.G=0,i.l&&i.l.va(e),xH(i),fH(i)}$e.kb=function(i){i?(this.j.info("Successfully pinged google.com"),rs(2)):(this.j.info("Failed to ping google.com"),rs(1))};function xH(i){if(i.G=0,i.la=[],i.l){const e=sH(i.h);(e.length!=0||i.i.length!=0)&&(XI(i.la,e),XI(i.la,i.i),i.h.i.length=0,vE(i.i),i.i.length=0),i.l.ua()}}function _H(i,e,t){var n=t instanceof gd?$l(t):new gd(t,void 0);if(n.g!="")e&&(n.g=e+"."+n.g),J5(n,n.m);else{var r=yt.location;n=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new gd(null,void 0);n&&K5(s,n),e&&(s.g=e),r&&J5(s,r),t&&(s.l=t),n=s}return t=i.D,e=i.za,t&&e&&Hi(n,t,e),Hi(n,"VER",i.ma),B3(i,n),n}function bH(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&i.Da&&!i.ra?new fn(new z3({jb:!0})):new fn(i.ra),e.Ka(i.H),e}function wH(){}$e=wH.prototype;$e.xa=function(){};$e.wa=function(){};$e.va=function(){};$e.ua=function(){};$e.Ra=function(){};function t6(){if(S1&&!(10<=Number(E0e)))throw Error("Environmental error: no available transport.")}t6.prototype.g=function(i,e){return new oo(i,e)};function oo(i,e){hr.call(this),this.g=new dH(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Y5(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Y5(e)&&(this.g.D=e,i=this.h,i!==null&&e in i&&(i=this.h,e in i&&delete i[e])),this.j=new dm(this)}Tr(oo,hr);oo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;rs(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=_H(i,null,i.V),bx(i)};oo.prototype.close=function(){RE(this.g)};oo.prototype.u=function(i){var e=this.g;if(typeof i=="string"){var t={};t.__data__=i,i=t}else this.v&&(t={},t.__data__=AE(i),i=t);e.i.push(new tle(e.ab++,i)),e.G==3&&bx(e)};oo.prototype.M=function(){this.g.l=null,delete this.j,RE(this.g),delete this.g,oo.X.M.call(this)};function SH(i){CE.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=e!==null&&i in e?e[i]:void 0),this.data=e}else this.data=i}Tr(SH,CE);function AH(){DE.call(this),this.status=1}Tr(AH,DE);function dm(i){this.g=i}Tr(dm,wH);dm.prototype.xa=function(){Sr(this.g,"a")};dm.prototype.wa=function(i){Sr(this.g,new SH(i))};dm.prototype.va=function(i){Sr(this.g,new AH)};dm.prototype.ua=function(){Sr(this.g,"b")};t6.prototype.createWebChannel=t6.prototype.g;oo.prototype.send=oo.prototype.u;oo.prototype.open=oo.prototype.m;oo.prototype.close=oo.prototype.close;px.NO_ERROR=0;px.TIMEOUT=8;px.HTTP_ERROR=6;jj.COMPLETE="complete";Hj.EventType=R3;R3.OPEN="a";R3.CLOSE="b";R3.ERROR="c";R3.MESSAGE="d";hr.prototype.listen=hr.prototype.N;fn.prototype.listenOnce=fn.prototype.O;fn.prototype.getLastError=fn.prototype.Oa;fn.prototype.getLastErrorCode=fn.prototype.Ea;fn.prototype.getStatus=fn.prototype.aa;fn.prototype.getResponseJson=fn.prototype.Sa;fn.prototype.getResponseText=fn.prototype.fa;fn.prototype.send=fn.prototype.da;fn.prototype.setWithCredentials=fn.prototype.Ka;var hle=function(){return new t6},dle=function(){return fx()},a_=px,fle=jj,ple=Jd,oO={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},mle=z3,Ly=Hj,gle=fn;const aO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fm="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new fE("@firebase/firestore");function lO(){return zd.logLevel}function Qe(i,...e){if(zd.logLevel<=Kt.DEBUG){const t=e.map(zE);zd.debug(`Firestore (${fm}): ${i}`,...t)}}function ql(i,...e){if(zd.logLevel<=Kt.ERROR){const t=e.map(zE);zd.error(`Firestore (${fm}): ${i}`,...t)}}function zS(i,...e){if(zd.logLevel<=Kt.WARN){const t=e.map(zE);zd.warn(`Firestore (${fm}): ${i}`,...t)}}function zE(i){if(typeof i=="string")return i;try{return e=i,JSON.stringify(e)}catch{return i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(i="Unexpected state"){const e=`FIRESTORE (${fm}) INTERNAL ASSERTION FAILED: `+i;throw ql(e),new Error(e)}function Di(i,e){i||ft()}function At(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Y0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class yle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}let xle=class{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new vd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vd,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vd)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Di(typeof n.accessToken=="string"),new TH(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Di(e===null||typeof e=="string"),new Pr(e)}};class _le{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Di(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ble{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new _le(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wle{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sle{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=s=>{s.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const r=s=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Di(typeof t.token=="string"),this.A=t.token,new wle(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ale(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Ale(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}}function ni(i,e){return i<e?-1:i>e?1:0}function A1(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ls=class e5{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new rt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new rt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new rt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return e5.fromMillis(Date.now())}static fromDate(e){return e5.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new e5(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ni(this.nanoseconds,e.nanoseconds):ni(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class t5{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t5(e)}static min(){return new t5(new ls(0,0))}static max(){return new t5(new ls(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EH=class kS{constructor(e,t,n){t===void 0?t=0:t>e.length&&ft(),n===void 0?n=e.length-t:n>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return kS.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kS?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Bn=class i5 extends EH{construct(e,t,n){return new i5(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new rt(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new i5(t)}static emptyPath(){return new i5([])}};const Tle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let U0=class mp extends EH{construct(e,t,n){return new mp(e,t,n)}static isValidIdentifier(e){return Tle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mp.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mp(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(n.length===0)throw new rt(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new rt(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new rt(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(n+=a,r++):(s(),r++)}if(s(),o)throw new rt(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mp(t)}static emptyPath(){return new mp([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class h2{constructor(e){this.path=e}static fromPath(e){return new h2(Bn.fromString(e))}static fromName(e){return new h2(Bn.fromString(e).popFirst(5))}static empty(){return new h2(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new h2(new Bn(e.slice()))}};function Mle(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Et.fromTimestamp(n===1e9?new ls(t+1,0):new ls(t,n));return new zu(r,ut.empty(),e)}function Ele(i){return new zu(i.readTime,i.key,-1)}class zu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new zu(Et.min(),ut.empty(),-1)}static max(){return new zu(Et.max(),ut.empty(),-1)}}function Cle(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ut.comparator(i.documentKey,e.documentKey),t!==0?t:ni(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dle="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let Ple=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(i){if(i.code!==Ie.FAILED_PRECONDITION||i.message!==Dle)throw i;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ke=class ps{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ps((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ps?t:ps.resolve(t)}catch(t){return ps.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ps.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ps.reject(t)}static resolve(e){return new ps((t,n)=>{t(e)})}static reject(e){return new ps((t,n)=>{n(e)})}static waitFor(e){return new ps((t,n)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>n(l))}),o=!0,s===r&&t()})}static or(e){let t=ps.resolve(!1);for(const n of e)t=t.next(r=>r?ps.resolve(r):n());return t}static forEach(e,t){const n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new ps((n,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&n(o)},h=>r(h))}})}static doWhile(e,t){return new ps((n,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}};function V3(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kE=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ut(n),this.ct=n=>t.writeSequenceNumber(n))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}};kE.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lle=class{constructor(e,t,n,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}},CH=class BS{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new BS("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof BS&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ef(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function DH(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(i){return i==null}function i6(i){return i===0&&1/i==-1/0}function Ile(i){return typeof i=="number"&&Number.isInteger(i)&&!i6(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Hr(t)}static fromUint8Array(e){const t=function(n){let r="";for(let s=0;s<n.length;++s)r+=String.fromCharCode(n[s]);return r}(e);return new Hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ni(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const Ole=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ku(i){if(Di(!!i),typeof i=="string"){let e=0;const t=Ole.exec(i);if(Di(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:kn(i.seconds),nanos:kn(i.nanos)}}function kn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function T1(i){return typeof i=="string"?Hr.fromBase64String(i):Hr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function LH(i){const e=i.mapValue.fields.__previous_value__;return PH(e)?LH(e):e}function Pv(i){const e=ku(i.mapValue.fields.__local_write_time__.timestampValue);return new ls(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function kd(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?PH(i)?4:Rle(i)?9007199254740991:10:ft()}function V0(i,e){if(i===e)return!0;const t=kd(i);if(t!==kd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pv(i).isEqual(Pv(e));case 3:return function(n,r){if(typeof n.timestampValue=="string"&&typeof r.timestampValue=="string"&&n.timestampValue.length===r.timestampValue.length)return n.timestampValue===r.timestampValue;const s=ku(n.timestampValue),o=ku(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(n,r){return T1(n.bytesValue).isEqual(T1(r.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(n,r){return kn(n.geoPointValue.latitude)===kn(r.geoPointValue.latitude)&&kn(n.geoPointValue.longitude)===kn(r.geoPointValue.longitude)}(i,e);case 2:return function(n,r){if("integerValue"in n&&"integerValue"in r)return kn(n.integerValue)===kn(r.integerValue);if("doubleValue"in n&&"doubleValue"in r){const s=kn(n.doubleValue),o=kn(r.doubleValue);return s===o?i6(s)===i6(o):isNaN(s)&&isNaN(o)}return!1}(i,e);case 9:return A1(i.arrayValue.values||[],e.arrayValue.values||[],V0);case 10:return function(n,r){const s=n.mapValue.fields||{},o=r.mapValue.fields||{};if(cO(s)!==cO(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!V0(s[a],o[a])))return!1;return!0}(i,e);default:return ft()}}function Lv(i,e){return(i.values||[]).find(t=>V0(t,e))!==void 0}function M1(i,e){if(i===e)return 0;const t=kd(i),n=kd(e);if(t!==n)return ni(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ni(i.booleanValue,e.booleanValue);case 2:return function(r,s){const o=kn(r.integerValue||r.doubleValue),a=kn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(i,e);case 3:return uO(i.timestampValue,e.timestampValue);case 4:return uO(Pv(i),Pv(e));case 5:return ni(i.stringValue,e.stringValue);case 6:return function(r,s){const o=T1(r),a=T1(s);return o.compareTo(a)}(i.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ni(o[l],a[l]);if(c!==0)return c}return ni(o.length,a.length)}(i.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ni(kn(r.latitude),kn(s.latitude));return o!==0?o:ni(kn(r.longitude),kn(s.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=M1(o[l],a[l]);if(c)return c}return ni(o.length,a.length)}(i.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Iy.mapValue&&s===Iy.mapValue)return 0;if(r===Iy.mapValue)return 1;if(s===Iy.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const u=ni(a[h],c[h]);if(u!==0)return u;const d=M1(o[a[h]],l[c[h]]);if(d!==0)return d}return ni(a.length,c.length)}(i.mapValue,e.mapValue);default:throw ft()}}function uO(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ni(i,e);const t=ku(i),n=ku(e),r=ni(t.seconds,n.seconds);return r!==0?r:ni(t.nanos,n.nanos)}function E1(i){return US(i)}function US(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=ku(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?T1(i.bytesValue).toBase64():"referenceValue"in i?(t=i.referenceValue,ut.fromName(t).toString()):"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=US(o);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${US(n.fields[a])}`;return s+"}"}(i.mapValue):ft();var e,t}function VS(i){return!!i&&"integerValue"in i}function BE(i){return!!i&&"arrayValue"in i}function hO(i){return!!i&&"nullValue"in i}function dO(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function n5(i){return!!i&&"mapValue"in i}function N2(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ef(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=N2(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=N2(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Rle(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n6=class{constructor(e,t){this.position=e,this.inclusive=t}};function fO(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const s=e[r],o=i.position[r];if(s.field.isKeyField()?n=ut.comparator(ut.fromName(o.referenceValue),t.key):n=M1(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function pO(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!V0(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IH=class{},_r=class OH extends IH{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Fle(e,t,n):t==="array-contains"?new Ble(e,n):t==="in"?new Ule(e,n):t==="not-in"?new Vle(e,n):t==="array-contains-any"?new Gle(e,n):new OH(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new zle(e,n):new kle(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(M1(t,this.value)):t!==null&&kd(this.value)===kd(t)&&this.matchesComparison(M1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},Bu=class RH extends IH{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new RH(e,t)}matches(e){return NH(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return e!==null?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}};function NH(i){return i.op==="and"}function FH(i){return Nle(i)&&NH(i)}function Nle(i){for(const e of i.filters)if(e instanceof Bu)return!1;return!0}function GS(i){if(i instanceof _r)return i.field.canonicalString()+i.op.toString()+E1(i.value);if(FH(i))return i.filters.map(e=>GS(e)).join(",");{const e=i.filters.map(t=>GS(t)).join(",");return`${i.op}(${e})`}}function zH(i,e){return i instanceof _r?function(t,n){return n instanceof _r&&t.op===n.op&&t.field.isEqual(n.field)&&V0(t.value,n.value)}(i,e):i instanceof Bu?function(t,n){return n instanceof Bu&&t.op===n.op&&t.filters.length===n.filters.length?t.filters.reduce((r,s,o)=>r&&zH(s,n.filters[o]),!0):!1}(i,e):void ft()}function kH(i){return i instanceof _r?function(e){return`${e.field.canonicalString()} ${e.op} ${E1(e.value)}`}(i):i instanceof Bu?function(e){return e.op.toString()+" {"+e.getFilters().map(kH).join(" ,")+"}"}(i):"Filter"}let Fle=class extends _r{constructor(e,t,n){super(e,t,n),this.key=ut.fromName(n.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}},zle=class extends _r{constructor(e,t){super(e,"in",t),this.keys=BH("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kle=class extends _r{constructor(e,t){super(e,"not-in",t),this.keys=BH("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BH(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ut.fromName(n.referenceValue))}let Ble=class extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return BE(t)&&Lv(t.arrayValue,this.value)}},Ule=class extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lv(this.value.arrayValue,t)}},Vle=class extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Lv(this.value.arrayValue,t)}},Gle=class extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!BE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Lv(this.value.arrayValue,n))}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F2=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function jle(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.comparator=e,this.root=t||wu.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wu.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oy(this.root,e,this.comparator,!0)}}let Oy=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wu=class Al{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??Al.RED,this.left=r??Al.EMPTY,this.right=s??Al.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Al(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Al.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Al.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Al.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Al.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}};wu.EMPTY=null,wu.RED=!0,wu.BLACK=!1;wu.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(i,e,t,n,r){return this}insert(i,e,t){return new wu(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur=class jS{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mO(this.data.getIterator())}getIteratorFrom(e){return new mO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof jS)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jS(this.comparator);return t.data=e,t}},mO=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b0=class HS{constructor(e){this.fields=e,e.sort(U0.comparator)}static empty(){return new HS([])}unionWith(e){let t=new Ur(U0.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new HS(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return A1(this.fields,e.fields,(t,n)=>t.isEqual(n))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa=class WS{constructor(e){this.value=e}static empty(){return new WS({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!n5(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=N2(t)}setAll(e){let t=U0.emptyPath(),n={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,n,r),n={},r=[],t=a.popLast()}o?n[a.lastSegment()]=N2(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());n5(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return V0(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];n5(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ef(t,(r,s)=>e[r]=s);for(const r of n)delete e[r]}clone(){return new WS(N2(this.value))}};function UH(i){const e=[];return ef(i.fields,(t,n)=>{const r=new U0([t]);if(n5(n)){const s=UH(n.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new b0(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,n,r,s,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Or(e,0,Et.min(),Et.min(),Et.min(),Aa.empty(),0)}static newFoundDocument(e,t,n,r){return new Or(e,1,t,Et.min(),n,r,0)}static newNoDocument(e,t){return new Or(e,2,t,Et.min(),Et.min(),Aa.empty(),0)}static newUnknownDocument(e,t){return new Or(e,3,t,Et.min(),Et.min(),Aa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Aa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Aa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hle=class{constructor(e,t=null,n=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}};function gO(i,e=null,t=[],n=[],r=null,s=null,o=null){return new Hle(i,e,t,n,r,s,o)}function UE(i){const e=At(i);if(e.ft===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>GS(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(r){return r.field.canonicalString()+r.dir}(n)).join(","),wx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>E1(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>E1(n)).join(",")),e.ft=t}return e.ft}function VE(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!jle(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!zH(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!pO(i.startAt,e.startAt)&&pO(i.endAt,e.endAt)}function $S(i){return ut.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sx=class{constructor(e,t=null,n=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}};function Wle(i,e,t,n,r,s,o,a){return new Sx(i,e,t,n,r,s,o,a)}function GE(i){return new Sx(i)}function vO(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function $le(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function qle(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(t!==null)return t}return null}function Xle(i){return i.collectionGroup!==null}function Xp(i){const e=At(i);if(e.dt===null){e.dt=[];const t=qle(e),n=$le(e);if(t!==null&&n===null)t.isKeyField()||e.dt.push(new F2(t)),e.dt.push(new F2(U0.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new F2(U0.keyField(),s))}}}return e.dt}function Xl(i){const e=At(i);if(!e._t)if(e.limitType==="F")e._t=gO(e.path,e.collectionGroup,Xp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Xp(e)){const o=s.dir==="desc"?"asc":"desc";t.push(new F2(s.field,o))}const n=e.endAt?new n6(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new n6(e.startAt.position,e.startAt.inclusive):null;e._t=gO(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e._t}function qS(i,e,t){return new Sx(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ax(i,e){return VE(Xl(i),Xl(e))&&i.limitType===e.limitType}function VH(i){return`${UE(Xl(i))}|lt:${i.limitType}`}function XS(i){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(n=>kH(n)).join(", ")}]`),wx(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>E1(n)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>E1(n)).join(",")),`Target(${t})`}(Xl(i))}; limitType=${i.limitType})`}function Tx(i,e){return e.isFoundDocument()&&function(t,n){const r=n.key.path;return t.collectionGroup!==null?n.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):ut.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(i,e)&&function(t,n){for(const r of Xp(t))if(!r.field.isKeyField()&&n.data.field(r.field)===null)return!1;return!0}(i,e)&&function(t,n){for(const r of t.filters)if(!r.matches(n))return!1;return!0}(i,e)&&function(t,n){return!(t.startAt&&!function(r,s,o){const a=fO(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,Xp(t),n)||t.endAt&&!function(r,s,o){const a=fO(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,Xp(t),n))}(i,e)}function Yle(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function GH(i){return(e,t)=>{let n=!1;for(const r of Xp(i)){const s=Zle(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function Zle(i,e,t){const n=i.field.isKeyField()?ut.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?M1(a,l):ft()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i6(e)?"-0":e}}function HH(i){return{integerValue:""+i}}function Qle(i,e){return Ile(e)?HH(e):jH(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mx=class{constructor(){this._=void 0}};function Kle(i,e,t){return i instanceof r6?function(n,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):i instanceof Iv?$H(i,e):i instanceof Ov?qH(i,e):function(n,r){const s=WH(n,r),o=yO(s)+yO(n.gt);return VS(s)&&VS(n.gt)?HH(o):jH(n.yt,o)}(i,e)}function Jle(i,e,t){return i instanceof Iv?$H(i,e):i instanceof Ov?qH(i,e):t}function WH(i,e){return i instanceof s6?VS(t=e)||function(n){return!!n&&"doubleValue"in n}(t)?e:{integerValue:0}:null;var t}let r6=class extends Mx{},Iv=class extends Mx{constructor(e){super(),this.elements=e}};function $H(i,e){const t=XH(e);for(const n of i.elements)t.some(r=>V0(r,n))||t.push(n);return{arrayValue:{values:t}}}let Ov=class extends Mx{constructor(e){super(),this.elements=e}};function qH(i,e){let t=XH(e);for(const n of i.elements)t=t.filter(r=>!V0(r,n));return{arrayValue:{values:t}}}let s6=class extends Mx{constructor(e,t){super(),this.yt=e,this.gt=t}};function yO(i){return kn(i.integerValue||i.doubleValue)}function XH(i){return BE(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ece(i,e){return i.field.isEqual(e.field)&&function(t,n){return t instanceof Iv&&n instanceof Iv||t instanceof Ov&&n instanceof Ov?A1(t.elements,n.elements,V0):t instanceof s6&&n instanceof s6?V0(t.gt,n.gt):t instanceof r6&&n instanceof r6}(i.transform,e.transform)}let tce=class{constructor(e,t){this.version=e,this.transformResults=t}},Yp=class r5{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new r5}static exists(e){return new r5(void 0,e)}static updateTime(e){return new r5(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function s5(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}let Ex=class{};function YH(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new QH(i.key,Yp.none()):new G3(i.key,i.data,Yp.none());{const t=i.data,n=Aa.empty();let r=new Ur(U0.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new nh(i.key,n,new b0(r.toArray()),Yp.none())}}function ice(i,e,t){i instanceof G3?function(n,r,s){const o=n.value.clone(),a=_O(n.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(i,e,t):i instanceof nh?function(n,r,s){if(!s5(n.precondition,r))return void r.convertToUnknownDocument(s.version);const o=_O(n.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(ZH(n)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(i,e,t):function(n,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function z2(i,e,t,n){return i instanceof G3?function(r,s,o,a){if(!s5(r.precondition,s))return o;const l=r.value.clone(),c=bO(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(i,e,t,n):i instanceof nh?function(r,s,o,a){if(!s5(r.precondition,s))return o;const l=bO(r.fieldTransforms,a,s),c=s.data;return c.setAll(ZH(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(i,e,t,n):function(r,s,o){return s5(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(i,e,t)}function nce(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),s=WH(n.transform,r||null);s!=null&&(t===null&&(t=Aa.empty()),t.set(n.field,s))}return t||null}function xO(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(t,n){return t===void 0&&n===void 0||!(!t||!n)&&A1(t,n,(r,s)=>ece(r,s))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}let G3=class extends Ex{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},nh=class extends Ex{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ZH(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function _O(i,e,t){const n=new Map;Di(i.length===t.length);for(let r=0;r<t.length;r++){const s=i[r],o=s.transform,a=e.data.field(s.field);n.set(s.field,Jle(o,a,t[r]))}return n}function bO(i,e,t){const n=new Map;for(const r of i){const s=r.transform,o=t.data.field(r.field);n.set(r.field,Kle(s,o,e))}return n}let QH=class extends Ex{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},rce=class extends Ex{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sce=class{constructor(e){this.count=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,Ut;function oce(i){switch(i){default:return ft();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function KH(i){if(i===void 0)return ql("GRPC error has no .code"),Ie.UNKNOWN;switch(i){case Rn.OK:return Ie.OK;case Rn.CANCELLED:return Ie.CANCELLED;case Rn.UNKNOWN:return Ie.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return Ie.INTERNAL;case Rn.UNAVAILABLE:return Ie.UNAVAILABLE;case Rn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Rn.NOT_FOUND:return Ie.NOT_FOUND;case Rn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Rn.ABORTED:return Ie.ABORTED;case Rn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Rn.DATA_LOSS:return Ie.DATA_LOSS;default:return ft()}}(Ut=Rn||(Rn={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ef(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return DH(this.inner)}size(){return this.innerSize}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ace=new Qn(ut.comparator);function Yl(){return ace}const JH=new Qn(ut.comparator);function d2(...i){let e=JH;for(const t of i)e=e.insert(t.key,t);return e}function eW(i){let e=JH;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ld(){return k2()}function tW(){return k2()}function k2(){return new pm(i=>i.toString(),(i,e)=>i.isEqual(e))}const lce=new Qn(ut.comparator),cce=new Ur(ut.comparator);function Nt(...i){let e=cce;for(const t of i)e=e.add(t);return e}const uce=new Ur(ni);function iW(){return uce}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nW=class rW{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,jE.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rW(Et.min(),r,iW(),Yl(),Nt())}},jE=class sW{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new sW(n,t,Nt(),Nt(),Nt())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o5=class{constructor(e,t,n,r){this.It=e,this.removedTargetIds=t,this.key=n,this.Tt=r}},oW=class{constructor(e,t){this.targetId=e,this.Et=t}},aW=class{constructor(e,t,n=Hr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},wO=class{constructor(){this.At=0,this.Rt=AO(),this.bt=Hr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Nt(),t=Nt(),n=Nt();return this.Rt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ft()}}),new jE(this.bt,this.Pt,e,t,n)}xt(){this.vt=!1,this.Rt=AO()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}},hce=class{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Yl(),this.qt=SO(),this.Ut=new Ur(ni)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const n=this.Wt(t);switch(e.state){case 0:this.zt(t)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),n.Dt(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((n,r)=>{this.zt(r)&&t(r)})}Jt(e){const t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){const s=r.target;if($S(s))if(n===0){const o=new ut(s.path);this.Qt(t,o,Or.newNoDocument(o,Et.min()))}else Di(n===1);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&$S(a.target)){const l=new ut(a.target.path);this.Lt.get(l)!==null||this.te(o,l)||this.Qt(o,l,Or.newNoDocument(l,e))}s.St&&(t.set(o,s.Ct()),s.xt())}});let n=Nt();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Yt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(n=n.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const r=new nW(e,t,this.Ut,this.Lt,n);return this.Lt=Yl(),this.qt=SO(),this.Ut=new Ur(ni),r}Gt(e,t){if(!this.zt(e))return;const n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,n){if(!this.zt(e))return;const r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new wO,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ur(ni),this.qt=this.qt.insert(e,t)),t}zt(e){const t=this.Yt(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new wO),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}};function SO(){return new Qn(ut.comparator)}function AO(){return new Qn(ut.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),fce=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),pce=(()=>({and:"AND",or:"OR"}))();let mce=class{constructor(e,t){this.databaseId=e,this.wt=t}};function o6(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lW(i,e){return i.wt?e.toBase64():e.toUint8Array()}function gce(i,e){return o6(i,e.toTimestamp())}function P0(i){return Di(!!i),Et.fromTimestamp(function(e){const t=ku(e);return new ls(t.seconds,t.nanos)}(i))}function HE(i,e){return function(t){return new Bn(["projects",t.projectId,"databases",t.database])}(i).child("documents").child(e).canonicalString()}function cW(i){const e=Bn.fromString(i);return Di(fW(e)),e}function YS(i,e){return HE(i.databaseId,e.path)}function l_(i,e){const t=cW(e);if(t.get(1)!==i.databaseId.projectId)throw new rt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new rt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ut(uW(t))}function ZS(i,e){return HE(i.databaseId,e)}function vce(i){const e=cW(i);return e.length===4?Bn.emptyPath():uW(e)}function QS(i){return new Bn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function uW(i){return Di(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function TO(i,e,t){return{name:YS(i,e),fields:t.value.mapValue.fields}}function yce(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ft()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.wt?(Di(c===void 0||typeof c=="string"),Hr.fromBase64String(c||"")):(Di(c===void 0||c instanceof Uint8Array),Hr.fromUint8Array(c||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Ie.UNKNOWN:KH(l.code);return new rt(c,l.message||"")}(o);t=new aW(n,r,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=l_(i,n.document.name),s=P0(n.document.updateTime),o=n.document.createTime?P0(n.document.createTime):Et.min(),a=new Aa({mapValue:{fields:n.document.fields}}),l=Or.newFoundDocument(r,s,o,a),c=n.targetIds||[],h=n.removedTargetIds||[];t=new o5(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=l_(i,n.document),s=n.readTime?P0(n.readTime):Et.min(),o=Or.newNoDocument(r,s),a=n.removedTargetIds||[];t=new o5([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=l_(i,n.document),s=n.removedTargetIds||[];t=new o5([],s,r,null)}else{if(!("filter"in e))return ft();{e.filter;const n=e.filter;n.targetId;const r=n.count||0,s=new sce(r),o=n.targetId;t=new oW(o,s)}}return t}function xce(i,e){let t;if(e instanceof G3)t={update:TO(i,e.key,e.value)};else if(e instanceof QH)t={delete:YS(i,e.key)};else if(e instanceof nh)t={update:TO(i,e.key,e.data),updateMask:Cce(e.fieldMask)};else{if(!(e instanceof rce))return ft();t={verify:YS(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(r,s){const o=s.transform;if(o instanceof r6)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Iv)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ov)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof s6)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ft()}(0,n))),e.precondition.isNone||(t.currentDocument=function(n,r){return r.updateTime!==void 0?{updateTime:gce(n,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ft()}(i,e.precondition)),t}function _ce(i,e){return i&&i.length>0?(Di(e!==void 0),i.map(t=>function(n,r){let s=n.updateTime?P0(n.updateTime):P0(r);return s.isEqual(Et.min())&&(s=P0(r)),new tce(s,n.transformResults||[])}(t,e))):[]}function bce(i,e){return{documents:[ZS(i,e.path)]}}function wce(i,e){const t={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(t.parent=ZS(i,n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZS(i,n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);const r=function(l){if(l.length!==0)return dW(Bu.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:gp(h.field),direction:Tce(h.dir)}}(c))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=function(l,c){return l.wt||wx(c)?c:{value:c}}(i,e.limit);var a;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t}function Sce(i){let e=vce(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){Di(n===1);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(h){const u=hW(h);return u instanceof Bu&&FH(u)?u.getFilters():[u]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(h=>function(u){return new F2(vp(u.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(u.direction))}(h)));let a=null;t.limit&&(a=function(h){let u;return u=typeof h=="object"?h.value:h,wx(u)?null:u}(t.limit));let l=null;t.startAt&&(l=function(h){const u=!!h.before,d=h.values||[];return new n6(d,u)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const u=!h.before,d=h.values||[];return new n6(d,u)}(t.endAt)),Wle(e,r,o,s,a,"F",l,c)}function Ace(i,e){const t=function(n,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function hW(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=vp(e.unaryFilter.field);return _r.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=vp(e.unaryFilter.field);return _r.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vp(e.unaryFilter.field);return _r.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=vp(e.unaryFilter.field);return _r.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(i):i.fieldFilter!==void 0?function(e){return _r.create(vp(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return Bu.create(e.compositeFilter.filters.map(t=>hW(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(i):ft()}function Tce(i){return dce[i]}function Mce(i){return fce[i]}function Ece(i){return pce[i]}function gp(i){return{fieldPath:i.canonicalString()}}function vp(i){return U0.fromServerFormat(i.fieldPath)}function dW(i){return i instanceof _r?function(e){if(e.op==="=="){if(dO(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NAN"}};if(hO(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(dO(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NOT_NAN"}};if(hO(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gp(e.field),op:Mce(e.op),value:e.value}}}(i):i instanceof Bu?function(e){const t=e.getFilters().map(n=>dW(n));return t.length===1?t[0]:{compositeFilter:{op:Ece(e.op),filters:t}}}(i):ft()}function Cce(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fW(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dce=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&ice(s,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=z2(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=z2(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tW();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=YH(o,a);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&A1(this.mutations,e.mutations,(t,n)=>xO(t,n))&&A1(this.baseMutations,e.baseMutations,(t,n)=>xO(t,n))}},Pce=class pW{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Di(e.mutations.length===n.length);let r=lce;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new pW(e,t,n,r)}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lce=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WE=class a5{constructor(e,t,n,r,s=Et.min(),o=Et.min(),a=Hr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new a5(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new a5(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new a5(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ice=class{constructor(e){this.ie=e}};function Oce(i){const e=Sce({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qS(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rce=class{constructor(){this.Je=new Nce}addToCollectionParentIndex(e,t){return this.Je.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(zu.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(zu.min())}updateCollectionGroup(e,t,n){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}},Nce=class{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ur(Bn.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ur(Bn.comparator)).toArray()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS=class JS{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new JS(0)}static vn(){return new JS(-1)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fce=class{constructor(){this.changes=new pm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ke.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zce=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kce=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&z2(n.mutation,r,b0.empty(),ls.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Nt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Nt()){const r=ld();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=d2();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=ld();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nt()))}populateOverlays(e,t,n){const r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,n,r){let s=Yl();const o=k2(),a=k2();return t.forEach((l,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof nh)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),z2(h.mutation,c,h.mutation.getFieldMask(),ls.now())):o.set(c.key,b0.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var u;return a.set(c,new zce(h,(u=o.get(c))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,t){const n=k2();let r=new Qn((o,a)=>o-a),s=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=n.get(l)||b0.empty();h=a.applyToLocalView(c,h),n.set(l,h);const u=(r.get(a.batchId)||Nt()).add(l);r=r.insert(a.batchId,u)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,u=tW();h.forEach(d=>{if(!s.has(d)){const f=YH(t.get(d),n.get(d));f!==null&&u.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,u))}return ke.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n){return function(r){return ut.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xle(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ke.resolve(ld());let a=-1,l=s;return o.next(c=>ke.forEach(c,(h,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),s.get(h)?ke.resolve():this.remoteDocumentCache.getEntry(e,h).next(d=>{l=l.insert(h,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Nt())).next(h=>({batchId:a,changes:eW(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(n=>{let r=d2();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=d2();return this.indexManager.getCollectionParents(e,r).next(o=>ke.forEach(o,a=>{const l=function(c,h){return new Sx(h,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,n).next(c=>{c.forEach((h,u)=>{s=s.insert(h,u)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(s=>{r.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Or.newInvalidDocument(c)))});let o=d2();return s.forEach((a,l)=>{const c=r.get(a);c!==void 0&&z2(c.mutation,l,b0.empty(),ls.now()),Tx(t,l)&&(o=o.insert(a,l))}),o})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bce=class{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ke.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:P0(n.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(n){return{name:n.name,query:Oce(n.bundledQuery),readTime:P0(n.readTime)}}(t)),ke.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uce=class{constructor(){this.overlays=new Qn(ut.comparator),this.es=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ld();return ke.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.oe(e,t,s)}),ke.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.es.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(n)),ke.resolve()}getOverlaysForCollection(e,t,n){const r=ld(),s=t.length+1,o=new ut(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return ke.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Qn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=ld(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ld(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return ke.resolve(a)}oe(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Lce(t,n));let s=this.es.get(t);s===void 0&&(s=Nt(),this.es.set(t,s)),this.es.set(t,s.add(n.key))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $E=class{constructor(){this.ns=new Ur(sr.ss),this.rs=new Ur(sr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new sr(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.cs(new sr(e,t))}hs(e,t){e.forEach(n=>this.removeReference(n,t))}ls(e){const t=new ut(new Bn([])),n=new sr(t,e),r=new sr(t,e+1),s=[];return this.rs.forEachInRange([n,r],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ut(new Bn([])),n=new sr(t,e),r=new sr(t,e+1);let s=Nt();return this.rs.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new sr(e,0),n=this.ns.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},sr=class{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ut.comparator(e.key,t.key)||ni(e._s,t._s)}static os(e,t){return ni(e._s,t._s)||ut.comparator(e.key,t.key)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vce=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ur(sr.ss)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dce(s,t,n,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new sr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,t){return ke.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ps(n),s=r<0?0:r;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([n,r],o=>{const a=this.ys(o._s);s.push(a)}),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ur(ni);return t.forEach(r=>{const s=new sr(r,0),o=new sr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{n=n.add(a._s)})}),ke.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ut.isDocumentKey(s)||(s=s.child(""));const o=new sr(new ut(s),0);let a=new Ur(ni);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(a=a.add(l._s)),!0)},o),ke.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(n=>{const r=this.ys(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Di(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.gs;return ke.forEach(t.mutations,r=>{const s=new sr(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=n})}An(e){}containsKey(e,t){const n=new sr(t,0),r=this.gs.firstAfterOrEqual(n);return ke.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gce=class{constructor(e){this.Es=e,this.docs=new Qn(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ke.resolve(n?n.document.mutableCopy():Or.newInvalidDocument(t))}getEntries(e,t){let n=Yl();return t.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Or.newInvalidDocument(r))}),ke.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Yl();const o=t.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Cle(Ele(h),n)<=0||(r.has(h.key)||Tx(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ft()}As(e,t){return ke.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new jce(this)}getSize(e){return ke.resolve(this.size)}},jce=class extends Fce{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(n)}),ke.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hce=class{constructor(e){this.persistence=e,this.Rs=new pm(t=>UE(t),VE),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $E,this.targetCount=0,this.vs=KS.Pn()}forEachTarget(e,t){return this.Rs.forEach((n,r)=>t(r)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),ke.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new KS(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Dn(t),ke.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ke.waitFor(s).next(()=>r)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return ke.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),ke.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),ke.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return ke.resolve(n)}containsKey(e,t){return ke.resolve(this.Ps.containsKey(t))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wce=class{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new kE(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Hce(this),this.indexManager=new Rce,this.remoteDocumentCache=function(n){return new Gce(n)}(n=>this.referenceDelegate.xs(n)),this.yt=new Ice(t),this.Ns=new Bce(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new Vce(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){Qe("MemoryPersistence","Starting transaction:",e);const r=new $ce(this.Ss.next());return this.referenceDelegate.ks(),n(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(e,t){return ke.or(Object.values(this.Vs).map(n=>()=>n.containsKey(e,t)))}},$ce=class extends Ple{constructor(e){super(),this.currentSequenceNumber=e}},qce=class mW{constructor(e){this.persistence=e,this.Fs=new $E,this.$s=null}static Bs(e){return new mW(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),ke.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ls,n=>{const r=ut.fromPath(n);return this.qs(e,r).next(s=>{s||t.removeEntry(r,Et.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(n=>{n?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ke.or([()=>ke.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xce=class gW{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=r}static Ci(e,t){let n=Nt(),r=Nt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gW(e,t.fromCache,n,r)}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yce=class{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.ki(e,t).next(s=>s||this.Oi(e,t,r,n)).next(s=>s||this.Mi(e,t))}ki(e,t){if(vO(t))return ke.resolve(null);let n=Xl(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=qS(t,null,"F"),n=Xl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Nt(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,qS(t,null,"F")):this.Bi(e,c,t,l)}))})))}Oi(e,t,n,r){return vO(t)||r.isEqual(Et.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,n,r)?this.Mi(e,t):(lO()<=Kt.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),XS(t)),this.Bi(e,o,t,Mle(r,-1)))})}Fi(e,t){let n=new Ur(GH(e));return t.forEach((r,s)=>{Tx(e,s)&&(n=n.add(s))}),n}$i(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(e,t){return lO()<=Kt.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",XS(t)),this.Ni.getDocumentsMatchingQuery(e,t,zu.min())}Bi(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zce=class{constructor(e,t,n,r){this.persistence=e,this.Li=t,this.yt=r,this.qi=new Qn(ni),this.Ui=new pm(s=>UE(s),VE),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kce(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}};function Qce(i,e,t,n){return new Zce(i,e,t,n)}async function vW(i,e){const t=At(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let l=Nt();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(n,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function Kce(i,e){const t=At(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const h=l.batch,u=h.keys();let d=ke.resolve();return u.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);Di(m!==null),p.version.compareTo(m)<0&&(h.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let a=Nt();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function yW(i){const e=At(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Jce(i,e){const t=At(i),n=e.snapshotVersion;let r=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.qi;const a=[];e.targetChanges.forEach((h,u)=>{const d=r.get(u);if(!d)return;a.push(t.Cs.removeMatchingKeys(s,h.removedDocuments,u).next(()=>t.Cs.addMatchingKeys(s,h.addedDocuments,u)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(u)?f=f.withResumeToken(Hr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,n)),r=r.insert(u,f),function(p,m,y){return p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,h)&&a.push(t.Cs.updateTargetData(s,f))});let l=Yl(),c=Nt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(eue(s,o,e.documentUpdates).next(h=>{l=h.Wi,c=h.zi})),!n.isEqual(Et.min())){const h=t.Cs.getLastRemoteSnapshotVersion(s).next(u=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(h)}return ke.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.qi=r,s))}function eue(i,e,t){let n=Nt(),r=Nt();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=Yl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Qe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function tue(i,e){const t=At(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function iue(i,e){const t=At(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Cs.getTargetData(n,e).next(s=>s?(r=s,ke.resolve(r)):t.Cs.allocateTargetId(n).next(o=>(r=new WE(e,o,0,n.currentSequenceNumber),t.Cs.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=t.qi.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.qi=t.qi.insert(n.targetId,n),t.Ui.set(e,n.targetId)),n})}async function eA(i,e,t){const n=At(i),r=n.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!V3(o))throw o;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.qi=n.qi.remove(e),n.Ui.delete(r.target)}function MO(i,e,t){const n=At(i);let r=Et.min(),s=Nt();return n.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const h=At(a),u=h.Ui.get(c);return u!==void 0?ke.resolve(h.qi.get(u)):h.Cs.getTargetData(l,c)}(n,o,Xl(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n.Li.getDocumentsMatchingQuery(o,e,t?r:Et.min(),t?s:Nt())).next(a=>(nue(n,Yle(e),a),{documents:a,Hi:s})))}function nue(i,e,t){let n=i.Ki.get(e)||Et.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.Ki.set(e,n)}let EO=class{constructor(){this.activeTargetIds=iW()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rue=class{constructor(){this.Lr=new EO,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new EO,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sue=class{Ur(e){}shutdown(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CO=class{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aue=class{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lue=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,r,s){const o=this.ho(e,t);Qe("RestConnection","Sending: ",o,n);const a={};return this.lo(a,r,s),this.fo(e,o,a,n).then(l=>(Qe("RestConnection","Received: ",l),l),l=>{throw zS("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",n),l})}_o(e,t,n,r,s,o){return this.ao(e,t,n,r,s)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),n&&n.headers.forEach((r,s)=>e[s]=r)}ho(e,t){const n=oue[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise((s,o)=>{const a=new gle;a.setWithCredentials(!0),a.listenOnce(fle.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case a_.NO_ERROR:const c=a.getResponseJson();Qe("Connection","XHR received:",JSON.stringify(c)),s(c);break;case a_.TIMEOUT:Qe("Connection",'RPC "'+e+'" timed out'),o(new rt(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case a_.HTTP_ERROR:const h=a.getStatus();if(Qe("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let u=a.getResponseJson();Array.isArray(u)&&(u=u[0]);const d=u==null?void 0:u.error;if(d&&d.status&&d.message){const f=function(p){const m=p.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(m)>=0?m:Ie.UNKNOWN}(d.status);o(new rt(f,d.message))}else o(new rt(Ie.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new rt(Ie.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Qe("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(t,"POST",l,n,15)})}wo(e,t,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hle(),o=dle(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new mle({})),this.lo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=r.join("");Qe("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let h=!1,u=!1;const d=new aue({Hr:p=>{u?Qe("Connection","Not sending because WebChannel is closed:",p):(h||(Qe("Connection","Opening WebChannel transport."),c.open(),h=!0),Qe("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,m,y)=>{p.listen(m,g=>{try{y(g)}catch(v){setTimeout(()=>{throw v},0)}})};return f(c,Ly.EventType.OPEN,()=>{u||Qe("Connection","WebChannel transport opened.")}),f(c,Ly.EventType.CLOSE,()=>{u||(u=!0,Qe("Connection","WebChannel transport closed"),d.io())}),f(c,Ly.EventType.ERROR,p=>{u||(u=!0,zS("Connection","WebChannel transport errored:",p),d.io(new rt(Ie.UNAVAILABLE,"The operation could not be completed")))}),f(c,Ly.EventType.MESSAGE,p=>{var m;if(!u){const y=p.data[0];Di(!!y);const g=y,v=g.error||((m=g[0])===null||m===void 0?void 0:m.error);if(v){Qe("Connection","WebChannel received error:",v);const x=v.status;let _=function(b){const S=Rn[b];if(S!==void 0)return KH(S)}(x),w=v.message;_===void 0&&(_=Ie.INTERNAL,w="Unknown error status: "+x+" with message "+v.message),u=!0,d.io(new rt(_,w)),c.close()}else Qe("Connection","WebChannel received:",y),d.ro(y)}}),f(o,ple.STAT_EVENT,p=>{p.stat===oO.PROXY?Qe("Connection","Detected buffering proxy"):p.stat===oO.NOPROXY&&Qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}};function c_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(i){return new mce(i,!0)}let xW=class{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&Qe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _W=class{constructor(e,t,n,r,s,o,a,l){this.Hs=e,this.vo=n,this.Vo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new xW(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(ql(t.toString()),ql("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.So===t&&this.Go(n,r)},n=>{e(()=>{const r=new rt(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Qo(r)})})}Go(e,t){const n=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{n(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{n(()=>this.Qo(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cue=class extends _W{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=yce(this.yt,e),n=function(r){if(!("targetChange"in r))return Et.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?P0(s.readTime):Et.min()}(e);return this.listener.Wo(t,n)}zo(e){const t={};t.database=QS(this.yt),t.addTarget=function(r,s){let o;const a=s.target;return o=$S(a)?{documents:bce(r,a)}:{query:wce(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=lW(r,s.resumeToken):s.snapshotVersion.compareTo(Et.min())>0&&(o.readTime=o6(r,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const n=Ace(this.yt,e);n&&(t.labels=n),this.Bo(t)}Ho(e){const t={};t.database=QS(this.yt),t.removeTarget=e,this.Bo(t)}},uue=class extends _W{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Di(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=_ce(e.writeResults,e.commitTime),n=P0(e.commitTime);return this.listener.Zo(n,t)}return Di(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=QS(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>xce(this.yt,n))};this.Bo(t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hue=class extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.yt=r,this.nu=!1}su(){if(this.nu)throw new rt(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(e,t,n,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt(Ie.UNKNOWN,r.toString())})}_o(e,t,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,t,n,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new rt(Ie.UNKNOWN,s.toString())})}terminate(){this.nu=!0}},due=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ql(t),this.ou=!1):Qe("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fue=class{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(o=>{n.enqueueAndForget(async()=>{tf(this)&&(Qe("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=At(a);l._u.add(4),await j3(l),l.gu.set("Unknown"),l._u.delete(4),await Dx(l)}(this))})}),this.gu=new due(n,r)}};async function Dx(i){if(tf(i))for(const e of i.wu)await e(!0)}async function j3(i){for(const e of i.wu)await e(!1)}function bW(i,e){const t=At(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),YE(t)?XE(t):mm(t).ko()&&qE(t,e))}function wW(i,e){const t=At(i),n=mm(t);t.du.delete(e),n.ko()&&SW(t,e),t.du.size===0&&(n.ko()?n.Fo():tf(t)&&t.gu.set("Unknown"))}function qE(i,e){i.yu.Ot(e.targetId),mm(i).zo(e)}function SW(i,e){i.yu.Ot(e),mm(i).Ho(e)}function XE(i){i.yu=new hce({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),mm(i).start(),i.gu.uu()}function YE(i){return tf(i)&&!mm(i).No()&&i.du.size>0}function tf(i){return At(i)._u.size===0}function AW(i){i.yu=void 0}async function pue(i){i.du.forEach((e,t)=>{qE(i,e)})}async function mue(i,e){AW(i),YE(i)?(i.gu.hu(e),XE(i)):i.gu.set("Unknown")}async function gue(i,e,t){if(i.gu.set("Online"),e instanceof aW&&e.state===2&&e.cause)try{await async function(n,r){const s=r.cause;for(const o of r.targetIds)n.du.has(o)&&(await n.remoteSyncer.rejectListen(o,s),n.du.delete(o),n.yu.removeTarget(o))}(i,e)}catch(n){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await a6(i,n)}else if(e instanceof o5?i.yu.Kt(e):e instanceof oW?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Et.min()))try{const n=await yW(i.localStore);t.compareTo(n)>=0&&await function(r,s){const o=r.yu.Zt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.du.get(l);c&&r.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(Hr.EMPTY_BYTE_STRING,l.snapshotVersion)),SW(r,a);const c=new WE(l.target,a,1,l.sequenceNumber);qE(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(i,t)}catch(n){Qe("RemoteStore","Failed to raise snapshot:",n),await a6(i,n)}}async function a6(i,e,t){if(!V3(e))throw e;i._u.add(1),await j3(i),i.gu.set("Offline"),t||(t=()=>yW(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Qe("RemoteStore","Retrying IndexedDB access"),await t(),i._u.delete(1),await Dx(i)})}function TW(i,e){return e().catch(t=>a6(i,t,e))}async function Px(i){const e=At(i),t=Uu(e);let n=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;vue(e);)try{const r=await tue(e.localStore,n);if(r===null){e.fu.length===0&&t.Fo();break}n=r.batchId,yue(e,r)}catch(r){await a6(e,r)}MW(e)&&EW(e)}function vue(i){return tf(i)&&i.fu.length<10}function yue(i,e){i.fu.push(e);const t=Uu(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function MW(i){return tf(i)&&!Uu(i).No()&&i.fu.length>0}function EW(i){Uu(i).start()}async function xue(i){Uu(i).eu()}async function _ue(i){const e=Uu(i);for(const t of i.fu)e.Xo(t.mutations)}async function bue(i,e,t){const n=i.fu.shift(),r=Pce.from(n,e,t);await TW(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await Px(i)}async function wue(i,e){e&&Uu(i).Yo&&await async function(t,n){if(r=n.code,oce(r)&&r!==Ie.ABORTED){const s=t.fu.shift();Uu(t).Mo(),await TW(t,()=>t.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Px(t)}var r}(i,e),MW(i)&&EW(i)}async function DO(i,e){const t=At(i);t.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const n=tf(t);t._u.add(3),await j3(t),n&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await Dx(t)}async function Sue(i,e){const t=At(i);e?(t._u.delete(2),await Dx(t)):e||(t._u.add(2),await j3(t),t.gu.set("Unknown"))}function mm(i){return i.pu||(i.pu=function(e,t,n){const r=At(e);return r.su(),new cue(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(i.datastore,i.asyncQueue,{Yr:pue.bind(null,i),Zr:mue.bind(null,i),Wo:gue.bind(null,i)}),i.wu.push(async e=>{e?(i.pu.Mo(),YE(i)?XE(i):i.gu.set("Unknown")):(await i.pu.stop(),AW(i))})),i.pu}function Uu(i){return i.Iu||(i.Iu=function(e,t,n){const r=At(e);return r.su(),new uue(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(i.datastore,i.asyncQueue,{Yr:xue.bind(null,i),Zr:wue.bind(null,i),tu:_ue.bind(null,i),Zo:bue.bind(null,i)}),i.wu.push(async e=>{e?(i.Iu.Mo(),await Px(i)):(await i.Iu.stop(),i.fu.length>0&&(Qe("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))})),i.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aue=class CW{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new vd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,a=new CW(e,t,o,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZE(i,e){if(ql("AsyncQueue",`${e}: ${i}`),V3(i))return new rt(Ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DW=class l5{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ut.comparator(t.key,n.key):(t,n)=>ut.comparator(t.key,n.key),this.keyedMap=d2(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new l5(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof l5)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new l5;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PO=class{constructor(){this.Tu=new Qn(ut.comparator)}track(e){const t=e.doc.key,n=this.Tu.get(t);n?e.type!==0&&n.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&n.type!==1?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Tu=this.Tu.remove(t):e.type===1&&n.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ft():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,n)=>{e.push(n)}),e}},l6=class PW{constructor(e,t,n,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new PW(e,t,DW.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ax(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tue=class{constructor(){this.Au=void 0,this.listeners=[]}},Mue=class{constructor(){this.queries=new pm(e=>VH(e),Ax),this.onlineState="Unknown",this.Ru=new Set}};async function Eue(i,e){const t=At(i),n=e.query;let r=!1,s=t.queries.get(n);if(s||(r=!0,s=new Tue),r)try{s.Au=await t.onListen(n)}catch(o){const a=ZE(o,`Initialization of query '${XS(e.query)}' failed`);return void e.onError(a)}t.queries.set(n,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&QE(t)}async function Cue(i,e){const t=At(i),n=e.query;let r=!1;const s=t.queries.get(n);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return t.queries.delete(n),t.onUnlisten(n)}function Due(i,e){const t=At(i);let n=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.listeners)a.Pu(r)&&(n=!0);o.Au=r}}n&&QE(t)}function Pue(i,e,t){const n=At(i),r=n.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);n.queries.delete(e)}function QE(i){i.Ru.forEach(e=>{e.next()})}let Lue=class{constructor(e,t,n){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new l6(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const n=t!=="Offline";return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=l6.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LW=class{constructor(e){this.key=e}},IW=class{constructor(e){this.key=e}},Iue=class{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Nt(),this.mutatedKeys=Nt(),this.Gu=GH(e),this.Qu=new DW(this.Gu)}get ju(){return this.qu}Wu(e,t){const n=t?t.zu:new PO,r=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,u)=>{const d=r.get(h),f=Tx(this.query,u)?u:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(n.track({type:3,doc:f}),y=!0):this.Hu(d,f)||(n.track({type:2,doc:f}),y=!0,(l&&this.Gu(f,l)>0||c&&this.Gu(f,c)<0)&&(a=!0)):!d&&f?(n.track({type:0,doc:f}),y=!0):d&&!f&&(n.track({type:1,doc:d}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),s=m?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Qu:o,zu:n,$i:a,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((c,h)=>function(u,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return f(u)-f(d)}(c.type,h.type)||this.Gu(c.doc,h.doc)),this.Ju(n);const o=t?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,s.length!==0||l?{snapshot:new l6(this.query,e.Qu,r,s,e.mutatedKeys,a===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new PO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Nt(),this.Qu.forEach(n=>{this.Zu(n.key)&&(this.Ku=this.Ku.add(n.key))});const t=[];return e.forEach(n=>{this.Ku.has(n)||t.push(new IW(n))}),this.Ku.forEach(n=>{e.has(n)||t.push(new LW(n))}),t}tc(e){this.qu=e.Hi,this.Ku=Nt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return l6.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}},Oue=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Rue=class{constructor(e){this.key=e,this.nc=!1}},Nue=class{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new pm(a=>VH(a),Ax),this.rc=new Map,this.oc=new Set,this.uc=new Qn(ut.comparator),this.cc=new Map,this.ac=new $E,this.hc={},this.lc=new Map,this.fc=KS.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}};async function Fue(i,e){const t=$ue(i);let n,r;const s=t.ic.get(e);if(s)n=s.targetId,t.sharedClientState.addLocalQueryTarget(n),r=s.view.ec();else{const o=await iue(t.localStore,Xl(e));t.isPrimaryClient&&bW(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);n=o.targetId,r=await zue(t,e,n,a==="current",o.resumeToken)}return r}async function zue(i,e,t,n,r){i._c=(u,d,f)=>async function(p,m,y,g){let v=m.view.Wu(y);v.$i&&(v=await MO(p.localStore,m.query,!1).then(({documents:w})=>m.view.Wu(w,v)));const x=g&&g.targetChanges.get(m.targetId),_=m.view.applyChanges(v,p.isPrimaryClient,x);return IO(p,m.targetId,_.Xu),_.snapshot}(i,u,d,f);const s=await MO(i.localStore,e,!0),o=new Iue(e,s.Hi),a=o.Wu(s.documents),l=jE.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),c=o.applyChanges(a,i.isPrimaryClient,l);IO(i,t,c.Xu);const h=new Oue(e,t,o);return i.ic.set(e,h),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),c.snapshot}async function kue(i,e){const t=At(i),n=t.ic.get(e),r=t.rc.get(n.targetId);if(r.length>1)return t.rc.set(n.targetId,r.filter(s=>!Ax(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(n.targetId),t.sharedClientState.isActiveQueryTarget(n.targetId)||await eA(t.localStore,n.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(n.targetId),wW(t.remoteStore,n.targetId),tA(t,n.targetId)}).catch(U3)):(tA(t,n.targetId),await eA(t.localStore,n.targetId,!0))}async function Bue(i,e,t){const n=que(i);try{const r=await function(s,o){const a=At(s),l=ls.now(),c=o.reduce((d,f)=>d.add(f.key),Nt());let h,u;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Yl(),p=Nt();return a.Gi.getEntries(d,c).next(m=>{f=m,f.forEach((y,g)=>{g.isValidDocument()||(p=p.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(m=>{h=m;const y=[];for(const g of o){const v=nce(g,h.get(g.key).overlayedDocument);v!=null&&y.push(new nh(g.key,v,UH(v.value.mapValue),Yp.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,y,o)}).next(m=>{u=m;const y=m.applyToLocalDocumentSet(h,p);return a.documentOverlayCache.saveOverlays(d,m.batchId,y)})}).then(()=>({batchId:u.batchId,changes:eW(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.hc[s.currentUser.toKey()];l||(l=new Qn(ni)),l=l.insert(o,a),s.hc[s.currentUser.toKey()]=l}(n,r.batchId,t),await H3(n,r.changes),await Px(n.remoteStore)}catch(r){const s=ZE(r,"Failed to persist write");t.reject(s)}}async function OW(i,e){const t=At(i);try{const n=await Jce(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.cc.get(s);o&&(Di(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?Di(o.nc):r.removedDocuments.size>0&&(Di(o.nc),o.nc=!1))}),await H3(t,n,e)}catch(n){await U3(n)}}function LO(i,e,t){const n=At(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=At(s);a.onlineState=o;let l=!1;a.queries.forEach((c,h)=>{for(const u of h.listeners)u.bu(o)&&(l=!0)}),l&&QE(a)}(n.eventManager,e),r.length&&n.sc.Wo(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Uue(i,e,t){const n=At(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.cc.get(e),s=r&&r.key;if(s){let o=new Qn(ut.comparator);o=o.insert(s,Or.newNoDocument(s,Et.min()));const a=Nt().add(s),l=new nW(Et.min(),new Map,new Ur(ni),o,a);await OW(n,l),n.uc=n.uc.remove(s),n.cc.delete(e),KE(n)}else await eA(n.localStore,e,!1).then(()=>tA(n,e,t)).catch(U3)}async function Vue(i,e){const t=At(i),n=e.batch.batchId;try{const r=await Kce(t.localStore,e);NW(t,n,null),RW(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await H3(t,r)}catch(r){await U3(r)}}async function Gue(i,e,t){const n=At(i);try{const r=await function(s,o){const a=At(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(Di(h!==null),c=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(n.localStore,e);NW(n,e,t),RW(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await H3(n,r)}catch(r){await U3(r)}}function RW(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function NW(i,e,t){const n=At(i);let r=n.hc[n.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.hc[n.currentUser.toKey()]=r}}function tA(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.rc.get(e))i.ic.delete(n),t&&i.sc.wc(n,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(n=>{i.ac.containsKey(n)||FW(i,n)})}function FW(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);t!==null&&(wW(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),KE(i))}function IO(i,e,t){for(const n of t)n instanceof LW?(i.ac.addReference(n.key,e),jue(i,n)):n instanceof IW?(Qe("SyncEngine","Document no longer in limbo: "+n.key),i.ac.removeReference(n.key,e),i.ac.containsKey(n.key)||FW(i,n.key)):ft()}function jue(i,e){const t=e.key,n=t.path.canonicalString();i.uc.get(t)||i.oc.has(n)||(Qe("SyncEngine","New document in limbo: "+t),i.oc.add(n),KE(i))}function KE(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new ut(Bn.fromString(e)),n=i.fc.next();i.cc.set(n,new Rue(t)),i.uc=i.uc.insert(t,n),bW(i.remoteStore,new WE(Xl(GE(t.path)),n,2,kE.at))}}async function H3(i,e,t){const n=At(i),r=[],s=[],o=[];n.ic.isEmpty()||(n.ic.forEach((a,l)=>{o.push(n._c(l,e,t).then(c=>{if((c||t)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const h=Xce.Ci(l.targetId,c);s.push(h)}}))}),await Promise.all(o),n.sc.Wo(r),await async function(a,l){const c=At(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ke.forEach(l,u=>ke.forEach(u.Si,d=>c.persistence.referenceDelegate.addReference(h,u.targetId,d)).next(()=>ke.forEach(u.Di,d=>c.persistence.referenceDelegate.removeReference(h,u.targetId,d)))))}catch(h){if(!V3(h))throw h;Qe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const u=h.targetId;if(!h.fromCache){const d=c.qi.get(u),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.qi=c.qi.insert(u,p)}}}(n.localStore,s))}async function Hue(i,e){const t=At(i);if(!t.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const n=await vW(t.localStore,e);t.currentUser=e,function(r,s){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new rt(Ie.CANCELLED,s))})}),r.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await H3(t,n.ji)}}function Wue(i,e){const t=At(i),n=t.cc.get(e);if(n&&n.nc)return Nt().add(n.key);{let r=Nt();const s=t.rc.get(e);if(!s)return r;for(const o of s){const a=t.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function $ue(i){const e=At(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=OW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uue.bind(null,e),e.sc.Wo=Due.bind(null,e.eventManager),e.sc.wc=Pue.bind(null,e.eventManager),e}function que(i){const e=At(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gue.bind(null,e),e}let Xue=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Cx(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Qce(this.persistence,new Yce,e.initialUser,this.yt)}yc(e){return new Wce(qce.Bs,this.yt)}gc(e){return new rue}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}},Yue=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>LO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hue.bind(null,this.syncEngine),await Sue(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Mue}createDatastore(e){const t=Cx(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new lue(r));var r;return function(s,o,a,l){return new hue(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=a=>LO(this.syncEngine,a,0),o=CO.C()?new CO:new sue,new fue(t,n,r,s,o);var t,n,r,s,o}createSyncEngine(e,t){return function(n,r,s,o,a,l,c){const h=new Nue(n,r,s,o,a,l);return c&&(h.dc=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=At(e);Qe("RemoteStore","RemoteStore shutting down."),t._u.add(5),await j3(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(i,e,t){if(!t)throw new rt(Ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Zue(i,e,t,n){if(e===!0&&n===!0)throw new rt(Ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function OO(i){if(!ut.isDocumentKey(i))throw new rt(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function RO(i){if(ut.isDocumentKey(i))throw new rt(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function JE(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ft()}function Su(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new rt(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JE(i);throw new rt(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Map;let FO=class{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new rt(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new rt(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lx=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rt(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new rt(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FO(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new vle;switch(t.type){case"gapi":const n=t.client;return new ble(n,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new rt(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=NO.get(e);t&&(Qe("ComponentProvider","Removing Datastore"),NO.delete(e),t.terminate())}(this),Promise.resolve()}};function Que(i,e,t,n={}){var r;const s=(i=Su(i,Lx))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&zS("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),n.mockUserToken){let o,a;if(typeof n.mockUserToken=="string")o=n.mockUserToken,a=Pr.MOCK_USER;else{o=vj(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new rt(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Pr(l)}i._authCredentials=new yle(new TH(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go=class kW{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kW(this.firestore,e,this._key)}},BW=class UW{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new UW(this.firestore,e,this._query)}},Zp=class VW extends BW{constructor(e,t,n){super(e,t,GE(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Go(this.firestore,null,new ut(e))}withConverter(e){return new VW(this.firestore,e,this._path)}};function Kue(i,e,...t){if(i=dn(i),zW("collection","path",e),i instanceof Lx){const n=Bn.fromString(e,...t);return RO(n),new Zp(i,null,n)}{if(!(i instanceof Go||i instanceof Zp))throw new rt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Bn.fromString(e,...t));return RO(n),new Zp(i.firestore,null,n)}}function wJe(i,e,...t){if(i=dn(i),arguments.length===1&&(e=MH.R()),zW("doc","path",e),i instanceof Lx){const n=Bn.fromString(e,...t);return OO(n),new Go(i,null,new ut(n))}{if(!(i instanceof Go||i instanceof Zp))throw new rt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Bn.fromString(e,...t));return OO(n),new Go(i.firestore,i instanceof Zp?i.converter:null,new ut(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jue=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ql("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ehe=class{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Pr.UNAUTHENTICATED,this.clientId=MH.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{Qe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Qe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rt(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ZE(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}};async function the(i,e){i.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const t=await i.getConfiguration();await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await vW(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}async function ihe(i,e){i.asyncQueue.verifyOperationInProgress();const t=await nhe(i);Qe("FirestoreClient","Initializing OnlineComponentProvider");const n=await i.getConfiguration();await e.initialize(t,n),i.setCredentialChangeListener(r=>DO(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,s)=>DO(e.remoteStore,s)),i.onlineComponents=e}async function nhe(i){return i.offlineComponents||(Qe("FirestoreClient","Using default OfflineComponentProvider"),await the(i,new Xue)),i.offlineComponents}async function GW(i){return i.onlineComponents||(Qe("FirestoreClient","Using default OnlineComponentProvider"),await ihe(i,new Yue)),i.onlineComponents}function rhe(i){return GW(i).then(e=>e.syncEngine)}async function zO(i){const e=await GW(i),t=e.eventManager;return t.onListen=Fue.bind(null,e.syncEngine),t.onUnlisten=kue.bind(null,e.syncEngine),t}let she=class{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new xW(this,"async_queue_retry"),this.Wc=()=>{const t=c_();t&&Qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=c_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=c_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new vd;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!V3(e))throw e;Qe("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(n=>{this.Kc=n,this.Gc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(n);throw ql("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.Gc=!1,n))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=Aue.createAndSchedule(this,e,t,n,s=>this.Yc(s));return this.Uc.push(r),r}zc(){this.Kc&&ft()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}};function kO(i){return function(e,t){if(typeof e!="object"||e===null)return!1;const n=e;for(const r of t)if(r in n&&typeof n[r]=="function")return!0;return!1}(i,["next","error","complete"])}let Rv=class extends Lx{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new she,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HW(this),this._firestoreClient.terminate()}};function ohe(i,e){const t=typeof i=="object"?i:mE(),n=typeof i=="string"?i:e||"(default)",r=ox(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=mj("firestore");s&&Que(r,...s)}return r}function jW(i){return i._firestoreClient||HW(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function HW(i){var e;const t=i._freezeSettings(),n=function(r,s,o,a){return new Lle(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,t);i._firestoreClient=new ehe(i._authCredentials,i._appCheckCredentials,i._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eC=class iA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iA(Hr.fromBase64String(e))}catch(t){throw new rt(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iA(Hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ix=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new rt(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new U0(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tC=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iC=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rt(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rt(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ni(this._lat,e._lat)||ni(this._long,e._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ahe=/^__.*__$/;let lhe=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new nh(e,this.data,this.fieldMask,t,this.fieldTransforms):new G3(e,this.data,t,this.fieldTransforms)}},WW=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new nh(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function $W(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}let che=class qW{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.yt=n,this.ignoreUndefinedProperties=r,s===void 0&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new qW(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}ca(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return c6(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if($W(this.sa)&&ahe.test(e))throw this.ha('Document fields cannot begin and end with "__"')}},uhe=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=n||Cx(e)}da(e,t,n,r=!1){return new che({sa:e,methodName:t,fa:n,path:U0.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}};function XW(i){const e=i._freezeSettings(),t=Cx(i._databaseId);return new uhe(i._databaseId,!!e.ignoreUndefinedProperties,t)}function hhe(i,e,t,n,r,s={}){const o=i.da(s.merge||s.mergeFields?2:0,e,t,r);nC("Data must be an object, but it was:",o,n);const a=QW(n,o);let l,c;if(s.merge)l=new b0(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const u of s.mergeFields){const d=nA(e,u,t);if(!o.contains(d))throw new rt(Ie.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);JW(h,d)||h.push(d)}l=new b0(h),c=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=o.fieldTransforms;return new lhe(new Aa(a),l,c)}let YW=class ZW extends tC{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ZW}};function dhe(i,e,t,n){const r=i.da(1,e,t);nC("Data must be an object, but it was:",r,n);const s=[],o=Aa.empty();ef(n,(l,c)=>{const h=rC(e,l,t);c=dn(c);const u=r.ca(h);if(c instanceof YW)s.push(h);else{const d=Ox(c,u);d!=null&&(s.push(h),o.set(h,d))}});const a=new b0(s);return new WW(o,a,r.fieldTransforms)}function fhe(i,e,t,n,r,s){const o=i.da(1,e,t),a=[nA(e,n,t)],l=[r];if(s.length%2!=0)throw new rt(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(nA(e,s[d])),l.push(s[d+1]);const c=[],h=Aa.empty();for(let d=a.length-1;d>=0;--d)if(!JW(c,a[d])){const f=a[d];let p=l[d];p=dn(p);const m=o.ca(f);if(p instanceof YW)c.push(f);else{const y=Ox(p,m);y!=null&&(c.push(f),h.set(f,y))}}const u=new b0(c);return new WW(h,u,o.fieldTransforms)}function Ox(i,e){if(KW(i=dn(i)))return nC("Unsupported field value:",e,i),QW(i,e);if(i instanceof tC)return function(t,n){if(!$W(n.sa))throw n.ha(`${t._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(n);r&&n.fieldTransforms.push(r)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,n){const r=[];let s=0;for(const o of t){let a=Ox(o,n.aa(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(i,e)}return function(t,n){if((t=dn(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return Qle(n.yt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const r=ls.fromDate(t);return{timestampValue:o6(n.yt,r)}}if(t instanceof ls){const r=new ls(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:o6(n.yt,r)}}if(t instanceof iC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof eC)return{bytesValue:lW(n.yt,t._byteString)};if(t instanceof Go){const r=n.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw n.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:HE(t.firestore._databaseId||n.databaseId,t._key.path)}}throw n.ha(`Unsupported field value: ${JE(t)}`)}(i,e)}function QW(i,e){const t={};return DH(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ef(i,(n,r)=>{const s=Ox(r,e.ra(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function KW(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ls||i instanceof iC||i instanceof eC||i instanceof Go||i instanceof tC)}function nC(i,e,t){if(!KW(t)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(t)){const n=JE(t);throw n==="an object"?e.ha(i+" a custom object"):e.ha(i+" "+n)}}function nA(i,e,t){if((e=dn(e))instanceof Ix)return e._internalPath;if(typeof e=="string")return rC(i,e);throw c6("Field path arguments must be of type string or ",i,!1,void 0,t)}const phe=new RegExp("[~\\*/\\[\\]]");function rC(i,e,t){if(e.search(phe)>=0)throw c6(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ix(...e.split("."))._internalPath}catch{throw c6(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function c6(i,e,t,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new rt(Ie.INVALID_ARGUMENT,a+i+l)}function JW(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e$=class{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Go(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(t$("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mhe=class extends e${data(){return super.data()}};function t$(i,e){return typeof e=="string"?rC(i,e):e instanceof Ix?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ghe(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new rt(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}let vhe=class{convertValue(e,t="none"){switch(kd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(T1(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const n={};return ef(e.fields,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertGeoPoint(e){return new iC(kn(e.latitude),kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=LH(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Pv(e));default:return null}}convertTimestamp(e){const t=ku(e);return new ls(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bn.fromString(e);Di(fW(n));const r=new CH(n.get(1),n.get(3)),s=new ut(n.popFirst(5));return r.isEqual(t)||ql(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yhe(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f2=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},i$=class extends e${constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new c5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(t$("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},c5=class extends i${data(e={}){return super.data(e)}},xhe=class{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new f2(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new c5(this._firestore,this._userDataWriter,n.key,n,new f2(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new rt(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(n,r){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(o=>{const a=new c5(n._firestore,n._userDataWriter,o.doc.key,o.doc,new f2(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new c5(n._firestore,n._userDataWriter,o.doc.key,o.doc,new f2(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:_he(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _he(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}let n$=class extends vhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new eC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Go(this.firestore,null,t)}};function VJe(i,e,t){i=Su(i,Go);const n=Su(i.firestore,Rv),r=yhe(i.converter,e,t);return r$(n,[hhe(XW(n),"setDoc",i._key,r,i.converter!==null,t).toMutation(i._key,Yp.none())])}function GJe(i,e,t,...n){i=Su(i,Go);const r=Su(i.firestore,Rv),s=XW(r);let o;return o=typeof(e=dn(e))=="string"||e instanceof Ix?fhe(s,"updateDoc",i._key,e,t,n):dhe(s,"updateDoc",i._key,e),r$(r,[o.toMutation(i._key,Yp.exists(!0))])}function bhe(i,...e){var t,n,r;i=dn(i);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||kO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(kO(e[o])){const u=e[o];e[o]=(t=u.next)===null||t===void 0?void 0:t.bind(u),e[o+1]=(n=u.error)===null||n===void 0?void 0:n.bind(u),e[o+2]=(r=u.complete)===null||r===void 0?void 0:r.bind(u)}let l,c,h;if(i instanceof Go)c=Su(i.firestore,Rv),h=GE(i._key.path),l={next:u=>{e[o]&&e[o](whe(c,i,u))},error:e[o+1],complete:e[o+2]};else{const u=Su(i,BW);c=Su(u.firestore,Rv),h=u._query;const d=new n$(c);l={next:f=>{e[o]&&e[o](new xhe(c,d,u,f))},error:e[o+1],complete:e[o+2]},ghe(i._query)}return function(u,d,f,p){const m=new Jue(p),y=new Lue(d,m,f);return u.asyncQueue.enqueueAndForget(async()=>Eue(await zO(u),y)),()=>{m.bc(),u.asyncQueue.enqueueAndForget(async()=>Cue(await zO(u),y))}}(jW(c),h,a,l)}function r$(i,e){return function(t,n){const r=new vd;return t.asyncQueue.enqueueAndForget(async()=>Bue(await rhe(t),n,r)),r.promise}(jW(i),e)}function whe(i,e,t){const n=t.docs.get(e._key),r=new n$(i);return new i$(i,r,e._key,n,new f2(t.hasPendingWrites,t.fromCache),e.converter)}(function(i,e=!0){(function(t){fm=t})(um),Fd(new Fu("firestore",(t,{instanceIdentifier:n,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Rv(new xle(t.getProvider("auth-internal")),new Sle(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new rt(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new CH(a.options.projectId,l)}(s,n),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),D0(aO,"3.8.3",i),D0(aO,"3.8.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="firebasestorage.googleapis.com",o$="storageBucket",She=2*60*1e3,Ahe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends Y0{constructor(e,t,n=0){super(u_(e),`Firebase Storage: ${t} (${u_(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return u_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pn;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pn||(pn={}));function u_(i){return"storage/"+i}function sC(){const i="An unknown error occurred, please check the error payload for server response.";return new mn(pn.UNKNOWN,i)}function The(i){return new mn(pn.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function Mhe(i){return new mn(pn.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ehe(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(pn.UNAUTHENTICATED,i)}function Che(){return new mn(pn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Dhe(i){return new mn(pn.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function Phe(){return new mn(pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lhe(){return new mn(pn.CANCELED,"User canceled the upload/download.")}function Ihe(i){return new mn(pn.INVALID_URL,"Invalid URL '"+i+"'.")}function Ohe(i){return new mn(pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Rhe(){return new mn(pn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o$+"' property when initializing the app?")}function Nhe(){return new mn(pn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fhe(){return new mn(pn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zhe(i){return new mn(pn.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rA(i){return new mn(pn.INVALID_ARGUMENT,i)}function a$(){return new mn(pn.APP_DELETED,"The Firebase app was deleted.")}function khe(i){return new mn(pn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function B2(i,e){return new mn(pn.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function lg(i){throw new mn(pn.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ks.makeFromUrl(e,t)}catch{return new Ks(e,"")}if(n.path==="")return n;throw Ohe(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(_){_.path_=decodeURIComponent(_.path)}const h="v[A-Za-z0-9_]+",u=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${u}/${h}/b/${r}/o${d}`,"i"),p={bucket:1,path:3},m=t===s$?"(?:storage.googleapis.com|storage.cloud.google.com)":t,y="([^?#]*)",g=new RegExp(`^https?://${m}/${r}/${y}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:g,indices:{bucket:1,path:2},postModify:c}];for(let _=0;_<x.length;_++){const w=x[_],b=w.regex.exec(e);if(b){const S=b[w.indices.bucket];let A=b[w.indices.path];A||(A=""),n=new Ks(S,A),w.postModify(n);break}}if(n==null)throw Ihe(e);return n}}class Bhe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uhe(i,e,t){let n=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...y){c||(c=!0,e.apply(null,y))}function u(y){r=setTimeout(()=>{r=null,i(f,l())},y)}function d(){s&&clearTimeout(s)}function f(y,...g){if(c){d();return}if(y){d(),h.call(null,y,...g);return}if(l()||o){d(),h.call(null,y,...g);return}n<64&&(n*=2);let x;a===1?(a=2,x=0):x=(n+Math.random())*1e3,u(x)}let p=!1;function m(y){p||(p=!0,d(),!c&&(r!==null?(y||(a=2),clearTimeout(r),u(0)):y||(a=1)))}return u(0),s=setTimeout(()=>{o=!0,m(!0)},t),m}function Vhe(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ghe(i){return i!==void 0}function jhe(i){return typeof i=="object"&&!Array.isArray(i)}function oC(i){return typeof i=="string"||i instanceof String}function BO(i){return aC()&&i instanceof Blob}function aC(){return typeof Blob<"u"&&!Yoe()}function UO(i,e,t,n){if(n<e)throw rA(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw rA(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(i,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${i}`}function l$(i){const e=encodeURIComponent;let t="?";for(const n in i)if(i.hasOwnProperty(n)){const r=e(n)+"="+e(i[n]);t=t+r+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yd;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(yd||(yd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hhe(i,e){const t=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,s=e.indexOf(i)!==-1;return t||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Whe{constructor(e,t,n,r,s,o,a,l,c,h,u,d=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new Ry(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===yd.NO_ERROR,l=s.getStatus();if(!a||Hhe(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===yd.ABORT;n(!1,new Ry(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Ry(c,s))})},t=(n,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Ghe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=sC();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?a$():Lhe();o(l)}else{const l=Phe();o(l)}};this.canceled_?t(!1,new Ry(!1,null,!0)):this.backoffId_=Uhe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Vhe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ry{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function $he(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function qhe(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xhe(i,e){e&&(i["X-Firebase-GMPID"]=e)}function Yhe(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function Zhe(i,e,t,n,r,s,o=!0){const a=l$(i.urlParams),l=i.url+a,c=Object.assign({},i.headers);return Xhe(c,e),$he(c,t),qhe(c,s),Yhe(c,n),new Whe(l,i.method,c,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qhe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Khe(...i){const e=Qhe();if(e!==void 0){const t=new e;for(let n=0;n<i.length;n++)t.append(i[n]);return t.getBlob()}else{if(aC())return new Blob(i);throw new mn(pn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Jhe(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ede(i){if(typeof atob>"u")throw zhe("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class h_{constructor(e,t){this.data=e,this.contentType=t||null}}function tde(i,e){switch(i){case w0.RAW:return new h_(c$(e));case w0.BASE64:case w0.BASE64URL:return new h_(u$(i,e));case w0.DATA_URL:return new h_(nde(e),rde(e))}throw sC()}function c$(i){const e=[];for(let t=0;t<i.length;t++){let n=i.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=i.charCodeAt(++t);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function ide(i){let e;try{e=decodeURIComponent(i)}catch{throw B2(w0.DATA_URL,"Malformed data URL.")}return c$(e)}function u$(i,e){switch(i){case w0.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw B2(i,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case w0.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw B2(i,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=ede(e)}catch(r){throw r.message.includes("polyfill")?r:B2(i,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class h${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw B2(w0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=sde(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function nde(i){const e=new h$(i);return e.base64?u$(w0.BASE64,e.rest):ide(e.rest)}function rde(i){return new h$(i).contentType}function sde(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){let n=0,r="";BO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(BO(this.data_)){const n=this.data_,r=Jhe(n,e,t);return r===null?null:new Wc(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Wc(n,!0)}}static getBlob(...e){if(aC()){const t=e.map(n=>n instanceof Wc?n.data_:n);return new Wc(Khe.apply(null,t))}else{const t=e.map(o=>oC(o)?tde(w0.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const r=new Uint8Array(n);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Wc(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(i){let e;try{e=JSON.parse(i)}catch{return null}return jhe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ode(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function ade(i,e){const t=e.split("/").filter(n=>n.length>0).join("/");return i.length===0?t:i+"/"+t}function f$(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lde(i,e){return e}class $r{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||lde}}let Ny=null;function cde(i){return!oC(i)||i.length<2?i:f$(i)}function p$(){if(Ny)return Ny;const i=[];i.push(new $r("bucket")),i.push(new $r("generation")),i.push(new $r("metageneration")),i.push(new $r("name","fullPath",!0));function e(s,o){return cde(o)}const t=new $r("name");t.xform=e,i.push(t);function n(s,o){return o!==void 0?Number(o):o}const r=new $r("size");return r.xform=n,i.push(r),i.push(new $r("timeCreated")),i.push(new $r("updated")),i.push(new $r("md5Hash",null,!0)),i.push(new $r("cacheControl",null,!0)),i.push(new $r("contentDisposition",null,!0)),i.push(new $r("contentEncoding",null,!0)),i.push(new $r("contentLanguage",null,!0)),i.push(new $r("contentType",null,!0)),i.push(new $r("metadata","customMetadata",!0)),Ny=i,Ny}function ude(i,e){function t(){const n=i.bucket,r=i.fullPath,s=new Ks(n,r);return e._makeStorageReference(s)}Object.defineProperty(i,"ref",{get:t})}function hde(i,e,t){const n={};n.type="file";const r=t.length;for(let s=0;s<r;s++){const o=t[s];n[o.local]=o.xform(n,e[o.server])}return ude(n,i),n}function m$(i,e,t){const n=d$(e);return n===null?null:hde(i,n,t)}function dde(i,e,t,n){const r=d$(e);if(r===null||!oC(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=i.bucket,u=i.fullPath,d="/b/"+o(h)+"/o/"+o(u),f=lC(d,t,n),p=l$({alt:"media",token:c});return f+p})[0]}function fde(i,e){const t={},n=e.length;for(let r=0;r<n;r++){const s=e[r];s.writable&&(t[s.server]=i[s.local])}return JSON.stringify(t)}class g${constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(i){if(!i)throw sC()}function pde(i,e){function t(n,r){const s=m$(i,r,e);return v$(s!==null),s}return t}function mde(i,e){function t(n,r){const s=m$(i,r,e);return v$(s!==null),dde(s,r,i.host,i._protocol)}return t}function y$(i){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=Che():r=Ehe():t.getStatus()===402?r=Mhe(i.bucket):t.getStatus()===403?r=Dhe(i.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function gde(i){const e=y$(i);function t(n,r){let s=e(n,r);return n.getStatus()===404&&(s=The(i.path)),s.serverResponse=r.serverResponse,s}return t}function vde(i,e,t){const n=e.fullServerUrl(),r=lC(n,i.host,i._protocol),s="GET",o=i.maxOperationRetryTime,a=new g$(r,s,mde(i,t),o);return a.errorHandler=gde(e),a}function yde(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function xde(i,e,t){const n=Object.assign({},t);return n.fullPath=i.path,n.size=e.size(),n.contentType||(n.contentType=yde(null,e)),n}function _de(i,e,t,n,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let _=0;_<2;_++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=xde(e,n,r),h=fde(c,t),u="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Wc.getBlob(u,n,d);if(f===null)throw Nhe();const p={name:c.fullPath},m=lC(s,i.host,i._protocol),y="POST",g=i.maxUploadRetryTime,v=new g$(m,y,pde(i,t),g);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=y$(e),v}class bde{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw lg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wde extends bde{initXhr(){this.xhr_.responseType="text"}}function x$(){return new wde}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this._service=e,t instanceof Ks?this._location=t:this._location=Ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bd(e,t)}get root(){const e=new Ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f$(this._location.path)}get storage(){return this._service}get parent(){const e=ode(this._location.path);if(e===null)return null;const t=new Ks(this._location.bucket,e);return new Bd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw khe(e)}}function Sde(i,e,t){i._throwIfRoot("uploadBytes");const n=_de(i.storage,i._location,p$(),new Wc(e,!0),t);return i.storage.makeRequestWithTokens(n,x$).then(r=>({metadata:r,ref:i}))}function Ade(i){i._throwIfRoot("getDownloadURL");const e=vde(i.storage,i._location,p$());return i.storage.makeRequestWithTokens(e,x$).then(t=>{if(t===null)throw Fhe();return t})}function Tde(i,e){const t=ade(i._location.path,e),n=new Ks(i._location.bucket,t);return new Bd(i.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mde(i){return/^[A-Za-z]+:\/\//.test(i)}function Ede(i,e){return new Bd(i,e)}function _$(i,e){if(i instanceof cC){const t=i;if(t._bucket==null)throw Rhe();const n=new Bd(t,t._bucket);return e!=null?_$(n,e):n}else return e!==void 0?Tde(i,e):i}function Cde(i,e){if(e&&Mde(e)){if(i instanceof cC)return Ede(i,e);throw rA("To use ref(service, url), the first argument must be a Storage instance.")}else return _$(i,e)}function VO(i,e){const t=e==null?void 0:e[o$];return t==null?null:Ks.makeFromBucketSpec(t,i)}function Dde(i,e,t,n={}){i.host=`${e}:${t}`,i._protocol="http";const{mockUserToken:r}=n;r&&(i._overrideAuthToken=typeof r=="string"?r:vj(r,i.app.options.projectId))}class cC{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=s$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=She,this._maxUploadRetryTime=Ahe,this._requests=new Set,r!=null?this._bucket=Ks.makeFromBucketSpec(r,this._host):this._bucket=VO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ks.makeFromBucketSpec(this._url,e):this._bucket=VO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bd(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new Bhe(a$());{const o=Zhe(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const GO="@firebase/storage",jO="0.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="storage";function jJe(i,e,t){return i=dn(i),Sde(i,e,t)}function Pde(i){return i=dn(i),Ade(i)}function Lde(i,e){return i=dn(i),Cde(i,e)}function Ide(i=mE(),e){i=dn(i);const n=ox(i,b$).getImmediate({identifier:e}),r=mj("storage");return r&&Ode(n,...r),n}function Ode(i,e,t,n={}){Dde(i,e,t,n)}function Rde(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new cC(t,n,r,e,um)}function Nde(){Fd(new Fu(b$,Rde,"PUBLIC").setMultipleInstances(!0)),D0(GO,jO,""),D0(GO,jO,"esm2017")}Nde();const Fde={apiKey:"AIzaSyDW8LZ3AR-DjP3rZmHDVmRfBwZ4YQcovpU",authDomain:"pixselvue.firebaseapp.com",projectId:"pixselvue",storageBucket:"pixselvue.appspot.com",messagingSenderId:"743462528232",appId:"1:743462528232:web:f35e664f12a889f8f9d55d"},w$=_j(Fde),zde=ohe(w$),kde=Ide(w$);function uC(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function S$(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bde=S$,A$=new D3("auth","Firebase",S$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new fE("@firebase/auth");function u5(i,...e){HO.logLevel<=Kt.ERROR&&HO.error(`Auth (${um}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(i,...e){throw hC(i,...e)}function L0(i,...e){return hC(i,...e)}function Ude(i,e,t){const n=Object.assign(Object.assign({},Bde()),{[e]:t});return new D3("auth","Firebase",n).create(e,{appName:i.name})}function hC(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return A$.create(i,...e)}function ct(i,e,...t){if(!i)throw hC(e,...t)}function Rl(i){const e="INTERNAL ASSERTION FAILED: "+i;throw u5(e),new Error(e)}function Zl(i,e){i||Rl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Map;function Nl(i){Zl(i instanceof Function,"Expected a class definition");let e=WO.get(i);return e?(Zl(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,WO.set(i,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vde(i,e){const t=ox(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if($5(s,e??{}))return r;Ua(r,"already-initialized")}return t.initialize({options:e})}function Gde(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Nl);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function jde(){return $O()==="http:"||$O()==="https:"}function $O(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hde(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jde()||Zoe()||"connection"in navigator)?navigator.onLine:!0}function Wde(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zl(t>e,"Short delay should be less than long delay!"),this.isMobile=Xoe()||Qoe()}get(){return Hde()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(i,e){Zl(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Rl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Rl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Rl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qde=new W3(3e4,6e4);function $3(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function q3(i,e,t,n,r={}){return M$(i,r,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const a=P3(Object.assign({key:i.config.apiKey},o)).slice(1),l=await i._getAdditionalHeaders();return l["Content-Type"]="application/json",i.languageCode&&(l["X-Firebase-Locale"]=i.languageCode),T$.fetch()(E$(i,i.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function M$(i,e,t){i._canInitEmulator=!1;const n=Object.assign(Object.assign({},$de),e);try{const r=new Xde(i),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fy(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fy(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fy(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fy(i,"user-disabled",o);const h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ude(i,h,c);Ua(i,h)}}catch(r){if(r instanceof Y0)throw r;Ua(i,"network-request-failed")}}async function X3(i,e,t,n,r={}){const s=await q3(i,e,t,n,r);return"mfaPendingCredential"in s&&Ua(i,"multi-factor-auth-required",{_serverResponse:s}),s}function E$(i,e,t,n){const r=`${e}${t}?${n}`;return i.config.emulator?dC(i.config,r):`${i.config.apiScheme}://${r}`}class Xde{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(L0(this.auth,"network-request-failed")),qde.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fy(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=L0(i,e,n);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yde(i,e){return q3(i,"POST","/v1/accounts:delete",e)}async function Zde(i,e){return q3(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qde(i,e=!1){const t=dn(i),n=await t.getIdToken(e),r=fC(n);ct(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:U2(d_(r.auth_time)),issuedAtTime:U2(d_(r.iat)),expirationTime:U2(d_(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function d_(i){return Number(i)*1e3}function fC(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return u5("JWT malformed, contained fewer than 3 sections"),null;try{const r=fj(t);return r?JSON.parse(r):(u5("Failed to decode base64 JWT payload"),null)}catch(r){return u5("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Kde(i){const e=fC(i);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nv(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Y0&&Jde(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function Jde({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class efe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=U2(this.lastLoginAt),this.creationTime=U2(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(i){var e;const t=i.auth,n=await i.getIdToken(),r=await Nv(i,Zde(t,{idToken:n}));ct(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];i._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nfe(s.providerUserInfo):[],a=ife(i.providerData,o),l=i.isAnonymous,c=!(i.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new C$(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,u)}async function tfe(i){const e=dn(i);await u6(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ife(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function nfe(i){return i.map(e=>{var{providerId:t}=e,n=uC(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rfe(i,e){const t=await M$(i,{},async()=>{const n=P3({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=E$(i,r,"/v1/token",`key=${s}`),a=await i._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",T$.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kde(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ct(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await rfe(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new Fv;return n&&(ct(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(ct(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ct(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fv,this.toJSON())}_performRefresh(){return Rl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(i,e){ct(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class xd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=uC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new efe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new C$(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Nv(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Qde(this,e)}reload(){return tfe(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new xd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await u6(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Nv(this,Yde(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,a,l,c,h;const u=(n=t.displayName)!==null&&n!==void 0?n:void 0,d=(r=t.email)!==null&&r!==void 0?r:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,m=(a=t.tenantId)!==null&&a!==void 0?a:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=t.createdAt)!==null&&c!==void 0?c:void 0,v=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:S}=t;ct(x&&S,e,"internal-error");const A=Fv.fromJSON(this.name,S);ct(typeof x=="string",e,"internal-error"),_c(u,e.name),_c(d,e.name),ct(typeof _=="boolean",e,"internal-error"),ct(typeof w=="boolean",e,"internal-error"),_c(f,e.name),_c(p,e.name),_c(m,e.name),_c(y,e.name),_c(g,e.name),_c(v,e.name);const E=new xd({uid:x,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:A,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(E.providerData=b.map(T=>Object.assign({},T))),y&&(E._redirectEventId=y),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new Fv;r.updateFromServerResponse(t);const s=new xd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await u6(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}D$.type="NONE";const qO=D$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(i,e,t){return`firebase:${i}:${e}:${t}`}class Qp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=h5(this.userKey,r.apiKey,s),this.fullPersistenceKey=h5("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Qp(Nl(qO),e,n);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Nl(qO);const o=h5(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){const u=xd._fromJSON(e,h);c!==s&&(a=u),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Qp(s,e,n):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Qp(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R$(e))return"Blackberry";if(N$(e))return"Webos";if(pC(e))return"Safari";if((e.includes("chrome/")||L$(e))&&!e.includes("edge/"))return"Chrome";if(O$(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function P$(i=jr()){return/firefox\//i.test(i)}function pC(i=jr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L$(i=jr()){return/crios\//i.test(i)}function I$(i=jr()){return/iemobile/i.test(i)}function O$(i=jr()){return/android/i.test(i)}function R$(i=jr()){return/blackberry/i.test(i)}function N$(i=jr()){return/webos/i.test(i)}function Rx(i=jr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function sfe(i=jr()){var e;return Rx(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ofe(){return Koe()&&document.documentMode===10}function F$(i=jr()){return Rx(i)||O$(i)||N$(i)||R$(i)||/windows phone/i.test(i)||I$(i)}function afe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(i,e=[]){let t;switch(i){case"Browser":t=XO(jr());break;case"Worker":t=`${XO(jr())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${um}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cfe{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YO(this),this.idTokenSubscription=new YO(this),this.beforeStateQueue=new lfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A$,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nl(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Qp.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await u6(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wde()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?dn(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Nl(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new D3("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nl(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await Qp.create(this,[Nl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ct(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof t=="function"?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Y3(i){return dn(i)}class YO{constructor(e){this.auth=e,this.observer=null,this.addObserver=sae(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ufe(i,e,t){const n=Y3(i);ct(n._canInitEmulator,n,"emulator-config-failed"),ct(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),s=k$(e),{host:o,port:a}=hfe(e),l=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||dfe()}function k$(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function hfe(i){const e=k$(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:ZO(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:ZO(o)}}}function ZO(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function dfe(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rl("not implemented")}_getIdTokenResponse(e){return Rl("not implemented")}_linkToIdToken(e,t){return Rl("not implemented")}_getReauthenticationResolver(e){return Rl("not implemented")}}async function ffe(i,e){return q3(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pfe(i,e){return X3(i,"POST","/v1/accounts:signInWithPassword",$3(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mfe(i,e){return X3(i,"POST","/v1/accounts:signInWithEmailLink",$3(i,e))}async function gfe(i,e){return X3(i,"POST","/v1/accounts:signInWithEmailLink",$3(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends mC{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new zv(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new zv(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return pfe(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return mfe(e,{email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ffe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return gfe(e,{idToken:t,email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(i,e){return X3(i,"POST","/v1/accounts:signInWithIdp",$3(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vfe="http://localhost";class Ud extends mC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ud(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ua("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=uC(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ud(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Kp(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Kp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kp(e,t)}buildRequest(){const e={requestUri:vfe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=P3(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yfe(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xfe(i){const e=a2(l2(i)).link,t=e?a2(l2(e)).deep_link_id:null,n=a2(l2(i)).deep_link_id;return(n?a2(l2(n)).link:null)||n||t||e||i}class gC{constructor(e){var t,n,r,s,o,a;const l=a2(l2(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(n=l.oobCode)!==null&&n!==void 0?n:null,u=yfe((r=l.mode)!==null&&r!==void 0?r:null);ct(c&&h&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=xfe(e);try{return new gC(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.providerId=gm.PROVIDER_ID}static credential(e,t){return zv._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=gC.parseLink(t);return ct(n,"argument-error"),zv._fromEmailAndCode(e,n.code,n.tenantId)}}gm.PROVIDER_ID="password";gm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3 extends B${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Z3{constructor(){super("facebook.com")}static credential(e){return Ud._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}}$c.FACEBOOK_SIGN_IN_METHOD="facebook.com";$c.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Z3{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ud._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return qc.credential(t,n)}catch{return null}}}qc.GOOGLE_SIGN_IN_METHOD="google.com";qc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Z3{constructor(){super("github.com")}static credential(e){return Ud._fromParams({providerId:Xc.PROVIDER_ID,signInMethod:Xc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xc.credentialFromTaggedObject(e)}static credentialFromError(e){return Xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xc.credential(e.oauthAccessToken)}catch{return null}}}Xc.GITHUB_SIGN_IN_METHOD="github.com";Xc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Z3{constructor(){super("twitter.com")}static credential(e,t){return Ud._fromParams({providerId:Yc.PROVIDER_ID,signInMethod:Yc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yc.credentialFromTaggedObject(e)}static credentialFromError(e){return Yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Yc.credential(t,n)}catch{return null}}}Yc.TWITTER_SIGN_IN_METHOD="twitter.com";Yc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _fe(i,e){return X3(i,"POST","/v1/accounts:signUp",$3(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await xd._fromIdTokenResponse(e,n,r),o=QO(n);return new Vd({user:s,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=QO(n);return new Vd({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function QO(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6 extends Y0{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,h6.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new h6(e,t,n,r)}}function U$(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?h6._fromErrorAndOperation(i,s,e,n):s})}async function bfe(i,e,t=!1){const n=await Nv(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Vd._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wfe(i,e,t=!1){const{auth:n}=i,r="reauthenticate";try{const s=await Nv(i,U$(n,r,e,i),t);ct(s.idToken,n,"internal-error");const o=fC(s.idToken);ct(o,n,"internal-error");const{sub:a}=o;return ct(i.uid===a,n,"user-mismatch"),Vd._forOperation(i,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ua(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V$(i,e,t=!1){const n="signIn",r=await U$(i,n,e),s=await Vd._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(s.user),s}async function Sfe(i,e){return V$(Y3(i),e)}async function HJe(i,e,t){const n=Y3(i),r=await _fe(n,{returnSecureToken:!0,email:e,password:t}),s=await Vd._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function WJe(i,e,t){return Sfe(dn(i),gm.credential(e,t))}function Afe(i,e,t,n){return dn(i).onIdTokenChanged(e,t,n)}function Tfe(i,e,t){return dn(i).beforeAuthStateChanged(e,t)}function vC(i,e,t,n){return dn(i).onAuthStateChanged(e,t,n)}function Mfe(i){return dn(i).signOut()}const d6="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(d6,"1"),this.storage.removeItem(d6),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Efe(){const i=jr();return pC(i)||Rx(i)}const Cfe=1e3,Dfe=10;class j$ extends G${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Efe()&&afe(),this.fallbackToPolling=F$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(n);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);ofe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Dfe):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Cfe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}j$.type="LOCAL";const Pfe=j$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$ extends G${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}H$.type="SESSION";const W$=H$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lfe(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new Nx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Lfe(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ife{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=yC("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(u){const d=u;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){return window}function Ofe(i){I0().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(){return typeof I0().WorkerGlobalScope<"u"&&typeof I0().importScripts=="function"}async function Rfe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nfe(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function Ffe(){return $$()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$="firebaseLocalStorageDb",zfe=1,f6="firebaseLocalStorage",X$="fbase_key";class Q3{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fx(i,e){return i.transaction([f6],e?"readwrite":"readonly").objectStore(f6)}function kfe(){const i=indexedDB.deleteDatabase(q$);return new Q3(i).toPromise()}function oA(){const i=indexedDB.open(q$,zfe);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(f6,{keyPath:X$})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(f6)?e(n):(n.close(),await kfe(),e(await oA()))})})}async function KO(i,e,t){const n=Fx(i,!0).put({[X$]:e,value:t});return new Q3(n).toPromise()}async function Bfe(i,e){const t=Fx(i,!1).get(e),n=await new Q3(t).toPromise();return n===void 0?null:n.value}function JO(i,e){const t=Fx(i,!0).delete(e);return new Q3(t).toPromise()}const Ufe=800,Vfe=3;class Y${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oA(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Vfe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $$()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nx._getInstance(Ffe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Rfe(),!this.activeServiceWorker)return;this.sender=new Ife(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nfe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oA();return await KO(e,d6,"1"),await JO(e,d6),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>KO(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Bfe(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>JO(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Fx(r,!1).getAll();return new Q3(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ufe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y$.type="LOCAL";const Gfe=Y$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jfe(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}function Hfe(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const s=L0("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",jfe().appendChild(n)})}function Wfe(i){return`__${i}${Math.floor(Math.random()*1e6)}`}new W3(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $fe(i,e){return e?Nl(e):(ct(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC extends mC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qfe(i){return V$(i.auth,new xC(i),i.bypassAuthState)}function Xfe(i){const{auth:e,user:t}=i;return ct(t,e,"internal-error"),wfe(t,new xC(i),i.bypassAuthState)}async function Yfe(i){const{auth:e,user:t}=i;return ct(t,e,"internal-error"),bfe(t,new xC(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qfe;case"linkViaPopup":case"linkViaRedirect":return Yfe;case"reauthViaPopup":case"reauthViaRedirect":return Xfe;default:Ua(this.auth,"internal-error")}}resolve(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe=new W3(2e3,1e4);class Ep extends Z${constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Ep.currentPopupAction&&Ep.currentPopupAction.cancel(),Ep.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Zl(this.filter.length===1,"Popup operations only handle one event");const e=yC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(L0(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(L0(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ep.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(L0(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Zfe.get())};e()}}Ep.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qfe="pendingRedirect",d5=new Map;class Kfe extends Z${constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=d5.get(this.auth._key());if(!e){try{const n=await Jfe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}d5.set(this.auth._key(),e)}return this.bypassAuthState||d5.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jfe(i,e){const t=ipe(e),n=tpe(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function epe(i,e){d5.set(i._key(),e)}function tpe(i){return Nl(i._redirectPersistence)}function ipe(i){return h5(Qfe,i.config.apiKey,i.name)}async function npe(i,e,t=!1){const n=Y3(i),r=$fe(n,e),o=await new Kfe(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=10*60*1e3;class spe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ope(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Q$(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(L0(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(eR(e))}saveEventToCache(e){this.cachedEventUids.add(eR(e)),this.lastProcessedEventTime=Date.now()}}function eR(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Q$({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ope(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q$(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ape(i,e={}){return q3(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cpe=/^https?/;async function upe(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ape(i);for(const t of e)try{if(hpe(t))return}catch{}Ua(i,"unauthorized-domain")}function hpe(i){const e=sA(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!cpe.test(t))return!1;if(lpe.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dpe=new W3(3e4,6e4);function tR(){const i=I0().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function fpe(i){return new Promise((e,t)=>{var n,r,s;function o(){tR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tR(),t(L0(i,"network-request-failed"))},timeout:dpe.get()})}if(!((r=(n=I0().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=I0().gapi)===null||s===void 0)&&s.load)o();else{const a=Wfe("iframefcb");return I0()[a]=()=>{gapi.load?o():t(L0(i,"network-request-failed"))},Hfe(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw f5=null,e})}let f5=null;function ppe(i){return f5=f5||fpe(i),f5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mpe=new W3(5e3,15e3),gpe="__/auth/iframe",vpe="emulator/auth/iframe",ype={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _pe(i){const e=i.config;ct(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?dC(e,vpe):`https://${i.config.authDomain}/${gpe}`,n={apiKey:e.apiKey,appName:i.name,v:um},r=xpe.get(i.config.apiHost);r&&(n.eid=r);const s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${P3(n).slice(1)}`}async function bpe(i){const e=await ppe(i),t=I0().gapi;return ct(t,i,"internal-error"),e.open({where:document.body,url:_pe(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ype,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const o=L0(i,"network-request-failed"),a=I0().setTimeout(()=>{s(o)},mpe.get());function l(){I0().clearTimeout(a),r(n)}n.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Spe=500,Ape=600,Tpe="_blank",Mpe="http://localhost";class iR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Epe(i,e,t,n=Spe,r=Ape){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wpe),{width:n.toString(),height:r.toString(),top:s,left:o}),c=jr().toLowerCase();t&&(a=L$(c)?Tpe:t),P$(c)&&(e=e||Mpe,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(sfe(c)&&a!=="_self")return Cpe(e||"",a),new iR(null);const u=window.open(e||"",a,h);ct(u,i,"popup-blocked");try{u.focus()}catch{}return new iR(u)}function Cpe(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpe="__/auth/handler",Ppe="emulator/auth/handler";function nR(i,e,t,n,r,s){ct(i.config.authDomain,i,"auth-domain-config-required"),ct(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:um,eventId:r};if(e instanceof B$){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",rae(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Z3){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}i.tenantId&&(o.tid=i.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${Lpe(i)}?${P3(a).slice(1)}`}function Lpe({config:i}){return i.emulator?dC(i,Ppe):`https://${i.authDomain}/${Dpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="webStorageSupport";class Ipe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W$,this._completeRedirectFn=npe,this._overrideRedirectResult=epe}async _openPopup(e,t,n,r){var s;Zl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=nR(e,t,n,sA(),r);return Epe(e,o,yC())}async _openRedirect(e,t,n,r){return await this._originValidation(e),Ofe(nR(e,t,n,sA(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Zl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await bpe(e),n=new spe(e);return t.register("authEvent",r=>(ct(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(f_,{type:f_},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[f_];o!==void 0&&t(!!o),Ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=upe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return F$()||pC()||Rx()}}const Ope=Ipe;var rR="@firebase/auth",sR="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Fpe(i){Fd(new Fu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=n.options;return((a,l)=>{ct(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),ct(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z$(i)},h=new cfe(a,l,c);return Gde(h,t),h})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Fd(new Fu("auth-internal",e=>{const t=Y3(e.getProvider("auth").getImmediate());return(n=>new Rpe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),D0(rR,sR,Npe(i)),D0(rR,sR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe=5*60,kpe=gj("authIdTokenMaxAge")||zpe;let oR=null;const Bpe=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>kpe)return;const r=t==null?void 0:t.token;oR!==r&&(oR=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function K3(i=mE()){const e=ox(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Vde(i,{popupRedirectResolver:Ope,persistence:[Gfe,Pfe,W$]}),n=gj("authTokenSyncURL");if(n){const s=Bpe(n);Tfe(t,s,()=>s(t.currentUser)),Afe(t,o=>s(o))}const r=pj("auth");return r&&ufe(t,`http://${r}`),t}Fpe("Browser");const zx=(i,e)=>{const t=i.__vccOpts||i;for(const[n,r]of e)t[n]=r;return t},Upe={},Vpe={class:"ham hamRotate ham4",viewBox:"0 0 100 100"},Gpe=Be("path",{class:"line top",d:"m 70,33 h -40 c 0,0 -8.5,-0.149796 -8.5,8.5 0,8.649796 8.5,8.5 8.5,8.5 h 20 v -20"},null,-1),jpe=Be("path",{class:"line middle",d:"m 70,50 h -40"},null,-1),Hpe=Be("path",{class:"line bottom",d:"m 30,67 h 40 c 0,0 8.5,0.149796 8.5,-8.5 0,-8.649796 -8.5,-8.5 -8.5,-8.5 h -20 v 20"},null,-1),Wpe=[Gpe,jpe,Hpe];function $pe(i,e){return ur(),wr("svg",Vpe,Wpe)}const K$=zx(Upe,[["render",$pe]]),qpe="modulepreload",Xpe=function(i){return"/pixselvue/"+i},aR={},cg=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Xpe(s),s in aR)return;aR[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":qpe,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function Dl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function J$(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ro={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},C1={duration:.5,overwrite:!1,delay:0},_C,Vr,Un,zo=1e8,bi=1/zo,aA=Math.PI*2,Ype=aA/4,Zpe=0,eq=Math.sqrt,Qpe=Math.cos,Kpe=Math.sin,dr=function(e){return typeof e=="string"},un=function(e){return typeof e=="function"},Ql=function(e){return typeof e=="number"},bC=function(e){return typeof e>"u"},G0=function(e){return typeof e=="object"},Es=function(e){return e!==!1},tq=function(){return typeof window<"u"},zy=function(e){return un(e)||dr(e)},iq=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Gr=Array.isArray,lA=/(?:-?\.?\d|\.)+/gi,nq=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,p_=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,rq=/[+-]=-?[.\d]+/,sq=/[^,'"\[\]\s]+/gi,Jpe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Wi,_o,cA,wC,ao={},p6={},oq,aq=function(e){return(p6=Gd(e,ao))&&lo},SC=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},m6=function(e,t){return!t&&console.warn(e)},lq=function(e,t){return e&&(ao[e]=t)&&p6&&(p6[e]=t)||ao},kv=function(){return 0},e1e={suppressEvents:!0,isStart:!0,kill:!1},p5={suppressEvents:!0,kill:!1},t1e={suppressEvents:!0},AC={},Au=[],uA={},cq,Ws={},m_={},lR=30,m5=[],TC="",MC=function(e){var t=e[0],n,r;if(G0(t)||un(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=m5.length;r--&&!m5[r].targetTest(t););n=m5[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Lq(e[r],n)))||e.splice(r,1);return e},_d=function(e){return e._gsap||MC(ko(e))[0]._gsap},uq=function(e,t,n){return(n=e[t])&&un(n)?e[t]():bC(n)&&e.getAttribute&&e.getAttribute(t)||n},Cs=function(e,t){return(e=e.split(",")).forEach(t)||e},Tn=function(e){return Math.round(e*1e5)/1e5||0},yr=function(e){return Math.round(e*1e7)/1e7||0},Jp=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},i1e=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},g6=function(){var e=Au.length,t=Au.slice(0),n,r;for(uA={},Au.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},hq=function(e,t,n,r){Au.length&&!Vr&&g6(),e.render(t,n,r||Vr&&t<0&&(e._initted||e._startAt)),Au.length&&!Vr&&g6()},dq=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(sq).length<2?t:dr(e)?e.trim():e},fq=function(e){return e},Zo=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},n1e=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Gd=function(e,t){for(var n in t)e[n]=t[n];return e},cR=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=G0(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},v6=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},V2=function(e){var t=e.parent||Wi,n=e.keyframes?n1e(Gr(e.keyframes)):Zo;if(Es(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},r1e=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},pq=function(e,t,n,r,s){n===void 0&&(n="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},kx=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Vu=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},bd=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},s1e=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},hA=function(e,t,n,r){return e._startAt&&(Vr?e._startAt.revert(p5):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},o1e=function i(e){return!e||e._ts&&i(e.parent)},uR=function(e){return e._repeat?D1(e._tTime,e=e.duration()+e._rDelay)*e:0},D1=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},y6=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Bx=function(e){return e._end=yr(e._start+(e._tDur/Math.abs(e._ts||e._rts||bi)||0))},Ux=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=yr(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Bx(e),n._dirty||bd(n,e)),e},mq=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=y6(e.rawTime(),t),(!t._dur||J3(0,t.totalDuration(),n)-t._tTime>bi)&&t.render(n,!0)),bd(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-bi}},m0=function(e,t,n,r){return t.parent&&Vu(t),t._start=yr((Ql(n)?n:n||e!==Wi?xo(e,n,t):e._time)+t._delay),t._end=yr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),pq(e,t,"_first","_last",e._sort?"_start":0),dA(t)||(e._recent=t),r||mq(e,t),e._ts<0&&Ux(e,e._tTime),e},gq=function(e,t){return(ao.ScrollTrigger||SC("scrollTrigger",t))&&ao.ScrollTrigger.create(t,e)},vq=function(e,t,n,r,s){if(CC(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!Vr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&cq!==Ys.frame)return Au.push(e),e._lazy=[s,r],1},a1e=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},dA=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},l1e=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&a1e(e)&&!(!e._initted&&dA(e))||(e._ts<0||e._dp._ts<0)&&!dA(e))?0:1,a=e._rDelay,l=0,c,h,u;if(a&&e._repeat&&(l=J3(0,e._tDur,t),h=D1(l,a),e._yoyo&&h&1&&(o=1-o),h!==D1(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Vr||r||e._zTime===bi||!t&&e._zTime){if(!e._initted&&vq(e,t,r,n,l))return;for(u=e._zTime,e._zTime=t||(n?bi:0),n||(n=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&hA(e,t,n,!0),e._onUpdate&&!n&&Bo(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Bo(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Vu(e,1),!n&&!Vr&&(Bo(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},c1e=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},P1=function(e,t,n,r){var s=e._repeat,o=yr(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:yr(o*(s+1)+e._rDelay*s):o,a>0&&!r&&Ux(e,e._tTime=e._tDur*a),e.parent&&Bx(e),n||bd(e.parent,e),e},hR=function(e){return e instanceof ys?bd(e):P1(e,e._dur)},u1e={_start:0,endTime:kv,totalDuration:kv},xo=function i(e,t,n){var r=e.labels,s=e._recent||u1e,o=e.duration()>=zo?s.endTime(!1):e._dur,a,l,c;return dr(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(Gr(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},G2=function(e,t,n){var r=Ql(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Es(l.vars.inherit)&&l.parent;o.immediateRender=Es(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Yn(t[0],o,t[s+1])},rh=function(e,t){return e||e===0?t(e):t},J3=function(e,t,n){return n<e?e:n>t?t:n},Nr=function(e,t){return!dr(e)||!(t=Jpe.exec(e))?"":t[1]},h1e=function(e,t,n){return rh(n,function(r){return J3(e,t,r)})},fA=[].slice,yq=function(e,t){return e&&G0(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&G0(e[0]))&&!e.nodeType&&e!==_o},d1e=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return dr(r)&&!t||yq(r,1)?(s=n).push.apply(s,ko(r)):n.push(r)})||n},ko=function(e,t,n){return Un&&!t&&Un.selector?Un.selector(e):dr(e)&&!n&&(cA||!L1())?fA.call((t||wC).querySelectorAll(e),0):Gr(e)?d1e(e,n):yq(e)?fA.call(e,0):e?[e]:[]},pA=function(e){return e=ko(e)[0]||m6("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return ko(t,n.querySelectorAll?n:n===e?m6("Invalid scope")||wC.createElement("div"):e)}},xq=function(e){return e.sort(function(){return .5-Math.random()})},_q=function(e){if(un(e))return e;var t=G0(e)?e:{each:e},n=wd(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,h=r,u=r;return dr(r)?h=u={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(h=r[0],u=r[1]),function(d,f,p){var m=(p||t).length,y=o[m],g,v,x,_,w,b,S,A,E;if(!y){if(E=t.grid==="auto"?0:(t.grid||[1,zo])[1],!E){for(S=-zo;S<(S=p[E++].getBoundingClientRect().left)&&E<m;);E--}for(y=o[m]=[],g=l?Math.min(E,m)*h-.5:r%E,v=E===zo?0:l?m*u/E-.5:r/E|0,S=0,A=zo,b=0;b<m;b++)x=b%E-g,_=v-(b/E|0),y[b]=w=c?Math.abs(c==="y"?_:x):eq(x*x+_*_),w>S&&(S=w),w<A&&(A=w);r==="random"&&xq(y),y.max=S-A,y.min=A,y.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(E>m?m-1:c?c==="y"?m/E:E:Math.max(E,m/E))||0)*(r==="edges"?-1:1),y.b=m<0?s-m:s,y.u=Nr(t.amount||t.each)||0,n=n&&m<0?Cq(n):n}return m=(y[d]-y.min)/y.max||0,yr(y.b+(n?n(m):m)*y.v)+y.u}},mA=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=yr(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Ql(n)?0:Nr(n))}},bq=function(e,t){var n=Gr(e),r,s;return!n&&G0(e)&&(r=n=e.radius||zo,e.values?(e=ko(e.values),(s=!Ql(e[0]))&&(r*=r)):e=mA(e.increment)),rh(t,n?un(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=zo,h=0,u=e.length,d,f;u--;)s?(d=e[u].x-a,f=e[u].y-l,d=d*d+f*f):d=Math.abs(e[u]-a),d<c&&(c=d,h=u);return h=!r||c<=r?e[h]:o,s||h===o||Ql(o)?h:h+Nr(o)}:mA(e))},wq=function(e,t,n,r){return rh(Gr(e)?!t:n===!0?!!(n=0):!r,function(){return Gr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},f1e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},p1e=function(e,t){return function(n){return e(parseFloat(n))+(t||Nr(n))}},m1e=function(e,t,n){return Aq(e,t,0,1,n)},Sq=function(e,t,n){return rh(n,function(r){return e[~~t(r)]})},g1e=function i(e,t,n){var r=t-e;return Gr(e)?Sq(e,i(0,e.length),t):rh(n,function(s){return(r+(s-e)%r)%r+e})},v1e=function i(e,t,n){var r=t-e,s=r*2;return Gr(e)?Sq(e,i(0,e.length-1),t):rh(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},Bv=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?sq:lA),n+=e.substr(t,r-t)+wq(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Aq=function(e,t,n,r,s){var o=t-e,a=r-n;return rh(s,function(l){return n+((l-e)/o*a||0)})},y1e=function i(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var o=dr(e),a={},l,c,h,u,d;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(Gr(e)&&!Gr(t)){for(h=[],u=e.length,d=u-2,c=1;c<u;c++)h.push(i(e[c-1],e[c]));u--,s=function(p){p*=u;var m=Math.min(d,~~p);return h[m](p-m)},n=t}else r||(e=Gd(Gr(e)?[]:{},e));if(!h){for(l in t)EC.call(a,e,l,"get",t[l]);s=function(p){return LC(p,a)||(o?e.p:e)}}}return rh(n,s)},dR=function(e,t,n){var r=e.labels,s=zo,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Bo=function(e,t,n){var r=e.vars,s=r[t],o=Un,a=e._ctx,l,c,h;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Au.length&&g6(),a&&(Un=a),h=l?s.apply(c,l):s.call(c),Un=o,h},p2=function(e){return Vu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Vr),e.progress()<1&&Bo(e,"onInterrupt"),e},Dp,x1e=function(e){e=!e.name&&e.default||e;var t=e.name,n=un(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:kv,render:LC,add:EC,kill:N1e,modifier:R1e,rawVars:0},o={targetTest:0,get:0,getSetter:PC,aliases:{},register:0};if(L1(),e!==r){if(Ws[t])return;Zo(r,Zo(v6(e,s),o)),Gd(r.prototype,Gd(s,v6(e,o))),Ws[r.prop=t]=r,e.targetTest&&(m5.push(r),AC[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}lq(t,r),e.register&&e.register(lo,r,Ds)},xi=255,m2={aqua:[0,xi,xi],lime:[0,xi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xi],navy:[0,0,128],white:[xi,xi,xi],olive:[128,128,0],yellow:[xi,xi,0],orange:[xi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xi,0,0],pink:[xi,192,203],cyan:[0,xi,xi],transparent:[xi,xi,xi,0]},g_=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*xi+.5|0},Tq=function(e,t,n){var r=e?Ql(e)?[e>>16,e>>8&xi,e&xi]:0:m2.black,s,o,a,l,c,h,u,d,f,p;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),m2[e])r=m2[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&xi,r&xi,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&xi,e&xi]}else if(e.substr(0,3)==="hsl"){if(r=p=e.match(lA),!t)l=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=g_(l+1/3,s,o),r[1]=g_(l,s,o),r[2]=g_(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(nq),n&&r.length<4&&(r[3]=1),r}else r=e.match(lA)||m2.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/xi,o=r[1]/xi,a=r[2]/xi,u=Math.max(s,o,a),d=Math.min(s,o,a),h=(u+d)/2,u===d?l=c=0:(f=u-d,c=h>.5?f/(2-u-d):f/(u+d),l=u===s?(o-a)/f+(o<a?6:0):u===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Mq=function(e){var t=[],n=[],r=-1;return e.split(Tu).forEach(function(s){var o=s.match(Cp)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},fR=function(e,t,n){var r="",s=(e+r).match(Tu),o=t?"hsla(":"rgba(",a=0,l,c,h,u;if(!s)return e;if(s=s.map(function(d){return(d=Tq(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(h=Mq(e),l=n.c,l.join(r)!==h.c.join(r)))for(c=e.replace(Tu,"1").split(Cp),u=c.length-1;a<u;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=e.split(Tu),u=c.length-1;a<u;a++)r+=c[a]+s[a];return r+c[u]},Tu=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in m2)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),_1e=/hsl[a]?\(/,Eq=function(e){var t=e.join(" "),n;if(Tu.lastIndex=0,Tu.test(t))return n=_1e.test(t),e[1]=fR(e[1],n),e[0]=fR(e[0],n,Mq(e[1])),!0},Uv,Ys=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,c,h,u,d,f,p=function m(y){var g=i()-r,v=y===!0,x,_,w,b;if(g>e&&(n+=g-t),r+=g,w=r-n,x=w-o,(x>0||v)&&(b=++u.frame,d=w-u.time*1e3,u.time=w=w/1e3,o+=x+(x>=s?4:s-x),_=1),v||(l=c(m)),_)for(f=0;f<a.length;f++)a[f](w,d,b,y)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(y){return d/(1e3/(y||60))},wake:function(){oq&&(!cA&&tq()&&(_o=cA=window,wC=_o.document||{},ao.gsap=lo,(_o.gsapVersions||(_o.gsapVersions=[])).push(lo.version),aq(p6||_o.GreenSockGlobals||!_o.gsap&&_o||{}),h=_o.requestAnimationFrame),l&&u.sleep(),c=h||function(y){return setTimeout(y,o-u.time*1e3+1|0)},Uv=1,p(2))},sleep:function(){(h?_o.cancelAnimationFrame:clearTimeout)(l),Uv=0,c=kv},lagSmoothing:function(y,g){e=y||1/0,t=Math.min(g||33,e)},fps:function(y){s=1e3/(y||240),o=u.time*1e3+s},add:function(y,g,v){var x=g?function(_,w,b,S){y(_,w,b,S),u.remove(x)}:y;return u.remove(y),a[v?"unshift":"push"](x),L1(),x},remove:function(y,g){~(g=a.indexOf(y))&&a.splice(g,1)&&f>=g&&f--},_listeners:a},u}(),L1=function(){return!Uv&&Ys.wake()},Bt={},b1e=/^[\d.\-M][\d.\-,\s]/,w1e=/["']/g,S1e=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,c;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(w1e,"").trim():+c,r=l.substr(a+1).trim();return t},A1e=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},T1e=function(e){var t=(e+"").split("("),n=Bt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[S1e(t[1])]:A1e(e).split(",").map(dq)):Bt._CE&&b1e.test(e)?Bt._CE("",e):n},Cq=function(e){return function(t){return 1-e(1-t)}},Dq=function i(e,t){for(var n=e._first,r;n;)n instanceof ys?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},wd=function(e,t){return e&&(un(e)?e:Bt[e]||T1e(e))||t},nf=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return Cs(e,function(a){Bt[a]=ao[a]=s,Bt[o=a.toLowerCase()]=n;for(var l in s)Bt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Bt[a+"."+l]=s[l]}),s},Pq=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},v_=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/aA*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*Kpe((h-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Pq(a);return s=aA/s,l.config=function(c,h){return i(e,c,h)},l},y_=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:Pq(n);return r.config=function(s){return i(e,s)},r};Cs("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;nf(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Bt.Linear.easeNone=Bt.none=Bt.Linear.easeIn;nf("Elastic",v_("in"),v_("out"),v_());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};nf("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);nf("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});nf("Circ",function(i){return-(eq(1-i*i)-1)});nf("Sine",function(i){return i===1?1:-Qpe(i*Ype)+1});nf("Back",y_("in"),y_("out"),y_());Bt.SteppedEase=Bt.steps=ao.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-bi;return function(a){return((r*J3(0,o,a)|0)+s)*n}}};C1.ease=Bt["quad.out"];Cs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return TC+=i+","+i+"Params,"});var Lq=function(e,t){this.id=Zpe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:uq,this.set=t?t.getSetter:PC},I1=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,P1(this,+t.duration,1,1),this.data=t.data,Un&&(this._ctx=Un,Un.data.push(this)),Uv||Ys.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,P1(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(L1(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Ux(this,n),!s._dp||s.parent||mq(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&m0(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===bi||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),hq(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+uR(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+uR(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?D1(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-bi?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?y6(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-bi?0:this._rts,this.totalTime(J3(-this._delay,this._tDur,r),!0),Bx(this),s1e(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(L1(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==bi&&(this._tTime-=bi)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&m0(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Es(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?y6(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=t1e);var r=Vr;return Vr=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Vr=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,hR(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,hR(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(xo(this,n),Es(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Es(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-bi:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-bi,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-bi)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=un(n)?n:fq,a=function(){var c=r.then;r.then=null,un(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){p2(this)},i}();Zo(I1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-bi,_prom:0,_ps:!1,_rts:1});var ys=function(i){J$(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Es(n.sortChildren),Wi&&m0(n.parent||Wi,Dl(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&gq(Dl(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return G2(0,arguments,this),this},t.from=function(r,s,o){return G2(1,arguments,this),this},t.fromTo=function(r,s,o,a){return G2(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,V2(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Yn(r,s,xo(this,o),1),this},t.call=function(r,s,o){return m0(this,Yn.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Yn(r,o,xo(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,h){return o.runBackwards=1,V2(o).immediateRender=Es(o.immediateRender),this.staggerTo(r,s,o,a,l,c,h)},t.staggerFromTo=function(r,s,o,a,l,c,h,u){return a.startAt=o,V2(a).immediateRender=Es(a.immediateRender),this.staggerTo(r,s,a,l,c,h,u)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:yr(r),u=this._zTime<0!=r<0&&(this._initted||!c),d,f,p,m,y,g,v,x,_,w,b,S;if(this!==Wi&&h>l&&r>=0&&(h=l),h!==this._tTime||o||u){if(a!==this._time&&c&&(h+=this._time-a,r+=this._time-a),d=h,_=this._start,x=this._ts,g=!x,u&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(b=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,o);if(d=yr(h%y),h===l?(m=this._repeat,d=c):(m=~~(h/y),m&&m===h/y&&(d=c,m--),d>c&&(d=c)),w=D1(this._tTime,y),!a&&this._tTime&&w!==m&&(w=m),b&&m&1&&(d=c-d,S=1),m!==w&&!this._lock){var A=b&&w&1,E=A===(b&&m&1);if(m<w&&(A=!A),a=A?0:c,this._lock=1,this.render(a||(S?0:yr(m*y)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Bo(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,E&&(this._lock=2,a=A?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;Dq(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=c1e(this,yr(a),yr(d)),v&&(h-=d-(d=v._start))),this._tTime=h,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&(Bo(this,"onStart"),this._tTime!==h))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!g){v=0,p&&(h+=this._zTime=-bi);break}}f=p}else{f=this._last;for(var T=r<0?r:d;f;){if(p=f._prev,(f._act||T<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(T-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(T-f._start)*f._ts,s,o||Vr&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!g){v=0,p&&(h+=this._zTime=T?-bi:bi);break}}f=p}}if(v&&!s&&(this.pause(),v.render(d>=a?0:-bi)._zTime=d>=a?1:-1,this._ts))return this._start=_,Bx(this),this.render(r,s,o);this._onUpdate&&!s&&Bo(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(_===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&Vu(this,1),!s&&!(r<0&&!a)&&(h||a||!l)&&(Bo(this,h===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Ql(s)||(s=xo(this,s,r)),!(r instanceof I1)){if(Gr(r))return r.forEach(function(a){return o.add(a,s)}),this;if(dr(r))return this.addLabel(r,s);if(un(r))r=Yn.delayedCall(0,r);else return this}return this!==r?m0(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-zo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Yn?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return dr(r)?this.removeLabel(r):un(r)?this.killTweensOf(r):(kx(this,r),r===this._recent&&(this._recent=this._last),bd(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yr(Ys.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=xo(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Yn.delayedCall(0,s||kv,o);return a.data="isPause",this._hasPause=1,m0(this,a,xo(this,r))},t.removePause=function(r){var s=this._first;for(r=xo(this,r);s;)s._start===r&&s.data==="isPause"&&Vu(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)eu!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=ko(r),l=this._first,c=Ql(s),h;l;)l instanceof Yn?i1e(l._targets,a)&&(c?(!eu||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=xo(o,r),l=s,c=l.startAt,h=l.onStart,u=l.onStartParams,d=l.immediateRender,f,p=Yn.to(o,Zo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||bi,onStart:function(){if(o.pause(),!f){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());p._dur!==y&&P1(p,y,0,1).render(p._time,!0,!0),f=1}h&&h.apply(p,u||[])}},s));return d?p.render(0):p},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Zo({startAt:{time:xo(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),dR(this,xo(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),dR(this,xo(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+bi)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return bd(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),bd(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=zo,c,h,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(u=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,m0(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;P1(o,o===Wi&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Wi._ts&&(hq(Wi,y6(r,Wi)),cq=Ys.frame),Ys.frame>=lR){lR+=ro.autoSleep||120;var s=Wi._first;if((!s||!s._ts)&&ro.autoSleep&&Ys._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ys.sleep()}}},e}(I1);Zo(ys.prototype,{_lock:0,_hasPause:0,_forcing:0});var M1e=function(e,t,n,r,s,o,a){var l=new Ds(this._pt,e,t,0,1,zq,null,s),c=0,h=0,u,d,f,p,m,y,g,v;for(l.b=n,l.e=r,n+="",r+="",(g=~r.indexOf("random("))&&(r=Bv(r)),o&&(v=[n,r],o(v,e,t),n=v[0],r=v[1]),d=n.match(p_)||[];u=p_.exec(r);)p=u[0],m=r.substring(c,u.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),p!==d[h++]&&(y=parseFloat(d[h-1])||0,l._pt={_next:l._pt,p:m||h===1?m:",",s:y,c:p.charAt(1)==="="?Jp(y,p)-y:parseFloat(p)-y,m:f&&f<4?Math.round:0},c=p_.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(rq.test(r)||g)&&(l.e=0),this._pt=l,l},EC=function(e,t,n,r,s,o,a,l,c,h){un(r)&&(r=r(s||0,e,o));var u=e[t],d=n!=="get"?n:un(u)?c?e[t.indexOf("set")||!un(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():u,f=un(u)?c?L1e:Nq:DC,p;if(dr(r)&&(~r.indexOf("random(")&&(r=Bv(r)),r.charAt(1)==="="&&(p=Jp(d,r)+(Nr(d)||0),(p||p===0)&&(r=p))),!h||d!==r||gA)return!isNaN(d*r)&&r!==""?(p=new Ds(this._pt,e,t,+d||0,r-(d||0),typeof u=="boolean"?O1e:Fq,0,f),c&&(p.fp=c),a&&p.modifier(a,this,e),this._pt=p):(!u&&!(t in e)&&SC(t,r),M1e.call(this,e,t,d,r,f,l||ro.stringFilter,c))},E1e=function(e,t,n,r,s){if(un(e)&&(e=j2(e,s,t,n,r)),!G0(e)||e.style&&e.nodeType||Gr(e)||iq(e))return dr(e)?j2(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=j2(e[a],s,t,n,r);return o},Iq=function(e,t,n,r,s,o){var a,l,c,h;if(Ws[e]&&(a=new Ws[e]).init(s,a.rawVars?t[e]:E1e(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new Ds(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Dp))for(c=n._ptLookup[n._targets.indexOf(s)],h=a._props.length;h--;)c[a._props[h]]=l;return a},eu,gA,CC=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,h=r.onUpdateParams,u=r.callbackScope,d=r.runBackwards,f=r.yoyoEase,p=r.keyframes,m=r.autoRevert,y=e._dur,g=e._startAt,v=e._targets,x=e.parent,_=x&&x.data==="nested"?x.vars.targets:v,w=e._overwrite==="auto"&&!_C,b=e.timeline,S,A,E,T,M,C,D,P,I,k,G,U,Z;if(b&&(!p||!s)&&(s="none"),e._ease=wd(s,C1.ease),e._yEase=f?Cq(wd(f===!0?s:f,C1.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!b&&!!r.runBackwards,!b||p&&!r.stagger){if(P=v[0]?_d(v[0]).harness:0,U=P&&r[P.prop],S=v6(r,AC),g&&(g._zTime<0&&g.progress(1),t<0&&d&&a&&!m?g.render(-1,!0):g.revert(d&&y?p5:e1e),g._lazy=0),o){if(Vu(e._startAt=Yn.set(v,Zo({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!g&&Es(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:h,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Vr||!a&&!m)&&e._startAt.revert(p5),a&&y&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&y&&!g){if(t&&(a=!1),E=Zo({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Es(l),immediateRender:a,stagger:0,parent:x},S),U&&(E[P.prop]=U),Vu(e._startAt=Yn.set(v,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Vr?e._startAt.revert(p5):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,bi,bi);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&Es(l)||l&&!y,A=0;A<v.length;A++){if(M=v[A],D=M._gsap||MC(v)[A]._gsap,e._ptLookup[A]=k={},uA[D.id]&&Au.length&&g6(),G=_===v?A:_.indexOf(M),P&&(I=new P).init(M,U||S,e,G,_)!==!1&&(e._pt=T=new Ds(e._pt,M,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function($){k[$]=T}),I.priority&&(C=1)),!P||U)for(E in S)Ws[E]&&(I=Iq(E,S,e,G,M,_))?I.priority&&(C=1):k[E]=T=EC.call(e,M,E,"get",S[E],G,_,0,r.stringFilter);e._op&&e._op[A]&&e.kill(M,e._op[A]),w&&e._pt&&(eu=e,Wi.killTweensOf(M,k,e.globalTime(t)),Z=!e.parent,eu=0),e._pt&&l&&(uA[D.id]=1)}C&&kq(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Z,p&&t<=0&&b.render(zo,!0,!0)},C1e=function(e,t,n,r,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,u,d;if(!l)for(l=e._ptCache[t]=[],u=e._ptLookup,d=e._targets.length;d--;){if(c=u[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return gA=1,e.vars[t]="+=0",CC(e,a),gA=0,1;l.push(c)}for(d=l.length;d--;)h=l[d],c=h._pt||h,c.s=(r||r===0)&&!s?r:c.s+(r||0)+o*c.c,c.c=n-c.s,h.e&&(h.e=Tn(n)+Nr(h.e)),h.b&&(h.b=c.s+Nr(h.b))},D1e=function(e,t){var n=e[0]?_d(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=Gd({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},P1e=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(Gr(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},j2=function(e,t,n,r,s){return un(e)?e.call(t,n,r,s):dr(e)&&~e.indexOf("random(")?Bv(e):e},Oq=TC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Rq={};Cs(Oq+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return Rq[i]=1});var Yn=function(i){J$(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:V2(r))||this;var l=a.vars,c=l.duration,h=l.delay,u=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,y=l.scrollTrigger,g=l.yoyoEase,v=r.parent||Wi,x=(Gr(n)||iq(n)?Ql(n[0]):"length"in r)?[n]:ko(n),_,w,b,S,A,E,T,M;if(a._targets=x.length?MC(x):m6("GSAP target "+n+" not found. https://greensock.com",!ro.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||zy(c)||zy(h)){if(r=a.vars,_=a.timeline=new ys({data:"nested",defaults:m||{},targets:v&&v.data==="nested"?v.vars.targets:x}),_.kill(),_.parent=_._dp=Dl(a),_._start=0,d||zy(c)||zy(h)){if(S=x.length,T=d&&_q(d),G0(d))for(A in d)~Oq.indexOf(A)&&(M||(M={}),M[A]=d[A]);for(w=0;w<S;w++)b=v6(r,Rq),b.stagger=0,g&&(b.yoyoEase=g),M&&Gd(b,M),E=x[w],b.duration=+j2(c,Dl(a),w,E,x),b.delay=(+j2(h,Dl(a),w,E,x)||0)-a._delay,!d&&S===1&&b.delay&&(a._delay=h=b.delay,a._start+=h,b.delay=0),_.to(E,b,T?T(w,E,x):0),_._ease=Bt.none;_.duration()?c=h=0:a.timeline=0}else if(p){V2(Zo(_.vars.defaults,{ease:"none"})),_._ease=wd(p.ease||r.ease||"none");var C=0,D,P,I;if(Gr(p))p.forEach(function(k){return _.to(x,k,">")}),_.duration();else{b={};for(A in p)A==="ease"||A==="easeEach"||P1e(A,p[A],b,p.easeEach);for(A in b)for(D=b[A].sort(function(k,G){return k.t-G.t}),C=0,w=0;w<D.length;w++)P=D[w],I={ease:P.e,duration:(P.t-(w?D[w-1].t:0))/100*c},I[A]=P.v,_.to(x,I,C),C+=I.duration;_.duration()<c&&_.to({},{duration:c-_.duration()})}}c||a.duration(c=_.duration())}else a.timeline=0;return f===!0&&!_C&&(eu=Dl(a),Wi.killTweensOf(x),eu=0),m0(v,Dl(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(u||!c&&!p&&a._start===yr(v._time)&&Es(u)&&o1e(Dl(a))&&v.data!=="nested")&&(a._tTime=-bi,a.render(Math.max(0,-h)||0)),y&&gq(Dl(a),y),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,h=r<0,u=r>l-bi&&!h?l:r<bi?0:r,d,f,p,m,y,g,v,x,_;if(!c)l1e(this,r,s,o);else if(u!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(d=u,x=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(m*100+r,s,o);if(d=yr(u%m),u===l?(p=this._repeat,d=c):(p=~~(u/m),p&&p===u/m&&(d=c,p--),d>c&&(d=c)),g=this._yoyo&&p&1,g&&(_=this._yEase,d=c-d),y=D1(this._tTime,m),d===a&&!o&&this._initted)return this._tTime=u,this;p!==y&&(x&&this._yEase&&Dq(x,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(yr(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(vq(this,h?r:d,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(_||this._ease)(d/c),this._from&&(this.ratio=v=1-v),d&&!a&&!s&&(Bo(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;x&&x.render(r<0?r:!d&&g?-bi:x._dur*x._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&hA(this,r,s,o),Bo(this,"onUpdate")),this._repeat&&p!==y&&this.vars.onRepeat&&!s&&this.parent&&Bo(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(h&&!this._onUpdate&&hA(this,r,!0,!0),(r||!c)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Vu(this,1),!s&&!(h&&!a)&&(u||a||g)&&(Bo(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a){Uv||Ys.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||CC(this,l),c=this._ease(l/this._dur),C1e(this,r,s,o,a,c,l)?this.resetTo(r,s,o,a):(Ux(this,0),this.parent||pq(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?p2(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,eu&&eu.vars.overwrite!==!0)._first||p2(this),this.parent&&o!==this.timeline.totalDuration()&&P1(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?ko(r):a,c=this._ptLookup,h=this._pt,u,d,f,p,m,y,g;if((!s||s==="all")&&r1e(a,l))return s==="all"&&(this._pt=0),p2(this);for(u=this._op=this._op||[],s!=="all"&&(dr(s)&&(m={},Cs(s,function(v){return m[v]=1}),s=m),s=D1e(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){d=c[g],s==="all"?(u[g]=s,p=d,f={}):(f=u[g]=u[g]||{},p=s);for(m in p)y=d&&d[m],y&&((!("kill"in y.d)||y.d.kill(m)===!0)&&kx(this,y,"_pt"),delete d[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&h&&p2(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return G2(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return G2(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Wi.killTweensOf(r,s,o)},e}(I1);Zo(Yn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Cs("staggerTo,staggerFrom,staggerFromTo",function(i){Yn[i]=function(){var e=new ys,t=fA.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var DC=function(e,t,n){return e[t]=n},Nq=function(e,t,n){return e[t](n)},L1e=function(e,t,n,r){return e[t](r.fp,n)},I1e=function(e,t,n){return e.setAttribute(t,n)},PC=function(e,t){return un(e[t])?Nq:bC(e[t])&&e.setAttribute?I1e:DC},Fq=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},O1e=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},zq=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},LC=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},R1e=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},N1e=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?kx(this,t,"_pt"):t.dep||(n=1),t=r;return!n},F1e=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},kq=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},Ds=function(){function i(t,n,r,s,o,a,l,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||Fq,this.d=l||this,this.set=c||DC,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=F1e,this.m=n,this.mt=s,this.tween=r},i}();Cs(TC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return AC[i]=1});ao.TweenMax=ao.TweenLite=Yn;ao.TimelineLite=ao.TimelineMax=ys;Wi=new ys({sortChildren:!1,defaults:C1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ro.stringFilter=Eq;var O1=[],g5={},z1e=[],pR=0,x_=function(e){return(g5[e]||z1e).map(function(t){return t()})},vA=function(){var e=Date.now(),t=[];e-pR>2&&(x_("matchMediaInit"),O1.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,c;for(a in r)o=_o.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),x_("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),pR=e,x_("matchMedia"))},Bq=function(){function i(t,n){this.selector=n&&pA(n),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){un(n)&&(s=r,r=n,n=un);var o=this,a=function(){var c=Un,h=o.selector,u;return c&&c!==o&&c.data.push(o),s&&(o.selector=pA(s)),Un=o,u=r.apply(o,arguments),un(u)&&o._r.push(u),Un=c,o.selector=h,o.isReverted=!1,u};return o.last=a,n===un?a(o):n?o[n]=a:a},e.ignore=function(n){var r=Un;Un=null,n(this),Un=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Yn&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,c){return c.g-l.g||-1}).forEach(function(l){return l.t.revert(n)}),this.data.forEach(function(l){return!(l instanceof I1)&&l.revert&&l.revert(n)}),this._r.forEach(function(l){return l(n,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r){var a=O1.indexOf(this);~a&&O1.splice(a,1)}},e.revert=function(n){this.kill(n||{})},i}(),k1e=function(){function i(t){this.contexts=[],this.scope=t}var e=i.prototype;return e.add=function(n,r,s){G0(n)||(n={matches:n});var o=new Bq(0,s||this.scope),a=o.conditions={},l,c,h;this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(l=_o.matchMedia(n[c]),l&&(O1.indexOf(o)<0&&O1.push(o),(a[c]=l.matches)&&(h=1),l.addListener?l.addListener(vA):l.addEventListener("change",vA)));return h&&r(o),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),x6={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return x1e(r)})},timeline:function(e){return new ys(e)},getTweensOf:function(e,t){return Wi.getTweensOf(e,t)},getProperty:function(e,t,n,r){dr(e)&&(e=ko(e)[0]);var s=_d(e||{}).get,o=n?fq:dq;return n==="native"&&(n=""),e&&(t?o((Ws[t]&&Ws[t].get||s)(e,t,n,r)):function(a,l,c){return o((Ws[a]&&Ws[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if(e=ko(e),e.length>1){var r=e.map(function(h){return lo.quickSetter(h,t,n)}),s=r.length;return function(h){for(var u=s;u--;)r[u](h)}}e=e[0]||{};var o=Ws[t],a=_d(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(h){var u=new o;Dp._pt=0,u.init(e,n?h+n:h,Dp,0,[e]),u.render(1,u),Dp._pt&&LC(1,Dp)}:a.set(e,l);return o?c:function(h){return c(e,l,n?h+n:h,a,1)}},quickTo:function(e,t,n){var r,s=lo.to(e,Gd((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(l,c,h){return s.resetTo(t,l,c,h)};return o.tween=s,o},isTweening:function(e){return Wi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wd(e.ease,C1.ease)),cR(C1,e||{})},config:function(e){return cR(ro,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Ws[a]&&!ao[a]&&m6(t+" effect requires "+a+" plugin.")}),m_[t]=function(a,l,c){return n(ko(a),Zo(l||{},s),c)},o&&(ys.prototype[t]=function(a,l,c){return this.add(m_[t](a,G0(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Bt[e]=wd(t)},parseEase:function(e,t){return arguments.length?wd(e,t):Bt},getById:function(e){return Wi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ys(e),r,s;for(n.smoothChildTiming=Es(e.smoothChildTiming),Wi.remove(n),n._dp=0,n._time=n._tTime=Wi._time,r=Wi._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Yn&&r.vars.onComplete===r._targets[0]))&&m0(n,r,r._start-r._delay),r=s;return m0(Wi,n,0),n},context:function(e,t){return e?new Bq(e,t):Un},matchMedia:function(e){return new k1e(e)},matchMediaRefresh:function(){return O1.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||vA()},addEventListener:function(e,t){var n=g5[e]||(g5[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=g5[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:g1e,wrapYoyo:v1e,distribute:_q,random:wq,snap:bq,normalize:m1e,getUnit:Nr,clamp:h1e,splitColor:Tq,toArray:ko,selector:pA,mapRange:Aq,pipe:f1e,unitize:p1e,interpolate:y1e,shuffle:xq},install:aq,effects:m_,ticker:Ys,updateRoot:ys.updateRoot,plugins:Ws,globalTimeline:Wi,core:{PropTween:Ds,globals:lq,Tween:Yn,Timeline:ys,Animation:I1,getCache:_d,_removeLinkedListItem:kx,reverting:function(){return Vr},context:function(e){return e&&Un&&(Un.data.push(e),e._ctx=Un),Un},suppressOverwrites:function(e){return _C=e}}};Cs("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return x6[i]=Yn[i]});Ys.add(ys.updateRoot);Dp=x6.to({},{duration:0});var B1e=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},U1e=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=B1e(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},__=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(dr(s)&&(l={},Cs(s,function(h){return l[h]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}U1e(a,s)}}}},lo=x6.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Vr?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},__("roundProps",mA),__("modifiers"),__("snap",bq))||x6;Yn.version=ys.version=lo.version="3.11.4";oq=1;tq()&&L1();Bt.Power0;Bt.Power1;Bt.Power2;Bt.Power3;Bt.Power4;Bt.Linear;Bt.Quad;Bt.Cubic;Bt.Quart;Bt.Quint;Bt.Strong;Bt.Elastic;Bt.Back;Bt.SteppedEase;Bt.Bounce;Bt.Sine;Bt.Expo;Bt.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var mR,tu,e1,IC,cd,gR,OC,V1e=function(){return typeof window<"u"},Kl={},Fh=180/Math.PI,t1=Math.PI/180,Sf=Math.atan2,vR=1e8,RC=/([A-Z])/g,G1e=/(left|right|width|margin|padding|x)/i,j1e=/[\s,\(]\S/,Fl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},yA=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},H1e=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},W1e=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},$1e=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Uq=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Vq=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},q1e=function(e,t,n){return e.style[t]=n},X1e=function(e,t,n){return e.style.setProperty(t,n)},Y1e=function(e,t,n){return e._gsap[t]=n},Z1e=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Q1e=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},K1e=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},$i="transform",Ia=$i+"Origin",J1e=function(e,t){var n=this,r=this.target,s=r.style;if(e in Kl){if(this.tfm=this.tfm||{},e!=="transform"&&(e=Fl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Il(r,o)}):this.tfm[e]=r._gsap.x?r._gsap[e]:Il(r,e)),this.props.indexOf($i)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ia,t,"")),e=$i}(s||t)&&this.props.push(e,t,s[e])},Gq=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},eme=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].replace(RC,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=OC(),s&&!s.isStart&&!n[$i]&&(Gq(n),r.uncache=1)}},jq=function(e,t){var n={target:e,props:[],revert:eme,save:J1e};return t&&t.split(",").forEach(function(r){return n.save(r)}),n},Hq,xA=function(e,t){var n=tu.createElementNS?tu.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):tu.createElement(e);return n.style?n:tu.createElement(e)},O0=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(RC,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,R1(t)||t,1)||""},yR="O,Moz,ms,Ms,Webkit".split(","),R1=function(e,t,n){var r=t||cd,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(yR[o]+e in s););return o<0?null:(o===3?"ms":o>=0?yR[o]:"")+e},_A=function(){V1e()&&window.document&&(mR=window,tu=mR.document,e1=tu.documentElement,cd=xA("div")||{style:{}},xA("div"),$i=R1($i),Ia=$i+"Origin",cd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Hq=!!R1("perspective"),OC=lo.core.reverting,IC=1)},b_=function i(e){var t=xA("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(e1.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),e1.removeChild(t),this.style.cssText=s,o},xR=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Wq=function(e){var t;try{t=e.getBBox()}catch{t=b_.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===b_||(t=b_.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+xR(e,["x","cx","x1"])||0,y:+xR(e,["y","cy","y1"])||0,width:0,height:0}:t},$q=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Wq(e))},Vv=function(e,t){if(t){var n=e.style;t in Kl&&t!==Ia&&(t=$i),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(RC,"-$1").toLowerCase())):n.removeAttribute(t)}},iu=function(e,t,n,r,s,o){var a=new Ds(e._pt,t,n,0,1,o?Vq:Uq);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},_R={deg:1,rad:1,turn:1},tme={grid:1,flex:1},Gu=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=cd.style,l=G1e.test(t),c=e.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),u=100,d=r==="px",f=r==="%",p,m,y,g;return r===o||!s||_R[r]||_R[o]?s:(o!=="px"&&!d&&(s=i(e,t,n,"px")),g=e.getCTM&&$q(e),(f||o==="%")&&(Kl[t]||~t.indexOf("adius"))?(p=g?e.getBBox()[l?"width":"height"]:e[h],Tn(f?s/p*u:s/100*p)):(a[l?"width":"height"]=u+(d?o:r),m=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===tu||!m.appendChild)&&(m=tu.body),y=m._gsap,y&&f&&y.width&&l&&y.time===Ys.time&&!y.uncache?Tn(s/y.width*u):((f||o==="%")&&!tme[O0(m,"display")]&&(a.position=O0(e,"position")),m===e&&(a.position="static"),m.appendChild(cd),p=cd[h],m.removeChild(cd),a.position="absolute",l&&f&&(y=_d(m),y.time=Ys.time,y.width=m[h]),Tn(d?p*s/u:p&&s?u/p*s:0))))},Il=function(e,t,n,r){var s;return IC||_A(),t in Fl&&t!=="transform"&&(t=Fl[t],~t.indexOf(",")&&(t=t.split(",")[0])),Kl[t]&&t!=="transform"?(s=jv(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:b6(O0(e,Ia))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=_6[t]&&_6[t](e,t,n)||O0(e,t)||uq(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Gu(e,t,s,n)+n:s},ime=function(e,t,n,r){if(!n||n==="none"){var s=R1(t,e,1),o=s&&O0(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=O0(e,"borderTopColor"))}var a=new Ds(this._pt,e.style,t,0,1,zq),l=0,c=0,h,u,d,f,p,m,y,g,v,x,_,w;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(e.style[t]=r,r=O0(e,t)||r,e.style[t]=n),h=[n,r],Eq(h),n=h[0],r=h[1],d=n.match(Cp)||[],w=r.match(Cp)||[],w.length){for(;u=Cp.exec(r);)y=u[0],v=r.substring(l,u.index),p?p=(p+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(p=1),y!==(m=d[c++]||"")&&(f=parseFloat(m)||0,_=m.substr((f+"").length),y.charAt(1)==="="&&(y=Jp(f,y)+_),g=parseFloat(y),x=y.substr((g+"").length),l=Cp.lastIndex-x.length,x||(x=x||ro.units[t]||_,l===r.length&&(r+=x,a.e+=x)),_!==x&&(f=Gu(e,t,m,x)||0),a._pt={_next:a._pt,p:v||c===1?v:",",s:f,c:g-f,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?Vq:Uq;return rq.test(r)&&(a.e=0),this._pt=a,a},bR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},nme=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=bR[n]||n,t[1]=bR[r]||r,t.join(" ")},rme=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Kl[a]&&(l=1,a=a==="transformOrigin"?Ia:$i),Vv(n,a);l&&(Vv(n,$i),o&&(o.svg&&n.removeAttribute("transform"),jv(n,1),o.uncache=1,Gq(r)))}},_6={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Ds(e._pt,t,n,0,0,rme);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},Gv=[1,0,0,1,0,0],qq={},Xq=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},wR=function(e){var t=O0(e,$i);return Xq(t)?Gv:t.substr(7).match(nq).map(Tn)},NC=function(e,t){var n=e._gsap||_d(e),r=e.style,s=wR(e),o,a,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Gv:s):(s===Gv&&!e.offsetParent&&e!==e1&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,e1.appendChild(e)),s=wR(e),l?r.display=l:Vv(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):e1.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},bA=function(e,t,n,r,s,o){var a=e._gsap,l=s||NC(e,!0),c=a.xOrigin||0,h=a.yOrigin||0,u=a.xOffset||0,d=a.yOffset||0,f=l[0],p=l[1],m=l[2],y=l[3],g=l[4],v=l[5],x=t.split(" "),_=parseFloat(x[0])||0,w=parseFloat(x[1])||0,b,S,A,E;n?l!==Gv&&(S=f*y-p*m)&&(A=_*(y/S)+w*(-m/S)+(m*v-y*g)/S,E=_*(-p/S)+w*(f/S)-(f*v-p*g)/S,_=A,w=E):(b=Wq(e),_=b.x+(~x[0].indexOf("%")?_/100*b.width:_),w=b.y+(~(x[1]||x[0]).indexOf("%")?w/100*b.height:w)),r||r!==!1&&a.smooth?(g=_-c,v=w-h,a.xOffset=u+(g*f+v*m)-g,a.yOffset=d+(g*p+v*y)-v):a.xOffset=a.yOffset=0,a.xOrigin=_,a.yOrigin=w,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[Ia]="0px 0px",o&&(iu(o,a,"xOrigin",c,_),iu(o,a,"yOrigin",h,w),iu(o,a,"xOffset",u,a.xOffset),iu(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",_+" "+w)},jv=function(e,t){var n=e._gsap||new Lq(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=O0(e,Ia)||"0",h,u,d,f,p,m,y,g,v,x,_,w,b,S,A,E,T,M,C,D,P,I,k,G,U,Z,$,W,X,j,H,V;return h=u=d=m=y=g=v=x=_=0,f=p=1,n.svg=!!(e.getCTM&&$q(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[$i]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[$i]!=="none"?l[$i]:"")),r.scale=r.rotate=r.translate="none"),S=NC(e,n.svg),n.svg&&(n.uncache?(U=e.getBBox(),c=n.xOrigin-U.x+"px "+(n.yOrigin-U.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),bA(e,G||c,!!G||n.originIsAbsolute,n.smooth!==!1,S)),w=n.xOrigin||0,b=n.yOrigin||0,S!==Gv&&(M=S[0],C=S[1],D=S[2],P=S[3],h=I=S[4],u=k=S[5],S.length===6?(f=Math.sqrt(M*M+C*C),p=Math.sqrt(P*P+D*D),m=M||C?Sf(C,M)*Fh:0,v=D||P?Sf(D,P)*Fh+m:0,v&&(p*=Math.abs(Math.cos(v*t1))),n.svg&&(h-=w-(w*M+b*D),u-=b-(w*C+b*P))):(V=S[6],j=S[7],$=S[8],W=S[9],X=S[10],H=S[11],h=S[12],u=S[13],d=S[14],A=Sf(V,X),y=A*Fh,A&&(E=Math.cos(-A),T=Math.sin(-A),G=I*E+$*T,U=k*E+W*T,Z=V*E+X*T,$=I*-T+$*E,W=k*-T+W*E,X=V*-T+X*E,H=j*-T+H*E,I=G,k=U,V=Z),A=Sf(-D,X),g=A*Fh,A&&(E=Math.cos(-A),T=Math.sin(-A),G=M*E-$*T,U=C*E-W*T,Z=D*E-X*T,H=P*T+H*E,M=G,C=U,D=Z),A=Sf(C,M),m=A*Fh,A&&(E=Math.cos(A),T=Math.sin(A),G=M*E+C*T,U=I*E+k*T,C=C*E-M*T,k=k*E-I*T,M=G,I=U),y&&Math.abs(y)+Math.abs(m)>359.9&&(y=m=0,g=180-g),f=Tn(Math.sqrt(M*M+C*C+D*D)),p=Tn(Math.sqrt(k*k+V*V)),A=Sf(I,k),v=Math.abs(A)>2e-4?A*Fh:0,_=H?1/(H<0?-H:H):0),n.svg&&(G=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Xq(O0(e,$i)),G&&e.setAttribute("transform",G))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),t=t||n.uncache,n.x=h-((n.xPercent=h&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=u-((n.yPercent=u&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=Tn(f),n.scaleY=Tn(p),n.rotation=Tn(m)+a,n.rotationX=Tn(y)+a,n.rotationY=Tn(g)+a,n.skewX=v+a,n.skewY=x+a,n.transformPerspective=_+o,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[Ia]=b6(c)),n.xOffset=n.yOffset=0,n.force3D=ro.force3D,n.renderTransform=n.svg?ome:Hq?Yq:sme,n.uncache=0,n},b6=function(e){return(e=e.split(" "))[0]+" "+e[1]},w_=function(e,t,n){var r=Nr(t);return Tn(parseFloat(t)+parseFloat(Gu(e,"x",n+"px",r)))+r},sme=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Yq(e,t)},bh="0deg",ug="0px",wh=") ",Yq=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,h=n.rotationY,u=n.rotationX,d=n.skewX,f=n.skewY,p=n.scaleX,m=n.scaleY,y=n.transformPerspective,g=n.force3D,v=n.target,x=n.zOrigin,_="",w=g==="auto"&&e&&e!==1||g===!0;if(x&&(u!==bh||h!==bh)){var b=parseFloat(h)*t1,S=Math.sin(b),A=Math.cos(b),E;b=parseFloat(u)*t1,E=Math.cos(b),o=w_(v,o,S*E*-x),a=w_(v,a,-Math.sin(b)*-x),l=w_(v,l,A*E*-x+x)}y!==ug&&(_+="perspective("+y+wh),(r||s)&&(_+="translate("+r+"%, "+s+"%) "),(w||o!==ug||a!==ug||l!==ug)&&(_+=l!==ug||w?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+wh),c!==bh&&(_+="rotate("+c+wh),h!==bh&&(_+="rotateY("+h+wh),u!==bh&&(_+="rotateX("+u+wh),(d!==bh||f!==bh)&&(_+="skew("+d+", "+f+wh),(p!==1||m!==1)&&(_+="scale("+p+", "+m+wh),v.style[$i]=_||"translate(0, 0)"},ome=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,h=n.skewY,u=n.scaleX,d=n.scaleY,f=n.target,p=n.xOrigin,m=n.yOrigin,y=n.xOffset,g=n.yOffset,v=n.forceCSS,x=parseFloat(o),_=parseFloat(a),w,b,S,A,E;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=t1,c*=t1,w=Math.cos(l)*u,b=Math.sin(l)*u,S=Math.sin(l-c)*-d,A=Math.cos(l-c)*d,c&&(h*=t1,E=Math.tan(c-h),E=Math.sqrt(1+E*E),S*=E,A*=E,h&&(E=Math.tan(h),E=Math.sqrt(1+E*E),w*=E,b*=E)),w=Tn(w),b=Tn(b),S=Tn(S),A=Tn(A)):(w=u,A=d,b=S=0),(x&&!~(o+"").indexOf("px")||_&&!~(a+"").indexOf("px"))&&(x=Gu(f,"x",o,"px"),_=Gu(f,"y",a,"px")),(p||m||y||g)&&(x=Tn(x+p-(p*w+m*S)+y),_=Tn(_+m-(p*b+m*A)+g)),(r||s)&&(E=f.getBBox(),x=Tn(x+r/100*E.width),_=Tn(_+s/100*E.height)),E="matrix("+w+","+b+","+S+","+A+","+x+","+_+")",f.setAttribute("transform",E),v&&(f.style[$i]=E)},ame=function(e,t,n,r,s){var o=360,a=dr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Fh:1),c=l-r,h=r+c+"deg",u,d;return a&&(u=s.split("_")[1],u==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),u==="cw"&&c<0?c=(c+o*vR)%o-~~(c/o)*o:u==="ccw"&&c>0&&(c=(c-o*vR)%o-~~(c/o)*o)),e._pt=d=new Ds(e._pt,t,n,r,c,H1e),d.e=h,d.u="deg",e._props.push(n),d},SR=function(e,t){for(var n in t)e[n]=t[n];return e},lme=function(e,t,n){var r=SR({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,c,h,u,d,f,p;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[$i]=t,a=jv(n,1),Vv(n,$i),n.setAttribute("transform",c)):(c=getComputedStyle(n)[$i],o[$i]=t,a=jv(n,1),o[$i]=c);for(l in Kl)c=r[l],h=a[l],c!==h&&s.indexOf(l)<0&&(f=Nr(c),p=Nr(h),u=f!==p?Gu(n,l,c,p):parseFloat(c),d=parseFloat(h),e._pt=new Ds(e._pt,a,l,u,d-u,yA),e._pt.u=p||0,e._props.push(l));SR(a,r)};Cs("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});_6[e>1?"border"+i:i]=function(a,l,c,h,u){var d,f;if(arguments.length<4)return d=o.map(function(p){return Il(a,p,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(h+"").split(" "),f={},o.forEach(function(p,m){return f[p]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,f,u)}});var Zq={name:"css",register:_A,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,c,h,u,d,f,p,m,y,g,v,x,_,w,b,S,A;IC||_A(),this.styles=this.styles||jq(e),A=this.styles.props,this.tween=n;for(m in t)if(m!=="autoRound"&&(h=t[m],!(Ws[m]&&Iq(m,t,n,r,e,s)))){if(f=typeof h,p=_6[m],f==="function"&&(h=h.call(n,r,e,s),f=typeof h),f==="string"&&~h.indexOf("random(")&&(h=Bv(h)),p)p(this,e,m,h,n)&&(S=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),h+="",Tu.lastIndex=0,Tu.test(c)||(y=Nr(c),g=Nr(h)),g?y!==g&&(c=Gu(e,m,c,g)+g):y&&(h+=y),this.add(a,"setProperty",c,h,r,s,0,0,m),o.push(m),A.push(m,0,a[m]);else if(f!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(n,r,e,s):l[m],dr(c)&&~c.indexOf("random(")&&(c=Bv(c)),Nr(c+"")||(c+=ro.units[m]||Nr(Il(e,m))||""),(c+"").charAt(1)==="="&&(c=Il(e,m))):c=Il(e,m),d=parseFloat(c),v=f==="string"&&h.charAt(1)==="="&&h.substr(0,2),v&&(h=h.substr(2)),u=parseFloat(h),m in Fl&&(m==="autoAlpha"&&(d===1&&Il(e,"visibility")==="hidden"&&u&&(d=0),A.push("visibility",0,a.visibility),iu(this,a,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=Fl[m],~m.indexOf(",")&&(m=m.split(",")[0]))),x=m in Kl,x){if(this.styles.save(m),_||(w=e._gsap,w.renderTransform&&!t.parseTransform||jv(e,t.parseTransform),b=t.smoothOrigin!==!1&&w.smooth,_=this._pt=new Ds(this._pt,a,$i,0,1,w.renderTransform,w,0,-1),_.dep=1),m==="scale")this._pt=new Ds(this._pt,w,"scaleY",w.scaleY,(v?Jp(w.scaleY,v+u):u)-w.scaleY||0,yA),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){A.push(Ia,0,a[Ia]),h=nme(h),w.svg?bA(e,h,0,b,0,this):(g=parseFloat(h.split(" ")[2])||0,g!==w.zOrigin&&iu(this,w,"zOrigin",w.zOrigin,g),iu(this,a,m,b6(c),b6(h)));continue}else if(m==="svgOrigin"){bA(e,h,1,b,0,this);continue}else if(m in qq){ame(this,w,m,d,v?Jp(d,v+h):h);continue}else if(m==="smoothOrigin"){iu(this,w,"smooth",w.smooth,h);continue}else if(m==="force3D"){w[m]=h;continue}else if(m==="transform"){lme(this,h,e);continue}}else m in a||(m=R1(m)||m);if(x||(u||u===0)&&(d||d===0)&&!j1e.test(h)&&m in a)y=(c+"").substr((d+"").length),u||(u=0),g=Nr(h)||(m in ro.units?ro.units[m]:y),y!==g&&(d=Gu(e,m,c,g)),this._pt=new Ds(this._pt,x?w:a,m,d,(v?Jp(d,v+u):u)-d,!x&&(g==="px"||m==="zIndex")&&t.autoRound!==!1?$1e:yA),this._pt.u=g||0,y!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=W1e);else if(m in a)ime.call(this,e,m,c,v?v+h:h);else if(m in e)this.add(e,m,c||e[m],v?v+h:h,r,s);else if(m!=="parseTransform"){SC(m,h);continue}x||(m in a?A.push(m,0,a[m]):A.push(m,1,c||e[m])),o.push(m)}}S&&kq(this)},render:function(e,t){if(t.tween._time||!OC())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Il,aliases:Fl,getSetter:function(e,t,n){var r=Fl[t];return r&&r.indexOf(",")<0&&(t=r),t in Kl&&t!==Ia&&(e._gsap.x||Il(e,"x"))?n&&gR===n?t==="scale"?Z1e:Y1e:(gR=n||{})&&(t==="scale"?Q1e:K1e):e.style&&!bC(e.style[t])?q1e:~t.indexOf("-")?X1e:PC(e,t)},core:{_removeProperty:Vv,_getMatrix:NC}};lo.utils.checkPrefix=R1;lo.core.getStyleSaver=jq;(function(i,e,t,n){var r=Cs(i+","+e+","+t,function(s){Kl[s]=1});Cs(e,function(s){ro.units[s]="deg",qq[s]=1}),Fl[r[13]]=i+","+e,Cs(n,function(s){var o=s.split(":");Fl[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Cs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){ro.units[i]="px"});lo.registerPlugin(Zq);var nu=lo.registerPlugin(Zq)||lo;nu.core.Tween;const cme=Be("div",{id:"cursor"},null,-1),ume=Be("div",{id:"aura"},null,-1),hme={__name:"Cursor",setup(i){let e=()=>{const t=document.querySelector("body");t.addEventListener("mousemove",u=>{u.pageX,u.pageY,h(u),n.classList.remove("hiddenCursor"),r.classList.remove("hiddenCursor")});const n=document.getElementById("cursor"),r=document.getElementById("aura"),s=document.getElementsByTagName("a");document.getElementsByTagName("p"),document.getElementsByTagName("h1");let o=0,a=0,l=0,c=0;function h(u){o=u.pageX,a=u.pageY}nu.to({},.01,{repeat:-1,onRepeat:()=>{l+=(o-l)/5,c+=(a-c)/5,nu.set(n,{css:{left:o,top:a}}),nu.set(r,{css:{left:l-24,top:c-24}})}});for(let u=0;u<s.length;u++)s[u].addEventListener("mouseover",d=>{n.classList.add("active"),r.classList.add("active")}),s[u].addEventListener("mouseout",d=>{n.classList.remove("active"),r.classList.remove("active")});t.addEventListener("mouseout",u=>{n.classList.add("hiddenCursor"),r.classList.add("hiddenCursor")})};return cm(()=>{"ontouchstart"in document.documentElement?(cursor.classList.add("hidden"),aura.classList.add("hidden")):e()}),(t,n)=>(ur(),wr(is,null,[cme,ume],64))}};function AR(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function FC(i={},e={}){Object.keys(e).forEach(t=>{typeof i[t]>"u"?i[t]=e[t]:AR(e[t])&&AR(i[t])&&Object.keys(e[t]).length>0&&FC(i[t],e[t])})}const Qq={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function uc(){const i=typeof document<"u"?document:{};return FC(i,Qq),i}const dme={document:Qq,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function ks(){const i=typeof window<"u"?window:{};return FC(i,dme),i}function fme(i){const e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function w6(i,e=0){return setTimeout(i,e)}function Hv(){return Date.now()}function pme(i){const e=ks();let t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function mme(i,e="x"){const t=ks();let n,r,s;const o=pme(i);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5])),r||0}function ky(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function gme(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function $s(...i){const e=Object(i[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<i.length;n+=1){const r=i[n];if(r!=null&&!gme(r)){const s=Object.keys(Object(r)).filter(o=>t.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(r,l);c!==void 0&&c.enumerable&&(ky(e[l])&&ky(r[l])?r[l].__swiper__?e[l]=r[l]:$s(e[l],r[l]):!ky(e[l])&&ky(r[l])?(e[l]={},r[l].__swiper__?e[l]=r[l]:$s(e[l],r[l])):e[l]=r[l])}}}return e}function By(i,e,t){i.style.setProperty(e,t)}function Kq({swiper:i,targetPosition:e,side:t}){const n=ks(),r=-i.translate;let s=null,o;const a=i.params.speed;i.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(i.cssModeFrameID);const l=e>r?"next":"prev",c=(u,d)=>l==="next"&&u>=d||l==="prev"&&u<=d,h=()=>{o=new Date().getTime(),s===null&&(s=o);const u=Math.max(Math.min((o-s)/a,1),0),d=.5-Math.cos(u*Math.PI)/2;let f=r+d*(e-r);if(c(f,e)&&(f=e),i.wrapperEl.scrollTo({[t]:f}),c(f,e)){i.wrapperEl.style.overflow="hidden",i.wrapperEl.style.scrollSnapType="",setTimeout(()=>{i.wrapperEl.style.overflow="",i.wrapperEl.scrollTo({[t]:f})}),n.cancelAnimationFrame(i.cssModeFrameID);return}i.cssModeFrameID=n.requestAnimationFrame(h)};h()}function Vl(i,e=""){return[...i.children].filter(t=>t.matches(e))}function Vx(i,e=[]){const t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:[e]),t}function vme(i){const e=ks(),t=uc(),n=i.getBoundingClientRect(),r=t.body,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,a=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+a-s,left:n.left+l-o}}function yme(i,e){const t=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function xme(i,e){const t=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function ru(i,e){return ks().getComputedStyle(i,null).getPropertyValue(e)}function Jl(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Jq(i,e){const t=[];let n=i.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function wA(i,e,t){const n=ks();return t?i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):i.offsetWidth}let S_;function _me(){const i=ks(),e=uc();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function eX(){return S_||(S_=_me()),S_}let A_;function bme({userAgent:i}={}){const e=eX(),t=ks(),n=t.navigator.platform,r=i||t.navigator.userAgent,s={ios:!1,android:!1},o=t.screen.width,a=t.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/);let c=r.match(/(iPad).*OS\s([\d_]+)/);const h=r.match(/(iPod)(.*OS\s([\d_]+))?/),u=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d=n==="Win32";let f=n==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&e.touch&&p.indexOf(`${o}x${a}`)>=0&&(c=r.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!d&&(s.os="android",s.android=!0),(c||u||h)&&(s.os="ios",s.ios=!0),s}function wme(i={}){return A_||(A_=bme(i)),A_}let T_;function Sme(){const i=ks();let e=!1;function t(){const n=i.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}if(t()){const n=String(i.navigator.userAgent);if(n.includes("Version/")){const[r,s]=n.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=r<16||r===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent)}}function Ame(){return T_||(T_=Sme()),T_}function Tme({swiper:i,on:e,emit:t}){const n=ks();let r=null,s=null;const o=()=>{!i||i.destroyed||!i.initialized||(t("beforeResize"),t("resize"))},a=()=>{!i||i.destroyed||!i.initialized||(r=new ResizeObserver(h=>{s=n.requestAnimationFrame(()=>{const{width:u,height:d}=i;let f=u,p=d;h.forEach(({contentBoxSize:m,contentRect:y,target:g})=>{g&&g!==i.el||(f=y?y.width:(m[0]||m).inlineSize,p=y?y.height:(m[0]||m).blockSize)}),(f!==u||p!==d)&&o()})}),r.observe(i.el))},l=()=>{s&&n.cancelAnimationFrame(s),r&&r.unobserve&&i.el&&(r.unobserve(i.el),r=null)},c=()=>{!i||i.destroyed||!i.initialized||t("orientationchange")};e("init",()=>{if(i.params.resizeObserver&&typeof n.ResizeObserver<"u"){a();return}n.addEventListener("resize",o),n.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",c)})}function Mme({swiper:i,extendParams:e,on:t,emit:n}){const r=[],s=ks(),o=(c,h={})=>{const u=s.MutationObserver||s.WebkitMutationObserver,d=new u(f=>{if(f.length===1){n("observerUpdate",f[0]);return}const p=function(){n("observerUpdate",f[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});d.observe(c,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),r.push(d)},a=()=>{if(i.params.observer){if(i.params.observeParents){const c=Jq(i.el);for(let h=0;h<c.length;h+=1)o(c[h])}o(i.el,{childList:i.params.observeSlideChildren}),o(i.wrapperEl,{attributes:!1})}},l=()=>{r.forEach(c=>{c.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),t("init",a),t("destroy",l)}const Eme={on(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const r=t?"unshift":"push";return i.split(" ").forEach(s=>{n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][r](e)}),n},once(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function r(...s){n.off(i,r),r.__emitterProxy&&delete r.__emitterProxy,e.apply(n,s)}return r.__emitterProxy=e,n.on(i,r,t)},onAny(i,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[n](i),t},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[n].splice(s,1)})}),t},emit(...i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,r;return typeof i[0]=="string"||Array.isArray(i[0])?(t=i[0],n=i.slice(1,i.length),r=e):(t=i[0].events,n=i[0].data,r=i[0].context||e),n.unshift(r),(Array.isArray(t)?t:t.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(r,[o,...n])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(r,n)})}),e}};function Cme(){const i=this;let e,t;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=n.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(ru(n,"padding-left")||0,10)-parseInt(ru(n,"padding-right")||0,10),t=t-parseInt(ru(n,"padding-top")||0,10)-parseInt(ru(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function Dme(){const i=this;function e(M){return i.isHorizontal()?M:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[M]}function t(M,C){return parseFloat(M.getPropertyValue(e(C))||0)}const n=i.params,{wrapperEl:r,slidesEl:s,size:o,rtlTranslate:a,wrongRTL:l}=i,c=i.virtual&&n.virtual.enabled,h=c?i.virtual.slides.length:i.slides.length,u=Vl(s,`.${i.params.slideClass}, swiper-slide`),d=c?i.virtual.slides.length:u.length;let f=[];const p=[],m=[];let y=n.slidesOffsetBefore;typeof y=="function"&&(y=n.slidesOffsetBefore.call(i));let g=n.slidesOffsetAfter;typeof g=="function"&&(g=n.slidesOffsetAfter.call(i));const v=i.snapGrid.length,x=i.slidesGrid.length;let _=n.spaceBetween,w=-y,b=0,S=0;if(typeof o>"u")return;typeof _=="string"&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),i.virtualSize=-_,u.forEach(M=>{a?M.style.marginLeft="":M.style.marginRight="",M.style.marginBottom="",M.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(By(r,"--swiper-centered-offset-before",""),By(r,"--swiper-centered-offset-after",""));const A=n.grid&&n.grid.rows>1&&i.grid;A&&i.grid.initSlides(d);let E;const T=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(M=>typeof n.breakpoints[M].slidesPerView<"u").length>0;for(let M=0;M<d;M+=1){E=0;let C;if(u[M]&&(C=u[M]),A&&i.grid.updateSlide(M,C,d,e),!(u[M]&&ru(C,"display")==="none")){if(n.slidesPerView==="auto"){T&&(u[M].style[e("width")]="");const D=getComputedStyle(C),P=C.style.transform,I=C.style.webkitTransform;if(P&&(C.style.transform="none"),I&&(C.style.webkitTransform="none"),n.roundLengths)E=i.isHorizontal()?wA(C,"width",!0):wA(C,"height",!0);else{const k=t(D,"width"),G=t(D,"padding-left"),U=t(D,"padding-right"),Z=t(D,"margin-left"),$=t(D,"margin-right"),W=D.getPropertyValue("box-sizing");if(W&&W==="border-box")E=k+Z+$;else{const{clientWidth:X,offsetWidth:j}=C;E=k+G+U+Z+$+(j-X)}}P&&(C.style.transform=P),I&&(C.style.webkitTransform=I),n.roundLengths&&(E=Math.floor(E))}else E=(o-(n.slidesPerView-1)*_)/n.slidesPerView,n.roundLengths&&(E=Math.floor(E)),u[M]&&(u[M].style[e("width")]=`${E}px`);u[M]&&(u[M].swiperSlideSize=E),m.push(E),n.centeredSlides?(w=w+E/2+b/2+_,b===0&&M!==0&&(w=w-o/2-_),M===0&&(w=w-o/2-_),Math.abs(w)<1/1e3&&(w=0),n.roundLengths&&(w=Math.floor(w)),S%n.slidesPerGroup===0&&f.push(w),p.push(w)):(n.roundLengths&&(w=Math.floor(w)),(S-Math.min(i.params.slidesPerGroupSkip,S))%i.params.slidesPerGroup===0&&f.push(w),p.push(w),w=w+E+_),i.virtualSize+=E+_,b=E,S+=1}}if(i.virtualSize=Math.max(i.virtualSize,o)+g,a&&l&&(n.effect==="slide"||n.effect==="coverflow")&&(r.style.width=`${i.virtualSize+n.spaceBetween}px`),n.setWrapperSize&&(r.style[e("width")]=`${i.virtualSize+n.spaceBetween}px`),A&&i.grid.updateWrapperSize(E,f,e),!n.centeredSlides){const M=[];for(let C=0;C<f.length;C+=1){let D=f[C];n.roundLengths&&(D=Math.floor(D)),f[C]<=i.virtualSize-o&&M.push(D)}f=M,Math.floor(i.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(i.virtualSize-o)}if(c&&n.loop){const M=m[0]+_;if(n.slidesPerGroup>1){const C=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/n.slidesPerGroup),D=M*n.slidesPerGroup;for(let P=0;P<C;P+=1)f.push(f[f.length-1]+D)}for(let C=0;C<i.virtual.slidesBefore+i.virtual.slidesAfter;C+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+M),p.push(p[p.length-1]+M),i.virtualSize+=M}if(f.length===0&&(f=[0]),n.spaceBetween!==0){const M=i.isHorizontal()&&a?"marginLeft":e("marginRight");u.filter((C,D)=>!n.cssMode||n.loop?!0:D!==u.length-1).forEach(C=>{C.style[M]=`${_}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let M=0;m.forEach(D=>{M+=D+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween;const C=M-o;f=f.map(D=>D<0?-y:D>C?C+g:D)}if(n.centerInsufficientSlides){let M=0;if(m.forEach(C=>{M+=C+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween,M<o){const C=(o-M)/2;f.forEach((D,P)=>{f[P]=D-C}),p.forEach((D,P)=>{p[P]=D+C})}}if(Object.assign(i,{slides:u,snapGrid:f,slidesGrid:p,slidesSizesGrid:m}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){By(r,"--swiper-centered-offset-before",`${-f[0]}px`),By(r,"--swiper-centered-offset-after",`${i.size/2-m[m.length-1]/2}px`);const M=-i.snapGrid[0],C=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(D=>D+M),i.slidesGrid=i.slidesGrid.map(D=>D+C)}if(d!==h&&i.emit("slidesLengthChange"),f.length!==v&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),p.length!==x&&i.emit("slidesGridLengthChange"),n.watchSlidesProgress&&i.updateSlidesOffset(),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const M=`${n.containerModifierClass}backface-hidden`,C=i.el.classList.contains(M);d<=n.maxBackfaceHiddenSlides?C||i.el.classList.add(M):C&&i.el.classList.remove(M)}}function Pme(i){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const o=a=>n?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!n)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function Lme(){const i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(i.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t}function Ime(i=this&&this.translate||0){const e=this,t=e.params,{slides:n,rtlTranslate:r,snapGrid:s}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-i;r&&(o=i),n.forEach(a=>{a.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<n.length;a+=1){const l=n[a];let c=l.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=n[0].swiperSlideOffset);const h=(o+(t.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+t.spaceBetween),u=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+t.spaceBetween),d=-(o-c),f=d+e.slidesSizesGrid[a];(d>=0&&d<e.size-1||f>1&&f<=e.size||d<=0&&f>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),n[a].classList.add(t.slideVisibleClass)),l.progress=r?-h:h,l.originalProgress=r?-u:u}}function Ome(i){const e=this;if(typeof i>"u"){const h=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*h||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(n===0)r=0,s=!0,o=!0;else{r=(i-e.minTranslate())/n;const h=Math.abs(i-e.minTranslate())<1,u=Math.abs(i-e.maxTranslate())<1;s=h||r<=0,o=u||r>=1,h&&(r=0),u&&(r=1)}if(t.loop){const h=Jl(e.slides.filter(y=>y.getAttribute("data-swiper-slide-index")==="0")[0]),u=Jl(e.slides.filter(y=>y.getAttribute("data-swiper-slide-index")*1===e.slides.length-1)[0]),d=e.slidesGrid[h],f=e.slidesGrid[u],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(i);m>=d?a=(m-d)/p:a=(m+p-f)/p,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}function Rme(){const i=this,{slides:e,params:t,slidesEl:n,activeIndex:r}=i,s=i.virtual&&t.virtual.enabled,o=l=>Vl(n,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let a;if(s)if(t.loop){let l=r-i.virtual.slidesBefore;l<0&&(l=i.virtual.slides.length+l),l>=i.virtual.slides.length&&(l-=i.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${r}"]`);else a=e[r];if(a){a.classList.add(t.slideActiveClass);let l=xme(a,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=yme(a,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}i.emitSlidesClasses()}function Nme(i){const{slidesGrid:e,params:t}=i,n=i.rtlTranslate?i.translate:-i.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?n>=e[s]&&n<e[s+1]-(e[s+1]-e[s])/2?r=s:n>=e[s]&&n<e[s+1]&&(r=s+1):n>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function Fme(i){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=i,c;const h=d=>{let f=d-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=Nme(e)),n.indexOf(t)>=0)c=n.indexOf(t);else{const d=Math.min(r.slidesPerGroupSkip,l);c=d+Math.floor((l-d)/r.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),l===s){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=h(l));return}let u;e.virtual&&r.virtual.enabled&&r.loop?u=h(l):e.slides[l]?u=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):u=l,Object.assign(e,{snapIndex:c,realIndex:u,previousIndex:s,activeIndex:l}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==u&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function zme(i){const e=this,t=e.params,n=i.closest(`.${t.slideClass}, swiper-slide`);let r=!1,s;if(n){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===n){r=!0,s=o;break}}if(n&&r)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}t.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const kme={updateSize:Cme,updateSlides:Dme,updateAutoHeight:Pme,updateSlidesOffset:Lme,updateSlidesProgress:Ime,updateProgress:Ome,updateSlidesClasses:Rme,updateActiveIndex:Fme,updateClickedSlide:zme};function Bme(i=this.isHorizontal()?"x":"y"){const e=this,{params:t,rtlTranslate:n,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=mme(s,i);return n&&(o=-o),o||0}function Ume(i,e){const t=this,{rtlTranslate:n,params:r,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=n?-i:i:l=i,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l;let h;const u=t.maxTranslate()-t.minTranslate();u===0?h=0:h=(i-t.minTranslate())/u,h!==o&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function Vme(){return-this.snapGrid[0]}function Gme(){return-this.snapGrid[this.snapGrid.length-1]}function jme(i=0,e=this.params.speed,t=!0,n=!0,r){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let h;if(n&&i>l?h=l:n&&i<c?h=c:h=i,s.updateProgress(h),o.cssMode){const u=s.isHorizontal();if(e===0)a[u?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return Kq({swiper:s,targetPosition:-h,side:u?"left":"top"}),!0;a.scrollTo({[u?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(d){!s||s.destroyed||d.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const Hme={getTranslate:Bme,setTranslate:Ume,minTranslate:Vme,maxTranslate:Gme,translateTo:jme};function Wme(i,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`),t.emit("setTransition",i,e)}function tX({swiper:i,runCallbacks:e,direction:t,step:n}){const{activeIndex:r,previousIndex:s}=i;let o=t;if(o||(r>s?o="next":r<s?o="prev":o="reset"),i.emit(`transition${n}`),e&&r!==s){if(o==="reset"){i.emit(`slideResetTransition${n}`);return}i.emit(`slideChangeTransition${n}`),o==="next"?i.emit(`slideNextTransition${n}`):i.emit(`slidePrevTransition${n}`)}}function $me(i=!0,e){const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),tX({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function qme(i=!0,e){const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),tX({swiper:t,runCallbacks:i,direction:e,step:"End"}))}const Xme={setTransition:Wme,transitionStart:$me,transitionEnd:qme};function Yme(i=0,e=this.params.speed,t=!0,n,r){typeof i=="string"&&(i=parseInt(i,10));const s=this;let o=i;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:f,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!n&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,o);let y=m+Math.floor((o-m)/s.params.slidesPerGroup);y>=l.length&&(y=l.length-1);const g=-l[y];if(a.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const _=-Math.floor(g*100),w=Math.floor(c[x]*100),b=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?_>=w&&_<b-(b-w)/2?o=x:_>=w&&_<b&&(o=x+1):_>=w&&(o=x)}if(s.initialized&&o!==u&&(!s.allowSlideNext&&g<s.translate&&g<s.minTranslate()||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(u||0)!==o))return!1;o!==(h||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let v;if(o>u?v="next":o<u?v="prev":v="reset",d&&-g===s.translate||!d&&g===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(g),v!=="reset"&&(s.transitionStart(t,v),s.transitionEnd(t,v)),!1;if(a.cssMode){const x=s.isHorizontal(),_=d?g:-g;if(e===0){const w=s.virtual&&s.params.virtual.enabled;w&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[x?"scrollLeft":"scrollTop"]=_})):f[x?"scrollLeft":"scrollTop"]=_,w&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return Kq({swiper:s,targetPosition:_,side:x?"left":"top"}),!0;f.scrollTo({[x?"left":"top"]:_,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,n),s.transitionStart(t,v),e===0?s.transitionEnd(t,v):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(_){!s||s.destroyed||_.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,v))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Zme(i=0,e=this.params.speed,t=!0,n){typeof i=="string"&&(i=parseInt(i,10));const r=this;let s=i;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?s=s+r.virtual.slidesBefore:s=Jl(r.slides.filter(o=>o.getAttribute("data-swiper-slide-index")*1===s)[0])),r.slideTo(s,e,t,n)}function Qme(i=this.params.speed,e=!0,t){const n=this,{enabled:r,params:s,animating:o}=n;if(!r)return n;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<s.slidesPerGroupSkip?1:a,c=n.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft}return s.rewind&&n.isEnd?n.slideTo(0,i,e,t):n.slideTo(n.activeIndex+l,i,e,t)}function Kme(i=this.params.speed,e=!0,t){const n=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=n;if(!l)return n;const h=n.virtual&&r.virtual.enabled;if(r.loop){if(c&&!h&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const u=a?n.translate:-n.translate;function d(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const f=d(u),p=s.map(g=>d(g));let m=s[p.indexOf(f)-1];if(typeof m>"u"&&r.cssMode){let g;s.forEach((v,x)=>{f>=v&&(g=x)}),typeof g<"u"&&(m=s[g>0?g-1:g])}let y=0;if(typeof m<"u"&&(y=o.indexOf(m),y<0&&(y=n.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(y=y-n.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),r.rewind&&n.isBeginning){const g=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(g,i,e,t)}return n.slideTo(y,i,e,t)}function Jme(i=this.params.speed,e=!0,t){const n=this;return n.slideTo(n.activeIndex,i,e,t)}function ege(i=this.params.speed,e=!0,t,n=.5){const r=this;let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],h=r.snapGrid[a+1];l-c>(h-c)*n&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],h=r.snapGrid[a];l-c<=(h-c)*n&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,i,e,t)}function tge(){const i=this,{params:e,slidesEl:t}=i,n=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let r=i.clickedIndex,s;const o=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;s=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<i.loopedSlides-n/2||r>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),r=Jl(Vl(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),w6(()=>{i.slideTo(r)})):i.slideTo(r):r>i.slides.length-n?(i.loopFix(),r=Jl(Vl(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),w6(()=>{i.slideTo(r)})):i.slideTo(r)}else i.slideTo(r)}const ige={slideTo:Yme,slideToLoop:Zme,slideNext:Qme,slidePrev:Kme,slideReset:Jme,slideToClosest:ege,slideToClickedSlide:tge};function nge(i){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;Vl(n,`.${t.slideClass}, swiper-slide`).forEach((s,o)=>{s.setAttribute("data-swiper-slide-index",o)}),e.loopFix({slideRealIndex:i,direction:t.centeredSlides?void 0:"next"})}function rge({slideRealIndex:i,slideTo:e=!0,direction:t,setTranslate:n,activeSlideIndex:r,byController:s,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:h,slidesEl:u,params:d}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&d.virtual.enabled){e&&(!d.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):d.centeredSlides&&a.snapIndex<d.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=h,a.emit("loopFix");return}const f=d.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(d.slidesPerView,10));let p=d.loopedSlides||f;p%d.slidesPerGroup!==0&&(p+=d.slidesPerGroup-p%d.slidesPerGroup),a.loopedSlides=p;const m=[],y=[];let g=a.activeIndex;typeof r>"u"?r=Jl(a.slides.filter(b=>b.classList.contains("swiper-slide-active"))[0]):g=r;const v=t==="next"||!t,x=t==="prev"||!t;let _=0,w=0;if(r<p){_=p-r;for(let b=0;b<p-r;b+=1){const S=b-Math.floor(b/l.length)*l.length;m.push(l.length-S-1)}}else if(r>a.slides.length-p*2){w=r-(a.slides.length-p*2);for(let b=0;b<w;b+=1){const S=b-Math.floor(b/l.length)*l.length;y.push(S)}}if(x&&m.forEach(b=>{u.prepend(a.slides[b])}),v&&y.forEach(b=>{u.append(a.slides[b])}),a.recalcSlides(),d.watchSlidesProgress&&a.updateSlidesOffset(),e){if(m.length>0&&x)if(typeof i>"u"){const b=a.slidesGrid[g],A=a.slidesGrid[g+_]-b;o?a.setTranslate(a.translate-A):(a.slideTo(g+_,0,!1,!0),n&&(a.touches[a.isHorizontal()?"startX":"startY"]+=A))}else n&&a.slideToLoop(i,0,!1,!0);else if(y.length>0&&v)if(typeof i>"u"){const b=a.slidesGrid[g],A=a.slidesGrid[g-w]-b;o?a.setTranslate(a.translate-A):(a.slideTo(g-w,0,!1,!0),n&&(a.touches[a.isHorizontal()?"startX":"startY"]+=A))}else a.slideToLoop(i,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=h,a.controller&&a.controller.control&&!s){const b={slideRealIndex:i,slideTo:!1,direction:t,setTranslate:n,activeSlideIndex:r,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(S=>{S.params.loop&&S.loopFix(b)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(b)}a.emit("loopFix")}function sge(){const i=this,{slides:e,params:t,slidesEl:n}=i;if(!t.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const r=[];e.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[o]=s}),e.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{n.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}const oge={loopCreate:nge,loopFix:rge,loopDestroy:sge};function age(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;t.style.cursor="move",t.style.cursor=i?"grabbing":"grab"}function lge(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const cge={setGrabCursor:age,unsetGrabCursor:lge};function uge(i,e=this){function t(n){if(!n||n===uc()||n===ks())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(i);return!r&&!n.getRootNode?null:r||t(n.getRootNode().host)}return t(e)}function hge(i){const e=this,t=uc(),n=ks(),r=e.touchEventsData;r.evCache.push(i);const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const h=!!s.noSwipingClass&&s.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;h&&l.target&&l.target.shadowRoot&&u&&(c=u[0]);const d=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?uge(d,c):c.closest(d))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const p=o.currentX,m=o.currentY,y=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,g=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(y&&(p<=g||p>=n.innerWidth-g))if(y==="prevent")i.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=m,r.touchStartTime=Hv(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let v=!0;c.matches(r.focusableElements)&&(v=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const x=v&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!c.isContentEditable&&l.preventDefault(),e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function dge(i){const e=uc(),t=this,n=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=n.evCache.findIndex(b=>b.pointerId===l.pointerId);c>=0&&(n.evCache[c]=l);const h=n.evCache.length>1?n.evCache[0]:l,u=h.pageX,d=h.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=d;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(s,{startX:u,startY:d,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:u,currentY:d}),n.touchStartTime=Hv());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(d<s.startY&&t.translate<=t.maxTranslate()||d>s.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(u<s.startX&&t.translate<=t.maxTranslate()||u>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}if(n.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=u,s.currentY=d;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let b;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?n.isScrolling=!1:f*f+p*p>=25&&(b=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,n.isScrolling=t.isHorizontal()?b>r.touchAngle:90-b>r.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(n.startMoving=!0),n.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&n.evCache.length>1){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?f:p,y=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(o?1:-1),y=Math.abs(y)*(o?1:-1)),s.diff=m,m*=r.touchRatio,o&&(m=-m,y=-y);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=y>0?"prev":"next";const v=t.params.loop&&!r.cssMode;if(!n.isMoved){if(v&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const b=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(b)}n.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let x;n.isMoved&&g!==t.touchesDirection&&v&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),x=!0),t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=m+n.startTranslate;let _=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),m>0?(v&&!x&&n.currentTranslate>(r.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(_=!1,r.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+m)**w))):m<0&&(v&&!x&&n.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(_=!1,r.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-m)**w))),_&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,n.currentTranslate=n.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{n.currentTranslate=n.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),t.params.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function fge(i){const e=this,t=e.touchEventsData,n=t.evCache.findIndex(x=>x.pointerId===i.pointerId);if(n>=0&&t.evCache.splice(n,1),["pointercancel","pointerout","pointerleave"].includes(i.type))return;const{params:r,touches:s,rtlTranslate:o,slidesGrid:a,enabled:l}=e;if(!l||!r.simulateTouch&&i.pointerType==="mouse")return;let c=i;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&r.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}r.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Hv(),u=h-t.touchStartTime;if(e.allowClick){const x=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(x&&x[0]||c.target),e.emit("tap click",c),u<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=Hv(),w6(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let d;if(r.followFinger?d=o?e.translate:-e.translate:d=-t.currentTranslate,r.cssMode)return;if(e.params.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}let f=0,p=e.slidesSizesGrid[0];for(let x=0;x<a.length;x+=x<r.slidesPerGroupSkip?1:r.slidesPerGroup){const _=x<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof a[x+_]<"u"?d>=a[x]&&d<a[x+_]&&(f=x,p=a[x+_]-a[x]):d>=a[x]&&(f=x,p=a[a.length-1]-a[a.length-2])}let m=null,y=null;r.rewind&&(e.isBeginning?y=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const g=(d-a[f])/p,v=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(u>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(g>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?m:f+v):e.slideTo(f)),e.swipeDirection==="prev"&&(g>1-r.longSwipesRatio?e.slideTo(f+v):y!==null&&g<0&&Math.abs(g)>r.longSwipesRatio?e.slideTo(y):e.slideTo(f))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+v):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:f+v),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:f))}}let TR;function MR(){const i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:r,snapGrid:s}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(TR),TR=setTimeout(()=>{i.autoplay.resume()},500)),i.allowSlidePrev=r,i.allowSlideNext=n,i.params.watchOverflow&&s!==i.snapGrid&&i.checkOverflow()}function pge(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function mge(){const i=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let r;const s=i.maxTranslate()-i.minTranslate();s===0?r=0:r=(i.translate-i.minTranslate())/s,r!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}const v5=(i,e)=>{if(!i||i.destroyed||!i.params)return;const t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=e.closest(t());if(n){const r=n.querySelector(`.${i.params.lazyPreloaderClass}`);r&&r.remove()}};function gge(i){const e=this;v5(e,i.target),e.update()}let ER=!1;function vge(){}const iX=(i,e)=>{const t=uc(),{params:n,el:r,wrapperEl:s,device:o}=i,a=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;r[l]("pointerdown",i.onTouchStart,{passive:!1}),t[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),t[l]("pointerup",i.onTouchEnd,{passive:!0}),t[l]("pointercancel",i.onTouchEnd,{passive:!0}),t[l]("pointerout",i.onTouchEnd,{passive:!0}),t[l]("pointerleave",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&r[l]("click",i.onClick,!0),n.cssMode&&s[l]("scroll",i.onScroll),n.updateOnWindowResize?i[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",MR,!0):i[c]("observerUpdate",MR,!0),r[l]("load",i.onLoad,{capture:!0})};function yge(){const i=this,e=uc(),{params:t}=i;i.onTouchStart=hge.bind(i),i.onTouchMove=dge.bind(i),i.onTouchEnd=fge.bind(i),t.cssMode&&(i.onScroll=mge.bind(i)),i.onClick=pge.bind(i),i.onLoad=gge.bind(i),ER||(e.addEventListener("touchstart",vge),ER=!0),iX(i,"on")}function xge(){iX(this,"off")}const _ge={attachEvents:yge,detachEvents:xge},CR=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function bge(){const i=this,{realIndex:e,initialized:t,params:n,el:r}=i,s=n.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=i.getBreakpoint(s,i.params.breakpointsBase,i.el);if(!o||i.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||i.originalParams,c=CR(i,n),h=CR(i,l),u=n.enabled;c&&!h?(r.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!c&&h&&(r.classList.add(`${n.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&n.grid.fill==="column")&&r.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{const y=n[m]&&n[m].enabled,g=l[m]&&l[m].enabled;y&&!g&&i[m].disable(),!y&&g&&i[m].enable()});const d=l.direction&&l.direction!==n.direction,f=n.loop&&(l.slidesPerView!==n.slidesPerView||d);d&&t&&i.changeDirection(),$s(i.params,l);const p=i.params.enabled;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),u&&!p?i.disable():!u&&p&&i.enable(),i.currentBreakpoint=o,i.emit("_beforeBreakpoint",l),f&&t&&(i.loopDestroy(),i.loopCreate(e),i.updateSlides()),i.emit("breakpoint",l)}function wge(i,e="window",t){if(!i||e==="container"&&!t)return;let n=!1;const r=ks(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=t.clientWidth&&(n=l)}return n||"max"}const Sge={setBreakpoint:bge,getBreakpoint:wge};function Age(i,e){const t=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(r=>{n[r]&&t.push(e+r)}):typeof n=="string"&&t.push(e+n)}),t}function Tge(){const i=this,{classNames:e,params:t,rtl:n,el:r,device:s}=i,o=Age(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),i.emitContainerClasses()}function Mge(){const i=this,{el:e,classNames:t}=i;e.classList.remove(...t),i.emitContainerClasses()}const Ege={addClasses:Tge,removeClasses:Mge};function Cge(){const i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:n}=t;if(n){const r=i.slides.length-1,s=i.slidesGrid[r]+i.slidesSizesGrid[r]+n*2;i.isLocked=i.size>s}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}const Dge={checkOverflow:Cge},DR={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function Pge(i,e){return function(n={}){const r=Object.keys(n)[0],s=n[r];if(typeof s!="object"||s===null){$s(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&i[r]===!0&&(i[r]={auto:!0}),!(r in i&&"enabled"in s)){$s(e,n);return}i[r]===!0&&(i[r]={enabled:!0}),typeof i[r]=="object"&&!("enabled"in i[r])&&(i[r].enabled=!0),i[r]||(i[r]={enabled:!1}),$s(e,n)}}const M_={eventsEmitter:Eme,update:kme,translate:Hme,transition:Xme,slide:ige,loop:oge,grabCursor:cge,events:_ge,breakpoints:Sge,checkOverflow:Dge,classes:Ege},E_={};class ga{constructor(...e){let t,n;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?n=e[0]:[t,n]=e,n||(n={}),n=$s({},n),t&&!n.el&&(n.el=t);const r=uc();if(n.el&&typeof n.el=="string"&&r.querySelectorAll(n.el).length>1){const l=[];return r.querySelectorAll(n.el).forEach(c=>{const h=$s({},n,{el:c});l.push(new ga(h))}),l}const s=this;s.__swiper__=!0,s.support=eX(),s.device=wme({userAgent:n.userAgent}),s.browser=Ame(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],n.modules&&Array.isArray(n.modules)&&s.modules.push(...n.modules);const o={};s.modules.forEach(l=>{l({params:n,swiper:s,extendParams:Pge(n,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const a=$s({},DR,o);return s.params=$s({},a,E_,n),s.originalParams=$s({},s.params),s.passedParams=$s({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:Hv(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=Vl(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),o=(n.maxTranslate()-r)*e+r;n.translateTo(o,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const n=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=n;let h=1;if(r.centeredSlides){let u=s[c].swiperSlideSize,d;for(let f=c+1;f<s.length;f+=1)s[f]&&!d&&(u+=s[f].swiperSlideSize,h+=1,u>l&&(d=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!d&&(u+=s[f].swiperSlideSize,h+=1,u>l&&(d=!0))}else if(e==="current")for(let u=c+1;u<s.length;u+=1)(t?o[u]+a[u]-o[c]<l:o[u]-o[c]<l)&&(h+=1);else for(let u=c-1;u>=0;u-=1)o[c]-o[u]<l&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&v5(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,r=n.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${r}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.shadowEl&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(r()):Vl(n,r())[0])();return!o&&t.params.createElements&&(o=Vx("div",t.params.wrapperClass),n.append(o),Vl(n,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:n,wrapperEl:o,slidesEl:t.isElement?n:o,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||ru(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||ru(n,"direction")==="rtl"),wrongRTL:ru(o,"display")==="-webkit-box"}),!0}init(e){const t=this;return t.initialized||t.mount(e)===!1||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(r=>{r.complete?v5(t,r):r.addEventListener("load",s=>{v5(t,s.target)})}),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:r,el:s,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el.swiper=null,fme(n)),n.destroyed=!0),null}static extendDefaults(e){$s(E_,e)}static get extendedDefaults(){return E_}static get defaults(){return DR}static installModule(e){ga.prototype.__modules__||(ga.prototype.__modules__=[]);const t=ga.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>ga.installModule(t)),ga):(ga.installModule(e),ga)}}Object.keys(M_).forEach(i=>{Object.keys(M_[i]).forEach(e=>{ga.prototype[e]=M_[i][e]})});ga.use([Tme,Mme]);function zC(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Vl(i.el,`.${n[r]}`)[0];s||(s=Vx("div",n[r]),s.className=n[r],i.el.append(s)),t[r]=s,e[r]=s}}),t}function Lge({swiper:i,extendParams:e,on:t,emit:n}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),i.navigation={nextEl:null,prevEl:null};const r=p=>(Array.isArray(p)||(p=[p].filter(m=>!!m)),p);function s(p){let m;return p&&typeof p=="string"&&i.isElement&&(m=i.el.shadowRoot.querySelector(p),m)?m:(p&&(typeof p=="string"&&(m=[...document.querySelectorAll(p)]),i.params.uniqueNavElements&&typeof p=="string"&&m.length>1&&i.el.querySelectorAll(p).length===1&&(m=i.el.querySelector(p))),p&&!m?p:m)}function o(p,m){const y=i.params.navigation;p=r(p),p.forEach(g=>{g&&(g.classList[m?"add":"remove"](...y.disabledClass.split(" ")),g.tagName==="BUTTON"&&(g.disabled=m),i.params.watchOverflow&&i.enabled&&g.classList[i.isLocked?"add":"remove"](y.lockClass))})}function a(){const{nextEl:p,prevEl:m}=i.navigation;if(i.params.loop){o(m,!1),o(p,!1);return}o(m,i.isBeginning&&!i.params.rewind),o(p,i.isEnd&&!i.params.rewind)}function l(p){p.preventDefault(),!(i.isBeginning&&!i.params.loop&&!i.params.rewind)&&(i.slidePrev(),n("navigationPrev"))}function c(p){p.preventDefault(),!(i.isEnd&&!i.params.loop&&!i.params.rewind)&&(i.slideNext(),n("navigationNext"))}function h(){const p=i.params.navigation;if(i.params.navigation=zC(i,i.originalParams.navigation,i.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let m=s(p.nextEl),y=s(p.prevEl);Object.assign(i.navigation,{nextEl:m,prevEl:y}),m=r(m),y=r(y);const g=(v,x)=>{v&&v.addEventListener("click",x==="next"?c:l),!i.enabled&&v&&v.classList.add(...p.lockClass.split(" "))};m.forEach(v=>g(v,"next")),y.forEach(v=>g(v,"prev"))}function u(){let{nextEl:p,prevEl:m}=i.navigation;p=r(p),m=r(m);const y=(g,v)=>{g.removeEventListener("click",v==="next"?c:l),g.classList.remove(...i.params.navigation.disabledClass.split(" "))};p.forEach(g=>y(g,"next")),m.forEach(g=>y(g,"prev"))}t("init",()=>{i.params.navigation.enabled===!1?f():(h(),a())}),t("toEdge fromEdge lock unlock",()=>{a()}),t("destroy",()=>{u()}),t("enable disable",()=>{let{nextEl:p,prevEl:m}=i.navigation;p=r(p),m=r(m),[...p,...m].filter(y=>!!y).forEach(y=>y.classList[i.enabled?"remove":"add"](i.params.navigation.lockClass))}),t("click",(p,m)=>{let{nextEl:y,prevEl:g}=i.navigation;y=r(y),g=r(g);const v=m.target;if(i.params.navigation.hideOnClick&&!g.includes(v)&&!y.includes(v)){if(i.pagination&&i.params.pagination&&i.params.pagination.clickable&&(i.pagination.el===v||i.pagination.el.contains(v)))return;let x;y.length?x=y[0].classList.contains(i.params.navigation.hiddenClass):g.length&&(x=g[0].classList.contains(i.params.navigation.hiddenClass)),n(x===!0?"navigationShow":"navigationHide"),[...y,...g].filter(_=>!!_).forEach(_=>_.classList.toggle(i.params.navigation.hiddenClass))}});const d=()=>{i.el.classList.remove(...i.params.navigation.navigationDisabledClass.split(" ")),h(),a()},f=()=>{i.el.classList.add(...i.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(i.navigation,{enable:d,disable:f,update:a,init:h,destroy:u})}function Zh(i=""){return`.${i.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Ige({swiper:i,extendParams:e,on:t,emit:n}){const r="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:g=>g,formatFractionTotal:g=>g,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),i.pagination={el:null,bullets:[]};let s,o=0;const a=g=>(Array.isArray(g)||(g=[g].filter(v=>!!v)),g);function l(){return!i.params.pagination.el||!i.pagination.el||Array.isArray(i.pagination.el)&&i.pagination.el.length===0}function c(g,v){const{bulletActiveClass:x}=i.params.pagination;g&&(g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&(g.classList.add(`${x}-${v}`),g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&g.classList.add(`${x}-${v}-${v}`)))}function h(g){const v=g.target.closest(Zh(i.params.pagination.bulletClass));if(!v)return;g.preventDefault();const x=Jl(v)*i.params.slidesPerGroup;i.params.loop?i.slideToLoop(x):i.slideTo(x)}function u(){const g=i.rtl,v=i.params.pagination;if(l())return;let x=i.pagination.el;x=a(x);let _;const w=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length,b=i.params.loop?Math.ceil(w/i.params.slidesPerGroup):i.snapGrid.length;if(i.params.loop?_=i.params.slidesPerGroup>1?Math.floor(i.realIndex/i.params.slidesPerGroup):i.realIndex:typeof i.snapIndex<"u"?_=i.snapIndex:_=i.activeIndex||0,v.type==="bullets"&&i.pagination.bullets&&i.pagination.bullets.length>0){const S=i.pagination.bullets;let A,E,T;if(v.dynamicBullets&&(s=wA(S[0],i.isHorizontal()?"width":"height",!0),x.forEach(M=>{M.style[i.isHorizontal()?"width":"height"]=`${s*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&i.previousIndex!==void 0&&(o+=_-(i.previousIndex||0),o>v.dynamicMainBullets-1?o=v.dynamicMainBullets-1:o<0&&(o=0)),A=Math.max(_-o,0),E=A+(Math.min(S.length,v.dynamicMainBullets)-1),T=(E+A)/2),S.forEach(M=>{M.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(C=>`${v.bulletActiveClass}${C}`))}),x.length>1)S.forEach(M=>{const C=Jl(M);C===_&&M.classList.add(v.bulletActiveClass),v.dynamicBullets&&(C>=A&&C<=E&&M.classList.add(`${v.bulletActiveClass}-main`),C===A&&c(M,"prev"),C===E&&c(M,"next"))});else{const M=S[_];if(M&&M.classList.add(v.bulletActiveClass),v.dynamicBullets){const C=S[A],D=S[E];for(let P=A;P<=E;P+=1)S[P].classList.add(`${v.bulletActiveClass}-main`);c(C,"prev"),c(D,"next")}}if(v.dynamicBullets){const M=Math.min(S.length,v.dynamicMainBullets+4),C=(s*M-s)/2-T*s,D=g?"right":"left";S.forEach(P=>{P.style[i.isHorizontal()?D:"top"]=`${C}px`})}}x.forEach((S,A)=>{if(v.type==="fraction"&&(S.querySelectorAll(Zh(v.currentClass)).forEach(E=>{E.textContent=v.formatFractionCurrent(_+1)}),S.querySelectorAll(Zh(v.totalClass)).forEach(E=>{E.textContent=v.formatFractionTotal(b)})),v.type==="progressbar"){let E;v.progressbarOpposite?E=i.isHorizontal()?"vertical":"horizontal":E=i.isHorizontal()?"horizontal":"vertical";const T=(_+1)/b;let M=1,C=1;E==="horizontal"?M=T:C=T,S.querySelectorAll(Zh(v.progressbarFillClass)).forEach(D=>{D.style.transform=`translate3d(0,0,0) scaleX(${M}) scaleY(${C})`,D.style.transitionDuration=`${i.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(S.innerHTML=v.renderCustom(i,_+1,b),A===0&&n("paginationRender",S)):(A===0&&n("paginationRender",S),n("paginationUpdate",S)),i.params.watchOverflow&&i.enabled&&S.classList[i.isLocked?"add":"remove"](v.lockClass)})}function d(){const g=i.params.pagination;if(l())return;const v=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length;let x=i.pagination.el;x=a(x);let _="";if(g.type==="bullets"){let w=i.params.loop?Math.ceil(v/i.params.slidesPerGroup):i.snapGrid.length;i.params.freeMode&&i.params.freeMode.enabled&&w>v&&(w=v);for(let b=0;b<w;b+=1)g.renderBullet?_+=g.renderBullet.call(i,b,g.bulletClass):_+=`<${g.bulletElement} class="${g.bulletClass}"></${g.bulletElement}>`}g.type==="fraction"&&(g.renderFraction?_=g.renderFraction.call(i,g.currentClass,g.totalClass):_=`<span class="${g.currentClass}"></span> / <span class="${g.totalClass}"></span>`),g.type==="progressbar"&&(g.renderProgressbar?_=g.renderProgressbar.call(i,g.progressbarFillClass):_=`<span class="${g.progressbarFillClass}"></span>`),x.forEach(w=>{g.type!=="custom"&&(w.innerHTML=_||""),g.type==="bullets"&&(i.pagination.bullets=[...w.querySelectorAll(Zh(g.bulletClass))])}),g.type!=="custom"&&n("paginationRender",x[0])}function f(){i.params.pagination=zC(i,i.originalParams.pagination,i.params.pagination,{el:"swiper-pagination"});const g=i.params.pagination;if(!g.el)return;let v;typeof g.el=="string"&&i.isElement&&(v=i.el.shadowRoot.querySelector(g.el)),!v&&typeof g.el=="string"&&(v=[...document.querySelectorAll(g.el)]),v||(v=g.el),!(!v||v.length===0)&&(i.params.uniqueNavElements&&typeof g.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...i.el.querySelectorAll(g.el)],v.length>1&&(v=v.filter(x=>Jq(x,".swiper")[0]===i.el)[0])),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(i.pagination,{el:v}),v=a(v),v.forEach(x=>{g.type==="bullets"&&g.clickable&&x.classList.add(g.clickableClass),x.classList.add(g.modifierClass+g.type),x.classList.add(i.isHorizontal()?g.horizontalClass:g.verticalClass),g.type==="bullets"&&g.dynamicBullets&&(x.classList.add(`${g.modifierClass}${g.type}-dynamic`),o=0,g.dynamicMainBullets<1&&(g.dynamicMainBullets=1)),g.type==="progressbar"&&g.progressbarOpposite&&x.classList.add(g.progressbarOppositeClass),g.clickable&&x.addEventListener("click",h),i.enabled||x.classList.add(g.lockClass)}))}function p(){const g=i.params.pagination;if(l())return;let v=i.pagination.el;v&&(v=a(v),v.forEach(x=>{x.classList.remove(g.hiddenClass),x.classList.remove(g.modifierClass+g.type),x.classList.remove(i.isHorizontal()?g.horizontalClass:g.verticalClass),g.clickable&&x.removeEventListener("click",h)})),i.pagination.bullets&&i.pagination.bullets.forEach(x=>x.classList.remove(g.bulletActiveClass))}t("init",()=>{i.params.pagination.enabled===!1?y():(f(),d(),u())}),t("activeIndexChange",()=>{typeof i.snapIndex>"u"&&u()}),t("snapIndexChange",()=>{u()}),t("snapGridLengthChange",()=>{d(),u()}),t("destroy",()=>{p()}),t("enable disable",()=>{let{el:g}=i.pagination;g&&(g=a(g),g.forEach(v=>v.classList[i.enabled?"remove":"add"](i.params.pagination.lockClass)))}),t("lock unlock",()=>{u()}),t("click",(g,v)=>{const x=v.target;let{el:_}=i.pagination;if(Array.isArray(_)||(_=[_].filter(w=>!!w)),i.params.pagination.el&&i.params.pagination.hideOnClick&&_&&_.length>0&&!x.classList.contains(i.params.pagination.bulletClass)){if(i.navigation&&(i.navigation.nextEl&&x===i.navigation.nextEl||i.navigation.prevEl&&x===i.navigation.prevEl))return;const w=_[0].classList.contains(i.params.pagination.hiddenClass);n(w===!0?"paginationShow":"paginationHide"),_.forEach(b=>b.classList.toggle(i.params.pagination.hiddenClass))}});const m=()=>{i.el.classList.remove(i.params.pagination.paginationDisabledClass);let{el:g}=i.pagination;g&&(g=a(g),g.forEach(v=>v.classList.remove(i.params.pagination.paginationDisabledClass))),f(),d(),u()},y=()=>{i.el.classList.add(i.params.pagination.paginationDisabledClass);let{el:g}=i.pagination;g&&(g=a(g),g.forEach(v=>v.classList.add(i.params.pagination.paginationDisabledClass))),p()};Object.assign(i.pagination,{enable:m,disable:y,render:d,update:u,init:f,destroy:p})}function Oge({swiper:i,extendParams:e,on:t,emit:n}){const r=uc();let s=!1,o=null,a=null,l,c,h,u;e({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),i.scrollbar={el:null,dragEl:null};function d(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:M,rtlTranslate:C}=i,{dragEl:D,el:P}=M,I=i.params.scrollbar,k=i.params.loop?i.progressLoop:i.progress;let G=c,U=(h-c)*k;C?(U=-U,U>0?(G=c-U,U=0):-U+c>h&&(G=h+U)):U<0?(G=c+U,U=0):U+c>h&&(G=h-U),i.isHorizontal()?(D.style.transform=`translate3d(${U}px, 0, 0)`,D.style.width=`${G}px`):(D.style.transform=`translate3d(0px, ${U}px, 0)`,D.style.height=`${G}px`),I.hide&&(clearTimeout(o),P.style.opacity=1,o=setTimeout(()=>{P.style.opacity=0,P.style.transitionDuration="400ms"},1e3))}function f(M){!i.params.scrollbar.el||!i.scrollbar.el||(i.scrollbar.dragEl.style.transitionDuration=`${M}ms`)}function p(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:M}=i,{dragEl:C,el:D}=M;C.style.width="",C.style.height="",h=i.isHorizontal()?D.offsetWidth:D.offsetHeight,u=i.size/(i.virtualSize+i.params.slidesOffsetBefore-(i.params.centeredSlides?i.snapGrid[0]:0)),i.params.scrollbar.dragSize==="auto"?c=h*u:c=parseInt(i.params.scrollbar.dragSize,10),i.isHorizontal()?C.style.width=`${c}px`:C.style.height=`${c}px`,u>=1?D.style.display="none":D.style.display="",i.params.scrollbar.hide&&(D.style.opacity=0),i.params.watchOverflow&&i.enabled&&M.el.classList[i.isLocked?"add":"remove"](i.params.scrollbar.lockClass)}function m(M){return i.isHorizontal()?M.clientX:M.clientY}function y(M){const{scrollbar:C,rtlTranslate:D}=i,{el:P}=C;let I;I=(m(M)-vme(P)[i.isHorizontal()?"left":"top"]-(l!==null?l:c/2))/(h-c),I=Math.max(Math.min(I,1),0),D&&(I=1-I);const k=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*I;i.updateProgress(k),i.setTranslate(k),i.updateActiveIndex(),i.updateSlidesClasses()}function g(M){const C=i.params.scrollbar,{scrollbar:D,wrapperEl:P}=i,{el:I,dragEl:k}=D;s=!0,l=M.target===k?m(M)-M.target.getBoundingClientRect()[i.isHorizontal()?"left":"top"]:null,M.preventDefault(),M.stopPropagation(),P.style.transitionDuration="100ms",k.style.transitionDuration="100ms",y(M),clearTimeout(a),I.style.transitionDuration="0ms",C.hide&&(I.style.opacity=1),i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="none"),n("scrollbarDragStart",M)}function v(M){const{scrollbar:C,wrapperEl:D}=i,{el:P,dragEl:I}=C;s&&(M.preventDefault?M.preventDefault():M.returnValue=!1,y(M),D.style.transitionDuration="0ms",P.style.transitionDuration="0ms",I.style.transitionDuration="0ms",n("scrollbarDragMove",M))}function x(M){const C=i.params.scrollbar,{scrollbar:D,wrapperEl:P}=i,{el:I}=D;s&&(s=!1,i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="",P.style.transitionDuration=""),C.hide&&(clearTimeout(a),a=w6(()=>{I.style.opacity=0,I.style.transitionDuration="400ms"},1e3)),n("scrollbarDragEnd",M),C.snapOnRelease&&i.slideToClosest())}function _(M){const{scrollbar:C,params:D}=i,P=C.el;if(!P)return;const I=P,k=D.passiveListeners?{passive:!1,capture:!1}:!1,G=D.passiveListeners?{passive:!0,capture:!1}:!1;if(!I)return;const U=M==="on"?"addEventListener":"removeEventListener";I[U]("pointerdown",g,k),r[U]("pointermove",v,k),r[U]("pointerup",x,G)}function w(){!i.params.scrollbar.el||!i.scrollbar.el||_("on")}function b(){!i.params.scrollbar.el||!i.scrollbar.el||_("off")}function S(){const{scrollbar:M,el:C}=i;i.params.scrollbar=zC(i,i.originalParams.scrollbar,i.params.scrollbar,{el:"swiper-scrollbar"});const D=i.params.scrollbar;if(!D.el)return;let P;typeof D.el=="string"&&i.isElement&&(P=i.el.shadowRoot.querySelector(D.el)),!P&&typeof D.el=="string"?P=r.querySelectorAll(D.el):P||(P=D.el),i.params.uniqueNavElements&&typeof D.el=="string"&&P.length>1&&C.querySelectorAll(D.el).length===1&&(P=C.querySelector(D.el)),P.length>0&&(P=P[0]),P.classList.add(i.isHorizontal()?D.horizontalClass:D.verticalClass);let I;P&&(I=P.querySelector(`.${i.params.scrollbar.dragClass}`),I||(I=Vx("div",i.params.scrollbar.dragClass),P.append(I))),Object.assign(M,{el:P,dragEl:I}),D.draggable&&w(),P&&P.classList[i.enabled?"remove":"add"](i.params.scrollbar.lockClass)}function A(){const M=i.params.scrollbar,C=i.scrollbar.el;C&&C.classList.remove(i.isHorizontal()?M.horizontalClass:M.verticalClass),b()}t("init",()=>{i.params.scrollbar.enabled===!1?T():(S(),p(),d())}),t("update resize observerUpdate lock unlock",()=>{p()}),t("setTranslate",()=>{d()}),t("setTransition",(M,C)=>{f(C)}),t("enable disable",()=>{const{el:M}=i.scrollbar;M&&M.classList[i.enabled?"remove":"add"](i.params.scrollbar.lockClass)}),t("destroy",()=>{A()});const E=()=>{i.el.classList.remove(i.params.scrollbar.scrollbarDisabledClass),i.scrollbar.el&&i.scrollbar.el.classList.remove(i.params.scrollbar.scrollbarDisabledClass),S(),p(),d()},T=()=>{i.el.classList.add(i.params.scrollbar.scrollbarDisabledClass),i.scrollbar.el&&i.scrollbar.el.classList.add(i.params.scrollbar.scrollbarDisabledClass),A()};Object.assign(i.scrollbar,{enable:E,disable:T,updateSize:p,setTranslate:d,init:S,destroy:A})}function Rge({swiper:i,extendParams:e,on:t}){e({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),i.a11y={clicked:!1};let n=null;function r(D){const P=n;P.length!==0&&(P.innerHTML="",P.innerHTML=D)}const s=D=>(Array.isArray(D)||(D=[D].filter(P=>!!P)),D);function o(D=16){const P=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(D).replace(/x/g,P)}function a(D){D=s(D),D.forEach(P=>{P.setAttribute("tabIndex","0")})}function l(D){D=s(D),D.forEach(P=>{P.setAttribute("tabIndex","-1")})}function c(D,P){D=s(D),D.forEach(I=>{I.setAttribute("role",P)})}function h(D,P){D=s(D),D.forEach(I=>{I.setAttribute("aria-roledescription",P)})}function u(D,P){D=s(D),D.forEach(I=>{I.setAttribute("aria-controls",P)})}function d(D,P){D=s(D),D.forEach(I=>{I.setAttribute("aria-label",P)})}function f(D,P){D=s(D),D.forEach(I=>{I.setAttribute("id",P)})}function p(D,P){D=s(D),D.forEach(I=>{I.setAttribute("aria-live",P)})}function m(D){D=s(D),D.forEach(P=>{P.setAttribute("aria-disabled",!0)})}function y(D){D=s(D),D.forEach(P=>{P.setAttribute("aria-disabled",!1)})}function g(D){if(D.keyCode!==13&&D.keyCode!==32)return;const P=i.params.a11y,I=D.target;i.pagination&&i.pagination.el&&(I===i.pagination.el||i.pagination.el.contains(D.target))&&!D.target.matches(Zh(i.params.pagination.bulletClass))||(i.navigation&&i.navigation.nextEl&&I===i.navigation.nextEl&&(i.isEnd&&!i.params.loop||i.slideNext(),i.isEnd?r(P.lastSlideMessage):r(P.nextSlideMessage)),i.navigation&&i.navigation.prevEl&&I===i.navigation.prevEl&&(i.isBeginning&&!i.params.loop||i.slidePrev(),i.isBeginning?r(P.firstSlideMessage):r(P.prevSlideMessage)),i.pagination&&I.matches(Zh(i.params.pagination.bulletClass))&&I.click())}function v(){if(i.params.loop||i.params.rewind||!i.navigation)return;const{nextEl:D,prevEl:P}=i.navigation;P&&(i.isBeginning?(m(P),l(P)):(y(P),a(P))),D&&(i.isEnd?(m(D),l(D)):(y(D),a(D)))}function x(){return i.pagination&&i.pagination.bullets&&i.pagination.bullets.length}function _(){return x()&&i.params.pagination.clickable}function w(){const D=i.params.a11y;x()&&i.pagination.bullets.forEach(P=>{i.params.pagination.clickable&&(a(P),i.params.pagination.renderBullet||(c(P,"button"),d(P,D.paginationBulletMessage.replace(/\{\{index\}\}/,Jl(P)+1)))),P.matches(`.${i.params.pagination.bulletActiveClass}`)?P.setAttribute("aria-current","true"):P.removeAttribute("aria-current")})}const b=(D,P,I)=>{a(D),D.tagName!=="BUTTON"&&(c(D,"button"),D.addEventListener("keydown",g)),d(D,I),u(D,P)},S=()=>{i.a11y.clicked=!0},A=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.destroyed||(i.a11y.clicked=!1)})})},E=D=>{if(i.a11y.clicked)return;const P=D.target.closest(`.${i.params.slideClass}, swiper-slide`);if(!P||!i.slides.includes(P))return;const I=i.slides.indexOf(P)===i.activeIndex,k=i.params.watchSlidesProgress&&i.visibleSlides&&i.visibleSlides.includes(P);I||k||D.sourceCapabilities&&D.sourceCapabilities.firesTouchEvents||(i.isHorizontal()?i.el.scrollLeft=0:i.el.scrollTop=0,i.slideTo(i.slides.indexOf(P),0))},T=()=>{const D=i.params.a11y;D.itemRoleDescriptionMessage&&h(i.slides,D.itemRoleDescriptionMessage),D.slideRole&&c(i.slides,D.slideRole);const P=i.slides.length;D.slideLabelMessage&&i.slides.forEach((I,k)=>{const G=i.params.loop?parseInt(I.getAttribute("data-swiper-slide-index"),10):k,U=D.slideLabelMessage.replace(/\{\{index\}\}/,G+1).replace(/\{\{slidesLength\}\}/,P);d(I,U)})},M=()=>{const D=i.params.a11y;i.el.append(n);const P=i.el;D.containerRoleDescriptionMessage&&h(P,D.containerRoleDescriptionMessage),D.containerMessage&&d(P,D.containerMessage);const I=i.wrapperEl,k=D.id||I.getAttribute("id")||`swiper-wrapper-${o(16)}`,G=i.params.autoplay&&i.params.autoplay.enabled?"off":"polite";f(I,k),p(I,G),T();let{nextEl:U,prevEl:Z}=i.navigation?i.navigation:{};U=s(U),Z=s(Z),U&&U.forEach($=>b($,k,D.nextSlideMessage)),Z&&Z.forEach($=>b($,k,D.prevSlideMessage)),_()&&(Array.isArray(i.pagination.el)?i.pagination.el:[i.pagination.el]).forEach(W=>{W.addEventListener("keydown",g)}),i.el.addEventListener("focus",E,!0),i.el.addEventListener("pointerdown",S,!0),i.el.addEventListener("pointerup",A,!0)};function C(){n&&n.length>0&&n.remove();let{nextEl:D,prevEl:P}=i.navigation?i.navigation:{};D=s(D),P=s(P),D&&D.forEach(I=>I.removeEventListener("keydown",g)),P&&P.forEach(I=>I.removeEventListener("keydown",g)),_()&&(Array.isArray(i.pagination.el)?i.pagination.el:[i.pagination.el]).forEach(k=>{k.removeEventListener("keydown",g)}),i.el.removeEventListener("focus",E,!0),i.el.removeEventListener("pointerdown",S,!0),i.el.removeEventListener("pointerup",A,!0)}t("beforeInit",()=>{n=Vx("span",i.params.a11y.notificationClass),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),i.isElement&&n.setAttribute("slot","container-end")}),t("afterInit",()=>{i.params.a11y.enabled&&M()}),t("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{i.params.a11y.enabled&&T()}),t("fromEdge toEdge afterInit lock unlock",()=>{i.params.a11y.enabled&&v()}),t("paginationUpdate",()=>{i.params.a11y.enabled&&w()}),t("destroy",()=>{i.params.a11y.enabled&&C()})}const Nge="/pixselvue/assets/bg-ec9d7d99.jpg",Fge="/pixselvue/assets/bg_site2-de06c34a.jpg";/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const nX="134",Af={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zge=0,PR=1,kge=2,rX=1,Bge=2,g2=3,N1=0,Nn=1,ju=2,sX=1,vr=0,H2=1,SA=2,LR=3,IR=4,oX=5,Zc=100,Uge=101,Vge=102,OR=103,RR=104,AA=200,Gge=201,jge=202,Hge=203,aX=204,lX=205,cX=206,Wge=207,uX=208,$ge=209,qge=210,Xge=0,Yge=1,Zge=2,TA=3,Qge=4,Kge=5,Jge=6,e2e=7,Gx=0,t2e=1,i2e=2,Sd=0,n2e=1,r2e=2,s2e=3,o2e=4,a2e=5,Pp=300,rf=301,vm=302,S6=303,MA=304,ey=306,kC=307,j0=1e3,ji=1001,A6=1002,ui=1003,EA=1004,CA=1005,pi=1006,hX=1007,sf=1008,Hu=1009,l2e=1010,c2e=1011,Wv=1012,u2e=1013,y5=1014,Oo=1015,Mu=1016,h2e=1017,d2e=1018,f2e=1019,W2=1020,p2e=1021,R0=1022,wi=1023,m2e=1024,g2e=1025,v2e=wi,i1=1026,$v=1027,y2e=1028,x2e=1029,_2e=1030,b2e=1031,w2e=1032,S2e=1033,NR=33776,FR=33777,zR=33778,kR=33779,BR=35840,UR=35841,VR=35842,GR=35843,A2e=36196,jR=37492,HR=37496,T2e=37808,M2e=37809,E2e=37810,C2e=37811,D2e=37812,P2e=37813,L2e=37814,I2e=37815,O2e=37816,R2e=37817,N2e=37818,F2e=37819,z2e=37820,k2e=37821,B2e=36492,U2e=37840,V2e=37841,G2e=37842,j2e=37843,H2e=37844,W2e=37845,$2e=37846,q2e=37847,X2e=37848,Y2e=37849,Z2e=37850,Q2e=37851,K2e=37852,J2e=37853,eve=2200,tve=2201,ive=2202,qv=2300,F1=2301,C_=2302,Lp=2400,Ip=2401,T6=2402,BC=2500,dX=2501,nve=0,rve=1,fX=2,Kn=3e3,Fr=3001,UC=3007,VC=3002,sve=3003,pX=3004,mX=3005,gX=3006,ove=3200,vX=3201,of=0,ave=1,D_=7680,lve=519,Xv=35044,M6=35048,WR="300 es";class hc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}let Uy=1234567;const $2=Math.PI/180,Yv=180/Math.PI,pr=[];for(let i=0;i<256;i++)pr[i]=(i<16?"0":"")+i.toString(16);const cve=typeof crypto<"u"&&"randomUUID"in crypto;function jo(){if(cve)return crypto.randomUUID().toUpperCase();const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(pr[i&255]+pr[i>>8&255]+pr[i>>16&255]+pr[i>>24&255]+"-"+pr[e&255]+pr[e>>8&255]+"-"+pr[e>>16&15|64]+pr[e>>24&255]+"-"+pr[t&63|128]+pr[t>>8&255]+"-"+pr[t>>16&255]+pr[t>>24&255]+pr[n&255]+pr[n>>8&255]+pr[n>>16&255]+pr[n>>24&255]).toUpperCase()}function xr(i,e,t){return Math.max(e,Math.min(t,i))}function GC(i,e){return(i%e+e)%e}function uve(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function hve(i,e,t){return i!==e?(t-i)/(e-i):0}function q2(i,e,t){return(1-t)*i+t*e}function dve(i,e,t,n){return q2(i,e,1-Math.exp(-t*n))}function fve(i,e=1){return e-Math.abs(GC(i,e*2)-e)}function pve(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function mve(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function gve(i,e){return i+Math.floor(Math.random()*(e-i+1))}function vve(i,e){return i+Math.random()*(e-i)}function yve(i){return i*(.5-Math.random())}function xve(i){return i!==void 0&&(Uy=i%2147483647),Uy=Uy*16807%2147483647,(Uy-1)/2147483646}function _ve(i){return i*$2}function bve(i){return i*Yv}function DA(i){return(i&i-1)===0&&i!==0}function yX(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function xX(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function wve(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),h=o((e+n)/2),u=s((e-n)/2),d=o((e-n)/2),f=s((n-e)/2),p=o((n-e)/2);switch(r){case"XYX":i.set(a*h,l*u,l*d,a*c);break;case"YZY":i.set(l*d,a*h,l*u,a*c);break;case"ZXZ":i.set(l*u,l*d,a*h,a*c);break;case"XZX":i.set(a*h,l*p,l*f,a*c);break;case"YXY":i.set(l*f,a*h,l*p,a*c);break;case"ZYZ":i.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}var hi=Object.freeze({__proto__:null,DEG2RAD:$2,RAD2DEG:Yv,generateUUID:jo,clamp:xr,euclideanModulo:GC,mapLinear:uve,inverseLerp:hve,lerp:q2,damp:dve,pingpong:fve,smoothstep:pve,smootherstep:mve,randInt:gve,randFloat:vve,randFloatSpread:yve,seededRandom:xve,degToRad:_ve,radToDeg:bve,isPowerOfTwo:DA,ceilPowerOfTwo:yX,floorPowerOfTwo:xX,setQuaternionFromProperEuler:wve});class ae{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ae.prototype.isVector2=!0;class hn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],h=n[4],u=n[7],d=n[2],f=n[5],p=n[8],m=r[0],y=r[3],g=r[6],v=r[1],x=r[4],_=r[7],w=r[2],b=r[5],S=r[8];return s[0]=o*m+a*v+l*w,s[3]=o*y+a*x+l*b,s[6]=o*g+a*_+l*S,s[1]=c*m+h*v+u*w,s[4]=c*y+h*x+u*b,s[7]=c*g+h*_+u*S,s[2]=d*m+f*v+p*w,s[5]=d*y+f*x+p*b,s[8]=d*g+f*_+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-n*s*h+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=a*l-h*s,f=c*s-o*l,p=t*u+n*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(r*c-h*n)*m,e[2]=(a*n-r*o)*m,e[3]=d*m,e[4]=(h*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(n*l-c*t)*m,e[8]=(o*t-n*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],h=r[7];return r[0]=t*s+n*l,r[3]=t*o+n*c,r[6]=t*a+n*h,r[1]=-n*s+t*l,r[4]=-n*o+t*c,r[7]=-n*a+t*h,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}hn.prototype.isMatrix3=!0;function _X(i){if(i.length===0)return-1/0;let e=i[0];for(let t=1,n=i.length;t<n;++t)i[t]>e&&(e=i[t]);return e}const Sve={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Vy(i,e){return new Sve[i](e)}function jx(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function $R(i,e=0){let t=3735928559^e,n=1103547991^e;for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}let Mf;class ym{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Mf===void 0&&(Mf=jx("canvas")),Mf.width=e.width,Mf.height=e.height;const n=Mf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Mf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Ave=0,Zi=class PA extends hc{constructor(e=PA.DEFAULT_IMAGE,t=PA.DEFAULT_MAPPING,n=ji,r=ji,s=pi,o=sf,a=wi,l=Hu,c=1,h=Kn){super(),Object.defineProperty(this,"id",{value:Ave++}),this.uuid=jo(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ae(0,0),this.repeat=new ae(1,1),this.center=new ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=jo()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(P_(r[o].image)):s.push(P_(r[o]))}else s=P_(r);e.images[r.uuid]={uuid:r.uuid,url:s}}n.image=r.uuid}return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case j0:e.x=e.x-Math.floor(e.x);break;case ji:e.x=e.x<0?0:1;break;case A6:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case j0:e.y=e.y-Math.floor(e.y);break;case ji:e.y=e.y<0?0:1;break;case A6:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}};Zi.DEFAULT_IMAGE=void 0;Zi.DEFAULT_MAPPING=Pp;Zi.prototype.isTexture=!0;function P_(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ym.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class xt{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],h=l[4],u=l[8],d=l[1],f=l[5],p=l[9],m=l[2],y=l[6],g=l[10];if(Math.abs(h-d)<.01&&Math.abs(u-m)<.01&&Math.abs(p-y)<.01){if(Math.abs(h+d)<.1&&Math.abs(u+m)<.1&&Math.abs(p+y)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,_=(f+1)/2,w=(g+1)/2,b=(h+d)/4,S=(u+m)/4,A=(p+y)/4;return x>_&&x>w?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=b/n,s=S/n):_>w?_<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(_),n=b/r,s=A/r):w<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),n=S/s,r=A/s),this.set(n,r,s,t),this}let v=Math.sqrt((y-p)*(y-p)+(u-m)*(u-m)+(d-h)*(d-h));return Math.abs(v)<.001&&(v=1),this.x=(y-p)/v,this.y=(u-m)/v,this.z=(d-h)/v,this.w=Math.acos((c+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}xt.prototype.isVector4=!0;class jn extends hc{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new xt(0,0,e,t),this.scissorTest=!1,this.viewport=new xt(0,0,e,t),this.texture=new Zi(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:pi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}jn.prototype.isWebGLRenderTarget=!0;class Tve extends jn{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}Tve.prototype.isWebGLMultipleRenderTargets=!0;class bX extends jn{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}bX.prototype.isWebGLMultisampleRenderTarget=!0;class Yi{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],h=n[r+2],u=n[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(u!==m||l!==d||c!==f||h!==p){let y=1-a;const g=l*d+c*f+h*p+u*m,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const w=Math.sqrt(x),b=Math.atan2(w,g*v);y=Math.sin(y*b)/w,a=Math.sin(a*b)/w}const _=a*v;if(l=l*y+d*_,c=c*y+f*_,h=h*y+p*_,u=u*y+m*_,y===1-a){const w=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=w,c*=w,h*=w,u*=w}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],h=n[r+3],u=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+h*u+l*f-c*d,e[t+1]=l*p+h*d+c*u-a*f,e[t+2]=c*p+h*f+a*d-l*u,e[t+3]=h*p-a*u-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),h=a(r/2),u=a(s/2),d=l(n/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"YXZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"ZXY":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"ZYX":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"YZX":this._x=d*h*u+c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u-d*f*p;break;case"XZY":this._x=d*h*u-c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],u=t[10],d=n+a+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){const f=2*Math.sqrt(1+n-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xr(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=n*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-n*c,this._z=s*h+o*c+n*l-r*a,this._w=o*h-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-t)*h)/c,d=Math.sin(t*h)/c;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Yi.prototype.isQuaternion=!0;class R{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(qR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,h=l*n+a*t-s*r,u=l*r+s*n-o*t,d=-s*t-o*n-a*r;return this.x=c*l+d*-s+h*-a-u*-o,this.y=h*l+d*-o+u*-s-c*-a,this.z=u*l+d*-a+c*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return L_.copy(this).projectOnVector(e),this.sub(L_)}reflect(e){return this.sub(L_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(xr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}R.prototype.isVector3=!0;const L_=new R,qR=new Yi;class er{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const h=e[l],u=e[l+1],d=e[l+2];h<t&&(t=h),u<n&&(n=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const h=e.getX(l),u=e.getY(l),d=e.getZ(l);h<t&&(t=h),u<n&&(n=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),I_.copy(t.boundingBox),I_.applyMatrix4(e.matrixWorld),this.union(I_));const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hg),hg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dg),Gy.subVectors(this.max,dg),Ef.subVectors(e.a,dg),Cf.subVectors(e.b,dg),Df.subVectors(e.c,dg),bc.subVectors(Cf,Ef),wc.subVectors(Df,Cf),Sh.subVectors(Ef,Df);let t=[0,-bc.z,bc.y,0,-wc.z,wc.y,0,-Sh.z,Sh.y,bc.z,0,-bc.x,wc.z,0,-wc.x,Sh.z,0,-Sh.x,-bc.y,bc.x,0,-wc.y,wc.x,0,-Sh.y,Sh.x,0];return!O_(t,Ef,Cf,Df,Gy)||(t=[1,0,0,0,1,0,0,0,1],!O_(t,Ef,Cf,Df,Gy))?!1:(jy.crossVectors(bc,wc),t=[jy.x,jy.y,jy.z],O_(t,Ef,Cf,Df,Gy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hg.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(hg).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ll[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ll[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ll[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ll[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ll[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ll[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ll[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ll[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ll),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}er.prototype.isBox3=!0;const ll=[new R,new R,new R,new R,new R,new R,new R,new R],hg=new R,I_=new er,Ef=new R,Cf=new R,Df=new R,bc=new R,wc=new R,Sh=new R,dg=new R,Gy=new R,jy=new R,Ah=new R;function O_(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Ah.fromArray(i,s);const a=r.x*Math.abs(Ah.x)+r.y*Math.abs(Ah.y)+r.z*Math.abs(Ah.z),l=e.dot(Ah),c=t.dot(Ah),h=n.dot(Ah);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const Mve=new er,XR=new R,R_=new R,N_=new R;let Fs=class{constructor(e=new R,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Mve.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){N_.subVectors(e,this.center);const t=N_.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.add(N_.multiplyScalar(r/n)),this.radius+=r}return this}union(e){return R_.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(XR.copy(e.center).add(R_)),this.expandByPoint(XR.copy(e.center).sub(R_)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const cl=new R,F_=new R,Hy=new R,Sc=new R,z_=new R,Wy=new R,k_=new R;class Z0{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,cl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=cl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(cl.copy(this.direction).multiplyScalar(t).add(this.origin),cl.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){F_.copy(e).add(t).multiplyScalar(.5),Hy.copy(t).sub(e).normalize(),Sc.copy(this.origin).sub(F_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Hy),a=Sc.dot(this.direction),l=-Sc.dot(Hy),c=Sc.lengthSq(),h=Math.abs(1-o*o);let u,d,f,p;if(h>0)if(u=o*l-a,d=o*a-l,p=s*h,u>=0)if(d>=-p)if(d<=p){const m=1/h;u*=m,d*=m,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-p?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=p?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Hy).multiplyScalar(d).add(F_),f}intersectSphere(e,t){cl.subVectors(e.center,this.origin);const n=cl.dot(this.direction),r=cl.dot(cl)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),n>o||s>r||((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,cl)!==null}intersectTriangle(e,t,n,r,s){z_.subVectors(t,e),Wy.subVectors(n,e),k_.crossVectors(z_,Wy);let o=this.direction.dot(k_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Sc.subVectors(this.origin,e);const l=a*this.direction.dot(Wy.crossVectors(Sc,Wy));if(l<0)return null;const c=a*this.direction.dot(z_.cross(Sc));if(c<0||l+c>o)return null;const h=-a*Sc.dot(k_);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ce{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,s,o,a,l,c,h,u,d,f,p,m,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=u,g[14]=d,g[3]=f,g[7]=p,g[11]=m,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ce().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Pf.setFromMatrixColumn(e,0).length(),s=1/Pf.setFromMatrixColumn(e,1).length(),o=1/Pf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=o*h,f=o*u,p=a*h,m=a*u;t[0]=l*h,t[4]=-l*u,t[8]=c,t[1]=f+p*c,t[5]=d-m*c,t[9]=-a*l,t[2]=m-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*h,f=l*u,p=c*h,m=c*u;t[0]=d+m*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*u,t[5]=o*h,t[9]=-a,t[2]=f*a-p,t[6]=m+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*h,f=l*u,p=c*h,m=c*u;t[0]=d-m*a,t[4]=-o*u,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*h,t[9]=m-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*h,f=o*u,p=a*h,m=a*u;t[0]=l*h,t[4]=p*c-f,t[8]=d*c+m,t[1]=l*u,t[5]=m*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*h,t[4]=m-d*u,t[8]=p*u+f,t[1]=u,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=f*u+p,t[10]=d-m*u}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*h,t[4]=-u,t[8]=c*h,t[1]=d*u+m,t[5]=o*h,t[9]=f*u-p,t[2]=p*u-f,t[6]=a*h,t[10]=m*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Eve,e,Cve)}lookAt(e,t,n){const r=this.elements;return Us.subVectors(e,t),Us.lengthSq()===0&&(Us.z=1),Us.normalize(),Ac.crossVectors(n,Us),Ac.lengthSq()===0&&(Math.abs(n.z)===1?Us.x+=1e-4:Us.z+=1e-4,Us.normalize(),Ac.crossVectors(n,Us)),Ac.normalize(),$y.crossVectors(Us,Ac),r[0]=Ac.x,r[4]=$y.x,r[8]=Us.x,r[1]=Ac.y,r[5]=$y.y,r[9]=Us.y,r[2]=Ac.z,r[6]=$y.z,r[10]=Us.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],h=n[1],u=n[5],d=n[9],f=n[13],p=n[2],m=n[6],y=n[10],g=n[14],v=n[3],x=n[7],_=n[11],w=n[15],b=r[0],S=r[4],A=r[8],E=r[12],T=r[1],M=r[5],C=r[9],D=r[13],P=r[2],I=r[6],k=r[10],G=r[14],U=r[3],Z=r[7],$=r[11],W=r[15];return s[0]=o*b+a*T+l*P+c*U,s[4]=o*S+a*M+l*I+c*Z,s[8]=o*A+a*C+l*k+c*$,s[12]=o*E+a*D+l*G+c*W,s[1]=h*b+u*T+d*P+f*U,s[5]=h*S+u*M+d*I+f*Z,s[9]=h*A+u*C+d*k+f*$,s[13]=h*E+u*D+d*G+f*W,s[2]=p*b+m*T+y*P+g*U,s[6]=p*S+m*M+y*I+g*Z,s[10]=p*A+m*C+y*k+g*$,s[14]=p*E+m*D+y*G+g*W,s[3]=v*b+x*T+_*P+w*U,s[7]=v*S+x*M+_*I+w*Z,s[11]=v*A+x*C+_*k+w*$,s[15]=v*E+x*D+_*G+w*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],p=e[3],m=e[7],y=e[11],g=e[15];return p*(+s*l*u-r*c*u-s*a*d+n*c*d+r*a*f-n*l*f)+m*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+y*(+t*c*u-t*a*f-s*o*u+n*o*f+s*a*h-n*c*h)+g*(-r*a*h-t*l*u+t*a*d+r*o*u-n*o*d+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],y=e[14],g=e[15],v=u*y*c-m*d*c+m*l*f-a*y*f-u*l*g+a*d*g,x=p*d*c-h*y*c-p*l*f+o*y*f+h*l*g-o*d*g,_=h*m*c-p*u*c+p*a*f-o*m*f-h*a*g+o*u*g,w=p*u*l-h*m*l-p*a*d+o*m*d+h*a*y-o*u*y,b=t*v+n*x+r*_+s*w;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/b;return e[0]=v*S,e[1]=(m*d*s-u*y*s-m*r*f+n*y*f+u*r*g-n*d*g)*S,e[2]=(a*y*s-m*l*s+m*r*c-n*y*c-a*r*g+n*l*g)*S,e[3]=(u*l*s-a*d*s-u*r*c+n*d*c+a*r*f-n*l*f)*S,e[4]=x*S,e[5]=(h*y*s-p*d*s+p*r*f-t*y*f-h*r*g+t*d*g)*S,e[6]=(p*l*s-o*y*s-p*r*c+t*y*c+o*r*g-t*l*g)*S,e[7]=(o*d*s-h*l*s+h*r*c-t*d*c-o*r*f+t*l*f)*S,e[8]=_*S,e[9]=(p*u*s-h*m*s-p*n*f+t*m*f+h*n*g-t*u*g)*S,e[10]=(o*m*s-p*a*s+p*n*c-t*m*c-o*n*g+t*a*g)*S,e[11]=(h*a*s-o*u*s-h*n*c+t*u*c+o*n*f-t*a*f)*S,e[12]=w*S,e[13]=(h*m*r-p*u*r+p*n*d-t*m*d-h*n*y+t*u*y)*S,e[14]=(p*a*r-o*m*r-p*n*l+t*m*l+o*n*y-t*a*y)*S,e[15]=(o*u*r-h*a*r+h*n*l-t*u*l-o*n*d+t*a*d)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+n,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,m=o*h,y=o*u,g=a*u,v=l*c,x=l*h,_=l*u,w=n.x,b=n.y,S=n.z;return r[0]=(1-(m+g))*w,r[1]=(f+_)*w,r[2]=(p-x)*w,r[3]=0,r[4]=(f-_)*b,r[5]=(1-(d+g))*b,r[6]=(y+v)*b,r[7]=0,r[8]=(p+x)*S,r[9]=(y-v)*S,r[10]=(1-(d+m))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Pf.set(r[0],r[1],r[2]).length();const o=Pf.set(r[4],r[5],r[6]).length(),a=Pf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],na.copy(this);const c=1/s,h=1/o,u=1/a;return na.elements[0]*=c,na.elements[1]*=c,na.elements[2]*=c,na.elements[4]*=h,na.elements[5]*=h,na.elements[6]*=h,na.elements[8]*=u,na.elements[9]*=u,na.elements[10]*=u,t.setFromRotationMatrix(na),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(t-e),c=2*s/(n-r),h=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),h=1/(o-s),u=(t+e)*l,d=(n+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Ce.prototype.isMatrix4=!0;const Pf=new R,na=new Ce,Eve=new R(0,0,0),Cve=new R(1,1,1),Ac=new R,$y=new R,Us=new R,YR=new Ce,ZR=new Yi;class ss{constructor(e=0,t=0,n=0,r=ss.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(xr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-xr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(xr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-xr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(xr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-xr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return YR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YR,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZR.setFromEuler(this),this.setFromQuaternion(ZR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new R(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ss.prototype.isEuler=!0;ss.DefaultOrder="XYZ";ss.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class wX{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let Dve=0;const QR=new R,Lf=new Yi,ul=new Ce,qy=new R,fg=new R,Pve=new R,Lve=new Yi,KR=new R(1,0,0),JR=new R(0,1,0),eN=new R(0,0,1),Ive={type:"added"},tN={type:"removed"};let Pt=class LA extends hc{constructor(){super(),Object.defineProperty(this,"id",{value:Dve++}),this.uuid=jo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=LA.DefaultUp.clone();const e=new R,t=new ss,n=new Yi,r=new R(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ce},normalMatrix:{value:new hn}}),this.matrix=new Ce,this.matrixWorld=new Ce,this.matrixAutoUpdate=LA.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wX,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lf.setFromAxisAngle(e,t),this.quaternion.multiply(Lf),this}rotateOnWorldAxis(e,t){return Lf.setFromAxisAngle(e,t),this.quaternion.premultiply(Lf),this}rotateX(e){return this.rotateOnAxis(KR,e)}rotateY(e){return this.rotateOnAxis(JR,e)}rotateZ(e){return this.rotateOnAxis(eN,e)}translateOnAxis(e,t){return QR.copy(e).applyQuaternion(this.quaternion),this.position.add(QR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KR,e)}translateY(e){return this.translateOnAxis(JR,e)}translateZ(e){return this.translateOnAxis(eN,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ul.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?qy.copy(e):qy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),fg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ul.lookAt(fg,qy,this.up):ul.lookAt(qy,fg,this.up),this.quaternion.setFromRotationMatrix(ul),r&&(ul.extractRotation(r.matrixWorld),Lf.setFromRotationMatrix(ul),this.quaternion.premultiply(Lf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ive)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tN)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(tN)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ul.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ul.multiply(e.parent.matrixWorld)),e.applyMatrix4(ul),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fg,e,Pve),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fg,Lve,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),u=o(e.shapes),d=o(e.skeletons),f=o(e.animations);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),h.length>0&&(n.images=h),u.length>0&&(n.shapes=u),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f)}return n.object=r,n;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}};Pt.DefaultUp=new R(0,1,0);Pt.DefaultMatrixAutoUpdate=!0;Pt.prototype.isObject3D=!0;const ra=new R,hl=new R,B_=new R,dl=new R,If=new R,Of=new R,iN=new R,U_=new R,V_=new R,G_=new R;class sn{constructor(e=new R,t=new R,n=new R){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ra.subVectors(e,t),r.cross(ra);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){ra.subVectors(r,t),hl.subVectors(n,t),B_.subVectors(e,t);const o=ra.dot(ra),a=ra.dot(hl),l=ra.dot(B_),c=hl.dot(hl),h=hl.dot(B_),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);const d=1/u,f=(c*l-a*h)*d,p=(o*h-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,dl),dl.x>=0&&dl.y>=0&&dl.x+dl.y<=1}static getUV(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,dl),l.set(0,0),l.addScaledVector(s,dl.x),l.addScaledVector(o,dl.y),l.addScaledVector(a,dl.z),l}static isFrontFacing(e,t,n,r){return ra.subVectors(n,t),hl.subVectors(e,t),ra.cross(hl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ra.subVectors(this.c,this.b),hl.subVectors(this.a,this.b),ra.cross(hl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return sn.getUV(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return sn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;If.subVectors(r,n),Of.subVectors(s,n),U_.subVectors(e,n);const l=If.dot(U_),c=Of.dot(U_);if(l<=0&&c<=0)return t.copy(n);V_.subVectors(e,r);const h=If.dot(V_),u=Of.dot(V_);if(h>=0&&u<=h)return t.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(n).addScaledVector(If,o);G_.subVectors(e,s);const f=If.dot(G_),p=Of.dot(G_);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(Of,a);const y=h*p-f*u;if(y<=0&&u-h>=0&&f-p>=0)return iN.subVectors(s,r),a=(u-h)/(u-h+(f-p)),t.copy(r).addScaledVector(iN,a);const g=1/(y+m+d);return o=m*g,a=d*g,t.copy(n).addScaledVector(If,o).addScaledVector(Of,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ove=0;class Zn extends hc{constructor(){super(),Object.defineProperty(this,"id",{value:Ove++}),this.uuid=jo(),this.name="",this.type="Material",this.fog=!0,this.blending=H2,this.side=N1,this.vertexColors=!1,this.opacity=1,this.format=wi,this.transparent=!1,this.blendSrc=aX,this.blendDst=lX,this.blendEquation=Zc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=TA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lve,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=D_,this.stencilZFail=D_,this.stencilZPass=D_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===sX;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==H2&&(n.blending=this.blending),this.side!==N1&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==wi&&(n.format=this.format),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Zn.prototype.isMaterial=!0;const SX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sa={h:0,s:0,l:0},Xy={h:0,s:0,l:0};function j_(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}function H_(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function W_(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}class Pe{constructor(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=GC(e,1),t=xr(t,0,1),n=xr(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,s=2*n-r;this.r=j_(s,r,e+1/3),this.g=j_(s,r,e),this.b=j_(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=n[1],o=n[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,l,c)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=n[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=SX[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=H_(e.r),this.g=H_(e.g),this.b=H_(e.b),this}copyLinearToSRGB(e){return this.r=W_(e.r),this.g=W_(e.g),this.b=W_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,s=Math.max(t,n,r),o=Math.min(t,n,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const h=s-o;switch(l=c<=.5?h/(s+o):h/(2-s-o),s){case t:a=(n-r)/h+(n<r?6:0);break;case n:a=(r-t)/h+2;break;case r:a=(t-n)/h+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,n){return this.getHSL(sa),sa.h+=e,sa.s+=t,sa.l+=n,this.setHSL(sa.h,sa.s,sa.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(sa),e.getHSL(Xy);const n=q2(sa.h,Xy.h,t),r=q2(sa.s,Xy.s,t),s=q2(sa.l,Xy.l,t);return this.setHSL(n,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Pe.NAMES=SX;Pe.prototype.isColor=!0;Pe.prototype.r=1;Pe.prototype.g=1;Pe.prototype.b=1;class os extends Zn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}os.prototype.isMeshBasicMaterial=!0;const Mi=new R,Yy=new ae;class at{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=Xv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Pe),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ae),t[n++]=o.x,t[n++]=o.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new R),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new xt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Yy.fromBufferAttribute(this,t),Yy.applyMatrix3(e),this.setXY(t,Yy.x,Yy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyMatrix3(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Mi.x=this.getX(t),Mi.y=this.getY(t),Mi.z=this.getZ(t),Mi.applyMatrix4(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mi.x=this.getX(t),Mi.y=this.getY(t),Mi.z=this.getZ(t),Mi.applyNormalMatrix(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mi.x=this.getX(t),Mi.y=this.getY(t),Mi.z=this.getZ(t),Mi.transformDirection(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}at.prototype.isBufferAttribute=!0;class jC extends at{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class X2 extends at{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class AX extends at{constructor(e,t,n){super(new Uint16Array(e),t,n)}}AX.prototype.isFloat16BufferAttribute=!0;class Le extends at{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Rve=0;const fo=new Ce,$_=new Pt,Rf=new R,Vs=new er,pg=new er,tr=new R;class ze extends hc{constructor(){super(),Object.defineProperty(this,"id",{value:Rve++}),this.uuid=jo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_X(e)>65535?X2:jC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new hn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return fo.makeRotationFromQuaternion(e),this.applyMatrix4(fo),this}rotateX(e){return fo.makeRotationX(e),this.applyMatrix4(fo),this}rotateY(e){return fo.makeRotationY(e),this.applyMatrix4(fo),this}rotateZ(e){return fo.makeRotationZ(e),this.applyMatrix4(fo),this}translate(e,t,n){return fo.makeTranslation(e,t,n),this.applyMatrix4(fo),this}scale(e,t,n){return fo.makeScale(e,t,n),this.applyMatrix4(fo),this}lookAt(e){return $_.lookAt(e),$_.updateMatrix(),this.applyMatrix4($_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rf).negate(),this.translate(Rf.x,Rf.y,Rf.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Le(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Vs.setFromBufferAttribute(s),this.morphTargetsRelative?(tr.addVectors(this.boundingBox.min,Vs.min),this.boundingBox.expandByPoint(tr),tr.addVectors(this.boundingBox.max,Vs.max),this.boundingBox.expandByPoint(tr)):(this.boundingBox.expandByPoint(Vs.min),this.boundingBox.expandByPoint(Vs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new R,1/0);return}if(e){const n=this.boundingSphere.center;if(Vs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];pg.setFromBufferAttribute(a),this.morphTargetsRelative?(tr.addVectors(Vs.min,pg.min),Vs.expandByPoint(tr),tr.addVectors(Vs.max,pg.max),Vs.expandByPoint(tr)):(Vs.expandByPoint(pg.min),Vs.expandByPoint(pg.max))}Vs.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)tr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(tr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)tr.fromBufferAttribute(a,c),l&&(Rf.fromBufferAttribute(e,c),tr.add(Rf)),r=Math.max(r,n.distanceToSquared(tr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new at(new Float32Array(4*a),4));const l=t.tangent.array,c=[],h=[];for(let T=0;T<a;T++)c[T]=new R,h[T]=new R;const u=new R,d=new R,f=new R,p=new ae,m=new ae,y=new ae,g=new R,v=new R;function x(T,M,C){u.fromArray(r,T*3),d.fromArray(r,M*3),f.fromArray(r,C*3),p.fromArray(o,T*2),m.fromArray(o,M*2),y.fromArray(o,C*2),d.sub(u),f.sub(u),m.sub(p),y.sub(p);const D=1/(m.x*y.y-y.x*m.y);isFinite(D)&&(g.copy(d).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(D),v.copy(f).multiplyScalar(m.x).addScaledVector(d,-y.x).multiplyScalar(D),c[T].add(g),c[M].add(g),c[C].add(g),h[T].add(v),h[M].add(v),h[C].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:n.length}]);for(let T=0,M=_.length;T<M;++T){const C=_[T],D=C.start,P=C.count;for(let I=D,k=D+P;I<k;I+=3)x(n[I+0],n[I+1],n[I+2])}const w=new R,b=new R,S=new R,A=new R;function E(T){S.fromArray(s,T*3),A.copy(S);const M=c[T];w.copy(M),w.sub(S.multiplyScalar(S.dot(M))).normalize(),b.crossVectors(A,M);const D=b.dot(h[T])<0?-1:1;l[T*4]=w.x,l[T*4+1]=w.y,l[T*4+2]=w.z,l[T*4+3]=D}for(let T=0,M=_.length;T<M;++T){const C=_[T],D=C.start,P=C.count;for(let I=D,k=D+P;I<k;I+=3)E(n[I+0]),E(n[I+1]),E(n[I+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new at(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const r=new R,s=new R,o=new R,a=new R,l=new R,c=new R,h=new R,u=new R;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),m=e.getX(d+1),y=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,y),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,y),a.add(h),l.add(h),c.add(h),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),n.setXYZ(d+0,h.x,h.y,h.z),n.setXYZ(d+1,h.x,h.y,h.z),n.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(e.attributes[r]===void 0)continue;const o=n[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,h=Math.min(l.length,o.length-c);for(let u=0,d=c;u<h;u++,d++)o[d]=l[u]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)tr.fromBufferAttribute(e,t),tr.normalize(),e.setXYZ(t,tr.x,tr.y,tr.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h);let f=0,p=0;for(let m=0,y=l.length;m<y;m++){a.isInterleavedBufferAttribute?f=l[m]*a.data.stride+a.offset:f=l[m]*h;for(let g=0;g<h;g++)d[p++]=c[f++]}return new at(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ze,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){const d=c[h],f=e(d,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ze.prototype.isBufferGeometry=!0;const nN=new Ce,Nf=new Z0,q_=new Fs,Tc=new R,Mc=new R,Ec=new R,X_=new R,Y_=new R,Z_=new R,Zy=new R,Qy=new R,Ky=new R,Jy=new ae,e9=new ae,t9=new ae,Q_=new R,i9=new R;let Cn=class extends Pt{constructor(e=new ze,t=new os){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),q_.copy(n.boundingSphere),q_.applyMatrix4(s),e.ray.intersectsSphere(q_)===!1)||(nN.copy(s).invert(),Nf.copy(e.ray).applyMatrix4(nN),n.boundingBox!==null&&Nf.intersectsBox(n.boundingBox)===!1))return;let o;if(n.isBufferGeometry){const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,h=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,f=n.groups,p=n.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,y=f.length;m<y;m++){const g=f[m],v=r[g.materialIndex],x=Math.max(g.start,p.start),_=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let w=x,b=_;w<b;w+=3){const S=a.getX(w),A=a.getX(w+1),E=a.getX(w+2);o=n9(this,v,e,Nf,l,c,h,u,d,S,A,E),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let g=m,v=y;g<v;g+=3){const x=a.getX(g),_=a.getX(g+1),w=a.getX(g+2);o=n9(this,r,e,Nf,l,c,h,u,d,x,_,w),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,y=f.length;m<y;m++){const g=f[m],v=r[g.materialIndex],x=Math.max(g.start,p.start),_=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let w=x,b=_;w<b;w+=3){const S=w,A=w+1,E=w+2;o=n9(this,v,e,Nf,l,c,h,u,d,S,A,E),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let g=m,v=y;g<v;g+=3){const x=g,_=g+1,w=g+2;o=n9(this,r,e,Nf,l,c,h,u,d,x,_,w),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}};Cn.prototype.isMesh=!0;function Nve(i,e,t,n,r,s,o,a){let l;if(e.side===Nn?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side!==ju,a),l===null)return null;i9.copy(a),i9.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(i9);return c<t.near||c>t.far?null:{distance:c,point:i9.clone(),object:i}}function n9(i,e,t,n,r,s,o,a,l,c,h,u){Tc.fromBufferAttribute(r,c),Mc.fromBufferAttribute(r,h),Ec.fromBufferAttribute(r,u);const d=i.morphTargetInfluences;if(s&&d){Zy.set(0,0,0),Qy.set(0,0,0),Ky.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const y=d[p],g=s[p];y!==0&&(X_.fromBufferAttribute(g,c),Y_.fromBufferAttribute(g,h),Z_.fromBufferAttribute(g,u),o?(Zy.addScaledVector(X_,y),Qy.addScaledVector(Y_,y),Ky.addScaledVector(Z_,y)):(Zy.addScaledVector(X_.sub(Tc),y),Qy.addScaledVector(Y_.sub(Mc),y),Ky.addScaledVector(Z_.sub(Ec),y)))}Tc.add(Zy),Mc.add(Qy),Ec.add(Ky)}i.isSkinnedMesh&&(i.boneTransform(c,Tc),i.boneTransform(h,Mc),i.boneTransform(u,Ec));const f=Nve(i,e,t,n,Tc,Mc,Ec,Q_);if(f){a&&(Jy.fromBufferAttribute(a,c),e9.fromBufferAttribute(a,h),t9.fromBufferAttribute(a,u),f.uv=sn.getUV(Q_,Tc,Mc,Ec,Jy,e9,t9,new ae)),l&&(Jy.fromBufferAttribute(l,c),e9.fromBufferAttribute(l,h),t9.fromBufferAttribute(l,u),f.uv2=sn.getUV(Q_,Tc,Mc,Ec,Jy,e9,t9,new ae));const p={a:c,b:h,c:u,normal:new R,materialIndex:0};sn.getNormal(Tc,Mc,Ec,p.normal),f.face=p}return f}let Va=class TX extends ze{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let d=0,f=0;p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Le(c,3)),this.setAttribute("normal",new Le(h,3)),this.setAttribute("uv",new Le(u,2));function p(m,y,g,v,x,_,w,b,S,A,E){const T=_/S,M=w/A,C=_/2,D=w/2,P=b/2,I=S+1,k=A+1;let G=0,U=0;const Z=new R;for(let $=0;$<k;$++){const W=$*M-D;for(let X=0;X<I;X++){const j=X*T-C;Z[m]=j*v,Z[y]=W*x,Z[g]=P,c.push(Z.x,Z.y,Z.z),Z[m]=0,Z[y]=0,Z[g]=b>0?1:-1,h.push(Z.x,Z.y,Z.z),u.push(X/S),u.push(1-$/A),G+=1}}for(let $=0;$<A;$++)for(let W=0;W<S;W++){const X=d+W+I*$,j=d+W+I*($+1),H=d+(W+1)+I*($+1),V=d+(W+1)+I*$;l.push(X,j,V),l.push(j,H,V),U+=6}a.addGroup(f,U,E),f+=U,d+=G}}static fromJSON(e){return new TX(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function z1(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Dr(i){const e={};for(let t=0;t<i.length;t++){const n=z1(i[t]);for(const r in n)e[r]=n[r]}return e}const Dn={clone:z1,merge:Dr};var Fve=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zve=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Si=class extends Zn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Fve,this.fragmentShader=zve,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=z1(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}};Si.prototype.isShaderMaterial=!0;let xm=class extends Pt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ce,this.projectionMatrix=new Ce,this.projectionMatrixInverse=new Ce}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};xm.prototype.isCamera=!0;let or=class extends xm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Yv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yv*2*Math.atan(Math.tan($2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($2*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};or.prototype.isPerspectiveCamera=!0;const Ff=90,zf=1;let Hx=class extends Pt{constructor(e,t,n){if(super(),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const r=new or(Ff,zf,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new R(1,0,0)),this.add(r);const s=new or(Ff,zf,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new R(-1,0,0)),this.add(s);const o=new or(Ff,zf,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new R(0,1,0)),this.add(o);const a=new or(Ff,zf,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new R(0,-1,0)),this.add(a);const l=new or(Ff,zf,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new R(0,0,1)),this.add(l);const c=new or(Ff,zf,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new R(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,h=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=h}},ty=class extends Zi{constructor(e,t,n,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:rf,super(e,t,n,r,s,o,a,l,c,h),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};ty.prototype.isCubeTexture=!0;class HC extends jn{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new ty(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pi,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=wi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Va(5,5,5),s=new Si({name:"CubemapFromEquirect",uniforms:z1(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Nn,blending:vr});s.uniforms.tEquirect.value=t;const o=new Cn(r,s),a=t.minFilter;return t.minFilter===sf&&(t.minFilter=pi),new Hx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}HC.prototype.isWebGLCubeRenderTarget=!0;const K_=new R,kve=new R,Bve=new hn;let va=class{constructor(e=new R(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=K_.subVectors(n,t).cross(kve.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(K_),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Bve.getNormalMatrix(e),r=this.coplanarPoint(K_).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};va.prototype.isPlane=!0;const kf=new Fs,r9=new R;class Wx{constructor(e=new va,t=new va,n=new va,r=new va,s=new va,o=new va){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],f=n[9],p=n[10],m=n[11],y=n[12],g=n[13],v=n[14],x=n[15];return t[0].setComponents(a-r,u-l,m-d,x-y).normalize(),t[1].setComponents(a+r,u+l,m+d,x+y).normalize(),t[2].setComponents(a+s,u+c,m+f,x+g).normalize(),t[3].setComponents(a-s,u-c,m-f,x-g).normalize(),t[4].setComponents(a-o,u-h,m-p,x-v).normalize(),t[5].setComponents(a+o,u+h,m+p,x+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),kf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(kf)}intersectsSprite(e){return kf.center.set(0,0,0),kf.radius=.7071067811865476,kf.applyMatrix4(e.matrixWorld),this.intersectsSphere(kf)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(r9.x=r.normal.x>0?e.max.x:e.min.x,r9.y=r.normal.y>0?e.max.y:e.min.y,r9.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(r9)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function MX(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function Uve(i,e){const t=e.isWebGL2,n=new WeakMap;function r(c,h){const u=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(h,f),i.bufferData(h,u,d),c.onUploadCallback();let p=5126;return u instanceof Float32Array?p=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?c.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:u instanceof Int16Array?p=5122:u instanceof Uint32Array?p=5125:u instanceof Int32Array?p=5124:u instanceof Int8Array?p=5120:(u instanceof Uint8Array||u instanceof Uint8ClampedArray)&&(p=5121),{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){const d=h.array,f=h.updateRange;i.bindBuffer(u,c),f.count===-1?i.bufferSubData(u,0,d):(t?i.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);h&&(i.deleteBuffer(h.buffer),n.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const d=n.get(c);(!d||d.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u===void 0?n.set(c,r(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}let iy=class EX extends ze{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,h=l+1,u=e/a,d=t/l,f=[],p=[],m=[],y=[];for(let g=0;g<h;g++){const v=g*d-o;for(let x=0;x<c;x++){const _=x*u-s;p.push(_,-v,0),m.push(0,0,1),y.push(x/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let v=0;v<a;v++){const x=v+c*g,_=v+c*(g+1),w=v+1+c*(g+1),b=v+1+c*g;f.push(x,_,b),f.push(_,w,b)}this.setIndex(f),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(m,3)),this.setAttribute("uv",new Le(y,2))}static fromJSON(e){return new EX(e.width,e.height,e.widthSegments,e.heightSegments)}};var Vve=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Gve=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jve=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Hve=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wve=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$ve=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qve="vec3 transformed = vec3( position );",Xve=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Yve=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Zve=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Qve=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Kve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Jve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,e3e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,t3e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,i3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,n3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,r3e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,s3e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,o3e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,a3e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,l3e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,c3e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,u3e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,h3e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,d3e="gl_FragColor = linearToOutputTexel( gl_FragColor );",f3e=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,p3e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,m3e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,g3e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,v3e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,y3e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,x3e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_3e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,b3e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,w3e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,S3e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,A3e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,T3e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M3e=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,E3e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,C3e=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,D3e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P3e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,L3e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,I3e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,O3e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,R3e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,N3e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,F3e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,z3e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,k3e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,B3e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U3e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,V3e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,G3e=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,j3e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,H3e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,W3e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$3e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,q3e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,X3e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Y3e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Z3e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Q3e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,K3e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,J3e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eye=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tye=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,iye=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,nye=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,rye=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,sye=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,oye=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aye=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,lye=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cye=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uye=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,hye=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,dye=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fye=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pye=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mye=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gye=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,vye=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yye=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xye=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,_ye=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,bye=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wye=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Sye=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Aye=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Tye=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Mye=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Eye=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Cye=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Dye=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Pye=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Lye=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Iye=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Oye=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Rye=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Nye=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fye=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zye=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kye=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Bye=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Uye=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Vye=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Gye=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,jye=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Hye=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Wye=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$ye=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qye=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Xye=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yye=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zye=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qye=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Kye=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jye=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,e9e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,t9e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i9e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n9e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r9e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s9e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o9e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a9e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,l9e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,c9e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u9e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,h9e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,d9e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wt={alphamap_fragment:Vve,alphamap_pars_fragment:Gve,alphatest_fragment:jve,alphatest_pars_fragment:Hve,aomap_fragment:Wve,aomap_pars_fragment:$ve,begin_vertex:qve,beginnormal_vertex:Xve,bsdfs:Yve,bumpmap_pars_fragment:Zve,clipping_planes_fragment:Qve,clipping_planes_pars_fragment:Kve,clipping_planes_pars_vertex:Jve,clipping_planes_vertex:e3e,color_fragment:t3e,color_pars_fragment:i3e,color_pars_vertex:n3e,color_vertex:r3e,common:s3e,cube_uv_reflection_fragment:o3e,defaultnormal_vertex:a3e,displacementmap_pars_vertex:l3e,displacementmap_vertex:c3e,emissivemap_fragment:u3e,emissivemap_pars_fragment:h3e,encodings_fragment:d3e,encodings_pars_fragment:f3e,envmap_fragment:p3e,envmap_common_pars_fragment:m3e,envmap_pars_fragment:g3e,envmap_pars_vertex:v3e,envmap_physical_pars_fragment:C3e,envmap_vertex:y3e,fog_vertex:x3e,fog_pars_vertex:_3e,fog_fragment:b3e,fog_pars_fragment:w3e,gradientmap_pars_fragment:S3e,lightmap_fragment:A3e,lightmap_pars_fragment:T3e,lights_lambert_vertex:M3e,lights_pars_begin:E3e,lights_toon_fragment:D3e,lights_toon_pars_fragment:P3e,lights_phong_fragment:L3e,lights_phong_pars_fragment:I3e,lights_physical_fragment:O3e,lights_physical_pars_fragment:R3e,lights_fragment_begin:N3e,lights_fragment_maps:F3e,lights_fragment_end:z3e,logdepthbuf_fragment:k3e,logdepthbuf_pars_fragment:B3e,logdepthbuf_pars_vertex:U3e,logdepthbuf_vertex:V3e,map_fragment:G3e,map_pars_fragment:j3e,map_particle_fragment:H3e,map_particle_pars_fragment:W3e,metalnessmap_fragment:$3e,metalnessmap_pars_fragment:q3e,morphnormal_vertex:X3e,morphtarget_pars_vertex:Y3e,morphtarget_vertex:Z3e,normal_fragment_begin:Q3e,normal_fragment_maps:K3e,normal_pars_fragment:J3e,normal_pars_vertex:eye,normal_vertex:tye,normalmap_pars_fragment:iye,clearcoat_normal_fragment_begin:nye,clearcoat_normal_fragment_maps:rye,clearcoat_pars_fragment:sye,output_fragment:oye,packing:aye,premultiplied_alpha_fragment:lye,project_vertex:cye,dithering_fragment:uye,dithering_pars_fragment:hye,roughnessmap_fragment:dye,roughnessmap_pars_fragment:fye,shadowmap_pars_fragment:pye,shadowmap_pars_vertex:mye,shadowmap_vertex:gye,shadowmask_pars_fragment:vye,skinbase_vertex:yye,skinning_pars_vertex:xye,skinning_vertex:_ye,skinnormal_vertex:bye,specularmap_fragment:wye,specularmap_pars_fragment:Sye,tonemapping_fragment:Aye,tonemapping_pars_fragment:Tye,transmission_fragment:Mye,transmission_pars_fragment:Eye,uv_pars_fragment:Cye,uv_pars_vertex:Dye,uv_vertex:Pye,uv2_pars_fragment:Lye,uv2_pars_vertex:Iye,uv2_vertex:Oye,worldpos_vertex:Rye,background_vert:Nye,background_frag:Fye,cube_vert:zye,cube_frag:kye,depth_vert:Bye,depth_frag:Uye,distanceRGBA_vert:Vye,distanceRGBA_frag:Gye,equirect_vert:jye,equirect_frag:Hye,linedashed_vert:Wye,linedashed_frag:$ye,meshbasic_vert:qye,meshbasic_frag:Xye,meshlambert_vert:Yye,meshlambert_frag:Zye,meshmatcap_vert:Qye,meshmatcap_frag:Kye,meshnormal_vert:Jye,meshnormal_frag:e9e,meshphong_vert:t9e,meshphong_frag:i9e,meshphysical_vert:n9e,meshphysical_frag:r9e,meshtoon_vert:s9e,meshtoon_frag:o9e,points_vert:a9e,points_frag:l9e,shadow_vert:c9e,shadow_frag:u9e,sprite_vert:h9e,sprite_frag:d9e},Oe={common:{diffuse:{value:new Pe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new hn},uv2Transform:{value:new hn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hn}},sprite:{diffuse:{value:new Pe(16777215)},opacity:{value:1},center:{value:new ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hn}}},ya={basic:{uniforms:Dr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:Dr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:Dr([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)},specular:{value:new Pe(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:Dr([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:Dr([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:Dr([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:Dr([Oe.points,Oe.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:Dr([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:Dr([Oe.common,Oe.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:Dr([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:wt.meshnormal_vert,fragmentShader:wt.meshnormal_frag},sprite:{uniforms:Dr([Oe.sprite,Oe.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new hn},t2D:{value:null}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},cube:{uniforms:Dr([Oe.envmap,{opacity:{value:1}}]),vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:Dr([Oe.common,Oe.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:Dr([Oe.lights,Oe.fog,{color:{value:new Pe(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};ya.physical={uniforms:Dr([ya.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ae(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Pe(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Pe(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Pe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};function f9e(i,e,t,n,r){const s=new Pe(0);let o=0,a,l,c=null,h=0,u=null;function d(p,m){let y=!1,g=m.isScene===!0?m.background:null;g&&g.isTexture&&(g=e.get(g));const v=i.xr,x=v.getSession&&v.getSession();x&&x.environmentBlendMode==="additive"&&(g=null),g===null?f(s,o):g&&g.isColor&&(f(g,1),y=!0),(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ey)?(l===void 0&&(l=new Cn(new Va(1,1,1),new Si({name:"BackgroundCubeMaterial",uniforms:z1(ya.cube.uniforms),vertexShader:ya.cube.vertexShader,fragmentShader:ya.cube.fragmentShader,side:Nn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(_,w,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(l)),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,(c!==g||h!==g.version||u!==i.toneMapping)&&(l.material.needsUpdate=!0,c=g,h=g.version,u=i.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new Cn(new iy(2,2),new Si({name:"BackgroundMaterial",uniforms:z1(ya.background.uniforms),vertexShader:ya.background.vertexShader,fragmentShader:ya.background.fragmentShader,side:N1,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||h!==g.version||u!==i.toneMapping)&&(a.material.needsUpdate=!0,c=g,h=g.version,u=i.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function f(p,m){t.buffers.color.setClear(p.r,p.g,p.b,m,r)}return{getClearColor:function(){return s},setClearColor:function(p,m=1){s.set(p),o=m,f(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,f(s,o)},render:d}}function p9e(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},l=m(null);let c=l;function h(D,P,I,k,G){let U=!1;if(o){const Z=p(k,I,P);c!==Z&&(c=Z,d(c.object)),U=y(k,G),U&&g(k,G)}else{const Z=P.wireframe===!0;(c.geometry!==k.id||c.program!==I.id||c.wireframe!==Z)&&(c.geometry=k.id,c.program=I.id,c.wireframe=Z,U=!0)}D.isInstancedMesh===!0&&(U=!0),G!==null&&t.update(G,34963),U&&(S(D,P,I,k),G!==null&&i.bindBuffer(34963,t.get(G).buffer))}function u(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function d(D){return n.isWebGL2?i.bindVertexArray(D):s.bindVertexArrayOES(D)}function f(D){return n.isWebGL2?i.deleteVertexArray(D):s.deleteVertexArrayOES(D)}function p(D,P,I){const k=I.wireframe===!0;let G=a[D.id];G===void 0&&(G={},a[D.id]=G);let U=G[P.id];U===void 0&&(U={},G[P.id]=U);let Z=U[k];return Z===void 0&&(Z=m(u()),U[k]=Z),Z}function m(D){const P=[],I=[],k=[];for(let G=0;G<r;G++)P[G]=0,I[G]=0,k[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:I,attributeDivisors:k,object:D,attributes:{},index:null}}function y(D,P){const I=c.attributes,k=D.attributes;let G=0;for(const U in k){const Z=I[U],$=k[U];if(Z===void 0||Z.attribute!==$||Z.data!==$.data)return!0;G++}return c.attributesNum!==G||c.index!==P}function g(D,P){const I={},k=D.attributes;let G=0;for(const U in k){const Z=k[U],$={};$.attribute=Z,Z.data&&($.data=Z.data),I[U]=$,G++}c.attributes=I,c.attributesNum=G,c.index=P}function v(){const D=c.newAttributes;for(let P=0,I=D.length;P<I;P++)D[P]=0}function x(D){_(D,0)}function _(D,P){const I=c.newAttributes,k=c.enabledAttributes,G=c.attributeDivisors;I[D]=1,k[D]===0&&(i.enableVertexAttribArray(D),k[D]=1),G[D]!==P&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,P),G[D]=P)}function w(){const D=c.newAttributes,P=c.enabledAttributes;for(let I=0,k=P.length;I<k;I++)P[I]!==D[I]&&(i.disableVertexAttribArray(I),P[I]=0)}function b(D,P,I,k,G,U){n.isWebGL2===!0&&(I===5124||I===5125)?i.vertexAttribIPointer(D,P,I,G,U):i.vertexAttribPointer(D,P,I,k,G,U)}function S(D,P,I,k){if(n.isWebGL2===!1&&(D.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();const G=k.attributes,U=I.getAttributes(),Z=P.defaultAttributeValues;for(const $ in U){const W=U[$];if(W.location>=0){let X=G[$];if(X===void 0&&($==="instanceMatrix"&&D.instanceMatrix&&(X=D.instanceMatrix),$==="instanceColor"&&D.instanceColor&&(X=D.instanceColor)),X!==void 0){const j=X.normalized,H=X.itemSize,V=t.get(X);if(V===void 0)continue;const B=V.buffer,q=V.type,K=V.bytesPerElement;if(X.isInterleavedBufferAttribute){const Q=X.data,oe=Q.stride,ne=X.offset;if(Q&&Q.isInstancedInterleavedBuffer){for(let L=0;L<W.locationSize;L++)_(W.location+L,Q.meshPerAttribute);D.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let L=0;L<W.locationSize;L++)x(W.location+L);i.bindBuffer(34962,B);for(let L=0;L<W.locationSize;L++)b(W.location+L,H/W.locationSize,q,j,oe*K,(ne+H/W.locationSize*L)*K)}else{if(X.isInstancedBufferAttribute){for(let Q=0;Q<W.locationSize;Q++)_(W.location+Q,X.meshPerAttribute);D.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Q=0;Q<W.locationSize;Q++)x(W.location+Q);i.bindBuffer(34962,B);for(let Q=0;Q<W.locationSize;Q++)b(W.location+Q,H/W.locationSize,q,j,H*K,H/W.locationSize*Q*K)}}else if(Z!==void 0){const j=Z[$];if(j!==void 0)switch(j.length){case 2:i.vertexAttrib2fv(W.location,j);break;case 3:i.vertexAttrib3fv(W.location,j);break;case 4:i.vertexAttrib4fv(W.location,j);break;default:i.vertexAttrib1fv(W.location,j)}}}}w()}function A(){M();for(const D in a){const P=a[D];for(const I in P){const k=P[I];for(const G in k)f(k[G].object),delete k[G];delete P[I]}delete a[D]}}function E(D){if(a[D.id]===void 0)return;const P=a[D.id];for(const I in P){const k=P[I];for(const G in k)f(k[G].object),delete k[G];delete P[I]}delete a[D.id]}function T(D){for(const P in a){const I=a[P];if(I[D.id]===void 0)continue;const k=I[D.id];for(const G in k)f(k[G].object),delete k[G];delete I[D.id]}}function M(){C(),c!==l&&(c=l,d(c.object))}function C(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:M,resetDefaultState:C,dispose:A,releaseStatesOfGeometry:E,releaseStatesOfProgram:T,initAttributes:v,enableAttribute:x,disableUnusedAttributes:w}}function m9e(i,e,t,n){const r=n.isWebGL2;let s;function o(c){s=c}function a(c,h){i.drawArrays(s,c,h),t.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),t.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function g9e(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(S){if(S==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,u=i.getParameter(34930),d=i.getParameter(35660),f=i.getParameter(3379),p=i.getParameter(34076),m=i.getParameter(34921),y=i.getParameter(36347),g=i.getParameter(36348),v=i.getParameter(36349),x=d>0,_=o||e.has("OES_texture_float"),w=x&&_,b=o?i.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:_,floatVertexTextures:w,maxSamples:b}}function v9e(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new va,a=new hn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d,f){const p=u.length!==0||d||n!==0||r;return r=d,t=h(u,f,0),n=u.length,p},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,d,f){const p=u.clippingPlanes,m=u.clipIntersection,y=u.clipShadows,g=i.get(u);if(!r||p===null||p.length===0||s&&!y)s?h(null):c();else{const v=s?0:n,x=v*4;let _=g.clippingState||null;l.value=_,_=h(p,d,x,f);for(let w=0;w!==x;++w)_[w]=t[w];g.clippingState=_,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(u,d,f,p){const m=u!==null?u.length:0;let y=null;if(m!==0){if(y=l.value,p!==!0||y===null){const g=f+m*4,v=d.matrixWorldInverse;a.getNormalMatrix(v),(y===null||y.length<g)&&(y=new Float32Array(g));for(let x=0,_=f;x!==m;++x,_+=4)o.copy(u[x]).applyMatrix4(v,a),o.normal.toArray(y,_),y[_+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,y}}function y9e(i){let e=new WeakMap;function t(o,a){return a===S6?o.mapping=rf:a===MA&&(o.mapping=vm),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===S6||a===MA)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=i.getRenderTarget(),h=new HC(l.height/2);return h.fromEquirectangularTexture(i,o),e.set(o,h),i.setRenderTarget(c),o.addEventListener("dispose",r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}let H0=class extends xm{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};H0.prototype.isOrthographicCamera=!0;class $x extends Si{constructor(e){super(e),this.type="RawShaderMaterial"}}$x.prototype.isRawShaderMaterial=!0;const n1=4,Eu=8,c0=Math.pow(2,Eu),CX=[.125,.215,.35,.446,.526,.582],DX=Eu-n1+1+CX.length,Bf=20,Wu={[Kn]:0,[Fr]:1,[VC]:2,[pX]:3,[mX]:4,[gX]:5,[UC]:6},J_=new H0,{_lodPlanes:mg,_sizeLods:rN,_sigmas:s9}=b9e(),sN=new Pe;let eb=null;const zh=(1+Math.sqrt(5))/2,Uf=1/zh,oN=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,zh,Uf),new R(0,zh,-Uf),new R(Uf,0,zh),new R(-Uf,0,zh),new R(zh,Uf,0),new R(-zh,Uf,0)];class x9e{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=w9e(Bf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){eb=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=cN(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=lN(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<mg.length;e++)mg[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(eb),e.scissorTest=!1,o9(e,0,0,e.width,e.height)}_fromTexture(e){eb=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:ui,minFilter:ui,generateMipmaps:!1,type:Hu,format:v2e,encoding:_9e(e)?e.encoding:VC,depthBuffer:!1},n=aN(t);return n.depthBuffer=!e,this._pingPongRenderTarget=aN(t),n}_compileMaterial(e){const t=new Cn(mg[0],e);this._renderer.compile(t,J_)}_sceneToCubeUV(e,t,n,r){const a=new or(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.autoClear,d=h.outputEncoding,f=h.toneMapping;h.getClearColor(sN),h.toneMapping=Sd,h.outputEncoding=Kn,h.autoClear=!1;const p=new os({name:"PMREM.Background",side:Nn,depthWrite:!1,depthTest:!1}),m=new Cn(new Va,p);let y=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,y=!0):(p.color.copy(sN),y=!0);for(let v=0;v<6;v++){const x=v%3;x==0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):x==1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v])),o9(r,x*c0,v>2?c0:0,c0,c0),h.setRenderTarget(r),y&&h.render(m,a),h.render(e,a)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=f,h.outputEncoding=d,h.autoClear=u,e.background=g}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===wi&&t.type===Hu&&t.encoding===Fr?e.value=Wu[Kn]:e.value=Wu[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===rf||e.mapping===vm;r?this._cubemapShader==null&&(this._cubemapShader=cN()):this._equirectShader==null&&(this._equirectShader=lN());const s=r?this._cubemapShader:this._equirectShader,o=new Cn(mg[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),o9(t,0,0,3*c0,2*c0),n.setRenderTarget(t),n.render(o,J_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<DX;r++){const s=Math.sqrt(s9[r]*s9[r]-s9[r-1]*s9[r-1]),o=oN[(r-1)%oN.length];this._blur(e,r-1,r,s,o)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new Cn(mg[r],c),d=c.uniforms,f=rN[n]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Bf-1),m=s/p,y=isFinite(s)?1+Math.floor(h*m):Bf;y>Bf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Bf}`);const g=[];let v=0;for(let b=0;b<Bf;++b){const S=b/m,A=Math.exp(-S*S/2);g.push(A),b==0?v+=A:b<y&&(v+=2*A)}for(let b=0;b<g.length;b++)g[b]=g[b]/v;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=g,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a),d.dTheta.value=p,d.mipInt.value=Eu-n,this._setEncoding(d.inputEncoding,e.texture),this._setEncoding(d.outputEncoding,e.texture);const x=rN[r],_=3*Math.max(0,c0-2*x),w=(r===0?0:2*c0)+2*x*(r>Eu-n1?r-Eu+n1:0);o9(t,_,w,3*x,2*x),l.setRenderTarget(t),l.render(u,J_)}}function _9e(i){return i===void 0||i.type!==Hu?!1:i.encoding===Kn||i.encoding===Fr||i.encoding===UC}function b9e(){const i=[],e=[],t=[];let n=Eu;for(let r=0;r<DX;r++){const s=Math.pow(2,n);e.push(s);let o=1/s;r>Eu-n1?o=CX[r-Eu+n1-1]:r==0&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],u=6,d=6,f=3,p=2,m=1,y=new Float32Array(f*d*u),g=new Float32Array(p*d*u),v=new Float32Array(m*d*u);for(let _=0;_<u;_++){const w=_%3*2/3-1,b=_>2?0:-1,S=[w,b,0,w+2/3,b,0,w+2/3,b+1,0,w,b,0,w+2/3,b+1,0,w,b+1,0];y.set(S,f*d*_),g.set(h,p*d*_);const A=[_,_,_,_,_,_];v.set(A,m*d*_)}const x=new ze;x.setAttribute("position",new at(y,f)),x.setAttribute("uv",new at(g,p)),x.setAttribute("faceIndex",new at(v,m)),i.push(x),n>n1&&n--}return{_lodPlanes:i,_sizeLods:e,_sigmas:t}}function aN(i){const e=new jn(3*c0,3*c0,i);return e.texture.mapping=ey,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function o9(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function w9e(i){const e=new Float32Array(i),t=new R(0,1,0);return new $x({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Wu[Kn]},outputEncoding:{value:Wu[Kn]}},vertexShader:WC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${$C()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function lN(){const i=new ae(1,1);return new $x({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:Wu[Kn]},outputEncoding:{value:Wu[Kn]}},vertexShader:WC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${$C()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function cN(){return new $x({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Wu[Kn]},outputEncoding:{value:Wu[Kn]}},vertexShader:WC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${$C()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function WC(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $C(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function S9e(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping,c=l===S6||l===MA,h=l===rf||l===vm;if(c||h){if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||h&&u&&r(u)){const d=i.getRenderTarget();t===null&&(t=new x9e(i));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),i.setRenderTarget(d),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function A9e(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function T9e(i,e,t,n){const r={},s=new WeakMap;function o(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(u){const d=u.attributes;for(const p in d)e.update(d[p],34962);const f=u.morphAttributes;for(const p in f){const m=f[p];for(let y=0,g=m.length;y<g;y++)e.update(m[y],34962)}}function c(u){const d=[],f=u.index,p=u.attributes.position;let m=0;if(f!==null){const v=f.array;m=f.version;for(let x=0,_=v.length;x<_;x+=3){const w=v[x+0],b=v[x+1],S=v[x+2];d.push(w,b,b,S,S,w)}}else{const v=p.array;m=p.version;for(let x=0,_=v.length/3-1;x<_;x+=3){const w=x+0,b=x+1,S=x+2;d.push(w,b,b,S,S,w)}}const y=new(_X(d)>65535?X2:jC)(d,1);y.version=m;const g=s.get(u);g&&e.remove(g),s.set(u,y)}function h(u){const d=s.get(u);if(d){const f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function M9e(i,e,t,n){const r=n.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){i.drawElements(s,f,a,d*l),t.update(f,s,1)}function u(d,f,p){if(p===0)return;let m,y;if(r)m=i,y="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](s,f,a,d*l,p),t.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function E9e(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}class qC extends Zi{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}qC.prototype.isDataTexture2DArray=!0;function C9e(i,e){return i[0]-e[0]}function D9e(i,e){return Math.abs(e[1])-Math.abs(i[1])}function uN(i,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),i.divideScalar(t)}function P9e(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new R,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u,d){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=h.morphAttributes.position.length;let m=s.get(h);if(m===void 0||m.count!==p){m!==void 0&&m.texture.dispose();const v=h.morphAttributes.normal!==void 0,x=h.morphAttributes.position,_=h.morphAttributes.normal||[],w=h.attributes.position.count,b=v===!0?2:1;let S=w*b,A=1;S>e.maxTextureSize&&(A=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const E=new Float32Array(S*A*4*p),T=new qC(E,S,A,p);T.format=wi,T.type=Oo;const M=b*4;for(let C=0;C<p;C++){const D=x[C],P=_[C],I=S*A*4*C;for(let k=0;k<D.count;k++){o.fromBufferAttribute(D,k),D.normalized===!0&&uN(o,D);const G=k*M;E[I+G+0]=o.x,E[I+G+1]=o.y,E[I+G+2]=o.z,E[I+G+3]=0,v===!0&&(o.fromBufferAttribute(P,k),P.normalized===!0&&uN(o,P),E[I+G+4]=o.x,E[I+G+5]=o.y,E[I+G+6]=o.z,E[I+G+7]=0)}}m={count:p,texture:T,size:new ae(S,A)},s.set(h,m)}let y=0;for(let v=0;v<f.length;v++)y+=f[v];const g=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(i,"morphTargetBaseInfluence",g),d.getUniforms().setValue(i,"morphTargetInfluences",f),d.getUniforms().setValue(i,"morphTargetsTexture",m.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}else{const p=f===void 0?0:f.length;let m=n[h.id];if(m===void 0||m.length!==p){m=[];for(let _=0;_<p;_++)m[_]=[_,0];n[h.id]=m}for(let _=0;_<p;_++){const w=m[_];w[0]=_,w[1]=f[_]}m.sort(D9e);for(let _=0;_<8;_++)_<p&&m[_][1]?(a[_][0]=m[_][0],a[_][1]=m[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(C9e);const y=h.morphAttributes.position,g=h.morphAttributes.normal;let v=0;for(let _=0;_<8;_++){const w=a[_],b=w[0],S=w[1];b!==Number.MAX_SAFE_INTEGER&&S?(y&&h.getAttribute("morphTarget"+_)!==y[b]&&h.setAttribute("morphTarget"+_,y[b]),g&&h.getAttribute("morphNormal"+_)!==g[b]&&h.setAttribute("morphNormal"+_,g[b]),r[_]=S,v+=S):(y&&h.hasAttribute("morphTarget"+_)===!0&&h.deleteAttribute("morphTarget"+_),g&&h.hasAttribute("morphNormal"+_)===!0&&h.deleteAttribute("morphNormal"+_),r[_]=0)}const x=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(i,"morphTargetBaseInfluence",x),d.getUniforms().setValue(i,"morphTargetInfluences",r)}}return{update:l}}function L9e(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,h=l.geometry,u=e.get(l,h);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class PX extends Zi{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}PX.prototype.isDataTexture3D=!0;const LX=new Zi,I9e=new qC,O9e=new PX,IX=new ty,hN=[],dN=[],fN=new Float32Array(16),pN=new Float32Array(9),mN=new Float32Array(4);function _m(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=hN[r];if(s===void 0&&(s=new Float32Array(r),hN[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function us(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Wr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function OX(i,e){let t=dN[e];t===void 0&&(t=new Int32Array(e),dN[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function R9e(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function N9e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;i.uniform2fv(this.addr,e),Wr(t,e)}}function F9e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(us(t,e))return;i.uniform3fv(this.addr,e),Wr(t,e)}}function z9e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;i.uniform4fv(this.addr,e),Wr(t,e)}}function k9e(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Wr(t,e)}else{if(us(t,n))return;mN.set(n),i.uniformMatrix2fv(this.addr,!1,mN),Wr(t,n)}}function B9e(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Wr(t,e)}else{if(us(t,n))return;pN.set(n),i.uniformMatrix3fv(this.addr,!1,pN),Wr(t,n)}}function U9e(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Wr(t,e)}else{if(us(t,n))return;fN.set(n),i.uniformMatrix4fv(this.addr,!1,fN),Wr(t,n)}}function V9e(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function G9e(i,e){const t=this.cache;us(t,e)||(i.uniform2iv(this.addr,e),Wr(t,e))}function j9e(i,e){const t=this.cache;us(t,e)||(i.uniform3iv(this.addr,e),Wr(t,e))}function H9e(i,e){const t=this.cache;us(t,e)||(i.uniform4iv(this.addr,e),Wr(t,e))}function W9e(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function $9e(i,e){const t=this.cache;us(t,e)||(i.uniform2uiv(this.addr,e),Wr(t,e))}function q9e(i,e){const t=this.cache;us(t,e)||(i.uniform3uiv(this.addr,e),Wr(t,e))}function X9e(i,e){const t=this.cache;us(t,e)||(i.uniform4uiv(this.addr,e),Wr(t,e))}function Y9e(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTexture2D(e||LX,r)}function Z9e(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||O9e,r)}function Q9e(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTextureCube(e||IX,r)}function K9e(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||I9e,r)}function J9e(i){switch(i){case 5126:return R9e;case 35664:return N9e;case 35665:return F9e;case 35666:return z9e;case 35674:return k9e;case 35675:return B9e;case 35676:return U9e;case 5124:case 35670:return V9e;case 35667:case 35671:return G9e;case 35668:case 35672:return j9e;case 35669:case 35673:return H9e;case 5125:return W9e;case 36294:return $9e;case 36295:return q9e;case 36296:return X9e;case 35678:case 36198:case 36298:case 36306:case 35682:return Y9e;case 35679:case 36299:case 36307:return Z9e;case 35680:case 36300:case 36308:case 36293:return Q9e;case 36289:case 36303:case 36311:case 36292:return K9e}}function e4e(i,e){i.uniform1fv(this.addr,e)}function t4e(i,e){const t=_m(e,this.size,2);i.uniform2fv(this.addr,t)}function i4e(i,e){const t=_m(e,this.size,3);i.uniform3fv(this.addr,t)}function n4e(i,e){const t=_m(e,this.size,4);i.uniform4fv(this.addr,t)}function r4e(i,e){const t=_m(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function s4e(i,e){const t=_m(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function o4e(i,e){const t=_m(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function a4e(i,e){i.uniform1iv(this.addr,e)}function l4e(i,e){i.uniform2iv(this.addr,e)}function c4e(i,e){i.uniform3iv(this.addr,e)}function u4e(i,e){i.uniform4iv(this.addr,e)}function h4e(i,e){i.uniform1uiv(this.addr,e)}function d4e(i,e){i.uniform2uiv(this.addr,e)}function f4e(i,e){i.uniform3uiv(this.addr,e)}function p4e(i,e){i.uniform4uiv(this.addr,e)}function m4e(i,e,t){const n=e.length,r=OX(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.safeSetTexture2D(e[s]||LX,r[s])}function g4e(i,e,t){const n=e.length,r=OX(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.safeSetTextureCube(e[s]||IX,r[s])}function v4e(i){switch(i){case 5126:return e4e;case 35664:return t4e;case 35665:return i4e;case 35666:return n4e;case 35674:return r4e;case 35675:return s4e;case 35676:return o4e;case 5124:case 35670:return a4e;case 35667:case 35671:return l4e;case 35668:case 35672:return c4e;case 35669:case 35673:return u4e;case 5125:return h4e;case 36294:return d4e;case 36295:return f4e;case 36296:return p4e;case 35678:case 36198:case 36298:case 36306:case 35682:return m4e;case 35680:case 36300:case 36308:case 36293:return g4e}}function y4e(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=J9e(e.type)}function RX(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=v4e(e.type)}RX.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Wr(e,i)};function NX(i){this.id=i,this.seq=[],this.map={}}NX.prototype.setValue=function(i,e,t){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.setValue(i,e[o.id],t)}};const tb=/(\w+)(\])?(\[|\.)?/g;function gN(i,e){i.seq.push(e),i.map[e.id]=e}function x4e(i,e,t){const n=i.name,r=n.length;for(tb.lastIndex=0;;){const s=tb.exec(n),o=tb.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){gN(t,c===void 0?new y4e(a,i,e):new RX(a,i,e));break}else{let u=t.map[a];u===void 0&&(u=new NX(a),gN(t,u)),t=u}}}function Cu(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let n=0;n<t;++n){const r=i.getActiveUniform(e,n),s=i.getUniformLocation(e,r.name);x4e(r,s,this)}}Cu.prototype.setValue=function(i,e,t,n){const r=this.map[e];r!==void 0&&r.setValue(i,t,n)};Cu.prototype.setOptional=function(i,e,t){const n=e[t];n!==void 0&&this.setValue(i,t,n)};Cu.upload=function(i,e,t,n){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(i,a.value,n)}};Cu.seqWithValue=function(i,e){const t=[];for(let n=0,r=i.length;n!==r;++n){const s=i[n];s.id in e&&t.push(s)}return t};function vN(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let _4e=0;function b4e(i){const e=i.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function FX(i){switch(i){case Kn:return["Linear","( value )"];case Fr:return["sRGB","( value )"];case VC:return["RGBE","( value )"];case pX:return["RGBM","( value, 7.0 )"];case mX:return["RGBM","( value, 16.0 )"];case gX:return["RGBD","( value, 256.0 )"];case UC:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case sve:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function yN(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();return n&&r===""?"":t.toUpperCase()+`

`+r+`

`+b4e(i.getShaderSource(e))}function Th(i,e){const t=FX(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function w4e(i,e){const t=FX(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function S4e(i,e){let t;switch(e){case n2e:t="Linear";break;case r2e:t="Reinhard";break;case s2e:t="OptimizedCineon";break;case o2e:t="ACESFilmic";break;case a2e:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function A4e(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(v2).join(`
`)}function T4e(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function M4e(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function v2(i){return i!==""}function xN(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function _N(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const E4e=/^[ \t]*#include +<([\w\d./]+)>/gm;function IA(i){return i.replace(E4e,C4e)}function C4e(i,e){const t=wt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return IA(t)}const D4e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,P4e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bN(i){return i.replace(P4e,zX).replace(D4e,L4e)}function L4e(i,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),zX(i,e,t,n)}function zX(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wN(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function I4e(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===rX?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Bge?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===g2&&(e="SHADOWMAP_TYPE_VSM"),e}function O4e(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case rf:case vm:e="ENVMAP_TYPE_CUBE";break;case ey:case kC:e="ENVMAP_TYPE_CUBE_UV";break}return e}function R4e(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case vm:case kC:e="ENVMAP_MODE_REFRACTION";break}return e}function N4e(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Gx:e="ENVMAP_BLENDING_MULTIPLY";break;case t2e:e="ENVMAP_BLENDING_MIX";break;case i2e:e="ENVMAP_BLENDING_ADD";break}return e}function F4e(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=I4e(t),c=O4e(t),h=R4e(t),u=N4e(t),d=i.gammaFactor>0?i.gammaFactor:1,f=t.isWebGL2?"":A4e(t),p=T4e(s),m=r.createProgram();let y,g,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[p].filter(v2).join(`
`),y.length>0&&(y+=`
`),g=[f,p].filter(v2).join(`
`),g.length>0&&(g+=`
`)):(y=[wN(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(v2).join(`
`),g=[f,wN(t),"#define SHADER_NAME "+t.shaderName,p,"#define GAMMA_FACTOR "+d,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Sd?"#define TONE_MAPPING":"",t.toneMapping!==Sd?wt.tonemapping_pars_fragment:"",t.toneMapping!==Sd?S4e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===R0?"#define OPAQUE":"",wt.encodings_pars_fragment,t.map?Th("mapTexelToLinear",t.mapEncoding):"",t.matcap?Th("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Th("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Th("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?Th("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?Th("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?Th("lightMapTexelToLinear",t.lightMapEncoding):"",w4e("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(v2).join(`
`)),o=IA(o),o=xN(o,t),o=_N(o,t),a=IA(a),a=xN(a,t),a=_N(a,t),o=bN(o),a=bN(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===WR?"":"out highp vec4 pc_fragColor;",t.glslVersion===WR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=v+y+o,_=v+g+a,w=vN(r,35633,x),b=vN(r,35632,_);if(r.attachShader(m,w),r.attachShader(m,b),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),i.debug.checkShaderErrors){const E=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(w).trim(),M=r.getShaderInfoLog(b).trim();let C=!0,D=!0;if(r.getProgramParameter(m,35714)===!1){C=!1;const P=yN(r,w,"vertex"),I=yN(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+E+`
`+P+`
`+I)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(T===""||M==="")&&(D=!1);D&&(this.diagnostics={runnable:C,programLog:E,vertexShader:{log:T,prefix:y},fragmentShader:{log:M,prefix:g}})}r.deleteShader(w),r.deleteShader(b);let S;this.getUniforms=function(){return S===void 0&&(S=new Cu(r,m)),S};let A;return this.getAttributes=function(){return A===void 0&&(A=M4e(r,m)),A},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=_4e++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=b,this}function z4e(i,e,t,n,r,s,o){const a=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,h=r.floatVertexTextures,u=r.maxVertexUniforms,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function y(S){const E=S.skeleton.bones;if(h)return 1024;{const M=Math.floor((u-20)/4),C=Math.min(M,E.length);return C<E.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+E.length+" bones. This GPU supports "+C+"."),0):C}}function g(S){let A;return S&&S.isTexture?A=S.encoding:S&&S.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),A=S.texture.encoding):A=Kn,l&&S&&S.isTexture&&S.format===wi&&S.type===Hu&&S.encoding===Fr&&(A=Kn),A}function v(S,A,E,T,M){const C=T.fog,D=S.isMeshStandardMaterial?T.environment:null,P=(S.isMeshStandardMaterial?t:e).get(S.envMap||D),I=p[S.type],k=M.isSkinnedMesh?y(M):0;S.precision!==null&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let G,U;if(I){const j=ya[I];G=j.vertexShader,U=j.fragmentShader}else G=S.vertexShader,U=S.fragmentShader;const Z=i.getRenderTarget(),$=S.alphaTest>0,W=S.clearcoat>0;return{isWebGL2:l,shaderID:I,shaderName:S.type,vertexShader:G,fragmentShader:U,defines:S.defines,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:M.isInstancedMesh===!0,instancingColor:M.isInstancedMesh===!0&&M.instanceColor!==null,supportsVertexTextures:d,outputEncoding:Z!==null?g(Z.texture):i.outputEncoding,map:!!S.map,mapEncoding:g(S.map),matcap:!!S.matcap,matcapEncoding:g(S.matcap),envMap:!!P,envMapMode:P&&P.mapping,envMapEncoding:g(P),envMapCubeUV:!!P&&(P.mapping===ey||P.mapping===kC),lightMap:!!S.lightMap,lightMapEncoding:g(S.lightMap),aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,emissiveMapEncoding:g(S.emissiveMap),bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===ave,tangentSpaceNormalMap:S.normalMapType===of,clearcoat:W,clearcoatMap:W&&!!S.clearcoatMap,clearcoatRoughnessMap:W&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:W&&!!S.clearcoatNormalMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,specularColorMapEncoding:g(S.specularColorMap),alphaMap:!!S.alphaMap,alphaTest:$,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenColorMapEncoding:g(S.sheenColorMap),sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!M.geometry&&!!M.geometry.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!M.geometry&&!!M.geometry.attributes.color&&M.geometry.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||!!S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!C,useFog:S.fog,fogExp2:C&&C.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:c,skinning:M.isSkinnedMesh===!0&&k>0,maxBones:k,useVertexTexture:h,morphTargets:!!M.geometry&&!!M.geometry.morphAttributes.position,morphNormals:!!M.geometry&&!!M.geometry.morphAttributes.normal,morphTargetsCount:M.geometry&&M.geometry.morphAttributes.position?M.geometry.morphAttributes.position.length:0,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:S.format,dithering:S.dithering,shadowMapEnabled:i.shadowMap.enabled&&E.length>0,shadowMapType:i.shadowMap.type,toneMapping:S.toneMapped?i.toneMapping:Sd,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===ju,flipSided:S.side===Nn,depthPacking:S.depthPacking!==void 0?S.depthPacking:!1,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||n.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function x(S){const A=[];if(S.shaderID?A.push(S.shaderID):(A.push($R(S.fragmentShader)),A.push($R(S.vertexShader))),S.defines!==void 0)for(const E in S.defines)A.push(E),A.push(S.defines[E]);if(S.isRawShaderMaterial===!1){for(let E=0;E<m.length;E++)A.push(S[m[E]]);A.push(i.outputEncoding),A.push(i.gammaFactor)}return A.push(S.customProgramCacheKey),A.join()}function _(S){const A=p[S.type];let E;if(A){const T=ya[A];E=Dn.clone(T.uniforms)}else E=S.uniforms;return E}function w(S,A){let E;for(let T=0,M=a.length;T<M;T++){const C=a[T];if(C.cacheKey===A){E=C,++E.usedTimes;break}}return E===void 0&&(E=new F4e(i,A,S,s),a.push(E)),E}function b(S){if(--S.usedTimes===0){const A=a.indexOf(S);a[A]=a[a.length-1],a.pop(),S.destroy()}}return{getParameters:v,getProgramCacheKey:x,getUniforms:_,acquireProgram:w,releaseProgram:b,programs:a}}function k4e(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function t(s){i.delete(s)}function n(s,o,a){i.get(s)[o]=a}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function B4e(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.program!==e.program?i.program.id-e.program.id:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function SN(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function AN(i){const e=[];let t=0;const n=[],r=[],s=[],o={id:-1};function a(){t=0,n.length=0,r.length=0,s.length=0}function l(f,p,m,y,g,v){let x=e[t];const _=i.get(m);return x===void 0?(x={id:f.id,object:f,geometry:p,material:m,program:_.program||o,groupOrder:y,renderOrder:f.renderOrder,z:g,group:v},e[t]=x):(x.id=f.id,x.object=f,x.geometry=p,x.material=m,x.program=_.program||o,x.groupOrder=y,x.renderOrder=f.renderOrder,x.z=g,x.group=v),t++,x}function c(f,p,m,y,g,v){const x=l(f,p,m,y,g,v);m.transmission>0?r.push(x):m.transparent===!0?s.push(x):n.push(x)}function h(f,p,m,y,g,v){const x=l(f,p,m,y,g,v);m.transmission>0?r.unshift(x):m.transparent===!0?s.unshift(x):n.unshift(x)}function u(f,p){n.length>1&&n.sort(f||B4e),r.length>1&&r.sort(p||SN),s.length>1&&s.sort(p||SN)}function d(){for(let f=t,p=e.length;f<p;f++){const m=e[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.program=null,m.group=null}}return{opaque:n,transmissive:r,transparent:s,init:a,push:c,unshift:h,finish:d,sort:u}}function U4e(i){let e=new WeakMap;function t(r,s){let o;return e.has(r)===!1?(o=new AN(i),e.set(r,[o])):s>=e.get(r).length?(o=new AN(i),e.get(r).push(o)):o=e.get(r)[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}function V4e(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new Pe};break;case"SpotLight":t={position:new R,direction:new R,color:new Pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new Pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new Pe,groundColor:new Pe};break;case"RectAreaLight":t={color:new Pe,position:new R,halfWidth:new R,halfHeight:new R};break}return i[e.id]=t,t}}}function G4e(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ae};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ae};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let j4e=0;function H4e(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function W4e(i,e){const t=new V4e,n=G4e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let h=0;h<9;h++)r.probe.push(new R);const s=new R,o=new Ce,a=new Ce;function l(h,u){let d=0,f=0,p=0;for(let E=0;E<9;E++)r.probe[E].set(0,0,0);let m=0,y=0,g=0,v=0,x=0,_=0,w=0,b=0;h.sort(H4e);const S=u!==!0?Math.PI:1;for(let E=0,T=h.length;E<T;E++){const M=h[E],C=M.color,D=M.intensity,P=M.distance,I=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)d+=C.r*D*S,f+=C.g*D*S,p+=C.b*D*S;else if(M.isLightProbe)for(let k=0;k<9;k++)r.probe[k].addScaledVector(M.sh.coefficients[k],D);else if(M.isDirectionalLight){const k=t.get(M);if(k.color.copy(M.color).multiplyScalar(M.intensity*S),M.castShadow){const G=M.shadow,U=n.get(M);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,r.directionalShadow[m]=U,r.directionalShadowMap[m]=I,r.directionalShadowMatrix[m]=M.shadow.matrix,_++}r.directional[m]=k,m++}else if(M.isSpotLight){const k=t.get(M);if(k.position.setFromMatrixPosition(M.matrixWorld),k.color.copy(C).multiplyScalar(D*S),k.distance=P,k.coneCos=Math.cos(M.angle),k.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),k.decay=M.decay,M.castShadow){const G=M.shadow,U=n.get(M);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,r.spotShadow[g]=U,r.spotShadowMap[g]=I,r.spotShadowMatrix[g]=M.shadow.matrix,b++}r.spot[g]=k,g++}else if(M.isRectAreaLight){const k=t.get(M);k.color.copy(C).multiplyScalar(D),k.halfWidth.set(M.width*.5,0,0),k.halfHeight.set(0,M.height*.5,0),r.rectArea[v]=k,v++}else if(M.isPointLight){const k=t.get(M);if(k.color.copy(M.color).multiplyScalar(M.intensity*S),k.distance=M.distance,k.decay=M.decay,M.castShadow){const G=M.shadow,U=n.get(M);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,U.shadowCameraNear=G.camera.near,U.shadowCameraFar=G.camera.far,r.pointShadow[y]=U,r.pointShadowMap[y]=I,r.pointShadowMatrix[y]=M.shadow.matrix,w++}r.point[y]=k,y++}else if(M.isHemisphereLight){const k=t.get(M);k.skyColor.copy(M.color).multiplyScalar(D*S),k.groundColor.copy(M.groundColor).multiplyScalar(D*S),r.hemi[x]=k,x++}}v>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Oe.LTC_FLOAT_1,r.rectAreaLTC2=Oe.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Oe.LTC_HALF_1,r.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const A=r.hash;(A.directionalLength!==m||A.pointLength!==y||A.spotLength!==g||A.rectAreaLength!==v||A.hemiLength!==x||A.numDirectionalShadows!==_||A.numPointShadows!==w||A.numSpotShadows!==b)&&(r.directional.length=m,r.spot.length=g,r.rectArea.length=v,r.point.length=y,r.hemi.length=x,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=w,r.spotShadowMatrix.length=b,A.directionalLength=m,A.pointLength=y,A.spotLength=g,A.rectAreaLength=v,A.hemiLength=x,A.numDirectionalShadows=_,A.numPointShadows=w,A.numSpotShadows=b,r.version=j4e++)}function c(h,u){let d=0,f=0,p=0,m=0,y=0;const g=u.matrixWorldInverse;for(let v=0,x=h.length;v<x;v++){const _=h[v];if(_.isDirectionalLight){const w=r.directional[d];w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(g),d++}else if(_.isSpotLight){const w=r.spot[p];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(g),p++}else if(_.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),a.identity(),o.copy(_.matrixWorld),o.premultiply(g),a.extractRotation(o),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(_.isPointLight){const w=r.point[f];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(g),f++}else if(_.isHemisphereLight){const w=r.hemi[y];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(g),w.direction.normalize(),y++}}}return{setup:l,setupView:c,state:r}}function TN(i,e){const t=new W4e(i,e),n=[],r=[];function s(){n.length=0,r.length=0}function o(u){n.push(u)}function a(u){r.push(u)}function l(u){t.setup(n,u)}function c(u){t.setupView(n,u)}return{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function $4e(i,e){let t=new WeakMap;function n(s,o=0){let a;return t.has(s)===!1?(a=new TN(i,e),t.set(s,[a])):o>=t.get(s).length?(a=new TN(i,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:n,dispose:r}}class XC extends Zn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=ove,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}XC.prototype.isMeshDepthMaterial=!0;class kX extends Zn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new R,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}kX.prototype.isMeshDistanceMaterial=!0;const q4e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,X4e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function BX(i,e,t){let n=new Wx;const r=new ae,s=new ae,o=new xt,a=new XC({depthPacking:vX}),l=new kX,c={},h=t.maxTextureSize,u={0:Nn,1:N1,2:ju},d=new Si({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ae},radius:{value:4}},vertexShader:q4e,fragmentShader:X4e}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new ze;p.setAttribute("position",new at(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Cn(p,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rX,this.render=function(_,w,b){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||_.length===0)return;const S=i.getRenderTarget(),A=i.getActiveCubeFace(),E=i.getActiveMipmapLevel(),T=i.state;T.setBlending(vr),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let M=0,C=_.length;M<C;M++){const D=_[M],P=D.shadow;if(P===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(P.autoUpdate===!1&&P.needsUpdate===!1)continue;r.copy(P.mapSize);const I=P.getFrameExtents();if(r.multiply(I),s.copy(P.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/I.x),r.x=s.x*I.x,P.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/I.y),r.y=s.y*I.y,P.mapSize.y=s.y)),P.map===null&&!P.isPointLightShadow&&this.type===g2){const G={minFilter:pi,magFilter:pi,format:wi};P.map=new jn(r.x,r.y,G),P.map.texture.name=D.name+".shadowMap",P.mapPass=new jn(r.x,r.y,G),P.camera.updateProjectionMatrix()}if(P.map===null){const G={minFilter:ui,magFilter:ui,format:wi};P.map=new jn(r.x,r.y,G),P.map.texture.name=D.name+".shadowMap",P.camera.updateProjectionMatrix()}i.setRenderTarget(P.map),i.clear();const k=P.getViewportCount();for(let G=0;G<k;G++){const U=P.getViewport(G);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),T.viewport(o),P.updateMatrices(D,G),n=P.getFrustum(),x(w,b,P.camera,D,this.type)}!P.isPointLightShadow&&this.type===g2&&g(P,b),P.needsUpdate=!1}y.needsUpdate=!1,i.setRenderTarget(S,A,E)};function g(_,w){const b=e.update(m);d.defines.VSM_SAMPLES!==_.blurSamples&&(d.defines.VSM_SAMPLES=_.blurSamples,f.defines.VSM_SAMPLES=_.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),d.uniforms.shadow_pass.value=_.map.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,i.setRenderTarget(_.mapPass),i.clear(),i.renderBufferDirect(w,null,b,d,m,null),f.uniforms.shadow_pass.value=_.mapPass.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,i.setRenderTarget(_.map),i.clear(),i.renderBufferDirect(w,null,b,f,m,null)}function v(_,w,b,S,A,E,T){let M=null;const C=S.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(C!==void 0?M=C:M=S.isPointLight===!0?l:a,i.localClippingEnabled&&b.clipShadows===!0&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0){const D=M.uuid,P=b.uuid;let I=c[D];I===void 0&&(I={},c[D]=I);let k=I[P];k===void 0&&(k=M.clone(),I[P]=k),M=k}return M.visible=b.visible,M.wireframe=b.wireframe,T===g2?M.side=b.shadowSide!==null?b.shadowSide:b.side:M.side=b.shadowSide!==null?b.shadowSide:u[b.side],M.alphaMap=b.alphaMap,M.alphaTest=b.alphaTest,M.clipShadows=b.clipShadows,M.clippingPlanes=b.clippingPlanes,M.clipIntersection=b.clipIntersection,M.displacementMap=b.displacementMap,M.displacementScale=b.displacementScale,M.displacementBias=b.displacementBias,M.wireframeLinewidth=b.wireframeLinewidth,M.linewidth=b.linewidth,S.isPointLight===!0&&M.isMeshDistanceMaterial===!0&&(M.referencePosition.setFromMatrixPosition(S.matrixWorld),M.nearDistance=A,M.farDistance=E),M}function x(_,w,b,S,A){if(_.visible===!1)return;if(_.layers.test(w.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&A===g2)&&(!_.frustumCulled||n.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,_.matrixWorld);const M=e.update(_),C=_.material;if(Array.isArray(C)){const D=M.groups;for(let P=0,I=D.length;P<I;P++){const k=D[P],G=C[k.materialIndex];if(G&&G.visible){const U=v(_,M,G,S,b.near,b.far,A);i.renderBufferDirect(b,null,M,U,_,k)}}}else if(C.visible){const D=v(_,M,C,S,b.near,b.far,A);i.renderBufferDirect(b,null,M,D,_,null)}}const T=_.children;for(let M=0,C=T.length;M<C;M++)x(T[M],w,b,S,A)}}function Y4e(i,e,t){const n=t.isWebGL2;function r(){let ce=!1;const Ee=new xt;let ve=null;const Re=new xt(0,0,0,0);return{setMask:function(se){ve!==se&&!ce&&(i.colorMask(se,se,se,se),ve=se)},setLocked:function(se){ce=se},setClear:function(se,be,Ge,et,Mt){Mt===!0&&(se*=et,be*=et,Ge*=et),Ee.set(se,be,Ge,et),Re.equals(Ee)===!1&&(i.clearColor(se,be,Ge,et),Re.copy(Ee))},reset:function(){ce=!1,ve=null,Re.set(-1,0,0,0)}}}function s(){let ce=!1,Ee=null,ve=null,Re=null;return{setTest:function(se){se?H(2929):V(2929)},setMask:function(se){Ee!==se&&!ce&&(i.depthMask(se),Ee=se)},setFunc:function(se){if(ve!==se){if(se)switch(se){case Xge:i.depthFunc(512);break;case Yge:i.depthFunc(519);break;case Zge:i.depthFunc(513);break;case TA:i.depthFunc(515);break;case Qge:i.depthFunc(514);break;case Kge:i.depthFunc(518);break;case Jge:i.depthFunc(516);break;case e2e:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);ve=se}},setLocked:function(se){ce=se},setClear:function(se){Re!==se&&(i.clearDepth(se),Re=se)},reset:function(){ce=!1,Ee=null,ve=null,Re=null}}}function o(){let ce=!1,Ee=null,ve=null,Re=null,se=null,be=null,Ge=null,et=null,Mt=null;return{setTest:function(mt){ce||(mt?H(2960):V(2960))},setMask:function(mt){Ee!==mt&&!ce&&(i.stencilMask(mt),Ee=mt)},setFunc:function(mt,yi,Vi){(ve!==mt||Re!==yi||se!==Vi)&&(i.stencilFunc(mt,yi,Vi),ve=mt,Re=yi,se=Vi)},setOp:function(mt,yi,Vi){(be!==mt||Ge!==yi||et!==Vi)&&(i.stencilOp(mt,yi,Vi),be=mt,Ge=yi,et=Vi)},setLocked:function(mt){ce=mt},setClear:function(mt){Mt!==mt&&(i.clearStencil(mt),Mt=mt)},reset:function(){ce=!1,Ee=null,ve=null,Re=null,se=null,be=null,Ge=null,et=null,Mt=null}}}const a=new r,l=new s,c=new o;let h={},u=null,d={},f=null,p=!1,m=null,y=null,g=null,v=null,x=null,_=null,w=null,b=!1,S=null,A=null,E=null,T=null,M=null;const C=i.getParameter(35661);let D=!1,P=0;const I=i.getParameter(7938);I.indexOf("WebGL")!==-1?(P=parseFloat(/^WebGL (\d)/.exec(I)[1]),D=P>=1):I.indexOf("OpenGL ES")!==-1&&(P=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),D=P>=2);let k=null,G={};const U=i.getParameter(3088),Z=i.getParameter(2978),$=new xt().fromArray(U),W=new xt().fromArray(Z);function X(ce,Ee,ve){const Re=new Uint8Array(4),se=i.createTexture();i.bindTexture(ce,se),i.texParameteri(ce,10241,9728),i.texParameteri(ce,10240,9728);for(let be=0;be<ve;be++)i.texImage2D(Ee+be,0,6408,1,1,0,6408,5121,Re);return se}const j={};j[3553]=X(3553,3553,1),j[34067]=X(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),H(2929),l.setFunc(TA),z(!1),Y(PR),H(2884),ne(vr);function H(ce){h[ce]!==!0&&(i.enable(ce),h[ce]=!0)}function V(ce){h[ce]!==!1&&(i.disable(ce),h[ce]=!1)}function B(ce){ce!==u&&(i.bindFramebuffer(36160,ce),u=ce)}function q(ce,Ee){return Ee===null&&u!==null&&(Ee=u),d[ce]!==Ee?(i.bindFramebuffer(ce,Ee),d[ce]=Ee,n&&(ce===36009&&(d[36160]=Ee),ce===36160&&(d[36009]=Ee)),!0):!1}function K(ce){return f!==ce?(i.useProgram(ce),f=ce,!0):!1}const Q={[Zc]:32774,[Uge]:32778,[Vge]:32779};if(n)Q[OR]=32775,Q[RR]=32776;else{const ce=e.get("EXT_blend_minmax");ce!==null&&(Q[OR]=ce.MIN_EXT,Q[RR]=ce.MAX_EXT)}const oe={[AA]:0,[Gge]:1,[jge]:768,[aX]:770,[qge]:776,[uX]:774,[cX]:772,[Hge]:769,[lX]:771,[$ge]:775,[Wge]:773};function ne(ce,Ee,ve,Re,se,be,Ge,et){if(ce===vr){p===!0&&(V(3042),p=!1);return}if(p===!1&&(H(3042),p=!0),ce!==oX){if(ce!==m||et!==b){if((y!==Zc||x!==Zc)&&(i.blendEquation(32774),y=Zc,x=Zc),et)switch(ce){case H2:i.blendFuncSeparate(1,771,1,771);break;case SA:i.blendFunc(1,1);break;case LR:i.blendFuncSeparate(0,0,769,771);break;case IR:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case H2:i.blendFuncSeparate(770,771,1,771);break;case SA:i.blendFunc(770,1);break;case LR:i.blendFunc(0,769);break;case IR:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}g=null,v=null,_=null,w=null,m=ce,b=et}return}se=se||Ee,be=be||ve,Ge=Ge||Re,(Ee!==y||se!==x)&&(i.blendEquationSeparate(Q[Ee],Q[se]),y=Ee,x=se),(ve!==g||Re!==v||be!==_||Ge!==w)&&(i.blendFuncSeparate(oe[ve],oe[Re],oe[be],oe[Ge]),g=ve,v=Re,_=be,w=Ge),m=ce,b=null}function L(ce,Ee){ce.side===ju?V(2884):H(2884);let ve=ce.side===Nn;Ee&&(ve=!ve),z(ve),ce.blending===H2&&ce.transparent===!1?ne(vr):ne(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.premultipliedAlpha),l.setFunc(ce.depthFunc),l.setTest(ce.depthTest),l.setMask(ce.depthWrite),a.setMask(ce.colorWrite);const Re=ce.stencilWrite;c.setTest(Re),Re&&(c.setMask(ce.stencilWriteMask),c.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),c.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),ee(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?H(32926):V(32926)}function z(ce){S!==ce&&(ce?i.frontFace(2304):i.frontFace(2305),S=ce)}function Y(ce){ce!==zge?(H(2884),ce!==A&&(ce===PR?i.cullFace(1029):ce===kge?i.cullFace(1028):i.cullFace(1032))):V(2884),A=ce}function J(ce){ce!==E&&(D&&i.lineWidth(ce),E=ce)}function ee(ce,Ee,ve){ce?(H(32823),(T!==Ee||M!==ve)&&(i.polygonOffset(Ee,ve),T=Ee,M=ve)):V(32823)}function F(ce){ce?H(3089):V(3089)}function N(ce){ce===void 0&&(ce=33984+C-1),k!==ce&&(i.activeTexture(ce),k=ce)}function te(ce,Ee){k===null&&N();let ve=G[k];ve===void 0&&(ve={type:void 0,texture:void 0},G[k]=ve),(ve.type!==ce||ve.texture!==Ee)&&(i.bindTexture(ce,Ee||j[ce]),ve.type=ce,ve.texture=Ee)}function le(){const ce=G[k];ce!==void 0&&ce.type!==void 0&&(i.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function re(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ue(){try{i.texImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function pe(){try{i.texImage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function xe(ce){$.equals(ce)===!1&&(i.scissor(ce.x,ce.y,ce.z,ce.w),$.copy(ce))}function Se(ce){W.equals(ce)===!1&&(i.viewport(ce.x,ce.y,ce.z,ce.w),W.copy(ce))}function we(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),n===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),h={},k=null,G={},u=null,d={},f=null,p=!1,m=null,y=null,g=null,v=null,x=null,_=null,w=null,b=!1,S=null,A=null,E=null,T=null,M=null,$.set(0,0,i.canvas.width,i.canvas.height),W.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:H,disable:V,bindFramebuffer:q,bindXRFramebuffer:B,useProgram:K,setBlending:ne,setMaterial:L,setFlipSided:z,setCullFace:Y,setLineWidth:J,setPolygonOffset:ee,setScissorTest:F,activeTexture:N,bindTexture:te,unbindTexture:le,compressedTexImage2D:re,texImage2D:ue,texImage3D:pe,scissor:xe,viewport:Se,reset:we}}function Z4e(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=new WeakMap;let f,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(F,N){return p?new OffscreenCanvas(F,N):jx("canvas")}function y(F,N,te,le){let re=1;if((F.width>le||F.height>le)&&(re=le/Math.max(F.width,F.height)),re<1||N===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const ue=N?xX:Math.floor,pe=ue(re*F.width),xe=ue(re*F.height);f===void 0&&(f=m(pe,xe));const Se=te?m(pe,xe):f;return Se.width=pe,Se.height=xe,Se.getContext("2d").drawImage(F,0,0,pe,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+pe+"x"+xe+")."),Se}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function g(F){return DA(F.width)&&DA(F.height)}function v(F){return a?!1:F.wrapS!==ji||F.wrapT!==ji||F.minFilter!==ui&&F.minFilter!==pi}function x(F,N){return F.generateMipmaps&&N&&F.minFilter!==ui&&F.minFilter!==pi}function _(F,N,te,le,re=1){i.generateMipmap(F);const ue=n.get(N);ue.__maxMipLevel=Math.log2(Math.max(te,le,re))}function w(F,N,te,le){if(a===!1)return N;if(F!==null){if(i[F]!==void 0)return i[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let re=N;return N===6403&&(te===5126&&(re=33326),te===5131&&(re=33325),te===5121&&(re=33321)),N===6407&&(te===5126&&(re=34837),te===5131&&(re=34843),te===5121&&(re=32849)),N===6408&&(te===5126&&(re=34836),te===5131&&(re=34842),te===5121&&(re=le===Fr?35907:32856)),(re===33325||re===33326||re===34842||re===34836)&&e.get("EXT_color_buffer_float"),re}function b(F){return F===ui||F===EA||F===CA?9728:9729}function S(F){const N=F.target;N.removeEventListener("dispose",S),E(N),N.isVideoTexture&&d.delete(N),o.memory.textures--}function A(F){const N=F.target;N.removeEventListener("dispose",A),T(N)}function E(F){const N=n.get(F);N.__webglInit!==void 0&&(i.deleteTexture(N.__webglTexture),n.remove(F))}function T(F){const N=F.texture,te=n.get(F),le=n.get(N);if(F){if(le.__webglTexture!==void 0&&(i.deleteTexture(le.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let re=0;re<6;re++)i.deleteFramebuffer(te.__webglFramebuffer[re]),te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer[re]);else i.deleteFramebuffer(te.__webglFramebuffer),te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&i.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer&&i.deleteRenderbuffer(te.__webglColorRenderbuffer),te.__webglDepthRenderbuffer&&i.deleteRenderbuffer(te.__webglDepthRenderbuffer);if(F.isWebGLMultipleRenderTargets)for(let re=0,ue=N.length;re<ue;re++){const pe=n.get(N[re]);pe.__webglTexture&&(i.deleteTexture(pe.__webglTexture),o.memory.textures--),n.remove(N[re])}n.remove(N),n.remove(F)}}let M=0;function C(){M=0}function D(){const F=M;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),M+=1,F}function P(F,N){const te=n.get(F);if(F.isVideoTexture&&L(F),F.version>0&&te.__version!==F.version){const le=F.image;if(le===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{X(te,F,N);return}}t.activeTexture(33984+N),t.bindTexture(3553,te.__webglTexture)}function I(F,N){const te=n.get(F);if(F.version>0&&te.__version!==F.version){X(te,F,N);return}t.activeTexture(33984+N),t.bindTexture(35866,te.__webglTexture)}function k(F,N){const te=n.get(F);if(F.version>0&&te.__version!==F.version){X(te,F,N);return}t.activeTexture(33984+N),t.bindTexture(32879,te.__webglTexture)}function G(F,N){const te=n.get(F);if(F.version>0&&te.__version!==F.version){j(te,F,N);return}t.activeTexture(33984+N),t.bindTexture(34067,te.__webglTexture)}const U={[j0]:10497,[ji]:33071,[A6]:33648},Z={[ui]:9728,[EA]:9984,[CA]:9986,[pi]:9729,[hX]:9985,[sf]:9987};function $(F,N,te){if(te?(i.texParameteri(F,10242,U[N.wrapS]),i.texParameteri(F,10243,U[N.wrapT]),(F===32879||F===35866)&&i.texParameteri(F,32882,U[N.wrapR]),i.texParameteri(F,10240,Z[N.magFilter]),i.texParameteri(F,10241,Z[N.minFilter])):(i.texParameteri(F,10242,33071),i.texParameteri(F,10243,33071),(F===32879||F===35866)&&i.texParameteri(F,32882,33071),(N.wrapS!==ji||N.wrapT!==ji)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(F,10240,b(N.magFilter)),i.texParameteri(F,10241,b(N.minFilter)),N.minFilter!==ui&&N.minFilter!==pi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const le=e.get("EXT_texture_filter_anisotropic");if(N.type===Oo&&e.has("OES_texture_float_linear")===!1||a===!1&&N.type===Mu&&e.has("OES_texture_half_float_linear")===!1)return;(N.anisotropy>1||n.get(N).__currentAnisotropy)&&(i.texParameterf(F,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),n.get(N).__currentAnisotropy=N.anisotropy)}}function W(F,N){F.__webglInit===void 0&&(F.__webglInit=!0,N.addEventListener("dispose",S),F.__webglTexture=i.createTexture(),o.memory.textures++)}function X(F,N,te){let le=3553;N.isDataTexture2DArray&&(le=35866),N.isDataTexture3D&&(le=32879),W(F,N),t.activeTexture(33984+te),t.bindTexture(le,F.__webglTexture),i.pixelStorei(37440,N.flipY),i.pixelStorei(37441,N.premultiplyAlpha),i.pixelStorei(3317,N.unpackAlignment),i.pixelStorei(37443,0);const re=v(N)&&g(N.image)===!1,ue=y(N.image,re,!1,h),pe=g(ue)||a,xe=s.convert(N.format);let Se=s.convert(N.type),we=w(N.internalFormat,xe,Se,N.encoding);$(le,N,pe);let ce;const Ee=N.mipmaps;if(N.isDepthTexture)we=6402,a?N.type===Oo?we=36012:N.type===y5?we=33190:N.type===W2?we=35056:we=33189:N.type===Oo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),N.format===i1&&we===6402&&N.type!==Wv&&N.type!==y5&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=Wv,Se=s.convert(N.type)),N.format===$v&&we===6402&&(we=34041,N.type!==W2&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=W2,Se=s.convert(N.type))),t.texImage2D(3553,0,we,ue.width,ue.height,0,xe,Se,null);else if(N.isDataTexture)if(Ee.length>0&&pe){for(let ve=0,Re=Ee.length;ve<Re;ve++)ce=Ee[ve],t.texImage2D(3553,ve,we,ce.width,ce.height,0,xe,Se,ce.data);N.generateMipmaps=!1,F.__maxMipLevel=Ee.length-1}else t.texImage2D(3553,0,we,ue.width,ue.height,0,xe,Se,ue.data),F.__maxMipLevel=0;else if(N.isCompressedTexture){for(let ve=0,Re=Ee.length;ve<Re;ve++)ce=Ee[ve],N.format!==wi&&N.format!==R0?xe!==null?t.compressedTexImage2D(3553,ve,we,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ve,we,ce.width,ce.height,0,xe,Se,ce.data);F.__maxMipLevel=Ee.length-1}else if(N.isDataTexture2DArray)t.texImage3D(35866,0,we,ue.width,ue.height,ue.depth,0,xe,Se,ue.data),F.__maxMipLevel=0;else if(N.isDataTexture3D)t.texImage3D(32879,0,we,ue.width,ue.height,ue.depth,0,xe,Se,ue.data),F.__maxMipLevel=0;else if(Ee.length>0&&pe){for(let ve=0,Re=Ee.length;ve<Re;ve++)ce=Ee[ve],t.texImage2D(3553,ve,we,xe,Se,ce);N.generateMipmaps=!1,F.__maxMipLevel=Ee.length-1}else t.texImage2D(3553,0,we,xe,Se,ue),F.__maxMipLevel=0;x(N,pe)&&_(le,N,ue.width,ue.height),F.__version=N.version,N.onUpdate&&N.onUpdate(N)}function j(F,N,te){if(N.image.length!==6)return;W(F,N),t.activeTexture(33984+te),t.bindTexture(34067,F.__webglTexture),i.pixelStorei(37440,N.flipY),i.pixelStorei(37441,N.premultiplyAlpha),i.pixelStorei(3317,N.unpackAlignment),i.pixelStorei(37443,0);const le=N&&(N.isCompressedTexture||N.image[0].isCompressedTexture),re=N.image[0]&&N.image[0].isDataTexture,ue=[];for(let ve=0;ve<6;ve++)!le&&!re?ue[ve]=y(N.image[ve],!1,!0,c):ue[ve]=re?N.image[ve].image:N.image[ve];const pe=ue[0],xe=g(pe)||a,Se=s.convert(N.format),we=s.convert(N.type),ce=w(N.internalFormat,Se,we,N.encoding);$(34067,N,xe);let Ee;if(le){for(let ve=0;ve<6;ve++){Ee=ue[ve].mipmaps;for(let Re=0;Re<Ee.length;Re++){const se=Ee[Re];N.format!==wi&&N.format!==R0?Se!==null?t.compressedTexImage2D(34069+ve,Re,ce,se.width,se.height,0,se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ve,Re,ce,se.width,se.height,0,Se,we,se.data)}}F.__maxMipLevel=Ee.length-1}else{Ee=N.mipmaps;for(let ve=0;ve<6;ve++)if(re){t.texImage2D(34069+ve,0,ce,ue[ve].width,ue[ve].height,0,Se,we,ue[ve].data);for(let Re=0;Re<Ee.length;Re++){const be=Ee[Re].image[ve].image;t.texImage2D(34069+ve,Re+1,ce,be.width,be.height,0,Se,we,be.data)}}else{t.texImage2D(34069+ve,0,ce,Se,we,ue[ve]);for(let Re=0;Re<Ee.length;Re++){const se=Ee[Re];t.texImage2D(34069+ve,Re+1,ce,Se,we,se.image[ve])}}F.__maxMipLevel=Ee.length}x(N,xe)&&_(34067,N,pe.width,pe.height),F.__version=N.version,N.onUpdate&&N.onUpdate(N)}function H(F,N,te,le,re){const ue=s.convert(te.format),pe=s.convert(te.type),xe=w(te.internalFormat,ue,pe,te.encoding);re===32879||re===35866?t.texImage3D(re,0,xe,N.width,N.height,N.depth,0,ue,pe,null):t.texImage2D(re,0,xe,N.width,N.height,0,ue,pe,null),t.bindFramebuffer(36160,F),i.framebufferTexture2D(36160,le,re,n.get(te).__webglTexture,0),t.bindFramebuffer(36160,null)}function V(F,N,te){if(i.bindRenderbuffer(36161,F),N.depthBuffer&&!N.stencilBuffer){let le=33189;if(te){const re=N.depthTexture;re&&re.isDepthTexture&&(re.type===Oo?le=36012:re.type===y5&&(le=33190));const ue=ne(N);i.renderbufferStorageMultisample(36161,ue,le,N.width,N.height)}else i.renderbufferStorage(36161,le,N.width,N.height);i.framebufferRenderbuffer(36160,36096,36161,F)}else if(N.depthBuffer&&N.stencilBuffer){if(te){const le=ne(N);i.renderbufferStorageMultisample(36161,le,35056,N.width,N.height)}else i.renderbufferStorage(36161,34041,N.width,N.height);i.framebufferRenderbuffer(36160,33306,36161,F)}else{const le=N.isWebGLMultipleRenderTargets===!0?N.texture[0]:N.texture,re=s.convert(le.format),ue=s.convert(le.type),pe=w(le.internalFormat,re,ue,le.encoding);if(te){const xe=ne(N);i.renderbufferStorageMultisample(36161,xe,pe,N.width,N.height)}else i.renderbufferStorage(36161,pe,N.width,N.height)}i.bindRenderbuffer(36161,null)}function B(F,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),P(N.depthTexture,0);const le=n.get(N.depthTexture).__webglTexture;if(N.depthTexture.format===i1)i.framebufferTexture2D(36160,36096,3553,le,0);else if(N.depthTexture.format===$v)i.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function q(F){const N=n.get(F),te=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture){if(te)throw new Error("target.depthTexture not supported in Cube render targets");B(N.__webglFramebuffer,F)}else if(te){N.__webglDepthbuffer=[];for(let le=0;le<6;le++)t.bindFramebuffer(36160,N.__webglFramebuffer[le]),N.__webglDepthbuffer[le]=i.createRenderbuffer(),V(N.__webglDepthbuffer[le],F,!1)}else t.bindFramebuffer(36160,N.__webglFramebuffer),N.__webglDepthbuffer=i.createRenderbuffer(),V(N.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function K(F){const N=F.texture,te=n.get(F),le=n.get(N);F.addEventListener("dispose",A),F.isWebGLMultipleRenderTargets!==!0&&(le.__webglTexture=i.createTexture(),le.__version=N.version,o.memory.textures++);const re=F.isWebGLCubeRenderTarget===!0,ue=F.isWebGLMultipleRenderTargets===!0,pe=F.isWebGLMultisampleRenderTarget===!0,xe=N.isDataTexture3D||N.isDataTexture2DArray,Se=g(F)||a;if(a&&N.format===R0&&(N.type===Oo||N.type===Mu)&&(N.format=wi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),re){te.__webglFramebuffer=[];for(let we=0;we<6;we++)te.__webglFramebuffer[we]=i.createFramebuffer()}else if(te.__webglFramebuffer=i.createFramebuffer(),ue)if(r.drawBuffers){const we=F.texture;for(let ce=0,Ee=we.length;ce<Ee;ce++){const ve=n.get(we[ce]);ve.__webglTexture===void 0&&(ve.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(pe)if(a){te.__webglMultisampledFramebuffer=i.createFramebuffer(),te.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,te.__webglColorRenderbuffer);const we=s.convert(N.format),ce=s.convert(N.type),Ee=w(N.internalFormat,we,ce,N.encoding),ve=ne(F);i.renderbufferStorageMultisample(36161,ve,Ee,F.width,F.height),t.bindFramebuffer(36160,te.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,te.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),F.depthBuffer&&(te.__webglDepthRenderbuffer=i.createRenderbuffer(),V(te.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(re){t.bindTexture(34067,le.__webglTexture),$(34067,N,Se);for(let we=0;we<6;we++)H(te.__webglFramebuffer[we],F,N,36064,34069+we);x(N,Se)&&_(34067,N,F.width,F.height),t.unbindTexture()}else if(ue){const we=F.texture;for(let ce=0,Ee=we.length;ce<Ee;ce++){const ve=we[ce],Re=n.get(ve);t.bindTexture(3553,Re.__webglTexture),$(3553,ve,Se),H(te.__webglFramebuffer,F,ve,36064+ce,3553),x(ve,Se)&&_(3553,ve,F.width,F.height)}t.unbindTexture()}else{let we=3553;xe&&(a?we=N.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(we,le.__webglTexture),$(we,N,Se),H(te.__webglFramebuffer,F,N,36064,we),x(N,Se)&&_(we,N,F.width,F.height,F.depth),t.unbindTexture()}F.depthBuffer&&q(F)}function Q(F){const N=g(F)||a,te=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let le=0,re=te.length;le<re;le++){const ue=te[le];if(x(ue,N)){const pe=F.isWebGLCubeRenderTarget?34067:3553,xe=n.get(ue).__webglTexture;t.bindTexture(pe,xe),_(pe,ue,F.width,F.height),t.unbindTexture()}}}function oe(F){if(F.isWebGLMultisampleRenderTarget)if(a){const N=F.width,te=F.height;let le=16384;F.depthBuffer&&(le|=256),F.stencilBuffer&&(le|=1024);const re=n.get(F);t.bindFramebuffer(36008,re.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,re.__webglFramebuffer),i.blitFramebuffer(0,0,N,te,0,0,N,te,le,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,re.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ne(F){return a&&F.isWebGLMultisampleRenderTarget?Math.min(u,F.samples):0}function L(F){const N=o.render.frame;d.get(F)!==N&&(d.set(F,N),F.update())}let z=!1,Y=!1;function J(F,N){F&&F.isWebGLRenderTarget&&(z===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),F=F.texture),P(F,N)}function ee(F,N){F&&F.isWebGLCubeRenderTarget&&(Y===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Y=!0),F=F.texture),G(F,N)}this.allocateTextureUnit=D,this.resetTextureUnits=C,this.setTexture2D=P,this.setTexture2DArray=I,this.setTexture3D=k,this.setTextureCube=G,this.setupRenderTarget=K,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=oe,this.safeSetTexture2D=J,this.safeSetTextureCube=ee}function Q4e(i,e,t){const n=t.isWebGL2;function r(s){let o;if(s===Hu)return 5121;if(s===h2e)return 32819;if(s===d2e)return 32820;if(s===f2e)return 33635;if(s===l2e)return 5120;if(s===c2e)return 5122;if(s===Wv)return 5123;if(s===u2e)return 5124;if(s===y5)return 5125;if(s===Oo)return 5126;if(s===Mu)return n?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===p2e)return 6406;if(s===R0)return 6407;if(s===wi)return 6408;if(s===m2e)return 6409;if(s===g2e)return 6410;if(s===i1)return 6402;if(s===$v)return 34041;if(s===y2e)return 6403;if(s===x2e)return 36244;if(s===_2e)return 33319;if(s===b2e)return 33320;if(s===w2e)return 36248;if(s===S2e)return 36249;if(s===NR||s===FR||s===zR||s===kR)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===NR)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===FR)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===zR)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===kR)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===BR||s===UR||s===VR||s===GR)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===BR)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===UR)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===VR)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===GR)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===A2e)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===jR||s===HR)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===jR)return o.COMPRESSED_RGB8_ETC2;if(s===HR)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===T2e||s===M2e||s===E2e||s===C2e||s===D2e||s===P2e||s===L2e||s===I2e||s===O2e||s===R2e||s===N2e||s===F2e||s===z2e||s===k2e||s===U2e||s===V2e||s===G2e||s===j2e||s===H2e||s===W2e||s===$2e||s===q2e||s===X2e||s===Y2e||s===Z2e||s===Q2e||s===K2e||s===J2e)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===B2e)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===W2)return n?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class UX extends or{constructor(e=[]){super(),this.cameras=e}}UX.prototype.isArrayCamera=!0;let Js=class extends Pt{constructor(){super(),this.type="Group"}};Js.prototype.isGroup=!0;const K4e={type:"move"};class ib{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Js,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Js,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Js,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(r=t.getPose(e.targetRaySpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(K4e))),c&&e.hand){o=!0;for(const m of e.hand.values()){const y=t.getJointPose(m,n);if(c.joints[m.jointName]===void 0){const v=new Js;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const g=c.joints[m.jointName];y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=y.radius),g.visible=y!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],d=h.position.distanceTo(u.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class J4e extends hc{constructor(e,t){super();const n=this,r=e.state;let s=null,o=1,a=null,l="local-floor",c=null,h=null,u=null,d=null,f=null,p=!1,m=null,y=null,g=null,v=null,x=null,_=null;const w=[],b=new Map,S=new or;S.layers.enable(1),S.viewport=new xt;const A=new or;A.layers.enable(2),A.viewport=new xt;const E=[S,A],T=new UX;T.layers.enable(1),T.layers.enable(2);let M=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let H=w[j];return H===void 0&&(H=new ib,w[j]=H),H.getTargetRaySpace()},this.getControllerGrip=function(j){let H=w[j];return H===void 0&&(H=new ib,w[j]=H),H.getGripSpace()},this.getHand=function(j){let H=w[j];return H===void 0&&(H=new ib,w[j]=H),H.getHandSpace()};function D(j){const H=b.get(j.inputSource);H&&H.dispatchEvent({type:j.type,data:j.inputSource})}function P(){b.forEach(function(j,H){j.disconnect(H)}),b.clear(),M=null,C=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),m&&t.deleteFramebuffer(m),y&&t.deleteRenderbuffer(y),g&&t.deleteRenderbuffer(g),u=null,m=null,y=null,g=null,f=null,d=null,h=null,s=null,X.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){o=j,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){l=j,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=async function(j){if(s=j,s!==null){s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",P),s.addEventListener("inputsourceschange",I);const H=t.getContextAttributes();if(H.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const V={antialias:H.antialias,alpha:H.alpha,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(s,t,V),s.updateRenderState({baseLayer:f})}else if(t instanceof WebGLRenderingContext){const V={antialias:!0,alpha:H.alpha,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(s,t,V),s.updateRenderState({layers:[f]})}else{p=H.antialias;let V=null;H.depth&&(_=256,H.stencil&&(_|=1024),x=H.stencil?33306:36096,V=H.stencil?35056:33190);const B={colorFormat:H.alpha?32856:32849,depthFormat:V,scaleFactor:o};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer(B),u=t.createFramebuffer(),s.updateRenderState({layers:[d]}),p&&(m=t.createFramebuffer(),y=t.createRenderbuffer(),t.bindRenderbuffer(36161,y),t.renderbufferStorageMultisample(36161,4,32856,d.textureWidth,d.textureHeight),r.bindFramebuffer(36160,m),t.framebufferRenderbuffer(36160,36064,36161,y),t.bindRenderbuffer(36161,null),V!==null&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,V,d.textureWidth,d.textureHeight),t.framebufferRenderbuffer(36160,x,36161,g),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(l),X.setContext(s),X.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function I(j){const H=s.inputSources;for(let V=0;V<w.length;V++)b.set(H[V],w[V]);for(let V=0;V<j.removed.length;V++){const B=j.removed[V],q=b.get(B);q&&(q.dispatchEvent({type:"disconnected",data:B}),b.delete(B))}for(let V=0;V<j.added.length;V++){const B=j.added[V],q=b.get(B);q&&q.dispatchEvent({type:"connected",data:B})}}const k=new R,G=new R;function U(j,H,V){k.setFromMatrixPosition(H.matrixWorld),G.setFromMatrixPosition(V.matrixWorld);const B=k.distanceTo(G),q=H.projectionMatrix.elements,K=V.projectionMatrix.elements,Q=q[14]/(q[10]-1),oe=q[14]/(q[10]+1),ne=(q[9]+1)/q[5],L=(q[9]-1)/q[5],z=(q[8]-1)/q[0],Y=(K[8]+1)/K[0],J=Q*z,ee=Q*Y,F=B/(-z+Y),N=F*-z;H.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(N),j.translateZ(F),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const te=Q+F,le=oe+F,re=J-N,ue=ee+(B-N),pe=ne*oe/le*te,xe=L*oe/le*te;j.projectionMatrix.makePerspective(re,ue,pe,xe,te,le)}function Z(j,H){H===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(H.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(s===null)return;T.near=A.near=S.near=j.near,T.far=A.far=S.far=j.far,(M!==T.near||C!==T.far)&&(s.updateRenderState({depthNear:T.near,depthFar:T.far}),M=T.near,C=T.far);const H=j.parent,V=T.cameras;Z(T,H);for(let q=0;q<V.length;q++)Z(V[q],H);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),j.position.copy(T.position),j.quaternion.copy(T.quaternion),j.scale.copy(T.scale),j.matrix.copy(T.matrix),j.matrixWorld.copy(T.matrixWorld);const B=j.children;for(let q=0,K=B.length;q<K;q++)B[q].updateMatrixWorld(!0);V.length===2?U(T,S,A):T.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(j){d!==null&&(d.fixedFoveation=j),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=j)};let $=null;function W(j,H){if(c=H.getViewerPose(a),v=H,c!==null){const B=c.views;f!==null&&r.bindXRFramebuffer(f.framebuffer);let q=!1;B.length!==T.cameras.length&&(T.cameras.length=0,q=!0);for(let K=0;K<B.length;K++){const Q=B[K];let oe=null;if(f!==null)oe=f.getViewport(Q);else{const L=h.getViewSubImage(d,Q);r.bindXRFramebuffer(u),L.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,x,3553,L.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,L.colorTexture,0),oe=L.viewport}const ne=E[K];ne.matrix.fromArray(Q.transform.matrix),ne.projectionMatrix.fromArray(Q.projectionMatrix),ne.viewport.set(oe.x,oe.y,oe.width,oe.height),K===0&&T.matrix.copy(ne.matrix),q===!0&&T.cameras.push(ne)}p&&(r.bindXRFramebuffer(m),_!==null&&t.clear(_))}const V=s.inputSources;for(let B=0;B<w.length;B++){const q=w[B],K=V[B];q.update(K,H,a)}if($&&$(j,H),p){const B=d.textureWidth,q=d.textureHeight;r.bindFramebuffer(36008,m),r.bindFramebuffer(36009,u),t.invalidateFramebuffer(36008,[x]),t.invalidateFramebuffer(36009,[x]),t.blitFramebuffer(0,0,B,q,0,0,B,q,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,m)}v=null}const X=new MX;X.setAnimationLoop(W),this.setAnimationLoop=function(j){$=j},this.dispose=function(){}}}function e5e(i){function e(g,v){g.fogColor.value.copy(v.color),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function t(g,v,x,_,w){v.isMeshBasicMaterial?n(g,v):v.isMeshLambertMaterial?(n(g,v),l(g,v)):v.isMeshToonMaterial?(n(g,v),h(g,v)):v.isMeshPhongMaterial?(n(g,v),c(g,v)):v.isMeshStandardMaterial?(n(g,v),v.isMeshPhysicalMaterial?d(g,v,w):u(g,v)):v.isMeshMatcapMaterial?(n(g,v),f(g,v)):v.isMeshDepthMaterial?(n(g,v),p(g,v)):v.isMeshDistanceMaterial?(n(g,v),m(g,v)):v.isMeshNormalMaterial?(n(g,v),y(g,v)):v.isLineBasicMaterial?(r(g,v),v.isLineDashedMaterial&&s(g,v)):v.isPointsMaterial?o(g,v,x,_):v.isSpriteMaterial?a(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function n(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.specularMap&&(g.specularMap.value=v.specularMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const x=i.get(v).envMap;if(x){g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio;const b=i.get(x).__maxMipLevel;b!==void 0&&(g.maxMipLevel.value=b)}v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity);let _;v.map?_=v.map:v.specularMap?_=v.specularMap:v.displacementMap?_=v.displacementMap:v.normalMap?_=v.normalMap:v.bumpMap?_=v.bumpMap:v.roughnessMap?_=v.roughnessMap:v.metalnessMap?_=v.metalnessMap:v.alphaMap?_=v.alphaMap:v.emissiveMap?_=v.emissiveMap:v.clearcoatMap?_=v.clearcoatMap:v.clearcoatNormalMap?_=v.clearcoatNormalMap:v.clearcoatRoughnessMap?_=v.clearcoatRoughnessMap:v.specularIntensityMap?_=v.specularIntensityMap:v.specularColorMap?_=v.specularColorMap:v.transmissionMap?_=v.transmissionMap:v.thicknessMap?_=v.thicknessMap:v.sheenColorMap?_=v.sheenColorMap:v.sheenRoughnessMap&&(_=v.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),g.uvTransform.value.copy(_.matrix));let w;v.aoMap?w=v.aoMap:v.lightMap&&(w=v.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uv2Transform.value.copy(w.matrix))}function r(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity}function s(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function o(g,v,x,_){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*x,g.scale.value=_*.5,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let w;v.map?w=v.map:v.alphaMap&&(w=v.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix))}function a(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let x;v.map?x=v.map:v.alphaMap&&(x=v.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function l(g,v){v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap)}function c(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Nn&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Nn&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function h(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Nn&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Nn&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function u(g,v){g.roughness.value=v.roughness,g.metalness.value=v.metalness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Nn&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Nn&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),i.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function d(g,v,x){u(g,v),g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),g.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Nn&&g.clearcoatNormalScale.value.negate())),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap)}function f(g,v){v.matcap&&(g.matcap.value=v.matcap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Nn&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Nn&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function p(g,v){v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}function m(g,v){v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),g.referencePosition.value.copy(v.referencePosition),g.nearDistance.value=v.nearDistance,g.farDistance.value=v.farDistance}function y(g,v){v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Nn&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Nn&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function t5e(){const i=jx("canvas");return i.style.display="block",i}function mi(i={}){const e=i.canvas!==void 0?i.canvas:t5e(),t=i.context!==void 0?i.context:null,n=i.alpha!==void 0?i.alpha:!1,r=i.depth!==void 0?i.depth:!0,s=i.stencil!==void 0?i.stencil:!0,o=i.antialias!==void 0?i.antialias:!1,a=i.premultipliedAlpha!==void 0?i.premultipliedAlpha:!0,l=i.preserveDrawingBuffer!==void 0?i.preserveDrawingBuffer:!1,c=i.powerPreference!==void 0?i.powerPreference:"default",h=i.failIfMajorPerformanceCaveat!==void 0?i.failIfMajorPerformanceCaveat:!1;let u=null,d=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Kn,this.physicallyCorrectLights=!1,this.toneMapping=Sd,this.toneMappingExposure=1;const m=this;let y=!1,g=0,v=0,x=null,_=-1,w=null;const b=new xt,S=new xt;let A=null,E=e.width,T=e.height,M=1,C=null,D=null;const P=new xt(0,0,E,T),I=new xt(0,0,E,T);let k=!1;const G=[],U=new Wx;let Z=!1,$=!1,W=null;const X=new Ce,j=new R,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return x===null?M:1}let B=t;function q(ie,ye){for(let Ae=0;Ae<ie.length;Ae++){const _e=ie[Ae],De=e.getContext(_e,ye);if(De!==null)return De}return null}try{const ie={alpha:n,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(e.addEventListener("webglcontextlost",Ge,!1),e.addEventListener("webglcontextrestored",et,!1),B===null){const ye=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ye.shift(),B=q(ye,ie),B===null)throw q(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}B.getShaderPrecisionFormat===void 0&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ie){throw console.error("THREE.WebGLRenderer: "+ie.message),ie}let K,Q,oe,ne,L,z,Y,J,ee,F,N,te,le,re,ue,pe,xe,Se,we,ce,Ee,ve,Re;function se(){K=new A9e(B),Q=new g9e(B,K,i),K.init(Q),ve=new Q4e(B,K,Q),oe=new Y4e(B,K,Q),G[0]=1029,ne=new E9e,L=new k4e,z=new Z4e(B,K,oe,L,Q,ve,ne),Y=new y9e(m),J=new S9e(m),ee=new Uve(B,Q),Re=new p9e(B,K,ee,Q),F=new T9e(B,ee,ne,Re),N=new L9e(B,F,ee,ne),we=new P9e(B,Q,z),pe=new v9e(L),te=new z4e(m,Y,J,K,Q,Re,pe),le=new e5e(L),re=new U4e(L),ue=new $4e(K,Q),Se=new f9e(m,Y,oe,N,a),xe=new BX(m,N,Q),ce=new m9e(B,K,ne,Q),Ee=new M9e(B,K,ne,Q),ne.programs=te.programs,m.capabilities=Q,m.extensions=K,m.properties=L,m.renderLists=re,m.shadowMap=xe,m.state=oe,m.info=ne}se();const be=new J4e(m,B);this.xr=be,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){const ie=K.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=K.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(ie){ie!==void 0&&(M=ie,this.setSize(E,T,!1))},this.getSize=function(ie){return ie.set(E,T)},this.setSize=function(ie,ye,Ae){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=ie,T=ye,e.width=Math.floor(ie*M),e.height=Math.floor(ye*M),Ae!==!1&&(e.style.width=ie+"px",e.style.height=ye+"px"),this.setViewport(0,0,ie,ye)},this.getDrawingBufferSize=function(ie){return ie.set(E*M,T*M).floor()},this.setDrawingBufferSize=function(ie,ye,Ae){E=ie,T=ye,M=Ae,e.width=Math.floor(ie*Ae),e.height=Math.floor(ye*Ae),this.setViewport(0,0,ie,ye)},this.getCurrentViewport=function(ie){return ie.copy(b)},this.getViewport=function(ie){return ie.copy(P)},this.setViewport=function(ie,ye,Ae,_e){ie.isVector4?P.set(ie.x,ie.y,ie.z,ie.w):P.set(ie,ye,Ae,_e),oe.viewport(b.copy(P).multiplyScalar(M).floor())},this.getScissor=function(ie){return ie.copy(I)},this.setScissor=function(ie,ye,Ae,_e){ie.isVector4?I.set(ie.x,ie.y,ie.z,ie.w):I.set(ie,ye,Ae,_e),oe.scissor(S.copy(I).multiplyScalar(M).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(ie){oe.setScissorTest(k=ie)},this.setOpaqueSort=function(ie){C=ie},this.setTransparentSort=function(ie){D=ie},this.getClearColor=function(ie){return ie.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor.apply(Se,arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha.apply(Se,arguments)},this.clear=function(ie,ye,Ae){let _e=0;(ie===void 0||ie)&&(_e|=16384),(ye===void 0||ye)&&(_e|=256),(Ae===void 0||Ae)&&(_e|=1024),B.clear(_e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ge,!1),e.removeEventListener("webglcontextrestored",et,!1),re.dispose(),ue.dispose(),L.dispose(),Y.dispose(),J.dispose(),N.dispose(),Re.dispose(),be.dispose(),be.removeEventListener("sessionstart",Jt),be.removeEventListener("sessionend",vn),W&&(W.dispose(),W=null),Li.stop()};function Ge(ie){ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const ie=ne.autoReset,ye=xe.enabled,Ae=xe.autoUpdate,_e=xe.needsUpdate,De=xe.type;se(),ne.autoReset=ie,xe.enabled=ye,xe.autoUpdate=Ae,xe.needsUpdate=_e,xe.type=De}function Mt(ie){const ye=ie.target;ye.removeEventListener("dispose",Mt),mt(ye)}function mt(ie){yi(ie),L.remove(ie)}function yi(ie){const ye=L.get(ie).programs;ye!==void 0&&ye.forEach(function(Ae){te.releaseProgram(Ae)})}this.renderBufferDirect=function(ie,ye,Ae,_e,De,bt){ye===null&&(ye=H);const lt=De.isMesh&&De.matrixWorld.determinant()<0,ot=tne(ie,ye,Ae,_e,De);oe.setMaterial(_e,lt);let Lt=Ae.index;const ri=Ae.attributes.position;if(Lt===null){if(ri===void 0||ri.count===0)return}else if(Lt.count===0)return;let zt=1;_e.wireframe===!0&&(Lt=F.getWireframeAttribute(Ae),zt=2),Re.setup(De,_e,ot,Ae,Lt);let $t,Qi=ce;Lt!==null&&($t=ee.get(Lt),Qi=Ee,Qi.setIndex($t));const fh=Lt!==null?Lt.count:ri.count,Qt=Ae.drawRange.start*zt,ig=Ae.drawRange.count*zt,Ii=bt!==null?bt.start*zt:0,ph=bt!==null?bt.count*zt:1/0,mh=Math.max(Qt,Ii),gh=Math.min(fh,Qt+ig,Ii+ph)-1,mc=Math.max(0,gh-mh+1);if(mc!==0){if(De.isMesh)_e.wireframe===!0?(oe.setLineWidth(_e.wireframeLinewidth*V()),Qi.setMode(1)):Qi.setMode(4);else if(De.isLine){let Ki=_e.linewidth;Ki===void 0&&(Ki=1),oe.setLineWidth(Ki*V()),De.isLineSegments?Qi.setMode(1):De.isLineLoop?Qi.setMode(2):Qi.setMode(3)}else De.isPoints?Qi.setMode(0):De.isSprite&&Qi.setMode(4);if(De.isInstancedMesh)Qi.renderInstances(mh,mc,De.count);else if(Ae.isInstancedBufferGeometry){const Ki=Math.min(Ae.instanceCount,Ae._maxInstanceCount);Qi.renderInstances(mh,mc,Ki)}else Qi.render(mh,mc)}},this.compile=function(ie,ye){d=ue.get(ie),d.init(),p.push(d),ie.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(ye.layers)&&(d.pushLight(Ae),Ae.castShadow&&d.pushShadow(Ae))}),d.setupLights(m.physicallyCorrectLights),ie.traverse(function(Ae){const _e=Ae.material;if(_e)if(Array.isArray(_e))for(let De=0;De<_e.length;De++){const bt=_e[De];k7(bt,ie,Ae)}else k7(_e,ie,Ae)}),p.pop(),d=null};let Vi=null;function gn(ie){Vi&&Vi(ie)}function Jt(){Li.stop()}function vn(){Li.start()}const Li=new MX;Li.setAnimationLoop(gn),typeof window<"u"&&Li.setContext(window),this.setAnimationLoop=function(ie){Vi=ie,be.setAnimationLoop(ie),ie===null?Li.stop():Li.start()},be.addEventListener("sessionstart",Jt),be.addEventListener("sessionend",vn),this.render=function(ie,ye){if(ye!==void 0&&ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;ie.autoUpdate===!0&&ie.updateMatrixWorld(),ye.parent===null&&ye.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(ye),ye=be.getCamera()),ie.isScene===!0&&ie.onBeforeRender(m,ie,ye,x),d=ue.get(ie,p.length),d.init(),p.push(d),X.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),U.setFromProjectionMatrix(X),$=this.localClippingEnabled,Z=pe.init(this.clippingPlanes,$,ye),u=re.get(ie,f.length),u.init(),f.push(u),yn(ie,ye,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(C,D),Z===!0&&pe.beginShadows();const Ae=d.state.shadowsArray;if(xe.render(Ae,ie,ye),Z===!0&&pe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Se.render(u,ie),d.setupLights(m.physicallyCorrectLights),ye.isArrayCamera){const _e=ye.cameras;for(let De=0,bt=_e.length;De<bt;De++){const lt=_e[De];fc(u,ie,lt,lt.viewport)}}else fc(u,ie,ye);x!==null&&(z.updateMultisampleRenderTarget(x),z.updateRenderTargetMipmap(x)),ie.isScene===!0&&ie.onAfterRender(m,ie,ye),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1),Re.resetDefaultState(),_=-1,w=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function yn(ie,ye,Ae,_e){if(ie.visible===!1)return;if(ie.layers.test(ye.layers)){if(ie.isGroup)Ae=ie.renderOrder;else if(ie.isLOD)ie.autoUpdate===!0&&ie.update(ye);else if(ie.isLight)d.pushLight(ie),ie.castShadow&&d.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||U.intersectsSprite(ie)){_e&&j.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(X);const lt=N.update(ie),ot=ie.material;ot.visible&&u.push(ie,lt,ot,Ae,j.z,null)}}else if((ie.isMesh||ie.isLine||ie.isPoints)&&(ie.isSkinnedMesh&&ie.skeleton.frame!==ne.render.frame&&(ie.skeleton.update(),ie.skeleton.frame=ne.render.frame),!ie.frustumCulled||U.intersectsObject(ie))){_e&&j.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(X);const lt=N.update(ie),ot=ie.material;if(Array.isArray(ot)){const Lt=lt.groups;for(let ri=0,zt=Lt.length;ri<zt;ri++){const $t=Lt[ri],Qi=ot[$t.materialIndex];Qi&&Qi.visible&&u.push(ie,lt,Qi,Ae,j.z,$t)}}else ot.visible&&u.push(ie,lt,ot,Ae,j.z,null)}}const bt=ie.children;for(let lt=0,ot=bt.length;lt<ot;lt++)yn(bt[lt],ye,Ae,_e)}function fc(ie,ye,Ae,_e){const De=ie.opaque,bt=ie.transmissive,lt=ie.transparent;d.setupLightsView(Ae),bt.length>0&&pc(De,ye,Ae),_e&&oe.viewport(b.copy(_e)),De.length>0&&ol(De,ye,Ae),bt.length>0&&ol(bt,ye,Ae),lt.length>0&&ol(lt,ye,Ae)}function pc(ie,ye,Ae){if(W===null){const lt=o===!0&&Q.isWebGL2===!0?bX:jn;W=new lt(1024,1024,{generateMipmaps:!0,type:ve.convert(Mu)!==null?Mu:Hu,minFilter:sf,magFilter:ui,wrapS:ji,wrapT:ji})}const _e=m.getRenderTarget();m.setRenderTarget(W),m.clear();const De=m.toneMapping;m.toneMapping=Sd,ol(ie,ye,Ae),m.toneMapping=De,z.updateMultisampleRenderTarget(W),z.updateRenderTargetMipmap(W),m.setRenderTarget(_e)}function ol(ie,ye,Ae){const _e=ye.isScene===!0?ye.overrideMaterial:null;for(let De=0,bt=ie.length;De<bt;De++){const lt=ie[De],ot=lt.object,Lt=lt.geometry,ri=_e===null?lt.material:_e,zt=lt.group;ot.layers.test(Ae.layers)&&ene(ot,ye,Ae,Lt,ri,zt)}}function ene(ie,ye,Ae,_e,De,bt){ie.onBeforeRender(m,ye,Ae,_e,De,bt),ie.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),De.onBeforeRender(m,ye,Ae,_e,ie,bt),De.transparent===!0&&De.side===ju?(De.side=Nn,De.needsUpdate=!0,m.renderBufferDirect(Ae,ye,_e,De,ie,bt),De.side=N1,De.needsUpdate=!0,m.renderBufferDirect(Ae,ye,_e,De,ie,bt),De.side=ju):m.renderBufferDirect(Ae,ye,_e,De,ie,bt),ie.onAfterRender(m,ye,Ae,_e,De,bt)}function k7(ie,ye,Ae){ye.isScene!==!0&&(ye=H);const _e=L.get(ie),De=d.state.lights,bt=d.state.shadowsArray,lt=De.state.version,ot=te.getParameters(ie,De.state,bt,ye,Ae),Lt=te.getProgramCacheKey(ot);let ri=_e.programs;_e.environment=ie.isMeshStandardMaterial?ye.environment:null,_e.fog=ye.fog,_e.envMap=(ie.isMeshStandardMaterial?J:Y).get(ie.envMap||_e.environment),ri===void 0&&(ie.addEventListener("dispose",Mt),ri=new Map,_e.programs=ri);let zt=ri.get(Lt);if(zt!==void 0){if(_e.currentProgram===zt&&_e.lightsStateVersion===lt)return VL(ie,ot),zt}else ot.uniforms=te.getUniforms(ie),ie.onBuild(Ae,ot,m),ie.onBeforeCompile(ot,m),zt=te.acquireProgram(ot,Lt),ri.set(Lt,zt),_e.uniforms=ot.uniforms;const $t=_e.uniforms;(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||ie.clipping===!0)&&($t.clippingPlanes=pe.uniform),VL(ie,ot),_e.needsLights=nne(ie),_e.lightsStateVersion=lt,_e.needsLights&&($t.ambientLightColor.value=De.state.ambient,$t.lightProbe.value=De.state.probe,$t.directionalLights.value=De.state.directional,$t.directionalLightShadows.value=De.state.directionalShadow,$t.spotLights.value=De.state.spot,$t.spotLightShadows.value=De.state.spotShadow,$t.rectAreaLights.value=De.state.rectArea,$t.ltc_1.value=De.state.rectAreaLTC1,$t.ltc_2.value=De.state.rectAreaLTC2,$t.pointLights.value=De.state.point,$t.pointLightShadows.value=De.state.pointShadow,$t.hemisphereLights.value=De.state.hemi,$t.directionalShadowMap.value=De.state.directionalShadowMap,$t.directionalShadowMatrix.value=De.state.directionalShadowMatrix,$t.spotShadowMap.value=De.state.spotShadowMap,$t.spotShadowMatrix.value=De.state.spotShadowMatrix,$t.pointShadowMap.value=De.state.pointShadowMap,$t.pointShadowMatrix.value=De.state.pointShadowMatrix);const Qi=zt.getUniforms(),fh=Cu.seqWithValue(Qi.seq,$t);return _e.currentProgram=zt,_e.uniformsList=fh,zt}function VL(ie,ye){const Ae=L.get(ie);Ae.outputEncoding=ye.outputEncoding,Ae.instancing=ye.instancing,Ae.skinning=ye.skinning,Ae.morphTargets=ye.morphTargets,Ae.morphNormals=ye.morphNormals,Ae.morphTargetsCount=ye.morphTargetsCount,Ae.numClippingPlanes=ye.numClippingPlanes,Ae.numIntersection=ye.numClipIntersection,Ae.vertexAlphas=ye.vertexAlphas,Ae.vertexTangents=ye.vertexTangents}function tne(ie,ye,Ae,_e,De){ye.isScene!==!0&&(ye=H),z.resetTextureUnits();const bt=ye.fog,lt=_e.isMeshStandardMaterial?ye.environment:null,ot=x===null?m.outputEncoding:x.texture.encoding,Lt=(_e.isMeshStandardMaterial?J:Y).get(_e.envMap||lt),ri=_e.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,zt=!!_e.normalMap&&!!Ae.attributes.tangent,$t=!!Ae.morphAttributes.position,Qi=!!Ae.morphAttributes.normal,fh=Ae.morphAttributes.position?Ae.morphAttributes.position.length:0,Qt=L.get(_e),ig=d.state.lights;if(Z===!0&&($===!0||ie!==w)){const ia=ie===w&&_e.id===_;pe.setState(_e,ie,ia)}let Ii=!1;_e.version===Qt.__version?(Qt.needsLights&&Qt.lightsStateVersion!==ig.state.version||Qt.outputEncoding!==ot||De.isInstancedMesh&&Qt.instancing===!1||!De.isInstancedMesh&&Qt.instancing===!0||De.isSkinnedMesh&&Qt.skinning===!1||!De.isSkinnedMesh&&Qt.skinning===!0||Qt.envMap!==Lt||_e.fog&&Qt.fog!==bt||Qt.numClippingPlanes!==void 0&&(Qt.numClippingPlanes!==pe.numPlanes||Qt.numIntersection!==pe.numIntersection)||Qt.vertexAlphas!==ri||Qt.vertexTangents!==zt||Qt.morphTargets!==$t||Qt.morphNormals!==Qi||Q.isWebGL2===!0&&Qt.morphTargetsCount!==fh)&&(Ii=!0):(Ii=!0,Qt.__version=_e.version);let ph=Qt.currentProgram;Ii===!0&&(ph=k7(_e,ye,De));let mh=!1,gh=!1,mc=!1;const Ki=ph.getUniforms(),ng=Qt.uniforms;if(oe.useProgram(ph.program)&&(mh=!0,gh=!0,mc=!0),_e.id!==_&&(_=_e.id,gh=!0),mh||w!==ie){if(Ki.setValue(B,"projectionMatrix",ie.projectionMatrix),Q.logarithmicDepthBuffer&&Ki.setValue(B,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),w!==ie&&(w=ie,gh=!0,mc=!0),_e.isShaderMaterial||_e.isMeshPhongMaterial||_e.isMeshToonMaterial||_e.isMeshStandardMaterial||_e.envMap){const ia=Ki.map.cameraPosition;ia!==void 0&&ia.setValue(B,j.setFromMatrixPosition(ie.matrixWorld))}(_e.isMeshPhongMaterial||_e.isMeshToonMaterial||_e.isMeshLambertMaterial||_e.isMeshBasicMaterial||_e.isMeshStandardMaterial||_e.isShaderMaterial)&&Ki.setValue(B,"isOrthographic",ie.isOrthographicCamera===!0),(_e.isMeshPhongMaterial||_e.isMeshToonMaterial||_e.isMeshLambertMaterial||_e.isMeshBasicMaterial||_e.isMeshStandardMaterial||_e.isShaderMaterial||_e.isShadowMaterial||De.isSkinnedMesh)&&Ki.setValue(B,"viewMatrix",ie.matrixWorldInverse)}if(De.isSkinnedMesh){Ki.setOptional(B,De,"bindMatrix"),Ki.setOptional(B,De,"bindMatrixInverse");const ia=De.skeleton;ia&&(Q.floatVertexTextures?(ia.boneTexture===null&&ia.computeBoneTexture(),Ki.setValue(B,"boneTexture",ia.boneTexture,z),Ki.setValue(B,"boneTextureSize",ia.boneTextureSize)):Ki.setOptional(B,ia,"boneMatrices"))}return Ae&&(Ae.morphAttributes.position!==void 0||Ae.morphAttributes.normal!==void 0)&&we.update(De,Ae,_e,ph),(gh||Qt.receiveShadow!==De.receiveShadow)&&(Qt.receiveShadow=De.receiveShadow,Ki.setValue(B,"receiveShadow",De.receiveShadow)),gh&&(Ki.setValue(B,"toneMappingExposure",m.toneMappingExposure),Qt.needsLights&&ine(ng,mc),bt&&_e.fog&&le.refreshFogUniforms(ng,bt),le.refreshMaterialUniforms(ng,_e,M,T,W),Cu.upload(B,Qt.uniformsList,ng,z)),_e.isShaderMaterial&&_e.uniformsNeedUpdate===!0&&(Cu.upload(B,Qt.uniformsList,ng,z),_e.uniformsNeedUpdate=!1),_e.isSpriteMaterial&&Ki.setValue(B,"center",De.center),Ki.setValue(B,"modelViewMatrix",De.modelViewMatrix),Ki.setValue(B,"normalMatrix",De.normalMatrix),Ki.setValue(B,"modelMatrix",De.matrixWorld),ph}function ine(ie,ye){ie.ambientLightColor.needsUpdate=ye,ie.lightProbe.needsUpdate=ye,ie.directionalLights.needsUpdate=ye,ie.directionalLightShadows.needsUpdate=ye,ie.pointLights.needsUpdate=ye,ie.pointLightShadows.needsUpdate=ye,ie.spotLights.needsUpdate=ye,ie.spotLightShadows.needsUpdate=ye,ie.rectAreaLights.needsUpdate=ye,ie.hemisphereLights.needsUpdate=ye}function nne(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&ie.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return x},this.setRenderTarget=function(ie,ye=0,Ae=0){x=ie,g=ye,v=Ae,ie&&L.get(ie).__webglFramebuffer===void 0&&z.setupRenderTarget(ie);let _e=null,De=!1,bt=!1;if(ie){const ot=ie.texture;(ot.isDataTexture3D||ot.isDataTexture2DArray)&&(bt=!0);const Lt=L.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(_e=Lt[ye],De=!0):ie.isWebGLMultisampleRenderTarget?_e=L.get(ie).__webglMultisampledFramebuffer:_e=Lt,b.copy(ie.viewport),S.copy(ie.scissor),A=ie.scissorTest}else b.copy(P).multiplyScalar(M).floor(),S.copy(I).multiplyScalar(M).floor(),A=k;if(oe.bindFramebuffer(36160,_e)&&Q.drawBuffers){let ot=!1;if(ie)if(ie.isWebGLMultipleRenderTargets){const Lt=ie.texture;if(G.length!==Lt.length||G[0]!==36064){for(let ri=0,zt=Lt.length;ri<zt;ri++)G[ri]=36064+ri;G.length=Lt.length,ot=!0}}else(G.length!==1||G[0]!==36064)&&(G[0]=36064,G.length=1,ot=!0);else(G.length!==1||G[0]!==1029)&&(G[0]=1029,G.length=1,ot=!0);ot&&(Q.isWebGL2?B.drawBuffers(G):K.get("WEBGL_draw_buffers").drawBuffersWEBGL(G))}if(oe.viewport(b),oe.scissor(S),oe.setScissorTest(A),De){const ot=L.get(ie.texture);B.framebufferTexture2D(36160,36064,34069+ye,ot.__webglTexture,Ae)}else if(bt){const ot=L.get(ie.texture),Lt=ye||0;B.framebufferTextureLayer(36160,36064,ot.__webglTexture,Ae||0,Lt)}_=-1},this.readRenderTargetPixels=function(ie,ye,Ae,_e,De,bt,lt){if(!(ie&&ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=L.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&lt!==void 0&&(ot=ot[lt]),ot){oe.bindFramebuffer(36160,ot);try{const Lt=ie.texture,ri=Lt.format,zt=Lt.type;if(ri!==wi&&ve.convert(ri)!==B.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const $t=zt===Mu&&(K.has("EXT_color_buffer_half_float")||Q.isWebGL2&&K.has("EXT_color_buffer_float"));if(zt!==Hu&&ve.convert(zt)!==B.getParameter(35738)&&!(zt===Oo&&(Q.isWebGL2||K.has("OES_texture_float")||K.has("WEBGL_color_buffer_float")))&&!$t){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}B.checkFramebufferStatus(36160)===36053?ye>=0&&ye<=ie.width-_e&&Ae>=0&&Ae<=ie.height-De&&B.readPixels(ye,Ae,_e,De,ve.convert(ri),ve.convert(zt),bt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Lt=x!==null?L.get(x).__webglFramebuffer:null;oe.bindFramebuffer(36160,Lt)}}},this.copyFramebufferToTexture=function(ie,ye,Ae=0){const _e=Math.pow(2,-Ae),De=Math.floor(ye.image.width*_e),bt=Math.floor(ye.image.height*_e);let lt=ve.convert(ye.format);Q.isWebGL2&&(lt===6407&&(lt=32849),lt===6408&&(lt=32856)),z.setTexture2D(ye,0),B.copyTexImage2D(3553,Ae,lt,ie.x,ie.y,De,bt,0),oe.unbindTexture()},this.copyTextureToTexture=function(ie,ye,Ae,_e=0){const De=ye.image.width,bt=ye.image.height,lt=ve.convert(Ae.format),ot=ve.convert(Ae.type);z.setTexture2D(Ae,0),B.pixelStorei(37440,Ae.flipY),B.pixelStorei(37441,Ae.premultiplyAlpha),B.pixelStorei(3317,Ae.unpackAlignment),ye.isDataTexture?B.texSubImage2D(3553,_e,ie.x,ie.y,De,bt,lt,ot,ye.image.data):ye.isCompressedTexture?B.compressedTexSubImage2D(3553,_e,ie.x,ie.y,ye.mipmaps[0].width,ye.mipmaps[0].height,lt,ye.mipmaps[0].data):B.texSubImage2D(3553,_e,ie.x,ie.y,lt,ot,ye.image),_e===0&&Ae.generateMipmaps&&B.generateMipmap(3553),oe.unbindTexture()},this.copyTextureToTexture3D=function(ie,ye,Ae,_e,De=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const bt=ie.max.x-ie.min.x+1,lt=ie.max.y-ie.min.y+1,ot=ie.max.z-ie.min.z+1,Lt=ve.convert(_e.format),ri=ve.convert(_e.type);let zt;if(_e.isDataTexture3D)z.setTexture3D(_e,0),zt=32879;else if(_e.isDataTexture2DArray)z.setTexture2DArray(_e,0),zt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(37440,_e.flipY),B.pixelStorei(37441,_e.premultiplyAlpha),B.pixelStorei(3317,_e.unpackAlignment);const $t=B.getParameter(3314),Qi=B.getParameter(32878),fh=B.getParameter(3316),Qt=B.getParameter(3315),ig=B.getParameter(32877),Ii=Ae.isCompressedTexture?Ae.mipmaps[0]:Ae.image;B.pixelStorei(3314,Ii.width),B.pixelStorei(32878,Ii.height),B.pixelStorei(3316,ie.min.x),B.pixelStorei(3315,ie.min.y),B.pixelStorei(32877,ie.min.z),Ae.isDataTexture||Ae.isDataTexture3D?B.texSubImage3D(zt,De,ye.x,ye.y,ye.z,bt,lt,ot,Lt,ri,Ii.data):Ae.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),B.compressedTexSubImage3D(zt,De,ye.x,ye.y,ye.z,bt,lt,ot,Lt,Ii.data)):B.texSubImage3D(zt,De,ye.x,ye.y,ye.z,bt,lt,ot,Lt,ri,Ii),B.pixelStorei(3314,$t),B.pixelStorei(32878,Qi),B.pixelStorei(3316,fh),B.pixelStorei(3315,Qt),B.pixelStorei(32877,ig),De===0&&_e.generateMipmaps&&B.generateMipmap(zt),oe.unbindTexture()},this.initTexture=function(ie){z.setTexture2D(ie,0),oe.unbindTexture()},this.resetState=function(){g=0,v=0,x=null,oe.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}mi.prototype.isWebGLRenderer=!0;class i5e extends mi{}i5e.prototype.isWebGL1Renderer=!0;class qx{constructor(e,t=1,n=1e3){this.name="",this.color=new Pe(e),this.near=t,this.far=n}clone(){return new qx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}qx.prototype.isFog=!0;let Xx=class extends Pt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};Xx.prototype.isScene=!0;class af{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Xv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}af.prototype.isInterleavedBuffer=!0;const xn=new R;class $u{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)xn.x=this.getX(t),xn.y=this.getY(t),xn.z=this.getZ(t),xn.applyMatrix4(e),this.setXYZ(t,xn.x,xn.y,xn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xn.x=this.getX(t),xn.y=this.getY(t),xn.z=this.getZ(t),xn.applyNormalMatrix(e),this.setXYZ(t,xn.x,xn.y,xn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xn.x=this.getX(t),xn.y=this.getY(t),xn.z=this.getZ(t),xn.transformDirection(e),this.setXYZ(t,xn.x,xn.y,xn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new at(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new $u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}$u.prototype.isInterleavedBufferAttribute=!0;class YC extends Zn{constructor(e){super(),this.type="SpriteMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}YC.prototype.isSpriteMaterial=!0;let Vf;const gg=new R,Gf=new R,jf=new R,Hf=new ae,vg=new ae,VX=new Ce,a9=new R,yg=new R,l9=new R,MN=new ae,nb=new ae,EN=new ae;let GX=class extends Pt{constructor(e){if(super(),this.type="Sprite",Vf===void 0){Vf=new ze;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new af(t,5);Vf.setIndex([0,1,2,0,2,3]),Vf.setAttribute("position",new $u(n,3,0,!1)),Vf.setAttribute("uv",new $u(n,2,3,!1))}this.geometry=Vf,this.material=e!==void 0?e:new YC,this.center=new ae(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gf.setFromMatrixScale(this.matrixWorld),VX.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gf.multiplyScalar(-jf.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;c9(a9.set(-.5,-.5,0),jf,o,Gf,r,s),c9(yg.set(.5,-.5,0),jf,o,Gf,r,s),c9(l9.set(.5,.5,0),jf,o,Gf,r,s),MN.set(0,0),nb.set(1,0),EN.set(1,1);let a=e.ray.intersectTriangle(a9,yg,l9,!1,gg);if(a===null&&(c9(yg.set(-.5,.5,0),jf,o,Gf,r,s),nb.set(0,1),a=e.ray.intersectTriangle(a9,l9,yg,!1,gg),a===null))return;const l=e.ray.origin.distanceTo(gg);l<e.near||l>e.far||t.push({distance:l,point:gg.clone(),uv:sn.getUV(gg,a9,yg,l9,MN,nb,EN,new ae),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};GX.prototype.isSprite=!0;function c9(i,e,t,n,r,s){Hf.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(vg.x=s*Hf.x-r*Hf.y,vg.y=r*Hf.x+s*Hf.y):vg.copy(Hf),i.copy(e),i.x+=vg.x,i.y+=vg.y,i.applyMatrix4(VX)}const CN=new R,DN=new xt,PN=new xt,n5e=new R,LN=new Ce;class Yx extends Cn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ce,this.bindMatrixInverse=new Ce}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xt,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;DN.fromBufferAttribute(r.attributes.skinIndex,e),PN.fromBufferAttribute(r.attributes.skinWeight,e),CN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=PN.getComponent(s);if(o!==0){const a=DN.getComponent(s);LN.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(n5e.copy(CN).applyMatrix4(LN),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}Yx.prototype.isSkinnedMesh=!0;class Zv extends Pt{constructor(){super(),this.type="Bone"}}Zv.prototype.isBone=!0;class ud extends Zi{constructor(e=null,t=1,n=1,r,s,o,a,l,c=ui,h=ui,u,d){super(null,o,a,l,c,h,r,s,u,d),this.image={data:e,width:t,height:n},this.magFilter=c,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ud.prototype.isDataTexture=!0;const IN=new Ce,r5e=new Ce;class Zx{constructor(e=[],t=[]){this.uuid=jo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ce)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ce;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:r5e;IN.multiplyMatrices(a,t[s]),IN.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Zx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=yX(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ud(t,e,e,wi,Oo);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Zv),this.bones.push(o),this.boneInverses.push(new Ce().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class E6 extends at{constructor(e,t,n,r=1){typeof n=="number"&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}E6.prototype.isInstancedBufferAttribute=!0;const ON=new Ce,RN=new Ce,u9=[],xg=new Cn;let C6=class extends Cn{constructor(e,t,n){super(e,t),this.instanceMatrix=new E6(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(xg.geometry=this.geometry,xg.material=this.material,xg.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,ON),RN.multiplyMatrices(n,ON),xg.matrixWorld=RN,xg.raycast(e,u9);for(let o=0,a=u9.length;o<a;o++){const l=u9[o];l.instanceId=s,l.object=this,t.push(l)}u9.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new E6(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}};C6.prototype.isInstancedMesh=!0;class Bs extends Zn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Bs.prototype.isLineBasicMaterial=!0;const NN=new R,FN=new R,zN=new Ce,rb=new Z0,h9=new Fs;class qu extends Pt{constructor(e=new ze,t=new Bs){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)NN.fromBufferAttribute(t,r-1),FN.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=NN.distanceTo(FN);e.setAttribute("lineDistance",new Le(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),h9.copy(n.boundingSphere),h9.applyMatrix4(r),h9.radius+=s,e.ray.intersectsSphere(h9)===!1)return;zN.copy(r).invert(),rb.copy(e.ray).applyMatrix4(zN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new R,h=new R,u=new R,d=new R,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const p=n.index,y=n.attributes.position;if(p!==null){const g=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=g,_=v-1;x<_;x+=f){const w=p.getX(x),b=p.getX(x+1);if(c.fromBufferAttribute(y,w),h.fromBufferAttribute(y,b),rb.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||t.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),v=Math.min(y.count,o.start+o.count);for(let x=g,_=v-1;x<_;x+=f){if(c.fromBufferAttribute(y,x),h.fromBufferAttribute(y,x+1),rb.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}qu.prototype.isLine=!0;const kN=new R,BN=new R;class dc extends qu{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)kN.fromBufferAttribute(t,r),BN.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+kN.distanceTo(BN);e.setAttribute("lineDistance",new Le(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}dc.prototype.isLineSegments=!0;class jX extends qu{constructor(e,t){super(e,t),this.type="LineLoop"}}jX.prototype.isLineLoop=!0;let Qx=class extends Zn{constructor(e){super(),this.type="PointsMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}};Qx.prototype.isPointsMaterial=!0;const UN=new Ce,OA=new Z0,d9=new Fs,f9=new R;let ZC=class extends Pt{constructor(e=new ze,t=new Qx){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),d9.copy(n.boundingSphere),d9.applyMatrix4(r),d9.radius+=s,e.ray.intersectsSphere(d9)===!1)return;UN.copy(r).invert(),OA.copy(e.ray).applyMatrix4(UN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const c=n.index,u=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=d,m=f;p<m;p++){const y=c.getX(p);f9.fromBufferAttribute(u,y),VN(f9,y,l,r,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);for(let p=d,m=f;p<m;p++)f9.fromBufferAttribute(u,p),VN(f9,p,l,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};ZC.prototype.isPoints=!0;function VN(i,e,t,n,r,s,o){const a=OA.distanceSqToPoint(i);if(a<t){const l=new R;OA.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}let QC=class extends Zi{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.format=a!==void 0?a:R0,this.minFilter=o!==void 0?o:pi,this.magFilter=s!==void 0?s:pi,this.generateMipmaps=!1;const h=this;function u(){h.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};QC.prototype.isVideoTexture=!0;class s5e extends Zi{constructor(e,t,n,r,s,o,a,l,c,h,u,d){super(null,o,a,l,c,h,r,s,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}s5e.prototype.isCompressedTexture=!0;class o5e extends Zi{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.needsUpdate=!0}}o5e.prototype.isCanvasTexture=!0;class HX extends Zi{constructor(e,t,n,r,s,o,a,l,c,h){if(h=h!==void 0?h:i1,h!==i1&&h!==$v)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===i1&&(n=Wv),n===void 0&&h===$v&&(n=W2),super(null,r,s,o,a,l,h,n,c),this.image={width:e,height:t},this.magFilter=a!==void 0?a:ui,this.minFilter=l!==void 0?l:ui,this.flipY=!1,this.generateMipmaps=!1}}HX.prototype.isDepthTexture=!0;let a5e=class WX extends ze{constructor(e=1,t=8,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new R,h=new ae;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const f=n+u/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,l.push(h.x,h.y)}for(let u=1;u<=t;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(a,3)),this.setAttribute("uv",new Le(l,2))}static fromJSON(e){return new WX(e.radius,e.segments,e.thetaStart,e.thetaLength)}},KC=class $X extends ze{constructor(e=1,t=1,n=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],u=[],d=[],f=[];let p=0;const m=[],y=n/2;let g=0;v(),o===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new Le(u,3)),this.setAttribute("normal",new Le(d,3)),this.setAttribute("uv",new Le(f,2));function v(){const _=new R,w=new R;let b=0;const S=(t-e)/n;for(let A=0;A<=s;A++){const E=[],T=A/s,M=T*(t-e)+e;for(let C=0;C<=r;C++){const D=C/r,P=D*l+a,I=Math.sin(P),k=Math.cos(P);w.x=M*I,w.y=-T*n+y,w.z=M*k,u.push(w.x,w.y,w.z),_.set(I,S,k).normalize(),d.push(_.x,_.y,_.z),f.push(D,1-T),E.push(p++)}m.push(E)}for(let A=0;A<r;A++)for(let E=0;E<s;E++){const T=m[E][A],M=m[E+1][A],C=m[E+1][A+1],D=m[E][A+1];h.push(T,M,D),h.push(M,C,D),b+=6}c.addGroup(g,b,0),g+=b}function x(_){const w=p,b=new ae,S=new R;let A=0;const E=_===!0?e:t,T=_===!0?1:-1;for(let C=1;C<=r;C++)u.push(0,y*T,0),d.push(0,T,0),f.push(.5,.5),p++;const M=p;for(let C=0;C<=r;C++){const P=C/r*l+a,I=Math.cos(P),k=Math.sin(P);S.x=E*k,S.y=y*T,S.z=E*I,u.push(S.x,S.y,S.z),d.push(0,T,0),b.x=I*.5+.5,b.y=k*.5*T+.5,f.push(b.x,b.y),p++}for(let C=0;C<r;C++){const D=w+C,P=M+C;_===!0?h.push(P,P+1,D):h.push(P+1,P,D),A+=3}c.addGroup(g,A,_===!0?1:2),g+=A}}static fromJSON(e){return new $X(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},qX=class XX extends KC{constructor(e=1,t=1,n=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new XX(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},ny=class YX extends ze{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),c(n),h(),this.setAttribute("position",new Le(s,3)),this.setAttribute("normal",new Le(s.slice(),3)),this.setAttribute("uv",new Le(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){const x=new R,_=new R,w=new R;for(let b=0;b<t.length;b+=3)f(t[b+0],x),f(t[b+1],_),f(t[b+2],w),l(x,_,w,v)}function l(v,x,_,w){const b=w+1,S=[];for(let A=0;A<=b;A++){S[A]=[];const E=v.clone().lerp(_,A/b),T=x.clone().lerp(_,A/b),M=b-A;for(let C=0;C<=M;C++)C===0&&A===b?S[A][C]=E:S[A][C]=E.clone().lerp(T,C/M)}for(let A=0;A<b;A++)for(let E=0;E<2*(b-A)-1;E++){const T=Math.floor(E/2);E%2===0?(d(S[A][T+1]),d(S[A+1][T]),d(S[A][T])):(d(S[A][T+1]),d(S[A+1][T+1]),d(S[A+1][T]))}}function c(v){const x=new R;for(let _=0;_<s.length;_+=3)x.x=s[_+0],x.y=s[_+1],x.z=s[_+2],x.normalize().multiplyScalar(v),s[_+0]=x.x,s[_+1]=x.y,s[_+2]=x.z}function h(){const v=new R;for(let x=0;x<s.length;x+=3){v.x=s[x+0],v.y=s[x+1],v.z=s[x+2];const _=y(v)/2/Math.PI+.5,w=g(v)/Math.PI+.5;o.push(_,1-w)}p(),u()}function u(){for(let v=0;v<o.length;v+=6){const x=o[v+0],_=o[v+2],w=o[v+4],b=Math.max(x,_,w),S=Math.min(x,_,w);b>.9&&S<.1&&(x<.2&&(o[v+0]+=1),_<.2&&(o[v+2]+=1),w<.2&&(o[v+4]+=1))}}function d(v){s.push(v.x,v.y,v.z)}function f(v,x){const _=v*3;x.x=e[_+0],x.y=e[_+1],x.z=e[_+2]}function p(){const v=new R,x=new R,_=new R,w=new R,b=new ae,S=new ae,A=new ae;for(let E=0,T=0;E<s.length;E+=9,T+=6){v.set(s[E+0],s[E+1],s[E+2]),x.set(s[E+3],s[E+4],s[E+5]),_.set(s[E+6],s[E+7],s[E+8]),b.set(o[T+0],o[T+1]),S.set(o[T+2],o[T+3]),A.set(o[T+4],o[T+5]),w.copy(v).add(x).add(_).divideScalar(3);const M=y(w);m(b,T+0,v,M),m(S,T+2,x,M),m(A,T+4,_,M)}}function m(v,x,_,w){w<0&&v.x===1&&(o[x]=v.x-1),_.x===0&&_.z===0&&(o[x]=w/2/Math.PI+.5)}function y(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new YX(e.vertices,e.indices,e.radius,e.details)}},ZX=class QX extends ny{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new QX(e.radius,e.detail)}};class zs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const h=n[r],d=n[r+1]-h,f=(o-h)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ae:new R);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new R,r=[],s=[],o=[],a=new R,l=new Ce;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new R)}s[0]=new R,o[0]=new R;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(xr(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(xr(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ry extends zs{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new ae,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*h-f*u+this.aX,c=d*u+f*h+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}ry.prototype.isEllipseCurve=!0;class KX extends ry{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.type="ArcCurve"}}KX.prototype.isArcCurve=!0;function JC(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const p9=new R,sb=new JC,ob=new JC,ab=new JC;class Kx extends zs{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new R){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(p9.subVectors(r[0],r[1]).add(r[0]),c=p9);const u=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(p9.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=p9),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(h),f);m<1e-4&&(m=1),p<1e-4&&(p=m),y<1e-4&&(y=m),sb.initNonuniformCatmullRom(c.x,u.x,d.x,h.x,p,m,y),ob.initNonuniformCatmullRom(c.y,u.y,d.y,h.y,p,m,y),ab.initNonuniformCatmullRom(c.z,u.z,d.z,h.z,p,m,y)}else this.curveType==="catmullrom"&&(sb.initCatmullRom(c.x,u.x,d.x,h.x,this.tension),ob.initCatmullRom(c.y,u.y,d.y,h.y,this.tension),ab.initCatmullRom(c.z,u.z,d.z,h.z,this.tension));return n.set(sb.calc(l),ob.calc(l),ab.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new R().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Kx.prototype.isCatmullRomCurve3=!0;function GN(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function l5e(i,e){const t=1-i;return t*t*e}function c5e(i,e){return 2*(1-i)*i*e}function u5e(i,e){return i*i*e}function Y2(i,e,t,n){return l5e(i,e)+c5e(i,t)+u5e(i,n)}function h5e(i,e){const t=1-i;return t*t*t*e}function d5e(i,e){const t=1-i;return 3*t*t*i*e}function f5e(i,e){return 3*(1-i)*i*i*e}function p5e(i,e){return i*i*i*e}function Z2(i,e,t,n,r){return h5e(i,e)+d5e(i,t)+f5e(i,n)+p5e(i,r)}class Uo extends zs{constructor(e=new ae,t=new ae,n=new ae,r=new ae){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ae){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Z2(e,r.x,s.x,o.x,a.x),Z2(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Uo.prototype.isCubicBezierCurve=!0;class Q2 extends zs{constructor(e=new R,t=new R,n=new R,r=new R){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new R){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Z2(e,r.x,s.x,o.x,a.x),Z2(e,r.y,s.y,o.y,a.y),Z2(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Q2.prototype.isCubicBezierCurve3=!0;class Ho extends zs{constructor(e=new ae,t=new ae){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ae){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new ae;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Ho.prototype.isLineCurve=!0;class JX extends zs{constructor(e=new R,t=new R){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new R){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ec extends zs{constructor(e=new ae,t=new ae,n=new ae){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ae){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Y2(e,r.x,s.x,o.x),Y2(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ec.prototype.isQuadraticBezierCurve=!0;class eD extends zs{constructor(e=new R,t=new R,n=new R){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new R){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Y2(e,r.x,s.x,o.x),Y2(e,r.y,s.y,o.y),Y2(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}eD.prototype.isQuadraticBezierCurve3=!0;class Jx extends zs{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ae){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(GN(a,l.x,c.x,h.x,u.x),GN(a,l.y,c.y,h.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ae().fromArray(r))}return this}}Jx.prototype.isSplineCurve=!0;var tD=Object.freeze({__proto__:null,ArcCurve:KX,CatmullRomCurve3:Kx,CubicBezierCurve:Uo,CubicBezierCurve3:Q2,EllipseCurve:ry,LineCurve:Ho,LineCurve3:JX,QuadraticBezierCurve:ec,QuadraticBezierCurve3:eD,SplineCurve:Jx});class eY extends zs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ho(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new tD[r.type]().fromJSON(r))}return this}}class k1 extends eY{constructor(e){super(),this.type="Path",this.currentPoint=new ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Ho(this.currentPoint.clone(),new ae(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new ec(this.currentPoint.clone(),new ae(e,t),new ae(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new Uo(this.currentPoint.clone(),new ae(e,t),new ae(n,r),new ae(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Jx(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new ry(e,t,n,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Wo extends k1{constructor(e){super(e),this.uuid=jo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new k1().fromJSON(r))}return this}}const m5e={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=tY(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(n&&(s=_5e(i,e,s,t)),i.length>80*t){a=c=i[0],l=h=i[1];for(let p=t;p<r;p+=t)u=i[p],d=i[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?1/f:0}return Qv(s,o,t,a,l,f),o}};function tY(i,e,t,n,r){let s,o;if(r===L5e(i,e,t,n)>0)for(s=e;s<t;s+=n)o=jN(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=jN(s,i[s],i[s+1],o);return o&&e7(o,o.next)&&(Jv(o),o=o.next),o}function Xu(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(e7(t,t.next)||qi(t.prev,t,t.next)===0)){if(Jv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Qv(i,e,t,n,r,s,o){if(!i)return;!o&&s&&T5e(i,n,r,s);let a=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?v5e(i,n,r,s):g5e(i)){e.push(l.i/t),e.push(i.i/t),e.push(c.i/t),Jv(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=y5e(Xu(i),e,t),Qv(i,e,t,n,r,s,2)):o===2&&x5e(i,e,t,n,r,s):Qv(Xu(i),e,t,n,r,s,1);break}}}function g5e(i){const e=i.prev,t=i,n=i.next;if(qi(e,t,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(Op(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)&&qi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function v5e(i,e,t,n){const r=i.prev,s=i,o=i.next;if(qi(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,h=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=RA(a,l,e,t,n),d=RA(c,h,e,t,n);let f=i.prevZ,p=i.nextZ;for(;f&&f.z>=u&&p&&p.z<=d;){if(f!==i.prev&&f!==i.next&&Op(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&qi(f.prev,f,f.next)>=0||(f=f.prevZ,p!==i.prev&&p!==i.next&&Op(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&qi(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==i.prev&&f!==i.next&&Op(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&qi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==i.prev&&p!==i.next&&Op(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&qi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function y5e(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!e7(r,s)&&iY(r,n,n.next,s)&&Kv(r,s)&&Kv(s,r)&&(e.push(r.i/t),e.push(n.i/t),e.push(s.i/t),Jv(n),Jv(n.next),n=i=s),n=n.next}while(n!==i);return Xu(n)}function x5e(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&C5e(o,a)){let l=nY(o,a);o=Xu(o,o.next),l=Xu(l,l.next),Qv(o,e,t,n,r,s),Qv(l,e,t,n,r,s);return}a=a.next}o=o.next}while(o!==i)}function _5e(i,e,t,n){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=tY(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(E5e(c));for(r.sort(b5e),s=0;s<r.length;s++)w5e(r[s],t),t=Xu(t,t.next);return t}function b5e(i,e){return i.x-e.x}function w5e(i,e){if(e=S5e(i,e),e){const t=nY(e,i);Xu(e,e.next),Xu(t,t.next)}}function S5e(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=n&&d>s){if(s=d,d===n){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(n===s)return o;const a=o,l=o.x,c=o.y;let h=1/0,u;t=o;do n>=t.x&&t.x>=l&&n!==t.x&&Op(r<c?n:s,r,l,c,r<c?s:n,r,t.x,t.y)&&(u=Math.abs(r-t.y)/(n-t.x),Kv(t,i)&&(u<h||u===h&&(t.x>o.x||t.x===o.x&&A5e(o,t)))&&(o=t,h=u)),t=t.next;while(t!==a);return o}function A5e(i,e){return qi(i.prev,i,e.prev)<0&&qi(e.next,i,i.next)<0}function T5e(i,e,t,n){let r=i;do r.z===null&&(r.z=RA(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,M5e(r)}function M5e(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1);return i}function RA(i,e,t,n,r){return i=32767*(i-t)*r,e=32767*(e-n)*r,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function E5e(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Op(i,e,t,n,r,s,o,a){return(r-o)*(e-a)-(i-o)*(s-a)>=0&&(i-o)*(n-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(n-a)>=0}function C5e(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!D5e(i,e)&&(Kv(i,e)&&Kv(e,i)&&P5e(i,e)&&(qi(i.prev,i,e.prev)||qi(i,e.prev,e))||e7(i,e)&&qi(i.prev,i,i.next)>0&&qi(e.prev,e,e.next)>0)}function qi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function e7(i,e){return i.x===e.x&&i.y===e.y}function iY(i,e,t,n){const r=g9(qi(i,e,t)),s=g9(qi(i,e,n)),o=g9(qi(t,n,i)),a=g9(qi(t,n,e));return!!(r!==s&&o!==a||r===0&&m9(i,t,e)||s===0&&m9(i,n,e)||o===0&&m9(t,i,n)||a===0&&m9(t,e,n))}function m9(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function g9(i){return i>0?1:i<0?-1:0}function D5e(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&iY(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Kv(i,e){return qi(i.prev,i,i.next)<0?qi(i,e,i.next)>=0&&qi(i,i.prev,e)>=0:qi(i,e,i.prev)<0||qi(i,i.next,e)<0}function P5e(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function nY(i,e){const t=new NA(i.i,i.x,i.y),n=new NA(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function jN(i,e,t,n){const r=new NA(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Jv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function NA(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L5e(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class N0{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return N0.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];HN(e),WN(n,e);let o=e.length;t.forEach(HN);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,WN(n,t[l]);const a=m5e.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function HN(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function WN(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}let bm=class rY extends ze{constructor(e=new Wo([new ae(.5,.5),new ae(-.5,.5),new ae(-.5,-.5),new ae(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Le(r,3)),this.setAttribute("uv",new Le(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1;let u=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:I5e;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let x,_=!1,w,b,S,A;g&&(x=g.getSpacedPoints(h),_=!0,d=!1,w=g.computeFrenetFrames(h,!1),b=new R,S=new R,A=new R),d||(y=0,f=0,p=0,m=0);const E=a.extractPoints(c);let T=E.shape;const M=E.holes;if(!N0.isClockWise(T)){T=T.reverse();for(let L=0,z=M.length;L<z;L++){const Y=M[L];N0.isClockWise(Y)&&(M[L]=Y.reverse())}}const D=N0.triangulateShape(T,M),P=T;for(let L=0,z=M.length;L<z;L++){const Y=M[L];T=T.concat(Y)}function I(L,z,Y){return z||console.error("THREE.ExtrudeGeometry: vec does not exist"),z.clone().multiplyScalar(Y).add(L)}const k=T.length,G=D.length;function U(L,z,Y){let J,ee,F;const N=L.x-z.x,te=L.y-z.y,le=Y.x-L.x,re=Y.y-L.y,ue=N*N+te*te,pe=N*re-te*le;if(Math.abs(pe)>Number.EPSILON){const xe=Math.sqrt(ue),Se=Math.sqrt(le*le+re*re),we=z.x-te/xe,ce=z.y+N/xe,Ee=Y.x-re/Se,ve=Y.y+le/Se,Re=((Ee-we)*re-(ve-ce)*le)/(N*re-te*le);J=we+N*Re-L.x,ee=ce+te*Re-L.y;const se=J*J+ee*ee;if(se<=2)return new ae(J,ee);F=Math.sqrt(se/2)}else{let xe=!1;N>Number.EPSILON?le>Number.EPSILON&&(xe=!0):N<-Number.EPSILON?le<-Number.EPSILON&&(xe=!0):Math.sign(te)===Math.sign(re)&&(xe=!0),xe?(J=-te,ee=N,F=Math.sqrt(ue)):(J=N,ee=te,F=Math.sqrt(ue/2))}return new ae(J/F,ee/F)}const Z=[];for(let L=0,z=P.length,Y=z-1,J=L+1;L<z;L++,Y++,J++)Y===z&&(Y=0),J===z&&(J=0),Z[L]=U(P[L],P[Y],P[J]);const $=[];let W,X=Z.concat();for(let L=0,z=M.length;L<z;L++){const Y=M[L];W=[];for(let J=0,ee=Y.length,F=ee-1,N=J+1;J<ee;J++,F++,N++)F===ee&&(F=0),N===ee&&(N=0),W[J]=U(Y[J],Y[F],Y[N]);$.push(W),X=X.concat(W)}for(let L=0;L<y;L++){const z=L/y,Y=f*Math.cos(z*Math.PI/2),J=p*Math.sin(z*Math.PI/2)+m;for(let ee=0,F=P.length;ee<F;ee++){const N=I(P[ee],Z[ee],J);q(N.x,N.y,-Y)}for(let ee=0,F=M.length;ee<F;ee++){const N=M[ee];W=$[ee];for(let te=0,le=N.length;te<le;te++){const re=I(N[te],W[te],J);q(re.x,re.y,-Y)}}}const j=p+m;for(let L=0;L<k;L++){const z=d?I(T[L],X[L],j):T[L];_?(S.copy(w.normals[0]).multiplyScalar(z.x),b.copy(w.binormals[0]).multiplyScalar(z.y),A.copy(x[0]).add(S).add(b),q(A.x,A.y,A.z)):q(z.x,z.y,0)}for(let L=1;L<=h;L++)for(let z=0;z<k;z++){const Y=d?I(T[z],X[z],j):T[z];_?(S.copy(w.normals[L]).multiplyScalar(Y.x),b.copy(w.binormals[L]).multiplyScalar(Y.y),A.copy(x[L]).add(S).add(b),q(A.x,A.y,A.z)):q(Y.x,Y.y,u/h*L)}for(let L=y-1;L>=0;L--){const z=L/y,Y=f*Math.cos(z*Math.PI/2),J=p*Math.sin(z*Math.PI/2)+m;for(let ee=0,F=P.length;ee<F;ee++){const N=I(P[ee],Z[ee],J);q(N.x,N.y,u+Y)}for(let ee=0,F=M.length;ee<F;ee++){const N=M[ee];W=$[ee];for(let te=0,le=N.length;te<le;te++){const re=I(N[te],W[te],J);_?q(re.x,re.y+x[h-1].y,x[h-1].x+Y):q(re.x,re.y,u+Y)}}}H(),V();function H(){const L=r.length/3;if(d){let z=0,Y=k*z;for(let J=0;J<G;J++){const ee=D[J];K(ee[2]+Y,ee[1]+Y,ee[0]+Y)}z=h+y*2,Y=k*z;for(let J=0;J<G;J++){const ee=D[J];K(ee[0]+Y,ee[1]+Y,ee[2]+Y)}}else{for(let z=0;z<G;z++){const Y=D[z];K(Y[2],Y[1],Y[0])}for(let z=0;z<G;z++){const Y=D[z];K(Y[0]+k*h,Y[1]+k*h,Y[2]+k*h)}}n.addGroup(L,r.length/3-L,0)}function V(){const L=r.length/3;let z=0;B(P,z),z+=P.length;for(let Y=0,J=M.length;Y<J;Y++){const ee=M[Y];B(ee,z),z+=ee.length}n.addGroup(L,r.length/3-L,1)}function B(L,z){let Y=L.length;for(;--Y>=0;){const J=Y;let ee=Y-1;ee<0&&(ee=L.length-1);for(let F=0,N=h+y*2;F<N;F++){const te=k*F,le=k*(F+1),re=z+J+te,ue=z+ee+te,pe=z+ee+le,xe=z+J+le;Q(re,ue,pe,xe)}}}function q(L,z,Y){l.push(L),l.push(z),l.push(Y)}function K(L,z,Y){oe(L),oe(z),oe(Y);const J=r.length/3,ee=v.generateTopUV(n,r,J-3,J-2,J-1);ne(ee[0]),ne(ee[1]),ne(ee[2])}function Q(L,z,Y,J){oe(L),oe(z),oe(J),oe(z),oe(Y),oe(J);const ee=r.length/3,F=v.generateSideWallUV(n,r,ee-6,ee-3,ee-2,ee-1);ne(F[0]),ne(F[1]),ne(F[3]),ne(F[1]),ne(F[2]),ne(F[3])}function oe(L){r.push(l[L*3+0]),r.push(l[L*3+1]),r.push(l[L*3+2])}function ne(L){s.push(L.x),s.push(L.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return O5e(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new tD[r.type]().fromJSON(r)),new rY(n,e.options)}};const I5e={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],c=e[r*3],h=e[r*3+1];return[new ae(s,o),new ae(a,l),new ae(c,h)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[n*3],h=e[n*3+1],u=e[n*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],m=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new ae(o,1-l),new ae(c,1-u),new ae(d,1-p),new ae(m,1-g)]:[new ae(a,1-l),new ae(h,1-u),new ae(f,1-p),new ae(y,1-g)]}};function O5e(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}let sY=class oY extends ny{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oY(e.radius,e.detail)}},aY=class lY extends ze{constructor(e=[new ae(0,.5),new ae(.5,0),new ae(0,-.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=xr(r,0,Math.PI*2);const s=[],o=[],a=[],l=1/t,c=new R,h=new ae;for(let u=0;u<=t;u++){const d=n+u*l*r,f=Math.sin(d),p=Math.cos(d);for(let m=0;m<=e.length-1;m++)c.x=e[m].x*f,c.y=e[m].y,c.z=e[m].x*p,o.push(c.x,c.y,c.z),h.x=u/t,h.y=m/(e.length-1),a.push(h.x,h.y)}for(let u=0;u<t;u++)for(let d=0;d<e.length-1;d++){const f=d+u*e.length,p=f,m=f+e.length,y=f+e.length+1,g=f+1;s.push(p,m,g),s.push(m,y,g)}if(this.setIndex(s),this.setAttribute("position",new Le(o,3)),this.setAttribute("uv",new Le(a,2)),this.computeVertexNormals(),r===Math.PI*2){const u=this.attributes.normal.array,d=new R,f=new R,p=new R,m=t*e.length*3;for(let y=0,g=0;y<e.length;y++,g+=3)d.x=u[g+0],d.y=u[g+1],d.z=u[g+2],f.x=u[m+g+0],f.y=u[m+g+1],f.z=u[m+g+2],p.addVectors(d,f).normalize(),u[g+0]=u[m+g+0]=p.x,u[g+1]=u[m+g+1]=p.y,u[g+2]=u[m+g+2]=p.z}}static fromJSON(e){return new lY(e.points,e.segments,e.phiStart,e.phiLength)}},R5e=class cY extends ny{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cY(e.radius,e.detail)}},N5e=class uY extends ze{constructor(e=.5,t=1,n=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let u=e;const d=(t-e)/r,f=new R,p=new ae;for(let m=0;m<=r;m++){for(let y=0;y<=n;y++){const g=s+y/n*o;f.x=u*Math.cos(g),f.y=u*Math.sin(g),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,h.push(p.x,p.y)}u+=d}for(let m=0;m<r;m++){const y=m*(n+1);for(let g=0;g<n;g++){const v=g+y,x=v,_=v+n+1,w=v+n+2,b=v+1;a.push(x,_,b),a.push(_,w,b)}}this.setIndex(a),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(h,2))}static fromJSON(e){return new uY(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},hY=class dY extends ze{constructor(e=new Wo([new ae(0,.5),new ae(-.5,-.5),new ae(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Le(r,3)),this.setAttribute("normal",new Le(s,3)),this.setAttribute("uv",new Le(o,2));function c(h){const u=r.length/3,d=h.extractPoints(t);let f=d.shape;const p=d.holes;N0.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,g=p.length;y<g;y++){const v=p[y];N0.isClockWise(v)===!0&&(p[y]=v.reverse())}const m=N0.triangulateShape(f,p);for(let y=0,g=p.length;y<g;y++){const v=p[y];f=f.concat(v)}for(let y=0,g=f.length;y<g;y++){const v=f[y];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let y=0,g=m.length;y<g;y++){const v=m[y],x=v[0]+u,_=v[1]+u,w=v[2]+u;n.push(x,_,w),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return F5e(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new dY(n,e.curveSegments)}};function F5e(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}let iD=class fY extends ze{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const h=[],u=new R,d=new R,f=[],p=[],m=[],y=[];for(let g=0;g<=n;g++){const v=[],x=g/n;let _=0;g==0&&o==0?_=.5/t:g==n&&l==Math.PI&&(_=-.5/t);for(let w=0;w<=t;w++){const b=w/t;u.x=-e*Math.cos(r+b*s)*Math.sin(o+x*a),u.y=e*Math.cos(o+x*a),u.z=e*Math.sin(r+b*s)*Math.sin(o+x*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),m.push(d.x,d.y,d.z),y.push(b+_,1-x),v.push(c++)}h.push(v)}for(let g=0;g<n;g++)for(let v=0;v<t;v++){const x=h[g][v+1],_=h[g][v],w=h[g+1][v],b=h[g+1][v+1];(g!==0||o>0)&&f.push(x,_,b),(g!==n-1||l<Math.PI)&&f.push(_,w,b)}this.setIndex(f),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(m,3)),this.setAttribute("uv",new Le(y,2))}static fromJSON(e){return new fY(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},z5e=class pY extends ny{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pY(e.radius,e.detail)}},k5e=class mY extends ze{constructor(e=1,t=.4,n=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new R,u=new R,d=new R;for(let f=0;f<=n;f++)for(let p=0;p<=r;p++){const m=p/r*s,y=f/n*Math.PI*2;u.x=(e+t*Math.cos(y))*Math.cos(m),u.y=(e+t*Math.cos(y))*Math.sin(m),u.z=t*Math.sin(y),a.push(u.x,u.y,u.z),h.x=e*Math.cos(m),h.y=e*Math.sin(m),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(p/r),c.push(f/n)}for(let f=1;f<=n;f++)for(let p=1;p<=r;p++){const m=(r+1)*f+p-1,y=(r+1)*(f-1)+p-1,g=(r+1)*(f-1)+p,v=(r+1)*f+p;o.push(m,y,v),o.push(y,g,v)}this.setIndex(o),this.setAttribute("position",new Le(a,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(c,2))}static fromJSON(e){return new mY(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},gY=class vY extends ze{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],c=[],h=[],u=new R,d=new R,f=new R,p=new R,m=new R,y=new R,g=new R;for(let x=0;x<=n;++x){const _=x/n*s*Math.PI*2;v(_,s,o,e,f),v(_+.01,s,o,e,p),y.subVectors(p,f),g.addVectors(p,f),m.crossVectors(y,g),g.crossVectors(m,y),m.normalize(),g.normalize();for(let w=0;w<=r;++w){const b=w/r*Math.PI*2,S=-t*Math.cos(b),A=t*Math.sin(b);u.x=f.x+(S*g.x+A*m.x),u.y=f.y+(S*g.y+A*m.y),u.z=f.z+(S*g.z+A*m.z),l.push(u.x,u.y,u.z),d.subVectors(u,f).normalize(),c.push(d.x,d.y,d.z),h.push(x/n),h.push(w/r)}}for(let x=1;x<=n;x++)for(let _=1;_<=r;_++){const w=(r+1)*(x-1)+(_-1),b=(r+1)*x+(_-1),S=(r+1)*x+_,A=(r+1)*(x-1)+_;a.push(w,b,A),a.push(b,S,A)}this.setIndex(a),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(h,2));function v(x,_,w,b,S){const A=Math.cos(x),E=Math.sin(x),T=w/_*x,M=Math.cos(T);S.x=b*(2+M)*.5*A,S.y=b*(2+M)*E*.5,S.z=b*Math.sin(T)*.5}}static fromJSON(e){return new vY(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},B5e=class yY extends ze{constructor(e=new eD(new R(-1,-1,0),new R(-1,1,0),new R(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new R,l=new R,c=new ae;let h=new R;const u=[],d=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Le(u,3)),this.setAttribute("normal",new Le(d,3)),this.setAttribute("uv",new Le(f,2));function m(){for(let x=0;x<t;x++)y(x);y(s===!1?t:0),v(),g()}function y(x){h=e.getPointAt(x/t,h);const _=o.normals[x],w=o.binormals[x];for(let b=0;b<=r;b++){const S=b/r*Math.PI*2,A=Math.sin(S),E=-Math.cos(S);l.x=E*_.x+A*w.x,l.y=E*_.y+A*w.y,l.z=E*_.z+A*w.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+n*l.x,a.y=h.y+n*l.y,a.z=h.z+n*l.z,u.push(a.x,a.y,a.z)}}function g(){for(let x=1;x<=t;x++)for(let _=1;_<=r;_++){const w=(r+1)*(x-1)+(_-1),b=(r+1)*x+(_-1),S=(r+1)*x+_,A=(r+1)*(x-1)+_;p.push(w,b,A),p.push(b,S,A)}}function v(){for(let x=0;x<=t;x++)for(let _=0;_<=r;_++)c.x=x/t,c.y=_/r,f.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yY(new tD[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},xY=class extends Zn{constructor(e){super(),this.type="ShadowMaterial",this.color=new Pe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}};xY.prototype.isShadowMaterial=!0;class wm extends Zn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}wm.prototype.isMeshStandardMaterial=!0;class sh extends wm{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}sh.prototype.isMeshPhysicalMaterial=!0;class K2 extends Zn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Pe(16777215),this.specular=new Pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}K2.prototype.isMeshPhongMaterial=!0;class _Y extends Zn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}_Y.prototype.isMeshToonMaterial=!0;class bY extends Zn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}bY.prototype.isMeshNormalMaterial=!0;class nD extends Zn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}nD.prototype.isMeshLambertMaterial=!0;class wY extends Zn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}wY.prototype.isMeshMatcapMaterial=!0;class U5e extends Bs{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}U5e.prototype.isLineDashedMaterial=!0;const Gi={arraySlice:function(i,e,t){return Gi.isTypedArray(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n},sortedArray:function(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r},flattenJSON:function(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)},subclip:function(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=n)){u.push(c.times[f]);for(let m=0;m<h;++m)d.push(c.values[f*h+m])}}u.length!==0&&(c.times=Gi.convertArray(u,c.times.constructor),c.values=Gi.convertArray(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const g=h,v=u-h;m=Gi.arraySlice(a.values,g,v)}else if(s>=a.times[p]){const g=p*u+h,v=g+u-h;m=Gi.arraySlice(a.values,g,v)}else{const g=a.createInterpolant(),v=h,x=u-h;g.evaluate(s),m=Gi.arraySlice(g.resultBuffer,v,x)}l==="quaternion"&&new Yi().fromArray(m).normalize().conjugate().toArray(m);const y=c.times.length;for(let g=0;g<y;++g){const v=g*f+d;if(l==="quaternion")Yi.multiplyQuaternionsFlat(c.values,v,m,0,c.values,v);else{const x=f-d*2;for(let _=0;_<x;++_)c.values[v+_]-=m[_]}}}return i.blendMode=dX,i}};class tc{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;i:{n:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break n;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,s)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break i}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break i}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,s,e)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}tc.prototype.beforeStart_=tc.prototype.copySampleValue_;tc.prototype.afterEnd_=tc.prototype.copySampleValue_;class V5e extends tc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lp,endingEnd:Lp}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ip:s=e,a=2*t-n;break;case T6:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Ip:o=e,l=2*n-t;break;case T6:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=(n-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),m=p*p,y=m*p,g=-d*y+2*d*m-d*p,v=(1+d)*y+(-1.5-2*d)*m+(-.5+d)*p+1,x=(-1-f)*y+(1.5+f)*m+.5*p,_=f*y-f*m;for(let w=0;w!==a;++w)s[w]=g*o[h+w]+v*o[c+w]+x*o[l+w]+_*o[u+w];return s}}class SY extends tc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(n-t)/(r-t),u=1-h;for(let d=0;d!==a;++d)s[d]=o[c+d]*u+o[l+d]*h;return s}}class G5e extends tc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Q0{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gi.convertArray(t,this.TimeBufferType),this.values=Gi.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Gi.convertArray(e.times,Array),values:Gi.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new G5e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SY(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new V5e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qv:t=this.InterpolantFactoryMethodDiscrete;break;case F1:t=this.InterpolantFactoryMethodLinear;break;case C_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qv;case this.InterpolantFactoryMethodLinear:return F1;case this.InterpolantFactoryMethodSmooth:return C_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Gi.arraySlice(n,s,o),this.values=Gi.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Gi.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Gi.arraySlice(this.times),t=Gi.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===C_,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const u=a*n,d=u-n,f=u+n;for(let p=0;p!==n;++p){const m=t[u+p];if(m!==t[d+p]||m!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Gi.arraySlice(e,0,o),this.values=Gi.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Gi.arraySlice(this.times,0),t=Gi.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Q0.prototype.TimeBufferType=Float32Array;Q0.prototype.ValueBufferType=Float32Array;Q0.prototype.DefaultInterpolation=F1;class Sm extends Q0{}Sm.prototype.ValueTypeName="bool";Sm.prototype.ValueBufferType=Array;Sm.prototype.DefaultInterpolation=qv;Sm.prototype.InterpolantFactoryMethodLinear=void 0;Sm.prototype.InterpolantFactoryMethodSmooth=void 0;class AY extends Q0{}AY.prototype.ValueTypeName="color";class B1 extends Q0{}B1.prototype.ValueTypeName="number";class j5e extends tc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)Yi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Yu extends Q0{InterpolantFactoryMethodLinear(e){return new j5e(this.times,this.values,this.getValueSize(),e)}}Yu.prototype.ValueTypeName="quaternion";Yu.prototype.DefaultInterpolation=F1;Yu.prototype.InterpolantFactoryMethodSmooth=void 0;class Am extends Q0{}Am.prototype.ValueTypeName="string";Am.prototype.ValueBufferType=Array;Am.prototype.DefaultInterpolation=qv;Am.prototype.InterpolantFactoryMethodLinear=void 0;Am.prototype.InterpolantFactoryMethodSmooth=void 0;class U1 extends Q0{}U1.prototype.ValueTypeName="vector";class D6{constructor(e,t=-1,n,r=BC){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=jo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(W5e(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Q0.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=Gi.getKeyframeOrder(l);l=Gi.sortedArray(l,1,h),c=Gi.sortedArray(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new B1(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const u=h[1];let d=r[u];d||(r[u]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,d,f,p,m){if(f.length!==0){const y=[],g=[];Gi.flattenJSON(f,y,g,p),y.length!==0&&m.push(new u(d,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)f[d[p].morphTargets[m]]=-1;for(const m in f){const y=[],g=[];for(let v=0;v!==d[p].morphTargets.length;++v){const x=d[p];y.push(x.time),g.push(x.morphTarget===m?1:0)}r.push(new B1(".morphTargetInfluence["+m+"]",y,g))}l=f.length*(o||1)}else{const f=".bones["+t[u].name+"]";n(U1,f+".position",d,"pos",r),n(Yu,f+".quaternion",d,"rot",r),n(U1,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function H5e(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return B1;case"vector":case"vector2":case"vector3":case"vector4":return U1;case"color":return AY;case"quaternion":return Yu;case"bool":case"boolean":return Sm;case"string":return Am}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function W5e(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=H5e(i.type);if(i.times===void 0){const t=[],n=[];Gi.flattenJSON(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const V1={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class $5e{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(h))return p}return null}}}const q5e=new $5e;class ta{constructor(e){this.manager=e!==void 0?e:q5e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const fl={};class Tm extends ta{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=V1.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fl[e]!==void 0){fl[e].push({onLoad:t,onProgress:n,onError:r});return}fl[e]=[],fl[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(a.status===200||a.status===0){a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=fl[e],c=a.body.getReader(),h=a.headers.get("Content-Length"),u=h?parseInt(h):0,d=u!==0;let f=0;return new ReadableStream({start(p){m();function m(){c.read().then(({done:y,value:g})=>{if(y)p.close();else{f+=g.byteLength;const v=new ProgressEvent("progress",{lengthComputable:d,loaded:f,total:u});for(let x=0,_=l.length;x<_;x++){const w=l[x];w.onProgress&&w.onProgress(v)}p.enqueue(g),m()}})}}})}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{V1.add(e,a);const l=fl[e];delete fl[e];for(let c=0,h=l.length;c<h;c++){const u=l[c];u.onLoad&&u.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=fl[e];delete fl[e];for(let c=0,h=l.length;c<h;c++){const u=l[c];u.onError&&u.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class TY extends ta{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=V1.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=jx("img");function l(){h(),V1.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){h(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class MY extends ta{constructor(e){super(e)}load(e,t,n,r){const s=new ty,o=new TY(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class lf extends ta{constructor(e){super(e)}load(e,t,n,r){const s=new Zi,o=new TY(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}let Ga=class extends Pt{constructor(e,t=1){super(),this.type="Light",this.color=new Pe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};Ga.prototype.isLight=!0;let rD=class extends Ga{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Pt.DefaultUp),this.updateMatrix(),this.groundColor=new Pe(t)}copy(e){return Ga.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}};rD.prototype.isHemisphereLight=!0;const $N=new Ce,qN=new R,XN=new R;class sD{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ae(512,512),this.map=null,this.mapPass=null,this.matrix=new Ce,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wx,this._frameExtents=new ae(1,1),this._viewportCount=1,this._viewports=[new xt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;qN.setFromMatrixPosition(e.matrixWorld),t.position.copy(qN),XN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XN),t.updateMatrixWorld(),$N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($N),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EY extends sD{constructor(){super(new or(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=Yv*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}EY.prototype.isSpotLightShadow=!0;let jd=class extends Ga{constructor(e,t,n=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Pt.DefaultUp),this.updateMatrix(),this.target=new Pt,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new EY}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};jd.prototype.isSpotLight=!0;const YN=new Ce,_g=new R,lb=new R;class CY extends sD{constructor(){super(new or(90,1,.5,500)),this._frameExtents=new ae(4,2),this._viewportCount=6,this._viewports=[new xt(2,1,1,1),new xt(0,1,1,1),new xt(3,1,1,1),new xt(1,1,1,1),new xt(3,0,1,1),new xt(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),_g.setFromMatrixPosition(e.matrixWorld),n.position.copy(_g),lb.copy(n.position),lb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lb),n.updateMatrixWorld(),r.makeTranslation(-_g.x,-_g.y,-_g.z),YN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YN)}}CY.prototype.isPointLightShadow=!0;let G1=class extends Ga{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new CY}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}};G1.prototype.isPointLight=!0;class DY extends sD{constructor(){super(new H0(-5,5,5,-5,.5,500))}}DY.prototype.isDirectionalLightShadow=!0;let Hd=class extends Ga{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Pt.DefaultUp),this.updateMatrix(),this.target=new Pt,this.shadow=new DY}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};Hd.prototype.isDirectionalLight=!0;let oD=class extends Ga{constructor(e,t){super(e,t),this.type="AmbientLight"}};oD.prototype.isAmbientLight=!0;let PY=class extends Ga{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}};PY.prototype.isRectAreaLight=!0;class LY{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new R)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}LY.prototype.isSphericalHarmonics3=!0;class aD extends Ga{constructor(e=new LY,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}aD.prototype.isLightProbe=!0;class Oa{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class IY extends ze{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}IY.prototype.isInstancedBufferGeometry=!0;class OY extends ta{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Tm(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(f,p){if(t[p]!==void 0)return t[p];const y=f.interleavedBuffers[p],g=s(f,y.buffer),v=Vy(y.type,g),x=new af(v,y.stride);return x.uuid=y.uuid,t[p]=x,x}function s(f,p){if(n[p]!==void 0)return n[p];const y=f.arrayBuffers[p],g=new Uint32Array(y).buffer;return n[p]=g,g}const o=e.isInstancedBufferGeometry?new IY:new ze,a=e.data.index;if(a!==void 0){const f=Vy(a.type,a.array);o.setIndex(new at(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let m;if(p.isInterleavedBufferAttribute){const y=r(e.data,p.data);m=new $u(y,p.itemSize,p.offset,p.normalized)}else{const y=Vy(p.type,p.array),g=p.isInstancedBufferAttribute?E6:at;m=new g(y,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(f,m)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],m=[];for(let y=0,g=p.length;y<g;y++){const v=p[y];let x;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);x=new $u(_,v.itemSize,v.offset,v.normalized)}else{const _=Vy(v.type,v.array);x=new at(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),m.push(x)}o.morphAttributes[f]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){const m=u[f];o.addGroup(m.start,m.count,m.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new R;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Fs(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class RY extends ta{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=V1.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){V1.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}RY.prototype.isImageBitmapLoader=!0;let v9;const X5e={getContext:function(){return v9===void 0&&(v9=new(window.AudioContext||window.webkitAudioContext)),v9},setContext:function(i){v9=i}};class Y5e extends ta{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Tm(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);X5e.getContext().decodeAudioData(l,function(h){t(h)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}}class Z5e extends aD{constructor(e,t,n=1){super(void 0,n);const r=new Pe().set(e),s=new Pe().set(t),o=new R(r.r,r.g,r.b),a=new R(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}Z5e.prototype.isHemisphereLightProbe=!0;class Q5e extends aD{constructor(e,t=1){super(void 0,t);const n=new Pe().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Q5e.prototype.isAmbientLightProbe=!0;class K5e{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ZN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ZN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ZN(){return(typeof performance>"u"?Date:performance).now()}let J5e=class extends Pt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};class e6e{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Yi.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Yi.multiplyQuaternionsFlat(e,o,e,t,e,n),Yi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const lD="\\[\\]\\.:\\/",t6e=new RegExp("["+lD+"]","g"),cD="[^"+lD+"]",i6e="[^"+lD.replace("\\.","")+"]",n6e=/((?:WC+[\/:])*)/.source.replace("WC",cD),r6e=/(WCOD+)?/.source.replace("WCOD",i6e),s6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cD),o6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cD),a6e=new RegExp("^"+n6e+r6e+s6e+o6e+"$"),l6e=["material","materials","bones"];class c6e{constructor(e,t,n){const r=n||Vt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Vt{constructor(e,t,n){this.path=t,this.parsedPath=n||Vt.parseTrackName(t),this.node=Vt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Vt.Composite(e,t,n):new Vt(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(t6e,"")}static parseTrackName(e){const t=a6e.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);l6e.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Vt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vt.Composite=c6e;Vt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vt.prototype.GetterByBindingType=[Vt.prototype._getValue_direct,Vt.prototype._getValue_array,Vt.prototype._getValue_arrayElement,Vt.prototype._getValue_toArray];Vt.prototype.SetterByBindingTypeAndVersioning=[[Vt.prototype._setValue_direct,Vt.prototype._setValue_direct_setNeedsUpdate,Vt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_array,Vt.prototype._setValue_array_setNeedsUpdate,Vt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_arrayElement,Vt.prototype._setValue_arrayElement_setNeedsUpdate,Vt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vt.prototype._setValue_fromArray,Vt.prototype._setValue_fromArray_setNeedsUpdate,Vt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class u6e{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Lp,endingEnd:Lp};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tve,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;if(l<0||n===0)return;this._startTime=null,t=n*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case dX:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case BC:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===ive;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===eve){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Ip,r.endingEnd=Ip):(e?r.endingStart=this.zeroSlopeAtStart?Ip:Lp:r.endingStart=T6,t?r.endingEnd=this.zeroSlopeAtEnd?Ip:Lp:r.endingEnd=T6)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}class h6e extends hc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let u=0;u!==s;++u){const d=r[u],f=d.name;let p=h[f];if(p!==void 0)o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const m=t&&t._propertyBindings[u].binding.parsedPath;p=new e6e(Vt.create(n,f,m),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new SY(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?D6.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=BC),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new u6e(this,o,t,n);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?D6.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}h6e.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class d6e extends af{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}d6e.prototype.isInstancedInterleavedBuffer=!0;let NY=class{constructor(e,t,n=0,r=1/0){this.ray=new Z0(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new wX,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return FA(e,this,n,t),n.sort(QN),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)FA(e[r],this,n,t);return n.sort(QN),n}};function QN(i,e){return i.distance-e.distance}function FA(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const r=i.children;for(let s=0,o=r.length;s<o;s++)FA(r[s],e,t,!0)}}class KN{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(xr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const JN=new ae;class Mm{constructor(e=new ae(1/0,1/0),t=new ae(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=JN.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return JN.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Mm.prototype.isBox2=!0;const eF=new R,y9=new R;class FY{constructor(e=new R,t=new R){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){eF.subVectors(e,this.start),y9.subVectors(this.end,this.start);const n=y9.dot(y9);let s=y9.dot(eF)/n;return t&&(s=xr(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const tF=new R;class f6e extends Pt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new ze,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new Le(r,3));const s=new Bs({fog:!1,toneMapped:!1});this.cone=new dc(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tF.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tF),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Cc=new R,x9=new Ce,cb=new Ce;class p6e extends dc{constructor(e){const t=zY(e),n=new ze,r=[],s=[],o=new Pe(0,0,1),a=new Pe(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Le(r,3)),n.setAttribute("color",new Le(s,3));const l=new Bs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");cb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(x9.multiplyMatrices(cb,a.matrixWorld),Cc.setFromMatrixPosition(x9),r.setXYZ(o,Cc.x,Cc.y,Cc.z),x9.multiplyMatrices(cb,a.parent.matrixWorld),Cc.setFromMatrixPosition(x9),r.setXYZ(o+1,Cc.x,Cc.y,Cc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function zY(i){const e=[];i&&i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,zY(i.children[t]));return e}class m6e extends Cn{constructor(e,t,n){const r=new iD(t,4,2),s=new os({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}class g6e extends dc{constructor(e=10,t=10,n=4473924,r=8947848){n=new Pe(n),r=new Pe(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=t;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=d===s?n:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const h=new ze;h.setAttribute("position",new Le(l,3)),h.setAttribute("color",new Le(c,3));const u=new Bs({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}}const iF=new R,_9=new R,nF=new R;class v6e extends Pt{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);let r=new ze;r.setAttribute("position",new Le([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Bs({fog:!1,toneMapped:!1});this.lightPlane=new qu(r,s),this.add(this.lightPlane),r=new ze,r.setAttribute("position",new Le([0,0,0,0,0,1],3)),this.targetLine=new qu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){iF.setFromMatrixPosition(this.light.matrixWorld),_9.setFromMatrixPosition(this.light.target.matrixWorld),nF.subVectors(_9,iF),this.lightPlane.lookAt(_9),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_9),this.targetLine.scale.z=nF.length()}}const b9=new R,Ji=new xm;class P6 extends dc{constructor(e){const t=new ze,n=new Bs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new Pe(16755200),l=new Pe(16711680),c=new Pe(43775),h=new Pe(16777215),u=new Pe(3355443);d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",l),d("p","n2",l),d("p","n3",l),d("p","n4",l),d("u1","u2",c),d("u2","u3",c),d("u3","u1",c),d("c","t",h),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u);function d(p,m,y){f(p,y),f(m,y)}function f(p,m){r.push(0,0,0),s.push(m.r,m.g,m.b),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new Le(r,3)),t.setAttribute("color",new Le(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Ji.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_n("c",t,e,Ji,0,0,-1),_n("t",t,e,Ji,0,0,1),_n("n1",t,e,Ji,-n,-r,-1),_n("n2",t,e,Ji,n,-r,-1),_n("n3",t,e,Ji,-n,r,-1),_n("n4",t,e,Ji,n,r,-1),_n("f1",t,e,Ji,-n,-r,1),_n("f2",t,e,Ji,n,-r,1),_n("f3",t,e,Ji,-n,r,1),_n("f4",t,e,Ji,n,r,1),_n("u1",t,e,Ji,n*.7,r*1.1,-1),_n("u2",t,e,Ji,-n*.7,r*1.1,-1),_n("u3",t,e,Ji,0,r*2,-1),_n("cf1",t,e,Ji,-n,0,1),_n("cf2",t,e,Ji,n,0,1),_n("cf3",t,e,Ji,0,-r,1),_n("cf4",t,e,Ji,0,r,1),_n("cn1",t,e,Ji,-n,0,-1),_n("cn2",t,e,Ji,n,0,-1),_n("cn3",t,e,Ji,0,-r,-1),_n("cn4",t,e,Ji,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _n(i,e,t,n,r,s,o){b9.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],b9.x,b9.y,b9.z)}}class L6 extends dc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ze;s.setIndex(new at(n,1)),s.setAttribute("position",new Le(r,3)),super(s,new Bs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class y6e extends dc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ze;r.setAttribute("position",new Le(t,3)),r.setAttribute("color",new Le(n,3));const s=new Bs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Pe,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class x6e{constructor(){this.type="ShapePath",this.color=new Pe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new k1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(v){const x=[];for(let _=0,w=v.length;_<w;_++){const b=v[_],S=new Wo;S.curves=b.curves,x.push(S)}return x}function r(v,x){const _=x.length;let w=!1;for(let b=_-1,S=0;S<_;b=S++){let A=x[b],E=x[S],T=E.x-A.x,M=E.y-A.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(A=x[S],T=-T,E=x[b],M=-M),v.y<A.y||v.y>E.y)continue;if(v.y===A.y){if(v.x===A.x)return!0}else{const C=M*(v.x-A.x)-T*(v.y-A.y);if(C===0)return!0;if(C<0)continue;w=!w}}else{if(v.y!==A.y)continue;if(E.x<=v.x&&v.x<=A.x||A.x<=v.x&&v.x<=E.x)return!0}}return w}const s=N0.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return n(o);let a,l,c;const h=[];if(o.length===1)return l=o[0],c=new Wo,c.curves=l.curves,h.push(c),h;let u=!s(o[0].getPoints());u=e?!u:u;const d=[],f=[];let p=[],m=0,y;f[m]=void 0,p[m]=[];for(let v=0,x=o.length;v<x;v++)l=o[v],y=l.getPoints(),a=s(y),a=e?!a:a,a?(!u&&f[m]&&m++,f[m]={s:new Wo,p:y},f[m].s.curves=l.curves,u&&m++,p[m]=[]):p[m].push({h:l,p:y[0]});if(!f[0])return n(o);if(f.length>1){let v=!1;const x=[];for(let _=0,w=f.length;_<w;_++)d[_]=[];for(let _=0,w=f.length;_<w;_++){const b=p[_];for(let S=0;S<b.length;S++){const A=b[S];let E=!0;for(let T=0;T<f.length;T++)r(A.p,f[T].p)&&(_!==T&&x.push({froms:_,tos:T,hole:S}),E?(E=!1,d[T].push(A)):v=!0);E&&d[_].push(A)}}x.length>0&&(v||(p=d))}let g;for(let v=0,x=f.length;v<x;v++){c=f[v].s,h.push(c),g=p[v];for(let _=0,w=g.length;_<w;_++)c.holes.push(g[_].h)}return h}}const kY=new Float32Array(1),_6e=new Int32Array(kY.buffer);class rF{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),kY[0]=e;const t=_6e[0];let n=t>>16&32768,r=t>>12&2047;const s=t>>23&255;return s<103?n:s>142?(n|=31744,n|=(s==255?0:1)&&t&8388607,n):s<113?(r|=2048,n|=(r>>114-s)+(r>>113-s&1),n):(n|=s-112<<10|r>>1,n+=r&1,n)}}zs.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(zs.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i};k1.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)};g6e.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};p6e.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ta.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Oa.extractUrlBase(i)};ta.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Mm.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)};Mm.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Mm.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};Mm.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)};er.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)};er.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};er.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};er.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};er.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)};Fs.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Wx.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)};FY.prototype.center=function(i){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(i)};hn.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};hn.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};hn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};hn.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};hn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};hn.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};Ce.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)};Ce.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};Ce.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new R().setFromMatrixColumn(this,3)};Ce.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)};Ce.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ce.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Ce.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Ce.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ce.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)};Ce.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Ce.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ce.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ce.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ce.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ce.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ce.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Ce.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ce.prototype.makeFrustum=function(i,e,t,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,n,t,r,s)};Ce.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};va.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)};Yi.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)};Yi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Z0.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};Z0.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)};Z0.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};sn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};sn.prototype.barycoordFromPoint=function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)};sn.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)};sn.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)};sn.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)};sn.barycoordFromPoint=function(i,e,t,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),sn.getBarycoord(i,e,t,n,r)};sn.normal=function(i,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),sn.getNormal(i,e,t,n)};Wo.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)};Wo.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new bm(this,i)};Wo.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hY(this,i)};ae.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};ae.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};ae.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};R.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};R.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};R.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)};R.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)};R.prototype.getColumnFromMatrix=function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)};R.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)};R.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};R.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};R.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};xt.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};xt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Pt.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)};Pt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Pt.prototype.translate=function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)};Pt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Pt.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(Pt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Cn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Cn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),nve},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Yx.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};or.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(i)};Object.defineProperties(Ga.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}});Object.defineProperties(at.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===M6},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(M6)}}});at.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?M6:Xv),this};at.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},at.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ze.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)};ze.prototype.addAttribute=function(i,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new at(arguments[1],arguments[2]))):i==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(i,e)};ze.prototype.addDrawCall=function(i,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)};ze.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};ze.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};ze.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)};ze.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(ze.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});af.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?M6:Xv),this};af.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};bm.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};bm.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};bm.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Xx.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Zn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===sX}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Si.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}});mi.prototype.clearTarget=function(i,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,n)};mi.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)};mi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};mi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};mi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};mi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};mi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};mi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};mi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};mi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};mi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};mi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};mi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};mi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};mi.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)};mi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};mi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};mi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};mi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};mi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};mi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};mi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};mi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};mi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};mi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(mi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=i===!0?Fr:Kn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(BX.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(jn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}});J5e.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new Y5e().load(i,function(n){e.setBuffer(n)}),this};Hx.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)};Hx.prototype.clear=function(i,e,t,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,e,t,n)};ym.crossOrigin=void 0;ym.loadTexture=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new lf;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,t,void 0,n);return e&&(s.mapping=e),s};ym.loadTextureCube=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new MY;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,t,void 0,n);return e&&(s.mapping=e),s};ym.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ym.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:nX}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=nX);const b6e="/pixselvue/assets/bg_news-f28bc134.png",w6e={},S6e={"aria-label":"Page navigation example",class:"backdrop-blur-sm"},A6e=XG('<ul class="inline-flex items-center -space-x-px"><li><a class="block px-3 py-2 ml-0 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 rounded-l-lg hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"><span class="sr-only">Previous</span><svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></a></li><li><a class="px-3 py-2 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</a></li><li><a class="px-3 py-2 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</a></li><li><a aria-current="page" class="px-3 py-2 leading-tight text-gray-400 bg-zinc-300/25 border border-zinc-600 hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</a></li><li><a class="px-3 py-2 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</a></li><li><a class="px-3 py-2 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</a></li><li><a class="block px-3 py-2 leading-tight text-gray-500 bg-zinc-700/25 border border-zinc-600 rounded-r-lg hover:bg-zinc-300/25 hover:text-gray-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"><span class="sr-only">Next</span><svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></a></li></ul>',1),T6e=[A6e];function M6e(i,e){return ur(),wr("nav",S6e,T6e)}const BY=zx(w6e,[["render",M6e]]);const E6e=Be("div",{class:"bg-zinc-700/25 backdrop-blur-xl border-2 border-gray-300/50 rounded-2xl px-4 py-2 m-3"},[Be("h1",null,[Be("span",{class:"font-bold text-xl animate-text bg-gradient-to-r from-teal-500 via-purple-500 to-orange-500 bg-clip-text text-transparent"}," Новости ")])],-1),C6e={class:"container grid grid-cols-1 lg:grid-cols-2 flex-col pb-3"},D6e={class:"h-full flex flex-col"},P6e={class:"font-bold text-2xl"},L6e={class:"h-full"},I6e=Be("img",{src:b6e,alt:"",class:"rounded mt-1"},null,-1),O6e={class:"text-gray-300 pt-1 text-justify"},R6e=Be("hr",{class:"my-2 h-1 border-0 rounded bg-gray-300"},null,-1),N6e={class:"flex flex-col sm:flex-row sm:space-x-2 space-x-0"},F6e={class:"flex space-x-2 text-gray-300 justify-around"},z6e={class:"flex space-x-2 py-2"},k6e=Be("span",{class:"material-symbols-outlined"}," calendar_month ",-1),B6e={class:"flex space-x-2 py-2"},U6e=Be("span",{class:"material-symbols-outlined"}," visibility ",-1),V6e={props:{isbg:Boolean},mounted(){console.log(this.isbg),this.isbg&&(this.background=Fge)},data(){return{background:null,items:[{id:0,header:"Февральский вайп AllTheMods",text:"Доброго времени суток, на сервере AllTheMods прошёл вайп и обновление сборки! Заглядывай в полную новость, чтобы узнать подробнее об глобальном обновлении!",img:"",data:"30.02.2023",views:10},{id:1,header:"Февральский вайп OneBlock",text:"Доброго времени суток, на сервере OneBlock прошло глобальное обновление и вайп! Заглядывай в полную новость, чтобы узнать подробнее об глобальном обновлении! Доброго времени суток На сервере OneBlock прошло глобальное обновление и вайп! Заглядывай в полную новость, чтобы узнать подробнее об глобальном обновлении!",img:"",data:"25.02.2023",views:30},{id:2,header:"Начало разработки сайта",text:"Проект начал свое развитие и ищет энтузиастов",img:"",data:"19.02.2023",views:15}]}},components:{PaginationNews:BY}},G6e=Object.assign(V6e,{__name:"NewsHomePage",setup(i){return(e,t)=>{const n=oE("RouterLink");return ur(),wr("div",{style:y1([{background:`url(${e.background})`},{"background-size":"100% 100%"}]),class:"text-white min-h-screen flex flex-col items-center overflow-hidden"},[E6e,Be("div",C6e,[(ur(!0),wr(is,null,zG(e.items,r=>(ur(),wr("div",{key:r.id,class:"bg-zinc-700/25 backdrop-blur-xl rounded-md border-2 border-gray-300/20 p-3 sm:m-0.5 my-1"},[Be("div",D6e,[Be("h1",P6e,wa(r.header),1),Be("div",L6e,[I6e,Be("p",O6e,wa(r.text),1)]),R6e,Be("div",N6e,[Be("div",F6e,[Be("div",z6e,[k6e,Be("p",null,wa(r.data),1)]),Be("div",B6e,[U6e,Be("p",null,wa(r.views),1)])]),Gt(n,{to:"/news",class:"py-2 lg:px-0 px-2 btn w-full text-center text-white bg-cyan-400/40 hover:bg-cyan-500/50 hover:scale-105 ease-out transition backdrop-blur-xl rounded-xl"},{default:So(()=>[vs(" Подробнее ")]),_:1})])])]))),128))]),Gt(BY)],4)}}}),j6e="/pixselvue/assets/minecraft_shaders-71bcb5b5.mp4",H6e="/pixselvue/assets/block_tnt-f60bbfa3.gif";/*!
 * strings: 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var W6e=/(?:^\s+|\s+$)/g,$6e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function UY(i){var e=i.nodeType,t="";if(e===1||e===9||e===11){if(typeof i.textContent=="string")return i.textContent;for(i=i.firstChild;i;i=i.nextSibling)t+=UY(i)}else if(e===3||e===4)return i.nodeValue;return t}function zA(i,e,t,n){for(var r=i.firstChild,s=[],o;r;)r.nodeType===3?(o=(r.nodeValue+"").replace(/^\n+/g,""),n||(o=o.replace(/\s+/g," ")),s.push.apply(s,VY(o,e,t,n))):(r.nodeName+"").toLowerCase()==="br"?s[s.length-1]+="<br>":s.push(r.outerHTML),r=r.nextSibling;for(o=s.length;o--;)s[o]==="&"&&s.splice(o,1,"&amp;");return s}function VY(i,e,t,n){if(i+="",t&&(i=i.trim?i.trim():i.replace(W6e,"")),e&&e!=="")return i.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var r=[],s=i.length,o=0,a,l;o<s;o++)l=i.charAt(o),(l.charCodeAt(0)>=55296&&l.charCodeAt(0)<=56319||i.charCodeAt(o+1)>=65024&&i.charCodeAt(o+1)<=65039)&&(a=((i.substr(o,12).split($6e)||[])[1]||"").length||2,l=i.substr(o,a),r.emoji=1,o+=a-1),r.push(l===">"?"&gt;":l==="<"?"&lt;":n&&l===" "&&(i.charAt(o-1)===" "||i.charAt(o+1)===" ")?"&nbsp;":l);return r}/*!
 * TextPlugin 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var y2,w9,q6e=function(){return y2||typeof window<"u"&&(y2=window.gsap)&&y2.registerPlugin&&y2},sy={version:"3.11.4",name:"text",init:function(e,t,n){typeof t!="object"&&(t={value:t});var r=e.nodeName.toUpperCase(),s=this,o=t,a=o.newClass,l=o.oldClass,c=o.preserveSpaces,h=o.rtl,u=s.delimiter=t.delimiter||"",d=s.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),f,p,m,y,g,v,x,_;if(s.svg=e.getBBox&&(r==="TEXT"||r==="TSPAN"),!("innerHTML"in e)&&!s.svg)return!1;if(s.target=e,!("value"in t)){s.text=s.original=[""];return}for(m=zA(e,u,!1,c),w9||(w9=document.createElement("div")),w9.innerHTML=t.value,p=zA(w9,u,!1,c),s.from=n._from,(s.from||h)&&!(h&&s.from)&&(r=m,m=p,p=r),s.hasClass=!!(a||l),s.newClass=h?l:a,s.oldClass=h?a:l,r=m.length-p.length,f=r<0?m:p,r<0&&(r=-r);--r>-1;)f.push(d);if(t.type==="diff"){for(y=0,g=[],v=[],x="",r=0;r<p.length;r++)_=p[r],_===m[r]?x+=_:(g[y]=x+_,v[y++]=x+m[r],x="");p=g,m=v,x&&(p.push(x),m.push(x))}t.speed&&n.duration(Math.min(.05/t.speed*f.length,t.maxDuration||9999)),s.rtl=h,s.original=m,s.text=p,s._props.push("text")},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var n=t.text,r=t.hasClass,s=t.newClass,o=t.oldClass,a=t.delimiter,l=t.target,c=t.fillChar,h=t.original,u=t.rtl,d=n.length,f=(u?1-e:e)*d+.5|0,p,m,y;r&&e?(p=s&&f,m=o&&f!==d,y=(p?"<span class='"+s+"'>":"")+n.slice(0,f).join(a)+(p?"</span>":"")+(m?"<span class='"+o+"'>":"")+a+h.slice(f).join(a)+(m?"</span>":"")):y=n.slice(0,f).join(a)+a+h.slice(f).join(a),t.svg?l.textContent=y:l.innerHTML=c==="&nbsp;"&&~y.indexOf("  ")?y.split("  ").join("&nbsp;&nbsp;"):y}};sy.splitInnerHTML=zA;sy.emojiSafeSplit=VY;sy.getText=UY;q6e()&&y2.registerPlugin(sy);const X6e=Be("video",{class:"absolute w-screen blur-sm xl:block hidden",width:"1920",height:"1080",autoplay:"",muted:"",loop:""},[Be("source",{src:j6e,type:"video/mp4"})],-1),Y6e={class:"container mx-auto flex flex-col lg:flex-row lg:space-x-4 pt-16 text-gray-200 my-auto justify-center"},Z6e={class:"basis-1/2"},Q6e=XG('<div class="mt-5 p-3 bg-zinc-700/40 backdrop-blur-xl rounded-md border-2 border-gray-300/20"><h1 class="font-bold text-2xl"><img class="object-cover h-16 fixed -left-8 -top-10" src="'+H6e+'"><span class="text-red-500">PixselCraft</span> - игровой проект Minecraft. </h1><p class="text-gray-300 pt-1 text-animated" id="gsap_text"> Каждый игрок ищет уютную атмосферу и интересный геймплей, отзывчивую модерацию и баланс на сервере. <br> Всё это есть на проекте нового поколения - PixselCraft! </p></div>',1),K6e={class:"flex justify-center pt-2"},J6e=Be("a",{class:"btn w-full text-center text-cyan-500 bg-cyan-900/40 hover:bg-cyan-900/20 hover:scale-110 ease-out transition backdrop-blur-xl p-2 ml-1 rounded-xl"}," Регистрация ",-1),e8e={class:"flex justify-center pt-2"},t8e={class:"basis-1/2 my-auto flex flex-col space-y-3 pt-5 w-full"},i8e=Be("h1",{class:"font-bold text-2xl bg-zinc-700/25 backdrop-blur-xl rounded-md p-3 border-2 border-gray-300/20"},[Be("span",{class:"text-orange-500"},"Онлайн"),vs(" на наших серверах "),Be("p",{class:"text-base text-left font-light"}," У наших серверов разные наборы модов и востребованных у игроков ")],-1),n8e={class:"pb-1 flex flex-col sm:flex-row sm:space-x-2"},r8e={class:"font-bold text-xl z-10"},s8e={class:"text-red-500 drop-shadow"},o8e={class:"flex space-x-2 [&>*]:py-0.5 [&>*]:px-2 [&>*]:bg-zinc-700/25 [&>*]:backdrop-blur-xl [&>*]:rounded-xl [&>*]:decoration-cyan-500"},a8e={class:"hover:underline mods"},l8e={href:""},c8e={class:"hover:underline mods"},u8e={href:""},h8e=Be("span",{class:"hover:underline mods"},"...",-1),d8e={class:"w-full bg-zinc-700/40 backdrop-blur-xl rounded-full p-1 mt-0.5 border-2 border-gray-300/10"},GY=K3(),S9=Ul(!1),f8e={data(){return{servers:[{Name:"HiTech",online:35,mods:["AE2","IndustrialCraft 2"]},{Name:"DarkSide",online:10,mods:["zalupa","IndustrialCraft 2"]}]}},watch:{auth(){console.log(GY)}},mounted(){nu.registerPlugin(sy),nu.from("#gsap_text",{duration:1,opacity:0,delay:.1,ease:"power4.in"}),nu.from("#server",{delay:.5,duration:3,width:50,ease:"expo.inOut"}),nu.from(".mods",{delay:.5,y:50,stagger:.5})}},p8e=Object.assign(f8e,{__name:"WalcomeBlock",setup(i){return cm(async()=>{vC(GY,e=>{e?S9.value=!0:S9.value=!1})}),(e,t)=>{const n=oE("router-link");return ur(),wr("div",{style:y1([{background:`url(${yu(Nge)})`},{"background-size":"100% 100%"}]),class:"flex flex-col min-h-screen"},[X6e,Be("div",Y6e,[Be("div",Z6e,[Q6e,V5(Be("div",K6e,[Gt(n,{to:"/login",class:"btn w-full text-center text-white bg-cyan-400/40 hover:bg-cyan-500/20 hover:scale-110 ease-out transition backdrop-blur-xl p-2 mr-1 rounded-xl"},{default:So(()=>[vs(" Войти ")]),_:1}),J6e],512),[[j5,!S9.value]]),V5(Be("div",e8e,[Gt(n,{to:"/play",class:"btn w-full text-center text-white bg-cyan-400/25 hover:bg-cyan-500/50 hover:scale-105 ease-out transition backdrop-blur-xl p-2 rounded-xl"},{default:So(()=>[vs(" Начать играть ")]),_:1})],512),[[j5,S9.value]])]),Be("div",t8e,[i8e,(ur(!0),wr(is,null,zG(e.servers,r=>(ur(),wr("div",{key:r.Name,class:"pt-2"},[Be("div",n8e,[Be("p",r8e,[Be("span",s8e,wa(r.Name),1),vs(" "+wa(r.online)+" из 100 ",1)]),Be("div",o8e,[Be("span",a8e,[Be("a",l8e,wa(r.mods[0]),1)]),Be("span",c8e,[Be("a",u8e,wa(r.mods[1]),1)]),h8e])]),Be("div",d8e,[Be("div",{id:"server",class:"bg-gradient-to-r from-green-300 via-blue-500 to-purple-600 animate-text p-2 backdrop-blur-xl text-base font-light text-blue-100 text-center leading-none rounded-full",style:y1("width:"+r.online+"%")},wa(r.online)+"% ",5)])]))),128))])])],4)}}});var m8e=Object.create,uD=Object.defineProperty,g8e=Object.getOwnPropertyDescriptor,v8e=Object.getOwnPropertyNames,y8e=Object.getPrototypeOf,x8e=Object.prototype.hasOwnProperty,hD=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),_8e=(i,e)=>{for(var t in e)uD(i,t,{get:e[t],enumerable:!0})},b8e=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of v8e(e))!x8e.call(i,r)&&r!==t&&uD(i,r,{get:()=>e[r],enumerable:!(n=g8e(e,r))||n.enumerable});return i},t7=(i,e,t)=>(t=i!=null?m8e(y8e(i)):{},b8e(e||!i||!i.__esModule?uD(t,"default",{value:i,enumerable:!0}):t,i)),w8e=hD((i,e)=>{(function(t,n){typeof i=="object"?e.exports=n():typeof define=="function"&&define.amd?define(n):t.Alea=n()})(i,function(){return t.importState=function(r){var s=new t;return s.importState(r),s},t;function t(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=n();s=c(" "),o=c(" "),a=c(" ");for(var h=0;h<r.length;h++)s-=c(r[h]),s<0&&(s+=1),o-=c(r[h]),o<0&&(o+=1),a-=c(r[h]),a<0&&(a+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(d){s=+d[0]||0,o=+d[1]||0,a=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function n(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),jY=hD((i,e)=>{(function(t,n){typeof i=="object"&&typeof e<"u"?n(i):typeof define=="function"&&define.amd?define(["exports"],n):n((t=typeof globalThis<"u"?globalThis:t||self).SVDJS={})})(i,function(t){t.SVD=function(n,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!n)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,p,m,y,g,v,x,_=n[0].length,w=n.length;if(w<_)throw new TypeError("Invalid matrix: m < n");for(var b=[],S=[],A=[],E=r==="f"?w:_,T=g=p=0;T<w;T++)S[T]=new Array(E).fill(0);for(T=0;T<_;T++)A[T]=new Array(_).fill(0);var M,C=new Array(_).fill(0);for(T=0;T<w;T++)for(l=0;l<_;l++)S[T][l]=n[T][l];for(T=0;T<_;T++){for(b[T]=p,y=0,h=T+1,l=T;l<w;l++)y+=Math.pow(S[l][T],2);if(y<a)p=0;else for(m=(f=S[T][T])*(p=f<0?Math.sqrt(y):-Math.sqrt(y))-y,S[T][T]=f-p,l=h;l<_;l++){for(y=0,c=T;c<w;c++)y+=S[c][T]*S[c][l];for(f=y/m,c=T;c<w;c++)S[c][l]=S[c][l]+f*S[c][T]}for(C[T]=p,y=0,l=h;l<_;l++)y+=Math.pow(S[T][l],2);if(y<a)p=0;else{for(m=(f=S[T][T+1])*(p=f<0?Math.sqrt(y):-Math.sqrt(y))-y,S[T][T+1]=f-p,l=h;l<_;l++)b[l]=S[T][l]/m;for(l=h;l<w;l++){for(y=0,c=h;c<_;c++)y+=S[l][c]*S[T][c];for(c=h;c<_;c++)S[l][c]=S[l][c]+y*b[c]}}g<(v=Math.abs(C[T])+Math.abs(b[T]))&&(g=v)}if(s)for(T=_-1;0<=T;T--){if(p!==0){for(m=S[T][T+1]*p,l=h;l<_;l++)A[l][T]=S[T][l]/m;for(l=h;l<_;l++){for(y=0,c=h;c<_;c++)y+=S[T][c]*A[c][l];for(c=h;c<_;c++)A[c][l]=A[c][l]+y*A[c][T]}}for(l=h;l<_;l++)A[T][l]=0,A[l][T]=0;A[T][T]=1,p=b[T],h=T}if(r){if(r==="f")for(T=_;T<w;T++){for(l=_;l<w;l++)S[T][l]=0;S[T][T]=1}for(T=_-1;0<=T;T--){for(h=T+1,p=C[T],l=h;l<E;l++)S[T][l]=0;if(p!==0){for(m=S[T][T]*p,l=h;l<E;l++){for(y=0,c=h;c<w;c++)y+=S[c][T]*S[c][l];for(f=y/m,c=T;c<w;c++)S[c][l]=S[c][l]+f*S[c][T]}for(l=T;l<w;l++)S[l][T]=S[l][T]/p}else for(l=T;l<w;l++)S[l][T]=0;S[T][T]=S[T][T]+1}}for(o*=g,c=_-1;0<=c;c--)for(var D=0;D<50;D++){for(M=!1,h=c;0<=h;h--){if(Math.abs(b[h])<=o){M=!0;break}if(Math.abs(C[h-1])<=o)break}if(!M){for(d=0,u=h-(y=1),T=h;T<c+1&&(f=y*b[T],b[T]=d*b[T],!(Math.abs(f)<=o));T++)if(p=C[T],C[T]=Math.sqrt(f*f+p*p),d=p/(m=C[T]),y=-f/m,r)for(l=0;l<w;l++)v=S[l][u],x=S[l][T],S[l][u]=v*d+x*y,S[l][T]=-v*y+x*d}if(x=C[c],h===c){if(x<0&&(C[c]=-x,s))for(l=0;l<_;l++)A[l][c]=-A[l][c];break}for(g=C[h],f=(((v=C[c-1])-x)*(v+x)+((p=b[c-1])-(m=b[c]))*(p+m))/(2*m*v),p=Math.sqrt(f*f+1),f=((g-x)*(g+x)+m*(v/(f<0?f-p:f+p)-m))/g,T=h+(y=d=1);T<c+1;T++){if(p=b[T],v=C[T],m=y*p,p*=d,x=Math.sqrt(f*f+m*m),f=g*(d=f/(b[T-1]=x))+p*(y=m/x),p=-g*y+p*d,m=v*y,v*=d,s)for(l=0;l<_;l++)g=A[l][T-1],x=A[l][T],A[l][T-1]=g*d+x*y,A[l][T]=-g*y+x*d;if(x=Math.sqrt(f*f+m*m),f=(d=f/(C[T-1]=x))*p+(y=m/x)*v,g=-y*p+d*v,r)for(l=0;l<w;l++)v=S[l][T-1],x=S[l][T],S[l][T-1]=v*d+x*y,S[l][T]=-v*y+x*d}b[h]=0,b[c]=f,C[c]=g}for(T=0;T<_;T++)C[T]<o&&(C[T]=0);return{u:S,q:C,v:A}},t.VERSION="1.1.1",Object.defineProperty(t,"__esModule",{value:!0})})}),S8e=hD(i=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||t;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||t;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=d._howls[f]._soundById(p[m]);y&&y._node&&(y._node.volume=y._volume*u)}return d}return d._volume},mute:function(u){var d=this||t;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=d._howls[f]._soundById(p[m]);y&&y._node&&(y._node.muted=u?!0:y._muted)}return d},stop:function(){for(var u=this||t,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||t,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||t)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||t;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/([0-6].)/g),y=m&&parseInt(m[0].split("/")[1],10)<33,g=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,v=p.match(/Version\/(.*?) /),x=g&&v&&parseInt(v[1],10)<15;return u._codecs={mp3:!!(!y&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||t;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var y=u._howls[m]._getSoundIds(),g=0;g<y.length;g++){var v=u._howls[m]._soundById(y[g]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var _=0;_<u._howls.length;_++)u._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||t;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||t;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!t.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var t=new e,n=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};n.prototype={init:function(u){var d=this;return t.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(t.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&t.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,y=0;y<f._sounds.length;y++)f._sounds[y]._paused&&!f._sounds[y]._ended&&(m++,p=f._sounds[y]._id);m===1?u=null:p=null}}var g=p?f._soundById(p):f._inactiveSound();if(!g)return null;if(p&&!u&&(u=g._sprite||"__default"),f._state!=="loaded"){g._sprite=u,g._ended=!1;var v=g._id;return f._queue.push({event:"play",action:function(){f.play(v)}}),v}if(p&&!g._paused)return d||f._loadQueue("play"),g._id;f._webAudio&&t._autoResume();var x=Math.max(0,g._seek>0?g._seek:f._sprite[u][0]/1e3),_=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),w=_*1e3/Math.abs(g._rate),b=f._sprite[u][0]/1e3,S=(f._sprite[u][0]+f._sprite[u][1])/1e3;g._sprite=u,g._ended=!1;var A=function(){g._paused=!1,g._seek=x,g._start=b,g._stop=S,g._loop=!!(g._loop||f._sprite[u][2])};if(x>=S){f._ended(g);return}var E=g._node;if(f._webAudio){var T=function(){f._playLock=!1,A(),f._refreshBuffer(g);var P=g._muted||f._muted?0:g._volume;E.gain.setValueAtTime(P,t.ctx.currentTime),g._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?g._loop?E.bufferSource.noteGrainOn(0,x,86400):E.bufferSource.noteGrainOn(0,x,_):g._loop?E.bufferSource.start(0,x,86400):E.bufferSource.start(0,x,_),w!==1/0&&(f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),w)),d||setTimeout(function(){f._emit("play",g._id),f._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(g._id))}else{var M=function(){E.currentTime=x,E.muted=g._muted||f._muted||t._muted||E.muted,E.volume=g._volume*t.volume(),E.playbackRate=g._rate;try{var P=E.play();if(P&&typeof Promise<"u"&&(P instanceof Promise||typeof P.then=="function")?(f._playLock=!0,A(),P.then(function(){f._playLock=!1,E._unlocked=!0,d?f._loadQueue():f._emit("play",g._id)}).catch(function(){f._playLock=!1,f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):d||(f._playLock=!1,A(),f._emit("play",g._id)),E.playbackRate=g._rate,E.paused){f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||g._loop?f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),w):(f._endTimers[g._id]=function(){f._ended(g),E.removeEventListener("ended",f._endTimers[g._id],!1)},E.addEventListener("ended",f._endTimers[g._id],!1))}catch(I){f._emit("playerror",g._id,I)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=f._src,E.load());var C=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||C)M();else{f._playLock=!0,f._state="loading";var D=function(){f._state="loaded",M(),E.removeEventListener(t._canPlayEvent,D,!1)};E.addEventListener(t._canPlayEvent,D,!1),f._clearTimer(g._id)}}return g._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var m=d._soundById(f[p]);if(m&&!m._paused&&(m._seek=d.seek(f[p]),m._rateSeek=0,m._paused=!0,d._stopFade(f[p]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var y=f._soundById(p[m]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,f._stopFade(p[m]),y._node&&(f._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&f._clearSound(y._node))),d||f._emit("stop",y._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),m=0;m<p.length;m++){var y=f._soundById(p[m]);y&&(y._muted=u,y._interval&&f._stopFade(y._id),f._webAudio&&y._node?y._node.gain.setValueAtTime(u?0:y._volume,t.ctx.currentTime):y._node&&(y._node.muted=t._muted?!0:u),f._emit("mute",y._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var g;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)g=u._soundById(p[v]),g&&(g._volume=f,d[2]||u._stopFade(p[v]),u._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(f,t.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=f*t.volume()),u._emit("volume",g._id))}else return g=p?u._soundById(p):u._sounds[0],g?g._volume:0;return u},fade:function(u,d,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),m.volume(u,p);for(var y=m._getSoundIds(p),g=0;g<y.length;g++){var v=m._soundById(y[g]);if(v){if(p||m._stopFade(y[g]),m._webAudio&&!v._muted){var x=t.ctx.currentTime,_=x+f/1e3;v._volume=u,v._node.gain.setValueAtTime(u,x),v._node.gain.linearRampToValueAtTime(d,_)}m._startFadeInterval(v,u,d,f,y[g],typeof p>"u")}}return m},_startFadeInterval:function(u,d,f,p,m,y){var g=this,v=d,x=f-d,_=Math.abs(x/.01),w=Math.max(4,_>0?p/_:p),b=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var S=(Date.now()-b)/p;b=Date.now(),v+=x*S,v=Math.round(v*100)/100,x<0?v=Math.max(f,v):v=Math.min(f,v),g._webAudio?u._volume=v:g.volume(v,u._id,!0),y&&(g._volume=v),(f<d&&v<=f||f>d&&v>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,g.volume(f,u._id),g._emit("fade",u._id))},w)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var y=u._getSoundIds(p),g=0;g<y.length;g++)m=u._soundById(y[g]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(y[g])&&(u.pause(y[g],!0),u.play(y[g],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var g;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)if(g=u._soundById(p[v]),g){u.playing(p[v])&&(g._rateSeek=u.seek(p[v]),g._playStart=u._webAudio?t.ctx.currentTime:g._playStart),g._rate=f,u._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(f,t.ctx.currentTime):g._node&&(g._node.playbackRate=f);var x=u.seek(p[v]),_=(u._sprite[g._sprite][0]+u._sprite[g._sprite][1])/1e3-x,w=_*1e3/Math.abs(g._rate);(u._endTimers[p[v]]||!g._paused)&&(u._clearTimer(p[v]),u._endTimers[p[v]]=setTimeout(u._ended.bind(u,g),w)),u._emit("rate",g._id)}}else return g=u._soundById(p),g?g._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var g=u._soundById(p);if(g)if(typeof f=="number"&&f>=0){var v=u.playing(p);v&&u.pause(p,!0),g._seek=f,g._ended=!1,u._clearTimer(p),!u._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=f);var x=function(){v&&u.play(p,!0),u._emit("seek",p)};if(v&&!u._webAudio){var _=function(){u._playLock?setTimeout(_,0):x()};setTimeout(_,0)}else x()}else if(u._webAudio){var w=u.playing(p)?t.ctx.currentTime-g._playStart:0,b=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(b+w*Math.abs(g._rate))}else return g._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(t._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),t._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=t._howls.indexOf(u);p>=0&&t._howls.splice(p,1);var m=!0;for(f=0;f<t._howls.length;f++)if(t._howls[f]._src===u._src||u._src.indexOf(t._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],t.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var m=this,y=m["_on"+u];return typeof d=="function"&&y.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),m},off:function(u,d,f){var p=this,m=p["_on"+u],y=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(y=0;y<m.length;y++){var g=f===m[y].id;if(d===m[y].fn&&g||!d&&g){m.splice(y,1);break}}else if(u)p["_on"+u]=[];else{var v=Object.keys(p);for(y=0;y<v.length;y++)v[y].indexOf("_on")===0&&Array.isArray(p[v[y]])&&(p[v[y]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,m=p["_on"+u],y=m.length-1;y>=0;y--)(!m[y].id||m[y].id===d||u==="load")&&(setTimeout(function(g){g.call(this,d,f)}.bind(p,m[y].fn),0),m[y].once&&p.off(u,m[y].fn,m[y].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=t.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),t._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new r(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=t.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,t.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=t._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=t._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),u._node.gain.setValueAtTime(f,t.ctx.currentTime),u._node.paused=!0,u._node.connect(t.masterGain)):t.noAudio||(u._node=t._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(t._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*t.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(t._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var y=new XMLHttpRequest;y.open(u._xhr.method,d,!0),y.withCredentials=u._xhr.withCredentials,y.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(g){y.setRequestHeader(g,u._xhr.headers[g])}),y.onload=function(){var g=(y.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}l(y.response,u)},y.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(y)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&d._sounds.length>0?(s[d._src]=m,c(d,m)):f()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(u).then(p).catch(f):t.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!p&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),typeof i<"u"&&(i.Howler=t,i.Howl=n),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,r=typeof r!="number"?s._pos[2]:r,typeof t=="number")s._pos=[t,n,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(n=typeof n!="number"?c[1]:n,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof t=="number")l._orientation=[t,n,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,n,r,s,o,a);else return c;return l},Howl.prototype.init=function(t){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,s)}}),o;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof t=="number")o._pos=[t,n,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof t=="number")c._pos=[t,n,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(t,n,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof t=="number")c._orientation=[t,n,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(t,n,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,r,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(r=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,t.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}),HY="149",e3=0,WY=1,A8e=2,sF=1,T8e=100,M8e=204,E8e=205,C8e=3,D8e=0,$Y=300,qY=301,P8e=302,L8e=306,oF=1e3,Rp=1001,aF=1002,I6=1003,kA=1006,I8e=1008,O8e=1009,R8e=1023,O6=3e3,XY=3001,Pl="srgb",BA="srgb-linear",ub=7680,N8e=519,UA=35044,cf=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let n=this._listeners[e];if(n!==void 0){let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let n=t.slice(0);for(let r=0,s=n.length;r<s;r++)n[r].call(this,e);e.target=null}}},Er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],lF=1234567,J2=Math.PI/180,t3=180/Math.PI;function F0(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Er[i&255]+Er[i>>8&255]+Er[i>>16&255]+Er[i>>24&255]+"-"+Er[e&255]+Er[e>>8&255]+"-"+Er[e>>16&15|64]+Er[e>>24&255]+"-"+Er[t&63|128]+Er[t>>8&255]+"-"+Er[t>>16&255]+Er[t>>24&255]+Er[n&255]+Er[n>>8&255]+Er[n>>16&255]+Er[n>>24&255]).toLowerCase()}function ar(i,e,t){return Math.max(e,Math.min(t,i))}function dD(i,e){return(i%e+e)%e}function F8e(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function z8e(i,e,t){return i!==e?(t-i)/(e-i):0}function ev(i,e,t){return(1-t)*i+t*e}function k8e(i,e,t,n){return ev(i,e,1-Math.exp(-t*n))}function B8e(i,e=1){return e-Math.abs(dD(i,e*2)-e)}function U8e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function V8e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function G8e(i,e){return i+Math.floor(Math.random()*(e-i+1))}function j8e(i,e){return i+Math.random()*(e-i)}function H8e(i){return i*(.5-Math.random())}function W8e(i){i!==void 0&&(lF=i);let e=lF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $8e(i){return i*J2}function q8e(i){return i*t3}function X8e(i){return(i&i-1)===0&&i!==0}function Y8e(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Z8e(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Q8e(i,e,t,n,r){let s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),h=o((e+n)/2),u=s((e-n)/2),d=o((e-n)/2),f=s((n-e)/2),p=o((n-e)/2);switch(r){case"XYX":i.set(a*h,l*u,l*d,a*c);break;case"YZY":i.set(l*d,a*h,l*u,a*c);break;case"ZXZ":i.set(l*u,l*d,a*h,a*c);break;case"XZX":i.set(a*h,l*p,l*f,a*c);break;case"YXY":i.set(l*f,a*h,l*p,a*c);break;case"ZYZ":i.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function zl(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function _i(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var Ht=Object.freeze({__proto__:null,DEG2RAD:J2,RAD2DEG:t3,ceilPowerOfTwo:Y8e,clamp:ar,damp:k8e,degToRad:$8e,denormalize:zl,euclideanModulo:dD,floorPowerOfTwo:Z8e,generateUUID:F0,inverseLerp:z8e,isPowerOfTwo:X8e,lerp:ev,mapLinear:F8e,normalize:_i,pingpong:B8e,radToDeg:q8e,randFloat:j8e,randFloatSpread:H8e,randInt:G8e,seededRandom:W8e,setQuaternionFromProperEuler:Q8e,smootherstep:V8e,smoothstep:U8e}),fe=class{constructor(i=0,e=0){fe.prototype.isVector2=!0,this.x=i,this.y=e}get width(){return this.x}set width(i){this.x=i}get height(){return this.y}set height(i){this.y=i}set(i,e){return this.x=i,this.y=e,this}setScalar(i){return this.x=i,this.y=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setComponent(i,e){switch(i){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y)}copy(i){return this.x=i.x,this.y=i.y,this}add(i){return this.x+=i.x,this.y+=i.y,this}addScalar(i){return this.x+=i,this.y+=i,this}addVectors(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this}addScaledVector(i,e){return this.x+=i.x*e,this.y+=i.y*e,this}sub(i){return this.x-=i.x,this.y-=i.y,this}subScalar(i){return this.x-=i,this.y-=i,this}subVectors(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this}multiply(i){return this.x*=i.x,this.y*=i.y,this}multiplyScalar(i){return this.x*=i,this.y*=i,this}divide(i){return this.x/=i.x,this.y/=i.y,this}divideScalar(i){return this.multiplyScalar(1/i)}applyMatrix3(i){let e=this.x,t=this.y,n=i.elements;return this.x=n[0]*e+n[3]*t+n[6],this.y=n[1]*e+n[4]*t+n[7],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this}clamp(i,e){return this.x=Math.max(i.x,Math.min(e.x,this.x)),this.y=Math.max(i.y,Math.min(e.y,this.y)),this}clampScalar(i,e){return this.x=Math.max(i,Math.min(e,this.x)),this.y=Math.max(i,Math.min(e,this.y)),this}clampLength(i,e){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(i,Math.min(e,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){let e=this.x-i.x,t=this.y-i.y;return e*e+t*t}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,e){return this.x+=(i.x-this.x)*e,this.y+=(i.y-this.y)*e,this}lerpVectors(i,e,t){return this.x=i.x+(e.x-i.x)*t,this.y=i.y+(e.y-i.y)*t,this}equals(i){return i.x===this.x&&i.y===this.y}fromArray(i,e=0){return this.x=i[e],this.y=i[e+1],this}toArray(i=[],e=0){return i[e]=this.x,i[e+1]=this.y,i}fromBufferAttribute(i,e){return this.x=i.getX(e),this.y=i.getY(e),this}rotateAround(i,e){let t=Math.cos(e),n=Math.sin(e),r=this.x-i.x,s=this.y-i.y;return this.x=r*t-s*n+i.x,this.y=r*n+s*t+i.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},as=class{constructor(){as.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){let h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],h=n[4],u=n[7],d=n[2],f=n[5],p=n[8],m=r[0],y=r[3],g=r[6],v=r[1],x=r[4],_=r[7],w=r[2],b=r[5],S=r[8];return s[0]=o*m+a*v+l*w,s[3]=o*y+a*x+l*b,s[6]=o*g+a*_+l*S,s[1]=c*m+h*v+u*w,s[4]=c*y+h*x+u*b,s[7]=c*g+h*_+u*S,s[2]=d*m+f*v+p*w,s[5]=d*y+f*x+p*b,s[8]=d*g+f*_+p*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-n*s*h+n*a*l+r*s*c-r*o*l}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=a*l-h*s,f=c*s-o*l,p=t*u+n*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/p;return e[0]=u*m,e[1]=(r*c-h*n)*m,e[2]=(a*n-r*o)*m,e[3]=d*m,e[4]=(h*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(n*l-c*t)*m,e[8]=(o*t-n*s)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){let l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(hb.makeScale(e,t)),this}rotate(e){return this.premultiply(hb.makeRotation(-e)),this}translate(e,t){return this.premultiply(hb.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},hb=new as;function K8e(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}var J8e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function A9(i,e){return new J8e[i](e)}function cF(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Ad(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function x5(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var db={[Pl]:{[BA]:Ad},[BA]:{[Pl]:x5}},qr={legacyMode:!0,get workingColorSpace(){return BA},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.legacyMode||e===t||!e||!t)return i;if(db[e]&&db[e][t]!==void 0){let n=db[e][t];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}},YY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$n={r:0,g:0,b:0},oa={h:0,s:0,l:0},T9={h:0,s:0,l:0};function fb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}function M9(i,e){return e.r=i.r,e.g=i.g,e.b=i.b,e}var St=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=qr.workingColorSpace){return this.r=e,this.g=t,this.b=n,qr.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=qr.workingColorSpace){if(e=dD(e,1),t=ar(t,0,1),n=ar(n,0,1),t===0)this.r=this.g=this.b=n;else{let s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=fb(o,s,e+1/3),this.g=fb(o,s,e),this.b=fb(o,s,e-1/3)}return qr.toWorkingColorSpace(this,r),this}setStyle(e,t=Pl){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,qr.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,qr.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return n(s[4]),this.setHSL(l,c,h,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,qr.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,qr.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Pl){let n=YY[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ad(e.r),this.g=Ad(e.g),this.b=Ad(e.b),this}copyLinearToSRGB(e){return this.r=x5(e.r),this.g=x5(e.g),this.b=x5(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pl){return qr.fromWorkingColorSpace(M9(this,$n),e),ar($n.r*255,0,255)<<16^ar($n.g*255,0,255)<<8^ar($n.b*255,0,255)<<0}getHexString(e=Pl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qr.workingColorSpace){qr.fromWorkingColorSpace(M9(this,$n),t);let n=$n.r,r=$n.g,s=$n.b,o=Math.max(n,r,s),a=Math.min(n,r,s),l,c,h=(a+o)/2;if(a===o)l=0,c=0;else{let u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case n:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-n)/u+2;break;case s:l=(n-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=qr.workingColorSpace){return qr.fromWorkingColorSpace(M9(this,$n),t),e.r=$n.r,e.g=$n.g,e.b=$n.b,e}getStyle(e=Pl){return qr.fromWorkingColorSpace(M9(this,$n),e),e!==Pl?`color(${e} ${$n.r} ${$n.g} ${$n.b})`:`rgb(${$n.r*255|0},${$n.g*255|0},${$n.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(oa),oa.h+=e,oa.s+=t,oa.l+=n,this.setHSL(oa.h,oa.s,oa.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(oa),e.getHSL(T9);let n=ev(oa.h,T9.h,t),r=ev(oa.s,T9.s,t),s=ev(oa.l,T9.l,t);return this.setHSL(n,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};St.NAMES=YY;var Wf,exe=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Wf===void 0&&(Wf=cF("canvas")),Wf.width=e.width,Wf.height=e.height;let n=Wf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Wf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=cF("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ad(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ad(t[n]/255)*255):t[n]=Ad(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},txe=class{constructor(e=null){this.isSource=!0,this.uuid=F0(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(pb(r[o].image)):s.push(pb(r[o]))}else s=pb(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function pb(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?exe.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var ixe=0,Ps=class extends cf{constructor(e=Ps.DEFAULT_IMAGE,t=Ps.DEFAULT_MAPPING,n=Rp,r=Rp,s=kA,o=I8e,a=R8e,l=O8e,c=Ps.DEFAULT_ANISOTROPY,h=O6){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ixe++}),this.uuid=F0(),this.name="",this.source=new txe(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new fe(0,0),this.repeat=new fe(1,1),this.center=new fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new as,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$Y)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oF:e.x=e.x-Math.floor(e.x);break;case Rp:e.x=e.x<0?0:1;break;case aF:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case oF:e.y=e.y-Math.floor(e.y);break;case Rp:e.y=e.y<0?0:1;break;case aF:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Ps.DEFAULT_IMAGE=null;Ps.DEFAULT_MAPPING=$Y;Ps.DEFAULT_ANISOTROPY=1;var tn=class{constructor(e=0,t=0,n=0,r=1){tn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s,o=e.elements,a=o[0],l=o[4],c=o[8],h=o[1],u=o[5],d=o[9],f=o[2],p=o[6],m=o[10];if(Math.abs(l-h)<.01&&Math.abs(c-f)<.01&&Math.abs(d-p)<.01){if(Math.abs(l+h)<.1&&Math.abs(c+f)<.1&&Math.abs(d+p)<.1&&Math.abs(a+u+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(a+1)/2,v=(u+1)/2,x=(m+1)/2,_=(l+h)/4,w=(c+f)/4,b=(d+p)/4;return g>v&&g>x?g<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(g),r=_/n,s=w/n):v>x?v<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),n=_/r,s=b/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=w/s,r=b/s),this.set(n,r,s,t),this}let y=Math.sqrt((p-d)*(p-d)+(c-f)*(c-f)+(h-l)*(h-l));return Math.abs(y)<.001&&(y=1),this.x=(p-d)/y,this.y=(c-f)/y,this.z=(h-l)/y,this.w=Math.acos((a+u+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},nxe=class extends Ps{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=I6,this.minFilter=I6,this.wrapR=Rp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},rxe=class extends Ps{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=I6,this.minFilter=I6,this.wrapR=Rp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Ni=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],h=n[r+2],u=n[r+3],d=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(u!==m||l!==d||c!==f||h!==p){let y=1-a,g=l*d+c*f+h*p+u*m,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){let w=Math.sqrt(x),b=Math.atan2(w,g*v);y=Math.sin(y*b)/w,a=Math.sin(a*b)/w}let _=a*v;if(l=l*y+d*_,c=c*y+f*_,h=h*y+p*_,u=u*y+m*_,y===1-a){let w=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=w,c*=w,h*=w,u*=w}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,s,o){let a=n[r],l=n[r+1],c=n[r+2],h=n[r+3],u=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+h*u+l*f-c*d,e[t+1]=l*p+h*d+c*u-a*f,e[t+2]=c*p+h*f+a*d-l*u,e[t+3]=h*p-a*u-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),h=a(r/2),u=a(s/2),d=l(n/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"YXZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"ZXY":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"ZYX":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"YZX":this._x=d*h*u+c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u-d*f*p;break;case"XZY":this._x=d*h*u-c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],u=t[10],d=n+a+u;if(d>0){let f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){let f=2*Math.sqrt(1+n-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){let f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{let f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ar(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=n*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-n*c,this._z=s*h+o*c+n*l-r*a,this._w=o*h-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,r=this._y,s=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}let c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-t)*h)/c,d=Math.sin(t*h)/c;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},O=class{constructor(i=0,e=0,t=0){O.prototype.isVector3=!0,this.x=i,this.y=e,this.z=t}set(i,e,t){return t===void 0&&(t=this.z),this.x=i,this.y=e,this.z=t,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setComponent(i,e){switch(i){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this}addVectors(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this.z=i.z+e.z,this}addScaledVector(i,e){return this.x+=i.x*e,this.y+=i.y*e,this.z+=i.z*e,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this}subVectors(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this.z=i.z-e.z,this}multiply(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z,this}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this}multiplyVectors(i,e){return this.x=i.x*e.x,this.y=i.y*e.y,this.z=i.z*e.z,this}applyEuler(i){return this.applyQuaternion(uF.setFromEuler(i))}applyAxisAngle(i,e){return this.applyQuaternion(uF.setFromAxisAngle(i,e))}applyMatrix3(i){let e=this.x,t=this.y,n=this.z,r=i.elements;return this.x=r[0]*e+r[3]*t+r[6]*n,this.y=r[1]*e+r[4]*t+r[7]*n,this.z=r[2]*e+r[5]*t+r[8]*n,this}applyNormalMatrix(i){return this.applyMatrix3(i).normalize()}applyMatrix4(i){let e=this.x,t=this.y,n=this.z,r=i.elements,s=1/(r[3]*e+r[7]*t+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*t+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*t+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*t+r[10]*n+r[14])*s,this}applyQuaternion(i){let e=this.x,t=this.y,n=this.z,r=i.x,s=i.y,o=i.z,a=i.w,l=a*e+s*n-o*t,c=a*t+o*e-r*n,h=a*n+r*t-s*e,u=-r*e-s*t-o*n;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this}project(i){return this.applyMatrix4(i.matrixWorldInverse).applyMatrix4(i.projectionMatrix)}unproject(i){return this.applyMatrix4(i.projectionMatrixInverse).applyMatrix4(i.matrixWorld)}transformDirection(i){let e=this.x,t=this.y,n=this.z,r=i.elements;return this.x=r[0]*e+r[4]*t+r[8]*n,this.y=r[1]*e+r[5]*t+r[9]*n,this.z=r[2]*e+r[6]*t+r[10]*n,this.normalize()}divide(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z,this}divideScalar(i){return this.multiplyScalar(1/i)}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this}clamp(i,e){return this.x=Math.max(i.x,Math.min(e.x,this.x)),this.y=Math.max(i.y,Math.min(e.y,this.y)),this.z=Math.max(i.z,Math.min(e.z,this.z)),this}clampScalar(i,e){return this.x=Math.max(i,Math.min(e,this.x)),this.y=Math.max(i,Math.min(e,this.y)),this.z=Math.max(i,Math.min(e,this.z)),this}clampLength(i,e){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(i,Math.min(e,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,e){return this.x+=(i.x-this.x)*e,this.y+=(i.y-this.y)*e,this.z+=(i.z-this.z)*e,this}lerpVectors(i,e,t){return this.x=i.x+(e.x-i.x)*t,this.y=i.y+(e.y-i.y)*t,this.z=i.z+(e.z-i.z)*t,this}cross(i){return this.crossVectors(this,i)}crossVectors(i,e){let t=i.x,n=i.y,r=i.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-r*o,this.y=r*s-t*a,this.z=t*o-n*s,this}projectOnVector(i){let e=i.lengthSq();if(e===0)return this.set(0,0,0);let t=i.dot(this)/e;return this.copy(i).multiplyScalar(t)}projectOnPlane(i){return mb.copy(this).projectOnVector(i),this.sub(mb)}reflect(i){return this.sub(mb.copy(i).multiplyScalar(2*this.dot(i)))}angleTo(i){let e=Math.sqrt(this.lengthSq()*i.lengthSq());if(e===0)return Math.PI/2;let t=this.dot(i)/e;return Math.acos(ar(t,-1,1))}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){let e=this.x-i.x,t=this.y-i.y,n=this.z-i.z;return e*e+t*t+n*n}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)+Math.abs(this.z-i.z)}setFromSpherical(i){return this.setFromSphericalCoords(i.radius,i.phi,i.theta)}setFromSphericalCoords(i,e,t){let n=Math.sin(e)*i;return this.x=n*Math.sin(t),this.y=Math.cos(e)*i,this.z=n*Math.cos(t),this}setFromCylindrical(i){return this.setFromCylindricalCoords(i.radius,i.theta,i.y)}setFromCylindricalCoords(i,e,t){return this.x=i*Math.sin(e),this.y=t,this.z=i*Math.cos(e),this}setFromMatrixPosition(i){let e=i.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(i){let e=this.setFromMatrixColumn(i,0).length(),t=this.setFromMatrixColumn(i,1).length(),n=this.setFromMatrixColumn(i,2).length();return this.x=e,this.y=t,this.z=n,this}setFromMatrixColumn(i,e){return this.fromArray(i.elements,e*4)}setFromMatrix3Column(i,e){return this.fromArray(i.elements,e*3)}setFromEuler(i){return this.x=i._x,this.y=i._y,this.z=i._z,this}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z}fromArray(i,e=0){return this.x=i[e],this.y=i[e+1],this.z=i[e+2],this}toArray(i=[],e=0){return i[e]=this.x,i[e+1]=this.y,i[e+2]=this.z,i}fromBufferAttribute(i,e){return this.x=i.getX(e),this.y=i.getY(e),this.z=i.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let i=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,t=Math.sqrt(1-i**2);return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this.z=i,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},mb=new O,uF=new Ni,Wn=class{constructor(i=new O(1/0,1/0,1/0),e=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=i,this.max=e}set(i,e){return this.min.copy(i),this.max.copy(e),this}setFromArray(i){let e=1/0,t=1/0,n=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=i.length;a<l;a+=3){let c=i[a],h=i[a+1],u=i[a+2];c<e&&(e=c),h<t&&(t=h),u<n&&(n=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,t,n),this.max.set(r,s,o),this}setFromBufferAttribute(i){let e=1/0,t=1/0,n=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=i.count;a<l;a++){let c=i.getX(a),h=i.getY(a),u=i.getZ(a);c<e&&(e=c),h<t&&(t=h),u<n&&(n=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,t,n),this.max.set(r,s,o),this}setFromPoints(i){this.makeEmpty();for(let e=0,t=i.length;e<t;e++)this.expandByPoint(i[e]);return this}setFromCenterAndSize(i,e){let t=Mh.copy(e).multiplyScalar(.5);return this.min.copy(i).sub(t),this.max.copy(i).add(t),this}setFromObject(i,e=!1){return this.makeEmpty(),this.expandByObject(i,e)}clone(){return new this.constructor().copy(this)}copy(i){return this.min.copy(i.min),this.max.copy(i.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(i){return this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(i){return this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)}expandByPoint(i){return this.min.min(i),this.max.max(i),this}expandByVector(i){return this.min.sub(i),this.max.add(i),this}expandByScalar(i){return this.min.addScalar(-i),this.max.addScalar(i),this}expandByObject(i,e=!1){i.updateWorldMatrix(!1,!1);let t=i.geometry;if(t!==void 0)if(e&&t.attributes!=null&&t.attributes.position!==void 0){let r=t.attributes.position;for(let s=0,o=r.count;s<o;s++)Mh.fromBufferAttribute(r,s).applyMatrix4(i.matrixWorld),this.expandByPoint(Mh)}else t.boundingBox===null&&t.computeBoundingBox(),gb.copy(t.boundingBox),gb.applyMatrix4(i.matrixWorld),this.union(gb);let n=i.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],e);return this}containsPoint(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y||i.z<this.min.z||i.z>this.max.z)}containsBox(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y&&this.min.z<=i.min.z&&i.max.z<=this.max.z}getParameter(i,e){return e.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y||i.max.z<this.min.z||i.min.z>this.max.z)}intersectsSphere(i){return this.clampPoint(i.center,Mh),Mh.distanceToSquared(i.center)<=i.radius*i.radius}intersectsPlane(i){let e,t;return i.normal.x>0?(e=i.normal.x*this.min.x,t=i.normal.x*this.max.x):(e=i.normal.x*this.max.x,t=i.normal.x*this.min.x),i.normal.y>0?(e+=i.normal.y*this.min.y,t+=i.normal.y*this.max.y):(e+=i.normal.y*this.max.y,t+=i.normal.y*this.min.y),i.normal.z>0?(e+=i.normal.z*this.min.z,t+=i.normal.z*this.max.z):(e+=i.normal.z*this.max.z,t+=i.normal.z*this.min.z),e<=-i.constant&&t>=-i.constant}intersectsTriangle(i){if(this.isEmpty())return!1;this.getCenter(bg),E9.subVectors(this.max,bg),$f.subVectors(i.a,bg),qf.subVectors(i.b,bg),Xf.subVectors(i.c,bg),Dc.subVectors(qf,$f),Pc.subVectors(Xf,qf),Eh.subVectors($f,Xf);let e=[0,-Dc.z,Dc.y,0,-Pc.z,Pc.y,0,-Eh.z,Eh.y,Dc.z,0,-Dc.x,Pc.z,0,-Pc.x,Eh.z,0,-Eh.x,-Dc.y,Dc.x,0,-Pc.y,Pc.x,0,-Eh.y,Eh.x,0];return!vb(e,$f,qf,Xf,E9)||(e=[1,0,0,0,1,0,0,0,1],!vb(e,$f,qf,Xf,E9))?!1:(C9.crossVectors(Dc,Pc),e=[C9.x,C9.y,C9.z],vb(e,$f,qf,Xf,E9))}clampPoint(i,e){return e.copy(i).clamp(this.min,this.max)}distanceToPoint(i){return Mh.copy(i).clamp(this.min,this.max).sub(i).length()}getBoundingSphere(i){return this.getCenter(i.center),i.radius=this.getSize(Mh).length()*.5,i}intersect(i){return this.min.max(i.min),this.max.min(i.max),this.isEmpty()&&this.makeEmpty(),this}union(i){return this.min.min(i.min),this.max.max(i.max),this}applyMatrix4(i){return this.isEmpty()?this:(pl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i),pl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i),pl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i),pl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i),pl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i),pl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i),pl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i),pl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i),this.setFromPoints(pl),this)}translate(i){return this.min.add(i),this.max.add(i),this}equals(i){return i.min.equals(this.min)&&i.max.equals(this.max)}},pl=[new O,new O,new O,new O,new O,new O,new O,new O],Mh=new O,gb=new Wn,$f=new O,qf=new O,Xf=new O,Dc=new O,Pc=new O,Eh=new O,bg=new O,E9=new O,C9=new O,Ch=new O;function vb(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Ch.fromArray(i,s);let a=r.x*Math.abs(Ch.x)+r.y*Math.abs(Ch.y)+r.z*Math.abs(Ch.z),l=e.dot(Ch),c=t.dot(Ch),h=n.dot(Ch);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}var sxe=new Wn,wg=new O,yb=new O,Qo=class{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):sxe.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wg.subVectors(e,this.center);let t=wg.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(wg,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wg.copy(e.center).add(yb)),this.expandByPoint(wg.copy(e.center).sub(yb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ml=new O,xb=new O,D9=new O,Lc=new O,_b=new O,P9=new O,bb=new O,Em=class{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ml)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ml.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ml.copy(this.direction).multiplyScalar(t).add(this.origin),ml.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){xb.copy(e).add(t).multiplyScalar(.5),D9.copy(t).sub(e).normalize(),Lc.copy(this.origin).sub(xb);let s=e.distanceTo(t)*.5,o=-this.direction.dot(D9),a=Lc.dot(this.direction),l=-Lc.dot(D9),c=Lc.lengthSq(),h=Math.abs(1-o*o),u,d,f,p;if(h>0)if(u=o*l-a,d=o*a-l,p=s*h,u>=0)if(d>=-p)if(d<=p){let m=1/h;u*=m,d*=m,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-p?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=p?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(D9).multiplyScalar(d).add(xb),f}intersectSphere(e,t){ml.subVectors(e.center,this.origin);let n=ml.dot(this.direction),r=ml.dot(ml)-n*n,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l,c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,ml)!==null}intersectTriangle(e,t,n,r,s){_b.subVectors(t,e),P9.subVectors(n,e),bb.crossVectors(_b,P9);let o=this.direction.dot(bb),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Lc.subVectors(this.origin,e);let l=a*this.direction.dot(P9.crossVectors(Lc,P9));if(l<0)return null;let c=a*this.direction.dot(_b.cross(Lc));if(c<0||l+c>o)return null;let h=-a*Lc.dot(bb);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Fe=class{constructor(){Fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,h,u,d,f,p,m,y){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=u,g[14]=d,g[3]=f,g[7]=p,g[11]=m,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/Yf.setFromMatrixColumn(e,0).length(),s=1/Yf.setFromMatrixColumn(e,1).length(),o=1/Yf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){let d=o*h,f=o*u,p=a*h,m=a*u;t[0]=l*h,t[4]=-l*u,t[8]=c,t[1]=f+p*c,t[5]=d-m*c,t[9]=-a*l,t[2]=m-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){let d=l*h,f=l*u,p=c*h,m=c*u;t[0]=d+m*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*u,t[5]=o*h,t[9]=-a,t[2]=f*a-p,t[6]=m+d*a,t[10]=o*l}else if(e.order==="ZXY"){let d=l*h,f=l*u,p=c*h,m=c*u;t[0]=d-m*a,t[4]=-o*u,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*h,t[9]=m-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){let d=o*h,f=o*u,p=a*h,m=a*u;t[0]=l*h,t[4]=p*c-f,t[8]=d*c+m,t[1]=l*u,t[5]=m*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){let d=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*h,t[4]=m-d*u,t[8]=p*u+f,t[1]=u,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=f*u+p,t[10]=d-m*u}else if(e.order==="XZY"){let d=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*h,t[4]=-u,t[8]=c*h,t[1]=d*u+m,t[5]=o*h,t[9]=f*u-p,t[2]=p*u-f,t[6]=a*h,t[10]=m*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oxe,e,axe)}lookAt(e,t,n){let r=this.elements;return Gs.subVectors(e,t),Gs.lengthSq()===0&&(Gs.z=1),Gs.normalize(),Ic.crossVectors(n,Gs),Ic.lengthSq()===0&&(Math.abs(n.z)===1?Gs.x+=1e-4:Gs.z+=1e-4,Gs.normalize(),Ic.crossVectors(n,Gs)),Ic.normalize(),L9.crossVectors(Gs,Ic),r[0]=Ic.x,r[4]=L9.x,r[8]=Gs.x,r[1]=Ic.y,r[5]=L9.y,r[9]=Gs.y,r[2]=Ic.z,r[6]=L9.z,r[10]=Gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],h=n[1],u=n[5],d=n[9],f=n[13],p=n[2],m=n[6],y=n[10],g=n[14],v=n[3],x=n[7],_=n[11],w=n[15],b=r[0],S=r[4],A=r[8],E=r[12],T=r[1],M=r[5],C=r[9],D=r[13],P=r[2],I=r[6],k=r[10],G=r[14],U=r[3],Z=r[7],$=r[11],W=r[15];return s[0]=o*b+a*T+l*P+c*U,s[4]=o*S+a*M+l*I+c*Z,s[8]=o*A+a*C+l*k+c*$,s[12]=o*E+a*D+l*G+c*W,s[1]=h*b+u*T+d*P+f*U,s[5]=h*S+u*M+d*I+f*Z,s[9]=h*A+u*C+d*k+f*$,s[13]=h*E+u*D+d*G+f*W,s[2]=p*b+m*T+y*P+g*U,s[6]=p*S+m*M+y*I+g*Z,s[10]=p*A+m*C+y*k+g*$,s[14]=p*E+m*D+y*G+g*W,s[3]=v*b+x*T+_*P+w*U,s[7]=v*S+x*M+_*I+w*Z,s[11]=v*A+x*C+_*k+w*$,s[15]=v*E+x*D+_*G+w*W,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],p=e[3],m=e[7],y=e[11],g=e[15];return p*(+s*l*u-r*c*u-s*a*d+n*c*d+r*a*f-n*l*f)+m*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+y*(+t*c*u-t*a*f-s*o*u+n*o*f+s*a*h-n*c*h)+g*(-r*a*h-t*l*u+t*a*d+r*o*u-n*o*d+n*l*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],y=e[14],g=e[15],v=u*y*c-m*d*c+m*l*f-a*y*f-u*l*g+a*d*g,x=p*d*c-h*y*c-p*l*f+o*y*f+h*l*g-o*d*g,_=h*m*c-p*u*c+p*a*f-o*m*f-h*a*g+o*u*g,w=p*u*l-h*m*l-p*a*d+o*m*d+h*a*y-o*u*y,b=t*v+n*x+r*_+s*w;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/b;return e[0]=v*S,e[1]=(m*d*s-u*y*s-m*r*f+n*y*f+u*r*g-n*d*g)*S,e[2]=(a*y*s-m*l*s+m*r*c-n*y*c-a*r*g+n*l*g)*S,e[3]=(u*l*s-a*d*s-u*r*c+n*d*c+a*r*f-n*l*f)*S,e[4]=x*S,e[5]=(h*y*s-p*d*s+p*r*f-t*y*f-h*r*g+t*d*g)*S,e[6]=(p*l*s-o*y*s-p*r*c+t*y*c+o*r*g-t*l*g)*S,e[7]=(o*d*s-h*l*s+h*r*c-t*d*c-o*r*f+t*l*f)*S,e[8]=_*S,e[9]=(p*u*s-h*m*s-p*n*f+t*m*f+h*n*g-t*u*g)*S,e[10]=(o*m*s-p*a*s+p*n*c-t*m*c-o*n*g+t*a*g)*S,e[11]=(h*a*s-o*u*s-h*n*c+t*u*c+o*n*f-t*a*f)*S,e[12]=w*S,e[13]=(h*m*r-p*u*r+p*n*d-t*m*d-h*n*y+t*u*y)*S,e[14]=(p*a*r-o*m*r-p*n*l+t*m*l+o*n*y-t*a*y)*S,e[15]=(o*u*r-h*a*r+h*n*l-t*u*l-o*n*d+t*a*d)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+n,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,m=o*h,y=o*u,g=a*u,v=l*c,x=l*h,_=l*u,w=n.x,b=n.y,S=n.z;return r[0]=(1-(m+g))*w,r[1]=(f+_)*w,r[2]=(p-x)*w,r[3]=0,r[4]=(f-_)*b,r[5]=(1-(d+g))*b,r[6]=(y+v)*b,r[7]=0,r[8]=(p+x)*S,r[9]=(y-v)*S,r[10]=(1-(d+m))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,s=Yf.set(r[0],r[1],r[2]).length(),o=Yf.set(r[4],r[5],r[6]).length(),a=Yf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],aa.copy(this);let l=1/s,c=1/o,h=1/a;return aa.elements[0]*=l,aa.elements[1]*=l,aa.elements[2]*=l,aa.elements[4]*=c,aa.elements[5]*=c,aa.elements[6]*=c,aa.elements[8]*=h,aa.elements[9]*=h,aa.elements[10]*=h,t.setFromRotationMatrix(aa),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){let a=this.elements,l=2*s/(t-e),c=2*s/(n-r),h=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){let a=this.elements,l=1/(t-e),c=1/(n-r),h=1/(o-s),u=(t+e)*l,d=(n+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Yf=new O,aa=new Fe,oxe=new O(0,0,0),axe=new O(1,1,1),Ic=new O,L9=new O,Gs=new O,hF=new Fe,dF=new Ni,xs=class{constructor(e=0,t=0,n=0,r=xs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(ar(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ar(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(ar(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ar(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ar(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-ar(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return hF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hF,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return dF.setFromEuler(this),this.setFromQuaternion(dF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};xs.DEFAULT_ORDER="XYZ";var ZY=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},lxe=0,fF=new O,Zf=new Ni,gl=new Fe,I9=new O,Sg=new O,cxe=new O,uxe=new Ni,pF=new O(1,0,0),mF=new O(0,1,0),gF=new O(0,0,1),hxe={type:"added"},vF={type:"removed"},Pi=class extends cf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lxe++}),this.uuid=F0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pi.DEFAULT_UP.clone();let e=new O,t=new xs,n=new Ni,r=new O(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Fe},normalMatrix:{value:new as}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=Pi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Pi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ZY,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zf.setFromAxisAngle(e,t),this.quaternion.multiply(Zf),this}rotateOnWorldAxis(e,t){return Zf.setFromAxisAngle(e,t),this.quaternion.premultiply(Zf),this}rotateX(e){return this.rotateOnAxis(pF,e)}rotateY(e){return this.rotateOnAxis(mF,e)}rotateZ(e){return this.rotateOnAxis(gF,e)}translateOnAxis(e,t){return fF.copy(e).applyQuaternion(this.quaternion),this.position.add(fF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(pF,e)}translateY(e){return this.translateOnAxis(mF,e)}translateZ(e){return this.translateOnAxis(gF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(gl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?I9.copy(e):I9.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),Sg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gl.lookAt(Sg,I9,this.up):gl.lookAt(I9,Sg,this.up),this.quaternion.setFromRotationMatrix(gl),r&&(gl.extractRotation(r.matrixWorld),Zf.setFromRotationMatrix(gl),this.quaternion.premultiply(Zf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(hxe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vF)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(vF)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),gl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),gl.multiply(e.parent.matrixWorld)),e.applyMatrix4(gl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,s=this.children.length;r<s;r++){let o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,e,cxe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,uxe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++){let s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let s=0,o=r.length;s<o;s++){let a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){let u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){let l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){let a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),u=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),h.length>0&&(n.images=h),u.length>0&&(n.shapes=u),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),p.length>0&&(n.nodes=p)}return n.object=r,n;function o(a){let l=[];for(let c in a){let h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){let r=e.children[n];this.add(r.clone())}return this}};Pi.DEFAULT_UP=new O(0,1,0);Pi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Pi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var la=new O,vl=new O,wb=new O,yl=new O,Qf=new O,Kf=new O,yF=new O,Sb=new O,Ab=new O,Tb=new O,_s=class{constructor(e=new O,t=new O,n=new O){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),la.subVectors(e,t),r.cross(la);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){la.subVectors(r,t),vl.subVectors(n,t),wb.subVectors(e,t);let o=la.dot(la),a=la.dot(vl),l=la.dot(wb),c=vl.dot(vl),h=vl.dot(wb),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);let d=1/u,f=(c*l-a*h)*d,p=(o*h-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,yl),yl.x>=0&&yl.y>=0&&yl.x+yl.y<=1}static getUV(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,yl),l.set(0,0),l.addScaledVector(s,yl.x),l.addScaledVector(o,yl.y),l.addScaledVector(a,yl.z),l}static isFrontFacing(e,t,n,r){return la.subVectors(n,t),vl.subVectors(e,t),la.cross(vl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return la.subVectors(this.c,this.b),vl.subVectors(this.a,this.b),la.cross(vl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _s.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _s.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return _s.getUV(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return _s.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _s.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,r=this.b,s=this.c,o,a;Qf.subVectors(r,n),Kf.subVectors(s,n),Sb.subVectors(e,n);let l=Qf.dot(Sb),c=Kf.dot(Sb);if(l<=0&&c<=0)return t.copy(n);Ab.subVectors(e,r);let h=Qf.dot(Ab),u=Kf.dot(Ab);if(h>=0&&u<=h)return t.copy(r);let d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(n).addScaledVector(Qf,o);Tb.subVectors(e,s);let f=Qf.dot(Tb),p=Kf.dot(Tb);if(p>=0&&f<=p)return t.copy(s);let m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(Kf,a);let y=h*p-f*u;if(y<=0&&u-h>=0&&f-p>=0)return yF.subVectors(s,r),a=(u-h)/(u-h+(f-p)),t.copy(r).addScaledVector(yF,a);let g=1/(y+m+d);return o=m*g,a=d*g,t.copy(n).addScaledVector(Qf,o).addScaledVector(Kf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},dxe=0,fD=class extends cf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dxe++}),this.uuid=F0(),this.name="",this.type="Material",this.blending=sF,this.side=e3,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=M8e,this.blendDst=E8e,this.blendEquation=T8e,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=C8e,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=N8e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ub,this.stencilZFail=ub,this.stencilZPass=ub,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==sF&&(n.blending=this.blending),this.side!==e3&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){let o=[];for(let a in s){let l=s[a];delete l.metadata,o.push(l)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},i7=class extends fD{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=D8e,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},On=new O,O9=new fe,Ot=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=UA,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)O9.fromBufferAttribute(this,t),O9.applyMatrix3(e),this.setXY(t,O9.x,O9.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyMatrix3(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyMatrix4(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyNormalMatrix(e),this.setXYZ(t,On.x,On.y,On.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.transformDirection(e),this.setXYZ(t,On.x,On.y,On.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=zl(t,this.array)),t}setX(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=zl(t,this.array)),t}setY(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=zl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=zl(t,this.array)),t}setW(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array),s=_i(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==UA&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},fxe=class extends Ot{constructor(e,t,n){super(new Uint16Array(e),t,n)}},_5=class extends Ot{constructor(e,t,n){super(new Uint32Array(e),t,n)}},pxe=class extends Ot{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}},We=class extends Ot{constructor(e,t,n){super(new Float32Array(e),t,n)}},mxe=0,po=new Fe,Mb=new Pi,Jf=new O,js=new Wn,Ag=new Wn,ir=new O,_t=class extends cf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mxe++}),this.uuid=F0(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(K8e(e)?_5:fxe)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let s=new as().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return po.makeRotationFromQuaternion(e),this.applyMatrix4(po),this}rotateX(e){return po.makeRotationX(e),this.applyMatrix4(po),this}rotateY(e){return po.makeRotationY(e),this.applyMatrix4(po),this}rotateZ(e){return po.makeRotationZ(e),this.applyMatrix4(po),this}translate(e,t,n){return po.makeTranslation(e,t,n),this.applyMatrix4(po),this}scale(e,t,n){return po.makeScale(e,t,n),this.applyMatrix4(po),this}lookAt(e){return Mb.lookAt(e),Mb.updateMatrix(),this.applyMatrix4(Mb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jf).negate(),this.translate(Jf.x,Jf.y,Jf.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new We(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let s=t[n];js.setFromBufferAttribute(s),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,js.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,js.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(js.min),this.boundingBox.expandByPoint(js.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new O,1/0);return}if(e){let n=this.boundingSphere.center;if(js.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];Ag.setFromBufferAttribute(a),this.morphTargetsRelative?(ir.addVectors(js.min,Ag.min),js.expandByPoint(ir),ir.addVectors(js.max,Ag.max),js.expandByPoint(ir)):(js.expandByPoint(Ag.min),js.expandByPoint(Ag.max))}js.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ir.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ir));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)ir.fromBufferAttribute(a,c),l&&(Jf.fromBufferAttribute(e,c),ir.add(Jf)),r=Math.max(r,n.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ot(new Float32Array(4*a),4));let l=this.getAttribute("tangent").array,c=[],h=[];for(let T=0;T<a;T++)c[T]=new O,h[T]=new O;let u=new O,d=new O,f=new O,p=new fe,m=new fe,y=new fe,g=new O,v=new O;function x(T,M,C){u.fromArray(r,T*3),d.fromArray(r,M*3),f.fromArray(r,C*3),p.fromArray(o,T*2),m.fromArray(o,M*2),y.fromArray(o,C*2),d.sub(u),f.sub(u),m.sub(p),y.sub(p);let D=1/(m.x*y.y-y.x*m.y);!isFinite(D)||(g.copy(d).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(D),v.copy(f).multiplyScalar(m.x).addScaledVector(d,-y.x).multiplyScalar(D),c[T].add(g),c[M].add(g),c[C].add(g),h[T].add(v),h[M].add(v),h[C].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:n.length}]);for(let T=0,M=_.length;T<M;++T){let C=_[T],D=C.start,P=C.count;for(let I=D,k=D+P;I<k;I+=3)x(n[I+0],n[I+1],n[I+2])}let w=new O,b=new O,S=new O,A=new O;function E(T){S.fromArray(s,T*3),A.copy(S);let M=c[T];w.copy(M),w.sub(S.multiplyScalar(S.dot(M))).normalize(),b.crossVectors(A,M);let C=b.dot(h[T])<0?-1:1;l[T*4]=w.x,l[T*4+1]=w.y,l[T*4+2]=w.z,l[T*4+3]=C}for(let T=0,M=_.length;T<M;++T){let C=_[T],D=C.start,P=C.count;for(let I=D,k=D+P;I<k;I+=3)E(n[I+0]),E(n[I+1]),E(n[I+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ot(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);let r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,h=new O,u=new O;if(e)for(let d=0,f=e.count;d<f;d+=3){let p=e.getX(d+0),m=e.getX(d+1),y=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,y),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,y),a.add(h),l.add(h),c.add(h),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),n.setXYZ(d+0,h.x,h.y,h.z),n.setXYZ(d+1,h.x,h.y,h.z),n.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ir.fromBufferAttribute(e,t),ir.normalize(),e.setXYZ(t,ir.x,ir.y,ir.z)}toNonIndexed(){function e(a,l){let c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h),f=0,p=0;for(let m=0,y=l.length;m<y;m++){a.isInterleavedBufferAttribute?f=l[m]*a.data.stride+a.offset:f=l[m]*h;for(let g=0;g<h;g++)d[p++]=c[f++]}return new Ot(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new _t,n=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,n);t.setAttribute(a,c)}let s=this.morphAttributes;for(let a in s){let l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){let d=c[h],f=e(d,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,l=o.length;a<l;a++){let c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let l in n){let c=n[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},s=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){let f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let r=e.attributes;for(let c in r){let h=r[c];this.setAttribute(c,h.clone(t))}let s=e.morphAttributes;for(let c in s){let h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let c=0,h=o.length;c<h;c++){let u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},xF=new Fe,ep=new Em,Eb=new Qo,Tg=new O,Mg=new O,Eg=new O,Cb=new O,R9=new O,N9=new fe,F9=new fe,z9=new fe,Db=new O,k9=new O,QY=class extends Pi{constructor(e=new _t,t=new i7){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=n.length;r<s;r++){let o=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){R9.set(0,0,0);for(let l=0,c=s.length;l<c;l++){let h=a[l],u=s[l];h!==0&&(Cb.fromBufferAttribute(u,e),o?R9.addScaledVector(Cb,h):R9.addScaledVector(Cb.sub(t),h))}t.add(R9)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let n=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Eb.copy(n.boundingSphere),Eb.applyMatrix4(s),e.ray.intersectsSphere(Eb)===!1)||(xF.copy(s).invert(),ep.copy(e.ray).applyMatrix4(xF),n.boundingBox!==null&&ep.intersectsBox(n.boundingBox)===!1))return;let o,a=n.index,l=n.attributes.position,c=n.attributes.uv,h=n.attributes.uv2,u=n.groups,d=n.drawRange;if(a!==null)if(Array.isArray(r))for(let f=0,p=u.length;f<p;f++){let m=u[f],y=r[m.materialIndex],g=Math.max(m.start,d.start),v=Math.min(a.count,Math.min(m.start+m.count,d.start+d.count));for(let x=g,_=v;x<_;x+=3){let w=a.getX(x),b=a.getX(x+1),S=a.getX(x+2);o=B9(this,y,e,ep,c,h,w,b,S),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{let f=Math.max(0,d.start),p=Math.min(a.count,d.start+d.count);for(let m=f,y=p;m<y;m+=3){let g=a.getX(m),v=a.getX(m+1),x=a.getX(m+2);o=B9(this,r,e,ep,c,h,g,v,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let f=0,p=u.length;f<p;f++){let m=u[f],y=r[m.materialIndex],g=Math.max(m.start,d.start),v=Math.min(l.count,Math.min(m.start+m.count,d.start+d.count));for(let x=g,_=v;x<_;x+=3){let w=x,b=x+1,S=x+2;o=B9(this,y,e,ep,c,h,w,b,S),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{let f=Math.max(0,d.start),p=Math.min(l.count,d.start+d.count);for(let m=f,y=p;m<y;m+=3){let g=m,v=m+1,x=m+2;o=B9(this,r,e,ep,c,h,g,v,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}}};function gxe(i,e,t,n,r,s,o,a){let l;if(e.side===WY?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===e3,a),l===null)return null;k9.copy(a),k9.applyMatrix4(i.matrixWorld);let c=t.ray.origin.distanceTo(k9);return c<t.near||c>t.far?null:{distance:c,point:k9.clone(),object:i}}function B9(i,e,t,n,r,s,o,a,l){i.getVertexPosition(o,Tg),i.getVertexPosition(a,Mg),i.getVertexPosition(l,Eg);let c=gxe(i,e,t,n,Tg,Mg,Eg,Db);if(c){r&&(N9.fromBufferAttribute(r,o),F9.fromBufferAttribute(r,a),z9.fromBufferAttribute(r,l),c.uv=_s.getUV(Db,Tg,Mg,Eg,N9,F9,z9,new fe)),s&&(N9.fromBufferAttribute(s,o),F9.fromBufferAttribute(s,a),z9.fromBufferAttribute(s,l),c.uv2=_s.getUV(Db,Tg,Mg,Eg,N9,F9,z9,new fe));let h={a:o,b:a,c:l,normal:new O,materialIndex:0};_s.getNormal(Tg,Mg,Eg,h.normal),c.face=h}return c}var Wd=class extends _t{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let l=[],c=[],h=[],u=[],d=0,f=0;p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new We(c,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(u,2));function p(m,y,g,v,x,_,w,b,S,A,E){let T=_/S,M=w/A,C=_/2,D=w/2,P=b/2,I=S+1,k=A+1,G=0,U=0,Z=new O;for(let $=0;$<k;$++){let W=$*M-D;for(let X=0;X<I;X++){let j=X*T-C;Z[m]=j*v,Z[y]=W*x,Z[g]=P,c.push(Z.x,Z.y,Z.z),Z[m]=0,Z[y]=0,Z[g]=b>0?1:-1,h.push(Z.x,Z.y,Z.z),u.push(X/S),u.push(1-$/A),G+=1}}for(let $=0;$<A;$++)for(let W=0;W<S;W++){let X=d+W+I*$,j=d+W+I*($+1),H=d+(W+1)+I*($+1),V=d+(W+1)+I*$;l.push(X,j,V),l.push(j,H,V),U+=6}a.addGroup(f,U,E),f+=U,d+=G}}static fromJSON(e){return new Wd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function pD(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Jr(i){let e={};for(let t=0;t<i.length;t++){let n=pD(i[t]);for(let r in n)e[r]=n[r]}return e}function vxe(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}var oy={clone:pD,merge:Jr},yxe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xxe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,mD=class extends fD{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yxe,this.fragmentShader=xxe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pD(e.uniforms),this.uniformsGroups=vxe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},Cm=class extends Pi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe}copy(i,e){return super.copy(i,e),this.matrixWorldInverse.copy(i.matrixWorldInverse),this.projectionMatrix.copy(i.projectionMatrix),this.projectionMatrixInverse.copy(i.projectionMatrixInverse),this}getWorldDirection(i){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return i.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(i){super.updateMatrixWorld(i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(i,e){super.updateWorldMatrix(i,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},gD=class extends Cm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=t3*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(J2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return t3*2*Math.atan(Math.tan(J2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(J2*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},KY=class extends Ps{constructor(e,t,n,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:qY,super(e,t,n,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Pb=new O,_xe=new O,bxe=new as,xa=class{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=Pb.subVectors(n,t).cross(_xe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(Pb),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||bxe.getNormalMatrix(e),r=this.coplanarPoint(Pb).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},tp=new Qo,U9=new O,wxe=class{constructor(e=new xa,t=new xa,n=new xa,r=new xa,s=new xa,o=new xa){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],f=n[9],p=n[10],m=n[11],y=n[12],g=n[13],v=n[14],x=n[15];return t[0].setComponents(a-r,u-l,m-d,x-y).normalize(),t[1].setComponents(a+r,u+l,m+d,x+y).normalize(),t[2].setComponents(a+s,u+c,m+f,x+g).normalize(),t[3].setComponents(a-s,u-c,m-f,x-g).normalize(),t[4].setComponents(a-o,u-h,m-p,x-v).normalize(),t[5].setComponents(a+o,u+h,m+p,x+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),tp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tp)}intersectsSprite(e){return tp.center.set(0,0,0),tp.radius=.7071067811865476,tp.applyMatrix4(e.matrixWorld),this.intersectsSphere(tp)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(U9.x=r.normal.x>0?e.max.x:e.min.x,U9.y=r.normal.y>0?e.max.y:e.min.y,U9.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(U9)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}},vD=class extends _t{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,h=l+1,u=e/a,d=t/l,f=[],p=[],m=[],y=[];for(let g=0;g<h;g++){let v=g*d-o;for(let x=0;x<c;x++){let _=x*u-s;p.push(_,-v,0),m.push(0,0,1),y.push(x/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let v=0;v<a;v++){let x=v+c*g,_=v+c*(g+1),w=v+1+c*(g+1),b=v+1+c*g;f.push(x,_,b),f.push(_,w,b)}this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(m,3)),this.setAttribute("uv",new We(y,2))}static fromJSON(e){return new vD(e.width,e.height,e.widthSegments,e.heightSegments)}},Sxe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Axe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Txe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Mxe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Exe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Cxe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Dxe="vec3 transformed = vec3( position );",Pxe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Lxe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Ixe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Oxe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Rxe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Nxe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Fxe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zxe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kxe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Bxe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Uxe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Vxe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Gxe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,jxe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hxe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Wxe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$xe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,qxe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Xxe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yxe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zxe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qxe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Kxe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jxe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,e7e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,t7e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,i7e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,n7e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,r7e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,s7e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,o7e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,a7e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,l7e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,c7e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,u7e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,h7e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,d7e=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,f7e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,p7e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,m7e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,g7e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,v7e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,y7e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,x7e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_7e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,b7e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,w7e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,S7e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,A7e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,T7e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,M7e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,E7e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,C7e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,D7e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,P7e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,L7e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,I7e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,O7e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,R7e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,N7e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,F7e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,z7e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,k7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,B7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,U7e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,V7e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,G7e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,j7e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,H7e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,W7e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$7e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,q7e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,X7e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Y7e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Z7e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Q7e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,K7e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,J7e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,e_e=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,t_e=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,i_e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,n_e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,r_e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,s_e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,o_e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,a_e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,l_e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,c_e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,u_e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,h_e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,d_e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,f_e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,p_e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,m_e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,g_e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,v_e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,y_e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,x_e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,__e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,b_e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,w_e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,S_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,A_e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,T_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,M_e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,E_e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,C_e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,D_e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,P_e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,L_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,I_e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,O_e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R_e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,N_e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,F_e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z_e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k_e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B_e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,U_e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V_e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,G_e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,j_e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H_e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W_e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$_e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q_e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X_e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y_e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Z_e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q_e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K_e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,J_e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ebe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Rt={alphamap_fragment:Sxe,alphamap_pars_fragment:Axe,alphatest_fragment:Txe,alphatest_pars_fragment:Mxe,aomap_fragment:Exe,aomap_pars_fragment:Cxe,begin_vertex:Dxe,beginnormal_vertex:Pxe,bsdfs:Lxe,iridescence_fragment:Ixe,bumpmap_pars_fragment:Oxe,clipping_planes_fragment:Rxe,clipping_planes_pars_fragment:Nxe,clipping_planes_pars_vertex:Fxe,clipping_planes_vertex:zxe,color_fragment:kxe,color_pars_fragment:Bxe,color_pars_vertex:Uxe,color_vertex:Vxe,common:Gxe,cube_uv_reflection_fragment:jxe,defaultnormal_vertex:Hxe,displacementmap_pars_vertex:Wxe,displacementmap_vertex:$xe,emissivemap_fragment:qxe,emissivemap_pars_fragment:Xxe,encodings_fragment:Yxe,encodings_pars_fragment:Zxe,envmap_fragment:Qxe,envmap_common_pars_fragment:Kxe,envmap_pars_fragment:Jxe,envmap_pars_vertex:e7e,envmap_physical_pars_fragment:d7e,envmap_vertex:t7e,fog_vertex:i7e,fog_pars_vertex:n7e,fog_fragment:r7e,fog_pars_fragment:s7e,gradientmap_pars_fragment:o7e,lightmap_fragment:a7e,lightmap_pars_fragment:l7e,lights_lambert_fragment:c7e,lights_lambert_pars_fragment:u7e,lights_pars_begin:h7e,lights_toon_fragment:f7e,lights_toon_pars_fragment:p7e,lights_phong_fragment:m7e,lights_phong_pars_fragment:g7e,lights_physical_fragment:v7e,lights_physical_pars_fragment:y7e,lights_fragment_begin:x7e,lights_fragment_maps:_7e,lights_fragment_end:b7e,logdepthbuf_fragment:w7e,logdepthbuf_pars_fragment:S7e,logdepthbuf_pars_vertex:A7e,logdepthbuf_vertex:T7e,map_fragment:M7e,map_pars_fragment:E7e,map_particle_fragment:C7e,map_particle_pars_fragment:D7e,metalnessmap_fragment:P7e,metalnessmap_pars_fragment:L7e,morphcolor_vertex:I7e,morphnormal_vertex:O7e,morphtarget_pars_vertex:R7e,morphtarget_vertex:N7e,normal_fragment_begin:F7e,normal_fragment_maps:z7e,normal_pars_fragment:k7e,normal_pars_vertex:B7e,normal_vertex:U7e,normalmap_pars_fragment:V7e,clearcoat_normal_fragment_begin:G7e,clearcoat_normal_fragment_maps:j7e,clearcoat_pars_fragment:H7e,iridescence_pars_fragment:W7e,output_fragment:$7e,packing:q7e,premultiplied_alpha_fragment:X7e,project_vertex:Y7e,dithering_fragment:Z7e,dithering_pars_fragment:Q7e,roughnessmap_fragment:K7e,roughnessmap_pars_fragment:J7e,shadowmap_pars_fragment:e_e,shadowmap_pars_vertex:t_e,shadowmap_vertex:i_e,shadowmask_pars_fragment:n_e,skinbase_vertex:r_e,skinning_pars_vertex:s_e,skinning_vertex:o_e,skinnormal_vertex:a_e,specularmap_fragment:l_e,specularmap_pars_fragment:c_e,tonemapping_fragment:u_e,tonemapping_pars_fragment:h_e,transmission_fragment:d_e,transmission_pars_fragment:f_e,uv_pars_fragment:p_e,uv_pars_vertex:m_e,uv_vertex:g_e,uv2_pars_fragment:v_e,uv2_pars_vertex:y_e,uv2_vertex:x_e,worldpos_vertex:__e,background_vert:b_e,background_frag:w_e,backgroundCube_vert:S_e,backgroundCube_frag:A_e,cube_vert:T_e,cube_frag:M_e,depth_vert:E_e,depth_frag:C_e,distanceRGBA_vert:D_e,distanceRGBA_frag:P_e,equirect_vert:L_e,equirect_frag:I_e,linedashed_vert:O_e,linedashed_frag:R_e,meshbasic_vert:N_e,meshbasic_frag:F_e,meshlambert_vert:z_e,meshlambert_frag:k_e,meshmatcap_vert:B_e,meshmatcap_frag:U_e,meshnormal_vert:V_e,meshnormal_frag:G_e,meshphong_vert:j_e,meshphong_frag:H_e,meshphysical_vert:W_e,meshphysical_frag:$_e,meshtoon_vert:q_e,meshtoon_frag:X_e,points_vert:Y_e,points_frag:Z_e,shadow_vert:Q_e,shadow_frag:K_e,sprite_vert:J_e,sprite_frag:ebe},Ne={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new as},uv2Transform:{value:new as},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new as}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new fe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new as}}},_F={basic:{uniforms:Jr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:Rt.meshbasic_vert,fragmentShader:Rt.meshbasic_frag},lambert:{uniforms:Jr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new St(0)}}]),vertexShader:Rt.meshlambert_vert,fragmentShader:Rt.meshlambert_frag},phong:{uniforms:Jr([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:Rt.meshphong_vert,fragmentShader:Rt.meshphong_frag},standard:{uniforms:Jr([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag},toon:{uniforms:Jr([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new St(0)}}]),vertexShader:Rt.meshtoon_vert,fragmentShader:Rt.meshtoon_frag},matcap:{uniforms:Jr([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:Rt.meshmatcap_vert,fragmentShader:Rt.meshmatcap_frag},points:{uniforms:Jr([Ne.points,Ne.fog]),vertexShader:Rt.points_vert,fragmentShader:Rt.points_frag},dashed:{uniforms:Jr([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rt.linedashed_vert,fragmentShader:Rt.linedashed_frag},depth:{uniforms:Jr([Ne.common,Ne.displacementmap]),vertexShader:Rt.depth_vert,fragmentShader:Rt.depth_frag},normal:{uniforms:Jr([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:Rt.meshnormal_vert,fragmentShader:Rt.meshnormal_frag},sprite:{uniforms:Jr([Ne.sprite,Ne.fog]),vertexShader:Rt.sprite_vert,fragmentShader:Rt.sprite_frag},background:{uniforms:{uvTransform:{value:new as},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rt.background_vert,fragmentShader:Rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rt.backgroundCube_vert,fragmentShader:Rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rt.cube_vert,fragmentShader:Rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rt.equirect_vert,fragmentShader:Rt.equirect_frag},distanceRGBA:{uniforms:Jr([Ne.common,Ne.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rt.distanceRGBA_vert,fragmentShader:Rt.distanceRGBA_frag},shadow:{uniforms:Jr([Ne.lights,Ne.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:Rt.shadow_vert,fragmentShader:Rt.shadow_frag}};_F.physical={uniforms:Jr([_F.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new fe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag};var R6=class extends Cm{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};new R6;new St;var kh=(1+Math.sqrt(5))/2,ip=1/kh;new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,kh,ip),new O(0,kh,-ip),new O(ip,0,kh),new O(-ip,0,kh),new O(kh,ip,0),new O(-kh,ip,0);new Ps;new nxe;new rxe;new KY;var JY=class extends Pi{constructor(){super(),this.isGroup=!0,this.type="Group"}},eZ=class{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=t,this.far=n}clone(){return new eZ(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},tZ=class extends Pi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},tbe=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=UA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=F0()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=F0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=F0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Xr=new O,VA=class{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix4(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.applyNormalMatrix(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.transformDirection(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}setX(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=zl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=zl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=zl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=zl(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array),s=_i(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ot(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new VA(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},ibe=class extends Ot{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},uf=class extends fD{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},bF=new O,wF=new O,SF=new Fe,Lb=new Em,V9=new Qo,GA=class extends Pi{constructor(e=new _t,t=new uf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)bF.fromBufferAttribute(t,r-1),wF.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=bF.distanceTo(wF);e.setAttribute("lineDistance",new We(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),V9.copy(n.boundingSphere),V9.applyMatrix4(r),V9.radius+=s,e.ray.intersectsSphere(V9)===!1)return;SF.copy(r).invert(),Lb.copy(e.ray).applyMatrix4(SF);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new O,h=new O,u=new O,d=new O,f=this.isLineSegments?2:1,p=n.index,m=n.attributes.position;if(p!==null){let y=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=y,x=g-1;v<x;v+=f){let _=p.getX(v),w=p.getX(v+1);if(c.fromBufferAttribute(m,_),h.fromBufferAttribute(m,w),Lb.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let y=Math.max(0,o.start),g=Math.min(m.count,o.start+o.count);for(let v=y,x=g-1;v<x;v+=f){if(c.fromBufferAttribute(m,v),h.fromBufferAttribute(m,v+1),Lb.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(d);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=n.length;r<s;r++){let o=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}},AF=new O,TF=new O,ay=class extends GA{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)AF.fromBufferAttribute(t,r),TF.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+AF.distanceTo(TF);e.setAttribute("lineDistance",new We(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},nbe=class extends Ps{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:kA,this.magFilter=s!==void 0?s:kA,this.generateMipmaps=!1;let h=this;function u(){h.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},K0=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n=this.getLengths(),r=0,s=n.length,o;t?o=t:o=e*n[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);let h=n[r],u=n[r+1]-h,d=(o-h)/u;return(r+d)/(s-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let s=this.getPoint(n),o=this.getPoint(r),a=t||(s.isVector2?new fe:new O);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new O,r=[],s=[],o=[],a=new O,l=new Fe;for(let f=0;f<=e;f++){let p=f/e;r[f]=this.getTangentAt(p,new O)}s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE,h=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(ar(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(ar(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},n7=class extends K0{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){let n=t||new fe,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);let a=this.aStartAngle+e*s,l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*h-f*u+this.aX,c=d*u+f*h+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},rbe=class extends n7{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}};function yD(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){let o=s*s,a=o*s;return i+e*s+t*o+n*a}}}var G9=new O,Ib=new yD,Ob=new yD,Rb=new yD,sbe=class extends K0{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new O){let n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(G9.subVectors(r[0],r[1]).add(r[0]),c=G9);let u=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(G9.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=G9),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(h),f);m<1e-4&&(m=1),p<1e-4&&(p=m),y<1e-4&&(y=m),Ib.initNonuniformCatmullRom(c.x,u.x,d.x,h.x,p,m,y),Ob.initNonuniformCatmullRom(c.y,u.y,d.y,h.y,p,m,y),Rb.initNonuniformCatmullRom(c.z,u.z,d.z,h.z,p,m,y)}else this.curveType==="catmullrom"&&(Ib.initCatmullRom(c.x,u.x,d.x,h.x,this.tension),Ob.initCatmullRom(c.y,u.y,d.y,h.y,this.tension),Rb.initCatmullRom(c.z,u.z,d.z,h.z,this.tension));return n.set(Ib.calc(l),Ob.calc(l),Rb.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(new O().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function MF(i,e,t,n,r){let s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function obe(i,e){let t=1-i;return t*t*e}function abe(i,e){return 2*(1-i)*i*e}function lbe(i,e){return i*i*e}function tv(i,e,t,n){return obe(i,e)+abe(i,t)+lbe(i,n)}function cbe(i,e){let t=1-i;return t*t*t*e}function ube(i,e){let t=1-i;return 3*t*t*i*e}function hbe(i,e){return 3*(1-i)*i*i*e}function dbe(i,e){return i*i*i*e}function iv(i,e,t,n,r){return cbe(i,e)+ube(i,t)+hbe(i,n)+dbe(i,r)}var Ma=class extends K0{constructor(e=new fe,t=new fe,n=new fe,r=new fe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new fe){let n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(iv(e,r.x,s.x,o.x,a.x),iv(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},b5=class extends K0{constructor(e=new O,t=new O,n=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new O){let n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(iv(e,r.x,s.x,o.x,a.x),iv(e,r.y,s.y,o.y,a.y),iv(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ra=class extends K0{constructor(e=new fe,t=new fe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new fe){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new fe;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},iZ=class extends K0{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Zu=class extends K0{constructor(i=new fe,e=new fe,t=new fe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=i,this.v1=e,this.v2=t}getPoint(i,e=new fe){let t=e,n=this.v0,r=this.v1,s=this.v2;return t.set(tv(i,n.x,r.x,s.x),tv(i,n.y,r.y,s.y)),t}copy(i){return super.copy(i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this}toJSON(){let i=super.toJSON();return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i}fromJSON(i){return super.fromJSON(i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this}},fbe=class extends K0{constructor(e=new O,t=new O,n=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new O){let n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(tv(e,r.x,s.x,o.x),tv(e,r.y,s.y,o.y),tv(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},xD=class extends K0{constructor(i=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=i}getPoint(i,e=new fe){let t=e,n=this.points,r=(n.length-1)*i,s=Math.floor(r),o=r-s,a=n[s===0?s:s-1],l=n[s],c=n[s>n.length-2?n.length-1:s+1],h=n[s>n.length-3?n.length-1:s+2];return t.set(MF(o,a.x,l.x,c.x,h.x),MF(o,a.y,l.y,c.y,h.y)),t}copy(i){super.copy(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){let n=i.points[e];this.points.push(n.clone())}return this}toJSON(){let i=super.toJSON();i.points=[];for(let e=0,t=this.points.length;e<t;e++){let n=this.points[e];i.points.push(n.toArray())}return i}fromJSON(i){super.fromJSON(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){let n=i.points[e];this.points.push(new fe().fromArray(n))}return this}},pbe=Object.freeze({__proto__:null,ArcCurve:rbe,CatmullRomCurve3:sbe,CubicBezierCurve:Ma,CubicBezierCurve3:b5,EllipseCurve:n7,LineCurve:Ra,LineCurve3:iZ,QuadraticBezierCurve:Zu,QuadraticBezierCurve3:fbe,SplineCurve:xD}),nZ=class extends K0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ra(t,e))}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=n){let o=r[s]-n,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],n;for(let r=0,s=this.curves;r<s.length;r++){let o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){let h=l[c];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(new pbe[r.type]().fromJSON(r))}return this}},N6=class extends nZ{constructor(e){super(),this.type="Path",this.currentPoint=new fe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new Ra(this.currentPoint.clone(),new fe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let s=new Zu(this.currentPoint.clone(),new fe(e,t),new fe(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){let a=new Ma(this.currentPoint.clone(),new fe(e,t),new fe(n,r),new fe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new xD(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){let c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){let c=new n7(e,t,n,r,s,o,a,l);if(this.curves.length>0){let u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);let h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},rZ=class extends _t{constructor(i=[new fe(0,-.5),new fe(.5,0),new fe(0,.5)],e=12,t=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:i,segments:e,phiStart:t,phiLength:n},e=Math.floor(e),n=ar(n,0,Math.PI*2);let r=[],s=[],o=[],a=[],l=[],c=1/e,h=new O,u=new fe,d=new O,f=new O,p=new O,m=0,y=0;for(let g=0;g<=i.length-1;g++)switch(g){case 0:m=i[g+1].x-i[g].x,y=i[g+1].y-i[g].y,d.x=y*1,d.y=-m,d.z=y*0,p.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case i.length-1:a.push(p.x,p.y,p.z);break;default:m=i[g+1].x-i[g].x,y=i[g+1].y-i[g].y,d.x=y*1,d.y=-m,d.z=y*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),a.push(d.x,d.y,d.z),p.copy(f)}for(let g=0;g<=e;g++){let v=t+g*c*n,x=Math.sin(v),_=Math.cos(v);for(let w=0;w<=i.length-1;w++){h.x=i[w].x*x,h.y=i[w].y,h.z=i[w].x*_,s.push(h.x,h.y,h.z),u.x=g/e,u.y=w/(i.length-1),o.push(u.x,u.y);let b=a[3*w+0]*x,S=a[3*w+1],A=a[3*w+0]*_;l.push(b,S,A)}}for(let g=0;g<e;g++)for(let v=0;v<i.length-1;v++){let x=v+g*i.length,_=x,w=x+i.length,b=x+i.length+1,S=x+1;r.push(_,w,S),r.push(b,S,w)}this.setIndex(r),this.setAttribute("position",new We(s,3)),this.setAttribute("uv",new We(o,2)),this.setAttribute("normal",new We(l,3))}static fromJSON(i){return new rZ(i.points,i.segments,i.phiStart,i.phiLength)}},_D=class extends _t{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};let c=this;r=Math.floor(r),s=Math.floor(s);let h=[],u=[],d=[],f=[],p=0,m=[],y=n/2,g=0;v(),o===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new We(u,3)),this.setAttribute("normal",new We(d,3)),this.setAttribute("uv",new We(f,2));function v(){let _=new O,w=new O,b=0,S=(t-e)/n;for(let A=0;A<=s;A++){let E=[],T=A/s,M=T*(t-e)+e;for(let C=0;C<=r;C++){let D=C/r,P=D*l+a,I=Math.sin(P),k=Math.cos(P);w.x=M*I,w.y=-T*n+y,w.z=M*k,u.push(w.x,w.y,w.z),_.set(I,S,k).normalize(),d.push(_.x,_.y,_.z),f.push(D,1-T),E.push(p++)}m.push(E)}for(let A=0;A<r;A++)for(let E=0;E<s;E++){let T=m[E][A],M=m[E+1][A],C=m[E+1][A+1],D=m[E][A+1];h.push(T,M,D),h.push(M,C,D),b+=6}c.addGroup(g,b,0),g+=b}function x(_){let w=p,b=new fe,S=new O,A=0,E=_===!0?e:t,T=_===!0?1:-1;for(let C=1;C<=r;C++)u.push(0,y*T,0),d.push(0,T,0),f.push(.5,.5),p++;let M=p;for(let C=0;C<=r;C++){let D=C/r*l+a,P=Math.cos(D),I=Math.sin(D);S.x=E*I,S.y=y*T,S.z=E*P,u.push(S.x,S.y,S.z),d.push(0,T,0),b.x=P*.5+.5,b.y=I*.5*T+.5,f.push(b.x,b.y),p++}for(let C=0;C<r;C++){let D=w+C,P=M+C;_===!0?h.push(P,P+1,D):h.push(P+1,P,D),A+=3}c.addGroup(g,A,_===!0?1:2),g+=A}}static fromJSON(e){return new _D(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},sZ=class extends _D{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sZ(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},bD=class extends _t{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let s=[],o=[];a(r),c(n),h(),this.setAttribute("position",new We(s,3)),this.setAttribute("normal",new We(s.slice(),3)),this.setAttribute("uv",new We(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let x=new O,_=new O,w=new O;for(let b=0;b<t.length;b+=3)f(t[b+0],x),f(t[b+1],_),f(t[b+2],w),l(x,_,w,v)}function l(v,x,_,w){let b=w+1,S=[];for(let A=0;A<=b;A++){S[A]=[];let E=v.clone().lerp(_,A/b),T=x.clone().lerp(_,A/b),M=b-A;for(let C=0;C<=M;C++)C===0&&A===b?S[A][C]=E:S[A][C]=E.clone().lerp(T,C/M)}for(let A=0;A<b;A++)for(let E=0;E<2*(b-A)-1;E++){let T=Math.floor(E/2);E%2===0?(d(S[A][T+1]),d(S[A+1][T]),d(S[A][T])):(d(S[A][T+1]),d(S[A+1][T+1]),d(S[A+1][T]))}}function c(v){let x=new O;for(let _=0;_<s.length;_+=3)x.x=s[_+0],x.y=s[_+1],x.z=s[_+2],x.normalize().multiplyScalar(v),s[_+0]=x.x,s[_+1]=x.y,s[_+2]=x.z}function h(){let v=new O;for(let x=0;x<s.length;x+=3){v.x=s[x+0],v.y=s[x+1],v.z=s[x+2];let _=y(v)/2/Math.PI+.5,w=g(v)/Math.PI+.5;o.push(_,1-w)}p(),u()}function u(){for(let v=0;v<o.length;v+=6){let x=o[v+0],_=o[v+2],w=o[v+4],b=Math.max(x,_,w),S=Math.min(x,_,w);b>.9&&S<.1&&(x<.2&&(o[v+0]+=1),_<.2&&(o[v+2]+=1),w<.2&&(o[v+4]+=1))}}function d(v){s.push(v.x,v.y,v.z)}function f(v,x){let _=v*3;x.x=e[_+0],x.y=e[_+1],x.z=e[_+2]}function p(){let v=new O,x=new O,_=new O,w=new O,b=new fe,S=new fe,A=new fe;for(let E=0,T=0;E<s.length;E+=9,T+=6){v.set(s[E+0],s[E+1],s[E+2]),x.set(s[E+3],s[E+4],s[E+5]),_.set(s[E+6],s[E+7],s[E+8]),b.set(o[T+0],o[T+1]),S.set(o[T+2],o[T+3]),A.set(o[T+4],o[T+5]),w.copy(v).add(x).add(_).divideScalar(3);let M=y(w);m(b,T+0,v,M),m(S,T+2,x,M),m(A,T+4,_,M)}}function m(v,x,_,w){w<0&&v.x===1&&(o[x]=v.x-1),_.x===0&&_.z===0&&(o[x]=w/2/Math.PI+.5)}function y(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new bD(e.vertices,e.indices,e.radius,e.details)}},oZ=class extends bD{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oZ(e.radius,e.detail)}},F6=class extends N6{constructor(e){super(e),this.uuid=F0(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(new N6().fromJSON(r))}return this}},mbe={triangulate:function(i,e,t=2){let n=e&&e.length,r=n?e[0]*t:i.length,s=aZ(i,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(n&&(s=_be(i,e,s,t)),i.length>80*t){a=c=i[0],l=h=i[1];for(let p=t;p<r;p+=t)u=i[p],d=i[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return i3(s,o,t,a,l,f,0),o}};function aZ(i,e,t,n,r){let s,o;if(r===Lbe(i,e,t,n)>0)for(s=e;s<t;s+=n)o=EF(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=EF(s,i[s],i[s+1],o);return o&&r7(o,o.next)&&(r3(o),o=o.next),o}function $d(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(r7(t,t.next)||Xi(t.prev,t,t.next)===0)){if(r3(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function i3(i,e,t,n,r,s,o){if(!i)return;!o&&s&&Tbe(i,n,r,s);let a=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?vbe(i,n,r,s):gbe(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),r3(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=ybe($d(i),e,t),i3(i,e,t,n,r,s,2)):o===2&&xbe(i,e,t,n,r,s):i3($d(i),e,t,n,r,s,1);break}}}function gbe(i){let e=i.prev,t=i,n=i.next;if(Xi(e,t,n)>=0)return!1;let r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=n.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Np(r,a,s,l,o,c,p.x,p.y)&&Xi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function vbe(i,e,t,n){let r=i.prev,s=i,o=i.next;if(Xi(r,s,o)>=0)return!1;let a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,m=a>l?a>c?a:c:l>c?l:c,y=h>u?h>d?h:d:u>d?u:d,g=jA(f,p,e,t,n),v=jA(m,y,e,t,n),x=i.prevZ,_=i.nextZ;for(;x&&x.z>=g&&_&&_.z<=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==r&&x!==o&&Np(a,h,l,u,c,d,x.x,x.y)&&Xi(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==r&&_!==o&&Np(a,h,l,u,c,d,_.x,_.y)&&Xi(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=g;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==r&&x!==o&&Np(a,h,l,u,c,d,x.x,x.y)&&Xi(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==r&&_!==o&&Np(a,h,l,u,c,d,_.x,_.y)&&Xi(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function ybe(i,e,t){let n=i;do{let r=n.prev,s=n.next.next;!r7(r,s)&&lZ(r,n,n.next,s)&&n3(r,s)&&n3(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),r3(n),r3(n.next),n=i=s),n=n.next}while(n!==i);return $d(n)}function xbe(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Cbe(o,a)){let l=cZ(o,a);o=$d(o,o.next),l=$d(l,l.next),i3(o,e,t,n,r,s,0),i3(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function _be(i,e,t,n){let r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=aZ(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(Ebe(c));for(r.sort(bbe),s=0;s<r.length;s++)t=wbe(r[s],t);return t}function bbe(i,e){return i.x-e.x}function wbe(i,e){let t=Sbe(i,e);if(!t)return e;let n=cZ(t,i);return $d(n,n.next),$d(t,t.next)}function Sbe(i,e){let t=e,n=-1/0,r,s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){let d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;let a=r,l=r.x,c=r.y,h=1/0,u;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Np(o<c?s:n,o,l,c,o<c?n:s,o,t.x,t.y)&&(u=Math.abs(o-t.y)/(s-t.x),n3(t,i)&&(u<h||u===h&&(t.x>r.x||t.x===r.x&&Abe(r,t)))&&(r=t,h=u)),t=t.next;while(t!==a);return r}function Abe(i,e){return Xi(i.prev,i,e.prev)<0&&Xi(e.next,i,i.next)<0}function Tbe(i,e,t,n){let r=i;do r.z===0&&(r.z=jA(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,Mbe(r)}function Mbe(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1);return i}function jA(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Ebe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Np(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function Cbe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Dbe(i,e)&&(n3(i,e)&&n3(e,i)&&Pbe(i,e)&&(Xi(i.prev,i,e.prev)||Xi(i,e.prev,e))||r7(i,e)&&Xi(i.prev,i,i.next)>0&&Xi(e.prev,e,e.next)>0)}function Xi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function r7(i,e){return i.x===e.x&&i.y===e.y}function lZ(i,e,t,n){let r=H9(Xi(i,e,t)),s=H9(Xi(i,e,n)),o=H9(Xi(t,n,i)),a=H9(Xi(t,n,e));return!!(r!==s&&o!==a||r===0&&j9(i,t,e)||s===0&&j9(i,n,e)||o===0&&j9(t,i,n)||a===0&&j9(t,e,n))}function j9(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function H9(i){return i>0?1:i<0?-1:0}function Dbe(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&lZ(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function n3(i,e){return Xi(i.prev,i,i.next)<0?Xi(i,e,i.next)>=0&&Xi(i,i.prev,e)>=0:Xi(i,e,i.prev)<0||Xi(i,i.next,e)<0}function Pbe(i,e){let t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function cZ(i,e){let t=new HA(i.i,i.x,i.y),n=new HA(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function EF(i,e,t,n){let r=new HA(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function r3(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function HA(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lbe(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}var uZ=class{static area(i){let e=i.length,t=0;for(let n=e-1,r=0;r<e;n=r++)t+=i[n].x*i[r].y-i[r].x*i[n].y;return t*.5}static isClockWise(i){return uZ.area(i)<0}static triangulateShape(i,e){let t=[],n=[],r=[];CF(i),DF(t,i);let s=i.length;e.forEach(CF);for(let a=0;a<e.length;a++)n.push(s),s+=e[a].length,DF(t,e[a]);let o=mbe.triangulate(t,n);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function CF(i){let e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function DF(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}var hZ=class extends bD{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hZ(e.radius,e.detail)}},wD=class extends _t{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let l=Math.min(o+a,Math.PI),c=0,h=[],u=new O,d=new O,f=[],p=[],m=[],y=[];for(let g=0;g<=n;g++){let v=[],x=g/n,_=0;g==0&&o==0?_=.5/t:g==n&&l==Math.PI&&(_=-.5/t);for(let w=0;w<=t;w++){let b=w/t;u.x=-e*Math.cos(r+b*s)*Math.sin(o+x*a),u.y=e*Math.cos(o+x*a),u.z=e*Math.sin(r+b*s)*Math.sin(o+x*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),m.push(d.x,d.y,d.z),y.push(b+_,1-x),v.push(c++)}h.push(v)}for(let g=0;g<n;g++)for(let v=0;v<t;v++){let x=h[g][v+1],_=h[g][v],w=h[g+1][v],b=h[g+1][v+1];(g!==0||o>0)&&f.push(x,_,b),(g!==n-1||l<Math.PI)&&f.push(_,w,b)}this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(m,3)),this.setAttribute("uv",new We(y,2))}static fromJSON(e){return new wD(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},dZ=class extends _t{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);let a=[],l=[],c=[],h=[],u=new O,d=new O,f=new O,p=new O,m=new O,y=new O,g=new O;for(let x=0;x<=n;++x){let _=x/n*s*Math.PI*2;v(_,s,o,e,f),v(_+.01,s,o,e,p),y.subVectors(p,f),g.addVectors(p,f),m.crossVectors(y,g),g.crossVectors(m,y),m.normalize(),g.normalize();for(let w=0;w<=r;++w){let b=w/r*Math.PI*2,S=-t*Math.cos(b),A=t*Math.sin(b);u.x=f.x+(S*g.x+A*m.x),u.y=f.y+(S*g.y+A*m.y),u.z=f.z+(S*g.z+A*m.z),l.push(u.x,u.y,u.z),d.subVectors(u,f).normalize(),c.push(d.x,d.y,d.z),h.push(x/n),h.push(w/r)}}for(let x=1;x<=n;x++)for(let _=1;_<=r;_++){let w=(r+1)*(x-1)+(_-1),b=(r+1)*x+(_-1),S=(r+1)*x+_,A=(r+1)*(x-1)+_;a.push(w,b,A),a.push(b,S,A)}this.setIndex(a),this.setAttribute("position",new We(l,3)),this.setAttribute("normal",new We(c,3)),this.setAttribute("uv",new We(h,2));function v(x,_,w,b,S){let A=Math.cos(x),E=Math.sin(x),T=w/_*x,M=Math.cos(T);S.x=b*(2+M)*.5*A,S.y=b*(2+M)*E*.5,S.z=b*Math.sin(T)*.5}}static fromJSON(e){return new dZ(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},PF={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},Ibe=class{constructor(e,t,n){let r=this,s=!1,o=0,a=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){let u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){let f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(h))return p}return null}}},Obe=new Ibe,fZ=class{constructor(e){this.manager=e!==void 0?e:Obe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},xl={},Rbe=class extends Error{constructor(e,t){super(e),this.response=t}},Nbe=class extends fZ{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=PF.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(xl[e]!==void 0){xl[e].push({onLoad:t,onProgress:n,onError:r});return}xl[e]=[],xl[e].push({onLoad:t,onProgress:n,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;let h=xl[e],u=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0,m=0,y=new ReadableStream({start(g){v();function v(){u.read().then(({done:x,value:_})=>{if(x)g.close();else{m+=_.byteLength;let w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let b=0,S=h.length;b<S;b++){let A=h[b];A.onProgress&&A.onProgress(w)}g.enqueue(_),v()}})}}});return new Response(y)}else throw new Rbe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),u=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(u);return c.arrayBuffer().then(f=>d.decode(f))}}}).then(c=>{PF.add(e,c);let h=xl[e];delete xl[e];for(let u=0,d=h.length;u<d;u++){let f=h[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{let h=xl[e];if(h===void 0)throw this.manager.itemError(e),c;delete xl[e];for(let u=0,d=h.length;u<d;u++){let f=h[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},ly=class extends Pi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Fbe=class extends ly{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Pi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new St(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Nb=new Fe,LF=new O,IF=new O,SD=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fe(512,512),this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wxe,this._frameExtents=new fe(1,1),this._viewportCount=1,this._viewports=[new tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;LF.setFromMatrixPosition(e.matrixWorld),t.position.copy(LF),IF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(IF),t.updateMatrixWorld(),Nb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Nb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},zbe=class extends SD{constructor(){super(new gD(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=t3*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},kbe=class extends ly{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pi.DEFAULT_UP),this.updateMatrix(),this.target=new Pi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new zbe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},OF=new Fe,Cg=new O,Fb=new O,Bbe=class extends SD{constructor(){super(new gD(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fe(4,2),this._viewportCount=6,this._viewports=[new tn(2,1,1,1),new tn(0,1,1,1),new tn(3,1,1,1),new tn(1,1,1,1),new tn(3,0,1,1),new tn(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Cg.setFromMatrixPosition(e.matrixWorld),n.position.copy(Cg),Fb.copy(n.position),Fb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Fb),n.updateMatrixWorld(),r.makeTranslation(-Cg.x,-Cg.y,-Cg.z),OF.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OF)}},Ube=class extends ly{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Bbe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Vbe=class extends SD{constructor(){super(new R6(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Gbe=class extends ly{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pi.DEFAULT_UP),this.updateMatrix(),this.target=new Pi,this.shadow=new Vbe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},jbe=class extends _t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},pZ=class extends fZ{constructor(e){super(e)}load(e,t,n,r){let s=this,o=new Nbe(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(d,f){if(t[f]!==void 0)return t[f];let p=d.interleavedBuffers[f],m=s(d,p.buffer),y=A9(p.type,m),g=new tbe(y,p.stride);return g.uuid=p.uuid,t[f]=g,g}function s(d,f){if(n[f]!==void 0)return n[f];let p=d.arrayBuffers[f],m=new Uint32Array(p).buffer;return n[f]=m,m}let o=e.isInstancedBufferGeometry?new jbe:new _t,a=e.data.index;if(a!==void 0){let d=A9(a.type,a.array);o.setIndex(new Ot(d,1))}let l=e.data.attributes;for(let d in l){let f=l[d],p;if(f.isInterleavedBufferAttribute){let m=r(e.data,f.data);p=new VA(m,f.itemSize,f.offset,f.normalized)}else{let m=A9(f.type,f.array),y=f.isInstancedBufferAttribute?ibe:Ot;p=new y(m,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),f.usage!==void 0&&p.setUsage(f.usage),f.updateRange!==void 0&&(p.updateRange.offset=f.updateRange.offset,p.updateRange.count=f.updateRange.count),o.setAttribute(d,p)}let c=e.data.morphAttributes;if(c)for(let d in c){let f=c[d],p=[];for(let m=0,y=f.length;m<y;m++){let g=f[m],v;if(g.isInterleavedBufferAttribute){let x=r(e.data,g.data);v=new VA(x,g.itemSize,g.offset,g.normalized)}else{let x=A9(g.type,g.array);v=new Ot(x,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),p.push(v)}o.morphAttributes[d]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);let h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,f=h.length;d!==f;++d){let p=h[d];o.addGroup(p.start,p.count,p.materialIndex)}let u=e.data.boundingSphere;if(u!==void 0){let d=new O;u.center!==void 0&&d.fromArray(u.center),o.boundingSphere=new Qo(d,u.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}},mZ="\\[\\]\\.:\\/",AD="[^"+mZ+"]",Hbe="[^"+mZ.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",AD);/(WCOD+)?/.source.replace("WCOD",Hbe);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AD);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AD);var Wbe=class{constructor(e,t,n=0,r=1/0){this.ray=new Em(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new ZY,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return WA(e,this,n,t),n.sort(RF),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)WA(e[r],this,n,t);return n.sort(RF),n}};function RF(i,e){return i.distance-e.distance}function WA(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){let r=i.children;for(let s=0,o=r.length;s<o;s++)WA(r[s],e,t,!0)}}var NF=new fe,$be=class{constructor(e=new fe(1/0,1/0),t=new fe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=NF.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return NF.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},FF=new O,W9=new O,$o=class{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){FF.subVectors(e,this.start),W9.subVectors(this.end,this.start);let n=W9.dot(W9),r=W9.dot(FF)/n;return t&&(r=ar(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},zF=new O,qbe=class extends Pi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new _t,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){let c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new We(r,3));let s=new uf({fog:!1,toneMapped:!1});this.cone=new ay(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),zF.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zF),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Xbe=class extends QY{constructor(e,t,n){let r=new wD(t,4,2),s=new i7({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},kF=new O,$9=new O,BF=new O,Ybe=class extends Pi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new _t;r.setAttribute("position",new We([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let s=new uf({fog:!1,toneMapped:!1});this.lightPlane=new GA(r,s),this.add(this.lightPlane),r=new _t,r.setAttribute("position",new We([0,0,0,0,0,1],3)),this.targetLine=new GA(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kF.setFromMatrixPosition(this.light.matrixWorld),$9.setFromMatrixPosition(this.light.target.matrixWorld),BF.subVectors($9,kF),this.lightPlane.lookAt($9),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt($9),this.targetLine.scale.z=BF.length()}},q9=new O,en=new Cm,z6=class extends ay{constructor(e){let t=new _t,n=new uf({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new We(r,3)),t.setAttribute("color",new We(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let c=new St(16755200),h=new St(16711680),u=new St(43775),d=new St(16777215),f=new St(3355443);this.setColors(c,h,u,d,f)}setColors(e,t,n,r,s){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,n=1,r=1;en.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bn("c",t,e,en,0,0,-1),bn("t",t,e,en,0,0,1),bn("n1",t,e,en,-n,-r,-1),bn("n2",t,e,en,n,-r,-1),bn("n3",t,e,en,-n,r,-1),bn("n4",t,e,en,n,r,-1),bn("f1",t,e,en,-n,-r,1),bn("f2",t,e,en,n,-r,1),bn("f3",t,e,en,-n,r,1),bn("f4",t,e,en,n,r,1),bn("u1",t,e,en,n*.7,r*1.1,-1),bn("u2",t,e,en,-n*.7,r*1.1,-1),bn("u3",t,e,en,0,r*2,-1),bn("cf1",t,e,en,-n,0,1),bn("cf2",t,e,en,n,0,1),bn("cf3",t,e,en,0,-r,1),bn("cf4",t,e,en,0,r,1),bn("cn1",t,e,en,-n,0,-1),bn("cn2",t,e,en,n,0,-1),bn("cn3",t,e,en,0,-r,-1),bn("cn4",t,e,en,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function bn(i,e,t,n,r,s,o){q9.set(r,s,o).unproject(n);let a=e[i];if(a!==void 0){let l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],q9.x,q9.y,q9.z)}}var k6=class extends ay{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new _t;s.setIndex(new Ot(n,1)),s.setAttribute("position",new We(r,3)),super(s,new uf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Zbe=class extends ay{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new _t;r.setAttribute("position",new We(t,3)),r.setAttribute("color",new We(n,3));let s=new uf({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){let r=new St,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:HY}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=HY);function X9(){return!0}function np(i,e){return i.length!==e.length||i.some((t,n)=>e[n]!==t)}var Qbe=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Kbe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Jbe={push:X9,pop:X9,shift:X9,unshift:X9,copyWithin:np,reverse:np,sort:np,splice:np,flat:np,fill:np};[...Qbe,...Kbe,...Object.keys(Jbe)];function Y9(i,e){if(i.size!==e.size)return!0;for(let t of i)if(!e.has(t))return!0;return!1}var gZ=["keys","values","entries"],vZ=new Set(["has","toString"]),ewe={add:Y9,clear:Y9,delete:Y9,forEach:Y9};[...vZ,...Object.keys(ewe),...gZ];function Z9(i,e){if(i.size!==e.size)return!0;let t;for(let[n,r]of i)if(t=e.get(n),t!==r||t===void 0&&!e.has(n))return!0;return!1}var twe=new Set([...vZ,"get"]),iwe={set:Z9,clear:Z9,delete:Z9,forEach:Z9};[...twe,...Object.keys(iwe),...gZ];var nwe=typeof global=="object"&&global&&global.Object===Object&&global,yZ=nwe,rwe=typeof self=="object"&&self&&self.Object===Object&&self,swe=yZ||rwe||Function("return this")(),J0=swe,owe=J0.Symbol,Ko=owe,xZ=Object.prototype,awe=xZ.hasOwnProperty,lwe=xZ.toString,Dg=Ko?Ko.toStringTag:void 0;function cwe(i){var e=awe.call(i,Dg),t=i[Dg];try{i[Dg]=void 0;var n=!0}catch{}var r=lwe.call(i);return n&&(e?i[Dg]=t:delete i[Dg]),r}var uwe=cwe,hwe=Object.prototype,dwe=hwe.toString;function fwe(i){return dwe.call(i)}var pwe=fwe,mwe="[object Null]",gwe="[object Undefined]",UF=Ko?Ko.toStringTag:void 0;function vwe(i){return i==null?i===void 0?gwe:mwe:UF&&UF in Object(i)?uwe(i):pwe(i)}var hf=vwe;function ywe(i){return i!=null&&typeof i=="object"}var ic=ywe,xwe="[object Symbol]";function _we(i){return typeof i=="symbol"||ic(i)&&hf(i)==xwe}var TD=_we;function bwe(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var _Z=bwe,wwe=Array.isArray,W0=wwe,Swe=1/0,VF=Ko?Ko.prototype:void 0,GF=VF?VF.toString:void 0;function bZ(i){if(typeof i=="string")return i;if(W0(i))return _Z(i,bZ)+"";if(TD(i))return GF?GF.call(i):"";var e=i+"";return e=="0"&&1/i==-Swe?"-0":e}var Awe=bZ;function Twe(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var qd=Twe;function Mwe(i){return i}var Ewe=Mwe,Cwe="[object AsyncFunction]",Dwe="[object Function]",Pwe="[object GeneratorFunction]",Lwe="[object Proxy]";function Iwe(i){if(!qd(i))return!1;var e=hf(i);return e==Dwe||e==Pwe||e==Cwe||e==Lwe}var wZ=Iwe,Owe=J0["__core-js_shared__"],zb=Owe,jF=function(){var i=/[^.]+$/.exec(zb&&zb.keys&&zb.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function Rwe(i){return!!jF&&jF in i}var Nwe=Rwe,Fwe=Function.prototype,zwe=Fwe.toString;function kwe(i){if(i!=null){try{return zwe.call(i)}catch{}try{return i+""}catch{}}return""}var df=kwe,Bwe=/[\\^$.*+?()[\]{}|]/g,Uwe=/^\[object .+?Constructor\]$/,Vwe=Function.prototype,Gwe=Object.prototype,jwe=Vwe.toString,Hwe=Gwe.hasOwnProperty,Wwe=RegExp("^"+jwe.call(Hwe).replace(Bwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $we(i){if(!qd(i)||Nwe(i))return!1;var e=wZ(i)?Wwe:Uwe;return e.test(df(i))}var qwe=$we;function Xwe(i,e){return i==null?void 0:i[e]}var Ywe=Xwe;function Zwe(i,e){var t=Ywe(i,e);return qwe(t)?t:void 0}var ff=Zwe,Qwe=ff(J0,"WeakMap"),$A=Qwe,HF=Object.create,Kwe=function(){function i(){}return function(e){if(!qd(e))return{};if(HF)return HF(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),Jwe=Kwe;function eSe(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var tSe=eSe;function iSe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var nSe=iSe,rSe=800,sSe=16,oSe=Date.now;function aSe(i){var e=0,t=0;return function(){var n=oSe(),r=sSe-(n-t);if(t=n,r>0){if(++e>=rSe)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var lSe=aSe;function cSe(i){return function(){return i}}var uSe=cSe,hSe=function(){try{var i=ff(Object,"defineProperty");return i({},"",{}),i}catch{}}(),B6=hSe,dSe=B6?function(i,e){return B6(i,"toString",{configurable:!0,enumerable:!1,value:uSe(e),writable:!0})}:Ewe,fSe=dSe,pSe=lSe(fSe),mSe=pSe;function gSe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var vSe=gSe,ySe=9007199254740991,xSe=/^(?:0|[1-9]\d*)$/;function _Se(i,e){var t=typeof i;return e=e??ySe,!!e&&(t=="number"||t!="symbol"&&xSe.test(i))&&i>-1&&i%1==0&&i<e}var MD=_Se;function bSe(i,e,t){e=="__proto__"&&B6?B6(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var SZ=bSe;function wSe(i,e){return i===e||i!==i&&e!==e}var ED=wSe,SSe=Object.prototype,ASe=SSe.hasOwnProperty;function TSe(i,e,t){var n=i[e];(!(ASe.call(i,e)&&ED(n,t))||t===void 0&&!(e in i))&&SZ(i,e,t)}var CD=TSe;function MSe(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n?n(t[a],i[a],a,t,i):void 0;l===void 0&&(l=i[a]),r?SZ(t,a,l):CD(t,a,l)}return t}var cy=MSe,WF=Math.max;function ESe(i,e,t){return e=WF(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,s=WF(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=t(o),tSe(i,this,a)}}var CSe=ESe,DSe=9007199254740991;function PSe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=DSe}var DD=PSe;function LSe(i){return i!=null&&DD(i.length)&&!wZ(i)}var AZ=LSe,ISe=Object.prototype;function OSe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||ISe;return i===t}var PD=OSe;function RSe(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var NSe=RSe,FSe="[object Arguments]";function zSe(i){return ic(i)&&hf(i)==FSe}var $F=zSe,TZ=Object.prototype,kSe=TZ.hasOwnProperty,BSe=TZ.propertyIsEnumerable,USe=$F(function(){return arguments}())?$F:function(i){return ic(i)&&kSe.call(i,"callee")&&!BSe.call(i,"callee")},LD=USe;function VSe(){return!1}var GSe=VSe,MZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qF=MZ&&typeof module=="object"&&module&&!module.nodeType&&module,jSe=qF&&qF.exports===MZ,XF=jSe?J0.Buffer:void 0,HSe=XF?XF.isBuffer:void 0,WSe=HSe||GSe,U6=WSe,$Se="[object Arguments]",qSe="[object Array]",XSe="[object Boolean]",YSe="[object Date]",ZSe="[object Error]",QSe="[object Function]",KSe="[object Map]",JSe="[object Number]",eAe="[object Object]",tAe="[object RegExp]",iAe="[object Set]",nAe="[object String]",rAe="[object WeakMap]",sAe="[object ArrayBuffer]",oAe="[object DataView]",aAe="[object Float32Array]",lAe="[object Float64Array]",cAe="[object Int8Array]",uAe="[object Int16Array]",hAe="[object Int32Array]",dAe="[object Uint8Array]",fAe="[object Uint8ClampedArray]",pAe="[object Uint16Array]",mAe="[object Uint32Array]",Oi={};Oi[aAe]=Oi[lAe]=Oi[cAe]=Oi[uAe]=Oi[hAe]=Oi[dAe]=Oi[fAe]=Oi[pAe]=Oi[mAe]=!0;Oi[$Se]=Oi[qSe]=Oi[sAe]=Oi[XSe]=Oi[oAe]=Oi[YSe]=Oi[ZSe]=Oi[QSe]=Oi[KSe]=Oi[JSe]=Oi[eAe]=Oi[tAe]=Oi[iAe]=Oi[nAe]=Oi[rAe]=!1;function gAe(i){return ic(i)&&DD(i.length)&&!!Oi[hf(i)]}var vAe=gAe;function yAe(i){return function(e){return i(e)}}var ID=yAe,EZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nv=EZ&&typeof module=="object"&&module&&!module.nodeType&&module,xAe=nv&&nv.exports===EZ,kb=xAe&&yZ.process,_Ae=function(){try{var i=nv&&nv.require&&nv.require("util").types;return i||kb&&kb.binding&&kb.binding("util")}catch{}}(),j1=_Ae,YF=j1&&j1.isTypedArray,bAe=YF?ID(YF):vAe,CZ=bAe,wAe=Object.prototype,SAe=wAe.hasOwnProperty;function AAe(i,e){var t=W0(i),n=!t&&LD(i),r=!t&&!n&&U6(i),s=!t&&!n&&!r&&CZ(i),o=t||n||r||s,a=o?NSe(i.length,String):[],l=a.length;for(var c in i)(e||SAe.call(i,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||MD(c,l)))&&a.push(c);return a}var DZ=AAe;function TAe(i,e){return function(t){return i(e(t))}}var PZ=TAe,MAe=PZ(Object.keys,Object),EAe=MAe,CAe=Object.prototype,DAe=CAe.hasOwnProperty;function PAe(i){if(!PD(i))return EAe(i);var e=[];for(var t in Object(i))DAe.call(i,t)&&t!="constructor"&&e.push(t);return e}var LAe=PAe;function IAe(i){return AZ(i)?DZ(i):LAe(i)}var OD=IAe;function OAe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var RAe=OAe,NAe=Object.prototype,FAe=NAe.hasOwnProperty;function zAe(i){if(!qd(i))return RAe(i);var e=PD(i),t=[];for(var n in i)n=="constructor"&&(e||!FAe.call(i,n))||t.push(n);return t}var kAe=zAe;function BAe(i){return AZ(i)?DZ(i,!0):kAe(i)}var RD=BAe,UAe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,VAe=/^\w*$/;function GAe(i,e){if(W0(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||TD(i)?!0:VAe.test(i)||!UAe.test(i)||e!=null&&i in Object(e)}var jAe=GAe,HAe=ff(Object,"create"),s3=HAe;function WAe(){this.__data__=s3?s3(null):{},this.size=0}var $Ae=WAe;function qAe(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var XAe=qAe,YAe="__lodash_hash_undefined__",ZAe=Object.prototype,QAe=ZAe.hasOwnProperty;function KAe(i){var e=this.__data__;if(s3){var t=e[i];return t===YAe?void 0:t}return QAe.call(e,i)?e[i]:void 0}var JAe=KAe,eTe=Object.prototype,tTe=eTe.hasOwnProperty;function iTe(i){var e=this.__data__;return s3?e[i]!==void 0:tTe.call(e,i)}var nTe=iTe,rTe="__lodash_hash_undefined__";function sTe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=s3&&e===void 0?rTe:e,this}var oTe=sTe;function Dm(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Dm.prototype.clear=$Ae;Dm.prototype.delete=XAe;Dm.prototype.get=JAe;Dm.prototype.has=nTe;Dm.prototype.set=oTe;var ZF=Dm;function aTe(){this.__data__=[],this.size=0}var lTe=aTe;function cTe(i,e){for(var t=i.length;t--;)if(ED(i[t][0],e))return t;return-1}var s7=cTe,uTe=Array.prototype,hTe=uTe.splice;function dTe(i){var e=this.__data__,t=s7(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():hTe.call(e,t,1),--this.size,!0}var fTe=dTe;function pTe(i){var e=this.__data__,t=s7(e,i);return t<0?void 0:e[t][1]}var mTe=pTe;function gTe(i){return s7(this.__data__,i)>-1}var vTe=gTe;function yTe(i,e){var t=this.__data__,n=s7(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var xTe=yTe;function Pm(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Pm.prototype.clear=lTe;Pm.prototype.delete=fTe;Pm.prototype.get=mTe;Pm.prototype.has=vTe;Pm.prototype.set=xTe;var o7=Pm,_Te=ff(J0,"Map"),o3=_Te;function bTe(){this.size=0,this.__data__={hash:new ZF,map:new(o3||o7),string:new ZF}}var wTe=bTe;function STe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var ATe=STe;function TTe(i,e){var t=i.__data__;return ATe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var a7=TTe;function MTe(i){var e=a7(this,i).delete(i);return this.size-=e?1:0,e}var ETe=MTe;function CTe(i){return a7(this,i).get(i)}var DTe=CTe;function PTe(i){return a7(this,i).has(i)}var LTe=PTe;function ITe(i,e){var t=a7(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var OTe=ITe;function Lm(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Lm.prototype.clear=wTe;Lm.prototype.delete=ETe;Lm.prototype.get=DTe;Lm.prototype.has=LTe;Lm.prototype.set=OTe;var l7=Lm,RTe="Expected a function";function ND(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(RTe);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=t.cache;if(s.has(r))return s.get(r);var o=i.apply(this,n);return t.cache=s.set(r,o)||s,o};return t.cache=new(ND.Cache||l7),t}ND.Cache=l7;var NTe=ND,FTe=500;function zTe(i){var e=NTe(i,function(n){return t.size===FTe&&t.clear(),n}),t=e.cache;return e}var kTe=zTe,BTe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,UTe=/\\(\\)?/g,VTe=kTe(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(BTe,function(t,n,r,s){e.push(r?s.replace(UTe,"$1"):n||t)}),e}),GTe=VTe;function jTe(i){return i==null?"":Awe(i)}var HTe=jTe;function WTe(i,e){return W0(i)?i:jAe(i,e)?[i]:GTe(HTe(i))}var Im=WTe,$Te=1/0;function qTe(i){if(typeof i=="string"||TD(i))return i;var e=i+"";return e=="0"&&1/i==-$Te?"-0":e}var c7=qTe;function XTe(i,e){e=Im(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[c7(e[t++])];return t&&t==n?i:void 0}var LZ=XTe;function YTe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var FD=YTe,QF=Ko?Ko.isConcatSpreadable:void 0;function ZTe(i){return W0(i)||LD(i)||!!(QF&&i&&i[QF])}var QTe=ZTe;function IZ(i,e,t,n,r){var s=-1,o=i.length;for(t||(t=QTe),r||(r=[]);++s<o;){var a=i[s];e>0&&t(a)?e>1?IZ(a,e-1,t,n,r):FD(r,a):n||(r[r.length]=a)}return r}var KTe=IZ;function JTe(i){var e=i==null?0:i.length;return e?KTe(i,1):[]}var eMe=JTe;function tMe(i){return mSe(CSe(i,void 0,eMe),i+"")}var OZ=tMe,iMe=PZ(Object.getPrototypeOf,Object),zD=iMe,nMe="[object Object]",rMe=Function.prototype,sMe=Object.prototype,RZ=rMe.toString,oMe=sMe.hasOwnProperty,aMe=RZ.call(Object);function lMe(i){if(!ic(i)||hf(i)!=nMe)return!1;var e=zD(i);if(e===null)return!0;var t=oMe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&RZ.call(t)==aMe}var cMe=lMe;function uMe(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=i[n+e];return s}var hMe=uMe;function dMe(){this.__data__=new o7,this.size=0}var fMe=dMe;function pMe(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var mMe=pMe;function gMe(i){return this.__data__.get(i)}var vMe=gMe;function yMe(i){return this.__data__.has(i)}var xMe=yMe,_Me=200;function bMe(i,e){var t=this.__data__;if(t instanceof o7){var n=t.__data__;if(!o3||n.length<_Me-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new l7(n)}return t.set(i,e),this.size=t.size,this}var wMe=bMe;function Om(i){var e=this.__data__=new o7(i);this.size=e.size}Om.prototype.clear=fMe;Om.prototype.delete=mMe;Om.prototype.get=vMe;Om.prototype.has=xMe;Om.prototype.set=wMe;var w5=Om;function SMe(i,e){return i&&cy(e,OD(e),i)}var AMe=SMe;function TMe(i,e){return i&&cy(e,RD(e),i)}var MMe=TMe,NZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,KF=NZ&&typeof module=="object"&&module&&!module.nodeType&&module,EMe=KF&&KF.exports===NZ,JF=EMe?J0.Buffer:void 0,ez=JF?JF.allocUnsafe:void 0;function CMe(i,e){if(e)return i.slice();var t=i.length,n=ez?ez(t):new i.constructor(t);return i.copy(n),n}var DMe=CMe;function PMe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}var LMe=PMe;function IMe(){return[]}var FZ=IMe,OMe=Object.prototype,RMe=OMe.propertyIsEnumerable,tz=Object.getOwnPropertySymbols,NMe=tz?function(i){return i==null?[]:(i=Object(i),LMe(tz(i),function(e){return RMe.call(i,e)}))}:FZ,kD=NMe;function FMe(i,e){return cy(i,kD(i),e)}var zMe=FMe,kMe=Object.getOwnPropertySymbols,BMe=kMe?function(i){for(var e=[];i;)FD(e,kD(i)),i=zD(i);return e}:FZ,zZ=BMe;function UMe(i,e){return cy(i,zZ(i),e)}var VMe=UMe;function GMe(i,e,t){var n=e(i);return W0(i)?n:FD(n,t(i))}var kZ=GMe;function jMe(i){return kZ(i,OD,kD)}var qA=jMe;function HMe(i){return kZ(i,RD,zZ)}var BZ=HMe,WMe=ff(J0,"DataView"),XA=WMe,$Me=ff(J0,"Promise"),YA=$Me,qMe=ff(J0,"Set"),ZA=qMe,iz="[object Map]",XMe="[object Object]",nz="[object Promise]",rz="[object Set]",sz="[object WeakMap]",oz="[object DataView]",YMe=df(XA),ZMe=df(o3),QMe=df(YA),KMe=df(ZA),JMe=df($A),Bh=hf;(XA&&Bh(new XA(new ArrayBuffer(1)))!=oz||o3&&Bh(new o3)!=iz||YA&&Bh(YA.resolve())!=nz||ZA&&Bh(new ZA)!=rz||$A&&Bh(new $A)!=sz)&&(Bh=function(i){var e=hf(i),t=e==XMe?i.constructor:void 0,n=t?df(t):"";if(n)switch(n){case YMe:return oz;case ZMe:return iz;case QMe:return nz;case KMe:return rz;case JMe:return sz}return e});var a3=Bh,eEe=Object.prototype,tEe=eEe.hasOwnProperty;function iEe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&tEe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var nEe=iEe,rEe=J0.Uint8Array,V6=rEe;function sEe(i){var e=new i.constructor(i.byteLength);return new V6(e).set(new V6(i)),e}var BD=sEe;function oEe(i,e){var t=e?BD(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var aEe=oEe,lEe=/\w*$/;function cEe(i){var e=new i.constructor(i.source,lEe.exec(i));return e.lastIndex=i.lastIndex,e}var uEe=cEe,az=Ko?Ko.prototype:void 0,lz=az?az.valueOf:void 0;function hEe(i){return lz?Object(lz.call(i)):{}}var dEe=hEe;function fEe(i,e){var t=e?BD(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var pEe=fEe,mEe="[object Boolean]",gEe="[object Date]",vEe="[object Map]",yEe="[object Number]",xEe="[object RegExp]",_Ee="[object Set]",bEe="[object String]",wEe="[object Symbol]",SEe="[object ArrayBuffer]",AEe="[object DataView]",TEe="[object Float32Array]",MEe="[object Float64Array]",EEe="[object Int8Array]",CEe="[object Int16Array]",DEe="[object Int32Array]",PEe="[object Uint8Array]",LEe="[object Uint8ClampedArray]",IEe="[object Uint16Array]",OEe="[object Uint32Array]";function REe(i,e,t){var n=i.constructor;switch(e){case SEe:return BD(i);case mEe:case gEe:return new n(+i);case AEe:return aEe(i,t);case TEe:case MEe:case EEe:case CEe:case DEe:case PEe:case LEe:case IEe:case OEe:return pEe(i,t);case vEe:return new n;case yEe:case bEe:return new n(i);case xEe:return uEe(i);case _Ee:return new n;case wEe:return dEe(i)}}var NEe=REe;function FEe(i){return typeof i.constructor=="function"&&!PD(i)?Jwe(zD(i)):{}}var zEe=FEe,kEe="[object Map]";function BEe(i){return ic(i)&&a3(i)==kEe}var UEe=BEe,cz=j1&&j1.isMap,VEe=cz?ID(cz):UEe,GEe=VEe,jEe="[object Set]";function HEe(i){return ic(i)&&a3(i)==jEe}var WEe=HEe,uz=j1&&j1.isSet,$Ee=uz?ID(uz):WEe,qEe=$Ee,XEe=1,YEe=2,ZEe=4,UZ="[object Arguments]",QEe="[object Array]",KEe="[object Boolean]",JEe="[object Date]",eCe="[object Error]",VZ="[object Function]",tCe="[object GeneratorFunction]",iCe="[object Map]",nCe="[object Number]",GZ="[object Object]",rCe="[object RegExp]",sCe="[object Set]",oCe="[object String]",aCe="[object Symbol]",lCe="[object WeakMap]",cCe="[object ArrayBuffer]",uCe="[object DataView]",hCe="[object Float32Array]",dCe="[object Float64Array]",fCe="[object Int8Array]",pCe="[object Int16Array]",mCe="[object Int32Array]",gCe="[object Uint8Array]",vCe="[object Uint8ClampedArray]",yCe="[object Uint16Array]",xCe="[object Uint32Array]",Ei={};Ei[UZ]=Ei[QEe]=Ei[cCe]=Ei[uCe]=Ei[KEe]=Ei[JEe]=Ei[hCe]=Ei[dCe]=Ei[fCe]=Ei[pCe]=Ei[mCe]=Ei[iCe]=Ei[nCe]=Ei[GZ]=Ei[rCe]=Ei[sCe]=Ei[oCe]=Ei[aCe]=Ei[gCe]=Ei[vCe]=Ei[yCe]=Ei[xCe]=!0;Ei[eCe]=Ei[VZ]=Ei[lCe]=!1;function S5(i,e,t,n,r,s){var o,a=e&XEe,l=e&YEe,c=e&ZEe;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!qd(i))return i;var h=W0(i);if(h){if(o=nEe(i),!a)return nSe(i,o)}else{var u=a3(i),d=u==VZ||u==tCe;if(U6(i))return DMe(i,a);if(u==GZ||u==UZ||d&&!r){if(o=l||d?{}:zEe(i),!a)return l?VMe(i,MMe(o,i)):zMe(i,AMe(o,i))}else{if(!Ei[u])return r?i:{};o=NEe(i,u,a)}}s||(s=new w5);var f=s.get(i);if(f)return f;s.set(i,o),qEe(i)?i.forEach(function(y){o.add(S5(y,e,t,y,i,s))}):GEe(i)&&i.forEach(function(y,g){o.set(g,S5(y,e,t,g,i,s))});var p=c?l?BZ:qA:l?RD:OD,m=h?void 0:p(i);return vSe(m||i,function(y,g){m&&(g=y,y=i[g]),CD(o,g,S5(y,e,t,g,i,s))}),o}var jZ=S5,_Ce=1,bCe=4;function wCe(i){return jZ(i,_Ce|bCe)}var u7=wCe,SCe="__lodash_hash_undefined__";function ACe(i){return this.__data__.set(i,SCe),this}var TCe=ACe;function MCe(i){return this.__data__.has(i)}var ECe=MCe;function G6(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new l7;++e<t;)this.add(i[e])}G6.prototype.add=G6.prototype.push=TCe;G6.prototype.has=ECe;var CCe=G6;function DCe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var PCe=DCe;function LCe(i,e){return i.has(e)}var ICe=LCe,OCe=1,RCe=2;function NCe(i,e,t,n,r,s){var o=t&OCe,a=i.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(i),h=s.get(e);if(c&&h)return c==e&&h==i;var u=-1,d=!0,f=t&RCe?new CCe:void 0;for(s.set(i,e),s.set(e,i);++u<a;){var p=i[u],m=e[u];if(n)var y=o?n(m,p,u,e,i,s):n(p,m,u,i,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(f){if(!PCe(e,function(g,v){if(!ICe(f,v)&&(p===g||r(p,g,t,n,s)))return f.push(v)})){d=!1;break}}else if(!(p===m||r(p,m,t,n,s))){d=!1;break}}return s.delete(i),s.delete(e),d}var HZ=NCe;function FCe(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var zCe=FCe;function kCe(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var BCe=kCe,UCe=1,VCe=2,GCe="[object Boolean]",jCe="[object Date]",HCe="[object Error]",WCe="[object Map]",$Ce="[object Number]",qCe="[object RegExp]",XCe="[object Set]",YCe="[object String]",ZCe="[object Symbol]",QCe="[object ArrayBuffer]",KCe="[object DataView]",hz=Ko?Ko.prototype:void 0,Bb=hz?hz.valueOf:void 0;function JCe(i,e,t,n,r,s,o){switch(t){case KCe:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case QCe:return!(i.byteLength!=e.byteLength||!s(new V6(i),new V6(e)));case GCe:case jCe:case $Ce:return ED(+i,+e);case HCe:return i.name==e.name&&i.message==e.message;case qCe:case YCe:return i==e+"";case WCe:var a=zCe;case XCe:var l=n&UCe;if(a||(a=BCe),i.size!=e.size&&!l)return!1;var c=o.get(i);if(c)return c==e;n|=VCe,o.set(i,e);var h=HZ(a(i),a(e),n,r,s,o);return o.delete(i),h;case ZCe:if(Bb)return Bb.call(i)==Bb.call(e)}return!1}var eDe=JCe,tDe=1,iDe=Object.prototype,nDe=iDe.hasOwnProperty;function rDe(i,e,t,n,r,s){var o=t&tDe,a=qA(i),l=a.length,c=qA(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:nDe.call(e,d)))return!1}var f=s.get(i),p=s.get(e);if(f&&p)return f==e&&p==i;var m=!0;s.set(i,e),s.set(e,i);for(var y=o;++u<l;){d=a[u];var g=i[d],v=e[d];if(n)var x=o?n(v,g,d,e,i,s):n(g,v,d,i,e,s);if(!(x===void 0?g===v||r(g,v,t,n,s):x)){m=!1;break}y||(y=d=="constructor")}if(m&&!y){var _=i.constructor,w=e.constructor;_!=w&&"constructor"in i&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(i),s.delete(e),m}var sDe=rDe,oDe=1,dz="[object Arguments]",fz="[object Array]",Q9="[object Object]",aDe=Object.prototype,pz=aDe.hasOwnProperty;function lDe(i,e,t,n,r,s){var o=W0(i),a=W0(e),l=o?fz:a3(i),c=a?fz:a3(e);l=l==dz?Q9:l,c=c==dz?Q9:c;var h=l==Q9,u=c==Q9,d=l==c;if(d&&U6(i)){if(!U6(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new w5),o||CZ(i)?HZ(i,e,t,n,r,s):eDe(i,e,l,t,n,r,s);if(!(t&oDe)){var f=h&&pz.call(i,"__wrapped__"),p=u&&pz.call(e,"__wrapped__");if(f||p){var m=f?i.value():i,y=p?e.value():e;return s||(s=new w5),r(m,y,t,n,s)}}return d?(s||(s=new w5),sDe(i,e,t,n,r,s)):!1}var cDe=lDe;function WZ(i,e,t,n,r){return i===e?!0:i==null||e==null||!ic(i)&&!ic(e)?i!==i&&e!==e:cDe(i,e,t,n,WZ,r)}var uDe=WZ;function hDe(i,e){return i!=null&&e in Object(i)}var dDe=hDe;function fDe(i,e,t){e=Im(e,i);for(var n=-1,r=e.length,s=!1;++n<r;){var o=c7(e[n]);if(!(s=i!=null&&t(i,o)))break;i=i[o]}return s||++n!=r?s:(r=i==null?0:i.length,!!r&&DD(r)&&MD(o,r)&&(W0(i)||LD(i)))}var pDe=fDe;function mDe(i,e){return i!=null&&pDe(i,e,dDe)}var gDe=mDe;function vDe(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var yDe=vDe;function xDe(i,e){return e.length<2?i:LZ(i,hMe(e,0,-1))}var _De=xDe;function bDe(i,e){return uDe(i,e)}var UD=bDe;function wDe(i,e){return e=Im(e,i),i=_De(i,e),i==null||delete i[c7(yDe(e))]}var SDe=wDe;function ADe(i){return cMe(i)?void 0:i}var TDe=ADe,MDe=1,EDe=2,CDe=4,DDe=OZ(function(i,e){var t={};if(i==null)return t;var n=!1;e=_Z(e,function(s){return s=Im(s,i),n||(n=s.length>1),s}),cy(i,BZ(i),t),n&&(t=jZ(t,MDe|EDe|CDe,TDe));for(var r=e.length;r--;)SDe(t,e[r]);return t}),QA=DDe;function PDe(i,e,t,n){if(!qd(i))return i;e=Im(e,i);for(var r=-1,s=e.length,o=s-1,a=i;a!=null&&++r<s;){var l=c7(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(r!=o){var h=a[l];c=n?n(h,l,a):void 0,c===void 0&&(c=qd(h)?h:MD(e[r+1])?[]:{})}CD(a,l,c),a=a[l]}return i}var LDe=PDe;function IDe(i,e,t){for(var n=-1,r=e.length,s={};++n<r;){var o=e[n],a=LZ(i,o);t(a,o)&&LDe(s,Im(o,i),a)}return s}var ODe=IDe;function RDe(i,e){return ODe(i,e,function(t,n){return gDe(i,n)})}var NDe=RDe,FDe=OZ(function(i,e){return i==null?{}:NDe(i,e)}),zDe=FDe,kDe=new Promise(i=>{}),Lr=class{modifyById(i,e){let t=this;if(t[i]===void 0)throw new Error("not expected");{let n={...t,[i]:e};return Object.setPrototypeOf(n,Lr.prototype),n}}add(i,e){var t;return((t=this.runOp({type:1,id:i,data:e}))==null?void 0:t.data)??this}runOp(i){let e=this;if(i.type===1){let t=e[i.id],n;t===void 0?n={type:2,id:i.id}:n={type:1,id:i.id,data:t};let{id:r,data:s}=i,o={...e,[r]:s};return Object.setPrototypeOf(o,Lr.prototype),{data:o,actual:i,reverse:n}}else if(i.type===2){let{id:t}=i,n=e[t];if(n===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,Lr.prototype),delete r[t],{data:r,actual:i,reverse:{type:1,id:t,data:n}}}}return null}};function VD(i){if(i.deepFreeze!==void 0){i.deepFreeze(i);return}let e=Object.getOwnPropertyNames(i);for(let t of e){let n=i[t];n&&typeof n=="object"&&VD(n)}return Object.freeze(i)}function BDe(i,e){let t=0;for(;t<i.length&&t<e.length;){if(i[t]<e[t])return-1;if(i[t]>e[t])return 1;t+=1}return t!==e.length?-1:t!==i.length?1:0}var $Z=class extends Error{};function Ub(i){let e={...i};return Object.setPrototypeOf(e,Object.getPrototypeOf(i)),e}function su(i,e,t){if(i===void 0?e===void 0?(i=0,e=10):i=e-10:e===void 0&&(e=i+10),i>e){let s=i;i=e,e=s}let n=[],r=1/(t+1);for(let s=0;s<t;s++){let o=i+(e-i)*(s+.75+Math.random()*.5)*r;n.push(o)}return n}function GD(i){return i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Uint32Array||i instanceof Int8Array||i instanceof Int16Array||i instanceof Int32Array||i instanceof Float32Array||i instanceof Float64Array}function UDe(){return typeof process<"u"}function qZ(i,e){for(let t of i)e(t.id,t.data)!==!0&&qZ(t.children,e)}function XZ(i,e){if(e(i.id,i.data)!==!0)for(let t of i.children)XZ(t,e)}var Ls=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ls.prototype)}deepFreeze(){let e=0;for(;e<this.length;)VD(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let n of e.children)this.fillCaches0(n,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}isDescendantOf(e,t){for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let n=this.get(e);n&&XZ(n,t)}}traverse(e){qZ(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let n=this.parent(e),r=this.childrenArray(n),s=r.findIndex(a=>a.id===e);if(s<0)throw new Error("not expected");let o=r[s];return r=[...r],r[s]={...o,data:t},this.modifyArrayBy(n,r)}}modifyArrayBy(e,t){let n=e,r=t;for(;n!==null;){let o=r,a=n;if(n=this.parent(n),n===void 0)throw new Error;r=this.childrenArray(n);let l=r.findIndex(c=>c.id===a);if(l<0)throw new Error;r=[...r],r[l]={...r[l],children:o}}Object.setPrototypeOf(r,Ls.prototype);let s=r;return s.fillCaches(),s}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let n of t)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(e){let{parent:t,fi:n,id:r,data:s,children:o}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,l=this.childrenArray(a),c={fi:n,id:r,data:s,children:o};return l=[...l,c],l.sort((h,u)=>h.fi-u.fi),e.localIndex=l.indexOf(c),{data:this.modifyArrayBy(a,l),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let n=this.parent(t);if(n===void 0)return null;let r=this.childrenArray(n),s=r.findIndex(a=>a.id===t);e.localIndex=s,r=[...r];let o=r.splice(s,1)[0];return{data:this.modifyArrayBy(n,r),actual:e,reverse:{type:7,...o,parent:n}}}}moveOp(e){let{parent:t,fi:n,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let d=t;for(;d!==null;){if(d===void 0)throw new Error;if(d===r)throw new $Z("cyclic tree");d=this.parent(d)}}let s=this.parent(r);if(s===void 0)return null;let o=s,a=this.childrenArray(s),l=a.findIndex(d=>d.id===r);a=[...a];let c=a.splice(l,1)[0],h=this.modifyArrayBy(s,a);s=t,a=h.childrenArray(s);let u=c.fi;return c={...c,fi:n},a=[...a,c],a.sort((d,f)=>d.fi-f.fi),e.localIndex=a.indexOf(c),h=h.modifyArrayBy(s,a),{data:h,actual:e,reverse:{type:9,parent:o,fi:u,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let n=null;for(let r of this.childrenArray(e)){if(r.id===t)return n;n=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let n=this.childrenArray(t),r=n.findIndex(s=>s.id===e)+1;if(r<n.length)return n[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let n=this.childrenArray(t),r=n.findIndex(s=>s.id===e)-1;return r>=0?this.traverseSortPrevious(n[r].id):t}}getAllSorted(e){let t=[];for(let n of e){let r=this.getWithSortKey(n.id);r!==void 0&&t.push({...n,...r})}t.sort((n,r)=>BDe(n.sortKey,r.sortKey));for(let n of t)delete n.sortKey;return t}getWithSortKey(e){var t=e;let n=[],r=this.get(t),s=r;if(r!==void 0){for(;t;)n.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...s,sortKey:n}}}insertBeforeHelper(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}insertAfterHelper(e,t,n){let r=this.childrenArray(e);if(t===null){if(r.length===0)return su(0,n,n);{let s=r[0].fi;return su(s-n,s,n)}}else{let s=this.get(t);if(s===void 0||this.parent(t)!==e)throw new Error("illegal args");let o=r.find(a=>a.fi>s.fi);if(o===void 0){let a=r[r.length-1].fi;return su(a,a+n,n)}else return su(s.fi,o.fi,n)}}},j6;(i=>{function e(t,n){if(n.type!==0)return null;if(Array.isArray(t)){let r=n.props,s={},o=[...t],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:n,reverse:{type:0,props:s}}:null}else{let r=n.props,s={},o={...t},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:n,reverse:{type:0,props:s}}:null}}i.runOp=e})(j6||(j6={}));var Yt=class extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,Yt.prototype)}deepFreeze(){let i=0;for(;i<this.length;)VD(this[i]),i++}fillCaches0(i){this.objCaches.set(i.id,i)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let i of this)this.fillCaches0(i)}}randomId(){this.fillCaches();let i=Array.from(this.objCaches.keys());if(i.length!==0)return i[Math.max(0,Math.floor(Math.random()*i.length)-1)]}data(i){var e;return(e=this.get(i))==null?void 0:e.data}get(i){return this.fillCaches(),this.objCaches.get(i)}modifyById(i,e){if(this.get(i)===void 0)throw new Error("not expected");{let t=this,n=t.findIndex(s=>s.id===i);if(n<0)throw new Error("not expected");let r=t[n];return t=[...t],t[n]={...r,data:e},this.modifyArrayBy(t)}}modifyArrayBy(i){Object.setPrototypeOf(i,Yt.prototype);let e=i;return UDe()||e.fillCaches(),e}runOp(i){switch(i.type){case 4:return this.addOp(i);case 5:return this.deleteOp(i);case 6:return this.moveOp(i)}return null}addOp(i){let{fi:e,id:t,data:n}=i,r=this,s={fi:e,id:t,data:n};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),i.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:i,reverse:{type:5,id:t}}}deleteOp(i){let{id:e}=i,t=this,n=t.findIndex(s=>s.id===e);if(n===-1)return null;i.localIndex=n,t=[...t];let r=t.splice(n,1)[0];return{data:this.modifyArrayBy(t),actual:i,reverse:{type:4,...r}}}moveOp(i){let{fi:e,id:t}=i,n=this;n=[...n];let r=n.findIndex(a=>a.id===t);if(r===-1)return null;let s=n[r].fi,o={...n[r],fi:e};return n[r]=o,n.sort((a,l)=>a.fi-l.fi),i.localIndex=n.indexOf(o),{data:this.modifyArrayBy(n),actual:i,reverse:{type:6,fi:s,id:t}}}previous(i){if(i===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let t of this){if(t.id===i)return e;e=t.id}return null}insertBeforeHelper(i,e){return this.insertAfterHelper(this.previous(i),e)}insertAfterHelper(i,e){let t=this;if(i===null){if(t.length===0)return su(0,e,e);{let n=t[0].fi;return su(n-e,n,e)}}else{let n=this.get(i);if(n===void 0)throw new Error("illegal args");let r=t.find(s=>s.fi>n.fi);if(r===void 0){let s=t[t.length-1].fi;return su(s,s+e,e)}else return su(n.fi,r.fi,e)}}};function H1(i){return i&&typeof i=="object"&&i instanceof Is}var Is=class{unusedFunOverridesTable(e){}runOp(e){let t=[],n=this,r=0,s={};for(;r<e.path.length;){if(t.push(n),n=n===void 0?void 0:n[e.path[r]],n!==void 0&&!H1(n))return null;r+=1}n=n?Ub(n):new Is;for(let[l,c]of Object.entries(e.props)){let h=n[l];s[l]=h,c===void 0?delete n[l]:n[l]=c}for(;r>0;){if(Object.keys(n).length===0){let l=t[r-1];l&&(n=Ub(l),delete n[e.path[r-1]])}else{let l=t[r-1];if(l){let c=Ub(l);c[e.path[r-1]]=n,n=c}else{let c=new Is;c[e.path[r-1]]=n,n=c}}r-=1}let o=Object.setPrototypeOf(n,Is.prototype),a={...e,props:s};return{data:o,actual:e,reverse:a}}},Td;(i=>{function e(r,s){return l3(r,s)??r}i.apply=e;function t(r,s){return HD(r,s)}i.merge=t;function n(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=z0.zoomOnce(l,a[o]),l===void 0)return s;if(!H1(l))return;o+=1}if(l===void 0)return s;if(H1(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=jD([s],l);return c?(console.log(c),c):s}else return s}i.filterOp=n})(Td||(Td={}));function jD(i,e){if(e===void 0)return;let t=!1,n=i.map(r=>{let s=r.id,o=l3(r.data,e[s]);if(t=t||o!==void 0,o===void 0&&(o=r.data),r.children){let a=jD(r.children,e);return a!==void 0?t=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(t)return n}function VDe(i,e){if(e===void 0)return;let t=!1,n=i.map(r=>{let s=r.id,o=l3(r.data,e[s]);return t=t||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(t)return Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n}function l3(i,e){if(!H1(e))return e;if(i instanceof Ls){let t=jD(i,e);return t!==void 0&&Object.setPrototypeOf(t,Object.getPrototypeOf(i)),t}else{if(i instanceof Yt)return VDe(i,e);if(Array.isArray(i)){let t=!1,n=i.map((r,s)=>{let o=l3(r,e[s]);return t=t||o!==void 0,o===void 0&&(o=r),o});return t?(Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n):void 0}else{if(i instanceof Is)return HD(i,e);if(i&&typeof i=="object"){let t={},n=!1;for(let[r,s]of Object.entries(i)){let o=l3(s,e[r]);n=n||o!==void 0,o===void 0&&(o=s),t[r]=o}return n?(Object.setPrototypeOf(t,Object.getPrototypeOf(i)),t):void 0}}}}function HD(i,e){if(i===void 0)return e;if(e===void 0)return i;if(!H1(e))return e;if(!H1(i))return Td.apply(i,e);let t=new Set;for(let r of Object.keys(i))t.add(r);for(let r of Object.keys(e))t.add(r);let n=new Is;for(let r of t){let s=HD(i===void 0?void 0:i[r],e===void 0?void 0:e[r]);n[r]=s}return n}function GDe(i,e){let t={cur:[],result:[],len:0};return i=c3(i,e,t)??i,[i,t.result]}function H6(i,e){return i===null?null:(i.cur[i.len]=e,i.len+=1,i)}function W6(i){i&&(i.len-=1)}function jDe(i){if(i===null)return null;i.result.push(i.cur.slice(0,i.len))}function YZ(i,e,t){let n=!1,r=i.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(n=!0,o=a,t!==null))throw new Error("not supported");let l=c3(s.data,e,H6(t,o));W6(t),n=n||l!==void 0,l===void 0&&(l=s.data);let c=YZ(s.children,e,t);return c!==void 0?n=!0:c=s.children,{...s,id:o,data:l,children:c}});if(n)return r}function HDe(i,e,t){let n=!1,r=i.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(n=!0,o=a,t!==null))throw new Error("not supported");let l=c3(s.data,e,H6(t,o));return W6(t),n=n||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(n)return Object.setPrototypeOf(r,Object.getPrototypeOf(i)),r}function c3(i,e,t){if(i instanceof Ls){let n=YZ(i,e,t);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n}else{if(i instanceof Yt)return HDe(i,e,t);if(Array.isArray(i)){let n=!1,r=i.map((s,o)=>{let a=c3(s,e,H6(t,o));return W6(t),n=n||a!==void 0,a===void 0&&(a=s),a});return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(i)),r):void 0}else if(i&&typeof i=="object"&&!GD(i)){let n={},r=!1;for(let[s,o]of Object.entries(i))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(t!==null)throw new Error("not supported");r=!0,s=a}let l=c3(o,e,H6(t,s));W6(t),r=r||l!==void 0,l===void 0&&(l=o),n[s]=l}else n[s]=o;return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n):void 0}else if(typeof i=="string"){let n=e[i];if(n!==void 0){if(i.length!==36)throw new Error("for now you should only call this method when the key is a uuid");jDe(t)}return n}else return}}var KA;(i=>{function e(t,n){let r=z0.zoom(n,t.path);if(typeof r=="object"){let s={};for(let o of Object.keys(t.props))s[o]=r[o];return{...t,props:s}}else return{...t,props:{}}}i.replaceProps=e})(KA||(KA={}));var eo;(i=>{function e(l,c){return{...l,path:l.path.slice(c)}}i.drop=e;function t(l,c){var h;return((h=n(l,c))==null?void 0:h.data)??l}i.applySimple=t;function n(l,c){var d,f;let h=c.path;for(var u=[];;){let p;if(l instanceof Is&&c.type===0&&(p=l.runOp({...c,path:h.slice(u.length)}),p===null&&(p=void 0)),u.length===h.length&&(l instanceof Ls||l instanceof Yt||l instanceof Lr?p=l.runOp(c):p=j6.runOp(l,c)),p!==void 0)if(p!==null){let g=p.data;for(let v=u.length-1;v>=0;v--){let x=h[v],_=u[v];if(_ instanceof Ls){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Yt){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Lr){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Is){let w={..._,[x]:g};g=Object.setPrototypeOf(w,Is.prototype)}else if(typeof _=="object")if(Array.isArray(_)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let w=g;g=[..._],g[x]=w}else g={..._,[x]:g};else return null}return{data:g,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let m=h[u.length],y;if(l instanceof Ls){if(typeof m=="number")throw new Error("");y=(d=l.get(m))==null?void 0:d.data}else if(l instanceof Yt){if(typeof m=="number")throw new Error("");y=(f=l.get(m))==null?void 0:f.data}else l!==null&&(y=l[m]);if(y!==void 0)u.push(l),l=y;else return null}}i.apply=n;function r(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}i.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}i.pathEq=s;function o(l,c){return r(l.path,c.path)}i.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}i.subsumed=a})(eo||(eo={}));var mz;(i=>{function e(){return[]}i.empty=e;function t(c,h){let u=[];for(let d of c){let[f,...p]=d.path;f===h&&u.push({...d,path:p})}return u}i.removePrefix=t;function n(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}i.addPrefix=n;function r(c,h){return[...c,...h]}i.concat=r;function s(c,h){return[...c.filter(u=>!h.some(d=>eo.subsumed(u,d))),...h]}i.compress=s;function o(c,h){return c.every(u=>h.every(d=>eo.commutative(u,d)))}i.commutative=o;function a(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}i.applyAll=a;function l(c,h){var u=c;let d=[],f=[];for(let p of h)try{if(p.type===3){let m=z0.zoom(u,[...p.path,p.id]),y=eo.apply(u,{...p,type:2});if(y!==null){u=y.data;let[g,v]=GDe(u,{[p.id]:m});u=g;for(let x of v){let _=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[_]:m}}),f.push({type:0,path:x,props:{[_]:p.id}})}f.push(y.reverse),d.push(y.actual)}}else{let m=eo.apply(u,p);m!==null&&(d.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof $Z)return null;throw m}return{data:u,actual:d,reverse:f.reverse()}}i.apply=l})(mz||(mz={}));var ZZ=Symbol(),WDe=Symbol(),h7=Symbol(),uy=class{reportOp(e,t,n=[]){let r=this;if(t===null)return;r._current=t.data;let s=n;for(;!(r instanceof KZ);){let o=r._path,a=r._current;if(o!==""&&s.splice(0,0,o),r=r._parent,r===null)return;r.update(o,a)}r.push(s,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let n=t[h7];n&&n(),delete this._children[e]}}}},$De=class extends uy{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,j6.runOp(this._current,e),e.path)}},qDe=class extends uy{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Lr.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},QZ={get(i,e){if(e===h7)return()=>{i._parent=null};if(e===ZZ)return i._current;if(e===WDe)return i;let{_current:t,_children:n}=i;if(e==="push"&&Array.isArray(t))throw new Error("not supported to expand array");let r=n===void 0?void 0:n[e];if(r!==void 0)return r;let s=t[e],o=d7(i,e,s);return o!==s?(n===void 0&&(n={},i._children=n),n[e]=o,o):s},has(i,e){return e in i._current},ownKeys(i){return Reflect.ownKeys(i._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(i){return Object.getPrototypeOf(i._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(i,e){let t=i._current,n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:t[e]}}},XDe={...QZ,set(i,e,t){let n={type:0,props:{[e]:QDe(t)??t}};return i.deleteChildren(e),i.runOp(n),!0},deleteProperty(i,e){let t={type:0,props:{[e]:void 0}};return i.deleteChildren(e),i.runOp(t),!0}},YDe={...QZ,set(i,e,t){return t===void 0?this.deleteProperty(i,e):(i.deleteChildren(e),i.runOp({type:1,id:e,data:t})),!0},deleteProperty(i,e){return i.runOp({type:2,id:e}),!0}},WD=class extends uy{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[h7]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,n)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:n}=this,r=n===void 0?void 0:n[e];if(r!==void 0)return r;let s=(a=t.get(e))==null?void 0:a.data,o=d7(this,e,s);return o!==s?(n===void 0&&(n={},this._children=n),n[e]=o,o):s}add(e,t,n,r,s){this.runOp({type:7,parent:e,fi:t,id:n,data:r,children:s})}move(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}insertAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let s=0;s<n.length;s++){let o=n[s];this.add(e,r[s],o.id,o.data,o.children)}}insertBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let s=0;s<n.length;s++){let o=n[s];this.add(e,r[s],o.id,o.data,o.children)}}moveAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let s=0;s<n.length;s++){let o=n[s];this.move(e,r[s],o)}}moveBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let s=0;s<n.length;s++){let o=n[s];this.move(e,r[s],o)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},$D=class extends uy{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[h7]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let n=0;n<t;n++){let r=this._current[n].id,s=this._current[n].fi;e(this.data(this._current[n].id),r,s)}}find(e){let t=this.length;for(let n=0;n<t;n++){let r=this._current[n].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:n}=this,r=n===void 0?void 0:n[e];if(r!==void 0)return r;let s=(a=t.get(e))==null?void 0:a.data,o=d7(this,e,s);return o!==s?(n===void 0&&(n={},this._children=n),n[e]=o,o):s}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(n[r],s.id,s.data)}}insertBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(n[r],s.id,s.data)}}moveAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(n[r],s)}}moveBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(n[r],s)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function Vb(i,e,t){if(i.length>0){let n=i[i.length-1];if(n.type===0&&e.type===0&&z0.equal(n.path,t)){Object.assign(n.props,e.props);return}}i.push({...e,path:t})}var KZ=class extends uy{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,n,r){Vb(this.ts,t,e),Vb(this.actual,n,e),Vb(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function d7(i,e,t){return t instanceof Ls?new WD(i,e,t):t instanceof Yt?new $D(i,e,t):t instanceof Lr?new Proxy(new qDe(i,e,t),YDe):t!==null&&typeof t=="object"?GD(t)?t:new Proxy(new $De(i,e,t),XDe):t}function ZDe(i){let e=new KZ(i);return[d7(e,"",i),e]}function $6(i,e){let[t,n]=ZDe(i);return e(t),n.result()}function QDe(i){return i instanceof WD||i instanceof $D?i._current:i!==null&&typeof i=="object"?i[ZZ]:i}var z0;(i=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}i.equal=e;function t(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}i.removeOverridden=t;function n(s,o){if((s instanceof Ls||s instanceof WD)&&typeof o=="string"||(s instanceof Yt||s instanceof $D)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}i.zoomOnce=n;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=n(s,o[a]),a+=1;return s}i.zoom=r})(z0||(z0={}));function KDe(i,e){let t=[];if(e.length===i.length)for(var n=0;n<i.length;){if(e[n]==="*")t.push(i[n]);else if(i[n]!==e[n])return null;n+=1}else return null;return t}function Qc(i,e){let t=[];if(e.length<=i.length)for(var n=0;n<e.length;){if(e[n]==="*")t.push(i[n]);else if(i[n]!==e[n])return null;n+=1}else return null;return t}var JZ=class{},gz=class extends JZ{constructor(e){super(),this.id=e}},vz=class extends JZ{constructor(e){super(),this.data=e}},JA;try{JA=new TextDecoder}catch{}var Ue,Du,he=0,bs={},qt,ou,Ao=0,g0=0,qs,Gl,hs=[],ei,yz={useRecords:!1,mapsAsObjects:!0},eQ=class{},tQ=new eQ;tQ.name="MessagePack 0xC1";var W1=!1,q6=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Ue)return aQ(()=>(tT(),this?this.unpack(e,t):q6.prototype.unpack.call(yz,e,t)));Du=t>-1?t:e.length,he=0,g0=0,ou=null,qs=null,Ue=e;try{ei=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw Ue=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof q6){if(bs=this,this.structures)return qt=this.structures,K9();(!qt||qt.length>0)&&(qt=[])}else bs=yz,(!qt||qt.length>0)&&(qt=[]);return K9()}unpackMultiple(e,t){let n,r=0;try{W1=!0;let s=e.length,o=this?this.unpack(e,s):p7.unpack(e,s);if(t){for(t(o);he<s;)if(r=he,t(K9())===!1)return}else{for(n=[o];he<s;)r=he,n.push(K9());return n}}catch(s){throw s.lastPosition=r,s.values=n,s}finally{W1=!1,tT()}}_mergeStructures(e,t){e=e||[];for(let n=0,r=e.length;n<r;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let r=e[n],s=t[n];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[n]=r),e[n]=s)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function K9(){try{if(!bs.trusted&&!W1){let e=qt.sharedLength||0;e<qt.length&&(qt.length=e)}let i=nn();if(he==Du)qt.restoreStructures&&xz(),qt=null,Ue=null,Gl&&(Gl=null);else if(he>Du){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!W1)throw new Error("Data read, but end of buffer not reached");return i}catch(i){throw qt.restoreStructures&&xz(),tT(),(i instanceof RangeError||i.message.startsWith("Unexpected end of buffer"))&&(i.incomplete=!0),i}}function xz(){for(let i in qt.restoreStructures)qt[i]=qt.restoreStructures[i];qt.restoreStructures=null}function nn(){let i=Ue[he++];if(i<160)if(i<128){if(i<64)return i;{let e=qt[i&63]||bs.getStructures&&iQ()[i&63];return e?(e.read||(e.read=qD(e,i&63)),e.read()):i}}else if(i<144)if(i-=128,bs.mapsAsObjects){let e={};for(let t=0;t<i;t++)e[rQ()]=nn();return e}else{let e=new Map;for(let t=0;t<i;t++)e.set(nn(),nn());return e}else{i-=144;let e=new Array(i);for(let t=0;t<i;t++)e[t]=nn();return e}else if(i<192){let e=i-160;if(g0>=he)return ou.slice(he-Ao,(he+=e)-Ao);if(g0==0&&Du<140){let t=e<16?XD(e):nQ(e);if(t!=null)return t}return eT(e)}else{let e;switch(i){case 192:return null;case 193:return qs?(e=nn(),e>0?qs[1].slice(qs.position1,qs.position1+=e):qs[0].slice(qs.position0,qs.position0-=e)):tQ;case 194:return!1;case 195:return!0;case 196:return Gb(Ue[he++]);case 197:return e=ei.getUint16(he),he+=2,Gb(e);case 198:return e=ei.getUint32(he),he+=4,Gb(e);case 199:return Dh(Ue[he++]);case 200:return e=ei.getUint16(he),he+=2,Dh(e);case 201:return e=ei.getUint32(he),he+=4,Dh(e);case 202:if(e=ei.getFloat32(he),bs.useFloat32>2){let t=YD[(Ue[he]&127)<<1|Ue[he+1]>>7];return he+=4,(t*e+(e>0?.5:-.5)>>0)/t}return he+=4,e;case 203:return e=ei.getFloat64(he),he+=8,e;case 204:return Ue[he++];case 205:return e=ei.getUint16(he),he+=2,e;case 206:return e=ei.getUint32(he),he+=4,e;case 207:return bs.int64AsNumber?(e=ei.getUint32(he)*4294967296,e+=ei.getUint32(he+4)):e=ei.getBigUint64(he),he+=8,e;case 208:return ei.getInt8(he++);case 209:return e=ei.getInt16(he),he+=2,e;case 210:return e=ei.getInt32(he),he+=4,e;case 211:return bs.int64AsNumber?(e=ei.getInt32(he)*4294967296,e+=ei.getUint32(he+4)):e=ei.getBigInt64(he),he+=8,e;case 212:if(e=Ue[he++],e==114)return Az(Ue[he++]&63);{let t=hs[e];if(t)return t.read?(he++,t.read(nn())):t.noBuffer?(he++,t()):t(Ue.subarray(he,++he));throw new Error("Unknown extension "+e)}case 213:return e=Ue[he],e==114?(he++,Az(Ue[he++]&63,Ue[he++])):Dh(2);case 214:return Dh(4);case 215:return Dh(8);case 216:return Dh(16);case 217:return e=Ue[he++],g0>=he?ou.slice(he-Ao,(he+=e)-Ao):ePe(e);case 218:return e=ei.getUint16(he),he+=2,g0>=he?ou.slice(he-Ao,(he+=e)-Ao):tPe(e);case 219:return e=ei.getUint32(he),he+=4,g0>=he?ou.slice(he-Ao,(he+=e)-Ao):iPe(e);case 220:return e=ei.getUint16(he),he+=2,bz(e);case 221:return e=ei.getUint32(he),he+=4,bz(e);case 222:return e=ei.getUint16(he),he+=2,wz(e);case 223:return e=ei.getUint32(he),he+=4,wz(e);default:if(i>=224)return i-256;if(i===void 0){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+i)}}}var JDe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function qD(i,e){function t(){if(t.count++>2){let r=i.read=new Function("r","return function(){return {"+i.map(s=>JDe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(nn);return i.highByte===0&&(i.read=_z(e,i.read)),r()}let n={};for(let r=0,s=i.length;r<s;r++){let o=i[r];n[o]=nn()}return n}return t.count=0,i.highByte===0?_z(e,t):t}var _z=(i,e)=>function(){let t=Ue[he++];if(t===0)return e();let n=i<32?-(i+(t<<5)):i+(t<<5),r=qt[n]||iQ()[n];if(!r)throw new Error("Record id is not defined for "+n);return r.read||(r.read=qD(r,i)),r.read()};function iQ(){let i=aQ(()=>(Ue=null,bs.getStructures()));return qt=bs._mergeStructures(i,qt)}var eT=f7,ePe=f7,tPe=f7,iPe=f7;function f7(i){let e;if(i<16&&(e=XD(i)))return e;if(i>64&&JA)return JA.decode(Ue.subarray(he,he+=i));let t=he+i,n=[];for(e="";he<t;){let r=Ue[he++];if(!(r&128))n.push(r);else if((r&224)===192){let s=Ue[he++]&63;n.push((r&31)<<6|s)}else if((r&240)===224){let s=Ue[he++]&63,o=Ue[he++]&63;n.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=Ue[he++]&63,o=Ue[he++]&63,a=Ue[he++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(r);n.length>=4096&&(e+=nr.apply(String,n),n.length=0)}return n.length>0&&(e+=nr.apply(String,n)),e}function bz(i){let e=new Array(i);for(let t=0;t<i;t++)e[t]=nn();return e}function wz(i){if(bs.mapsAsObjects){let e={};for(let t=0;t<i;t++)e[rQ()]=nn();return e}else{let e=new Map;for(let t=0;t<i;t++)e.set(nn(),nn());return e}}var nr=String.fromCharCode;function nQ(i){let e=he,t=new Array(i);for(let n=0;n<i;n++){let r=Ue[he++];if((r&128)>0){he=e;return}t[n]=r}return nr.apply(String,t)}function XD(i){if(i<4)if(i<2){if(i===0)return"";{let e=Ue[he++];if((e&128)>1){he-=1;return}return nr(e)}}else{let e=Ue[he++],t=Ue[he++];if((e&128)>0||(t&128)>0){he-=2;return}if(i<3)return nr(e,t);let n=Ue[he++];if((n&128)>0){he-=3;return}return nr(e,t,n)}else{let e=Ue[he++],t=Ue[he++],n=Ue[he++],r=Ue[he++];if((e&128)>0||(t&128)>0||(n&128)>0||(r&128)>0){he-=4;return}if(i<6){if(i===4)return nr(e,t,n,r);{let s=Ue[he++];if((s&128)>0){he-=5;return}return nr(e,t,n,r,s)}}else if(i<8){let s=Ue[he++],o=Ue[he++];if((s&128)>0||(o&128)>0){he-=6;return}if(i<7)return nr(e,t,n,r,s,o);let a=Ue[he++];if((a&128)>0){he-=7;return}return nr(e,t,n,r,s,o,a)}else{let s=Ue[he++],o=Ue[he++],a=Ue[he++],l=Ue[he++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){he-=8;return}if(i<10){if(i===8)return nr(e,t,n,r,s,o,a,l);{let c=Ue[he++];if((c&128)>0){he-=9;return}return nr(e,t,n,r,s,o,a,l,c)}}else if(i<12){let c=Ue[he++],h=Ue[he++];if((c&128)>0||(h&128)>0){he-=10;return}if(i<11)return nr(e,t,n,r,s,o,a,l,c,h);let u=Ue[he++];if((u&128)>0){he-=11;return}return nr(e,t,n,r,s,o,a,l,c,h,u)}else{let c=Ue[he++],h=Ue[he++],u=Ue[he++],d=Ue[he++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){he-=12;return}if(i<14){if(i===12)return nr(e,t,n,r,s,o,a,l,c,h,u,d);{let f=Ue[he++];if((f&128)>0){he-=13;return}return nr(e,t,n,r,s,o,a,l,c,h,u,d,f)}}else{let f=Ue[he++],p=Ue[he++];if((f&128)>0||(p&128)>0){he-=14;return}if(i<15)return nr(e,t,n,r,s,o,a,l,c,h,u,d,f,p);let m=Ue[he++];if((m&128)>0){he-=15;return}return nr(e,t,n,r,s,o,a,l,c,h,u,d,f,p,m)}}}}}function Gb(i){return bs.copyBuffers?Uint8Array.prototype.slice.call(Ue,he,he+=i):Ue.subarray(he,he+=i)}function Dh(i){let e=Ue[he++];if(hs[e])return hs[e](Ue.subarray(he,he+=i));throw new Error("Unknown extension type "+e)}var Sz=new Array(4096);function rQ(){let i=Ue[he++];if(i>=160&&i<192){if(i=i-160,g0>=he)return ou.slice(he-Ao,(he+=i)-Ao);if(!(g0==0&&Du<180))return eT(i)}else return he--,nn();let e=(i<<5^(i>1?ei.getUint16(he):i>0?Ue[he]:0))&4095,t=Sz[e],n=he,r=he+i-3,s,o=0;if(t&&t.bytes==i){for(;n<r;){if(s=ei.getUint32(n),s!=t[o++]){n=1879048192;break}n+=4}for(r+=3;n<r;)if(s=Ue[n++],s!=t[o++]){n=1879048192;break}if(n===r)return he=n,t.string;r-=3,n=he}for(t=[],Sz[e]=t,t.bytes=i;n<r;)s=ei.getUint32(n),t.push(s),n+=4;for(r+=3;n<r;)s=Ue[n++],t.push(s);let a=i<16?XD(i):nQ(i);return a!=null?t.string=a:t.string=eT(i)}var Az=(i,e)=>{var t=nn();let n=i;e!==void 0&&(i=i<32?-((e<<5)+i):(e<<5)+i,t.highByte=e);let r=qt[i];return r&&r.isShared&&((qt.restoreStructures||(qt.restoreStructures=[]))[i]=r),qt[i]=t,t.read=qD(t,n),t.read()},sQ=typeof self=="object"?self:global;hs[0]=()=>{};hs[0].noBuffer=!0;hs[101]=()=>{let i=nn();return(sQ[i[0]]||Error)(i[1])};hs[105]=i=>{let e=ei.getUint32(he-4);Gl||(Gl=new Map);let t=Ue[he],n;t>=144&&t<160||t==220||t==221?n=[]:n={};let r={target:n};Gl.set(e,r);let s=nn();return r.used?Object.assign(n,s):(r.target=s,s)};hs[112]=i=>{let e=ei.getUint32(he-4),t=Gl.get(e);return t.used=!0,t.target};hs[115]=()=>new Set(nn());var oQ=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(i=>i+"Array");hs[116]=i=>{let e=i[0],t=oQ[e];if(!t)throw new Error("Could not find typed array for code "+e);return new sQ[t](Uint8Array.prototype.slice.call(i,1).buffer)};hs[120]=()=>{let i=nn();return new RegExp(i[0],i[1])};hs[98]=i=>{let e=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3],t=he;he+=e-4,qs=[nn(),nn()],qs.position0=0,qs.position1=0;let n=he;he=t;try{return nn()}finally{he=n}};hs[255]=i=>i.length==4?new Date((i[0]*16777216+(i[1]<<16)+(i[2]<<8)+i[3])*1e3):i.length==8?new Date(((i[0]<<22)+(i[1]<<14)+(i[2]<<6)+(i[3]>>2))/1e6+((i[3]&3)*4294967296+i[4]*16777216+(i[5]<<16)+(i[6]<<8)+i[7])*1e3):i.length==12?new Date(((i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3])/1e6+((i[4]&128?-281474976710656:0)+i[6]*1099511627776+i[7]*4294967296+i[8]*16777216+(i[9]<<16)+(i[10]<<8)+i[11])*1e3):new Date("invalid");function aQ(i){let e=Du,t=he,n=Ao,r=g0,s=ou,o=Gl,a=qs,l=new Uint8Array(Ue.slice(0,Du)),c=qt,h=qt.slice(0,qt.length),u=bs,d=W1,f=i();return Du=e,he=t,Ao=n,g0=r,ou=s,Gl=o,qs=a,Ue=l,W1=d,qt=c,qt.splice(0,qt.length,...h),bs=u,ei=new DataView(Ue.buffer,Ue.byteOffset,Ue.byteLength),f}function tT(){Ue=null,Gl=null,qt=null}function nPe(i){i.unpack?hs[i.type]=i.unpack:hs[i.type]=i}var YD=new Array(147);for(let i=0;i<256;i++)YD[i]=+("1e"+Math.floor(45.15-i*.30103));var p7=new q6({useRecords:!1});p7.unpack;p7.unpackMultiple;p7.unpack;var rPe=new Float32Array(1);new Uint8Array(rPe.buffer,0,4);var A5;try{A5=new TextEncoder}catch{}var X6,ZD,m7=typeof Buffer<"u",jb=m7?Buffer.allocUnsafeSlow:Uint8Array,lQ=m7?Buffer:Uint8Array,Tz=m7?4294967296:2144337920,Te,wn,me=0,Wa,$a=null,sPe=/[\u0080-\uFFFF]/,Pg=Symbol("record-id"),cQ=class extends q6{constructor(i){super(i),this.offset=0;let e,t,n,r,s,o=0,a=lQ.prototype.utf8Write?function(b,S,A){return Te.utf8Write(b,S,A)}:A5&&A5.encodeInto?function(b,S){return A5.encodeInto(b,Te.subarray(S)).written}:!1,l=this;i||(i={});let c=i&&i.sequential,h=i.structures||i.saveStructures,u=i.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=i.maxOwnStructures;d==null&&(d=h?32:64),c&&!i.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,p=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],g=0,v=0;this.pack=this.encode=function(b,S){if(Te||(Te=new jb(8192),wn=new DataView(Te.buffer,0,8192),me=0),Wa=Te.length-10,Wa-me<2048?(Te=new jb(Te.length),wn=new DataView(Te.buffer,0,Te.length),Wa=Te.length-10,me=0):me=me+7&2147483640,e=me,s=l.structuredClone?new Map:null,l.bundleStrings?($a=["",""],Te[me++]=214,Te[me++]=98,$a.position=me-e,me+=4):$a=null,t=l.structures,t){t.uninitialized&&(t=l._mergeStructures(l.getStructures()));let A=t.sharedLength||0;if(A>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+t.sharedLength);if(!t.transitions){t.transitions=Object.create(null);for(let E=0;E<A;E++){let T=t[E];if(!T)continue;let M,C=t.transitions;for(let D=0,P=T.length;D<P;D++){let I=T[D];M=C[I],M||(M=C[I]=Object.create(null)),C=M}C[Pg]=E+64}o=A}c||(t.nextId=A+64)}n&&(n=!1),r=t||[];try{if(x(b),$a){wn.setUint32($a.position+e,me-$a.position-e);let A=$a;$a=null,x(A[0]),x(A[1])}if(l.offset=me,s&&s.idsToInsert){me+=s.idsToInsert.length*6,me>Wa&&w(me),l.offset=me;let A=aPe(Te.subarray(e,me),s.idsToInsert);return s=null,A}return S&lPe?(Te.start=e,Te.end=me,Te):Te.subarray(e,me)}finally{if(t){if(v<10&&v++,g>1e4)t.transitions=null,v=0,g=0,y.length>0&&(y=[]);else if(y.length>0&&!c){for(let A=0,E=y.length;A<E;A++)y[A][Pg]=0;y=[]}if(n&&l.saveStructures){let A=t.sharedLength||u;t.length>A&&(t=t.slice(0,A));let E=Te.subarray(e,me);return l.saveStructures(t,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(o=A,E)}}S&cPe&&(me=e)}};let x=b=>{me>Wa&&(Te=w(me));var S=typeof b,A;if(S==="string"){let E=b.length;if($a&&E>=8&&E<4096){let C=sPe.test(b);$a[C?0:1]+=b,Te[me++]=193,x(C?-E:E);return}let T;E<32?T=1:E<256?T=2:E<65536?T=3:T=5;let M=E*3;if(me+M>Wa&&(Te=w(me+M)),E<64||!a){let C,D,P,I=me+T;for(C=0;C<E;C++)D=b.charCodeAt(C),D<128?Te[I++]=D:D<2048?(Te[I++]=D>>6|192,Te[I++]=D&63|128):(D&64512)===55296&&((P=b.charCodeAt(C+1))&64512)===56320?(D=65536+((D&1023)<<10)+(P&1023),C++,Te[I++]=D>>18|240,Te[I++]=D>>12&63|128,Te[I++]=D>>6&63|128,Te[I++]=D&63|128):(Te[I++]=D>>12|224,Te[I++]=D>>6&63|128,Te[I++]=D&63|128);A=I-me-T}else A=a(b,me+T,M);A<32?Te[me++]=160|A:A<256?(T<2&&Te.copyWithin(me+2,me+1,me+1+A),Te[me++]=217,Te[me++]=A):A<65536?(T<3&&Te.copyWithin(me+3,me+2,me+2+A),Te[me++]=218,Te[me++]=A>>8,Te[me++]=A&255):(T<5&&Te.copyWithin(me+5,me+3,me+3+A),Te[me++]=219,wn.setUint32(me,A),me+=4),me+=A}else if(S==="number")if(b>>>0===b)b<64?Te[me++]=b:b<256?(Te[me++]=204,Te[me++]=b):b<65536?(Te[me++]=205,Te[me++]=b>>8,Te[me++]=b&255):(Te[me++]=206,wn.setUint32(me,b),me+=4);else if(b>>0===b)b>=-32?Te[me++]=256+b:b>=-128?(Te[me++]=208,Te[me++]=b+256):b>=-32768?(Te[me++]=209,wn.setInt16(me,b),me+=2):(Te[me++]=210,wn.setInt32(me,b),me+=4);else{let E;if((E=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){Te[me++]=202,wn.setFloat32(me,b);let T;if(E<4||(T=b*YD[(Te[me]&127)<<1|Te[me+1]>>7])>>0===T){me+=4;return}else me--}Te[me++]=203,wn.setFloat64(me,b),me+=8}else if(S==="object")if(!b)Te[me++]=192;else{if(s){let T=s.get(b);if(T){if(!T.id){let M=s.idsToInsert||(s.idsToInsert=[]);T.id=M.push(T)}Te[me++]=214,Te[me++]=112,wn.setUint32(me,T.id),me+=4;return}else s.set(b,{offset:me-e})}let E=b.constructor;if(E===Object)_(b,!0);else if(E===Array){A=b.length,A<16?Te[me++]=144|A:A<65536?(Te[me++]=220,Te[me++]=A>>8,Te[me++]=A&255):(Te[me++]=221,wn.setUint32(me,A),me+=4);for(let T=0;T<A;T++)x(b[T])}else if(E===Map){A=b.size,A<16?Te[me++]=128|A:A<65536?(Te[me++]=222,Te[me++]=A>>8,Te[me++]=A&255):(Te[me++]=223,wn.setUint32(me,A),me+=4);for(let[T,M]of b)x(T),x(M)}else{for(let T=0,M=X6.length;T<M;T++){let C=ZD[T];if(b instanceof C){let D=X6[T];if(D.write){D.type&&(Te[me++]=212,Te[me++]=D.type,Te[me++]=0),x(D.write.call(this,b));return}let P=Te,I=wn,k=me;Te=null;let G;try{G=D.pack.call(this,b,U=>(Te=P,P=null,me+=U,me>Wa&&w(me),{target:Te,targetView:wn,position:me-U}),x)}finally{P&&(Te=P,wn=I,me=k,Wa=Te.length-10)}G&&(G.length+me>Wa&&w(G.length+me),me=oPe(G,Te,me,D.type));return}}_(b,!b.hasOwnProperty)}}else if(S==="boolean")Te[me++]=b?195:194;else if(S==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))Te[me++]=211,wn.setBigInt64(me,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)Te[me++]=207,wn.setBigUint64(me,b);else if(this.largeBigIntToFloat)Te[me++]=203,wn.setFloat64(me,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");me+=8}else if(S==="undefined")this.encodeUndefinedAsNil?Te[me++]=192:(Te[me++]=212,Te[me++]=0,Te[me++]=0);else if(S==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},_=this.useRecords===!1?this.variableMapSize?b=>{let S=Object.keys(b),A=S.length;A<16?Te[me++]=128|A:A<65536?(Te[me++]=222,Te[me++]=A>>8,Te[me++]=A&255):(Te[me++]=223,wn.setUint32(me,A),me+=4);let E;for(let T=0;T<A;T++)x(E=S[T]),x(b[E])}:(b,S)=>{Te[me++]=222;let A=me-e;me+=2;let E=0;for(let T in b)(S||b.hasOwnProperty(T))&&(x(T),x(b[T]),E++);Te[A+++e]=E>>8,Te[A+e]=E&255}:b=>{let S=Object.keys(b),A,E=r.transitions||(r.transitions=Object.create(null)),T=0;for(let C=0,D=S.length;C<D;C++){let P=S[C];A=E[P],A||(A=E[P]=Object.create(null),T++),E=A}let M=E[Pg];if(M)M>=96&&f?(Te[me++]=((M-=96)&31)+96,Te[me++]=M>>5):Te[me++]=M;else{M=r.nextId,M||(M=64),M<p&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(M=r.nextOwnId,M<m||(M=p),r.nextOwnId=M+1):(M>=m&&(M=p),r.nextId=M+1);let C=S.highByte=M>=96&&f?M-96>>5:-1;E[Pg]=M,r[M-64]=S,M<p?(S.isShared=!0,r.sharedLength=M-63,n=!0,C>=0?(Te[me++]=(M&31)+96,Te[me++]=C):Te[me++]=M):(C>=0?(Te[me++]=213,Te[me++]=114,Te[me++]=(M&31)+96,Te[me++]=C):(Te[me++]=212,Te[me++]=114,Te[me++]=M),T&&(g+=v*T),y.length>=d&&(y.shift()[Pg]=0),y.push(E),x(S))}for(let C=0,D=S.length;C<D;C++)x(b[S[C]])},w=b=>{let S;if(b>16777216){if(b-e>Tz)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(Tz,Math.round(Math.max((b-e)*(b>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(b-e<<2,Te.length-1)>>12)+1<<12;let A=new jb(S);return wn=new DataView(A.buffer,0,S),Te.copy?Te.copy(A,0,e,b):A.set(Te.slice(e,b)),me-=e,e=0,Wa=A.length-10,Te=A}}useBuffer(i){Te=i,wn=new DataView(Te.buffer,Te.byteOffset,Te.byteLength),me=0}};ZD=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,eQ];X6=[{pack(i,e,t){let n=i.getTime()/1e3;if((this.useTimestamp32||i.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,n)}else if(n>0&&n<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,i.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),t(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,i.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(i,e,t){let n=Array.from(i),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),t(n)}},{pack(i,e,t){let{target:n,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=101,n[r++]=0),t([i.name,i.message])}},{pack(i,e,t){let{target:n,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=120,n[r++]=0),t([i.source,i.flags])}},{pack(i,e){this.structuredClone?Mz(i,16,e):Ez(m7?Buffer.from(i):new Uint8Array(i),e)}},{pack(i,e){let t=i.constructor;t!==lQ&&this.structuredClone?Mz(i,oQ.indexOf(t.name),e):Ez(i,e)}},{pack(i,e){let{target:t,position:n}=e(1);t[n]=193}}];function Mz(i,e,t,n){let r=i.byteLength;if(r+1<256){var{target:s,position:o}=t(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=t(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=t(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(i.buffer,i.byteOffset,i.byteLength),o)}function Ez(i,e){let t=i.byteLength;var n,r;if(t<256){var{target:n,position:r}=e(t+2);n[r++]=196,n[r++]=t}else if(t<65536){var{target:n,position:r}=e(t+3);n[r++]=197,n[r++]=t>>8,n[r++]=t&255}else{var{target:n,position:r,targetView:s}=e(t+5);n[r++]=198,s.setUint32(r,t),r+=4}n.set(i,r)}function oPe(i,e,t,n){let r=i.length;switch(r){case 1:e[t++]=212;break;case 2:e[t++]=213;break;case 4:e[t++]=214;break;case 8:e[t++]=215;break;case 16:e[t++]=216;break;default:r<256?(e[t++]=199,e[t++]=r):r<65536?(e[t++]=200,e[t++]=r>>8,e[t++]=r&255):(e[t++]=201,e[t++]=r>>24,e[t++]=r>>16&255,e[t++]=r>>8&255,e[t++]=r&255)}return e[t++]=n,e.set(i,t),t+=r,t}function aPe(i,e){let t,n=e.length*6,r=i.length-n;for(e.sort((s,o)=>s.offset>o.offset?1:-1);t=e.pop();){let s=t.offset,o=t.id;i.copyWithin(s+n,s,r),n-=6;let a=s+n;i[a++]=214,i[a++]=105,i[a++]=o>>24,i[a++]=o>>16&255,i[a++]=o>>8&255,i[a++]=o&255,r=s}return i}function Rm(i){if(i.Class){if(!i.pack&&!i.write)throw new Error("Extension has no pack or write function");if(i.pack&&!i.type)throw new Error("Extension has no type (numeric code to identify the extension)");ZD.unshift(i.Class),X6.unshift(i)}nPe(i)}var uQ=new cQ({useRecords:!1});uQ.pack;uQ.pack;var lPe=512,cPe=1024,Cz=new cQ({structuredClone:!0});Rm({Class:Lr.prototype.constructor,type:1,write(i){return{...i}},read(i){return Object.setPrototypeOf(i,Lr.prototype),i}});Rm({Class:Yt.prototype.constructor,type:2,write(i){return[...i]},read(i){return Object.setPrototypeOf(i,Yt.prototype),i}});Rm({Class:Ls.prototype.constructor,type:3,write(i){return[...i]},read(i){return Object.setPrototypeOf(i,Ls.prototype),i}});Rm({Class:gz.prototype.constructor,type:4,write(i){return i.id},read(i){return new gz(i)}});Rm({Class:vz.prototype.constructor,type:5,write(i){return i.data},read(i){return new vz(i)}});Rm({Class:Is.prototype.constructor,type:6,write(i){return{...i}},read(i){return Object.setPrototypeOf(i,Is.prototype),i}});function uPe(i){var e=0;if(i.length===0)return e;for(let t=0;t<i.length;t++){let n=i[t];e=(e<<5)-e+n,e=e&e}return e}function iT(i){if(GD(i))return i;if(Array.isArray(i))return i.map(iT);if(typeof i=="object"&&i!==null){let e={};for(let t of Object.keys(i).sort())e[t]=iT(i[t]);return Object.setPrototypeOf(e,Object.getPrototypeOf(i)),e}else return i}var Dz;(i=>{function e(r){return Cz.pack(r)}i.serialize=e;function t(r){return Cz.unpack(r)}i.deserialize=t;function n(r){return uPe(e(iT(r))).toString()}i.checksum=n})(Dz||(Dz={}));var Pz;(i=>{function e(n){return n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"}i.is=e;function t(n){return n==="MouseDown"||n==="MouseUp"||n==="MousePress"?{type:n,disabled:!1,toggle:!1,actions:new Yt}:{type:n,disabled:!1,key:void 0,toggle:!1,actions:new Yt}}i.defaultData=t})(Pz||(Pz={}));var Y6;(i=>{function e(t){return{type:"Property",value:[t??null,"position","x"]}}i.propertyDefaultData=e,i.valueDefaultData={type:"Literal",value:0}})(Y6||(Y6={}));var nT;(i=>{function e(r){return{type:"Comparison",operator:"==",lOperand:Y6.propertyDefaultData(r),rOperand:{...Y6.valueDefaultData}}}i.comparisonDefaultData=e;function t(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}}i.distanceDefaultData=t;function n(r,s){return{type:"State",object:r??null,state:s??null}}i.stateDefaultData=n})(nT||(nT={}));var Lz;(i=>{function e(n){return n.type==="Conditional"}i.is=e;function t(n){return{type:"Conditional",disabled:!1,inActions:new Yt,outActions:new Yt,condition:nT.distanceDefaultData(n)}}i.defaultData=t})(Lz||(Lz={}));var Iz;(i=>i.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,plane:"custom",resetOnPointerLeave:!0})(Iz||(Iz={}));var Oz;(i=>i.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0})(Oz||(Oz={}));var Rz;(i=>{function e(n){return n.type==="MouseHover"}i.is=e;function t(){return{type:"MouseHover",disabled:!1,actions:new Yt}}i.defaultData=t})(Rz||(Rz={}));var Nz;(i=>{function e(n){return n.type==="Scroll"}i.is=e;function t(){return{type:"Scroll",disabled:!1,steps:100,actions:new Yt}}i.defaultData=t})(Nz||(Nz={}));var Fz;(i=>{function e(n){return n.type==="Start"}i.is=e;function t(){return{type:"Start",disabled:!1,actions:new Yt}}i.defaultData=t})(Fz||(Fz={}));var zz;(i=>{function e(n){return n.type==="Collision"}i.is=e;function t(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new Yt}}i.defaultData=t})(zz||(zz={}));var Fp;(i=>{function e(n,r){return n[0]===r[0]&&n[1]===r[1]}i.isEqual=e;function t(n,r,s){return[n[0]+(r[0]-n[0])*s,n[1]+(r[1]-n[1])*s]}i.lerp=t})(Fp||(Fp={}));var Md;(i=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}i.isEqual=e;function t(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}i.add=t;function n(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}i.sub=n;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}i.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}i.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}i.dist=o;function a(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}i.lerp=a})(Md||(Md={}));var Z6;(i=>{function e(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}i.isEqual=e;function t(n,r,s){return[n[0]+(r[0]-n[0])*s,n[1]+(r[1]-n[1])*s,n[2]+(r[2]-n[2])*s,n[3]+(r[3]-n[3])*s]}i.lerp=t})(Z6||(Z6={}));var $1;(i=>{i.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}i.isEqual=e;function t(r){return r??i.identity}i.simplify=t;function n(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}i.applyMatrix4=n})($1||($1={}));var Zs;(i=>{function e(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}i.isRGB=e,i.white={r:1,g:1,b:1},i.red={r:1,g:0,b:0},i.black={r:0,g:0,b:0};function t(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}i.toRgb255a1=t;function n(a){return{r:a.r,g:a.g,b:a.b}}i.clone=n;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}i.fromHex=r;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}i.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}i.lerp=o})(Zs||(Zs={}));var Ea;(i=>{i.white={...Zs.white,a:1},i.transparent={...Zs.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}i.from0to1=e;function t(o,a){return{...Zs.fromHex(o),a}}i.fromHexAndA=t;function n(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}i.toRgb255a1=n;function r(o,a){return Zs.equals(o,a)&&o.a===a.a}i.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}i.lerp=s})(Ea||(Ea={}));var rT;(i=>i.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(rT||(rT={}));var kz;(i=>i.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(kz||(kz={}));var Bz;(i=>i.defaultData={control1:[.5,.05],control2:[.1,.3]})(Bz||(Bz={}));var Xd;(i=>{i.all=["PerspectiveCamera","OrthographicCamera"];function e(t){return i.all.includes(t)}i.is=e})(Xd||(Xd={}));var u3;(i=>{i.DefaultUp=[0,1,0],i.DefaultTargetOffset=1e3,i.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:i.DefaultUp,isUpVectorFlipped:!1,targetOffset:i.DefaultTargetOffset};function e(t){return t.type==="PerspectiveCamera"?t.perspective.zoom:t.orthographic.zoom}i.getZoom=e})(u3||(u3={}));var au;(i=>{function e(n,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(n[0],n[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[n[0]+n[0]*r,0,0]},grid:{count:[2,2,2],size:n.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}i.defaultData=e;function t(n,r){let s={...n};if(hQ.forEach(o=>{Object.assign(s,{[o]:r[o]??n[o]})}),s.radial={...n.radial},r.radial){let o=n.radial,a=r.radial;dQ.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...n.linear},r.linear){let o=n.linear,a=r.linear;fQ.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...n.grid},r.grid){let o=n.grid,a=r.grid;pQ.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...n.toObject},r.toObject){let o=n.toObject,a=r.toObject;mQ.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...n.randomnessObject},r.randomnessObject){let o=n.randomnessObject,a=r.randomnessObject;gQ.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}i.merge=t})(au||(au={}));var sT;(i=>{i.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function t(n,r){let s=[];n.count!==void 0&&s.push({type:0,path:r,props:{count:n.count}});for(let o of e){let a=n[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}i.toOps=t})(sT||(sT={}));var hQ=["count"],dQ=["radius","start","end","position","scale","rotation"],fQ=["position","scale","rotation"],pQ=["count","size"],mQ=["count","position","scale","rotation"],gQ=["strength","scale","rotation","position","movement","seed","freqScale"],Q6;(i=>{let e={opacity:1,blendFunction:13,enabled:!1};i.defaultData={enabled:!1,pixelation:{...e,blendFunction:16,granularity:15},bloom:{...e,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...e,offset:[2,2]},vignette:{...e,darkness:1,offset:0},hueSaturation:{...e,hue:3,saturation:0},brightnessContrast:{...e,brightness:.25,contrast:0},depthOfField:{...e,focalLength:2,focusDistance:2,bokehScale:2},noise:{...e,blendFunction:16}}})(Q6||(Q6={}));var oT;(i=>{i.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(t){return i.all.includes(t)}i.is=e})(oT||(oT={}));var aT;(i=>{function e(n){return t(n)}i.defaultData=e;function t(n){if(n==="PointLight")return{type:n,color:Ea.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(n==="SpotLight")return{type:n,color:Ea.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(n==="DirectionalLight")return{type:n,color:Ea.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(aT||(aT={}));var lT;(i=>{i.defaultData={castShadow:!0,receiveShadow:!0};function e(t,n){return t.castShadow===n.castShadow&&t.receiveShadow===n.receiveShadow}i.equals=e})(lT||(lT={}));var cT;(i=>{i.defaultData={flatShading:!1,wireframe:!1,side:0};function e(t,n){return t.flatShading===n.flatShading&&t.side===n.side&&t.wireframe===n.wireframe}i.equals=e})(cT||(cT={}));var uT;(i=>i.defaultData={...cT.defaultData,...lT.defaultData})(uT||(uT={}));var K6;(i=>(i.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},i.maxSize=3e7))(K6||(K6={}));var hPe=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],_a;(i=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}i.patch=e;function t(s,o){return s==="light"&&o?n(o):r(s)}i.defaultData=t;function n(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:K6.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Zs.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Zs.fromHex(6710886),a:1},colorB:{...Zs.fromHex(6710886),a:1},colorC:{...Zs.fromHex(16777215),a:1},colorD:{...Zs.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:Ea.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Ea.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:Ea.fromHexAndA(0,1),contourColor:Ea.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(_a||(_a={}));var Ed;(i=>{function e(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}i.isMergable=e;function t(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}i.getHash=t;function n(){return{layers:new Yt}}i.defaultEmptyData=n;function r(c="layer1",h="layer2"){return o("phong",c,h)}i.defaultData=r;function s(c,h){return{...c,name:h}}i.withName=s;function o(c,h="layer1",u="layer2"){let d=new Yt;return d.push({fi:0,data:_a.defaultData("light",c),id:h}),d.push({fi:1,data:_a.defaultData("color"),id:u}),{layers:d}}i.defaultTwoLayerData=o;function a(c,h="phong",u="layer1",d="layer2"){let f=_a.defaultData("texture");Object.assign(f.texture,{image:c});let p=new Yt;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:_a.defaultData("light",h),id:d}),{layers:p}}i.defaultTwoLayerTextureData=a;function l(c,h="phong",u="layer1",d="layer2"){let f=_a.defaultData("video");Object.assign(f.texture,{video:c});let p=new Yt;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:_a.defaultData("light",h),id:d}),{layers:p}}i.defaultTwoLayerVideoTextureData=l})(Ed||(Ed={}));var J6;(i=>{function e(){return{points:new Yt,roundness:0,shapeHoles:[],isClosed:!1}}i.defaultData=e})(J6||(J6={}));var e8;(i=>{function e(){return{points:new Yt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}i.defaultData=e})(e8||(e8={}));var vQ={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},hT;(i=>{function e(t,n){let r={...t};return xQ.forEach(s=>{Object.assign(r,{[s]:n[s]??t[s]})}),r}i.merge=e})(hT||(hT={}));var yQ={shape:vQ,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},xQ=["depth","offset","angle","twist","startScale","endScale"],t8;(i=>{function e(t){return t==="PolygonGeometry"||t==="RectangleGeometry"||t==="StarGeometry"||t==="TriangleGeometry"||t==="EllipseGeometry"}i.is2DParametricMesh=e})(t8||(t8={}));var dT;(i=>{function e(t,n){let r={...t};return Object.assign(r,n),r.type==="PathGeometry"&&"extrusion"in n&&n.extrusion&&(r.extrusion={...t.extrusion},Object.assign(r.extrusion,hT.merge(r.extrusion,n.extrusion))),r}i.merge=e})(dT||(dT={}));var rv;(i=>{function e(t){if(t==="RectangleGeometry")return{width:320,height:320,type:t,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(t==="PathGeometry")return{type:t,width:1,height:1,depth:1,path:e8.defaultData(),extrusion:yQ};if(t==="VectorGeometry")return{width:1,height:1,type:t,subdivisions:12,shape:J6.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(t==="BooleanGeometry")return{type:t,operation:2,width:0,height:0,depth:0,phongAngle:35};if(t==="TextGeometry")return{type:t,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}i.defaultData=e})(rv||(rv={}));var Uz=["width","height","depth"],Vz;(i=>{function e(n){return n==="Component"||n==="Instance"}i.isComponentRelated=e;function t(n){return n==="Empty"||n==="Instance"}i.isEmptyOrComponent=t})(Vz||(Vz={}));var q1;(i=>{i.identity={...rT.identity,hiddenMatrix:$1.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}i.fromObject=e;function t(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}i.merge=t;function n(r,s){return{position:Md.isEqual(r.position,s.position)?null:s.position,rotation:Md.isEqual(r.rotation,s.rotation)?null:s.rotation,scale:Md.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:$1.isEqual(r.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}i.diff=n})(q1||(q1={}));var fT;(i=>i.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(fT||(fT={}));var Na;(i=>i.defaultData={states:new Yt,events:new Yt,visible:!0,raycastLock:!1,physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...q1.identity,cloner:null})(Na||(Na={}));var Gz;(i=>i.defaultData={type:"Empty",...Na.defaultData})(Gz||(Gz={}));var jz;(i=>i.defaultData={type:"Component",...Na.defaultData})(jz||(jz={}));var sv;(i=>i.defaultData={type:"Mesh",...Na.defaultData,...uT.defaultData})(sv||(sv={}));var i8;(i=>i.defaultData={...Na.defaultData,...q1.identity,...u3.defaultData})(i8||(i8={}));var pT;(i=>{function e(t){return{...Na.defaultData,...aT.defaultData(t)}}i.defaultData=e})(pT||(pT={}));var n8;(i=>{function e(n,r,s=0){for(;s<r.length;){let o=n?n[r[s]]:void 0;if(r.length===s+1)return o;if(o)n=o.descendants,s+=1;else return}}i.resolveWithDes=e;function t(n,r,s=0){let o=e(n,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}i.resolve=t})(n8||(n8={}));var X1;(i=>{i.rootOverrideProps=["physics"],i.compositeNonOptionalOverrideProps=["geometry"],i.compositeEntireOverrideOverrideProps=["material"];function e(n,r){return{...Na.defaultData,...r,component:n,overrides:new Is,physics:void 0,type:"Instance"}}i.ofComponent=e;function t(n){let r=q1.fromObject(n.data);return e(n.id,r)}i.fromComponentData=t})(X1||(X1={}));var mT;(i=>(i.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:$1.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:fT.defaultData,states:new Yt,events:new Yt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...u3.defaultData},i.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},i.defaultMeshObject={name:"Rectangle",...Na.defaultData,...sv.defaultData,geometry:rv.defaultData("RectangleGeometry"),material:Ed.defaultTwoLayerData("phong","layer1","layer2")},i.defaultBooleanObject={name:"Boolean",...Na.defaultData,...sv.defaultData,geometry:rv.defaultData("BooleanGeometry"),material:Ed.defaultTwoLayerData("phong","layer1","layer2")},i.defaultTextObject={name:"Text",...Na.defaultData,...sv.defaultData,geometry:rv.defaultData("TextGeometry"),material:Ed.defaultTwoLayerData("phong","layer1","layer2")}))(mT||(mT={}));var zp;(i=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new Is}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new Is})))):Xd.is(s.type)&&(a.perspective={},a.orthographic={}),a}i.newEmpty=e;function t(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=$6(a.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&_a.patch(u,h)}}).data),a.materials&&o.materials&&(a.materials=$6(a.materials,l=>{var c,h;for(let u=0;u<a.materials.length;u++){let d=o.materials[u];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let m=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(f);m&&_a.patch(m,p)}}}).data),a}function n(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:m,...y}=p;if(m!==void 0&&Object.keys(m).length>0){let g={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(g)}if(Object.keys(y).length>0){let g={path:[...u,"layers",f],props:y,type:0};l.push(g)}}}for(let[u,d]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...sT.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=d;return l}i.toOps=n;function r(s,o){var l,c,h;if(o===void 0)return s;let a={...s};if(Object.assign(a,q1.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??a.pathSnapping.slide})}),Xd.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let u=o;((c=u.orthographic)==null?void 0:c.zoom)!==void 0&&(a.orthographic.zoom=u.orthographic.zoom),((h=u.perspective)==null?void 0:h.zoom)!==void 0&&(a.perspective.zoom=u.perspective.zoom),u.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=u.isUpVectorFlipped),u.targetOffset!==void 0&&(a.targetOffset=u.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:dT.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=t(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:au.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:au.merge(a.cloner,o.cloner)});else if(oT.is(s.type)){let u=o;u.intensity!==void 0&&(a.intensity=u.intensity),u.color!==void 0&&(typeof u.color=="string"?a.color=u.color:a.color=Zs.clone(u.color))}return a}i.patch=r})(zp||(zp={}));var r8;(i=>i.defaultData={enabled:!1,useBackgroundColor:!1,color:Zs.white,near:.1,far:2e3})(r8||(r8={}));var gT;(i=>i.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(gT||(gT={}));var s8;(i=>i.defaultData={orbitControls:gT.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,hideCursor:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:typeof window<"u"?Math.floor(window.devicePixelRatio):1,stopMode:"manual",duration:5e3},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,t)=>{let n=0,r=0;return t<5?r=-30:t<10&&(r=30),t===0||t===10||t===5?n=30:(t===4||t===11||t===9)&&(n=-30),[120,[n,r],"show"]}),gameControlObject:null})(s8||(s8={}));function QD(i,e){return Object.setPrototypeOf(i,e),i}var dPe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),fPe=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),pPe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,mPe=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,gPe=()=>{if(typeof window>"u")return!1;let i=navigator.userAgent,e=navigator.vendor;return/Safari/i.test(i)&&/Apple Computer/.test(e)},vPe=()=>{if(typeof window>"u")return null;let i=navigator.userAgent.match(/Version\/(\d+\.\d)/);return i&&i[1]};dPe();fPe();pPe();var Hz=mPe(),Wz=gPe(),$z=Number(vPe());function _Q(i){return Array.isArray(i)?i:[i]}function yPe(i,e){let t=0;for(;t<i.length&&t<e.length;){if(i[t]<e[t])return-1;if(i[t]>e[t])return 1;t+=1}return t!==e.length?-1:t!==i.length?1:0}var h0;(i=>i.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low"},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(h0||(h0={}));var qz;(i=>{i.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function e(r={withLight:!0,withSquare:!0}){let s=new Ls,o=mT.defaultMeshObject;return r.withLight===!0&&s.push({fi:-1,data:{...pT.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),r.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),s}i.defaultData={backgroundColor:Ea.fromHexAndA(1908256,1),postprocessing:Q6.defaultData,fog:r8.defaultData,objects:e(),environment:h0.defaultData,publish:s8.defaultData},i.emptyData=function(r){return{backgroundColor:Ea.fromHexAndA(1908256,1),postprocessing:Q6.defaultData,fog:r8.defaultData,objects:r?e(r):new Ls,environment:h0.defaultData,publish:s8.defaultData}};function t(r){return{...i.defaultData,objects:QD(r,Ls.prototype)}}i.withObjs=t;function n(r,s){return t([{id:r,data:s,children:[],fi:0}])}i.withObj=n})(qz||(qz={}));var vT;(i=>{function e(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},QD(n,Lr.prototype)}i.defaultColors=e;function t(){return{materials:new Lr,images:new Lr,videos:new Lr,colors:new Lr,audios:new Lr,fonts:new Lr,penumbraSize:[.5,.5,.5]}}i.emptyData=t})(vT||(vT={}));var yT;(i=>i.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(yT||(yT={}));function xPe(i,e=!1){let t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},o={},a=i[0].morphTargetsRelative,l=new _t,c=0;for(let h=0;h<i.length;++h){let u=i[h],d=0;if(t!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(e){let f;if(t)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(t){let h=0,u=[];for(let d=0;d<i.length;++d){let f=i[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+h);h+=i[d].attributes.position.count}l.setIndex(u)}for(let h in s){let u=Xz(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(let h in o){let u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){let f=[];for(let m=0;m<o[h].length;++m)f.push(o[h][m][d]);let p=Xz(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function Xz(i){let e,t,n,r=0;for(let a=0;a<i.length;++a){let l=i[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=l.normalized),n!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let s=new e(r),o=0;for(let a=0;a<i.length;++a)s.set(i[a].array,o),o+=i[a].array.length;return new Ot(s,t,n)}var xT;(i=>(i.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},i.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:i.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:-3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Yt,move:new Yt,jump:new Yt}}))(xT||(xT={}));var _Pe=Math.pow(2,-24),J9=class{constructor(){}};function v0(i,e,t){return t.min.x=e[i],t.min.y=e[i+1],t.min.z=e[i+2],t.max.x=e[i+3],t.max.y=e[i+4],t.max.z=e[i+5],t}function Yz(i){let e=-1,t=-1/0;for(let n=0;n<3;n++){let r=i[n+3]-i[n];r>t&&(t=r,e=n)}return e}function Zz(i,e){e.set(i)}function Qz(i,e,t){let n,r;for(let s=0;s<3;s++){let o=s+3;n=i[s],r=e[s],t[s]=n<r?n:r,n=i[o],r=e[o],t[o]=n>r?n:r}}function e4(i,e,t){for(let n=0;n<3;n++){let r=e[i+2*n],s=e[i+2*n+1],o=r-s,a=r+s;o<t[n]&&(t[n]=o),a>t[n+3]&&(t[n+3]=a)}}function Lg(i){let e=i[3]-i[0],t=i[4]-i[1],n=i[5]-i[2];return 2*(e*t+t*n+n*e)}function bPe(i,e){if(!i.index){let t=i.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r;t>65535?r=new Uint32Array(new n(4*t)):r=new Uint16Array(new n(2*t)),i.setIndex(new Ot(r,1));for(let s=0;s<t;s++)r[s]=s}}function wPe(i){if(!i.groups||!i.groups.length)return[{offset:0,count:i.index.count/3}];let e=[],t=new Set;for(let r of i.groups)t.add(r.start),t.add(r.start+r.count);let n=Array.from(t.values()).sort((r,s)=>r-s);for(let r=0;r<n.length-1;r++){let s=n[r],o=n[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Hb(i,e,t,n,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,f=1/0,p=-1/0,m=-1/0,y=-1/0,g=r!==null;for(let v=e*6,x=(e+t)*6;v<x;v+=6){let _=i[v+0],w=i[v+1],b=_-w,S=_+w;b<s&&(s=b),S>l&&(l=S),g&&_<u&&(u=_),g&&_>p&&(p=_);let A=i[v+2],E=i[v+3],T=A-E,M=A+E;T<o&&(o=T),M>c&&(c=M),g&&A<d&&(d=A),g&&A>m&&(m=A);let C=i[v+4],D=i[v+5],P=C-D,I=C+D;P<a&&(a=P),I>h&&(h=I),g&&C<f&&(f=C),g&&C>y&&(y=C)}n[0]=s,n[1]=o,n[2]=a,n[3]=l,n[4]=c,n[5]=h,g&&(r[0]=u,r[1]=d,r[2]=f,r[3]=p,r[4]=m,r[5]=y)}function SPe(i,e,t,n){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let h=e*6,u=(e+t)*6;h<u;h+=6){let d=i[h+0];d<r&&(r=d),d>a&&(a=d);let f=i[h+2];f<s&&(s=f),f>l&&(l=f);let p=i[h+4];p<o&&(o=p),p>c&&(c=p)}n[0]=r,n[1]=s,n[2]=o,n[3]=a,n[4]=l,n[5]=c}function APe(i,e,t,n,r){let s=t,o=t+n-1,a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let h=i[s*3+c];i[s*3+c]=i[o*3+c],i[o*3+c]=h;let u=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=u;let d=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=d}s++,o--}else return s}}var Tl=32,TPe=(i,e)=>i.candidate-e.candidate,Oc=new Array(Tl).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),t4=new Float32Array(6);function MPe(i,e,t,n,r,s){let o=-1,a=0;if(s===0)o=Yz(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===1)o=Yz(i),o!==-1&&(a=EPe(t,n,r,o));else if(s===2){let l=Lg(i),c=1.25*r,h=n*6,u=(n+r)*6;for(let d=0;d<3;d++){let f=e[d],p=(e[d+3]-f)/Tl;if(r<Tl/4){let m=[...Oc];m.length=r;let y=0;for(let v=h;v<u;v+=6,y++){let x=m[y];x.candidate=t[v+2*d],x.count=0;let{bounds:_,leftCacheBounds:w,rightCacheBounds:b}=x;for(let S=0;S<3;S++)b[S]=1/0,b[S+3]=-1/0,w[S]=1/0,w[S+3]=-1/0,_[S]=1/0,_[S+3]=-1/0;e4(v,t,_)}m.sort(TPe);let g=r;for(let v=0;v<g;v++){let x=m[v];for(;v+1<g&&m[v+1].candidate===x.candidate;)m.splice(v+1,1),g--}for(let v=h;v<u;v+=6){let x=t[v+2*d];for(let _=0;_<g;_++){let w=m[_];x>=w.candidate?e4(v,t,w.rightCacheBounds):(e4(v,t,w.leftCacheBounds),w.count++)}}for(let v=0;v<g;v++){let x=m[v],_=x.count,w=r-x.count,b=x.leftCacheBounds,S=x.rightCacheBounds,A=0;_!==0&&(A=Lg(b)/l);let E=0;w!==0&&(E=Lg(S)/l);let T=1+1.25*(A*_+E*w);T<c&&(o=d,c=T,a=x.candidate)}}else{for(let g=0;g<Tl;g++){let v=Oc[g];v.count=0,v.candidate=f+p+g*p;let x=v.bounds;for(let _=0;_<3;_++)x[_]=1/0,x[_+3]=-1/0}for(let g=h;g<u;g+=6){let v=~~((t[g+2*d]-f)/p);v>=Tl&&(v=Tl-1);let x=Oc[v];x.count++,e4(g,t,x.bounds)}let m=Oc[Tl-1];Zz(m.bounds,m.rightCacheBounds);for(let g=Tl-2;g>=0;g--){let v=Oc[g],x=Oc[g+1];Qz(v.bounds,x.rightCacheBounds,v.rightCacheBounds)}let y=0;for(let g=0;g<Tl-1;g++){let v=Oc[g],x=v.count,_=v.bounds,w=Oc[g+1].rightCacheBounds;x!==0&&(y===0?Zz(_,t4):Qz(_,t4,t4)),y+=x;let b=0,S=0;y!==0&&(b=Lg(t4)/l);let A=r-y;A!==0&&(S=Lg(w)/l);let E=1+1.25*(b*y+S*A);E<c&&(o=d,c=E,a=v.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function EPe(i,e,t,n){let r=0;for(let s=e,o=e+t;s<o;s++)r+=i[s*6+n*2];return r/t}function CPe(i,e){let t=i.attributes.position,n=t.array,r=i.index.array,s=r.length/3,o=new Float32Array(s*6),a=t.offset||0,l=3;t.isInterleavedBufferAttribute&&(l=t.data.stride);for(let c=0;c<s;c++){let h=c*3,u=c*6,d=r[h+0]*l+a,f=r[h+1]*l+a,p=r[h+2]*l+a;for(let m=0;m<3;m++){let y=n[d+m],g=n[f+m],v=n[p+m],x=y;g<x&&(x=g),v<x&&(x=v);let _=y;g>_&&(_=g),v>_&&(_=v);let w=(_-x)/2,b=m*2;o[u+b+0]=x+w,o[u+b+1]=w+(Math.abs(x)+w)*_Pe,x<e[m]&&(e[m]=x),_>e[m+3]&&(e[m+3]=_)}}return o}function DPe(i,e){function t(g){d&&d(g/f)}function n(g,v,x,_=null,w=0){if(!p&&w>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(i))),x<=h||w>=l)return t(v+x),g.offset=v,g.count=x,g;let b=MPe(g.boundingData,_,o,v,x,u);if(b.axis===-1)return t(v+x),g.offset=v,g.count=x,g;let S=APe(a,o,v,x,b);if(S===v||S===v+x)t(v+x),g.offset=v,g.count=x;else{g.splitAxis=b.axis;let A=new J9,E=v,T=S-v;g.left=A,A.boundingData=new Float32Array(6),Hb(o,E,T,A.boundingData,s),n(A,E,T,s,w+1);let M=new J9,C=S,D=x-T;g.right=M,M.boundingData=new Float32Array(6),Hb(o,C,D,M.boundingData,s),n(M,C,D,s,w+1)}return g}bPe(i,e);let r=new Float32Array(6),s=new Float32Array(6),o=CPe(i,r),a=i.index.array,l=e.maxDepth,c=e.verbose,h=e.maxLeafTris,u=e.strategy,d=e.onProgress,f=i.index.count/3,p=!1,m=[],y=wPe(i);if(y.length===1){let g=y[0],v=new J9;v.boundingData=r,SPe(o,g.offset,g.count,s),n(v,g.offset,g.count,s),m.push(v)}else for(let g of y){let v=new J9;v.boundingData=new Float32Array(6),Hb(o,g.offset,g.count,v.boundingData,s),n(v,g.offset,g.count,s),m.push(v)}return m}function PPe(i,e){let t=DPe(i,e),n,r,s,o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<t.length;h++){let u=t[h],d=l(u),f=new a(32*d);n=new Float32Array(f),r=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function c(h,u){let d=h/4,f=h/2,p=!!u.count,m=u.boundingData;for(let y=0;y<6;y++)n[d+y]=m[y];if(p){let y=u.offset,g=u.count;return r[d+6]=y,s[f+14]=g,s[f+15]=65535,h+32}else{let y=u.left,g=u.right,v=u.splitAxis,x;if(x=c(h+32,y),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[d+6]=x/4,x=c(x,g),r[d+7]=v,x}}}var nc=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(i,e){let t=1/0,n=-1/0;for(let r=0,s=i.length;r<s;r++){let o=i[r][e];t=o<t?o:t,n=o>n?o:n}this.min=t,this.max=n}setFromPoints(i,e){let t=1/0,n=-1/0;for(let r=0,s=e.length;r<s;r++){let o=e[r],a=i.dot(o);t=a<t?a:t,n=a>n?a:n}this.min=t,this.max=n}isSeparated(i){return this.min>i.max||i.min>this.max}};nc.prototype.setFromBox=function(){let i=new O;return function(e,t){let n=t.min,r=t.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){i.x=n.x*a+r.x*(1-a),i.y=n.y*l+r.y*(1-l),i.z=n.z*c+r.z*(1-c);let h=e.dot(i);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();var LPe=function(){let i=new O,e=new O,t=new O;return function(n,r,s){let o=n.start,a=i,l=r.start,c=e;t.subVectors(o,l),i.subVectors(n.end,r.start),e.subVectors(r.end,r.start);let h=t.dot(c),u=c.dot(a),d=c.dot(c),f=t.dot(a),p=a.dot(a)*d-u*u,m,y;p!==0?m=(h*u-f*d)/p:m=0,y=(h+m*u)/d,s.x=m,s.y=y}}(),KD=function(){let i=new fe,e=new O,t=new O;return function(n,r,s,o){LPe(n,r,i);let a=i.x,l=i.y;if(a>=0&&a<=1&&l>=0&&l<=1){n.at(a,s),r.at(l,o);return}else if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),n.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?n.at(0,s):n.at(1,s),r.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=n.start:c=n.end;let h;l<0?h=r.start:h=r.end;let u=e,d=t;if(n.closestPointToPoint(h,!0,e),r.closestPointToPoint(c,!0,t),u.distanceToSquared(h)<=d.distanceToSquared(c)){s.copy(u),o.copy(h);return}else{s.copy(c),o.copy(d);return}}}}(),IPe=function(){let i=new O,e=new O,t=new xa,n=new $o;return function(r,s){let{radius:o,center:a}=r,{a:l,b:c,c:h}=s;if(n.start=l,n.end=c,n.closestPointToPoint(a,!0,i).distanceTo(a)<=o||(n.start=l,n.end=h,n.closestPointToPoint(a,!0,i).distanceTo(a)<=o)||(n.start=c,n.end=h,n.closestPointToPoint(a,!0,i).distanceTo(a)<=o))return!0;let u=s.getPlane(t);if(Math.abs(u.distanceToPoint(a))<=o){let d=u.projectPoint(a,e);if(s.containsPoint(d))return!0}return!1}}(),OPe=1e-15;function rp(i){return Math.abs(i)<OPe}var rc=class extends _s{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new O),this.satBounds=new Array(4).fill().map(()=>new nc),this.points=[this.a,this.b,this.c],this.sphere=new Qo,this.plane=new xa,this.needsUpdate=!0}intersectsSphere(e){return IPe(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);let c=s[1],h=o[1];c.subVectors(e,t),h.setFromPoints(c,r);let u=s[2],d=o[2];u.subVectors(t,n),d.setFromPoints(u,r);let f=s[3],p=o[3];f.subVectors(n,e),p.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};rc.prototype.closestPointToSegment=function(){let i=new O,e=new O,t=new $o;return function(n,r=null,s=null){let{start:o,end:a}=n,l=this.points,c,h=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;t.start.copy(l[u]),t.end.copy(l[d]),KD(t,n,i,e),c=i.distanceToSquared(e),c<h&&(h=c,r&&r.copy(i),s&&s.copy(e))}return this.closestPointToPoint(o,i),c=o.distanceToSquared(i),c<h&&(h=c,r&&r.copy(i),s&&s.copy(o)),this.closestPointToPoint(a,i),c=a.distanceToSquared(i),c<h&&(h=c,r&&r.copy(i),s&&s.copy(a)),Math.sqrt(h)}}();rc.prototype.intersectsTriangle=function(){let i=new rc,e=new Array(3),t=new Array(3),n=new nc,r=new nc,s=new O,o=new O,a=new O,l=new O,c=new $o,h=new $o,u=new $o;return function(d,f=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(i.copy(d),i.update(),d=i);let p=this.plane,m=d.plane;if(Math.abs(p.normal.dot(m.normal))>1-1e-10){let y=this.satBounds,g=this.satAxes;t[0]=d.a,t[1]=d.b,t[2]=d.c;for(let _=0;_<4;_++){let w=y[_],b=g[_];if(n.setFromPoints(b,t),w.isSeparated(n))return!1}let v=d.satBounds,x=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let _=0;_<4;_++){let w=v[_],b=x[_];if(n.setFromPoints(b,e),w.isSeparated(n))return!1}for(let _=0;_<4;_++){let w=g[_];for(let b=0;b<4;b++){let S=x[b];if(s.crossVectors(w,S),n.setFromPoints(s,e),r.setFromPoints(s,t),n.isSeparated(r))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let y=this.points,g=!1,v=0;for(let C=0;C<3;C++){let D=y[C],P=y[(C+1)%3];c.start.copy(D),c.end.copy(P),c.delta(o);let I=g?h.start:h.end,k=rp(m.distanceToPoint(D));if(rp(m.normal.dot(o))&&k){h.copy(c),v=2;break}if((m.intersectLine(c,I)||k)&&!rp(I.distanceTo(P))){if(v++,g)break;g=!0}}if(v===1&&this.containsPoint(h.start))return f&&(f.start.copy(h.start),f.end.copy(h.start)),!0;if(v!==2)return!1;let x=d.points,_=!1,w=0;for(let C=0;C<3;C++){let D=x[C],P=x[(C+1)%3];c.start.copy(D),c.end.copy(P),c.delta(a);let I=_?u.start:u.end,k=rp(p.distanceToPoint(D));if(rp(p.normal.dot(a))&&k){u.copy(c),w=2;break}if((p.intersectLine(c,I)||k)&&!rp(I.distanceTo(P))){if(w++,_)break;_=!0}}if(w===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(w!==2)return!1;if(h.delta(o),u.delta(a),o.dot(a)<0){let C=u.start;u.start=u.end,u.end=C}let b=h.start.dot(o),S=h.end.dot(o),A=u.start.dot(o),E=u.end.dot(o),T=S<A,M=b<E;return b!==E&&A!==S&&T===M?!1:(f&&(l.subVectors(h.start,u.start),l.dot(o)>0?f.start.copy(h.start):f.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(o)<0?f.end.copy(h.end):f.end.copy(u.end)),!0)}}}();rc.prototype.distanceToPoint=function(){let i=new O;return function(e){return this.closestPointToPoint(e,i),e.distanceTo(i)}}();rc.prototype.distanceToTriangle=function(){let i=new O,e=new O,t=["a","b","c"],n=new $o,r=new $o;return function(s,o=null,a=null){let l=o||a?n:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let h=0;h<3;h++){let u,d=t[h],f=s[d];this.closestPointToPoint(f,i),u=f.distanceToSquared(i),u<c&&(c=u,o&&o.copy(i),a&&a.copy(f));let p=this[d];s.closestPointToPoint(p,i),u=p.distanceToSquared(i),u<c&&(c=u,o&&o.copy(p),a&&a.copy(i))}for(let h=0;h<3;h++){let u=t[h],d=t[(h+1)%3];n.set(this[u],this[d]);for(let f=0;f<3;f++){let p=t[f],m=t[(f+1)%3];r.set(s[p],s[m]),KD(n,r,i,e);let y=i.distanceToSquared(e);y<c&&(c=y,o&&o.copy(i),a&&a.copy(e))}}return Math.sqrt(c)}}();var $0=class extends Wn{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new Fe,this.invMatrix=new Fe,this.points=new Array(8).fill().map(()=>new O),this.satAxes=new Array(3).fill().map(()=>new O),this.satBounds=new Array(3).fill().map(()=>new nc),this.alignedSatBounds=new Array(3).fill().map(()=>new nc),this.needsUpdate=!1}set(e,t,n){super.set(e,t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};$0.prototype.update=function(){return function(){let i=this.matrix,e=this.min,t=this.max,n=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let h=0;h<=1;h++){let u=1*l|2*c|4*h,d=n[u];d.x=l?t.x:e.x,d.y=c?t.y:e.y,d.z=h?t.z:e.z,d.applyMatrix4(i)}let r=this.satBounds,s=this.satAxes,o=n[0];for(let l=0;l<3;l++){let c=s[l],h=r[l],u=1<<l,d=n[u];c.subVectors(o,d),h.setFromPoints(c,n)}let a=this.alignedSatBounds;a[0].setFromPointsField(n,"x"),a[1].setFromPointsField(n,"y"),a[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();$0.prototype.intersectsBox=function(){let i=new nc;return function(e){this.needsUpdate&&this.update();let t=e.min,n=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(i.min=t.x,i.max=n.x,o[0].isSeparated(i)||(i.min=t.y,i.max=n.y,o[1].isSeparated(i))||(i.min=t.z,i.max=n.z,o[2].isSeparated(i)))return!1;for(let a=0;a<3;a++){let l=s[a],c=r[a];if(i.setFromBox(l,e),c.isSeparated(i))return!1}return!0}}();$0.prototype.intersectsTriangle=function(){let i=new rc,e=new Array(3),t=new nc,n=new nc,r=new O;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(i.copy(s),i.update(),s=i);let o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let u=0;u<3;u++){let d=o[u],f=a[u];if(t.setFromPoints(f,e),d.isSeparated(t))return!1}let l=s.satBounds,c=s.satAxes,h=this.points;for(let u=0;u<3;u++){let d=l[u],f=c[u];if(t.setFromPoints(f,h),d.isSeparated(t))return!1}for(let u=0;u<3;u++){let d=a[u];for(let f=0;f<4;f++){let p=c[f];if(r.crossVectors(d,p),t.setFromPoints(r,e),n.setFromPoints(r,h),t.isSeparated(n))return!1}}return!0}}();$0.prototype.closestPointToPoint=function(){return function(i,e){return this.needsUpdate&&this.update(),e.copy(i).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();$0.prototype.distanceToPoint=function(){let i=new O;return function(e){return this.closestPointToPoint(e,i),e.distanceTo(i)}}();$0.prototype.distanceToBox=function(){let i=["x","y","z"],e=new Array(12).fill().map(()=>new $o),t=new Array(12).fill().map(()=>new $o),n=new O,r=new O;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,n),s.closestPointToPoint(n,r),a&&a.copy(n),l&&l.copy(r)),0;let c=o*o,h=s.min,u=s.max,d=this.points,f=1/0;for(let m=0;m<8;m++){let y=d[m];r.copy(y).clamp(h,u);let g=y.distanceToSquared(r);if(g<f&&(f=g,a&&a.copy(y),l&&l.copy(r),g<c))return Math.sqrt(g)}let p=0;for(let m=0;m<3;m++)for(let y=0;y<=1;y++)for(let g=0;g<=1;g++){let v=(m+1)%3,x=(m+2)%3,_=y<<v|g<<x,w=1<<m|y<<v|g<<x,b=d[_],S=d[w];e[p].set(b,S);let A=i[m],E=i[v],T=i[x],M=t[p],C=M.start,D=M.end;C[A]=h[A],C[E]=y?h[E]:u[E],C[T]=g?h[T]:u[E],D[A]=u[A],D[E]=y?h[E]:u[E],D[T]=g?h[T]:u[E],p++}for(let m=0;m<=1;m++)for(let y=0;y<=1;y++)for(let g=0;g<=1;g++){r.x=m?u.x:h.x,r.y=y?u.y:h.y,r.z=g?u.z:h.z,this.closestPointToPoint(r,n);let v=r.distanceToSquared(n);if(v<f&&(f=v,a&&a.copy(n),l&&l.copy(r),v<c))return Math.sqrt(v)}for(let m=0;m<12;m++){let y=e[m];for(let g=0;g<12;g++){let v=t[g];KD(y,v,n,r);let x=n.distanceToSquared(r);if(x<f&&(f=x,a&&a.copy(n),l&&l.copy(r),x<c))return Math.sqrt(x)}}return Math.sqrt(f)}}();var i4=new O,n4=new O,r4=new O,Kz=new fe,Jz=new fe,ek=new fe,tk=new O;function RPe(i,e,t,n,r,s){let o;return s===WY?o=i.intersectTriangle(n,t,e,!0,r):o=i.intersectTriangle(e,t,n,s!==A8e,r),o===null?null:{distance:i.origin.distanceTo(r),point:r.clone()}}function NPe(i,e,t,n,r,s,o){i4.fromBufferAttribute(e,n),n4.fromBufferAttribute(e,r),r4.fromBufferAttribute(e,s);let a=RPe(i,i4,n4,r4,tk,o);if(a){t&&(Kz.fromBufferAttribute(t,n),Jz.fromBufferAttribute(t,r),ek.fromBufferAttribute(t,s),a.uv=_s.getUV(tk,i4,n4,r4,Kz,Jz,ek,new fe));let l={a:n,b:r,c:s,normal:new O,materialIndex:0};_s.getNormal(i4,n4,r4,l.normal),a.face=l,a.faceIndex=n}return a}function bQ(i,e,t,n,r){let s=n*3,o=i.index.getX(s),a=i.index.getX(s+1),l=i.index.getX(s+2),c=NPe(t,i.attributes.position,i.attributes.uv,o,a,l,e);return c?(c.faceIndex=n,r&&r.push(c),c):null}function FPe(i,e,t,n,r,s){for(let o=n,a=n+r;o<a;o++)bQ(i,e,t,o,s)}function zPe(i,e,t,n,r){let s=1/0,o=null;for(let a=n,l=n+r;a<l;a++){let c=bQ(i,e,t,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function wQ(i,e,t){return i===null||(i.point.applyMatrix4(e.matrixWorld),i.distance=i.point.distanceTo(t.ray.origin),i.object=e,i.distance<t.near||i.distance>t.far)?null:i}function d0(i,e,t,n){let r=i.a,s=i.b,o=i.c,a=e,l=e+1,c=e+2;t&&(a=t.getX(e),l=t.getX(e+1),c=t.getX(e+2)),r.x=n.getX(a),r.y=n.getY(a),r.z=n.getZ(a),s.x=n.getX(l),s.y=n.getY(l),s.z=n.getZ(l),o.x=n.getX(c),o.y=n.getY(c),o.z=n.getZ(c)}function ik(i,e,t,n,r,s,o){let a=t.index,l=t.attributes.position;for(let c=i,h=e+i;c<h;c++)if(d0(o,c*3,a,l),o.needsUpdate=!0,n(o,c,r,s))return!0;return!1}var SQ=class{constructor(i){this._getNewPrimitive=i,this._primitives=[]}getPrimitive(){let i=this._primitives;return i.length===0?this._getNewPrimitive():i.pop()}releasePrimitive(i){this._primitives.push(i)}};function Kc(i,e){return e[i+15]===65535}function r1(i,e){return e[i+6]}function h3(i,e){return e[i+14]}function d3(i){return i+8}function f3(i,e){return e[i+6]}function kPe(i,e){return e[i+7]}var kp=new Wn,o8=new O,BPe=["x","y","z"];function _T(i,e,t,n,r){let s=i*2,o=Nm,a=Pu,l=Lu;if(Kc(s,a)){let c=r1(i,l),h=h3(s,a);FPe(e,t,n,c,h,r)}else{let c=d3(i);a8(c,o,n,o8)&&_T(c,e,t,n,r);let h=f3(i,l);a8(h,o,n,o8)&&_T(h,e,t,n,r)}}function bT(i,e,t,n){let r=i*2,s=Nm,o=Pu,a=Lu;if(Kc(r,o)){let l=r1(i,a),c=h3(r,o);return zPe(e,t,n,l,c)}else{let l=kPe(i,a),c=BPe[l],h=n.direction[c]>=0,u,d;h?(u=d3(i),d=f3(i,a)):(u=f3(i,a),d=d3(i));let f=a8(u,s,n,o8)?bT(u,e,t,n):null;if(f){let m=f.point[c];if(h?m<=s[d+l]:m>=s[d+l+3])return f}let p=a8(d,s,n,o8)?bT(d,e,t,n):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var UPe=function(){let i,e,t=[],n=new SQ(()=>new Wn);return function(...s){i=n.getPrimitive(),e=n.getPrimitive(),t.push(i,e);let o=r(...s);n.releasePrimitive(i),n.releasePrimitive(e),t.pop(),t.pop();let a=t.length;return a>0&&(e=t[a-1],i=t[a-2]),o};function r(s,o,a,l,c=null,h=0,u=0){function d(v){let x=v*2,_=Pu,w=Lu;for(;!Kc(x,_);)v=d3(v),x=v*2;return r1(v,w)}function f(v){let x=v*2,_=Pu,w=Lu;for(;!Kc(x,_);)v=f3(v,w),x=v*2;return r1(v,w)+h3(x,_)}let p=s*2,m=Nm,y=Pu,g=Lu;if(Kc(p,y)){let v=r1(s,g),x=h3(p,y);return v0(s,m,i),l(v,x,!1,u,h+s,i)}else{let v=d3(s),x=f3(s,g),_=v,w=x,b,S,A,E;if(c&&(A=i,E=e,v0(_,m,A),v0(w,m,E),b=c(A),S=c(E),S<b)){_=x,w=v;let k=b;b=S,S=k,A=E}A||(A=i,v0(_,m,A));let T=Kc(_*2,y),M=a(A,T,b,u+1,h+_),C;if(M===2){let k=d(_),G=f(_)-k;C=l(k,G,!0,u+1,h+_,A)}else C=M&&r(_,o,a,l,c,h,u+1);if(C)return!0;E=e,v0(w,m,E);let D=Kc(w*2,y),P=a(E,D,S,u+1,h+w),I;if(P===2){let k=d(w),G=f(w)-k;I=l(k,G,!0,u+1,h+w,E)}else I=P&&r(w,o,a,l,c,h,u+1);return!!I}}}(),VPe=function(){let i=new rc,e=new rc,t=new Fe,n=new $0,r=new $0;return function s(o,a,l,c,h=null){let u=o*2,d=Nm,f=Pu,p=Lu;if(h===null&&(l.boundingBox||l.computeBoundingBox(),n.set(l.boundingBox.min,l.boundingBox.max,c),h=n),Kc(u,f)){let m=a,y=m.index,g=m.attributes.position,v=l.index,x=l.attributes.position,_=r1(o,p),w=h3(u,f);if(t.copy(c).invert(),l.boundsTree)return v0(o,d,r),r.matrix.copy(t),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>r.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(c),b.b.applyMatrix4(c),b.c.applyMatrix4(c),b.needsUpdate=!0;for(let S=_*3,A=(w+_)*3;S<A;S+=3)if(d0(e,S,y,g),e.needsUpdate=!0,b.intersectsTriangle(e))return!0;return!1}});for(let b=_*3,S=w+_*3;b<S;b+=3){d0(i,b,y,g),i.a.applyMatrix4(t),i.b.applyMatrix4(t),i.c.applyMatrix4(t),i.needsUpdate=!0;for(let A=0,E=v.count;A<E;A+=3)if(d0(e,A,v,x),e.needsUpdate=!0,i.intersectsTriangle(e))return!0}}else{let m=o+8,y=p[o+6];return v0(m,d,kp),!!(h.intersectsBox(kp)&&s(m,a,l,c,h)||(v0(y,d,kp),h.intersectsBox(kp)&&s(y,a,l,c,h)))}}}();function a8(i,e,t,n){return v0(i,e,kp),t.intersectBox(kp,n)}var wT=[],T5,Nm,Pu,Lu;function x2(i){T5&&wT.push(T5),T5=i,Nm=new Float32Array(i),Pu=new Uint16Array(i),Lu=new Uint32Array(i)}function s4(){T5=null,Nm=null,Pu=null,Lu=null,wT.length&&x2(wT.pop())}var Wb=Symbol("skip tree generation"),$b=new Wn,qb=new Wn,sp=new Fe,Ph=new $0,Ig=new $0,Og=new O,o4=new O,GPe=new O,jPe=new O,HPe=new O,nk=new Wn,qa=new SQ(()=>new rc),cs=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),cs.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let n=e.geometry,r=e._roots,s=n.getIndex(),o;return t.cloneBuffers?o={roots:r.map(a=>a.slice()),index:s.array.slice()}:o={roots:r,index:s.array},o}static deserialize(e,t,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),cs.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};let{index:r,roots:s}=e,o=new cs(t,{...n,[Wb]:!0});if(o._roots=s,n.setIndex){let a=t.getIndex();if(a===null){let l=new Ot(e.index,1,!1);t.setIndex(l)}else a.array!==r&&(a.array.set(r),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Wb]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Wb]||(this._roots=PPe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Wn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,n=t.index.array,r=t.attributes.position,s=r.array,o=r.offset||0,a=3;r.isInterleavedBufferAttribute&&(a=r.data.stride);let l,c,h,u,d=0,f=this._roots;for(let m=0,y=f.length;m<y;m++)l=f[m],c=new Uint32Array(l),h=new Uint16Array(l),u=new Float32Array(l),p(0,d),d+=l.byteLength;function p(m,y,g=!1){let v=m*2;if(h[v+15]===65535){let x=c[m+6],_=h[v+14],w=1/0,b=1/0,S=1/0,A=-1/0,E=-1/0,T=-1/0;for(let M=3*x,C=3*(x+_);M<C;M++){let D=n[M]*a+o,P=s[D+0],I=s[D+1],k=s[D+2];P<w&&(w=P),P>A&&(A=P),I<b&&(b=I),I>E&&(E=I),k<S&&(S=k),k>T&&(T=k)}return u[m+0]!==w||u[m+1]!==b||u[m+2]!==S||u[m+3]!==A||u[m+4]!==E||u[m+5]!==T?(u[m+0]=w,u[m+1]=b,u[m+2]=S,u[m+3]=A,u[m+4]=E,u[m+5]=T,!0):!1}else{let x=m+8,_=c[m+6],w=x+y,b=_+y,S=g,A=!1,E=!1;e?S||(A=e.has(w),E=e.has(b),S=!A&&!E):(A=!0,E=!0);let T=S||A,M=S||E,C=!1;T&&(C=p(x,y,S));let D=!1;M&&(D=p(_,y,S));let P=C||D;if(P)for(let I=0;I<3;I++){let k=x+I,G=_+I,U=u[k],Z=u[k+3],$=u[G],W=u[G+3];u[m+I]=U<$?U:$,u[m+I+3]=Z>W?Z:W}return P}}}traverse(e,t=0){let n=this._roots[t],r=new Uint32Array(n),s=new Uint16Array(n);o(0);function o(a,l=0){let c=a*2,h=s[c+15]===65535;if(h){let u=r[a+6],d=s[c+14];e(l,h,new Float32Array(n,a*4,6),u,d)}else{let u=a+8,d=r[a+6],f=r[a+7];e(l,h,new Float32Array(n,a*4,6),f)||(o(u,l+1),o(d,l+1))}}}raycast(e,t=e3){let n=this._roots,r=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),l=r.groups,c=o?t.side:t;for(let h=0,u=n.length;h<u;h++){let d=a?t[l[h].materialIndex].side:c,f=s.length;if(x2(n[h]),_T(0,r,d,e,s),s4(),a){let p=l[h].materialIndex;for(let m=f,y=s.length;m<y;m++)s[m].face.materialIndex=p}}return s}raycastFirst(e,t=e3){let n=this._roots,r=this.geometry,s=t.isMaterial,o=Array.isArray(t),a=null,l=r.groups,c=s?t.side:t;for(let h=0,u=n.length;h<u;h++){let d=o?t[l[h].materialIndex].side:c;x2(n[h]);let f=bT(0,r,d,e);s4(),f!=null&&(a==null||f.distance<a.distance)&&(a=f,o&&(f.face.materialIndex=l[h].materialIndex))}return a}intersectsGeometry(e,t){let n=this.geometry,r=!1;for(let s of this._roots)if(x2(s),r=VPe(0,n,e,t),s4(),r)break;return r}shapecast(e,t,n){let r=this.geometry;if(e instanceof Function){if(t){let d=t;t=(f,p,m,y)=>{let g=p*3;return d(f,g,g+1,g+2,m,y)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let s=qa.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:c}=e;if(l&&c){let d=l;l=(f,p,m,y,g)=>d(f,p,m,y,g)?!0:ik(f,p,r,c,m,y,s)}else l||(c?l=(d,f,p,m)=>ik(d,f,r,c,p,m,s):l=(d,f,p)=>p);let h=!1,u=0;for(let d of this._roots){if(x2(d),h=UPe(0,r,a,l,o,u),s4(),h)break;u+=d.byteLength}return qa.releasePrimitive(s),h}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:s}=n,o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,c=e.geometry.attributes.position;sp.copy(t).invert();let h=qa.getPrimitive(),u=qa.getPrimitive();if(s){let f=function(p,m,y,g,v,x,_,w){for(let b=y,S=y+g;b<S;b++){d0(u,b*3,l,c),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let A=p,E=p+m;A<E;A++)if(d0(h,A*3,o,a),h.needsUpdate=!0,s(h,u,A,b,v,x,_,w))return!0}return!1};if(r){let p=r;r=function(m,y,g,v,x,_,w,b){return p(m,y,g,v,x,_,w,b)?!0:f(m,y,g,v,x,_,w,b)}}else r=f}e.getBoundingBox(qb),qb.applyMatrix4(t);let d=this.shapecast({intersectsBounds:f=>qb.intersectsBox(f),intersectsRange:(f,p,m,y,g,v)=>($b.copy(v),$b.applyMatrix4(sp),e.shapecast({intersectsBounds:x=>$b.intersectsBox(x),intersectsRange:(x,_,w,b,S)=>r(f,p,x,_,y,g,b,S)}))});return qa.releasePrimitive(h),qa.releasePrimitive(u),d}intersectsBox(e,t){return Ph.set(e.min,e.max,t),Ph.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Ph.intersectsBox(n),intersectsTriangle:n=>Ph.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Ph.set(e.boundingBox.min,e.boundingBox.max,t),Ph.needsUpdate=!0;let a=this.geometry,l=a.attributes.position,c=a.index,h=e.attributes.position,u=e.index,d=qa.getPrimitive(),f=qa.getPrimitive(),p=o4,m=GPe,y=null,g=null;r&&(y=jPe,g=HPe);let v=1/0,x=null,_=null;return sp.copy(t).invert(),Ig.matrix.copy(sp),this.shapecast({boundsTraverseOrder:w=>Ph.distanceToBox(w),intersectsBounds:(w,b,S)=>S<v&&S<o?(b&&(Ig.min.copy(w.min),Ig.max.copy(w.max),Ig.needsUpdate=!0),!0):!1,intersectsRange:(w,b)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:S=>Ig.distanceToBox(S),intersectsBounds:(S,A,E)=>E<v&&E<o,intersectsRange:(S,A)=>{for(let E=S*3,T=(S+A)*3;E<T;E+=3){d0(f,E,u,h),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let M=w*3,C=(w+b)*3;M<C;M+=3){d0(d,M,c,l),d.needsUpdate=!0;let D=d.distanceToTriangle(f,p,y);if(D<v&&(m.copy(p),g&&g.copy(y),v=D,x=M/3,_=E/3),D<s)return!0}}}});{let S=u?u.count:h.count;for(let A=0,E=S;A<E;A+=3){d0(f,A,u,h),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let T=w*3,M=(w+b)*3;T<M;T+=3){d0(d,T,c,l),d.needsUpdate=!0;let C=d.distanceToTriangle(f,p,y);if(C<v&&(m.copy(p),g&&g.copy(y),v=C,x=T/3,_=A/3),C<s)return!0}}}}}),qa.releasePrimitive(d),qa.releasePrimitive(f),v===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=v,n.faceIndex=x,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(sp),m.applyMatrix4(sp),r.distance=m.sub(r.point).length(),r.faceIndex=_),n)}closestPointToPoint(e,t={},n=0,r=1/0){let s=n*n,o=r*r,a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:h=>(Og.copy(e).clamp(h.min,h.max),Og.distanceToSquared(e)),intersectsBounds:(h,u,d)=>d<a&&d<o,intersectsTriangle:(h,u)=>{h.closestPointToPoint(e,Og);let d=e.distanceToSquared(Og);return d<a&&(o4.copy(Og),a=d,l=u),d<s}}),a===1/0)return null;let c=Math.sqrt(a);return t.point?t.point.copy(o4):t.point=o4.clone(),t.distance=c,t.faceIndex=l,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{v0(0,new Float32Array(t),nk),e.union(nk)}),e}},rk=cs.prototype.raycast;cs.prototype.raycast=function(...i){if(i[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[e,t,n,r]=i;return rk.call(this,n,e.material).forEach(s=>{s=wQ(s,e,t),s&&r.push(s)}),r}else return rk.apply(this,i)};var sk=cs.prototype.raycastFirst;cs.prototype.raycastFirst=function(...i){if(i[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[e,t,n]=i;return wQ(sk.call(this,n,e.material),e,t)}else return sk.apply(this,i)};var ok=cs.prototype.closestPointToPoint;cs.prototype.closestPointToPoint=function(...i){if(i[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),i.unshift();let e=i[1],t={};return i[1]=t,ok.apply(this,i),e&&e.copy(t.point),t.distance}else return ok.apply(this,i)};var ak=cs.prototype.closestPointToGeometry;cs.prototype.closestPointToGeometry=function(...i){let e=i[2],t=i[3];if(e&&e.isVector3||t&&t.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let n={},r={},s=i[1];return i[2]=n,i[3]=r,ak.apply(this,i),e&&e.copy(n.point),t&&t.copy(r.point).applyMatrix4(s),n.distance}else return ak.apply(this,i)};var lk=cs.prototype.refit;cs.prototype.refit=function(...i){let e=i[0],t=i[1];if(t&&(t instanceof Set||Array.isArray(t))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let n=new Set;t.forEach(r=>n.add(r)),e&&e.forEach(r=>n.add(r)),lk.call(this,n)}else lk.apply(this,i)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(i=>{let e=cs.prototype[i];cs.prototype[i]=function(...t){return(t[0]===null||t[0].isMesh)&&(t.shift(),console.warn(`MeshBVH: The function signature for "${i}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,t)}});var Rg=t7(w8e()),WPe=.5*(Math.sqrt(3)-1),Ng=(3-Math.sqrt(3))/6,$Pe=1/3,Xa=1/6,ov=i=>Math.floor(i)|0,ck=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Xb=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Yb(i=Math.random){let e=AQ(i),t=new Float64Array(e).map(r=>ck[r%12*2]),n=new Float64Array(e).map(r=>ck[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*WPe,h=ov(r+c),u=ov(s+c),d=(h+u)*Ng,f=h-d,p=u-d,m=r-f,y=s-p,g,v;m>y?(g=1,v=0):(g=0,v=1);let x=m-g+Ng,_=y-v+Ng,w=m-1+2*Ng,b=y-1+2*Ng,S=h&255,A=u&255,E=.5-m*m-y*y;if(E>=0){let C=S+e[A],D=t[C],P=n[C];E*=E,o=E*E*(D*m+P*y)}let T=.5-x*x-_*_;if(T>=0){let C=S+g+e[A+v],D=t[C],P=n[C];T*=T,a=T*T*(D*x+P*_)}let M=.5-w*w-b*b;if(M>=0){let C=S+1+e[A+1],D=t[C],P=n[C];M*=M,l=M*M*(D*w+P*b)}return 70*(o+a+l)}}function qPe(i=Math.random){let e=AQ(i),t=new Float64Array(e).map(s=>Xb[s%12*3]),n=new Float64Array(e).map(s=>Xb[s%12*3+1]),r=new Float64Array(e).map(s=>Xb[s%12*3+2]);return function(s,o,a){let l,c,h,u,d=(s+o+a)*$Pe,f=ov(s+d),p=ov(o+d),m=ov(a+d),y=(f+p+m)*Xa,g=f-y,v=p-y,x=m-y,_=s-g,w=o-v,b=a-x,S,A,E,T,M,C;_>=w?w>=b?(S=1,A=0,E=0,T=1,M=1,C=0):_>=b?(S=1,A=0,E=0,T=1,M=0,C=1):(S=0,A=0,E=1,T=1,M=0,C=1):w<b?(S=0,A=0,E=1,T=0,M=1,C=1):_<b?(S=0,A=1,E=0,T=0,M=1,C=1):(S=0,A=1,E=0,T=1,M=1,C=0);let D=_-S+Xa,P=w-A+Xa,I=b-E+Xa,k=_-T+2*Xa,G=w-M+2*Xa,U=b-C+2*Xa,Z=_-1+3*Xa,$=w-1+3*Xa,W=b-1+3*Xa,X=f&255,j=p&255,H=m&255,V=.6-_*_-w*w-b*b;if(V<0)l=0;else{let Q=X+e[j+e[H]];V*=V,l=V*V*(t[Q]*_+n[Q]*w+r[Q]*b)}let B=.6-D*D-P*P-I*I;if(B<0)c=0;else{let Q=X+S+e[j+A+e[H+E]];B*=B,c=B*B*(t[Q]*D+n[Q]*P+r[Q]*I)}let q=.6-k*k-G*G-U*U;if(q<0)h=0;else{let Q=X+T+e[j+M+e[H+C]];q*=q,h=q*q*(t[Q]*k+n[Q]*G+r[Q]*U)}let K=.6-Z*Z-$*$-W*W;if(K<0)u=0;else{let Q=X+1+e[j+1+e[H+1]];K*=K,u=K*K*(t[Q]*Z+n[Q]*$+r[Q]*W)}return 32*(l+c+h+u)}}function AQ(i){let e=new Uint8Array(512);for(let t=0;t<512/2;t++)e[t]=t;for(let t=0;t<512/2-1;t++){let n=t+~~(i()*(256-t)),r=e[t];e[t]=e[n],e[n]=r}for(let t=256;t<512;t++)e[t]=e[t-256];return e}var ca=new _s,XPe=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let s=1;ca.a.fromBufferAttribute(e,r),ca.b.fromBufferAttribute(e,r+1),ca.c.fromBufferAttribute(e,r+2),s*=ca.getArea(),t[r/3]=s}this.distribution=new Float32Array(e.count/3);let n=0;for(let r=0;r<t.length;r++)n+=t[r],this.distribution[r]=n;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let n=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*n);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,n=0,r=t.length-1,s=-1;for(;n<=r;){let o=Math.ceil((n+r)/2);if(o===0||t[o-1]<=e&&t[o]>e){s=o;break}else e<t[o]?r=o-1:n=o+1}return s}sampleFace(e,t,n){let r=this.randomFunction(),s=this.randomFunction();return r+s>1&&(r=1-r,s=1-s),ca.a.fromBufferAttribute(this.positionAttribute,e*3),ca.b.fromBufferAttribute(this.positionAttribute,e*3+1),ca.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(ca.a,r).addScaledVector(ca.b,s).addScaledVector(ca.c,1-(r+s)),ca.getNormal(n),this}},YPe=t7(jY()),ZPe=new Fe,QPe=new Fe,KPe=new Fe,l8;(i=>{function e(t){return t&&t.__isSPEObject}i.is=e})(l8||(l8={}));var JD=i=>class extends i{constructor(){super(...arguments),this.hiddenMatrix=new Fe,this.matrixWorldRigid=new Fe,this.shearScale=new Fe,this.shearScaleInv=new Fe}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof Pi&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(e&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,t=0){if(e(this,t)!==!0)for(let n of this.children)l8.is(n)&&n.traverseObject(e,t+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:n,v:r,q:s}=(0,YPe.SVD)(t),o=ZPe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),a=QPe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=KPe.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,t){this.updateWorldMatrix(!0,!1);let n=new Fe().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof Fe?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),t!==void 0&&(this.children.pop(),this.children.splice(t,0,e)),this}},JPe=class extends JD(Pi){},eLe=i=>i.type==="Mesh",_2=class extends JPe{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let n=this.children[e];(n==null?void 0:n.object)!==t&&(n&&this.remove(n),n=new _2(t),this.add(n),n.matrixAutoUpdate=!1,n.matrix=t.matrix,n.hiddenMatrix=t.hiddenMatrix),n.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return eLe(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Qh=new O,Kh=new O,s1=new Fe,TQ=[new O(-1,1,1),new O(-1,-1,1),new O(1,-1,1),new O(1,1,1),new O(-1,1,-1),new O(-1,-1,-1),new O(1,-1,-1),new O(1,1,-1)],tLe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],iLe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],uk=(i,e,t)=>{i.updateEntityBoxSize(Qh,Kh),s1.copy(e).multiply(i.matrixWorld),Kh.x===0&&Kh.y===0&&Kh.z===0?t.push(new O(Qh.x,Qh.y,Qh.z).applyMatrix4(s1)):TQ.forEach(n=>{t.push(n.clone().multiply(Kh).add(Qh).applyMatrix4(s1))})},hk=class extends Wn{constructor(){super(...arguments),this.matrix=new Fe,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let n=new Fe().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let r=[];return n===!0?e.traverseEntity(s=>{s.visible&&uk(s,t,r)}):uk(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(s1.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Kh).multiplyScalar(.5),this.getCenter(Qh),s1.copy(this.matrix).setPosition(Qh),this.vertices=TQ.map(e=>e.clone().multiply(Kh).applyMatrix4(s1))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=tLe.map(([e,t])=>new $o(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new O))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=iLe.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},lu={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},nLe=class extends nZ{constructor(){super()}getPoints(e=12){let t=[],n,r=this.getCurveLengths(),s=r[r.length-1]/r.length;for(let o=0,a=this.curves;o<a.length;o++){let l=a[o],c=o===0?r[o]:r[o]-r[o-1],h=Math.ceil(e*c/s),u=l.getPoints(h);for(let d=0;d<u.length;d++){let f=u[d];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},ST=.001;function AT(i,e,t){return e.clone().sub(i).cross(e.clone().sub(t)).length()<=ST}function Zb(i,e){let t=new O(...i.position),n=new O(...i.controlNext.position),r=new O(...e.controlPrevious.position),s=new O(...e.position);return AT(t,n,s)&&AT(t,r,s)}function MQ(i){let e=i.points.map(h=>new O(...h.data.position)),t=[i.points[0]],n=new O(...t[0].data.position);for(let h=0;h<i.points.length-1;h++)AT(n,e[h],e[h+1])||(t.push(i.points[h]),n=e[h]);t.push(i.points[i.points.length-1]);let r=i.isClosed,s=t.length-(r?0:1),o=t.length,a=[];for(let h=0;h<o;h++){let u=t[h].data,d=new O(...u.position),f=new O(...u.controlPrevious.position),p=new O(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!i.isClosed&&(h===0||h===o-1)){a[h]={...m,removedLength:0};continue}let y=r&&h==0?o-1:h-1,g=r&&h==o-1?0:h+1,v=t[y].data,x=t[g].data,_=new O(...v.position),w=new O(...x.position),b=_.clone().sub(d).normalize(),S=w.clone().sub(d).normalize();Object.assign(m,{prevDir:b,nextDir:S});let A=Zb(v,u),E=Zb(u,x);if(!A||!E)a[h]={...m,removedLength:0};else{let T=b.clone().add(S).normalize(),M=T.clone().cross(b).length()/b.dot(T);a[h]={...m,tan:M,removedLength:u.roundness/M}}}for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d],m=null;if(!Zb(t[u].data,t[d].data))f.position.distanceTo(p.position)>ST&&(m=new b5(f.position,f.controlNext,p.controlPrevious,p.position));else{let y=f.position.clone(),g=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&y.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&g.add(p.prevDir.clone().setLength(p.removedLength))),y.distanceTo(g)>ST&&(m=new b5(y,y.clone().lerp(g,.3),g.clone().lerp(y,.3),g))}l[2*h+1]=m}for(let h=0;h<o;h++){let u=a[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,y=u.prevDir.clone().add(u.nextDir).normalize(),g=f.clone().lerp(p,.5),v=f.distanceTo(p)/2,x=y.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(v,2))).add(g),_=y.clone().multiplyScalar(-m).add(x),w=d.distanceTo(_)/d.distanceTo(g),b=u.prevDir.clone().multiplyScalar(w*d.distanceTo(f)).add(d),S=b.clone().lerp(_,2),A=f.clone().lerp(b,4/3),E=p.clone().lerp(S,4/3);l[2*h]=new b5(f,A,E,p)}let c=new nLe;return l.forEach(h=>{h&&c.add(h)}),c}var Fn;(i=>{function e(t){return t&&t.__isEntity}i.is=e})(Fn||(Fn={}));var y0=i=>Fn.is(i),EQ=i=>class extends JD(i){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new hk,this._recursiveBBox=new hk,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let t=this.children[e];if(Fn.is(t))return t}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let t=e.parent;if(Fn.is(t))e=t;else return}return e}forInstancesRec(e){this.instances.forEach(t=>{t.disposed||e(t),t.forInstancesRec(e)})}super_Entity(e,t){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=t,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,t,n=!1){if(!(this.data.states.length===0&&!n)){for(let r of this.data.states)zp.toOps(this.data,r.data).forEach(s=>{let o=KA.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=zp.patch(this.data,r),zp.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,t)}))}n&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(t.scene)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,t){e.setScalar(0),t.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{y0(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let t;return this.traverseEntity(n=>{n.uuid===e&&(t=n)}),t}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children,n=t.indexOf(this)+1;if(Fn.is(t[n]))return t[n];if(Fn.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&Fn.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let t=this;for(;e>0&&t!==null;)t=t.parent,e-=1;return t}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let t=this.parent;for(;t;){if(e===t)return!0;t=t.parent}return!1}countToAccestor(e){let t=0,n=this;for(;n!==e;){if(n===null)return-1;n=n.parent,t+=1}return t}forEachEntity(e){for(let t of this.children)y0(t)&&e(t)}traverseEntityAncestors(e){this.traverseAncestors(t=>{Fn.is(t)&&e(t)})}traverseEntity(e,t=0){if(e(this,t)!==!0)for(let n of this.children)y0(n)&&n.traverseEntity(e,t+1)}traverseVisibleEntity(e){e(this);for(let t of this.children)y0(t)&&t.visible&&t.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,t=!0){return super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>y0(e))}isAncestorOf(e){if(this.uuid===e)return!1;let t=!1;return this.traverseEntity(n=>{n.uuid===e&&(t=!0)}),t}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return QA(t,e)}updateTransformState(e){let t=!1;return e.position&&(this.position.fromArray(e.position),t=!0),e.rotation&&(this.rotation.fromArray(e.rotation),t=!0),e.scale&&(t=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(t=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??$1.identity)),t&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),t}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)Fn.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{Fn.is(e)&&e.disposeRecursively()})}toState(e=[]){let t={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return QA(t,e)}updateByOp(e,t,n,r){let s=this.data;this.data=t;let o=e,a=Qc(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=z0.zoom(h,e.path.slice(2));if(u)for(let d in e.props)e.props[d]===void 0&&d in u&&(c[d]=u[d])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=z0.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,zp.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),Qc(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let h of Object.keys(e.props)){l[l.length-1]=h;let u=n.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[h],u.updateState(Td.apply(u.component.data,u.overrideData),n))}}else{let h=n.scene.findInstance([this.uuid,...l]);if(h){let u=z0.zoom(h.component.data,c);if(e={...e,path:c},e.type===0){let d=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(d===e.props&&(d={...e.props}),d[f]=u[f]);e={...e,props:d}}h.overrideData=n8.resolve(t.overrides,l),h.updateByOp(e,eo.applySimple(h.data,e),n,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let h of X1.rootOverrideProps)h in e.props&&(c===void 0&&(c={}),c[h]=e.props[h]);c&&(l={...e,props:c})}else for(let c of X1.rootOverrideProps)if(Qc(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=Td.filterOp(c.overrideData,l);h&&c.updateByOp(h,eo.applySimple(c.data,h),n,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=Td.filterOp(c.overrideData,e);if(h){let u;s===c.data&&e===h?u=t:u=eo.applySimple(c.data,h),c.updateByOp(h,u,n,!0)}}})}}updateByPatchedOpBase(e,t,n){if(this.dataPatched=t,e.path.length===0&&e.type===0)e.props.type!==void 0&&!Xd.is(e.props.type)&&lu.changeEntityProptotype(this,t,n);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){lu.changeEntityProptotype(this,t,n);for(let r of this.children)Fn.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,t,n)}updateByPatchedOp(e,t,n){if(e.path.length===0&&e.type===0&&this.updateState(e.props,n),Qc(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.scene),Qc(e.path,["cloner"])!==null){let r=eo.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(t.cloner,n.scene):(this.setFromClonerState(t.cloner,n),this.expandCloner(n.scene)),this.updateVisible()}}updatePathSnapping(e,t=this.dataPatched.pathSnapping){if(t!=null&&t.pathId){let n=e.find(t.pathId);this._pathSnappingObject=n,n?this.updatePathSnappingSlide(t):e.addPendingCommand(()=>{this.updatePathSnapping(e)})}}updatePathSnappingSlide(e=this.dataPatched.pathSnapping){var h;let t=this._pathSnappingObject;if(!t)return;t.snappedEntities.add(this);let n=t.data,r=MQ(n.geometry.path),s=(e.slide+e.offset)%1,o=r.getPointAt(s),a=this.parent?(h=this.parent)==null?void 0:h.matrixWorld:new Fe,l=new Fe().multiplyMatrices(a.clone().invert(),t.matrixWorld);o.applyMatrix4(l);let c={position:o.toArray(),rotation:n.rotation};if(e.orientation==="tangential"){let u=new Fe().extractRotation(t.matrixWorld),d=r.getTangentAt(s).applyMatrix4(u).add(o),f=new Fe().lookAt(o,d,new O(0,1,0)),p=new xs().setFromRotationMatrix(f);c={...c,rotation:[p.x,p.y,p.z]}}this.updateTransformState(c)}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,t){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,t),this.updateVisible()),this.updateTransformState(e),t!=null&&t.scene&&this.updatePathSnapping(t.scene,e.pathSnapping)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof lu.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,t){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):(this.cloner===void 0&&(this.cloner=new lu.Cloner(this,e),t.scene.addPendingExpandCloner(this)),this.cloner.updateState(e,t.scene)))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},rLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},i.parameters),n=t.width/2,r=t.radiusTop??n,s=t.radiusBottom??n;return r===s?(r=n,s=n):r>s?(r=n,s=s*n/r):(r=r*n/s,s=n),{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width),radiusTop:r,radiusBottom:s})}}static build(i){let{width:e,depth:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:f}=i.parameters,p;return u||f?p=new CQ(c,h,n,r,s,o,a,l*Math.PI/180,u,u,d,f):p=new _D(c,h,n,r,s,o,a,l*Math.PI/180),p.scale(1,1,t/e),Object.assign(p,{userData:{...i,type:"CylinderGeometry"}})}};function Rc(i,e,t){t.x=i.x*e.x,t.y=i.y,t.z=i.x*e.y}function dk(i){return new fe(i.y,-i.x)}var CQ=class extends _t{constructor(i,e,t,n,r,s,o,a,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",i=i!==void 0?i:1,e=e!==void 0?e:1,t=t||1,n=Math.floor(n)||8,r=Math.floor(r)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],p=[],m=[],y=[],g=0,v=t/2,x=new O,_=new O;d&&i==0&&(i=l),d&&e==0&&(e=c);let w=new fe(i,v),b=new fe(e,-v),S=null,A=null,E=null,T=null,M=w.clone().sub(b),C=0,D=0,P=0;u>0&&(C=Math.min(i,e)*(1-u),D=i-C,P=e-C);let I=w.clone();I.x-=C;let k=Math.PI-M.angle(),G=M.angle(),U=Math.tan(G/2),Z=Math.tan(k/2),$=U+Z,W=u?$:Z,X=u?$:U;if(l=Math.min(l,(i-D)/W,M.length()/$),c=Math.min(c,(e-P)/X,M.length()/$),l>0){let K=l/U;S=w.clone().sub(new fe(K,l)),u&&(E=S.clone(),E.x-=C-$*l),w.sub(M.clone().setLength(K))}if(c>0){let K=c/Z;A=b.clone().sub(new fe(K,-c)),b.add(M.clone().setLength(K)),u&&(T=A.clone(),T.x-=C-$*c,I.sub(M.clone().setLength(K)))}M=w.clone().sub(b);let j=M.length()<.5,H=[];for(let K=0;K<=n;K++){let Q=[],oe=K/n,ne=oe*a+o,L=new fe(Math.sin(ne),Math.cos(ne));T&&A?(V(Q,oe,L,k,c,T,-1,!0),V(Q,oe,L,G,c,A,-1,!1)):A?(B(Q,L,A.x,0,-1),V(Q,oe,L,G,c,A,-1,!1)):s||B(Q,L,e,P,-1);let z=dk(M).normalize();if(Rc(z,L,x),!j)for(let Y=0;Y<=r;Y++){let J=Y/r,ee=M.clone().multiplyScalar(J).add(b);Rc(ee,L,_),p.push(_.x,_.y,_.z),m.push(x.x,x.y,x.z),y.push(oe,.5+_.y/t),Q.push(g++)}if(E&&S?(V(Q,oe,L,k,l,S,1,!1),V(Q,oe,L,G,l,E,1,!0)):S?(V(Q,oe,L,k,l,S,1,!1),B(Q,L,S.x,0,1)):s||B(Q,L,i,D,1),u&&!j){let Y=dk(M).multiplyScalar(-1).normalize();Rc(Y,L,x);for(let J=0;J<=r;J++){let ee=J/r,F=M.clone().multiplyScalar(-ee).add(I);Rc(F,L,_),p.push(_.x,_.y,_.z),m.push(x.x,x.y,x.z),y.push(oe,.5+_.y/t),Q.push(g++)}}u&&!s&&Q.push(Q[0]),H.push(Q)}for(let K=0;K<H.length-1;K++)for(let Q=0;Q<H[0].length-1;Q++){if(s&&u&&Q==r)continue;let oe=H[K][Q],ne=H[K+1][Q],L=H[K+1][Q+1],z=H[K][Q+1],Y=p[L*3+0],J=p[L*3+2];f.push(oe,ne,z),(Y!=0||J!=0)&&f.push(ne,L,z)}a<Math.PI*2&&(q(-1,H[0],o),q(1,H[H.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(m,3)),this.setAttribute("uv",new We(y,2));function V(K,Q,oe,ne,L,z,Y,J){for(let ee=0;ee<h+1;ee++){let F=ee/h,N=Y<0?F:1-F;J&&(N-=1),N*=ne;let te=new fe(Math.sin(N),Math.cos(N)*Y),le=te.clone().multiplyScalar(L).add(z);Rc(le,oe,_),p.push(_.x,_.y,_.z),Rc(te,oe,x),m.push(x.x,x.y,x.z),y.push(Q,.5+_.y/t),K.push(g++)}}function B(K,Q,oe,ne,L){let z=new O,Y=new fe,J=[oe,ne];L<0&&J.reverse();for(let ee of J)Y.set(ee,v*L),Rc(Y,Q,z),p.push(z.x,z.y,z.z),m.push(0,L,0),y.push(.5,.5),K.push(g++)}function q(K,Q,oe){let ne=new fe(Math.sin(oe),Math.cos(oe)),L=new fe(-Math.cos(oe),Math.sin(oe)),z=new O,Y=K<0?(F,N,te)=>f.push(F,N,te):(F,N,te)=>f.push(F,te,N),J=new fe((i+e+D+P)/4,0);Rc(J,ne,z),p.push(z.x,z.y,z.z),m.push(L.x,0,L.y),y.push(.5,.5);let ee=g++;for(let F of Q){let N=p.slice(F*3,F*3+3);p.push(...N),m.push(L.x,0,L.y);let te=y.slice(F*2,F*2+2);y.push(...te),g++}for(let F=ee+1;F<g-1;F++)Y(ee,F,F+1);Y(ee,g-1,ee+1)}}},sLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,depth:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=i.parameters,d;return c>0||h>0||l<360?d=new CQ(0,e/2,n,r,s,o,a,l*Math.PI/180,c,h,u,0,!0):d=new sZ(e/2,n,r,s,o),d.scale(1,1,t/e),Object.assign(d,{userData:{...i,type:"ConeGeometry"}})}},oLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=i.parameters,c;return a==0?c=new Wd(e,t,n,r,s,o):c=new aLe(e,t,n,r,s,o,a,l),Object.assign(c,{userData:{...i,type:"CubeGeometry"}})}},Qb=Math.PI/2,aLe=class extends _t{constructor(e=1,t=1,n=1,r=1,s=1,o=1,a=0,l=4){super(),this.type="BoxGeometry";let c=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o),l=Math.floor(l),a=Math.min(a,e/2,t/2,n/2);let h=[],u=[],d=[],f=[],p=0,m=0;y("z","y","x",-1,-1,n,t,e,o,s,0),y("z","y","x",1,-1,n,t,-e,o,s,1),y("x","z","y",1,1,e,n,t,r,o,2),y("x","z","y",1,-1,e,n,-t,r,o,3),y("x","y","z",1,-1,e,t,n,r,s,4),y("x","y","z",-1,-1,e,t,-n,r,s,5),a>0&&(g("z","y","x",-1,-1,1,n,t,e,o,0),g("z","y","x",1,-1,-1,n,t,e,o,1),g("z","y","x",-1,1,-1,n,t,e,o,1),g("z","y","x",1,1,1,n,t,e,o,0),g("x","y","z",-1,-1,-1,e,t,n,r,0),g("x","y","z",1,-1,1,e,t,n,r,1),g("x","y","z",-1,1,1,e,t,n,r,0),g("x","y","z",1,1,-1,e,t,n,r,1),g("y","x","z",-1,-1,1,t,e,n,s,0),g("y","x","z",1,-1,-1,t,e,n,s,1),g("y","x","z",1,1,1,t,e,n,s,1),g("y","x","z",-1,1,-1,t,e,n,s,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(h),this.setAttribute("position",new We(u,3)),this.setAttribute("normal",new We(d,3)),this.setAttribute("uv",new We(f,2));function y(x,_,w,b,S,A,E,T,M,C,D){let P=(A-2*a)/M,I=(E-2*a)/C,k=A/2-a,G=E/2-a,U=T/2,Z=M+1,$=C+1,W=0,X=0,j=new O;for(let H=0;H<$;H++){let V=H*I-G;for(let B=0;B<Z;B++){let q=B*P-k;j[x]=q*b,j[_]=V*S,j[w]=U,u.push(j.x,j.y,j.z),j[x]=0,j[_]=0,j[w]=T>0?1:-1,d.push(j.x,j.y,j.z),f.push(B/M),f.push(1-H/C),W+=1}}for(let H=0;H<C;H++)for(let V=0;V<M;V++){let B=p+V+Z*H,q=p+V+Z*(H+1),K=p+(V+1)+Z*(H+1),Q=p+(V+1)+Z*H;h.push(B,q,Q),h.push(q,K,Q),X+=6}c.addGroup(m,X,D),m+=X,p+=W}function g(x,_,w,b,S,A,E,T,M,C,D){let P=(E-2*a)/C,I=E/2-a,k=T/2-a,G=M/2,U=C+1,Z=0,$=0,W=new O,X=new O;for(let j=0;j<l+1;j++){let H=j/l*Qb,V=Math.sin(H)*a,B=(1-Math.cos(H))*a,q=Math.sin(H),K=Math.cos(H);W[_]=(k+V)*S,W[w]=(G-B)*A,X[x]=0,X[_]=q*Math.sign(W[_]),X[w]=K*Math.sign(W[w]);for(let Q=0;Q<U;Q++){let oe=Q*P-I;W[x]=oe*b,u.push(W.x,W.y,W.z),d.push(X.x,X.y,X.z),f.push(Q/C),f.push(0),Z+=1}}for(let j=0;j<l;j++)for(let H=0;H<C;H++){let V=p+H+U*j,B=p+H+U*(j+1),q=p+(H+1)+U*(j+1),K=p+(H+1)+U*j;h.push(V,B,K),h.push(B,q,K),$+=6}c.addGroup(m,$,D),m+=$,p+=Z}function v(x,_,w){let b=new O,S=new O(e/2,t/2,n/2);S.subScalar(a);let A=[],E=x*_*w>0?(M,C,D)=>h.push(M,C,D):(M,C,D)=>h.push(M,D,C);for(let M=0;M<=l;M++){let C=[],D=Qb*(1-M/l),P=Math.cos(D),I=Math.sin(D),k=0;for(let G=0;G<=M;G++){let U=Math.cos(k),Z=Math.sin(k);b.x=P*U,b.y=I,b.z=P*Z;let $=S.clone().addScaledVector(b,a);u.push(x*$.x,_*$.y,w*$.z),d.push(x*b.x,_*b.y,w*b.z),f.push(0,0),C.push(p++),k+=Qb/M}A.push(C)}let T=A.length-1;for(let M=0;M<T;M++){let C=A[M],D=A[M+1],P=C.length-1;E(C[0],D[1],D[0]);for(let I=1;I<=P;I++)E(C[I-1],C[I],D[I]),E(C[I],D[I+1],D[I])}}}},eP=class extends _t{constructor(i=[],e=[],t="",n=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),h(),this.setAttribute("position",new We(o,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(a,2));return;function c(){var G;r=Math.min(1-1e-5,r),r==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[t],d=new O,f=d.clone(),p=new _s,m=r*n,y=n-m,g=s+1,v=new O,x=(U,Z)=>v.subVectors(U,Z).normalize(),_=(U,Z)=>Array(U).fill(void 0).map(Z),w=_(i.length/3,(U,Z)=>new O().fromArray(i,Z*3).setLength(n)),b=[],S=1e6;for(let U=0;U<w.length;U++){let Z=w[U],$=[],W,X,j,H=1e10,V=-1;for(;(V=e.indexOf(U,V+1))!=-1;){let Q=V-V%3;W=e[Q+(V+1)%3],X=e[Q+(V+2)%3],j=Z.distanceToSquared(w[W]),H=Math.min(H,j),$.push([W,X,j])}H+=1e-6;let B=[],q=0,K=$.length;for(let Q=0;Q<K;Q++){[W,X,j]=$[q];let oe=((G=b[W])==null?void 0:G.includes(U))==!0;j<=H&&B.push(W+ +oe*S),q=$.findIndex(ne=>ne[0]==X)}b.push(B)}let A=[];{let U=0,Z=0,$,W,X=u==3;for(let j=0;j<=s;j++){$=j*(j+1)/2,W=(j+1)*(j+2)/2;for(let H=0;H<s-j;H++)[U,Z]=[$+H+j+2,W+H+j+3],A.push($,W,...X?[Z,$]:[U,W],Z,U),[$,W]=[U,Z];A.push($,W,$+s+2)}}let E=d.clone(),T=d.clone(),M=d.clone(),C=d.clone(),D=d.clone(),P=[],I=_(w.length,()=>_(u,()=>d.clone()));for(let U=0;U<w.length;U++){d.copy(w[U]).normalize(),E.copy(d).multiplyScalar(y);let Z=b[U];for(let B=0;B<Z.length;B++){let q=Z[B],K=Z[(B+1)%u];p.setFromPointsAndIndices(w,U,q%S,K%S),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(E,I[U][B])}let $=[],W=[],X=[],j=new O;s==0&&[...I[U]].reduce((B,q)=>B.add(q),j).multiplyScalar(1/u);for(let B=0;B<u;B++){let q=[],K=(B-1+u)%u,Q=I[U][K],oe=I[U][B];d.copy(Q).sub(E),f.copy(oe).sub(E);let ne=E.angleTo(d),L=d.angleTo(f),z=Math.cos(ne)*m;s==0?T.copy(j):T.copy(E).setLength(y+z),W.push(z);let Y=[T,Q,oe];for(let J=0;J<2;J++){let ee=Y[J],F=Y[J+1];C.subVectors(ee,E),D.subVectors(F,E),M.crossVectors(C,D).normalize();for(let N=0;N<g;N++){let te=[ne,L][J]*N/g;d.copy(C).applyAxisAngle(M,te).add(E),$.push(d.clone()),J&&(x(d,E),q.push([N==0?ee:d.clone(),v.clone()]))}J&&(x(F,E),q.push([F,v.clone()]))}X.push(q)}P.push(X);let H=2*g,V=2;for(let B=0;B<u;B++){let q=H*B,K=H*((B+1)%u),Q=[$[q]];for(let ne=1;ne<g;ne++){C=$[q+ne],D=$[K+ne],Q.push(C);for(let L=1,z=ne-V+1;L<=z;L++)d.lerpVectors(C,D,L/(z+1)),d.sub(E).setLength(W[B]).add(E),Q.push(d.clone());Q.push(D)}for(let ne=0;ne<g;ne++)Q.push($[ne+g+q]);Q.push($[K+g]);let oe=A.map(ne=>Q[ne]);o.push(...oe.map(ne=>[ne.x,ne.y,ne.z]).flat()),l.push(...oe.map(ne=>(x(ne,E),[v.x,v.y,v.z])).flat())}}let k=[];for(let U=0;U<b.length;U++)for(let Z=0;Z<u;Z++){let $=b[U][Z];if($<S){let W=b[$].findIndex(H=>H%S==U),X=P[U][Z],j=P[$][W];for(let H=0;H<g;H++){let V=X[H],B=j[g-H],q=X[H+1],K=j[g-(H+1)];[V,B,q,q,B,K].forEach(Q=>{o.push(Q[0].x,Q[0].y,Q[0].z),l.push(Q[1].x,Q[1].y,Q[1].z)})}k.push(X[0][0],j[g][0],X[g][0],j[0][0])}}for(;k.length;){let U,Z,$,W;[U,Z]=k.splice(0,2);let X=[U];for(;U!=Z;)X.push(Z),$=k.indexOf(Z),W=$%2,Z=k.splice($-W,2)[1-W];v.subVectors(X[0],X[1]).cross(d.subVectors(X[0],X[2])).normalize();let j=v.dot(X[0])<0;j&&v.negate();for(let H=1;H<=X.length-2;H++)[X[H+ +j],X[H+1-+j],X[0]].forEach(V=>{o.push(V.x,V.y,V.z),l.push(v.x,v.y,v.z)})}}function h(){let u=new O;for(let b=0;b<o.length;b+=3){u.x=o[b+0],u.y=o[b+1],u.z=o[b+2];let S=_(u)/2/Math.PI+.5,A=w(u)/Math.PI+.5;a.push(S,1-A)}let d=new O,f=new O,p=new O,m=new O,y=new fe,g=new fe,v=new fe,x=(b,S,A,E)=>{E<0&&b.x===1&&(a[S]=b.x-1),A.x===0&&A.z===0&&(a[S]=E/2/Math.PI+.5)};for(let b=0,S=0;b<o.length;b+=9,S+=6){d.set(o[b+0],o[b+1],o[b+2]),f.set(o[b+3],o[b+4],o[b+5]),p.set(o[b+6],o[b+7],o[b+8]),y.set(a[S+0],a[S+1]),g.set(a[S+2],a[S+3]),v.set(a[S+4],a[S+5]),m.copy(d).add(f).add(p).divideScalar(3);let A=_(m);x(y,S+0,d,A),x(g,S+2,f,A),x(v,S+4,p,A)}for(let b=0;b<a.length;b+=6){let S=a[b+0],A=a[b+2],E=a[b+4],T=Math.max(S,A,E),M=Math.min(S,A,E);T>.9&&M<.1&&(S<.2&&(a[b+0]+=1),A<.2&&(a[b+2]+=1),E<.2&&(a[b+4]+=1))}function _(b){return Math.atan2(b.z,-b.x)}function w(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(i){return new eP(i.vertices,i.indices,i.radius,i.corner,i.cornerSides)}},lLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,detail:r,corner:s,cornerSides:o}=i.parameters,a=r===0&&s!==0?new DQ(e*.5,s,o):new oZ(e*.5,r);return a.scale(1,t/e,n/e),Object.assign(a,{userData:{...i,type:"DodecahedronGeometry"}})}},DQ=class extends eP{constructor(e=1,t=.2,n=4){let r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],l="DodecahedronGeometry";super(o,a,l,e,t,n),this.type=l}static fromJSON(e){return new DQ(e.radius,e.corner,e.cornerSides)}},Fg=1e-12,tP=class{constructor(e){this.position=new fe,this.startPosition=new fe,this.uuid=Ht.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new tP(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},TT=class extends tP{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new TT(this.parent).copy(this)}},o1=class extends tP{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new TT(this),new TT(this))}static create(e,t){let n=new o1(e,new fe(...t.position));return n.controls[0].position.set(...t.controlPrevious.position),n.controls[1].position.set(...t.controlNext.position),n.roundness=t.roundness,n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,n}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let n=0,r=this.controls.length;n<r;n++){let s=this.controls[n];this.position.distanceTo(s.position)<=t?s.position.copy(this.position):s.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new o1(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var n,r;let e=(n=this.curveBefore)==null?void 0:n.getTangentAt(1),t=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,t]}computeNormals(e=new fe,t=new fe){let[n,r]=this.computeTangents();return n&&r&&(fk(n,e),fk(r,t)),[e,t]}computeTangent(e=new fe){let[t,n]=this.computeTangents();return t&&n&&e.copy(t).add(n).normalize(),e}computeNormal(e=new fe){let[t,n]=this.computeNormals();return e.copy(t).add(n).normalize(),e}};function fk(i,e=new fe){let t=i.length();return e.set(-i.y/t,i.x/t)}var iP=i=>i,Fm=new fe,g7=new fe,cLe=new fe,uLe=new fe,hLe=new fe,dLe=new fe,PQ=new O,LQ=new O;function fLe(i){let e=new fe;e.addVectors(i.v0,Fm.subVectors(i.v1,i.v0).multiplyScalar(2/3));let t=new fe;return t.addVectors(i.v2,g7.subVectors(i.v1,i.v2).multiplyScalar(2/3)),new Ma(i.v0,e,t,i.v2)}function b2(i,e,t=Number.EPSILON){return Math.abs(i-e)<t}function pLe(i,e,t=Number.EPSILON){return i.distanceTo(e)<t}function mLe(i,e,t=Number.EPSILON){return i.distanceTo(e)<t}function IQ(i,e,t){let n=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));return Math.acos((r*r+n*n-s*s)/(2*r*n))}function gLe(i,e,t){return mk(i,e)&&mk(e,t)&&MT(i.position,e.position,t.position)}function MT(i,e,t){return Fm.copy(e).sub(i).cross(g7.copy(t).sub(i))===0}function vLe(i,e,t,n,r){let s=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),o=(i.y+e.y)/2,a=(i.x+e.x)/2,l=Math.sqrt(Math.pow(t,2)-Math.pow(s/2,2))*(i.y-e.y)/s,c=Math.sqrt(Math.pow(t,2)-Math.pow(s/2,2))*(e.x-i.x)/s;return n.set(a+l,o+c),r.set(a-l,o-c),[n,r]}function yLe(i,e,t){let n=i.distanceTo(t),r=e.distanceTo(t);return n<r?e:i}function xLe(i,e,t,n,r,s){let o=e.x-i.x,a=e.y-i.y,l=t.x-i.x,c=t.y-i.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return IQ(e,i,t)>Math.PI&&(h*=-1),b2(c,a)?u=(a+c)*(n/h-.5)*8/3/(o-l):u=(o+l)*(n/h-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(t.x+u*c,t.y-u*l),[r,s]}function pk(i,e){return i.position.equals(i.controls[1].position)&&e.position.equals(e.controls[0].position)}function mk(i,e){return MT(i.position,i.controls[1].position,e.position)&&MT(i.position,e.controls[0].position,e.position)}function _Le(i,e,t,n,r=.5){let s=Fm.subVectors(e,i).multiplyScalar(r).add(i),o=g7.subVectors(t,e).multiplyScalar(r).add(e),a=cLe.subVectors(n,t).multiplyScalar(r).add(t),l=s,c=uLe.subVectors(o,s).multiplyScalar(r).add(s),h=hLe.subVectors(a,o).multiplyScalar(r).add(o),u=a,d=dLe.subVectors(h,c).multiplyScalar(r).add(c);return[i.x,i.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,n.x,n.y]}function bLe(i,e,t=12,n=!0){let r=LQ.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=iP(e[a]),c=Fm,h=Cd(l,t);for(let u=0;u<=h;u++)if(l instanceof Ma||l instanceof Zu||l instanceof Ra){if(l.getPoint(u/h,c),r.set(c.x,c.y,0),s!==void 0&&mLe(s,r))continue;s===void 0&&(s=PQ),s.copy(r),i.setXYZ(o,r.x,r.y,r.z),o++}}return n&&o>1&&!(i.getX(o-1)===i.getX(0)&&i.getY(o-1)===i.getY(0)&&i.getZ(o-1)===i.getZ(0))&&(i.setXYZ(o,i.getX(0),i.getY(0),i.getZ(0)),o++),i}function wLe(i,e,t,n=12,r=!0){let s=LQ.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(t[l]===!1)continue;let c,h=iP(e[l]),u=Fm,d=Cd(h,n);a.push(d);for(let f=0;f<=d;f++)if(h instanceof Ma||h instanceof Zu||h instanceof Ra){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=PQ:(i.setXYZ(o,c.x,c.y,c.z),o++,i.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(i.getX(o-1)===i.getX(0)&&i.getY(o-1)===i.getY(0)&&i.getZ(o-1)===i.getZ(0))&&(i.setXYZ(o,i.getX(0),i.getY(0),i.getZ(0)),o++),a}function gk(i,e=12,t=!1){let n=[];for(let r=0,s=i.length;r<s;r++){let o=i[r],a=0;if(t&&o.roundedCurveCorner!==void 0){let l=Cd(o.roundedCurveCorner,e)*.5;r>0&&(n[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Cd(o.curveAfter,e)),n.push(a)}return i.length>0&&t&&i[0].roundedCurveCorner!==void 0&&(n[i.length-1]+=Cd(i[0].roundedCurveCorner,e)*.5),n}function Cd(i,e=12){return i&&i instanceof n7?e*2:i&&(i instanceof Ra||i instanceof iZ)?1:i&&i instanceof xD?e*i.points.length:e}function SLe(i,e,t=12,n=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=iP(e[o]),l=Cd(a,t),c=Fm;for(let h=0;h<=l;h++)if(a instanceof Ma||a instanceof Zu||a instanceof Ra){if(a.getPoint(h/l,c),r!==void 0&&pLe(r,c,Fg))continue;r===void 0&&(r=g7),r.copy(c),i.push(c.x,c.y),s++}}return b2(i[0],i[i.length-2],Fg)&&b2(i[1],i[i.length-1],Fg)&&(i.pop(),i.pop()),n&&s>1&&!(b2(i[s-1],i[1],Fg)&&b2(i[s-2],i[0],Fg))&&(i.push(i[0],i[1]),s++),i}var Kb=new fe,ALe=new fe,TLe=new fe,MLe=new fe,ELe=new fe,CLe=new fe,on=class extends F6{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new xa(new O(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Ht.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,n){let r=new on;return r.isClosed=e.isClosed,r.points=e.points.map(s=>o1.create(s.id,s.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(s=>on.createFromState(s)),t!==void 0&&n!==void 0&&r.applySize(t,n),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,n=this.points.findIndex(r=>r.uuid===e);if(n<0){let r=t;for(let s=0,o=this.shapeHoles.length;s<o;s++){let a=this.shapeHoles[s],l=a.points.length,c=a.getPointIndexById(e);if(c<0)r+=l;else return c+r}}return n}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let n=0,r=this.shapeHoles.length;n<r;n++){let s=this.shapeHoles[n],o=e-t;if(o<=s.points.length-1)return s.points[o];t+=s.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let n=0,r=this.shapeHoles.length;n<r;n++){let s=this.shapeHoles[n],o=s.points.indexOf(e);if(o>=0)return t+o;t+=s.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let n=Kb.set(e,t);for(let r=0,s=this.points.length;r<s;r++){let o=this.points[r];o.position.multiply(n),o.controls[0].position.multiply(n),o.controls[1].position.multiply(n)}for(let r=0,s=this.shapeHoles.length;r<s;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,n=Ht.generateUUID()){let r;e instanceof fe?r=e:r=new fe(e,t);let s=new o1(n,r);return s.roundness=this.roundness,s}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,n=this.shapeHoles.length;t<n;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(n=>n.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,n=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=n?this.roundedCurveDivisions:this.curveDivisions;return bLe(e,n?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((s,o)=>s+o,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=gk(this.points,e,!1),this.roundedCurveDivisions=gk(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,n=12){return wLe(e,this.curves,t,n,this.autoClose).reduce((r,s)=>r+s,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),SLe(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let n=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,s=0;t&&this.points[0].roundedCurveCorner!==void 0&&(s=Cd(this.points[0].roundedCurveCorner,this.subdivision)*.5);let o=e-s;o<0&&(o+=r.reduce((a,l)=>a+l,0));for(let a=0,l=r.length;a<l;a++){let c=r[a];if(o<n+c)return[a,(o-n+1)/c];n+=c}return[0,1]}getCurveT(e,t,n){let r=this.points[e],s=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(pk(r,s)){let c=r.position.distanceTo(s.position);return r.position.distanceTo(Kb.set(n.x,n.y))/c}let l=0;for(let c=0;c<e;c++)l+=o[c];return(t-l)/a}dispose(){}_applyCurveForPoint(e,t){pk(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;let r=n.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];if(t===0)this.moveTo(r.position.x,r.position.y);else{let s=this.points[t-1];this._applyCurveForPoint(r,s)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(t,n)}if(this.points.length>2){let t=0;for(let n=0,r=this.points.length;n<r;n++){let s=this.points[n],o=this.points[n-1]??this.points[this.points.length-1],a=this.points[n+1]??this.points[0],l=s.roundness,c=o&&a&&gLe(o,s,a);if(!s.controlsMoved()&&l>0&&!c){let h=s.curveBefore,u=s.curveAfter;if(h===void 0||u===void 0)continue;let d=s.roundedCurveBefore,f=s.roundedCurveAfter,p=h.getLength(),m=u.getLength(),y=Math.min(l,p*.499),g=Math.min(l,m*.499),v=Math.min(y,g),x=1-v/p,_=v/m,w=h.getPointAt(x,Kb),b=u.getPointAt(_,ALe);this._subSplitCurve(h,d,x,w,void 0),this._subSplitCurve(u,f,_,void 0,b);let S;if(this.useCubicForRoundedCorners){let A=IQ(w,s.position,b)/2,E=Math.tan(A)*w.distanceTo(s.position),[T,M]=vLe(w,b,E,TLe,MLe),C=yLe(T,M,s.position),[D,P]=xLe(C,w,b,E,ELe,CLe);S=new Ma(w.clone(),D.clone(),P.clone(),b.clone())}else S=new Zu(w.clone(),s.position.clone(),b.clone());s.roundedCurveCorner=S,this.roundedCurves.splice(n+t,0,S),t++}}}}_subSplitCurve(e,t,n,r,s){if(e instanceof Ra)r!==void 0&&t.v2.copy(r),s!==void 0&&t.v1.copy(s);else{let o=e,a=t,l=o.getUtoTmapping(n,0),c=_Le(o.v0,o.v1,o.v2,o.v3,l);return r!==void 0&&(a.v0.set(c[0],c[1]),a.v1.set(c[2],c[3]),a.v2.set(c[4],c[5]),a.v3.set(c[6],c[7])),s!==void 0&&(a.v0.set(c[6],c[7]),a.v1.set(c[8],c[9]),a.v2.set(c[10],c[11]),a.v3.set(c[12],c[13])),a}return t}clone(){let e=new on(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var n;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let r=0;r<t;r++){let s=r*7,o=e.points[s+0],a=e.points[s+1],l=e.points[s+2],c=e.points[s+3],h=e.points[s+4],u=e.points[s+5],d=e.points[s+6],f=new o1(Ht.generateUUID(),new fe(o,a));f.controls[0].position.set(l,c),f.controls[1].position.set(h,u),f.roundness=d,this.points.push(f)}return this.shapeHoles=(n=e.shapeHoles)!=null&&n.length?e.shapeHoles.map(r=>{let s=new on;return s.fromJSON(r),s}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(r,s)=>{s instanceof Ma&&s.v3.equals(r.position)&&r.controls[0].position.copy(s.v2)},n=r=>{let s=[],o,a;for(o=0,a=r.length;o<a;o++)r[o]instanceof Zu&&(r[o]=fLe(r[o]));for(o=0,a=r.length;o<a;o++){let h=r[o],u=o>0?r[o-1]:null,d;h instanceof Ma?(d=this.createPoint(h.v0),d.controls[1].position.copy(h.v1)):h instanceof Ra&&(d=this.createPoint(h.v1)),d!==void 0&&(u!==null&&t(d,u),s.push(d))}let l=r[r.length-1],c=!1;return l instanceof Ma?l.v3.equals(s[0].position)&&(s[0].controls[0].position.copy(l.v2),c=!0):l instanceof Ra&&l.v2.equals(s[0].position)&&(c=!0),this.isClosed=c,s};return this.points=n(e.curves),e instanceof F6&&(this.shapeHoles=e.holes.map(r=>{let s=new on;return s.fromShape(r),s})),this.update(),this}updatePoint(e,t){let n=this.getPointByUuid(e);n&&(t.position!==void 0&&n.position.fromArray(t.position),t.roundness!==void 0&&(n.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var r;let n=(r=this.getPointByUuid(e))==null?void 0:r.controls[0];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var r;let n=(r=this.getPointByUuid(e))==null?void 0:r.controls[1];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}},ET=Math.PI*2;function Jb({x:i,y:e},t,n,r,s){return{x:i*t+r,y:e*n+s}}function DLe(i,e){let t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=Math.cos(i),r=Math.sin(i),s=Math.cos(i+e),o=Math.sin(i+e);return[{x:n-r*t,y:r+n*t},{x:s+o*t,y:o-s*t},{x:s,y:o}]}function vk(i,e,t,n){let r=i*n-e*t<0?-1:1,s=Math.min(1,Math.max(-1,i*t+e*n));return r*Math.acos(s)}function PLe(i,e,t,n,r,s,o,a,l,c){let h=Math.pow(r,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),p=h*u-h*f-u*d;p<0&&(p=0),p/=h*f+u*d,p=Math.sqrt(p)*(l===c?-1:1);let m=p*r/s*a,y=p*-s/r*o,g=m+(i+t)/2,v=y+(e+n)/2,x=(o-m)/r,_=(a-y)/s,w=(-o-m)/r,b=(-a-y)/s,S=vk(1,0,x,_),A=vk(x,_,w,b);return!c&&A>0&&(A-=ET),c&&A<0&&(A+=ET),{centerx:g,centery:v,ang1:S,ang2:A}}function LLe({px:i,py:e,cx:t,cy:n,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(i-t)/2,h=(e-n)/2;if(c===0&&h===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let d=PLe(i,e,t,n,r,s,c,h,o,a),{ang1:f,ang2:p}=d,{centerx:m,centery:y}=d,g=Math.abs(p)/(ET/4);Math.abs(1-g)<1e-7&&(g=1);let v=Math.max(Math.ceil(g),1);p/=v;for(let x=0;x<v;x++)l.push(DLe(f,p)),f+=p;return l.map(x=>{let{x:_,y:w}=Jb(x[0],r,s,m,y),{x:b,y:S}=Jb(x[1],r,s,m,y),{x:A,y:E}=Jb(x[2],r,s,m,y);return{x1:_,y1:w,x2:b,y2:S,x:A,y:E}})}var di;(function(i){i[i.ODD=0]="ODD",i[i.NONZERO=1]="NONZERO",i[i.POSITIVE=2]="POSITIVE",i[i.NEGATIVE=3]="NEGATIVE",i[i.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(di||(di={}));var Vn;(function(i){i[i.POLYGONS=0]="POLYGONS",i[i.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",i[i.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Vn||(Vn={}));function tt(i,e){if(!i)throw e||"Assertion Failed!"}var Ye=function(){function i(){}return i.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},i.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},i.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},i.edgeGoesLeft=function(e){return i.vertLeq(e.Dst,e.Org)},i.edgeGoesRight=function(e){return i.vertLeq(e.Org,e.Dst)},i.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},i.edgeEval=function(e,t,n){tt(i.vertLeq(e,t)&&i.vertLeq(t,n));var r=t.s-e.s,s=n.s-t.s;return r+s>0?r<s?t.t-e.t+(e.t-n.t)*(r/(r+s)):t.t-n.t+(n.t-e.t)*(s/(r+s)):0},i.edgeSign=function(e,t,n){tt(i.vertLeq(e,t)&&i.vertLeq(t,n));var r=t.s-e.s,s=n.s-t.s;return r+s>0?(t.t-n.t)*r+(t.t-e.t)*s:0},i.transEval=function(e,t,n){tt(i.transLeq(e,t)&&i.transLeq(t,n));var r=t.t-e.t,s=n.t-t.t;return r+s>0?r<s?t.s-e.s+(e.s-n.s)*(r/(r+s)):t.s-n.s+(n.s-e.s)*(s/(r+s)):0},i.transSign=function(e,t,n){tt(i.transLeq(e,t)&&i.transLeq(t,n));var r=t.t-e.t,s=n.t-t.t;return r+s>0?(t.s-n.s)*r+(t.s-e.s)*s:0},i.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},i.interpolate=function(e,t,n,r){return e=e<0?0:e,n=n<0?0:n,e<=n?n===0?(t+r)/2:t+(r-t)*(e/(e+n)):r+(t-r)*(n/(e+n))},i.intersect=function(e,t,n,r,s){var o,a,l;i.vertLeq(e,t)||(l=e,e=t,t=l),i.vertLeq(n,r)||(l=n,n=r,r=l),i.vertLeq(e,n)||(l=e,e=n,n=l,l=t,t=r,r=l),i.vertLeq(n,t)?i.vertLeq(t,r)?(o=i.edgeEval(e,n,t),a=i.edgeEval(n,t,r),o+a<0&&(o=-o,a=-a),s.s=i.interpolate(o,n.s,a,t.s)):(o=i.edgeSign(e,n,t),a=-i.edgeSign(e,r,t),o+a<0&&(o=-o,a=-a),s.s=i.interpolate(o,n.s,a,r.s)):s.s=(n.s+t.s)/2,i.transLeq(e,t)||(l=e,e=t,t=l),i.transLeq(n,r)||(l=n,n=r,r=l),i.transLeq(e,n)||(l=e,e=n,n=l,l=t,t=r,r=l),i.transLeq(n,t)?i.transLeq(t,r)?(o=i.transEval(e,n,t),a=i.transEval(n,t,r),o+a<0&&(o=-o,a=-a),s.t=i.interpolate(o,n.t,a,t.t)):(o=i.transSign(e,n,t),a=-i.transSign(e,r,t),o+a<0&&(o=-o,a=-a),s.t=i.interpolate(o,n.t,a,r.t)):s.t=(n.t+t.t)/2},i}(),zg=function(){function i(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return i}(),a4=function(){function i(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(i.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),i}(),yp=function(){function i(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return i}(),yk=function(){function i(){var e=new yp,t=new zg,n=new a4(0),r=new a4(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=r,r.next=r,r.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=r}return i.prototype.makeEdge_=function(e){var t=new a4(0),n=new a4(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return n.next=r,r.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},i.prototype.splice_=function(e,t){var n=e.Onext,r=t.Onext;n.Sym.Lnext=t,r.Sym.Lnext=e,e.Onext=r,t.Onext=n},i.prototype.makeVertex_=function(e,t,n){var r=e;tt(r,"Vertex can't be null!");var s=n.prev;r.prev=s,s.next=r,r.next=n,n.prev=r,r.anEdge=t;var o=t;do o.Org=r,o=o.Onext;while(o!==t)},i.prototype.makeFace_=function(e,t,n){var r=e;tt(r,"Face can't be null");var s=n.prev;r.prev=s,s.next=r,r.next=n,n.prev=r,r.anEdge=t,r.trail=null,r.marked=!1,r.inside=n.inside;var o=t;do o.Lface=r,o=o.Lnext;while(o!==t)},i.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},i.prototype.killVertex_=function(e,t){var n=e.anEdge,r=n;do r.Org=t,r=r.Onext;while(r!==n);var s=e.prev,o=e.next;o.prev=s,s.next=o},i.prototype.killFace_=function(e,t){var n=e.anEdge,r=n;do r.Lface=t,r=r.Lnext;while(r!==n);var s=e.prev,o=e.next;o.prev=s,s.next=o},i.prototype.makeEdge=function(){var e=new yp,t=new yp,n=new zg,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(t,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},i.prototype.splice=function(e,t){var n=!1,r=!1;if(e!==t){if(t.Org!==e.Org&&(r=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!r){var s=new yp;this.makeVertex_(s,t,e.Org),e.Org.anEdge=e}if(!n){var o=new zg;this.makeFace_(o,t,e.Lface),e.Lface.anEdge=e}}},i.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var r=new zg;this.makeFace_(r,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},i.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var r=new yp;return this.makeVertex_(r,n,t.Org),t.Lface=n.Lface=e.Lface,t},i.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e),n=t.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,n),e.Dst=n.Org,n.Dst.anEdge=n.Sym,n.Rface=e.Rface,n.winding=e.winding,n.Sym.winding=e.Sym.winding,n.idx=e.idx,n.Sym.idx=e.Sym.idx,n},i.prototype.connect=function(e,t){var n=!1,r=this.makeEdge_(e),s=r.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,t),r.Org=e.Dst,s.Org=t.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!n){var o=new zg;this.makeFace_(o,r,e.Lface)}return r},i.prototype.zapFace=function(e){var t=e.anEdge,n,r,s,o,a;r=t.Lnext;do n=r,r=n.Lnext,n.Lface=null,n.Rface===null&&(n.Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),s=n.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(n));while(n!=t);o=e.prev,a=e.next,a.prev=o,o.next=a},i.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do n++,t=t.Lnext;while(t!==e.anEdge);return n},i.prototype.mergeConvexFaces=function(e){var t,n,r,s,o,a,l;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(n=t.anEdge,o=n.Org;r=n.Lnext,s=n.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(t),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&Ye.vertCCW(n.Lprev.Org,n.Org,s.Lnext.Lnext.Org)&&Ye.vertCCW(s.Lprev.Org,s.Org,n.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),n=null,s=null)),!(n&&n.Lnext.Org===o);)n=r;return!0},i.prototype.check=function(){var e=this.fHead,t=this.vHead,n=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){tt(r.prev===s),l=r.anEdge;do tt(l.Sym!==l),tt(l.Sym.Sym===l),tt(l.Lnext.Onext.Sym===l),tt(l.Onext.Sym.Lnext===l),tt(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(tt(r.prev===s&&r.anEdge===null),a=t,a=t;(o=a.next)!==t;a=o){tt(o.prev===a),l=o.anEdge;do tt(l.Sym!==l),tt(l.Sym.Sym===l),tt(l.Lnext.Onext.Sym===l),tt(l.Onext.Sym.Lnext===l),tt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(tt(o.prev===a&&o.anEdge===null),c=n,c=n;(l=c.next)!==n;c=l)tt(l.Sym.next===c.Sym),tt(l.Sym!==l),tt(l.Sym.Sym===l),tt(l.Org!==null),tt(l.Dst!==null),tt(l.Lnext.Onext.Sym===l),tt(l.Onext.Sym.Lnext===l);tt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},i}(),xk=function(){function i(){this.handle=null}return i}(),_k=function(){function i(){this.key=null,this.node=0}return i}(),ILe=function(){function i(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new xk,this.handles[n]=new _k;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return i.prototype.floatDown_=function(e){var t=this.nodes,n=this.handles,r,s,o;for(r=t[e].handle;;){if(o=e<<1,o<this.size&&this.leq(n[t[o+1].handle].key,n[t[o].handle].key)&&++o,tt(o<=this.max),s=t[o].handle,o>this.size||this.leq(n[r].key,n[s].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=s,n[s].node=e,e=o}},i.prototype.floatUp_=function(e){var t=this.nodes,n=this.handles,r,s,o;for(r=t[e].handle;;){if(o=e>>1,s=t[o].handle,o===0||this.leq(n[s].key,n[r].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=s,n[s].node=e,e=o}},i.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},i.prototype.min=function(){return this.handles[this.nodes[1].handle].key},i.prototype.insert=function(e){var t,n;if(t=++this.size,t*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new xk;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new _k}return this.freeList===0?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},i.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,r=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},i.prototype.delete=function(e){var t=this.nodes,n=this.handles,r;tt(e>=1&&e<=this.max&&n[e].key!==null),r=n[e].node,t[r].handle=t[this.size].handle,n[t[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(n[t[r>>1].handle].key,n[t[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),n[e].key=null,n[e].node=this.freeList,this.freeList=e},i}(),ew=function(){function i(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return i}(),bk=function(){function i(){this.key=null,this.next=null,this.prev=null}return i}(),OLe=function(){function i(e,t){this.frame=e,this.leq=t,this.head=new bk,this.head.next=this.head,this.head.prev=this.head}return i.prototype.min=function(){return this.head.next},i.prototype.max=function(){return this.head.prev},i.prototype.insert=function(e){return this.insertBefore(this.head,e)},i.prototype.search=function(e){var t=this.head;do t=t.next;while(t.key!==null&&!this.leq(this.frame,e,t.key));return t},i.prototype.insertBefore=function(e,t){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,t));var n=new bk;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},i.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},i}(),RLe=function(){function i(){}return i.regionBelow=function(e){return e.nodeUp.prev.key},i.regionAbove=function(e){return e.nodeUp.next.key},i.debugEvent=function(e){},i.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},i.edgeLeq=function(e,t,n){var r=e.event,s=t.eUp,o=n.eUp;if(s.Dst===r)return o.Dst===r?Ye.vertLeq(s.Org,o.Org)?Ye.edgeSign(o.Dst,s.Org,o.Org)<=0:Ye.edgeSign(s.Dst,o.Org,s.Org)>=0:Ye.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return Ye.edgeSign(s.Dst,r,s.Org)>=0;var a=Ye.edgeEval(s.Dst,r,s.Org),l=Ye.edgeEval(o.Dst,r,o.Org);return a>=l},i.deleteRegion=function(e,t){t.fixUpperEdge&&tt(t.eUp.winding===0),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},i.fixUpperEdge=function(e,t,n){tt(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},i.topLeftRegion=function(e,t){var n=t.eUp.Org,r;do t=i.regionAbove(t);while(t.eUp.Org===n);if(t.fixUpperEdge){if(r=e.mesh.connect(i.regionBelow(t).eUp.Sym,t.eUp.Lnext),r===null)return null;i.fixUpperEdge(e,t,r),t=i.regionAbove(t)}return t},i.topRightRegion=function(e){var t=e.eUp.Dst;do e=i.regionAbove(e);while(e.eUp.Dst===t);return e},i.addRegionBelow=function(e,t,n){var r=new ew;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},i.isWindingInside=function(e,t){switch(e.windingRule){case di.ODD:return(t&1)!==0;case di.NONZERO:return t!==0;case di.POSITIVE:return t>0;case di.NEGATIVE:return t<0;case di.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},i.computeWinding=function(e,t){t.windingNumber=i.regionAbove(t).windingNumber+t.eUp.winding,t.inside=i.isWindingInside(e,t.windingNumber)},i.finishRegion=function(e,t){var n=t.eUp,r=n.Lface;r.inside=t.inside,r.anEdge=n,i.deleteRegion(e,t)},i.finishLeftRegions=function(e,t,n){for(var r,s=null,o=t,a=t.eUp;o!==n;){if(o.fixUpperEdge=!1,s=i.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){i.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),i.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),i.finishRegion(e,o),a=s.eUp,o=s}return a},i.addRightEdges=function(e,t,n,r,s,o){var a,l,c,h,u=!0;c=n;do tt(Ye.vertLeq(c.Org,c.Dst)),i.addRegionBelow(e,t,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=i.regionBelow(t).eUp.Rprev),l=t,h=s;a=i.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=i.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&i.checkForRightSplice(e,l)&&(i.addWinding(c,h),i.deleteRegion(e,l),e.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,tt(l.windingNumber-c.winding===a.windingNumber),o&&i.walkDirtyRegions(e,l)},i.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},i.vertexWeights=function(e,t,n){var r=Ye.vertL1dist(t,e),s=Ye.vertL1dist(n,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*t.coords[0]+a*n.coords[0],e.coords[1]+=o*t.coords[1]+a*n.coords[1],e.coords[2]+=o*t.coords[2]+a*n.coords[2]},i.getIntersectData=function(e,t,n,r,s,o){t.coords[0]=t.coords[1]=t.coords[2]=0,t.idx=-1,i.vertexWeights(t,n,r),i.vertexWeights(t,s,o)},i.checkForRightSplice=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp;if(Ye.vertLeq(r.Org,s.Org)){if(Ye.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Ye.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),i.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),t.dirty=n.dirty=!0)}else{if(Ye.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;i.regionAbove(t).dirty=t.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},i.checkForLeftSplice=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp,o;if(tt(!Ye.vertEq(r.Dst,s.Dst)),Ye.vertLeq(r.Dst,s.Dst)){if(Ye.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;i.regionAbove(t).dirty=t.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=t.inside}else{if(Ye.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;t.dirty=n.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=t.inside}return!0},i.checkForIntersect=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,h,u,d=new yp,f,p;if(tt(!Ye.vertEq(c,l)),tt(Ye.edgeSign(l,e.event,o)<=0),tt(Ye.edgeSign(c,e.event,a)>=0),tt(o!==e.event&&a!==e.event),tt(!t.fixUpperEdge&&!n.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(Ye.vertLeq(o,a)){if(Ye.edgeSign(c,o,a)>0)return!1}else if(Ye.edgeSign(l,a,o)<0)return!1;return i.debugEvent(e),Ye.intersect(l,o,c,a,d),tt(Math.min(o.t,l.t)<=d.t),tt(d.t<=Math.max(a.t,c.t)),tt(Math.min(c.s,l.s)<=d.s),tt(d.s<=Math.max(a.s,o.s)),Ye.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),f=Ye.vertLeq(o,a)?o:a,Ye.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Ye.vertEq(d,o)||Ye.vertEq(d,a)?(i.checkForRightSplice(e,t),!1):!Ye.vertEq(l,e.event)&&Ye.edgeSign(l,e.event,d)>=0||!Ye.vertEq(c,e.event)&&Ye.edgeSign(c,e.event,d)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),t=i.topLeftRegion(e,t),r=i.regionBelow(t).eUp,i.finishLeftRegions(e,i.regionBelow(t),n),i.addRightEdges(e,t,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),n=t,t=i.topRightRegion(t),p=i.regionBelow(t).eUp.Rprev,n.eUp=s.Oprev,s=i.finishLeftRegions(e,n,null),i.addRightEdges(e,t,s.Onext,r.Rprev,p,!0),!0):(Ye.edgeSign(l,e.event,d)>=0&&(i.regionAbove(t).dirty=t.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),Ye.edgeSign(c,e.event,d)<=0&&(t.dirty=n.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),i.getIntersectData(e,r.Org,o,l,a,c),i.regionAbove(t).dirty=t.dirty=n.dirty=!0,!1)},i.walkDirtyRegions=function(e,t){for(var n=i.regionBelow(t),r,s;;){for(;n.dirty;)t=n,n=i.regionBelow(n);if(!t.dirty&&(n=t,t=i.regionAbove(t),t===null||!t.dirty))return;if(t.dirty=!1,r=t.eUp,s=n.eUp,r.Dst!==s.Dst&&i.checkForLeftSplice(e,t)&&(n.fixUpperEdge?(i.deleteRegion(e,n),e.mesh.delete(s),n=i.regionBelow(t),s=n.eUp):t.fixUpperEdge&&(i.deleteRegion(e,t),e.mesh.delete(r),t=i.regionAbove(n),r=t.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!t.fixUpperEdge&&!n.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(i.checkForIntersect(e,t))return}else i.checkForRightSplice(e,t);r.Org===s.Org&&r.Dst===s.Dst&&(i.addWinding(s,r),i.deleteRegion(e,t),e.mesh.delete(r),t=i.regionAbove(n))}},i.connectRightVertex=function(e,t,n){var r,s=n.Onext,o=i.regionBelow(t),a=t.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&i.checkForIntersect(e,t),Ye.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),t=i.topLeftRegion(e,t),s=i.regionBelow(t).eUp,i.finishLeftRegions(e,i.regionBelow(t),o),c=!0),Ye.vertEq(l.Org,e.event)&&(e.mesh.splice(n,l.Oprev),n=i.finishLeftRegions(e,o,null),c=!0),c){i.addRightEdges(e,t,n.Onext,s,s,!0);return}Ye.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(n.Lprev,r),i.addRightEdges(e,t,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,i.walkDirtyRegions(e,t)},i.connectLeftDegenerate=function(e,t,n){var r,s,o,a,l;if(r=t.eUp,Ye.vertEq(r.Org,n)){tt(!1),i.spliceMergeVertices(e,r,n.anEdge);return}if(!Ye.vertEq(r.Dst,n)){e.mesh.splitEdge(r.Sym),t.fixUpperEdge&&(e.mesh.delete(r.Onext),t.fixUpperEdge=!1),e.mesh.splice(n.anEdge,r),i.sweepEvent(e,n);return}tt(!1),t=i.topRightRegion(t),l=i.regionBelow(t),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(tt(s!==o),i.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(n.anEdge,o),Ye.edgeGoesLeft(s)||(s=null),i.addRightEdges(e,t,o.Onext,a,s,!0)},i.connectLeftVertex=function(e,t){var n,r,s,o,a,l,c=new ew;if(c.eUp=t.anEdge.Sym,n=e.dict.search(c).key,r=i.regionBelow(n),!!r){if(o=n.eUp,a=r.eUp,Ye.edgeSign(o.Dst,t,o.Org)===0){i.connectLeftDegenerate(e,n,t);return}if(s=Ye.vertLeq(a.Dst,o.Dst)?n:r,n.inside||s.fixUpperEdge){if(s===n)l=e.mesh.connect(t.anEdge.Sym,o.Lnext);else{var h=e.mesh.connect(a.Dnext,t.anEdge);l=h.Sym}s.fixUpperEdge?i.fixUpperEdge(e,s,l):i.computeWinding(e,i.addRegionBelow(e,n,l)),i.sweepEvent(e,t)}else i.addRightEdges(e,n,t.anEdge,t.anEdge,null,!0)}},i.sweepEvent=function(e,t){e.event=t,i.debugEvent(e);for(var n=t.anEdge;n.activeRegion===null;)if(n=n.Onext,n===t.anEdge){i.connectLeftVertex(e,t);return}var r=i.topLeftRegion(e,n.activeRegion);tt(r!==null);var s=i.regionBelow(r),o=s.eUp,a=i.finishLeftRegions(e,s,null);a.Onext===o?i.connectRightVertex(e,r,a):i.addRightEdges(e,r,a.Onext,o,o,!0)},i.addSentinel=function(e,t,n,r){var s=new ew,o=e.mesh.makeEdge();o.Org.s=n,o.Org.t=r,o.Dst.s=t,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},i.initEdgeDict=function(e){e.dict=new OLe(e,i.edgeLeq);var t=e.bmax[0]-e.bmin[0],n=e.bmax[1]-e.bmin[1],r=e.bmin[0]-t,s=e.bmax[0]+t,o=e.bmin[1]-n,a=e.bmax[1]+n;i.addSentinel(e,r,s,o),i.addSentinel(e,r,s,a)},i.doneEdgeDict=function(e){for(var t,n=0;(t=e.dict.min().key)!==null;)t.sentinel||(tt(t.fixUpperEdge),tt(++n===1)),tt(t.windingNumber===0),i.deleteRegion(e,t)},i.removeDegenerateEdges=function(e){var t,n,r,s=e.mesh.eHead;for(t=s.next;t!==s;t=n)n=t.next,r=t.Lnext,Ye.vertEq(t.Org,t.Dst)&&t.Lnext.Lnext!==t&&(i.spliceMergeVertices(e,r,t),e.mesh.delete(t),t=r,r=t.Lnext),r.Lnext===t&&(r!==t&&((r===n||r===n.Sym)&&(n=n.next),e.mesh.delete(r)),(t===n||t===n.Sym)&&(n=n.next),e.mesh.delete(t))},i.initPriorityQ=function(e){var t,n,r,s=0;for(r=e.mesh.vHead,n=r.next;n!==r;n=n.next)s++;for(s+=8,t=e.pq=new ILe(s,Ye.vertLeq),r=e.mesh.vHead,n=r.next;n!==r;n=n.next)n.pqHandle=t.insert(n);return n!==r?!1:(t.init(),!0)},i.donePriorityQ=function(e){e.pq=null},i.removeDegenerateFaces=function(e,t){var n,r,s;for(n=t.fHead.next;n!==t.fHead;n=r)r=n.next,s=n.anEdge,tt(s.Lnext!==s),s.Lnext.Lnext===s&&(i.addWinding(s.Onext,s),e.mesh.delete(s));return!0},i.computeInterior=function(e,t){t===void 0&&(t=!0);var n,r;if(i.removeDegenerateEdges(e),!i.initPriorityQ(e))return!1;for(i.initEdgeDict(e);(n=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!Ye.vertEq(r,n));)r=e.pq.extractMin(),i.spliceMergeVertices(e,n.anEdge,r.anEdge);i.sweepEvent(e,n)}return e.event=e.dict.min().key.eUp.Org,i.debugEvent(e),i.doneEdgeDict(e),i.donePriorityQ(e),i.removeDegenerateFaces(e,e.mesh)?(t&&e.mesh.check(),!0):!1},i}(),NLe=function(){function i(){this.mesh=new yk,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=di.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return i.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},i.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},i.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},i.prototype.computeNormal_=function(e){var t,n,r,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;t=m.next;for(var y=0;y<3;++y)s=t.coords[y],c[y]=s,p[y]=t,l[y]=s,f[y]=t;for(t=m.next;t!==m;t=t.next)for(var g=0;g<3;++g)s=t.coords[g],s<c[g]&&(c[g]=s,p[g]=t),s>l[g]&&(l[g]=s,f[g]=t);var v=0;if(l[1]-c[1]>l[0]-c[0]&&(v=1),l[2]-c[2]>l[v]-c[v]&&(v=2),c[v]>=l[v]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,n=p[v],r=f[v],h[0]=n.coords[0]-r.coords[0],h[1]=n.coords[1]-r.coords[1],h[2]=n.coords[2]-r.coords[2],t=m.next;t!==m;t=t.next)u[0]=t.coords[0]-r.coords[0],u[1]=t.coords[1]-r.coords[1],u[2]=t.coords[2]-r.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(h)]=1)},i.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,t,n=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(t=n.next;t!==n;t=t.next)t.t=-t.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},i.prototype.projectPolygon_=function(){var e=this.mesh.vHead,t=[0,0,0],n,r,s=!1;t[0]=this.normal[0],t[1]=this.normal[1],t[2]=this.normal[2],!t[0]&&!t[1]&&!t[2]&&(this.computeNormal_(t),s=!0),n=this.sUnit,r=this.tUnit;var o=this.longAxis_(t);n[o]=0,n[(o+1)%3]=1,n[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=t[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,n),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},i.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},i.prototype.tessellateMonoRegion_=function(e,t){var n,r;if(n=t.anEdge,!(n.Lnext!==n&&n.Lnext.Lnext!==n))throw"Mono region invalid";for(;Ye.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;Ye.vertLeq(n.Org,n.Dst);n=n.Lnext);r=n.Lprev;for(var s=void 0;n.Lnext!==r;)if(Ye.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(Ye.edgeGoesLeft(r.Lnext)||Ye.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==n&&(Ye.edgeGoesRight(n.Lprev)||Ye.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)s=e.connect(n,n.Lprev),n=s.Sym;n=n.Lnext}if(r.Lnext===n)throw"Mono region invalid";for(;r.Lnext.Lnext!==n;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},i.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},i.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},i.prototype.setWindingNumber_=function(e,t,n){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?t:-t:n?e.delete(s):s.winding=0},i.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},i.prototype.outputPolymesh_=function(e,t,n,r){var s,o=0,a=0,l;n>3&&e.mergeConvexFaces(n);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var h=e.fHead.next;h!==e.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>n)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,t===Vn.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*n,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=e.fHead.next;h!==e.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<n;++f)this.elements[d++]=-1;if(t===Vn.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var p=l;p<n;++p)this.elements[d++]=-1}}},i.prototype.outputContours_=function(e,t){var n,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=n=a.anEdge;do this.vertexCount++,n=n.Lnext;while(n!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=n=a.anEdge;do this.vertices[l++]=n.Org.coords[0],this.vertices[l++]=n.Org.coords[1],t>2&&(this.vertices[l++]=n.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,o++,n=n.Lnext;while(n!==r);this.elements[h++]=s,this.elements[h++]=o,s+=o}},i.prototype.addContour=function(e,t){this.mesh===null&&(this.mesh=new yk),e<2&&(e=2),e>3&&(e=3);for(var n=null,r=0;r<t.length;r+=e)n===null?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[r+0],n.Org.coords[1]=t[r+1],e>2?n.Org.coords[2]=t[r+2]:n.Org.coords[2]=0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},i.prototype.tesselate=function(e,t,n,r,s,o){if(e===void 0&&(e=di.ODD),t===void 0&&(t=Vn.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),RLe.computeInterior(this,o);var a=this.mesh;return t===Vn.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),t===Vn.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,t,n,r),!0},i}();function cu(i){var e=i.windingRule,t=e===void 0?di.ODD:e,n=i.elementType,r=n===void 0?Vn.POLYGONS:n,s=i.polySize,o=s===void 0?3:s,a=i.vertexSize,l=a===void 0?2:a,c=i.normal,h=c===void 0?[0,0,1]:c,u=i.contours,d=u===void 0?[]:u,f=i.strict,p=f===void 0?!0:f,m=i.debug,y=m===void 0?!1:m;if(!d&&p)throw new Error("Contours can't be empty");if(d){var g=new NLe;i.edgeCreateCallback&&(g.edgeCreateCallback=i.edgeCreateCallback),i.vertexIdCallback&&(g.vertexIdCallback=i.vertexIdCallback);for(var v=0;v<d.length;v++)g.addContour(l||2,d[v]);return g.tesselate(t,r,o,l,h,p),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:y?g.mesh:void 0}}}di.ODD;di.NONZERO;di.POSITIVE;di.NEGATIVE;di.ABS_GEQ_TWO;Vn.POLYGONS;Vn.CONNECTED_POLYGONS;Vn.BOUNDARY_CONTOURS;var OQ=class extends _t{constructor(e,t=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=di.ODD,this.elementType=Vn.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:di.ODD,elementType:Vn.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),s=this._shape.shapeHoles.map(f=>f.extractShapePointsToFlatArray([],this._curveSegments)),o,a=!0,l=!0,c,h;for(let f=0,p=r.length/2;f<p;f++){let m=f*2,y=r[m+0],g=r[m+1];if(c!==void 0&&y!==c&&(a=!1),h!==void 0&&g!==h&&(l=!1),c=y,h=g,!a&&!l)break}!a&&!l&&(o=cu({contours:[r,...s],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let u=(o==null?void 0:o.vertexCount)??1,d=(o==null?void 0:o.elementCount)??1;if(this._positionAttribute=new Ot(new Float32Array(u*3),3),this._normalAttribute=new Ot(new Float32Array(u*3),3),this._uvAttribute=new Ot(new Float32Array(u*2),2),this._indexAttribute=new Ot(new Uint32Array(d*3),1),o){let f=1/0,p=-1/0,m=1/0,y=-1/0;for(let x=0,_=u;x<_;x++){let w=x*2,b=o.vertices[w+0],S=o.vertices[w+1];b<f&&(f=b),b>p&&(p=b),S<m&&(m=S),S>y&&(y=S)}let g=p-f,v=y-m;for(let x=0,_=u;x<_;x++){let w=x*2,b=o.vertices[w+0],S=o.vertices[w+1],A=(b-f)/g,E=(S-m)/v;this._positionAttribute.setXYZ(x,b,S,0),this._normalAttribute.setXYZ(x,0,0,1),this._uvAttribute.setXY(x,A,E)}for(let x=0,_=d;x<_;x++){let w=x*3,b=o.elements[w+0],S=o.elements[w+1],A=o.elements[w+2];this._indexAttribute.setX(w+0,b),this._indexAttribute.setX(w+1,S),this._indexAttribute.setX(w+2,A)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((o==null?void 0:o.elementCount)??1)*3)}clone(){let e=new OQ(this._shape,this._curveSegments);return e.userData=u7(this.userData),e}},CT=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let n=e*CT.eSize;this.buffer=new ArrayBuffer(n);let r=Float32Array.BYTES_PER_ELEMENT,s=0;this.positions=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.normals=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.uvs=new Float32Array(this.buffer,s*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let n=e*CT.eSize,r=new ArrayBuffer(n),s=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(r,o*s,3*e);o+=3*e;let l=new Float32Array(r,o*s,3*e);o+=3*e;let c=new Float32Array(r,o*s,2*e);a.set(this.positions.slice(0,this.size*3)),l.set(this.normals.slice(0,this.size*3)),c.set(this.uvs.slice(0,this.size*2)),this.buffer=r,this.positions=a,this.normals=l,this.uvs=c,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let n=this.size;return this.size=t,n}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},RQ=CT;RQ.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var tw=(i,e)=>([t,n])=>(n<t&&(n+=e),(i>=t?i:i+e)<=n),NQ=class extends _t{constructor(e,t,n=0,r=12,s=3,o=di.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=n,this._curveSegments=r,this._bevelSegmentsInput=s,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,t/2-1e-12),this._bevelSegments=Math.floor(s));let a=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(b=>{let S=b.extractShapePointsToFlatArray([],r),A=[];for(let E=S.length-1;E>=1;E-=2){let T=S[E-1],M=S[E-0];A.push(T,M)}return A}),c=cu({windingRule:o,elementType:Vn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]}),h=cu({windingRule:di.ODD,elementType:Vn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]});if(!c)throw new Error("error generating geometry");let u=c.elementCount;if(h){c.elementCount+=h.elementCount;for(let b=0;b<h.elements.length;b++){let S=h.elements[b],A=b%2===0?c.vertexCount:0;c.elements.push(S+A)}for(let b=0;b<h.vertexIndices.length;b++){let S=h.vertexIndices[b],A=c.vertexCount;c.vertexIndices.push(S+A)}for(let b=0;b<h.vertices.length;b++){let S=h.vertices[b];c.vertices.push(S)}}let d=1/0,f=-1/0,p=1/0,m=-1/0;for(let b=0,S=c.vertexCount;b<S;b++){let A=b*2,E=c.vertices[A+0],T=c.vertices[A+1];E<d&&(d=E),E>f&&(f=E),T<p&&(p=T),T>m&&(m=T)}this._minX=d,this._minY=p,this._width=f-d,this._height=m-p,this._buffer=new RQ(this._computeBufferEstimatedSize(c));let y=[],g=[];for(let b=c.elementCount-1;b>=0;b--){let S=b>=u,A=b*2,E=c.elements[A+0],T=c.elements[A+1],M=E+T,C={start:E,count:T,normals:[],continuous:[],concave:[]},D=E,P=M-1,I=E+1,k=this._shape.roundedCurves.length;do{let $=D-E,W=c.vertices[P*2+0],X=c.vertices[P*2+1],j=c.vertices[D*2+0],H=c.vertices[D*2+1],V=c.vertices[I*2+0],B=c.vertices[I*2+1],q=j-W,K=H-X,Q=Math.sqrt(q*q+K*K);q/=Q,K/=Q;let oe=j-V,ne=H-B,L=Math.sqrt(oe*oe+ne*ne);oe/=L,ne/=L,C.normals[$*2+0]=-ne,C.normals[$*2+1]=oe,C.concave[$]=q*ne-K*oe>0;let z=c.vertexIndices[D];if(Array.isArray(z))C.continuous[$]=!1;else{let[Y,J]=this._shape.getCurveIndexFromVertexId(z-1,!0);if(J>0&&J<1)C.continuous[$]=!0;else{let ee=J===1?Y+1:Y-1;ee=(ee+k)%k;let F=J===1?0:1,N=this._shape.roundedCurves[Y].getTangent(J),te=this._shape.roundedCurves[ee].getTangent(F);C.continuous[$]=N.dot(te)>.95}}S&&(C.normals[$*2+0]*=-1,C.normals[$*2+1]*=-1),[P,D,I]=[D,I,I+1],I>=M&&(I-=T)}while(I!==E+1);let G=[];G.push({bevelI:0,angle:0,size:0,boundary:{vertices:c.vertices.slice(E*2,M*2),vertexCount:T,vertexIndices:new Array(T).fill(!0).map(($,W)=>[W,W]),elements:[0,T],elementCount:1,mesh:null},reverseMap:[],insetPoints:c.vertices.slice(E*2,M*2)});for(let $=1;$<=this._bevelSegments;$++){let W=$/this._bevelSegments*Math.PI/2,X=(1-Math.cos(W))*this._bevelSize,j=[],H=[],V=0;for(let q=0;q<T;q++){let K=q*2,Q=(q-1+T)%T*2,oe=c.vertices[C.start*2+K+0],ne=c.vertices[C.start*2+K+1],L=-C.normals[Q+0]*X,z=-C.normals[Q+1]*X,Y=-C.normals[K+0]*X,J=-C.normals[K+1]*X;if(C.concave[q]||!C.concave[q]&&S){let ee=Math.atan2(z,L),F=Math.atan2(J,Y);F>ee&&(F-=Math.PI*2);let N=F-ee;if(C.continuous[q]||S){let te=ee+N/2,le=Math.cos(te)*X,re=Math.sin(te)*X;j[2*V+0]=oe+le*(S?-1:1),j[2*V+1]=ne+re*(S?-1:1),H[V]=q,V++}else{let te=Math.max(1,Math.floor(r/4*Math.abs(N)/Math.PI));for(let le=0;le<=te;le++){let re=ee+N*(le/te),ue=Math.cos(re)*X,pe=Math.sin(re)*X;j[2*V+0]=oe+ue,j[2*V+1]=ne+pe,H[V]=q,V++}}}else j[2*V+0]=oe+L,j[2*V+1]=ne+z,H[V]=q,V++,j[2*V+0]=oe,j[2*V+1]=ne,H[V]=q,V++,j[2*V+0]=oe+Y,j[2*V+1]=ne+J,H[V]=q,V++}let B=cu({windingRule:di.POSITIVE,elementType:Vn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[j],edgeCreateCallback:q=>{let K=q.Org.idx,Q=H[K],oe=H[(K+1)%H.length];q.idx=[Q,oe],q.Sym.idx=[oe,Q]},vertexIdCallback:q=>{let K=q.Lprev.idx;return[K?K[1]:0,q.idx[0]]}});if(!B)throw console.log("Error"),new Error(`error generating bevel geometry for ${$}'th loop`);if(!B.vertexCount)break;for(let q=0;q<B.vertexIndices.length;q++){let[K,Q]=B.vertexIndices[q];if(K===Q)continue;let oe=Q;Q<K&&(oe+=T);for(let ne=K;ne<oe;ne++){let L=ne%T,z=(ne+1)%T;if(!C.continuous[L]||!C.continuous[z]){B.vertexIndices[q]=[K,L],B.vertexIndices.splice(q+1,0,[z,Q]),B.vertices.splice((q+1)*2,0,B.vertices[q*2],B.vertices[q*2+1]);break}}}G.push({bevelI:$,angle:W,size:X,boundary:B,reverseMap:H,insetPoints:j})}let U=($,W,X)=>{let j=0,H=$.boundary.vertexIndices.length;for(;j<H&&X($.boundary.vertexIndices[W]);)W=(W+1)%H,j++;return j},Z=y.length;for(let $=1;$<G.length;$++){let W=G[$-1],X=G[$],j=W.boundary.vertexIndices.length,H=X.boundary.vertexIndices.length;if(!j||!H)break;let V=C.concave.length,B=0,q=tw(B,T);for(;!W.boundary.vertexIndices.filter(q).length||!X.boundary.vertexIndices.filter(q).length;)B++,q=tw(B,T);let K=W.boundary.vertexIndices.findIndex(q),Q=X.boundary.vertexIndices.findIndex(q);do K=(K+1)%j;while(q(W.boundary.vertexIndices[K]));do Q=(Q+1)%H;while(q(X.boundary.vertexIndices[Q]));B=(B+1)%T;let oe=B,ne=this._buildBevelVert(C,W,(K-1+j)%j),L=this._buildBevelVert(C,X,(Q-1+H)%H),z=ne,Y=L,J,ee,F=!1;do{q=tw(B,T);let N=U(W,K,q),te=U(X,Q,q),le=F;if(F=!1,N&&!te){for(let re=0;re<N;re++)J=this._buildBevelVert(C,W,(K+re)%j,re/(N-1)),y.push(z.topN,J.topP,Y.topN),y.push(J.bottomP,z.bottomN,Y.bottomN),z=J;F=!0}else if(!N&&te)for(let re=0;re<te;re++)ee=this._buildBevelVert(C,X,(Q+re)%H,re/(te-1)),y.push(Y.topN,z.topP,ee.topP),y.push(z.bottomP,Y.bottomN,ee.bottomP),Y=ee;else if(N&&te)if(J=this._buildBevelVert(C,W,K,0),ee=this._buildBevelVert(C,X,Q,0),le?(y.push(z.topN,ee.topP,Y.topN),y.push(z.topN,J.topP,ee.topP),y.push(ee.bottomP,z.bottomN,Y.bottomN),y.push(ee.bottomP,J.bottomP,z.bottomN)):(y.push(Y.topN,z.topN,J.topP),y.push(Y.topN,J.topP,ee.topP),y.push(J.bottomP,z.bottomN,Y.bottomN),y.push(J.bottomP,Y.bottomN,ee.bottomP)),z=J,Y=ee,N===te)for(let re=1;re<N;re++)J=this._buildBevelVert(C,W,(K+re)%j,re/(N-1)),ee=this._buildBevelVert(C,X,(Q+re)%H,re/(te-1)),y.push(z.topN,J.topP,Y.topN),y.push(Y.topN,J.topP,ee.topP),y.push(J.bottomP,z.bottomN,Y.bottomN),y.push(J.bottomP,Y.bottomN,ee.bottomP),z=J,Y=ee;else if(N>te){let re=N/te,ue=0;for(let pe=1;pe<N;pe++)J=this._buildBevelVert(C,W,(K+pe)%j,pe/(N-1)),y.push(z.topN,J.topP,Y.topN),y.push(J.bottomP,z.bottomN,Y.bottomN),z=J,pe>(ue+1)*re&&(ue++,ee=this._buildBevelVert(C,X,(Q+ue)%H,ue/(te-1)),y.push(Y.topN,J.topP,ee.topP),y.push(J.bottomP,Y.bottomN,ee.bottomP),Y=ee)}else{let re=te/N,ue=0;for(let pe=1;pe<te;pe++)ee=this._buildBevelVert(C,X,(Q+pe)%H,pe/(te-1)),y.push(Y.topN,J.topP,ee.topP),y.push(J.bottomP,Y.bottomN,ee.bottomP),Y=ee,pe>(ue+1)*re&&(ue++,J=this._buildBevelVert(C,W,(K+ue)%j,ue/(N-1)),y.push(z.topN,J.topP,Y.topN),y.push(J.bottomP,z.bottomN,Y.bottomN),z=J)}K=(K+N)%j,Q=(Q+te)%H,B=(B+1)%V}while(B!==oe)}if(this._buildWall(G,C,y),S){let $=[];for(let W=y.length-1;W>=Z+2;W-=3){let X=y[W-2],j=y[W-1],H=y[W-0];$.push(H,j,X)}y.splice(Z,y.length-Z,...$)}if(S){let $=[];for(let W=G[G.length-1].boundary.vertices.length-1;W>=1;W-=2){let X=G[G.length-1].boundary.vertices[W-1],j=G[G.length-1].boundary.vertices[W-0];$.push(X,j)}g.push($)}if(!S){let $=G[G.length-1],W=cu({windingRule:G.length>1?di.POSITIVE:di.ODD,elementType:Vn.POLYGONS,vertexSize:2,strict:!0,contours:[$.insetPoints,...g]});if(!W)throw new Error("Error generating geometry for surface");l.length===0&&Object.assign(this,{capStartIndex:y.length});for(let X=0;X<W.elementCount*3;X+=3){let j=this._buildSurfaceVert(W,W.elements[X+0]),H=this._buildSurfaceVert(W,W.elements[X+1]),V=this._buildSurfaceVert(W,W.elements[X+2]);y.push(j.top,H.top,V.top),y.push(V.bottom,H.bottom,j.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new Ot(Uint32Array.from(y),1),x=new Ot(this._buffer.positions,3),_=new Ot(this._buffer.normals,3),w=new Ot(this._buffer.uvs,2);x.needsUpdate=!0,_.needsUpdate=!0,w.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",x),this.setAttribute("normal",_),this.setAttribute("uv",w),this.setIndex(v)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,n){let r=e[0];for(let s=0,o=r.boundary.vertexCount;s<o;s++){let a=this._buildBevelVert(t,r,s),l=this._buildBevelVert(t,r,(s+1)%o);n.push(l.topP,a.topN,a.bottomN),n.push(l.topP,a.bottomN,l.bottomP)}}_buildSurfaceVert(e,t){let n=t.toString();if(n in this.vertexCache)return this.vertexCache[n];let r=e.vertices[t*2+0],s=e.vertices[t*2+1],o=(r-this._minX)/this._width,a=(s-this._minY)/this._height,l=this._buffer.get(2),c=l*3,h=l*2,u={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=r,this._buffer.positions[c+1]=s,this._buffer.positions[c+2]=this._depth,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[h+0]=o,this._buffer.uvs[h+1]=a,this._buffer.positions[c+3]=r,this._buffer.positions[c+4]=s,this._buffer.positions[c+5]=0,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[h+2]=o,this._buffer.uvs[h+3]=a,this.vertexCache[n]=u,u}_buildBevelVert(e,t,n,r=1){let s=`${t.bevelI}:${n}`;if(s in this.vertexCache)return this.vertexCache[s];let[o,a]=t.boundary.vertexIndices[n],l,c,h,u;o!==a?(c=o,l=a,u=!1,h=e.continuous[c]&&e.continuous[l]):(l=o,c=(l-1+e.count)%e.count,u=e.concave[l]&&t.bevelI>0,h=e.continuous[l]||u);let d=Math.cos(t.angle),f=Math.sin(t.angle),p=n*2,m=l*2,y=c*2,g=t.boundary.vertices[p+0],v=t.boundary.vertices[p+1],x=(1-f)*this._bevelSize,_=(g-this._minX)/this._width,w=(v-this._minY)/this._height,b=e.normals[m+0],S=e.normals[m+1],A=e.normals[y+0],E=e.normals[y+1];if(u){let P=A-b,I=E-S;b=b+P*(1-r),S=S+I*(1-r);let k=Math.sqrt(b*b+S*S);b/=k,S/=k}let T=this._buffer.get(h?2:4),M=T*3,C=T*2,D={i:n,fi:l,topP:T+0,topN:T+0,bottomP:T+1,bottomN:T+1};return this._buffer.positions[M+0]=g,this._buffer.positions[M+1]=v,this._buffer.positions[M+2]=this._depth-x,this._buffer.normals[M+0]=b*d,this._buffer.normals[M+1]=S*d,this._buffer.normals[M+2]=f,this._buffer.uvs[C+0]=_,this._buffer.uvs[C+1]=w,this._buffer.positions[M+3]=g,this._buffer.positions[M+4]=v,this._buffer.positions[M+5]=x,this._buffer.normals[M+3]=b*d,this._buffer.normals[M+4]=S*d,this._buffer.normals[M+5]=-f,this._buffer.uvs[C+2]=w,this._buffer.uvs[C+3]=_,h||(T+=2,M+=6,C+=4,D.topP=T+0,D.bottomP=T+1,this._buffer.positions[M+0]=g,this._buffer.positions[M+1]=v,this._buffer.positions[M+2]=this._depth-x,this._buffer.normals[M+0]=A*d,this._buffer.normals[M+1]=E*d,this._buffer.normals[M+2]=f,this._buffer.uvs[C+0]=_,this._buffer.uvs[C+1]=w,this._buffer.positions[M+3]=g,this._buffer.positions[M+4]=v,this._buffer.positions[M+5]=x,this._buffer.normals[M+3]=A*d,this._buffer.normals[M+4]=E*d,this._buffer.normals[M+5]=-f,this._buffer.uvs[C+2]=w,this._buffer.uvs[C+3]=_),this.vertexCache[s]=D,D}clone(){let e=new NQ(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=u7(this.userData),e}},FQ=class extends NQ{constructor(e,t,n=0,r=12,s=3,o=di.ODD){super(e,t,n,r,s,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,n){let r=e[0];for(let s=0,o=r.boundary.vertexCount;s<o;s++){let a=this._buildBevelVert(t,r,s),l=this._buildBevelVert(t,r,(s+1)%o);n.push(l.topP,a.topN,a.bottomN),n.push(l.topP,a.bottomN,l.bottomP)}}clone(){let e=new FQ(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=u7(this.userData),e}},pf=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var h,u;let n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:di.ODD},e.parameters),r=Math.abs(n.width),s=Math.abs(n.height??n.width),o=Math.abs(n.depth??0),a=e.shape??(t==null?void 0:t.shape),l=(a==null?void 0:a.roundness)??n.roundness;a!==void 0&&(a instanceof on?(a.width!==r||a.height!==s)&&a.applySize(r,s):a=new on(r,s).fromJSON(a),((h=e.parameters)==null?void 0:h.roundness)!==void 0&&((u=e.parameters)==null?void 0:u.roundness)>0&&a.update());let c=a??new on(r,s);return{parameters:Object.assign(n,{width:r,height:s,depth:o,roundness:l}),shape:c}}static build(e){let{depth:t,extrudeBevelSize:n,extrudeBevelSegments:r,subdivisions:s,roundness:o,windingRule:a}=e.parameters;e.shape.roundness=o;let l;return t<=0?l=new OQ(e.shape,s,{windingRule:a}):l=new FQ(e.shape,t,n,s,r,a),Object.assign(l,{userData:{...e,type:"VectorGeometry"}})}},zQ=Math.PI*2,nP=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof on?e.shape:new on,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,spikes:r,angle:s,innerRadius:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=t*.5,d=n*.5,f=FLe(h,u,d,s*Math.PI/180,r,o);h.isClosed=!0,h.update();let p=pf.create({shape:h,parameters:{subdivisions:f,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function FLe(i,e,t,n,r,s){if(n>=zQ)return r>30||r%4===0?(kLe(i,e,t,s),Math.round(r/4)):wk(i,n,r,e,t,s);n=Math.max(n,.001);let o={x:0,y:t},a=n+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*t},c=LLe({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:t,largeArcFlag:n>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?zLe(i,o.x,o.y,c,r,e,t,s):wk(i,n,r,e,t,s)}function zLe(i,e,t,n,r,s,o,a){let l=Math.round(r/n.length);i.addPoint(a1(e,t));for(let c=0,h=n.length;c<h;c++){let u=n[c],d=i.points[c],f=a1(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),i.addPoint(f)}return a>0?kQ(i,s,o,a):i.addPoint(a1(0,0)),l}function wk(i,e,t,n,r,s){let o=-e/t;for(let a=0;a<=t;a++){let l=o*a,c=Math.sin(l)*n,h=Math.cos(l)*r;i.addPoint(a1(c,h))}return e<zQ?s>0?kQ(i,n,r,s):i.addPoint(a1(0,0)):(i.removePoint(i.points[i.points.length-1]),s>0&&BQ(i,n,r,s)),1}function kLe(i,e,t,n=0,r=0,s=0){let o=.5522847498,a=e*o,l=t*o;i.addPoint(l4(r-e,s,r-e,s-l,r-e,s+l)),i.addPoint(l4(r,s+t,r-a,s+t,r+a,s+t)),i.addPoint(l4(r+e,s,r+e,s+l,r+e,s-l)),i.addPoint(l4(r,s-t,r+a,s-t,r-a,s-t)),n>0&&BQ(i,e,t,n)}function a1(i,e){return new o1(Ht.generateUUID(),new fe(i,e))}function l4(i,e,t,n,r,s){let o=a1(i,e);return o.controls[0].position.set(t,n),o.controls[1].position.set(r,s),o}function kQ(i,e,t,n){UQ(i,e,t,n).forEach(r=>i.addPoint(r))}function BQ(i,e,t,n){let r=UQ(i,e,t,n),s=new on;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,i.shapeHoles.push(s)}function UQ(i,e,t,n){let r=n*e/100,s=r*(Math.abs(t)/Math.abs(e)),o=new fe(r/e,s/t),a=i.points.map(l=>{let c=l.clone();return c.uuid=Ht.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var BLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??n),s=Math.abs(t.depth??n),o=Math.abs(Math.min(n,s))/2;return{parameters:Object.assign(t,{width:n,height:r,depth:s,radius:o,segments:Math.round(t.segments),pathSegments:Math.round(t.pathSegments),cornerSegments:Math.round(t.cornerSegments)})}}static build(i){let{width:e,height:t,depth:n,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=i.parameters,d=new rP(!1,e,t,n,r,s,o,a,l,c,h,u);return Object.assign(d,{userData:{...i,type:"HelixGeometry"}})}},rP=class extends _t{constructor(e=!0,t=1,n=1,r=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1,d=1,f=!1){super();let p=e&&o===1;p&&(d=0),u>100&&(u=100);let m=()=>new O,y=new O,g=m(),v=m(),x=m(),_,w,b,S,A,E,T,M,C=m(),D=m(),P=m(),I=m(),k=m(),G=m(),U=m(),Z=m(),$=n-2*l+.001,W=$/o,X=Math.ceil(a*o),j=X+1,H=$/X,V=-$/2,B=h+1,q=2*Math.PI/h,K=Math.PI/2/d,Q=.01,oe=Math.min((1-u/100)*l,l-Q),ne=l-oe,L=0,z=2,Y=d*z+z,J=B*Y/z,ee=J+B*j,F=B*(j+Y),[N,te,le]=[3,3,2].map(be=>Array(F*be).fill(0)),re=[],ue=s-l;function pe(be,Ge){let et=Math.PI/2;E=Ge*H,M=2*Math.PI*(E%W)/W+et,E+=V,T=Math.sin(M)*ue,A=Math.cos(M)*ue,e?be.set(A,T,E):be.set(A,E,T)}pe(y,-1e-10),pe(g,0),C.copy(y),pe(y,1);let xe=y.distanceTo(g),Se=p?0:ne+oe,we=xe*X+2*Se,ce=oe,Ee=we-Se;for(let be=0;be<=X;be++){pe(v,be),Z.subVectors(v,C).normalize(),C.copy(v),G.copy(v).setComponent(+e+1,0).normalize(),U.crossVectors(Z,G).normalize();let Ge=be===0,et=be===X,Mt=Ge?3*Math.PI/2:K,mt=Ge?ce:Ee,yi=Ge?B:ee,Vi=Ge?0:F-B,gn=Z.clone().multiplyScalar(Ge?-ne:ne).add(v),Jt=Z.clone().multiplyScalar(Ge?-1:1).normalize();for(let vn=0;vn<B;vn++){let Li=vn*q;if(D.addVectors(y.copy(G).multiplyScalar(l*Math.cos(Li)),g.copy(U).multiplyScalar(l*Math.sin(Li))),P.copy(D).normalize(),Ge||et){p||(L=Vi+vn,[0,1,2].forEach(yn=>{N[L*3+yn]=gn.getComponent(yn),te[L*3+yn]=Jt.getComponent(yn)}),le[L*2]=+et,le[L*2+1]=vn/h),g.copy(P).multiplyScalar(oe),x.addVectors(v,g);for(let yn=0;yn<d;yn++){let fc=yn*K+Mt;I.addVectors(y.copy(Z).multiplyScalar(ne*Math.sin(fc)),g.copy(P).multiplyScalar(ne*Math.cos(fc))),k.copy(I).normalize(),g.addVectors(x,I),I.normalize(),L=yi+yn*B+vn,[0,1,2].forEach(ol=>{N[L*3+ol]=g.getComponent(ol),te[L*3+ol]=k.getComponent(ol)});let pc=+Ge+Math.sin(fc);le[L*2]=(mt+ne*pc)/we,le[L*2+1]=vn/h}}g.addVectors(v,D),L=J+be*B+vn,[0,1,2].forEach(yn=>{N[L*3+yn]=g.getComponent(yn),te[L*3+yn]=P.getComponent(yn)}),le[L*2]=(Se+be*xe)/we,le[L*2+1]=vn/h}}let ve=j+2*d+z,[Re,se]=[+p,ve-1];f&&(se-=1);for(let be=Re;be<=se-1;be++){let Ge=p&&be===se-1;for(let et=0;et<B-1;et++)_=be*B+et,w=_+1,b=(Ge?et:_)+B,S=(Ge?et+1:w)+B,be===0?re.push(w,S,b):be===ve-2?re.push(_,w,b):re.push(_,w,b,w,S,b)}this.setIndex(re),this.setAttribute("position",new We(N,3)),this.setAttribute("normal",new We(te,3)),this.setAttribute("uv",new We(le,2))}},ULe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,detail:r,corner:s,cornerSides:o}=i.parameters,a=r===0&&s!==0?new VQ(e*.5,s,o):new hZ(e*.5,r);return a.scale(1,t/e,n/e),Object.assign(a,{userData:{...i,type:"IcosahedronGeometry"}})}},VQ=class extends eP{constructor(e=1,t=.2,n=4){let r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(s,o,a,e,t,n),this.type=a}static fromJSON(e){return new VQ(e.radius,e.corner,e.cornerSides)}},VLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){var n;(((n=i.parameters)==null?void 0:n.points)??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{points:e,segments:t,verticalSegments:n}=i.parameters,r=new F6;r.moveTo(e[0].x,e[0].y),r.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new rZ(r.extractPoints(n).shape,t);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...i,type:"LatheGeometry"}})}},Ya=new Fe,iw=new Pi,c4=new O,c8=class extends cf{constructor(){super(),this.uuid=Ht.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(i){let e=new as().getNormalMatrix(i);for(let t=0,n=this.vertices.length;t<n;t++)this.vertices[t].applyMatrix4(i);for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(i){return Ya.makeRotationX(i),this.applyMatrix4(Ya),this}rotateY(i){return Ya.makeRotationY(i),this.applyMatrix4(Ya),this}rotateZ(i){return Ya.makeRotationZ(i),this.applyMatrix4(Ya),this}translate(i,e,t){return Ya.makeTranslation(i,e,t),this.applyMatrix4(Ya),this}scale(i,e,t){return Ya.makeScale(i,e,t),this.applyMatrix4(Ya),this}lookAt(i){return iw.lookAt(i),iw.updateMatrix(),this.applyMatrix4(iw.matrix),this}fromBufferGeometry(i){let e=this,t=i.index!==null?i.index:void 0,n=i.attributes;if(n.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=n.position,s=n.normal,o=n.color,a=n.uv,l=n.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new O().fromBufferAttribute(r,u)),o!==void 0&&e.colors.push(new St().fromBufferAttribute(o,u));function c(u,d,f,p){let m=o===void 0?[]:[e.colors[u].clone(),e.colors[d].clone(),e.colors[f].clone()],y=s===void 0?[]:[new O().fromBufferAttribute(s,u),new O().fromBufferAttribute(s,d),new O().fromBufferAttribute(s,f)],g=new DT(u,d,f,y,m,p);e.faces.push(g),a!==void 0&&e.faceVertexUvs[0].push([new fe().fromBufferAttribute(a,u),new fe().fromBufferAttribute(a,d),new fe().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new fe().fromBufferAttribute(l,u),new fe().fromBufferAttribute(l,d),new fe().fromBufferAttribute(l,f)])}let h=i.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],f=d.start,p=d.count;for(let m=f,y=f+p;m<y;m+=3)t!==void 0?c(t.getX(m),t.getX(m+1),t.getX(m+2),d.materialIndex):c(m,m+1,m+2,d.materialIndex)}else if(t!==void 0)for(let u=0;u<t.count;u+=3)c(t.getX(u),t.getX(u+1),t.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone()),i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(c4).negate(),this.translate(c4.x,c4.y,c4.z),this}normalize(){this.computeBoundingSphere();let i=this.boundingSphere.center,e=this.boundingSphere.radius,t=e===0?1:1/e,n=new Fe;return n.set(t,0,0,-t*i.x,0,t,0,-t*i.y,0,0,t,-t*i.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let i=new O,e=new O;for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];i.subVectors(a,o),e.subVectors(s,o),i.cross(e),i.normalize(),r.normal.copy(i)}}computeVertexNormals(i=!0){let e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new O;if(i){let t=new O,n=new O;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];t.subVectors(c,l),n.subVectors(a,l),t.cross(n),e[o.a].add(t),e[o.b].add(t),e[o.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let i=0,e=this.faces.length;i<e;i++){let t=this.faces[i],n=t.vertexNormals;n.length===3?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(let r=0,s=n.vertexNormals.length;r<s;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}let i=new c8;i.faces=this.faces;for(let e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new O,c={a:new O,b:new O,c:new O};r.push(l),s.push(c)}}let n=this.morphNormals[e];i.vertices=this.morphTargets[e].vertices,i.computeFaceNormals(),i.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=n.faceNormals[r],l=n.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e];n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qo),this.boundingSphere.setFromPoints(this.vertices)}merge(i,e,t=0){if(!(i&&i.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",i);return}let n,r=this.vertices.length,s=this.vertices,o=i.vertices,a=this.faces,l=i.faces,c=this.colors,h=i.colors;e!==void 0&&(n=new as().getNormalMatrix(e));for(let u=0,d=o.length;u<d;u++){let f=o[u].clone();e!==void 0&&f.applyMatrix4(e),s.push(f)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],p,m,y=f.vertexNormals,g=f.vertexColors,v=new DT(f.a+r,f.b+r,f.c+r);v.normal.copy(f.normal),n!==void 0&&v.normal.applyMatrix3(n).normalize();for(let x=0,_=y.length;x<_;x++)p=y[x].clone(),n!==void 0&&p.applyMatrix3(n).normalize(),v.vertexNormals.push(p);v.color.copy(f.color);for(let x=0,_=g.length;x<_;x++)m=g[x],v.vertexColors.push(m.clone());v.materialIndex=f.materialIndex+t,a.push(v)}for(let u=0,d=i.faceVertexUvs.length;u<d;u++){let f=i.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],g=[];for(let v=0,x=y.length;v<x;v++)g.push(y[v].clone());this.faceVertexUvs[u].push(g)}}}mergeMesh(i){if(!(i&&i.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",i);return}i.matrixAutoUpdate&&i.updateMatrix(),this.merge(i.geometry,i.matrix)}mergeVertices(i=4){let e={},t=[],n=[],r=Math.pow(10,i);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,t.push(this.vertices[a]),n[a]=t.length-1):n[a]=n[e[h]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-t.length;return this.vertices=t,o}setFromPoints(i){this.vertices=[];for(let e=0,t=i.length;e<t;e++){let n=i[e];this.vertices.push(new O(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let i=this.faces,e=i.length;for(let a=0;a<e;a++)i[a]._id=a;function t(a,l){return a.materialIndex-l.materialIndex}i.sort(t);let n=this.faceVertexUvs[0],r=this.faceVertexUvs[1],s,o;n&&n.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){let l=i[a]._id;s&&s.push(n[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(i[p]=f[p]);return i}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let t=[],n=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,y=!1,g=this.faceVertexUvs[0][f]!==void 0,v=p.normal.length()>0,x=p.vertexNormals.length>0,_=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0,b=0;if(b=c(b,0,0),b=c(b,1,m),b=c(b,2,y),b=c(b,3,g),b=c(b,4,v),b=c(b,5,x),b=c(b,6,_),b=c(b,7,w),t.push(b),t.push(p.a,p.b,p.c),t.push(p.materialIndex),g){let S=this.faceVertexUvs[0][f];t.push(d(S[0]),d(S[1]),d(S[2]))}if(v&&t.push(h(p.normal)),x){let S=p.vertexNormals;t.push(h(S[0]),h(S[1]),h(S[2]))}if(_&&t.push(u(p.color)),w){let S=p.vertexColors;t.push(u(S[0]),u(S[1]),u(S[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function h(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=n.length/3,n.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return i.data={},i.data.vertices=e,i.data.normals=n,s.length>0&&(i.data.colors=s),a.length>0&&(i.data.uvs=[a]),i.data.faces=t,i}clone(){return new c8().copy(this)}copy(i){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=i.name;let e=i.vertices;for(let u=0,d=e.length;u<d;u++)this.vertices.push(e[u].clone());let t=i.colors;for(let u=0,d=t.length;u<d;u++)this.colors.push(t[u].clone());let n=i.faces;for(let u=0,d=n.length;u<d;u++)this.faces.push(n[u].clone());for(let u=0,d=i.faceVertexUvs.length;u<d;u++){let f=i.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],g=[];for(let v=0,x=y.length;v<x;v++){let _=y[v];g.push(_.clone())}this.faceVertexUvs[u].push(g)}}let r=i.morphTargets;for(let u=0,d=r.length;u<d;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,m=r[u].vertices.length;p<m;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,m=r[u].normals.length;p<m;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let s=i.morphNormals;for(let u=0,d=s.length;u<d;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=s[u].vertexNormals.length;p<m;p++){let y=s[u].vertexNormals[p],g={};g.a=y.a.clone(),g.b=y.b.clone(),g.c=y.c.clone(),f.vertexNormals.push(g)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=s[u].faceNormals.length;p<m;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}let o=i.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());let a=i.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());let l=i.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=i.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=i.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=i.elementsNeedUpdate,this.verticesNeedUpdate=i.verticesNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.lineDistancesNeedUpdate=i.lineDistancesNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}toBufferGeometry(){let i=new GLe().fromGeometry(this),e=new _t,t=new Float32Array(i.vertices.length*3);if(e.setAttribute("position",u4.call(new Ot(t,3),i.vertices)),i.normals.length>0){let n=new Float32Array(i.normals.length*3);e.setAttribute("normal",u4.call(new Ot(n,3),i.normals))}if(i.colors.length>0){let n=new Float32Array(i.colors.length*3);e.setAttribute("color",Sk.call(new Ot(n,3),i.colors))}if(i.uvs.length>0){let n=new Float32Array(i.uvs.length*2);e.setAttribute("uv",Ak.call(new Ot(n,2),i.uvs))}if(i.uvs2.length>0){let n=new Float32Array(i.uvs2.length*2);e.setAttribute("uv2",Ak.call(new Ot(n,2),i.uvs2))}e.groups=i.groups;for(let n in i.morphTargets){let r=[],s=i.morphTargets[n];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new We(l.data.length*3,3);c.name=l.name,r.push(u4.call(c,l.data))}e.morphAttributes[n]=r}if(i.skinIndices.length>0){let n=new We(i.skinIndices.length*4,4);e.setAttribute("skinIndex",Tk.call(n,i.skinIndices))}if(i.skinWeights.length>0){let n=new We(i.skinWeights.length*4,4);e.setAttribute("skinWeight",Tk.call(n,i.skinWeights))}return i.boundingSphere!==null&&(e.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(e.boundingBox=i.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(i){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(i){let e=new _t,t=i.geometry;if(i.isPoints||i.isLine){let n=new We(t.vertices.length*3,3),r=new We(t.colors.length*3,3);if(e.setAttribute("position",u4.call(n,t.vertices)),e.setAttribute("color",Sk.call(r,t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){let s=new We(t.lineDistances.length,1);e.setAttribute("lineDistance",jLe.call(s,t.lineDistances))}t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone())}else i.isMesh&&(e=t.toBufferGeometry());return e}};c8.prototype.isGeometry=!0;var GLe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],n,r,s,o=e.faces;for(r=0;r<o.length;r++){let a=o[r];a.materialIndex!==s&&(s=a.materialIndex,n!==void 0&&(n.count=r*3-n.start,t.push(n)),n={start:r*3,materialIndex:s})}n!==void 0&&(n.count=r*3-n.start,t.push(n)),this.groups=t}fromGeometry(e){let t=e.faces,n=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length,c;if(l>0){c=[];for(let g=0;g<l;g++)c[g]={name:a[g].name,data:[]};this.morphTargets.position=c}let h=e.morphNormals,u=h.length,d;if(u>0){d=[];for(let g=0;g<u;g++)d[g]={name:h[g].name,data:[]};this.morphTargets.normal=d}let f=e.skinIndices,p=e.skinWeights,m=f.length===n.length,y=p.length===n.length;n.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(n[v.a],n[v.b],n[v.c]);let x=v.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{let w=v.normal;this.normals.push(w,w,w)}let _=v.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{let w=v.color;this.colors.push(w,w,w)}if(s===!0){let w=r[0][g];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new fe,new fe,new fe))}if(o===!0){let w=r[1][g];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new fe,new fe,new fe))}for(let w=0;w<l;w++){let b=a[w].vertices;c[w].data.push(b[v.a],b[v.b],b[v.c])}for(let w=0;w<u;w++){let b=h[w].vertexNormals[g];d[w].data.push(b.a,b.b,b.c)}m&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),y&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},DT=class{constructor(e,t,n,r,s,o=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new O,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new St,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function jLe(i){return this.array.set(i),this}function Sk(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),s=new St),e[t++]=s.r,e[t++]=s.g,e[t++]=s.b}return this}function Ak(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),s=new fe),e[t++]=s.x,e[t++]=s.y}return this}function u4(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new O),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z}return this}function Tk(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new tn),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z,e[t++]=s.w}return this}var HLe=["a","b","c"];function WLe(i,e){switch(e){case"c":return i.c;case"b":return i.b;case"a":default:return i.a}}function nw(i,e,t){let n=Math.min(i,e),r=Math.max(i,e),s=n+"_"+r;return t.get(s)}function rw(i,e,t,n,r,s){let o=Math.min(i,e),a=Math.max(i,e),l=o+"_"+a,c;if(n.has(l))c=n.get(l);else{let h=t[o],u=t[a];c={a:h,b:u,newEdge:null,faces:[]},n.set(l,c)}c.faces.push(r),s[i].edges.push(c),s[e].edges.push(c)}function $Le(i,e,t,n){let r,s,o;for(r=0,s=i.length;r<s;r++)t[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],rw(o.a,o.b,i,n,o,t),rw(o.b,o.c,i,n,o,t),rw(o.c,o.a,i,n,o,t)}function h4(i,e,t,n,r){i.push(new DT(e,t,n,void 0,void 0,r))}function op(i,e){return Math.abs(e-i)/2+Math.min(i,e)}function d4(i,e,t,n){i.push([e.clone(),t.clone(),n.clone()])}var qLe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof _t?e=new c8().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new O,n,r,s,o,a,l=e.vertices,c=e.faces,h=e.faceVertexUvs[0],u=h!==void 0&&h.length>0,d=[],f=new Map;$Le(l,c,d,f);let p=[],m,y,g,v,x,_,w;for(let K of Array.from(f.keys())){for(y=f.get(K),g=new O,x=3/8,_=1/8,w=y.faces.length,w!=2&&(x=.5,_=0,w!=1),g.addVectors(y.a,y.b).multiplyScalar(x),t.set(0,0,0),o=0;o<w;o++){for(v=y.faces[o],a=0;a<3&&(m=l[WLe(v,HLe[a])],!(m!==y.a&&m!==y.b));a++);m&&t.add(m)}t.multiplyScalar(_),g.add(t),y.newEdge=p.length,p.push(g)}let b,S,A,E,T,M,C,D=[];for(r=0,s=l.length;r<s;r++){for(M=l[r],T=d[r].edges,n=T.length,n==3?b=3/16:n>3&&(b=3/(8*n)),S=1-n*Number(b),A=b,n<=2&&(n==2?(S=3/4,A=1/8):n==1||n==0),C=M.clone().multiplyScalar(S),t.set(0,0,0),o=0;o<n;o++)E=T[o],m=E.a!==M?E.a:E.b,t.add(m);t.multiplyScalar(Number(A)),C.add(t),D.push(C)}let P=D.concat(p),I=D.length,k,G,U,Z=[],$=[],W,X,j,H,V=new fe,B=new fe,q=new fe;for(r=0,s=c.length;r<s;r++)v=c[r],k=Number(nw(v.a,v.b,f).newEdge)+I,G=Number(nw(v.b,v.c,f).newEdge)+I,U=Number(nw(v.c,v.a,f).newEdge)+I,h4(Z,k,G,U,v.materialIndex),h4(Z,v.a,k,U,v.materialIndex),h4(Z,v.b,G,k,v.materialIndex),h4(Z,v.c,U,G,v.materialIndex),u&&(W=h[r],X=W[0],j=W[1],H=W[2],V.set(op(X.x,j.x),op(X.y,j.y)),B.set(op(j.x,H.x),op(j.y,H.y)),q.set(op(X.x,H.x),op(X.y,H.y)),d4($,V,B,q),d4($,X,V,q),d4($,j,B,V),d4($,H,q,B));e.vertices=P,e.faces=Z,u&&(e.faceVertexUvs[0]=$)}},qn=new O,XLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=i.geometry??(e==null?void 0:e.geometry)??new _t().copy(new Wd(100,100,100)),n;e===void 0?(t.computeBoundingBox(),t.boundingBox.getSize(qn),n={width:qn.x,height:qn.y,depth:qn.z,subdivisions:0}):n=e.parameters;let r={...n,...i.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:t}}static build(i){let{width:e,height:t,depth:n,subdivisions:r}=i.parameters,s=i.geometry??new _t().copy(new Wd(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(qn)):qn.set(o.width,o.height,o.depth),(e!==qn.x||t!==qn.y||n!==qn.z)&&s.scale(qn.x===0?1:e/qn.x,qn.y===0?1:t/qn.y,qn.z===0?1:n/qn.z);let a=s.originalGeometry;return r>0?(a===void 0||(o==null?void 0:o.subdivisions)!==r)&&(a===void 0&&(a=s),s=new qLe(r).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete i.geometry,Object.assign(s,{userData:{...i,type:"NonParametricGeometry"}})}static loadFromUrl(i,e,t){new pZ(t).load(i,n=>{let r=this.normalizeInputs({geometry:n});n.boundingBox.getSize(qn);let s=100/qn.x;Object.assign(r.parameters,{width:100,height:qn.y*s,depth:qn.z*s}),e(this.build(r))})}},GQ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof on?e.shape:new on,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,spikes:r,cornerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,h=t*.5,u=n*.5,d=0,f=0,p=2*Math.PI/r;for(let y=0;y<r;y++){let g=p*y,v=d+Math.sin(g)*h,x=f+Math.cos(g)*u;c.addPoint(c.createPoint(v,x))}c.isClosed=!0;for(let y=0,g=c.points.length;y<g;y++)c.points[y].roundness=s;c.roundness=s,c.update();let m=pf.create({shape:c,parameters:{roundness:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},YLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=i.parameters,c=new QLe(e*.5,t,r,s,o,a,l);return c.scale(1,1,n/e),Object.assign(c,{userData:{...i,type:"PyramidGeometry"}})}};function kg(i,e,t){t.x=i.x*e.x,t.y=i.y,t.z=i.x*e.y}function sw(i,e,t,n,r,s){let o=e.clone().sub(i),a=t.clone().sub(i),l=o.angleTo(a);if(o.normalize(),a.normalize(),n===r){let c=o.add(a).normalize();s.copy(i).addScaledVector(c,n/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(i),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,n/Math.sin(c))}}function ZLe(i,e,t){let n=i.clone().sub(e),r=t.clone().sub(e);return n.projectOnVector(r),n.add(e)}var QLe=class extends _t{constructor(e=.5,t=1,n=4,r=1,s=!1,o=0,a=4){super(),n=Math.floor(Math.max(3,n)),r=Math.floor(r),a=Math.floor(a);let l=[],c=[],h=[],u=[],d=0,f=t/2,p=Math.PI/n,m=e*Math.cos(Math.PI/n),y=2*Math.PI/n,g=(n-2)*Math.PI/n,v=Math.PI-g,x=new O(0,-f,0),_=new O(0,f,0),w=new fe(e,-f),b=new fe(m,-f),S=new fe(0,_.y).sub(b),A=new fe(0,_.y).sub(w),E=new fe(S.y,-S.x).normalize(),T=new fe(A.y,-A.x).normalize(),M=e*Math.cos(Math.PI/n)*Math.tan((Math.PI-S.angle())/2)-1e-8;o=Math.min(o,M);let C;{let U=new O(E.x,E.y,0),Z=new O(Math.cos(y)*U.x,U.y,Math.sin(y)*U.x);C=U.angleTo(Z)}let D=o/Math.tan((Math.PI-S.angle())/2),P=o/Math.tan((Math.PI-C)/2),I=new O;if(!s){c.push(x.x,x.y,x.z),h.push(0,-1,0),u.push(0,0);let U=d++,Z=[],$=w.clone(),W=D/Math.cos(Math.PI/n);$.x-=W;for(let X=0;X<n;X++){let j=X/n*Math.PI*2+p,H=new fe(Math.sin(j),Math.cos(j));kg($,H,I),c.push(I.x,I.y,I.z),h.push(0,-1,0),u.push(0,0),Z.push(d++)}for(let X=0;X<Z.length;X++)l.push(Z[X],U,Z[(X+1)%Z.length])}{let U=new O,Z=new O,$=new O,W=new O,X=new O,j=new O;for(let H=0;H<n;H++){let V=H/n*Math.PI*2+p,B=(H+.5)/n*Math.PI*2+p,q=(H+1)/n*Math.PI*2+p,K=new fe(Math.sin(V),Math.cos(V)),Q=new fe(Math.sin(B),Math.cos(B)),oe=new fe(Math.sin(q),Math.cos(q));kg(w,K,Z),kg(w,oe,$),kg(E,Q,U),sw(_,Z,$,P,P,W),c.push(W.x,W.y,W.z),sw(Z,_,$,P,D,X),c.push(X.x,X.y,X.z),sw($,Z,_,D,P,j),c.push(j.x,j.y,j.z),h.push(U.x,U.y,U.z),h.push(U.x,U.y,U.z),h.push(U.x,U.y,U.z),u.push(0,0),u.push(0,0),u.push(0,0);let ne=d++,L=d++,z=d++;if(l.push(ne,L,z),o>0){{let ee=Z.clone().add($).multiplyScalar(.5),F=_.clone().sub(ee).normalize(),N=x.clone().sub(ee).normalize().add(F).normalize().multiplyScalar(-1),te=j.clone().sub(X);k(ee,te,N,S.angle())}let Y,J;{let ee=new O;kg(T,oe,ee);let F=j.clone().add(W).multiplyScalar(.5);F=ZLe(F,$,_);let N=j.clone().sub(W);[Y,J]=k(F,N,ee,C,W.y)}{let ee=Y,F=ee.clone().setY(0).normalize(),N=new O(0,-1,0),te=F.clone().cross(N);G(ee,F,N,te)}{let ee=S.angle(),F=Math.PI-ee,N=_.clone();N.y-=o/Math.sin(ee-Math.PI/2);let te=new O,le=[];for(let ue=0;ue<a;ue++){let pe=[],xe=Math.PI/2-F*ue/a,Se=Math.cos(xe),we=Math.sin(xe),ce=B;for(let Ee=0;Ee<=ue;Ee++){let ve=Math.cos(ce),Re=Math.sin(ce);U.x=Se*Re,U.y=we,U.z=Se*ve,te.copy(N).addScaledVector(U,o),c.push(te.x,te.y,te.z),h.push(U.x,U.y,U.z),u.push(0,0),pe.push(d++),ce+=Math.PI*2/ue/n}le.push(pe)}J.reverse(),le.push(J);let re=le.length-1;for(let ue=0;ue<re;ue++){let pe=le[ue],xe=le[ue+1],Se=pe.length-1;l.push(xe[1],pe[0],xe[0]);for(let we=1;we<=Se;we++)l.push(pe[we],pe[we-1],xe[we]),l.push(xe[we+1],pe[we],xe[we])}}}}}this.setIndex(l),this.setAttribute("position",new We(c,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(u,2));function k(U,Z,$,W,X){let j=-W/2,H=(Math.PI-W)/2,V=Z.clone().normalize().cross($);U.addScaledVector($,-o/Math.sin(H));let B=new O,q=new O,K=1,Q=d,oe=[];for(let ne=0;ne<=a;ne++){let L=j+ne/a*W;q.set(0,0,0),q.addScaledVector(V,Math.sin(L)),q.addScaledVector($,Math.cos(L));for(let z=0;z<=K;z++){let Y=z/K-.5;if(B.copy(U),B.addScaledVector(Z,Y),B.addScaledVector(q,o),X!=null){let J=Math.max(0,B.y-X);B.addScaledVector(Z,-J/Z.y)}c.push(B.x,B.y,B.z),h.push(q.x,q.y,q.z),u.push(0,0),z===0&&oe.push(d),d++}}for(let ne=0;ne<a;ne++)for(let L=0;L<K;L++){let z=Q+L+(K+1)*ne,Y=z+(K+1),J=Y+1,ee=z+1;l.push(z,Y,ee),l.push(Y,J,ee)}return[U.clone().addScaledVector(Z,.5),oe]}function G(U,Z,$,W){let X=Math.PI/2,j=A.angle()-X,H=[],V=new O,B=new O;for(let K=0;K<=a;K++){let Q=[],oe=K/a;for(let ne=0;ne<=K;ne++){let L=((K?ne/K:0)-.5)*v,z=Math.cos(L),Y=Math.sin(L),J=Math.atan(Math.tan(j)*z),ee=(X+J)*oe,F=Math.cos(ee),N=Math.sin(ee);V.set(0,0,0),V.addScaledVector(Z,N*z),V.addScaledVector($,F),V.addScaledVector(W,N*Y),B.copy(U).addScaledVector(V,o),c.push(B.x,B.y,B.z),h.push(V.x,V.y,V.z),u.push(0,0),Q.push(d++)}H.push(Q)}let q=H.length-1;for(let K=0;K<q;K++){let Q=H[K],oe=H[K+1],ne=Q.length-1;l.push(Q[0],oe[1],oe[0]);for(let L=1;L<=ne;L++)l.push(Q[L-1],Q[L],oe[L]),l.push(Q[L],oe[L+1],oe[L])}}}},jQ=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},i.parameters),n=Object.assign((e==null?void 0:e.ui)??{enabledIndieCorners:!1},i.ui);return{shape:i.shape&&i.shape instanceof on?i.shape:new on,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)}),ui:n}}static build(i){let e=i.shape,{width:t,height:n,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=i.parameters,c={x:t*.5,y:n*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(_,w,b){return w>t&&b>n?Math.min(_*t/w,_*n/b):w>t?_*t/w:b>n?_*n/b:_}let f=[];f[0]=r[0]===0?0:d(r[0],r[0]+r[3],r[0]+r[1]),f[1]=r[1]===0?0:d(r[1],r[1]+r[2],r[1]+r[0]),f[2]=r[2]===0?0:d(r[2],r[2]+r[1],r[2]+r[3]),f[3]=r[3]===0?0:d(r[3],r[3]+r[0],r[3]+r[2]);let p=h.x,m=u.x,y=u.y,g=h.y;e.addPoint(e.createPoint(p,y)),e.addPoint(e.createPoint(m,y)),e.addPoint(e.createPoint(m,g)),e.addPoint(e.createPoint(p,g)),e.isClosed=!0;let v=!0;for(let _=0,w=e.points.length;_<w;_++)e.points[_].roundness=f[_],_>0&&f[_]!==f[_-1]&&(v=!1);v&&(e.roundness=f[0]),e.useCubicForRoundedCorners=s!==1,e.update();let x=pf.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...i,type:"RectangleGeometry"}})}},KLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e=100,height:t=e,depth:n=e,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=i.parameters,h=new wD(.5*e,r,s,o,a,l,c);return h.scale(1,t/e,n/e),Object.assign(h,{userData:{...i,type:"SphereGeometry"}})}},JLe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:0})}}static build(i){let{width:e=100,height:t=e,widthSegments:n=8,heightSegments:r=8}=i.parameters,s=new vD(e,t,n,r);return s.scale(1,1,1),Object.assign(s,{userData:{...i,type:"PlaneGeometry"}})}},eIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,angle:r,cornerRadius:s,cornerSegments:o}=i.parameters,a=new tIe(e,t,n,r,s,o);return Object.assign(a,{userData:{...i,type:"BackdropGeometry"}})}},tIe=class extends _t{constructor(e=1,t=1,n=1,r=90,s=10,o=24){super(),this.type="BackdropGeometry";let a=[],l=[],c=[],h=.001;s==0&&(o=1),o=Math.max(1,Math.floor(o)),s=Math.min(s,100),r=Math.min(180-h,r),r*=Math.PI/180;let u=[],d=Math.PI/2,f=(K=0,Q=0,oe=0)=>new O(K,Q,oe),p=f(),m=f(),[y,g,v]=[t/2,e/2,n/2],x=-g,_=+g,[w,b,S]=[f(x,-y,+v),f(x,-y,-v),f(x,+y,-v)],A=(K,Q=!1)=>Math.sin(K-Math.PI/(1+ +Q)),E=(K,Q=!1)=>Math.cos(K-Math.PI/(1+ +Q));S.y=Math.sin(r)*t-y;let T=Math.cos(r)*t-v,M=w.z-h;r<=d?(S.z=Math.min(T,M),S.z==M&&(S.y-=(T-M)/Math.tan(d-r))):b.z=Math.min(b.z-T-v,w.z-h),p.subVectors(w,b),m.subVectors(S,b);let C=Math.min(p.length(),m.length())*s/100,D=C*Math.tan(r/2),P=C/Math.cos(r/2),I=p.clone().normalize().add(m.normalize()).setLength(P).add(b);p.set(0,A(r,!0),E(r,!0)),u.push([S,p.clone()]);let k=(Math.PI-r)/o;for(let K=0;K<=o;K++){let Q=d+r+K*k;p.set(0,Math.sin(Q)*D,Math.cos(Q)*D),p.add(I),m.set(0,A(Q),E(Q)),u.push([p.clone(),m.clone()])}u.push([w,f(0,1,0)]);let G=Math.sin(k/2)*D*2,U=u.length-1,Z=u[0][0].distanceTo(u[1][0]),$=u[U-1][0].distanceTo(u[U][0]),W=Z+G*o+$;u[0].push(1);for(let K=0;K<=o;K++)u[K+1].push(1-(Z+K*G)/W);u[U].push(0);let[X,j,H]=u[0],V,B,q;for(let K=1;K<u.length;K++)[V,B,q]=u[K],a.push(x,X.y,X.z,x,V.y,V.z,_,X.y,X.z,_,X.y,X.z,x,V.y,V.z,_,V.y,V.z),l.push(0,j.y,j.z,0,B.y,B.z,0,j.y,j.z,0,j.y,j.z,0,B.y,B.z,0,B.y,B.z),c.push(0,H,0,q,1,H,1,H,0,q,1,q),[X,j,H]=[V,B,q];this.setAttribute("position",new We(a,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(c,2))}},HQ=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof on?e.shape:new on,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,innerRadiusPercent:r,spikes:s,cornerRadius:o,angle:a,depth:l,extrudeBevelSize:c,extrudeBevelSegments:h}=e.parameters,u=e.shape,d=t*.5,f=n*.5,p=0,m=0,y=a*Math.PI/360/s,g=Math.PI/2*3*-1,v=d*r/100,x=f*r/100;if(s===3&&r===50){y=2*Math.PI/s;for(let w=0;w<s;w++){let b=y*w,S=p+Math.sin(b)*d,A=m+Math.cos(b)*f;u.addPoint(u.createPoint(S,A))}}else for(let w=0;w<s;w++){let b=p+Math.cos(g)*d,S=m+Math.sin(g)*f;u.addPoint(u.createPoint(b,S)),g+=y,b=p+Math.cos(g)*v,S=m+Math.sin(g)*x,u.addPoint(u.createPoint(b,S)),g+=y}u.isClosed=!0;for(let w=0,b=u.points.length;w<b;w++)u.points[w].roundness=o;u.roundness=o,u.update();let _=pf.create({shape:u,parameters:{roundness:o,depth:l,extrudeBevelSize:c,extrudeBevelSegments:h}});return Object.assign(_,{userData:{...e,type:"StarGeometry"}})}},iIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e,height:t}=i.parameters,n=new vD(e,t);return Object.assign(n,{userData:{...i,type:"TextFrameGeometry"}})}},nIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??t.width),s=Math.round(Math.abs(t.depth??t.width*.25));return{parameters:Object.assign(t,{width:n,height:r,depth:s})}}static build(i){let{width:e,height:t,depth:n,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=i.parameters,c=rIe(e,t,n,e*.5,o,s,0,0,r,a,l);return c.scale(1,t/e,1),Object.assign(c,{userData:{...i,type:"TorusGeometry"}})}};function rIe(i,e,t,n,r,s,o,a,l,c,h){return[e,t]=[t,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new rP(!0,i,e,t,n,r,s,o,a,l,c,h)}var sIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width),tube:t.tube??t.width*.125})}}static build(i){let{width:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o}=i.parameters,a=e*.5;a!==t&&(a-=t);let l=new dZ(a,t,n,r,s,o);return Object.assign(l,{userData:{...i,type:"TorusKnotGeometry"}})}},oIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},i.parameters);return{shape:i.shape&&i.shape instanceof on?i.shape:new on,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width*(t.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e=100,height:t,cornerRadius:n,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=i.parameters,l=i.shape,c=e*.5,h=t*.5;a?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=n;l.roundness=n,l.update();let u=pf.create({shape:l,parameters:{roundness:n,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...i,type:"TriangleGeometry"}})}};function aIe(i,e){let t=2*Math.PI;return(i%t+t)%t===(e%t+t)%t}var lIe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??t.width),s=Math.abs(t.depth??0),o=(e==null?void 0:e.shapeData)??nP.create({parameters:vQ}).userData.shape;return{path:i.path??e8.defaultData(),parameters:Object.assign(t,{width:n,height:r,depth:s,extrusion:{...yQ,...t.extrusion}}),shapeData:o}}static build(i){if(i.path.points.length>=2){let e=new cIe(i);return Object.assign(e,{userData:{...i,type:"PathGeometry"}})}else return Object.assign(new _t,{userData:{...i,type:"PathGeometry"}})}},cIe=class extends _t{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!aIe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:n,offset:r}=this.inputs.parameters.extrusion,s=Math.max(2,Math.ceil(this.inputs.path.isClosed?n*e.length:(Math.min(r+n,1)-r)*e.length)),o=[],a=[],l=Math.floor(r*e.length);for(let _=0;_<s;_++){let w=this.inputs.path.isClosed?(_+l)%e.length:Math.min(e.length-1,_+l);o.push(e[w]),a.push(t[w])}this._isOpenEnded()&&this._isGeometryClosed()&&(s++,o.push(o[0].clone()),a.push(a[0].clone())),this._applyPathModifiers(a);let{regions:c,infos:h,vertices:u}=this._computeShapePoints(5),d=0,f=0;h.sort((_,w)=>_.start-w.start),h.forEach(_=>{_.verticesStart=d,_.verticesCount=_.count+_.continuous.reduce((w,b)=>w+(b?0:1),0),f+=_.verticesCount,d=f});let p=f*s,m,y=0;this._isOpenEnded()&&(m=cu({windingRule:di.ODD,elementType:Vn.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:c}),y=m.vertexCount);let g=p+2*y,v={positions:new Float32Array(g*3),normals:new Float32Array(g*3),uvs:new Float32Array(g*2)},x=[];h.forEach(_=>{this._extrudeRegion(_,u,a,o,v,x,this._isGeometryClosed()&&!this._isOpenEnded())}),m&&(this._closeEnd(m,p,x,v,a[0],o[0],!1),this._closeEnd(m,p+y,x,v,a[a.length-1],o[o.length-1],!0)),this.setAttribute("position",new Ot(v.positions,3)),this.setAttribute("normal",new Ot(v.normals,3)),this.setAttribute("uv",new Ot(v.uvs,2)),this.setIndex(x),this.computeVertexNormals()}_extractPathPoints(){let e=this.inputs.path.isClosed,t=MQ(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(t.length<2)return[];let n=[t[0]];return t.forEach(r=>{n[n.length-1].distanceToSquared(r)>.001&&n.push(r)}),e&&n[n.length-1].distanceTo(n[0])<.001&&n.pop(),n}_computeBasisMatrices(e){let t=[],n=e.length,r=this.inputs.path.isClosed,s=new O,o=new O,a=new O,l=new O,c=new O(0,1,0);for(let m=0;m<n;m++){let y=e[m],g;m===0?g=r?e[e.length-1]:y.clone().multiplyScalar(2).sub(e[1]):g=e[m-1];let v;m===n-1?v=r?e[0]:y.clone().multiplyScalar(2).sub(e[m-1]):v=e[m+1];let x=y.clone().sub(g).normalize(),_=v.clone().sub(y).normalize(),w=x.clone().add(_).normalize();a.copy(w),m===0&&(w.equals(c)||w.clone().negate().equals(c))&&c.set(0,0,1);let b=c.clone().cross(w).normalize(),S=w.clone().cross(b).normalize();c.copy(S),l.copy(b),m===0&&(s.copy(S),o.copy(w));let A=new Fe().makeBasis(b,S,w);t.push(A)}let h=r?o:a,u=r?s:new O(0,1,0),d=h.clone().cross(l).normalize(),f=Math.acos(u.dot(d));if(isNaN(f))return t;let p=u.clone().cross(d);h.dot(p)>0&&(f*=-1);for(let m=1;m<t.length;m++){let y=new Fe().makeRotationZ(f*m/t.length);t[m].multiply(y)}return t}_applyPathModifiers(e){let t=e.length,{angle:n,twist:r,startScale:s,endScale:o}=this.inputs.parameters.extrusion,a=new Fe,l=new Fe;return e.forEach((c,h)=>{let u=this._isGeometryClosed()?h/t:h/(t-1);a.makeRotationZ(Ht.lerp(n,n+r,u));let d=Ht.lerp(s,o,u);l.makeScale(d,d,d),c.multiply(a).multiply(l)}),e}_computeShapePoints(e=12,t=di.ODD){let n=this.inputs.shapeData,r=n.extractShapePointsToFlatArray([],e),s=n.shapeHoles.map(h=>{let u=h.extractShapePointsToFlatArray([],e),d=[];for(let f=u.length-1;f>=1;f-=2){let p=u[f-1],m=u[f-0];d.push(p,m)}return d}),o=cu({windingRule:t,elementType:Vn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]}),a=cu({windingRule:di.ODD,elementType:Vn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]});if(!o)throw new Error("error generating geometry");let l=o.elementCount;if(a){o.elementCount+=a.elementCount;for(let h=0;h<a.elements.length;h++){let u=a.elements[h],d=h%2===0?o.vertexCount:0;o.elements.push(u+d)}for(let h=0;h<a.vertexIndices.length;h++){let u=a.vertexIndices[h],d=o.vertexCount;o.vertexIndices.push(u+d)}for(let h=0;h<a.vertices.length;h++){let u=a.vertices[h];o.vertices.push(u)}}for(let h=0,u=o.vertexCount;h<u;h++){let d=h*2;o.vertices[d+0],o.vertices[d+1]}let c=[];for(let h=o.elementCount-1;h>=0;h--){let u=h>=l,d=h*2,f=o.elements[d+0],p=o.elements[d+1],m=f+p,y={start:f,count:p,normals:[],isHole:u,continuous:[],verticesStart:0,verticesCount:0};c.push(y);let g=f,v=m-1,x=f+1,_=n.roundedCurves.length;do{let w=g-f;o.vertices[v*2+0],o.vertices[v*2+1];let b=o.vertices[g*2+0],S=o.vertices[g*2+1],A=o.vertices[x*2+0],E=o.vertices[x*2+1],T=b-A,M=S-E,C=Math.sqrt(T*T+M*M);T/=C,M/=C,y.normals[w*2+0]=-M,y.normals[w*2+1]=T;let D=o.vertexIndices[g];if(Array.isArray(D))y.continuous[w]=!1;else{let[P,I]=n.getCurveIndexFromVertexId(D-1,!0);if(I>0&&I<1)y.continuous[w]=!0;else{let k=I===1?P+1:P-1;k=(k+_)%_;let G=I===1?0:1,U=n.roundedCurves[P].getTangent(I),Z=n.roundedCurves[k].getTangent(G);y.continuous[w]=U.dot(Z)>.95}}u&&(y.normals[w*2+0]*=-1,y.normals[w*2+1]*=-1),[v,g,x]=[g,x,x+1],x>=m&&(x-=p)}while(x!==f+1)}return{regions:[r,...s],infos:c,vertices:o.vertices}}_insertVertex(e,t,n,r,s){let o=t*2,a=t*3;e.positions[a+0]=n.x,e.positions[a+1]=n.y,e.positions[a+2]=n.z,e.normals[a+0]=r.x,e.normals[a+1]=r.y,e.normals[a+2]=r.z,e.uvs[o+0]=s.x,e.uvs[o+1]=s.y}_extrudeRegion(e,t,n,r,s,o,a){let l=new O,c=new O,h=new fe;n.forEach((d,f)=>{let p=r[f],m=e.verticesStart*n.length+e.verticesCount*f;for(let y=0;y<e.count;y++){let g=(e.start+y)*2;l.set(t[g+0],t[g+1],0).applyMatrix4(d).add(p),c.set(e.normals[y*2+0],e.normals[y*2+1],0).applyMatrix4(d).normalize(),h.set(y/(e.count-1),f/(n.length-1)),this._insertVertex(s,m,l,c,h),m++,e.continuous[y]||(this._insertVertex(s,m,l,c,h),m++)}});let u=a?n.length:n.length-1;for(let d=0;d<u;d++){let f=e.verticesStart*n.length+e.verticesCount*d,p=a&&d===u-1?e.verticesStart*n.length:e.verticesStart*n.length+e.verticesCount*(d+1),m=0;for(let y=0;y<e.count;y++){e.continuous[y]||m++;let g=(y+1)%e.count===0?0:m+1,v=f+m,x=f+g,_=p+g,w=p+m;e.isHole?o.push(v,_,x,v,w,_):o.push(v,x,_,v,_,w),m++}}}_closeEnd(e,t,n,r,s,o,a){let l=e.vertexCount,c=new O(0,0,a?-1:1).applyMatrix4(s),h=new O,u=new fe;for(let f=0;f<l;f++){let p=2*f;h.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(s).add(o),this._insertVertex(r,t+f,h,c,u)}let d=e.elements;for(let f=0;f<e.elementCount;f++){let p=3*f,m=d[p+0]+t,y=d[p+(a?1:2)]+t,g=d[p+(a?2:1)]+t;n.push(m,y,g)}}};function uIe(){let i=new _t;return i.setAttribute("position",new Ot(new Float32Array([]),3)),i.setIndex(new Ot(new Uint16Array([]),1)),i}var hIe=12,dIe=1,WQ=class extends _t{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],this.userData={parameters:e,type:"TextGeometry"};let n=t.getFont(e.font);n!=null&&n.isLoaded?(this.font=n,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let n=t.getFont(e);n&&(this.font=n,await n.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:n,height:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a,text:l,textTransform:c}=e,h=c===2?l.toUpperCase():c===3?l.toLowerCase():l,u=fIe(e,t,h),{shapes:d,charWidths:f,charCoords:p}=t.generateShapes(u,e),m=n*.5,y=r*.5,g=d.map(_=>new on().fromShape(_));this.vectorShapes=g;let v=g.map(_=>pf.create({shape:_,parameters:{depth:s,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:s<=0?di.NONZERO:di.ODD,subdivisions:this.isLowResolution&&s>0?dIe:hIe}})),x=v.length?xPe(v):uIe();x.translate(-m,y,0),this.dispose(),this.wrappedText=u,this.charCoords=p,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(x.attributes).forEach(([_,w])=>{this.setAttribute(_,w)}),this.setIndex(x.index),this.computeBoundingSphere()}clone(){let e=QD(new _t,WQ.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,n])=>{this.setAttribute(t,n)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function fIe(i,e,t){t=t??i.text;let n=[""],r="";for(let s of t)r+=s,s===" "||s===`
`?(n[n.length-1]+=r,r="",s===`
`&&n.push("")):e.getTextWidth(n[n.length-1]+r,i)>i.width&&(n[n.length-1].length&&n.push(""),e.getTextWidth(n[n.length-1]+r,i)>i.width&&(r.length===1?(n[n.length-1]+=r,r=""):(n[n.length-1]+=r.slice(0,-1),r=r[r.length-1],n.push(""))));return n[n.length-1]+=r,n}var sP=new Promise(i=>{});function u8(i,e,t){let n={parameters:i,type:i.type};if(i.type==="PathGeometry")n.path=i.path;else if(i.type==="VectorGeometry"){let s=on.createFromState(i.shape,i.width,i.height);n.shape=s}else if(i.type==="NonParametricGeometry")i.data.groups&&i.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),n.geometry=new pZ().parse(i);else{if(i.type==="SubdivGeometry")return new es(i,t);if(i.type==="TextGeometry")return new WQ(i,e)}let r;try{r=Pk(n)}catch(s){console.error(s)}if(!r){let s=on.createFromState(J6.defaultData(),100,100);n.shape=s,r=Pk(n)}return r}var pIe=new Fe;function PT(i,e,t,n){let r=i.position.array,s=i.normal.array,o=pIe.makeScale(e,t,n).invert().elements,a,l,c;for(var h=0,u=r.length;h<u;h+=3)r[h]*=e,r[h+1]*=t,r[h+2]*=n,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c;i.position.needsUpdate=!0,i.normal.needsUpdate=!0}var f4=new Wn,ap=new O,Ke;sP.then(i=>{Ke=i});var Mk=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),Ek=new Uint32Array([0,1,2,3]),Ck=new Uint8Array([4]),es=class extends _t{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let n=this.data.scaleBaked,r=Md.div(t,n);this.subdividedGeometry&&PT(this.subdividedGeometry.attributes,...r),this.originalGeometry&&PT(this.originalGeometry.attributes,...r),this.data=e;let s=this.userData.parameters;this.userData.parameters={width:s.width*r[0],height:s.height*r[1],depth:s.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(ap.fromArray(r));let o=ap.set(s.width,s.height,s.depth).length();this.originalGeometry.boundingSphere.radius=o/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,n;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:n}=es.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Wd(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(es.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Qo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,n=e.boundingSphere.center;f4.setFromBufferAttribute(t),f4.getCenter(n),e.boundingSphere.radius=n.distanceTo(f4.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),f4.getSize(ap);let r={width:ap.x,height:ap.y,depth:ap.z};return this.userData.parameters=r,r}static build(e,t,n,r){let s,o,a,l=(e==null?void 0:e.phongAngle)??35;n===!1&&(l=-1),t&&(Ke.free_bvh(t),Ke.free_subdivision_surface(t));try{s=es.allocate(e,r)}catch(c){console.error(c,e),s=es.allocate({positionWASM:Mk,indexWASM:Ek,verticesPerFaceWASM:Ck},r)}if(Ke.set_destination_refinement_level(s,0),o=es.buildLevel(s,!0,l),e.subdivisions>0)try{Ke.set_destination_refinement_level(s,e.subdivisions),a=es.buildLevel(s,!1,l)}catch{try{Ke.set_destination_refinement_level(s,e.subdivisions-1),a=es.buildLevel(s,!1,l)}catch{a=null}}else a=null;return{subdivPointer:s,originalGeometry:o,subdividedGeometry:a}}static primitiveToQuads(e,t,n){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r;if(e.type==="TorusGeometry"&&e.arc===Math.PI*2){let{width:h,height:u,depth:d,arc:f,tubularSegments:p,radialSegments:m}=e;r=new rP(!0,h,d,u,h*.5,f/(2*Math.PI),p,d/2,0,m,0,0,!0)}else r=e.shape!==void 0?t.geometry:u8(e,n,!1);let s,o,a,l;({positions:s,triIndices:l}=$Q(r.getAttribute("position"),r.getIndex()));let c;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let h=e.radialSegments*e.heightSegments*3*2,u=h+e.radialSegments*3;c=[h,u]}return{indices:o,verticesPerFace:a}=qQ(s,l,r,c),{positions:s,indices:o,verticesPerFace:a}}static allocate(e,t){var _;let n,r,s,o=[],a=[];e.positionWASM&&e.positionWASM.length>0?(n=e.positionWASM,r=e.indexWASM,s=e.verticesPerFaceWASM):(n=Mk,r=Ek,s=Ck);let l=n.length,c=r.length,h=s.length,u=n.length+o.length+a.length,d=r.length+s.length,f=u*Float32Array.BYTES_PER_ELEMENT+d*Uint32Array.BYTES_PER_ELEMENT,p=u*Float32Array.BYTES_PER_ELEMENT,m=Ke._malloc(f),y=new Float32Array(Ke.HEAPF32.buffer,m,u),g=new Uint32Array(Ke.HEAPU32.buffer,m+p,d);y.set(n,0),y.set(o,n.length),y.set(a,n.length+o.length),g.set(r,0),g.set(s,r.length);let v;(_=e==null?void 0:e.scaleBaked)!=null&&_.some(w=>w!==1)&&(v=new Fe().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let x=v?Ke.alloc_subdivision_surface2(m,l,m+p,c,m+p+r.length*Uint32Array.BYTES_PER_ELEMENT,h,v.elements):Ke.alloc_subdivision_surface(m,l,m+p,c,m+p+r.length*Uint32Array.BYTES_PER_ELEMENT,h);return Ke._free(m),x}static buildLevel(e,t,n,r,s){let o=s?Ke.get_mesh_data2(e,t?Ke.Level.CONTROL:Ke.Level.REFINED,n,s.elements):Ke.get_mesh_data(e,t?Ke.Level.CONTROL:Ke.Level.REFINED,n),a=8,l=Ke.HEAPU32.subarray(o>>2,(o>>2)+a),c=l.subarray(4,4+4),h=0,u=Ke.HEAPU32[l[h]>>2],d=Ke.HEAPF32.subarray(u>>2,(u>>2)+c[h]);h++;let f=Ke.HEAPU32[l[h]>>2],p=Ke.HEAPF32.subarray(f>>2,(f>>2)+c[h]);h++;let m=Ke.HEAPU32[l[h]>>2],y=Ke.HEAPU32.subarray(m>>2,(m>>2)+c[h]);h++;let g=Ke.HEAPU32[l[h]>>2],v=Ke.HEAPU32.subarray(g>>2,(g>>2)+c[h]);if(h++,r===void 0){let x=new _t;if(x.setIndex(new _5(v,1)),x.setAttribute("position",new We(d,3)),x.setAttribute("normal",new We(p,3)),t){x.setAttribute("faceMap",new _5(y,1));let _=new Float32Array(p.length/3*4).fill(0);x.setAttribute("color",new Ot(_,4))}return Ke.free_mesh_data(o),x.userData.type="SubdivGeometry",x}r.getAttribute("position").copyArray(d),r.getAttribute("normal").copyArray(p),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,Ke.free_mesh_data(o)}static freeSubdivPointer(e){Ke.free_bvh(e),Ke.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,n){let r=Ke.get_wireframe_data_for_base_level(e),s=4,o=Ke.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(2,2+2),l=0,c=Ke.HEAPU32[o[l]>>2],h=Ke.HEAPF32.subarray(c>>2,(c>>2)+a[l]);l++;let u=Ke.HEAPU32[o[l]>>2],d=Ke.HEAPU32.subarray(u>>2,(u>>2)+a[l]);if(t===void 0){let f=new _t;f.setAttribute("position",new We(h,3));let p=new Float32Array(h.length);for(let m=0,y=h.length;m<y;)p[m++]=n.r,p[m++]=n.g,p[m++]=n.b;return f.setAttribute("color",new Ot(p,3)),f.setIndex(new _5(d,1)),Ke.free_wireframe_data_for_base_level(r),f}t.getAttribute("position").copyArray(h),t.attributes.position.needsUpdate=!0,Ke.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,n){let r=t===0;r||Ke.set_destination_refinement_level(e,t);let s=n?Ke.get_topological_data2(e,r?Ke.Level.CONTROL:Ke.Level.REFINED,n.elements):Ke.get_topological_data(e,r?Ke.Level.CONTROL:Ke.Level.REFINED),o=6,a=Ke.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(3,3+3),c=0,h=Ke.HEAPU32[a[c]>>2],u=new Float32Array(Ke.HEAPF32.subarray(h>>2,(h>>2)+l[c]));c++;let d=Ke.HEAPU32[a[c]>>2],f=new Uint32Array(Ke.HEAPU32.subarray(d>>2,(d>>2)+l[c]));c++;let p=Ke.HEAPU32[a[c]>>2],m=new Uint8Array(Ke.HEAPU32.subarray(p>>2,(p>>2)+l[c]));return Ke.free_topological_data(s),{positions:u,indices:f,verticesPerFace:m}}},Dk=["getX","getY","getZ"];function $Q(i,e){let t={},n=e?e.count:i.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<n;c++){let h=e?e.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(i[Dk[d]](h)*a)},`;if(u in t)s.push(t[u]);else{for(let d=0;d<3;d++)o.push(i[Dk[d]](h));t[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var p4=new O,ow=new O,aw=new O,lw=new O;function qQ(i,e,t,n){let r=[],s=[];if(t.userData.shape!==void 0&&t.userData.parameters.depth===0&&t.userData.shape.shapeHoles.length===0){let o=t.userData.shape.extractShapePointsToFlatArray([]),a=t.userData.parameters.spikes;if(t.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&t.userData.parameters.angle>=360){let h=o.length/2/a;o=o.filter((u,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);i.length=0;let c=0;if(l<0)for(let h=0;h<o.length;h+=2)i.push(o[h],o[h+1],0),r.push(c++);else for(let h=o.length-2;h>=0;h-=2)i.push(o[h],o[h+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=t.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){p4.set(i[e[o]*3],i[e[o]*3+1],i[e[o]*3+2]),ow.set(i[e[o+1]*3],i[e[o+1]*3+1],i[e[o+1]*3+2]),aw.set(i[e[o+4]*3],i[e[o+4]*3+1],i[e[o+4]*3+2]),lw.set(i[e[o+5]*3],i[e[o+5]*3+1],i[e[o+5]*3+2]),ow.sub(p4).normalize(),aw.sub(p4).normalize(),lw.sub(p4).normalize();let l=ow.cross(aw).dot(lw);Math.abs(l)>.005||n&&n.some((c,h)=>h%2===1?!1:o>=n[h]&&o<n[h+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(t.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([t.userData.parameters.depth])[0];for(let h=0,u=0;h<i.length;h+=3,u++)i[h+2]===0&&(o.push(u),l++),i[h+2]===c&&a.push(u);if(t.userData.parameters.extrudeBevelSize===0){let h=a[0];a[0]=a[1],a[1]=h}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var jc={};_8e(jc,{calcBoolean:()=>yIe,calcBooleanTopological:()=>vIe,freeMeshSet:()=>bIe,getMeshSet:()=>xIe,transformMeshSet:()=>_Ie});var mIe=new Promise(i=>{}),Ct,l1;mIe.then(i=>Ct=i);function gIe(i,e,t){let n,{positions:r,triIndices:s}=$Q(i.getAttribute("position"),i.getIndex()),o;if(e&&t){let{indices:a,verticesPerFace:l}=qQ(r,s,i);o=l.length,n=[];for(let c=0,h=0;c<o;c++){n.push(l[c]);for(let u=0;u<l[c];u++)n.push(a[h++])}}else{let a=s.length;n=Array(a+a/3),o=0;for(let l=0,c=0;c<n.length;)n[c++]=3,o++,n[c++]=s[l++],n[c++]=s[l++],n[c++]=s[l++]}return{positions:r,faceIndices:n,nFaces:o}}function XQ(i){let e=i.length,t=e*Uint32Array.BYTES_PER_ELEMENT,n=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(i[0])?t:n,s=Ct._malloc(r);return(Number.isInteger(i[0])?new Uint32Array(Ct.HEAPU32.buffer,s,e):new Float32Array(Ct.HEAPF32.buffer,s,e)).set(i,0),s}function YQ(i){switch(i){case 0:return Ct.OP.UNION;case 1:return Ct.OP.INTERSECTION;case 2:return Ct.OP.A_MINUS_B;case 3:return Ct.OP.B_MINUS_A;case 4:return Ct.OP.SYMMETRIC_DIFFERENCE;case 5:return Ct.OP.ALL;default:throw new Error("Unknown boolean operation "+i)}}function vIe(i,e){l1===void 0&&(l1=Ct.init_csg());let t=XQ(i),n=Ct.csg_calc_topological(l1,t,i.length,YQ(e));Ct._free(t);let r=6,s=Ct.HEAPU32.subarray(n>>2,(n>>2)+r),o=s.subarray(3,3+3),a=0,l=Ct.HEAPU32[s[a]>>2],c=new Float32Array(Ct.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=Ct.HEAPU32[s[a]>>2],u=new Uint32Array(Ct.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=Ct.HEAPU32[s[a]>>2],f=new Uint8Array(Ct.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return Ct.free_mesh_data(n),{positions:c,indices:u,verticesPerFace:f}}function yIe(i,e,t,n){l1===void 0&&(l1=Ct.init_csg());let r=XQ(i),s=Ct.csg_calc(l1,r,i.length,n,YQ(e));Ct._free(r);let o=5,a=Ct.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=Ct.HEAPU32[a[c]>>2],u=Ct.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Ct.HEAPU32[a[c]>>2],f=Ct.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=l[c];t.setAttribute("position",new We(u,3)),t.setAttribute("normal",new We(f,3));let m=Ct.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return t.boundingSphere===null&&(t.boundingSphere=new Qo),t.boundingSphere.center.set(m[0],m[1],m[2]),t.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,t.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},Ct.free_mesh_data(s),p}function xIe(i,e,t){if(Ct===void 0)return-1;let n,r,s;if(e&&i.userData.positions!==void 0){let m=i.userData;s=m.verticesPerFace.length,n=m.positions,r=Array(m.verticesPerFace.reduce((y,g)=>y+g,0)+s);for(let y=0,g=0,v=0;y<m.verticesPerFace.length;y++){r[v++]=m.verticesPerFace[y];for(let x=0;x<m.verticesPerFace[y];x++)r[v++]=m.indices[g++]}}else({positions:n,faceIndices:r,nFaces:s}=gIe(i,e,t));let o=n.length,a=r.length,l=n.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=Ct._malloc(h),f=new Float32Array(Ct.HEAPF32.buffer,d,l),p=new Uint32Array(Ct.HEAPU32.buffer,d+u,c);return f.set(n,0),p.set(r,0),Ct.get_csg_mesh(d,o,d+u,a,s)}function _Ie(i,e){Ct.transform_csg_mesh(i,e.elements)}function bIe(i){Ct.free_csg_mesh(i)}var wIe={ConeGeometry:sLe,CubeGeometry:oLe,CylinderGeometry:rLe,DodecahedronGeometry:lLe,EllipseGeometry:nP,HelixGeometry:BLe,IcosahedronGeometry:ULe,LatheGeometry:VLe,NonParametricGeometry:XLe,PolygonGeometry:GQ,PyramidGeometry:YLe,RectangleGeometry:jQ,SphereGeometry:KLe,PlaneGeometry:JLe,BackdropGeometry:eIe,StarGeometry:HQ,TextFrameGeometry:iIe,TorusGeometry:nIe,TorusKnotGeometry:sIe,TriangleGeometry:oIe,PathGeometry:lIe,VectorGeometry:pf},Pk=i=>wIe[i.type].create(i);function Bg(i){return i!==null&&"booleanOp"in i}var ZQ=class extends EQ(QY){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Fe}updateVisible(){super.updateVisible(),this.visible=!Bg(this.parent)&&this.visible,Bg(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(jc.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Bg(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof ZQ&&(e.freeBooleanPointer(),Bg(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let t=super.updateTransformState(e);return t&&Bg(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}},m4=new Wn;function oP(i,e=0,t=i.count,n,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=e;u<t;u++){let d=i.getX(u),f=i.getY(u),p=i.getZ(u);d<s&&(s=d),f<o&&(o=f),p<a&&(a=p),d>l&&(l=d),f>c&&(c=f),p>h&&(h=p)}m4.min.set(s,o,a),m4.max.set(l,c,h),m4.getCenter(n),m4.getSize(r).multiplyScalar(.5)}var SIe=new _t,AIe=new i7,oh=class extends ZQ{constructor(i,e){super(SIe,AIe),this.super_Entity(i,e)}updateState(i,e){this.updateState_Entity(i,e)}updateEntityBoxSize(i,e){let t=this.geometry.getAttribute("position");t!==void 0?oP(t,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:t.count,i,e):super.updateEntityBoxSize(i,e)}},Lk=class{constructor(i){i=i??{},this.name=i.name,this.type=i.type,this.node=i.node,this.size=i.size,this.needsUpdate=i.needsUpdate}get value(){return this.node.value}set value(i){this.node.value=i}},ah=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Ht.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,n){return n=n??{},this.analyze(e,n),this.flow(e,t,n)}flow(e,t,n){n=n??{},e.addFlow(n.slot,n.cache,n.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,n){t=t??this.getType(e,t);let r=e.getNodeData(n??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,n)}updateFrame(e){}generateReadonly(e,t,n,r,s,o){return""}generate(e,t,n,r,s){return""}parse(e,t,n,r){}appendDepsNode(e,t,n){t.deps=(t.deps||0)+1;let r=e.getTypeLength(n);(r>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=r,t.output=n)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,n;for(t in this)n=this[t],n instanceof ah&&(e+='"'+t+'":'+n.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)t=this.hashProperties[r],n=this[t],e+='"'+t+'":"'+String(n)+'",';return e+='"id":"'+this.uuid+'"}',e}},TIe=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,n){n=n!==void 0?n:!0,this.keywords[e]={callback:t,cache:n}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ws=new TIe,Ai=class extends ah{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,n,r){if(t=t??this.getType(e),this.getShared(e,t)){let s=this.getUnique(e,t);s&&this.uuid===void 0&&(this.uuid=Ht.generateUUID()),n=e.getUUID(n??this.getUUID(),!s);let o=e.getNodeData(n),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,n)):super.build(e,t,n);if(s)return o.name=o.name||super.build(e,t,n),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||o.deps===1))return super.build(e,t,n);n=this.getUUID(!1);let l=this.getTemp(e,n);if(l)return e.format(l,a,t);{l=super.generate(e,t,n,o.output,r);let c=this.generate(e,a,n);return e.addNodeCode(l+" = "+c+";"),e.format(l,a,t)}}return super.build(e,t,n)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let n=e.getVars()[t];return n?n.name:void 0}generate(e,t,n,r,s){return this.getShared(e,t)||console.error("TempNode is not shared"),n=n??this.uuid,e.getTempVar(n,r??this.getType(e),s,this.getLabel()).name}},co=class extends Ai{constructor(i,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(i,e),this.readonly=!1}setReadonly(i){return this.readonly=i,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(i,e,t,n,r,s){t=i.getUUID(t??this.getUUID()),n=n??this.getType(i);let o=i.getNodeData(t);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(i,e,t,n,r,s):i.isShader("vertex")?(o.vertex||(o.vertex=i.createVertexUniform(n,this,r,s,this.getLabel())),i.format(o.vertex.name,n,e)):(o.fragment||(o.fragment=i.createFragmentUniform(n,this,r,s,this.getLabel())),i.format(o.fragment.name,n,e))}},Mo=class extends co{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof fe?e:new fe(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,n,r,s,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},bo=class extends co{constructor(e=0,t,n){super("v3"),this.nodeType="Vector3",this.value=e instanceof O?e:new O(e,t,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,n,r,s,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},so=class extends St{constructor(e,t,n,r){super(e,t,n),this.isColorA=!0,this.a=r}setRGBA(e,t,n,r){super.setRGB(e,t,n),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Jh=class extends co{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof so?e:new so(e.r,e.g,e.b,e.a)}generateReadonly(e,t,n,r,s,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},MIe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,Ik=/[a-z_0-9]+/gi,qe=class extends Ai{constructor(e,t,n,r,s){super(s),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=s===void 0,this.isInterface=!1,this.parse(e,t,n,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,n,r,s){let o,a=0,l=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let c=[];for(;o=Ik.exec(this.src);)c.push(o);for(let h=0;h<c.length;h++){let u=c[h],d=u[0],f=this.isMethod?!this.getInputByName(d):!0,p=d;if(this.keywords[d]||this.useKeywords&&f&&ws.containsKeyword(d)){let m=this.keywords[d];if(!m){let y=ws.getKeywordData(d);y.cache&&(m=e.keywords[d]),m=m||ws.getKeyword(d,e),y.cache&&(e.keywords[d]=m)}p=m.build(e)}d!==p&&l[u.index+a-1]!=="."&&(l=l.substring(0,u.index+a)+p+l.substring(u.index+d.length+a),a+=p.length-d.length),this.getIncludeByName(p)===void 0&&ws.contains(p)&&e.include(ws.get(p))}return t==="source"?l:this.isMethod?(this.isInterface||e.include(this,void 0,l),this.name):e.format("( "+l+" )",this.getType(e),t)}parse(e,t,n,r){if(this.src=e||"",this.includes=t??[],this.extensions=n??{},this.keywords=r??{},this.isMethod){let s=MIe.exec(this.src);if(this.inputs=[],s&&s.length==4){this.type=s[1],this.name=s[2];let o=s[3].match(Ik);if(o){let a=0;for(;a<o.length;){let l=o[a++],c;l==="in"||l==="out"||l==="inout"?c=o[a++]:(c=l,l="");let h=o[a++];this.inputs.push({name:h,type:c,qualifier:l})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},EIe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,QQ=class extends Ai{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||QQ.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,n,r,s){this.src=e||"";let o,a,l="",c=EIe.exec(e);this.useDefine=s??this.src.charAt(0)==="#",c&&c.length>1?(a=c[1],o=c[2],l=c[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=l}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,n,r,s){return e.format(this.name,this.getType(e),t)}},ai=QQ;ai.PI="PI",ai.PI2="PI2",ai.RECIPROCAL_PI="RECIPROCAL_PI",ai.RECIPROCAL_PI2="RECIPROCAL_PI2",ai.LOG2="LOG2",ai.EPSILON="EPSILON";var CIe=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),DIe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),KQ=class extends Ai{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,n,r,s){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=CIe.exec(e);if(t){let n=t[2],r;for(;r=DIe.exec(n);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},aP=class extends Ai{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(r,this.getType(e),t)}};ws.addKeyword("uv",function(){return new aP});ws.addKeyword("uv2",function(){return new aP(1)});var xp=class extends Ai{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??xp.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case O6:return["Linear"];case XY:return["sRGB"];default:return[]}}generate(e,t){var a;let n=this.input.build(e,"v4"),r=this.getType(e),s=xp.Nodes[this.method],o=e.include(s);if(o===xp.LINEAR_TO_LINEAR)return e.format(n,r,t);if(((a=s.inputs)==null?void 0:a.length)===2){let l=this.factor.build(e,"f");return e.format(o+"( "+n+", "+l+" )",r,t)}else return e.format(o+"( "+n+" )",r,t)}fromEncoding(e){let t=xp.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=xp.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},S0=xp;S0.Nodes={LinearToLinear:new qe(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new qe(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new qe(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},S0.LINEAR_TO_LINEAR="LinearToLinear",S0.SRGB_TO_LINEAR="sRGBToLinear",S0.LINEAR_TO_SRGB="LinearTosRGB";var Fi=class extends qe{constructor(e="",t,n,r,s){super(e,s,r,n,t),this.nodeType="Expression"}},uu=class extends co{constructor(e=new Ps,t,n,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new aP,this.bias=n,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let n=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=s?"tex2DBias":"tex2D",s?a=o+"( "+n+", "+r+", "+s+" )":a=o+"( "+n+", "+r+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace??new S0(new Fi("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,c),e.removeContext(),e.format(a,c,t)}},je=class extends co{constructor(i){super("f"),this.nodeType="Float",this.value=i??0}generateReadonly(i,e,t,n,r,s){return i.format(this.value+(this.value%1?"":".0"),n,e)}},Ok=class extends Ai{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,n,r,s){r=this.getType(e);let o=this.value,a=o.build(e,t)+"( ",l=[];if(o.inputs){for(let c=0;c<o.inputs.length;c++){let h=o.inputs[c],u=this.inputs[c]||this.inputs[h.name];l.push(u.build(e,e.getTypeByFormat(h.type)))}a+=l.join(", ")+" )"}return e.format(a,r,t)}},JQ=class extends Ai{constructor(e,t,n=JQ.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=n}getType(e){let t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}generate(e,t){let n=this.getType(e);this.type=n;let r=this.a.build(e,n),s=this.b.build(e,n);return e.format("( "+r+" "+this.op+" "+s+" )",n,t)}},A0=JQ;A0.ADD="+",A0.SUB="-",A0.MUL="*",A0.DIV="/";var si=class extends Ai{constructor(e,t=si.ABS,n,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof n!="string"?this.c=n:r=n,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case si.MIX:case si.CLAMP:case si.REFRACT:case si.SMOOTHSTEP:case si.FACEFORWARD:return 3;case si.MIN:case si.MAX:case si.MOD:case si.STEP:case si.REFLECT:case si.DISTANCE:case si.DOT:case si.CROSS:case si.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>r?this.a.getType(e):n>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case si.LENGTH:case si.DISTANCE:case si.DOT:return"f";case si.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let n,r,s,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,l=this.c?e.getTypeLength(this.c.getType(e)):0,c=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case si.NEGATE:return e.format("( -"+this.a.build(e,c)+" )",c,t);case si.INVERT:return e.format("( 1.0 - "+this.a.build(e,c)+" )",c,t);case si.CROSS:n=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case si.STEP:n=this.a.build(e,o===1?"f":c),r=this.b.build(e,c);break;case si.MIN:case si.MAX:case si.MOD:n=this.a.build(e,c),r=this.b.build(e,a===1?"f":c);break;case si.REFRACT:n=this.a.build(e,c),r=this.b.build(e,c),s=this.c.build(e,"f");break;case si.MIX:n=this.a.build(e,c),r=this.b.build(e,c),s=this.c.build(e,l===1?"f":c);break;default:n=this.a.build(e,c),this.b&&(r=this.b.build(e,c)),this.c&&(s=this.c.build(e,c));break}let u=[];u.push(n),r&&u.push(r),s&&u.push(s);let d=this.getNumInputs(e);if(u.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",h,t)}},ht=si;ht.RAD="radians",ht.DEG="degrees",ht.EXP="exp",ht.EXP2="exp2",ht.LOG="log",ht.LOG2="log2",ht.SQRT="sqrt",ht.INV_SQRT="inversesqrt",ht.FLOOR="floor",ht.CEIL="ceil",ht.NORMALIZE="normalize",ht.FRACT="fract",ht.SATURATE="saturate",ht.SIN="sin",ht.COS="cos",ht.TAN="tan",ht.ASIN="asin",ht.ACOS="acos",ht.ARCTAN="atan",ht.ABS="abs",ht.SIGN="sign",ht.LENGTH="length",ht.NEGATE="negate",ht.INVERT="invert",ht.MIN="min",ht.MAX="max",ht.MOD="mod",ht.STEP="step",ht.REFLECT="reflect",ht.DISTANCE="distance",ht.DOT="dot",ht.CROSS="cross",ht.POW="pow",ht.MIX="mix",ht.CLAMP="clamp",ht.REFRACT="refract",ht.SMOOTHSTEP="smoothstep",ht.FACEFORWARD="faceforward";var w2=class extends Ai{constructor(e,t,n){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=n}bilinearCubeUV(e,t,n,r){let s=new Ok(w2.Nodes.bilinearCubeUV,[t,n,r]);this.colorSpaceTL=this.colorSpaceTL??new S0(new Fi("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(s.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new S0(new Fi("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(s.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new S0(new Fi("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(s.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new S0(new Fi("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(s.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Fi(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Fi(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Fi(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Fi(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new Fi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=s,a}generate(e,t){if(e.isShader("fragment")){let n=this.uv,r=this.bias||e.context.roughness,s=new Ok(w2.Nodes.roughnessToMip,[r]),o=new ht(s,w2.Nodes.m0,w2.Nodes.cubeUV_maxMipLevel,ht.CLAMP),a=new ht(o,ht.FLOOR),l=new ht(o,ht.FRACT),c=this.bilinearCubeUV(e,this.value,n,a),h=this.bilinearCubeUV(e,this.value,n,new A0(a,new je(1).setReadonly(!0),A0.ADD)),u=new ht(c,h,l,ht.MIX);return e.format(u.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},LT=w2;LT.Nodes=function(){let i=new KQ(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new ai("float cubeUV_maxMipLevel 8.0",!0),t=new ai("float cubeUV_minMipLevel 4.0",!0),n=new ai("float cubeUV_maxTileSize 256.0",!0),r=new ai("float cubeUV_minTileSize 16.0",!0),s=new qe(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new qe(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new qe(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[i,s,o,e,t,n,r]);a.useKeywords=!1;let l=new ai("float r0 1.0",!0),c=new ai("float v0 0.339",!0),h=new ai("float m0 -2.0",!0),u=new ai("float r1 0.8",!0),d=new ai("float v1 0.276",!0),f=new ai("float m1 -1.0",!0),p=new ai("float r4 0.4",!0),m=new ai("float v4 0.046",!0),y=new ai("float m4 2.0",!0),g=new ai("float r5 0.305",!0),v=new ai("float v5 0.016",!0),x=new ai("float m5 3.0",!0),_=new ai("float r6 0.21",!0),w=new ai("float v6 0.0038",!0),b=new ai("float m6 4.0",!0),S=[l,c,h,u,d,f,p,m,y,g,v,x,_,w,b],A=new qe(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,S);return{bilinearCubeUV:a,roughnessToMip:A,m0:h,cubeUV_maxMipLevel:e}}();var _p=class extends Ai{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??_p.VIEW}getShared(){return this.scope===_p.WORLD}build(e,t,n,r){let s=e.context[this.scope+"Normal"];return s?s.build(e,t,n,r):super.build(e,t,n)}generate(e,t,n,r,s){let o;switch(this.scope){case _p.VIEW:e.isShader("vertex")?o="transformedNormal":o="geometryNormal";break;case _p.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case _p.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal");break}return e.format(o,this.getType(e),t)}},Ts=_p;Ts.LOCAL="local",Ts.WORLD="world",Ts.VIEW="view",Ts.NORMAL="normal";ws.addKeyword("viewNormal",function(){return new Ts(Ts.VIEW)});ws.addKeyword("localNormal",function(){return new Ts(Ts.NORMAL)});ws.addKeyword("worldNormal",function(){return new Ts(Ts.WORLD)});var Ml=class extends Ai{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Ml.LOCAL}getType(){switch(this.scope){case Ml.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Ml.LOCAL:case Ml.WORLD:return!1}return!0}generate(e,t,n,r,s){let o;switch(this.scope){case Ml.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case Ml.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case Ml.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Ml.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(o,this.getType(),t)}},Ca=Ml;Ca.LOCAL="local",Ca.WORLD="world",Ca.VIEW="view",Ca.PROJECTION="projection";ws.addKeyword("position",function(){return new Ca});ws.addKeyword("worldPosition",function(){return new Ca(Ca.WORLD)});ws.addKeyword("viewPosition",function(){return new Ca(Ca.VIEW)});var o0=class extends Ai{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??o0.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case o0.SPHERE:return"v2"}return this.type}generate(e,t){let n=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case o0.VECTOR:{let s=new Ts(Ts.VIEW),o=e.context.roughness,a=s.build(e,"v3"),l=new Ca(Ca.VIEW).build(e,"v3"),c=o?o.build(e,"f"):void 0,h=`reflect( -normalize( ${l} ), ${a} )`;c&&(h=`normalize( mix( ${h}, ${a}, ${c} * ${c} ) )`);let u=`inverseTransformDirection( ${h}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${u};`),r="reflectVec"):r=u;break}case o0.CUBE:{let s=new o0(o0.VECTOR).build(e,"v3"),o="vec3( -"+s+".x, "+s+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${o};`),r="reflectCubeVec"):r=o;break}case o0.SPHERE:{let s="normalize( ( viewMatrix * vec4( "+new o0(o0.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),r="reflectSphereVec"):r=s;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},c1=o0;c1.CUBE="cube",c1.SPHERE="sphere",c1.VECTOR="vector";var PIe=class extends Ai{constructor(e=new uu,t,n){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new LT(this.value,t??new c1(c1.VECTOR),n),this.irradianceNode=new LT(this.value,new Ts(Ts.WORLD),new je(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},LIe=class extends co{constructor(i=new KY,e,t){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=i,this.uv=e??new c1,this.bias=t}getTexture(i,e){return super.generate(i,e,this.value.uuid,"tc")}generate(i,e){var l;if(e==="samplerCube")return this.getTexture(i,e);let t=this.getTexture(i,e),n=(l=this.uv)==null?void 0:l.build(i,"v3"),r=this.bias?this.bias.build(i,"f"):void 0;r===void 0&&i.context.bias&&(r=i.context.bias.setTexture(this).build(i,"f"));let s;r?s="texCubeBias( "+t+", "+n+", "+r+" )":s="texCube( "+t+", "+n+" )";let o={include:i.isShader("vertex"),ignoreCache:!0},a=this.getType(i);return i.addContext(o),this.colorSpace=this.colorSpace??new S0(new Fi("",a)),this.colorSpace.fromDecoding(i.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(i,a),i.removeContext(),i.format(s,a,e)}},Rk=["x","y","z","w"],IIe=["float","vec2","vec3","vec4"],OIe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},RIe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},NIe=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,n){return t.deps.length-n.deps.length}return function(t,n){let r=this.getIncludes(t,n);if(!r)return"";let s="";r=r.sort(e);for(let o=0;o<r.length;o++)r[o].src&&(s+=r[o].src+`
`);return s}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let r=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,n,r="varying",s="V",o=""){let a=this.getVars(r),l=a[e];if(!l){let c=a.length;l={name:n||"node"+s+c+(o?"_"+o:""),type:t},a.push(l),a[e]=l}return l}getTempVar(e,t,n,r){return this.getVar(e,t,n,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let n="";for(let r=0,s=e.length;r<s;++r){let o=e[r],a=o.type,l=o.name,c=o.size,h=this.getFormatByType(a);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?n+=t+" "+h.substring(0,h.length-2)+" "+l+`[${c}];
`:n+=t+" "+h+" "+l+`;
`}return n}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof ah?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,n,r,s,o){if(t.includes("[]")){let a=this.inputs.arrayUniforms,l=a.list.length,c=new Lk({type:t,size:n.size,name:r||"nodeUA"+l+(o?"_"+o:""),node:n,needsUpdate:s});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c}else{let a=this.inputs.uniforms,l=a.list.length,c=new Lk({type:t,name:r||"nodeU"+l+(o?"_"+o:""),node:n,needsUpdate:s});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c}}createVertexUniform(e,t,n,r,s){return this.createUniform("vertex",e,t,n,r,s)}createFragmentUniform(e,t,n,r,s){return this.createUniform("fragment",e,t,n,r,s)}include(e,t,n){var o;let r;if(e=typeof e=="string"?ws.get(e):e,this.context.include===!1)return e.name;e instanceof qe?r=this.includes.functions:e instanceof ai?r=this.includes.consts:e instanceof KQ&&(r=this.includes.structs);let s=r[this.shader]=r[this.shader]||[];if(e){let a=s[e.name];if(a||(a=s[e.name]={node:e,deps:[]},s.push(a),a.src=e.build(this,"source")),e instanceof qe&&t&&s[t.name]&&s[t.name].deps.indexOf(e)===-1&&(s[t.name].deps.push(e),(o=e.includes)==null?void 0:o.length)){let l=0;do this.include(e.includes[l++],t);while(l<e.includes.length)}return n&&(a.src=n),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return IIe[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(n!=null&&n.isNode)return n}}resolve(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(n!==void 0){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case qY:case P8e:return new LIe(n);case L8e:return new PIe(new uu(n));default:return new uu(n)}else{if(n.isVector2)return new Mo(n);if(n.isVector3)return new bo(n);if(n.isVector4)return new Jh(n)}}}}format(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return OIe[e]||e}getFormatByType(e){return RIe[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return Rk[e]}getIndexByElement(e){return Rk.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=O6,t===O6&&this.context.gamma&&(t=XY),t}},an=class extends co{constructor(e=0,t,n,r){super("c"),this.nodeType="Color",this.value=e instanceof so?e:new so(e||0,t,n,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,n,r,s,o){n=e.getUUID(n??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(n),l=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let c=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${c};`)}return l?this.generateReadonly(e,t,n,r,s,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,s,o,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,s,o,this.getLabel())),e.format(a.fragment.name,r,t))}generateReadonly(e,t,n,r,s,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},gi=class extends co{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,n,r,s,o){return e.format(this.value.toString(),r,t)}},eK=class extends ah{constructor(){super("basic"),this.nodeType="Basic",this.color=new an(5855577),this.shadingAlpha=new je(1),this.shadingBlend=new gi(0)}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(oy.merge([Ne.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new an(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let n=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let o=["#include <normal_fragment_begin>",n.code];r&&o.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),s?o.push(s.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):o.push(`vec3 finalColor = ${n.result};`),r?o.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} );`):o.push("gl_FragColor = vec4("+n.result+", 1.0 );"),o.push("#include <fog_fragment>","#include <dithering_fragment>"),t=o.join(`
`)}return t}},Uh=class extends co{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},Eo={normalRenderTarget:new uu,normalRenderTargetDepth:new uu,transmissionRenderTarget:new uu,transmissionSize:new Mo(2048,2048),transmissionRenderTargetDepth:new uu,pixelRatioNode:new je(1),resolution:new Mo,penumbraSize:new Uh(5,.5)};for(let i of Object.values(Eo))i.isRenderGlobal=!0;var FIe=class extends ah{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new an(5855577),this.emissive=new an(0),this.emissiveIntensity=new je(1),this.shadingAlpha=new je(1),this.shadingBlend=new gi(0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(oy.merge([Ne.fog,Ne.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Eo.penumbraSize}),this.color===void 0&&(this.color=new an(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),s=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&h.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+s.result+";"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},zIe=class extends ah{constructor(){super("phong"),this.nodeType="Phong",this.color=new an(5855577),this.specular=new an(1118481),this.shininess=new je(30),this.shadingAlpha=new je(1),this.shadingBlend=new gi(0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(oy.merge([Ne.fog,Ne.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Eo.penumbraSize}),this.color===void 0&&(this.color=new an(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];h.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},kIe=class extends ah{constructor(){super("standard"),this.nodeType="Standard",this.color=new an(5855577),this.roughness=new je(.3),this.metalness=new je(0),this.reflectivity=new je(.5),this.shadingAlpha=new je(1),this.shadingBlend=new gi(0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(oy.merge([Ne.fog,Ne.lights])),Ne.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Eo.penumbraSize});let n={gamma:!0};this.color===void 0&&(this.color=new an(5855577)),this.color.analyze(e,{slot:"color",context:n}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:n}),s=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let d=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float roughnessFactor = "+s.result+";",o.code,"	float metalnessFactor = "+o.result+";"),h&&d.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),d.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),d.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),u?d.push(u.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+u.result+" ) ), diffuseColor, metalnessFactor );"):d.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),d.push("#include <lights_fragment_begin>"),d.push("#include <lights_fragment_end>"),d.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${l.result} );
				}
				`),c&&d.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),h?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},BIe=class extends ah{constructor(){super("toon"),this.nodeType="Toon",this.color=new an(5855577),this.specular=new an(1118481),this.shininess=new je(30),this.shadingAlpha=new je(1),this.shadingBlend=new gi(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(oy.merge([Ne.fog,Ne.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Eo.penumbraSize}),this.color===void 0&&(this.color=new an(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];h.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},Ug=class extends co{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,n,r){return e.format(this.value?"true":"false",r,t)}},tK=class extends co{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new as}generateReadonly(e,t,n,r,s,o){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Vh=class extends co{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof tn?new Array(e).fill(t):new Array(e).fill(new tn(0))}},lP=(i=>(i.SIMPLEX="simplex3d",i.SIMPLEX_FRACTAL="simplex3dFractal",i.ASHIMA="simplexAshima",i.FBM="fbm",i.PERLIN="perlin",i))(lP||{}),Ro=function(){let i=new qe(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new qe(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[i]);e.keywords.F3=new ai("float F3 0.3333333"),e.keywords.G3=new ai("float G3 0.1666667");let t=new qe(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),n=new qe("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new qe("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new qe(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,r]),o=new qe("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new qe("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new qe(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new qe(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new ai(`int NUM_OCTAVES ${5}`);let h=new qe("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new qe(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,r,h]);return{simplex:e,simplexFractal:t,simplexAshima:s,fbm:c,perlin:u}}(),iK=class extends Ai{constructor(e,t,n,r,s,o,a,l,c,h,u,d){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=n,this.fA=r,this.fB=s,this.distortion=o,this.colorA=a,this.colorB=l,this.colorC=c,this.colorD=h,this.alpha=u,this.noiseType=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,n,r,s){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(lP)[this.noiseType.value],a=new qe(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${o}(st),
							  ${o}(st + vec3(1.0)),
							  ${o}(st + vec3(1.0)));
				vec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${o}(st * q));
				float f = ${o}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Ro.simplex,Ro.simplexFractal,Ro.simplexAshima,Ro.fbm,Ro.perlin]),l=e.include(a),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};iK.numOctaves=5;var nK=class extends Ai{constructor(e,t,n,r,s,o,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=n,this.intensity=r,this.factor=s,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(nK.Nodes.fresnel),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rK=nK;rK.Nodes=function(){return{fresnel:new qe(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var sK=class extends Ai{constructor(e,t,n,r,s,o,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=n,this.noiseStrength=r,this.noiseScale=s,this.offset=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(sK.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},oK=sK;oK.Nodes=function(){let i=new qe(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Ro.simplex]);return{rainbow:new qe(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[i])}}();var aK=class extends Ai{constructor(e,t,n,r,s,o,a,l,c,h,u,d,f,p,m,y){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=n,this.contourWidth=r,this.contourThreshold=s,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=l,this.contourDirection=c,this.positionalLines=h,this.compensation=u,this.resolution=d,this.normalMap=f,this.depthMap=p,this.pixelRatio=m,this.alpha=y,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let n=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(n,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let a=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexFinalCode(`
                vID = randomColor.r;
                if (${s}) {
                    vec4 ${a}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${a}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${a}_offset = normalize(${a}_clipNormal.xy) / ${r} * (${n} / 2.0) * ${a}_clipPosition.w * 2.0 * ${o};
                    ${a}_clipPosition.xy += ${a}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${a}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(aK.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},lK=aK;lK.Nodes=function(){let i=new qe(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new qe(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[i])}}();var cK=class extends Ai{constructor(e,t,n,r,s,o,a,l){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=n,this.transmissionSamplerSize=r,this.transmissionSamplerMap=s,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=l,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let n=e.include(cK.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},uK=cK;uK.Nodes=function(){let i=new qe(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new qe(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[i]),t=new qe(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),n=new qe(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),r=new qe(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[n,e]),s=new qe(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[r,t]);return{transmission:new qe(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var S2=class extends Ai{constructor(e,t,n,r,s,o,a,l,c,h,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=n,this.far=r,this.isVector=s,this.isWorldSpace=o,this.origin=a,this.direction=l,this.colors=c,this.steps=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`,r=new qe(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${n}_IS_VECTOR
                   #ifdef ${n}_LINEAR
                       #ifdef ${n}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${n}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${n}_SMOOTH
				for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[S2.Nodes.vectorLinearWorldSpaceDepth,S2.Nodes.vectorLinearObjectSpaceDepth,S2.Nodes.vectorSphericalObjectSpaceDepth,S2.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${n}_SMOOTH`),this.isVector.value>.5&&e.define(`${n}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${n}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let s=e.include(r),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(s+"("+o.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},hK=S2;hK.Nodes=function(){let i=new qe(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new qe(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new qe(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),n=new qe(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:i,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:t,vectorSphericalObjectSpaceDepth:n}}();var Nk=class extends Ai{constructor(i,e,t,n){super("v3"),this.nodeType="Blend",this.a=i,this.b=e,this.alpha=t,this.mode=n}generate(i,e){if(i.isShader("fragment")){let t=[];return t.push(this.a.build(i,"c")),t.push(this.b.build(i,"c")),t.push(this.alpha.build(i,"f")),t.push(this.mode.build(i,"i")),i.format("spe_blend("+t.join(",")+")",this.getType(i),e)}else return console.warn("BlendNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},IT=(i=>(i.NOISE="noise",i.MAP="map",i))(IT||{}),dK=class extends Ai{constructor(e,t,n,r,s){super("v3"),this.displacementTypeIndex=new gi(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(IT)[this.displacementTypeIndex.value]==="map"&&(this.mat=new tK(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=r,this.noiseFunctionIndex=s}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let n,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(IT)[this.displacementTypeIndex.value]){case"map":{n=e.include(dK.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let s=Object.values(lP)[this.noiseFunctionIndex.value],o=new qe(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=new qe(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${s}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Ro.simplex,Ro.simplexFractal,Ro.simplexAshima,Ro.fbm,Ro.perlin]),l=new qe(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,o]);n=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},fK=dK;fK.Nodes=function(){let i=new qe(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new qe(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new qe(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[i,e])}}();var pK=class extends Ai{constructor(e,t,n,r,s,o,a,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=n,this.steps=r,this.offset=s,this.morph=o,this.angle=a,this.alpha=l,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(pK.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},mK=pK;mK.Nodes=function(){return{gradient:new qe(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var M5=class extends Ai{constructor(e,t,n,r,s,o,a,l,c,h){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=n,this.projection=r,this.axis=s,this.side=o,this.size=a,this.mat=l,this.alpha=c,this.mode=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let n=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(M5.Nodes.cylindrical);break;case 2:r=e.include(M5.Nodes.spherical);break;case 1:let o=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=new qe(`
		vec3 ${n}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${n}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${o}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(a);break;default:r=e.include(M5.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`);let o=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${n}_vCustomUv = (1. + (transformed.${o})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let s=[];return s.push(this.texture.generate(e,"t")),s.push(this.textureSize.build(e,"v2")),s.push(this.crop.build(e,"f")),s.push(this.mat.build(e,"mat3")),s.push(this.size.build(e,"v2")),s.push(this.alpha.build(e,"f")),s.push(this.mode.build(e,"i")),s.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+s.join(",")+")",this.getType(e),t)}},gK=M5;gK.Nodes=function(){let i=new qe(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new qe(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new qe(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:i,spherical:e,uv:t}}();var vK=class extends Ai{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let n=e.include(vK.Nodes.customNormal),r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.alpha.build(e,"f")),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},yK=vK;yK.Nodes=function(){return{customNormal:new qe(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function to(i,e){return e.color(i)}function UIe(i,e){switch(i.type){case"fresnel":return jIe(i,e);case"gradient":return HIe(i);case"depth":return WIe(i);case"normal":return $Ie(i);case"noise":return qIe(i,e);case"rainbow":return XIe(i);case"toon":return YIe(i,e);case"outline":return ZIe(i,e);case"transmission":return QIe(i);case"color":return GIe(i,e)}}function VIe(i){return{type:i.type}}function el(i){let{alpha:e,mode:t}=i;return{...VIe(i),alpha:e,mode:t}}function GIe(i,e){return{...el(i),color:to(i.color,e)}}function jIe(i,e){let{bias:t,scale:n,intensity:r,factor:s,color:o}=i;return{...el(i),color:to(o,e),bias:t,scale:n,intensity:r,factor:s}}function HIe(i){let{gradientType:e,smooth:t,colors:n,steps:r,angle:s,offset:o,morph:a}=i;return{...el(i),gradientType:e,smooth:t,colors:n.map(l=>new tn(l[0],l[1],l[2],l[3])),num:n.length,steps:r,offset:new fe(...o),morph:new fe(...a),angle:s}}function WIe(i){let{gradientType:e,near:t,far:n,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=i;return{...el(i),gradientType:e,near:t,far:n,isVector:r,isWorldSpace:s,origin:new O(...o),direction:a?new O(...a):new O(1,0,0),colors:l.map(u=>u!==void 0?new tn(u[0],u[1],u[2],u[3]):new tn(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function $Ie(i){let{cnormal:e}=i;return{...el(i),cnormal:new O(e[0],e[1],e[2])}}function qIe(i,e){return{...el(i),scale:i.scale,move:i.move,fA:new fe(...i.fA),fB:new fe(...i.fB),size:new O(...i.size),distortion:new fe(...i.distortion),colorA:to(i.colorA,e),colorB:to(i.colorB,e),colorC:to(i.colorC,e),colorD:to(i.colorD,e),noiseType:i.noiseType}}function XIe(i){return{...el(i),filmThickness:i.filmThickness,movement:i.movement,wavelengths:new O(...i.wavelengths),noiseStrength:i.noiseStrength,noiseScale:i.noiseScale,offset:new O(...i.offset)}}function YIe(i,e){return{...el(i),positioning:i.positioning,colors:i.colors.map(t=>new tn(t[0],t[1],t[2],t[3])),num:i.colors.length,steps:i.steps,source:new O(...i.source),isWorldSpace:i.isWorldSpace,noiseStrength:i.noiseStrength,noiseScale:i.noiseScale,shadowColor:to(i.shadowColor,e),offset:new O(...i.offset)}}function ZIe(i,e){return{...el(i),outlineColor:to(i.outlineColor,e),contourColor:to(i.contourColor,e),outlineWidth:i.outlineWidth,contourWidth:i.contourWidth,outlineThreshold:i.outlineThreshold,contourThreshold:i.contourThreshold,outlineSmoothing:i.outlineSmoothing,contourFrequency:i.contourFrequency,contourDirection:new O(...i.contourDirection),positionalLines:i.positionalLines,compensation:i.compensation}}function QIe(i,e){return{...el(i),thickness:i.thickness,ior:i.ior,roughness:i.roughness}}var h8=class extends so{},KIe=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),n=this.cache.get(e);return n===void 0?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},JIe=class extends KIe{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},cw;function eOe(i){return typeof i=="string"?i:(cw||(cw=new JIe),cw.load(i))}var tOe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},iOe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},xK=class extends tOe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type=="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let r=[1e3,1001,1002];for(let s of r){let o=this[s];o&&(o.image=this.img,o.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var n=new FileReader;n.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(s=>{n.onloadend=o=>{var a;r=(a=o.target)==null?void 0:a.result,s(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=eOe(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let n;return this.isVideo?n=new nbe(this.img,void 0,e,e):n=new Ps(this.img,void 0,e,e),this.loaded&&(n.needsUpdate=!0),this[e]=n,n}}disposeTextures(){var e,t,n;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(n=this[1002])==null||n.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},hd=class extends xK{},cP=class extends co{},_K={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},bK={depth:["colors"]};function nOe(i,e,t){var s,o;let n=_K[i.type],r=bK[i.type];if(r!==void 0){let a=i.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==t.length)return!0}}return n!==void 0?n.includes(e):!1}function wK(i,e,t){let n=t.uniforms[`f${t.id}_texture`];if(!n)return!1;let r=!1,s=i;if("image"in s){let o=s.image,a=e.image(o),l=n;l.image instanceof hd||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=n;l.image instanceof hd||l.image.deref(),l.image=a}if("wrapping"in s){let o=n;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=t.uniforms[`f${t.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function rOe(i,e,t,n){let r=!1;for(let[s,o]of Object.entries(i)){if(!s||o===void 0)continue;if(CK(s,t,n)){s==="visible"&&t.type==="light"&&(r=!0);continue}t.visible=n.visible;let a=t.uniforms[`f${t.id}_${s}`];if(a&&!(a instanceof cP))switch(r=r||nOe(t,s,o),a.constructor){case an:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof h8?a.value=new so(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case Jh:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof h8?a.value=new so(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case Mo:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case bo:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case uu:{wK(o,e,t);break}case Vh:{a.value=o.map(l=>new tn(...l));break}default:{a.value=o;break}}}return r}var SK=class extends Ai{constructor(e,t,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(SK.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},AK=SK;AK.Nodes=function(){return{matcap:new qe(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var OT=class extends cP{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},sOe=class extends cP{constructor(e){super("v3"),this.image=e,this._value=new O}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},TK=class extends Ai{constructor(e,t,n,r,s,o,a,l,c,h){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=n,this.source=r,this.isWorldSpace=s,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=l,this.offset=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let n=e.include(TK.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},MK=TK;MK.Nodes=function(){let i=new qe(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new qe(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),t=new qe(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),n=new qe(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new qe(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[n]);return{toon:new qe(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Ro.simplex,i,t,r])}}();function Fk(i,e,t){i.setUvTransform(t[0],t[1],e[0],e[1],0,0,0)}var oOe=class extends tK{constructor(e,t){super(new as),this.repeat=e,this.offset=t,Fk(this.value,e,t)}updateMatrix(){Fk(this.value,this.repeat,this.offset)}},Dd=class{constructor(e,t,n,r){this.id=e,this.uuid=t,this.data=n,this.uniforms={};for(let s in r)this.uniforms[`f${this.id}_${s}`]=r[s];for(let s in n)CK(s,this,n)}get type(){return this.data.type}static create(e,t,n,r){if(n.type==="light")return Bp.createLigherLayer(e,t,n,r);if(n.type==="texture"||n.type==="video"){let s=n.type==="texture"?r.image(n.texture.image):r.video(n.texture.video),o=new OT(s,n.texture.wrapping),a=new sOe(s),l=new oOe(n.texture.repeat,n.texture.offset),c=new je(n.crop?1:0),h=new gi(n.projection??0),u=new gi(["x","y","z"].indexOf(n.axis)??0),d=new gi(n.side??0),f=new Mo(n.size?new fe(n.size[0],n.size[1]):new fe(100,100)),p=new je(n.alpha??1),m=new gi(n.mode??0),y=new gK(o,a,c,h,u,d,f,l,p,m),g=new Fi(y.calpha,"f");return new mr(e,t,n,{texture:o,textureSize:a,crop:c,projection:h,axis:u,side:d,size:f,mat:l,alpha:p,mode:m},y,m,g)}else if(n.type==="matcap"){let s=r.image(n.texture.image),o=new OT(s,n.texture.wrapping),a=new je(n.alpha??1),l=new gi(n.mode??0),c=new AK(o,a,l),h=new Fi(c.calpha,"f");return new mr(e,t,n,{texture:o,alpha:a,mode:l},c,l,h)}else if(n.type==="displace")if(n.displacementType==="noise"){let s=new bo(new O(...n.offset)),o=new je(n.scale??10),a=new je(n.intensity??8),l=new je(n.movement??1),c=new gi(n.noiseType??0),h=new fK(a,l,s,o,c);return new EK(e,t,n,{offset:s,scale:o,intensity:a,movement:l,noiseType:c},h)}else throw new Error;else return cOe(e,t,n,r)}updateByOp(e,t,n){var s;let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props?((s=n.scene)==null||s.markNeedsUpdateRendererDirty(),!0):rOe(r.props,n.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?wK(r.props,n.shared,this):!0;return!1}dispose(){if(aOe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof hd||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let n=`f${this.id}_${e}`;this.hasValueByKey(n)&&t!==void 0&&(this.uniforms[n].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let n=this.getName(t);n&&e.push(n)}return e}},mr=class extends Dd{constructor(e,t,n,r,s,o,a){super(e,t,n,r),this.params=r,this.color=s,this.mode=o,this.alpha=a}},EK=class extends Dd{constructor(e,t,n,r,s){super(e,t,n,r),this.position=s}},Bp=class extends Dd{constructor(e,t,n,r,s){super(e,t,n,s),this.node=r}static createLigherLayer(e,t,n,r){let s,o=new je(n.alpha),a=new gi(n.mode),l;if(!n.visible)s=new eK,l={};else if(n.category==="lambert"){s=new FIe;let c=new an(r.color(n.emissive)??0);l={emissive:c},s.emissive=c}else if(n.category==="toon"){s=new BIe;let c=new je(n.shininess??30),h=new an(r.color(n.specular)??1118481);l={shininess:c,specular:h},s.shininess=c,s.specular=h}else if(n.category==="physical"){s=new kIe;let c=new je(n.roughness??.3),h=new je(n.metalness??0),u=new je(n.reflectivity??.5);l={roughness:c,metalness:h,reflectivity:u},s.roughness=c,s.metalness=h,s.reflectivity=u}else{s=new zIe;let c=new je(n.shininess??30),h=new an(n.specular!==void 0?r.color(n.specular)??1118481:1118481);l={shininess:c,specular:h},s.shininess=c,s.specular=h}return s.alpha=new je(1),s.shadingAlpha=o,s.shadingBlend=a,l.alpha=s.shadingAlpha,l.mode=s.shadingBlend,new Bp(e,t,n,s,l)}get category(){return this.node.category}};function aOe(i){let e=i instanceof Dd?i.type:i;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function lOe(i,e,t,n){switch(i.type){case"color":{let r=new an(n.color??5855577),s=new je(n.alpha??1),o=new Fi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new gi(n.mode??0);return r.alpha=s,new mr(e,t,i,{color:r,alpha:s,mode:a},r,a,o)}case"fresnel":{let r=new an(n.color??16777215),s=new je(n.bias??.1),o=new je(n.scale??1),a=new je(n.intensity??2),l=new je(n.factor??1),c=new je(n.alpha??1),h=new gi(n.mode??0),u=new rK(r,s,o,a,l,c,h),d=new Fi(u.calpha,"f");return new mr(e,t,i,{color:r,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:h},u,h,d)}case"rainbow":{let r=new je(n.filmThickness??30),s=new je(n.movement??0),o=new bo(n.wavelengths??new O(0,0,0)),a=new je(n.noiseStrength??0),l=new je(n.noiseScale??1),c=new bo(n.offset??new O(0,0,0)),h=new je(n.alpha??1),u=new oK(r,s,o,a,l,c,h),d=new Fi(u.calpha,"f"),f=new gi(n.mode??0);return new mr(e,t,i,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:h,mode:f},u,f,d)}case"transmission":{let r=new je(n.thickness??10),s=new je(n.ior??1.5),o=new je(n.roughness??.5),a=Eo.transmissionSize,l=Eo.transmissionRenderTarget,c=Eo.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,d=h>=u?new Mo(u/h,1):new Mo(1,h/u),f=new je(n.alpha??1),p=new uK(r,s,o,a,l,c,d,f),m=new Fi(p.calpha,"f"),y=new gi(n.mode??0);return new mr(e,t,i,{thickness:r,ior:s,roughness:o,aspectRatio:d,alpha:f,mode:y},p,y,m)}case"toon":{let r=new gi(n.positioning??0),s;n.colors?s=new Vh(n.colors.length,n.colors):(s=new Vh(10,new tn(0,0,0,1)),s.value[1]=new tn(1,1,1,1));let o;n.steps?o=new Uh(n.steps.length,n.steps):(o=new Uh(10,1),o.value[0]=0);let a=new bo(n.source??new O(0,0,0)),l=new Ug(n.isWorldSpace??!0),c=new je(n.noiseStrength??0),h=new je(n.noiseScale??1),u=new Jh(n.shadowColor),d=new bo(n.offset??new O(0,0,0)),f=new je(n.alpha??1),p=new MK(r,s,o,a,l,c,h,u,d,f),m=new Fi(p.calpha,"f"),y=new gi(n.mode??0);return new mr(e,t,i,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:h,shadowColor:u,offset:d,alpha:f,mode:y},p,y,m)}case"outline":{let r=new an(n.outlineColor??16777215),s=new an(n.contourColor??16777215),o=new je(n.outlineWidth??.1),a=new je(n.contourWidth??.1),l=new je(n.outlineThreshold??.1),c=new je(n.contourThreshold??.1),h=new je(n.outlineSmoothing??.1),u=new je(n.contourFrequency??.1),d=new bo(n.contourDirection??new O(0,1,0)),f=new Ug(n.positionalLines??!1),p=new Ug(n.compensation??!0),m=Eo.normalRenderTarget,y=Eo.normalRenderTargetDepth,g=Eo.pixelRatioNode,v=Eo.resolution,x=new je(n.alpha??1),_=new lK(r,s,o,a,l,c,h,u,d,f,p,v,m,y,g,x),w=new Fi(_.calpha,"f"),b=new gi(n.mode??0);return new mr(e,t,i,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:h,contourFrequency:u,contourDirection:d,positionalLines:f,compensation:p,alpha:x,mode:b},_,b,w)}case"depth":{let r=new gi(n.gradientType??0),s=new Ug(n.smooth??!1),o=new je(n.near??50),a=new je(n.far??200),l=new je(n.isVector??1),c=new je(n.isWorldSpace??0),h=new bo(n.origin??new O),u=new bo(n.direction??new O),d;n.colors?d=new Vh(n.colors.length,n.colors):(d=new Vh(2,new tn(0,0,0,1)),d.value[1]=new tn(1,1,1,1));let f;n.steps?f=new Uh(n.steps.length,n.steps):(f=new Uh(2,1),f.value[0]=0);let p=new je(n.alpha??1),m=new gi(n.mode??0),y=new hK(r,s,o,a,l,c,h,u,d,f,p),g=new Fi(y.calpha,"f");return new mr(e,t,i,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:h,direction:u,colors:d,steps:f,alpha:p,mode:m},y,m,g)}case"noise":{let r=new je(n.scale??1),s=new bo(n.size??new O(100,100,100)),o=new je(n.move??1),a=new Mo(n.fA??new fe(1.7,9.2)),l=new Mo(n.fB??new fe(8.3,2.8)),c=new Mo(n.distortion??new fe(1,1)),h=new Jh(n.colorA),u=new Jh(n.colorB),d=new Jh(n.colorC),f=new Jh(n.colorD),p=new je(n.alpha??1),m=new gi(n.mode??0),y=new gi(n.noiseType??0),g=new iK(r,s,o,a,l,c,h,u,d,f,p,y),v=new Fi(g.calpha,"f");return new mr(e,t,i,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:h,colorB:u,colorC:d,colorD:f,alpha:p,mode:m,noiseType:y},g,m,v)}case"normal":{let r=new bo(n.cnormal??new O(1,1,1)),s=new je(n.alpha??1),o=new gi(n.mode??0),a=new yK(r,s),l=new Fi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new mr(e,t,i,{cnormal:r,alpha:s,mode:o},a,o,l)}case"gradient":{let r=new gi(n.gradientType??0),s=new Ug(n.smooth??!1),o;n.colors?o=new Vh(n.colors.length,n.colors):(o=new Vh(10,new tn(0,0,0,1)),o.value[1]=new tn(1,1,1,1));let a;n.steps?a=new Uh(n.steps.length,n.steps):(a=new Uh(10,1),a.value[0]=0);let l=new Mo(n.offset??new fe(0,0)),c=new Mo(n.morph??new fe(0,0)),h=new je(n.angle??0),u=new je(n.alpha??1),d=new gi(n.mode??0),f=new mK(r,s,o,a,l,c,h,u),p=new Fi(f.calpha,"f");return new mr(e,t,i,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:h,alpha:u,mode:d},f,d,p)}default:{let r=new an(1,0,0,1),s=new je(1),o=new Fi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new gi(0);return r.alpha=s,new mr(e,t,i,{color:r,alpha:s,mode:a},r,a,o)}}}function cOe(i,e,t,n){let r=UIe(t,n);return lOe(t,i,e,r)}function CK(i,e,t){if(t.type==="displace"&&(i==="intensity"||i==="visible")){let n=e.uniforms[`f${e.id}_intensity`];return n?(n.value=t.intensity*(t.visible?1:0),n):void 0}if(t.type!=="displace"&&(i==="alpha"||i==="visible")){let n=e.uniforms[`f${e.id}_alpha`];if(!n)return;if(n.value=t.alpha*(t.visible?1:0),t.type==="outline"&&i==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=t.compensation&&t.visible)}return n}}function RT(i,e){let t=0;for(let n of i.layers)if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"){let r=n.data.visible?n.data.alpha:0;if(r==1&&n.data.type=="depth"||n.data.type=="gradient"){for(let s of n.data.colors)if(s[3]<1){r=s[3];break}}else if(r==1&&n.data.type=="noise"){let s=e.color(n.data.colorA).a,o=e.color(n.data.colorB).a,a=e.color(n.data.colorC).a,l=e.color(n.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}t+=(1-t)*r}return t<1}var Qu=class extends mD{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},uOe=class extends Qu{constructor(e,t,n,r){super(),this.flatShading=e,this.side=t,this.wireframe=n,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(e,t,n){return this.root.getFlavor(e,t,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,n){this.root.updateByOp(e,t,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},DK=class extends Qu{constructor(e,t){super(),this.data=e,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,n){let r=n?6:(e?3:0)+t;if(r===0)return this;this.flavors===void 0&&(this.flavors=[]),r-=1;let s=this.flavors[r];return s===void 0&&(s=new uOe(e,t,n,this),this.flavors[r]=s,s.flatShading=e,s.side=t,s.updateAfterBuild()),s}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let n=e.layers??Ed.defaultTwoLayerData("phong").layers;this.layers=n.map(r=>Dd.create(this.layerIdGen++,r.id,r.data,t.shared)),this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(),this.transparent=RT(e,t.shared)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(e=>e instanceof Bp),this.lightLayer===void 0&&(this.lightLayer=new Bp(0,"",{..._a.defaultData("light","phong"),visible:!1},new eK,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,n){var r,s,o;if(this.data=t,this.transparent=RT(t,n.shared),e.path[0]==="layers"){this.data=t;let a=n.shared,l=e.path[1];if(l===void 0){if(this.layers.reverse(),e.type===4){let c=Dd.create(this.layerIdGen++,e.id,e.data,n.shared);this.layers.splice(e.localIndex,0,c),(r=n.scene)==null||r.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),(s=n.scene)==null||s.markNeedsUpdateRendererDirty();else if(e.type===6){let c=this.layers.findIndex(u=>u.uuid===e.id),h=this.layers[c];this.layers.splice(c,1),this.layers.splice(e.localIndex,0,h),(o=n.scene)==null||o.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let c=this.layers.find(h=>h.uuid===l);if(c){let h=t.layers.data(l);if(c.updateByOp({...e,path:e.path.slice(2)},h,n)){let u=Dd.create(this.layerIdGen++,l,h,a);this.layers.splice(this.layers.findIndex(d=>d.uuid===l),1,u),this.onUpdate()}}}}else this.reset(t,n)}blendColors(){let e=this.layers.findIndex(n=>n instanceof mr),t=this.layers.findIndex(n=>n instanceof Bp);if(e!==-1&&e<t){let n=this.layers[e].color;for(let r=e+1;r<t;++r){let s=this.layers[r];s instanceof mr&&(n=new Nk(n,s.color,s.alpha,s.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let e=new Fi("outgoingLight","f"),t=this.layers.findIndex(n=>n instanceof Bp);if(this.layers.length>t+1){for(let n=t+1;n<this.layers.length;++n){let r=this.layers[n];r instanceof mr&&(e=new Nk(e,r.color,r.alpha,r.mode))}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof EK);if(e.length>0){let t=e[0].position;for(let n=1;n<e.length;++n)e[n]&&(t=new A0(t,e[n].position,A0.ADD),t=new A0(t,new je(.5).setReadonly(!0),A0.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let n=(r,s,o)=>Math.min(Math.max(r,s),o);for(let r of this.layers)if(r.type==="displace"){let s=n(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=s}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let n=(_K[t.type]??[]).map(o=>t[o]),r=(bK[t.type]??[]).map(o=>{var a;return((a=t[o])==null?void 0:a.length)??0}),s=[...n,...r];s.length?e+=`["${t.type}", "${s.join('","')}"],`:e+=`"${t.type}",`}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new NIe;this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof mr){let t=e.params.texture;if(t instanceof OT&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Qu.prototype,{properties:{get:function(){return this.fragment.properties}}});var NT=class extends DK{},hOe=t7(S8e()),zk=new Map;function dOe(i){if(typeof i=="string")return i;let e=zk.get(i);return e||(e={url:URL.createObjectURL(new Blob([i]))},zk.set(i,e)),e.url}var A2=class{constructor({src:e,volume:t,delay:n,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let s;typeof e=="string"?s={src:e}:s={src:dOe(e),format:"wav"},this.sound=new hOe.Howl(s),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),n!==void 0&&(this.delay=n),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,n){this.sound.on(e,t,n)}off(e,t,n){this.sound.off(e,t,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},fOe=class{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new N6,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var n;return(n=this.currentPath)==null||n.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){var s;return(s=this.currentPath)==null||s.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function n(p,m,y,g){let v=p.x,x=m.x,_=y.x,w=g.x,b=p.y,S=m.y,A=y.y,E=g.y,T=(w-_)*(b-A)-(E-A)*(v-_),M=(x-v)*(b-A)-(S-b)*(v-_),C=(E-A)*(x-v)-(w-_)*(S-b),D=T/C,P=M/C;if(C===0&&T!==0||D<=0||D>=1||P<0||P>1)return null;if(T===0&&C===0){for(let I=0;I<2;I++)if(r(I===0?y:g,p,m),t.loc===e.ORIGIN){let k=I===0?y:g;return{x:k.x,y:k.y,t:t.t}}else if(t.loc===e.BETWEEN){let k=+(v+t.t*(x-v)).toPrecision(10),G=+(b+t.t*(S-b)).toPrecision(10);return{x:k,y:G,t:t.t}}return null}else{for(let G=0;G<2;G++)if(r(G===0?y:g,p,m),t.loc===e.ORIGIN){let U=G===0?y:g;return{x:U.x,y:U.y,t:t.t}}let I=+(v+D*(x-v)).toPrecision(10),k=+(b+D*(S-b)).toPrecision(10);return{x:I,y:k,t:D}}}function r(p,m,y){let g=y.x-m.x,v=y.y-m.y,x=p.x-m.x,_=p.y-m.y,w=g*_-x*v;if(p.x===m.x&&p.y===m.y){t.loc=e.ORIGIN,t.t=0;return}if(p.x===y.x&&p.y===y.y){t.loc=e.DESTINATION,t.t=1;return}if(w<-Number.EPSILON){t.loc=e.LEFT;return}if(w>Number.EPSILON){t.loc=e.RIGHT;return}if(g*x<0||v*_<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(x*x+_*_)){t.loc=e.BEYOND;return}let b;g!==0?b=x/g:b=_/v,t.loc=e.BETWEEN,t.t=b}function s(p,m){let y=[],g=[];for(let v=1;v<p.length;v++){let x=p[v-1],_=p[v];for(let w=1;w<m.length;w++){let b=m[w-1],S=m[w],A=n(x,_,b,S);A!==null&&y.find(E=>E.t<=A.t+Number.EPSILON&&E.t>=A.t-Number.EPSILON)===void 0&&(y.push(A),g.push(new fe(A.x,A.y)))}}return g}function o(p,m,y){let g=new fe;m.getCenter(g);let v=[];return y.forEach(x=>{x.boundingBox.containsPoint(g)&&s(p,x.points).forEach(_=>{v.push({identifier:x.identifier,isCW:x.isCW,point:_})})}),v.sort((x,_)=>x.point.x-_.point.x),v}function a(p,m,y,g,v){(v==null||v==="")&&(v="nonzero");let x=new fe;p.boundingBox.getCenter(x);let _=[new fe(y,x.y),new fe(g,x.y)],w=o(_,p.boundingBox,m);w.sort((M,C)=>M.point.x-C.point.x);let b=[],S=[];w.forEach(M=>{M.identifier===p.identifier?b.push(M):S.push(M)});let A=b[0].point.x,E=[],T=0;for(;T<S.length&&S[T].point.x<A;)E.length>0&&E[E.length-1]===S[T].identifier?E.pop():E.push(S[T].identifier),T++;if(E.push(p.identifier),v==="evenodd"){let M=E.length%2===0,C=E[E.length-2];return{identifier:p.identifier,isHole:M,for:C}}else if(v==="nonzero"){let M=!0,C=null,D=null;for(let P=0;P<E.length;P++){let I=E[P];m[I]&&(M?(D=m[I].isCW,M=!1,C=I):D!==m[I].isCW&&(D=m[I].isCW,M=!0))}return{identifier:p.identifier,isHole:M,for:C}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let l=0,c=999999999,h=-999999999,u=[];this.subPaths.forEach(p=>{let m=p.getPoints(),y=-999999999,g=999999999,v=-999999999,x=999999999;for(let _=0;_<m.length;_++){let w=m[_];w.y>y&&(y=w.y),w.y<g&&(g=w.y),w.x>v&&(v=w.x),w.x<x&&(x=w.x)}h<=v&&(h=v+1),c>=x&&(c=x-1),m.length&&u.push({curves:p.curves,points:m,isCW:uZ.isClockWise(m),identifier:l++,boundingBox:new $be(new fe(x,g),new fe(v,y))})});let d=u.map(p=>{var m;return a(p,u,c,h,(m=this.userData)==null?void 0:m.style.fillRule)}),f=[];return u.forEach(p=>{let m=d[p.identifier];if(m&&!m.isHole){let y=new F6;y.curves=p.curves,d.filter(g=>(g==null?void 0:g.isHole)&&g.for===p.identifier).forEach(g=>{if(g){let v=u[g.identifier],x=new N6;x.curves=v.curves,y.holes.push(x)}}),f.push(y)}}),f}},kk=new Promise(i=>{}),pOe=class{async load(e,t,n=()=>{}){let{load:r}=await kk;r(e,(s,o)=>{s||!o?n(s??"Something went wrong"):t(o)})}async parse(e){let{parse:t,Bidi:n}=await kk;try{let r=t(e),s=new n,o=a=>r.charToGlyphIndex(a.char);return s.registerModifier("glyphIndex",null,o),s.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:s}}catch(r){console.error(r)}}};async function mOe(i){return await(await fetch(i)).arrayBuffer()}var gOe=new pOe;async function Bk(i){let e,t,n=!1;if(i.url?(e=await mOe(i.url),t=i.url,n=i.url.startsWith("/")):i.data&&(e=i.data.buffer),e){let r=await gOe.parse(e);if(r)return{font:r.font,url:t,intercepted:n,arr:e,bidi:r.bidi}}}function vOe(i,e){return e.state.glyphIndex===i||e.state.fina===i||e.state.medi===i||e.state.init===i}var yOe=class{constructor(i){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=i.isUserFont??!1,this._loadingPromise=Bk(i).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(i){this._isLoaded=!1,this._isUserFont=i.isUserFont??!1,this._loadingPromise=Bk(i).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(i,e,t){if(!this._bidi)return[];let n=this._bidi;n.getTextGlyphs(e);let r=n.tokenizer.tokens,s=[],o=0,a=t.length===r.length;for(let l=0;l<t.length;l++){let c=t[l].index,h=String.fromCharCode(t[l].unicode),u=r[o];if(vOe(c,u)||a)s.push({char:h,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let d=u.char,f="",p=[u.state.glyphIndex],m=[],y=!1;for(;!y;)o++,f=e.charAt(o),d+=f,p.push(i.charToGlyphIndex(f)),m=i.stringToGlyphs(d),m.length===1&&m[0].index===c&&(y=!0),o>e.length&&(y=!0);s.push({char:h,index:c,replacements:p,replacementChars:Array.from(d)}),o++}}return s}generateShapes(i,e){if(!this._isLoaded)return;let t=this.font,n=e.fontSize/this.unitsPerEm,r=e.fontSize*e.lineHeight,s=i.map(g=>this.getTextWidth(g,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(i,0,e),h=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,i[0],a),u=this.getLineInitialOffsetY(r,i.length,e.height,n,e.verticalAlign),d=[],f=i.map(g=>[]),p=i.map(g=>[]),m;for(let g=0;g<i.length;g++){let v=i[g],x={features:{liga:!0}},_=[];try{_=t.stringToGlyphs(v,x)}catch(b){console.warn(b)}h=this.getLineInitialOffsetX(s[g],o,e.horizontalAlign,v,a);let w=[];try{w=this.reverseLigaturesTable(t,v,_)}catch(b){console.warn(b)}c=this.computeSpaceWidthForLine(i,g,e);for(let b=0;b<_.length;b++){let S=_[b],A=S.index===0?`
`:S.unicode?String.fromCharCode(S.unicode):void 0,E=w[b],T=0,M=0;b===0&&e.horizontalAlign===2&&S.leftSideBearing!==void 0&&(M=-S.leftSideBearing*n),m&&(T=t.getKerningValue(S,m)*n),h+=M+T;let C=0;if(A===`
`)C=l;else if(A===" ")C=c;else{let D=this.createPath(S,n,h,u,e);D&&(C=D.offsetX-(T+M),d.push(D.path))}if(E.replacements.length===1)p[g].push([h,u]),f[g].push(C);else{let D=E.replacements.map(G=>(t.glyphs.get(G).advanceWidth??0)*n),P=D.reduce((G,U)=>G+=U,0),I=D.map(G=>G/P),k=h;for(let G=0;G<I.length;G++){let U=C*I[G];p[g].push([k,u]),f[g].push(U),k+=U}}h+=C,m=S}u-=r}let y=[];for(let g=0,v=d.length;g<v;g++)y.push(...d[g].toShapes());return{shapes:y,charWidths:f,lineWidths:s,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var i;return((i=this.font)==null?void 0:i.ascender)??0}get descender(){var i;return((i=this.font)==null?void 0:i.descender)??0}get familyName(){var i;return((i=this.font)==null?void 0:i.names.fontFamily)??""}get subfamilyName(){var i;return((i=this.font)==null?void 0:i.names.fontSubfamily)??""}get unitsPerEm(){var i;return((i=this.font)==null?void 0:i.unitsPerEm)??1}getLineInitialOffsetX(i,e,t,n,r){return(t===3||t===2)&&n.indexOf(`
`)>=0&&(i-=r),t===3?e*.5-i*.5:t===2?e-i:0}getLineInitialOffsetY(i,e,t,n,r){let s=e*i,o=Math.abs(this.ascender-this.descender)*n,a=i-o,l=-this.ascender*n-a/2;return r===3?-(t-s-l):r===2?-(t*.5-s*.5-l):l}createPath(i,e,t,n,r){var l;let s=i.getPath(t,-n,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+this.familyName+".");return}let o=new fOe,a=(i.advanceWidth??1)*e;if(i)for(let c of s.commands){let h=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(h&&c.type!=="Z"&&h.x===c.x&&-h.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let h=xOe(c.curves);h!==void 0&&c.currentPoint.distanceTo(h)>0&&c.lineTo(h.x,h.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(i,e){var t;return((t=this.font)==null?void 0:t.getAdvanceWidth(i,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}getTextWidth(i,e){var t;return((t=this.font)==null?void 0:t.getAdvanceWidth(i,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}computeSpaceWidthForLine(i,e,t){let n=this.getCharWidth(" ",t),r=i[e];if(r){let s=this.countSpaces(r.trimEnd());if(t.horizontalAlign===4&&e<i.length-1&&s){let o=t.width,a=this.getTextWidth(r,t);return(o-(a-s*n))/s}}return n}countSpaces(i){return(i.match(/ /g)||[]).length}};function xOe(i){if(i.length){let e=i[0];if(e instanceof Ra)return e.v1;if(e instanceof Ma||e instanceof Zu)return e.v0}}var _Oe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t){let n=this.objects.get(e);return n===void 0?(n=this.createObject(e,t),this.objects.set(e,n)):n.isShared=!0,n}mutateIfUnique(e,t){let n=this.objects.get(e);if(n&&n.isShared!==!0)return this.objects.delete(e),this.objects.set(t,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let n=this.objects.get(e);t===n&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},Uk=class extends _Oe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t){let n=u8(e,t,this.flatShading);return n.computeBoundingSphere(),n}},bOe={find(i){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(i){},addPendingUpdateCloner(i){},addPendingCommand(i){}},wOe=class extends iOe{constructor(e){super(),this.shared=e}create(e){return new xK(e,this.shared)}},PK=class{constructor(e,t={}){if(this.geometryCache=new Uk(!0),this.geometryCache2=new Uk(!1),this.imageHolderCache=new wOe(this),this.thisContext={scene:bOe,shared:this},this.deletedMaterial=new NT(Ed.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new hd(yT.emptyImage,this),this.deletedVideo=new hd(K6.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,r]of Object.entries(t.images))this.addImage(n,r);if(t.videos)for(let[n,r]of Object.entries(t.videos))this.addVideo(n,r);if(t.audios)for(let[n,r]of Object.entries(t.audios))this.addAudio(n,r.data);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){for(let[t,n]of Object.entries(e.images))this.addImage(t,n);for(let[t,n]of Object.entries(e.videos))this.addVideo(t,n);for(let[t,n]of Object.entries(e.colors))this.addColor(t,n);for(let[t,n]of Object.entries(e.materials))this.addMaterial(t,new NT(n,this.thisContext));for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.data);for(let[t,n]of Object.entries(e.fonts))this.addFont(t,n);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new DK(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new hd(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new hd(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new h8(t.r,t.g,t.b,t.a):this.colors[e]=new h8(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[e];return this.colors[e].r=t.r??n.r,this.colors[e].g=t.g??n.g,this.colors[e].b=t.b??n.b,this.colors[e].a=t.a??n.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let n=this.getColor(e);n?t=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new so(0,0,0,0))}else return"a"in e?new so(e.r,e.g,e.b,e.a):new so(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof A2)return t;{let n=new A2({src:t});return this.audios[e]=n,n}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof A2&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new yOe(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof A2&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new PK(vT.emptyData());var v7=class extends oh{updateByPatchedOp(e,t,n){if(super.updateByPatchedOp(e,t,n),KDe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,s]of Object.entries(e.props)){let o=n.shared.material(s);this.material[Number(r)]=o}else if(Qc(e.path,["material"])&&this.material instanceof Qu)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(eo.drop(e,1),t.material,n);else if(Qc(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let s=t.materials[r];typeof s!="string"&&this.material[r].updateByOp(eo.drop(e,2),s,n)}}}updateState(e,t){var r,s,o,a,l;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let n=this.dataPatched;if(((r=e.geometry)==null?void 0:r.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe),(s=t.scene)==null||s.markNeedsUpdateRendererDirty()),((o=e.geometry)==null?void 0:o.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(c=>t.shared.material(c).getFlavor(n.flatShading,n.side,n.wireframe)),(a=t.scene)==null||a.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe)],(l=t.scene)==null||l.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let c=0;c<this.material.length;c++)this.material[c]=this.material[c].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&_Q(this.material).forEach(e=>{e instanceof Qu&&(e instanceof NT||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},sc=class extends v7{constructor(e,t,n){super(e,t),this.data=t,this.localGeometry=void 0}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof _t&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof PK){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return t8.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return t8.is2DParametricMesh(this.geometry.userData.type)}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),Qc(e.path,["geometry"])&&this.updateByPatchedOpGeometry(eo.drop(e,1),t.geometry,n)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var r;this.invalidateDownstreamBooleanData();let n=this.data.geometry.type;if(n==="NonParametricGeometry"||n==="SubdivGeometry"){let s=e;if(this.localGeometry===void 0){let h={...this.data.geometry,...s};this.localGeometry=u8(h,t,this.data.flatShading)}let o,a,l;s.scaleBaked?[o,a,l]=s.scaleBaked:{width:o,height:a,depth:l}=s;let c=this.localGeometry.userData;c.sxPrev!==void 0&&PT(this.localGeometry.attributes,o/c.sxPrev,a/c.syPrev,l/c.szPrev),c.sxPrev=o,c.syPrev=a,c.szPrev=l}else{let s={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=u8(s,t,this.data.flatShading)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,n){var s;let r=!1;e.type===0&&e.path.length===0&&UD(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof es&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),r||((s=n.scene)==null||s.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;this.is2DType?e.set(0,0,n.depth*.5):e.setScalar(0),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}};function SOe(i){var o,a;if(i.geometry.attributes.extrudeNormal||!i.geometry.attributes.position||!i.geometry.attributes.normal)return;let e=new Map,t=i.geometry.attributes,n=t.position.array,r=t.normal.array,s=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){let c=`${n[l]}_${n[l+1]}_${n[l+2]}`,h=new O(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(h):e.set(c,{normals:[h],result:new O})}e.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<n.length;l+=3){let c=`${n[l]}_${n[l+1]}_${n[l+2]}`,h=(a=e.get(c))==null?void 0:a.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}i.geometry.setAttribute("extrudeNormal",new We(s,3))}function AOe(i){if(i.geometry.attributes.extrudeNormals||!i.geometry.attributes.position)return;let e=i.geometry.attributes.position.array,t=new Float32Array(e.length),n=new O;for(let r=0;r<e.length;r+=3)n.set(e[r],e[r+1],e[r+2]).normalize(),t[r]=n.x,t[r+1]=n.y,t[r+2]=n.z;i.geometry.setAttribute("extrudeNormal",new We(t,3))}function uP(i){if(Array.isArray(i.material)){for(let e of i.material)if(e.getLayersOfType("outline").length===0)return}else if(!(i.material instanceof Qu)||i.material.getLayersOfType("outline").length===0)return;i instanceof sc&&i.is2DAndNoDepth?AOe(i):SOe(i)}function hP(i){if(!i.geometry.attributes.position)return;let e=i.geometry.attributes.position.array,t=new Float32Array(e.length),n=parseInt(i.uuid.replace(/\D/g,"")),r=[Ht.seededRandom(n),Ht.seededRandom(n+1e4),Ht.seededRandom(n+2e4)];for(let s=0;s<e.length;s++)t[s]=r[s%3];i.geometry.setAttribute("randomColor",new Ot(t,3))}sP.then(i=>{});var Za=new Wn,Vg=new O,d8=class extends sc{constructor(e,t,n){super(e,t,n),this.data=t,this.hiddenMatrixOld=new Fe,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var o,a,l;if(this.skipReactionUpdate===!0)return;let t=(o=this.localGeometry)==null?void 0:o.uuid,{originalGeometry:n,subdividedGeometry:r,subdivPointer:s}=es.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=s,n!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=n),r!==void 0&&((l=this.subdividedGeometry)==null||l.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,uP(this),hP(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let n=this.material;this.material=n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){es.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&es.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=es.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=es.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,oh.prototype.raycast.call(this,e,t),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Qo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,n=e.boundingSphere.center;Za.setFromBufferAttribute(t),Za.getCenter(n),e.boundingSphere.radius=n.distanceTo(Za.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Za.getSize(Vg),this.hasNonUniformScale&&Vg.divide(this.scale);let r={width:Vg.x,height:Vg.y,depth:Vg.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;Za.min.set(e[0],e[2],e[4]),Za.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Za.min.applyMatrix4(this.shearScaleInv),Za.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Qo);let n=t.boundingSphere.center;Za.getCenter(n),t.boundingSphere.radius=n.distanceTo(Za.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(es.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),this.localGeometry&&this.createGeometryByControls(t)}},Vk=-1,TOe=1,MOe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},EOe={polygon_center:0,edge:1,vertex:2},g4=(i,e)=>(t,n)=>!e||t===0||i===0?0:i*n/100,gt=(i,e)=>{let t=Math.abs(e),n=t*-1;return(i-Vk)*(t-n)/(TOe-Vk)+n};function COe(i){let e=[],t={};for(var n=0,r=i.length;n<r;n++){var s=JSON.stringify(i[n].pos.map(o=>Math.round(o*1e4)/1e4));t[s]||(e.push(i[n]),t[s]=!0)}return e}var DOe=new O,v4=new O,POe=new O,LOe=new O;function u1(i,e){let t=POe.fromArray(i),n=LOe.fromArray(e);v4.copy(n).sub(t);let r=v4.length();return v4.normalize().multiplyScalar(r*.5),DOe.copy(t).add(v4).toArray()}var Po=new _s,y4=new O,f8=new O,ed=new O;function IOe(i){let e=[];for(let t=0;t<=i.index.count;t++)if(y4.fromArray(i.index.array,t*3),Po.setFromAttributeAndIndices(i.attributes.position,y4.x,y4.y,y4.z),Po.getNormal(f8),Po.getMidpoint(ed),!(isNaN(ed.x)||isNaN(ed.y)||isNaN(ed.z))){let{a:n,b:r,c:s}=Po,o=n.toArray(),a=r.toArray(),l=s.toArray(),c=n.distanceTo(r),h=r.distanceTo(s),u=s.distanceTo(n),d=u1(o,a),f=u1(a,l),p=u1(l,o),m=[c,h,u],y=Math.max(...m),g=m.filter(_=>Math.round(_)===Math.round(y)).length>1,v=[],x=Po.getMidpoint(ed).toArray();y===c&&!g&&(v=[f,p,p],x=d),y===h&&!g&&(v=[d,p,p],x=f),y===u&&!g&&(v=[d,f,f],x=p),g&&(v=[d,f,p]),e.push({vertices:[o,a,l],faceCenters:v,midpoint:x,norm:Po.getNormal(f8).toArray()})}return e}function OOe(i){let e=[],{position:t}=i.attributes;for(let n=0;n<t.count;n++){Po.setFromAttributeAndIndices(t,n*3,n*3+1,n*3+2),Po.getNormal(f8),Po.getMidpoint(ed);let r=Po.a.toArray(),s=Po.b.toArray(),o=Po.c.toArray();e.push({vertices:[r,s,o],faceCenters:[u1(r,s),u1(s,o),u1(o,r)],midpoint:ed.toArray(),norm:f8.toArray()})}return e}var ROe=4,NOe=.5,uw=i=>.5*(1-Math.cos(i*Math.PI)),FOe=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,n=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);let r=Math.floor(e),s=Math.floor(t),o=Math.floor(n),a=e-r,l=t-s,c=n-o,h,u,d=0,f=.5,p,m,y;for(let g=0;g<ROe;g++){let v=r+(s<<4)+(o<<8);h=uw(a),u=uw(l),p=this.perlin[v&4095],p+=h*(this.perlin[v+1&4095]-p),m=this.perlin[v+16&4095],m+=h*(this.perlin[v+16+1&4095]-m),p+=u*(m-p),v+=256,m=this.perlin[v&4095],m+=h*(this.perlin[v+1&4095]-m),y=this.perlin[v+16&4095],y+=h*(this.perlin[v+16+1&4095]-y),m+=u*(y-m),p+=uw(c)*(m-p),d+=p*f,f*=NOe,r<<=1,a*=2,s<<=1,l*=2,o<<=1,c*=2,a>=1&&(r++,a--),l>=1&&(s++,l--),c>=1&&(o++,c--)}return d}noiseSeed(e){let t=(()=>{let n,r;return{setSeed(s){r=n=(s??Math.random()*4294967296)>>>0},getSeed(){return n},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let n=0;n<4095+1;n++)this.perlin[n]=t.rand()}},zOe=FOe,Gk=new O,jk=new Fe,Hk=new Em,LK=class extends sc{constructor(e,t,n){super(e,t,n),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:n}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(jk.copy(n).invert(),Hk.copy(e.ray).applyMatrix4(jk),Hk.intersectBox(this.singleBBox,Gk))){let r=Gk.applyMatrix4(n),s=e.ray.origin.distanceTo(r);t.push({distance:s,point:r.clone(),object:this})}}},Yr=1e-4,Qa,IK,OK,RK,Wk=new O,$k=new O;sP.then(i=>{Qa=i,IK=[Qa.get_face_center,Qa.get_edge_midpoint,Qa.get_vertex_position],OK=[Qa.get_face_normal,Qa.get_edge_normal,Qa.get_vertex_normal],RK=[Qa.face_count,Qa.edge_count,Qa.vertex_count]});var kOe=new Fe,BOe=new Fe,Nc=new O,Lh=new O,Gg=new O,hw=new O,UOe=new O,VOe=new O,_l=new zOe,GOe=class extends JD(Pi){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof _2&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof _2&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let r=0,s=this.children.length;r<s;++r)this.remove(this.children[0]);let n=this.children;if(n.length===t)return;if(n.length<t)for(let r=0,s=t-n.length;r<s;++r){let o=new _2(this.object);o.expand(),this.add(o)}else for(let r=0,s=n.length-t;r<s;++r)this.remove(n[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let n=0,r=t-this.children.length;n<r;++n){let s=new _2(this.object);s.expand(),this.add(s)}else for(let n=0,r=this.children.length-t;n<r;++n)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,n=t.start*Ht.DEG2RAD,r=t.end*Ht.DEG2RAD,s=n-r,o=new xs(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new O(0,0,1);break;case"y":a=new O(0,1,0);break;default:case"x":a=new O(1,0,0);break}let l=e.randomnessObject??au.defaultData([1,1,1]).randomnessObject,c=l.noiseType==="perlin";_l.noiseSeed(l.seed);let h=Yb((0,Rg.default)(l.seed)),u=g4(l.strength,this.parameters.randomness);for(let[d,f]of this.children.entries()){let p=d*(l.freqScale/10)+l.movement,m=c?_l.noise(p):h(p,p);f.scale.x=t.scale[0]+u(d,gt(m,l.scale[0]))||Yr,f.scale.y=t.scale[1]+u(d,gt(m,l.scale[1]))||Yr,f.scale.z=t.scale[2]+u(d,gt(m,l.scale[2]))||Yr,f.position.setScalar(0);let y=s/e.count*d-n;switch(t.axis){case"x":f.rotation.set(0,y,0);break;case"y":f.rotation.set(0,0,y);break;case"z":f.rotation.set(y,0,0);break}f.translateOnAxis(a,t.radius),f.position.x+=t.position[0]+u(d,gt(m,l.position[0])),f.position.y+=t.position[1]+u(d,gt(m,l.position[1])),f.position.z+=t.position[2]+u(d,gt(m,l.position[2]));let g=u(d,gt(m,l.rotation[0])),v=u(d,gt(m,l.rotation[1])),x=u(d,gt(m,l.rotation[2]));t.alignment===!0?(f.rotation.x+=o.x+g,f.rotation.y+=o.y+v,f.rotation.z+=o.z+x):f.rotation.set(o.x+g,o.y+v,o.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,n=new xs(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??au.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";_l.noiseSeed(r.seed);let o=Yb((0,Rg.default)(r.seed)),a=g4(r.strength,this.parameters.randomness);for(let[l,c]of this.children.entries()){let h=l*(r.freqScale/10)+r.movement,u=s?_l.noise(h):o(h,h),d=a(l,gt(u,r.rotation[0])),f=a(l,gt(u,r.rotation[1])),p=a(l,gt(u,r.rotation[2]));c.scale.x=1+(t.scale[0]-1)*l+a(l,gt(u,r.scale[0]))||Yr,c.scale.y=1+(t.scale[1]-1)*l+a(l,gt(u,r.scale[1]))||Yr,c.scale.z=1+(t.scale[2]-1)*l+a(l,gt(u,r.scale[2]))||Yr,c.rotation.x=n.x*l+d,c.rotation.y=n.y*l+f,c.rotation.z=n.z*l+p,c.position.x=t.position[0]*l+a(l,gt(u,r.position[0])),c.position.y=t.position[1]*l+a(l,gt(u,r.position[1])),c.position.z=t.position[2]*l+a(l,gt(u,r.position[2]))}}_updateGrid(e){let t=0,n=e.grid,r=e.randomnessObject??au.defaultData([1,1,1]).randomnessObject,s=g4(r.strength,this.parameters.randomness),o=r.noiseType==="perlin";_l.noiseSeed(r.seed);let a=qPe((0,Rg.default)(r.seed));if(n.useCenter===!0){let l={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},c=new O(n.size[0]*(n.count[0]-l.x)*.5,n.size[1]*(n.count[1]-l.y)*.5,n.size[2]*(n.count[2]-l.z)*.5);for(let h=0;h<n.count[0];h++)for(let u=0;u<n.count[1];u++)for(let d=0;d<n.count[2];d++){let f=[(h+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement],p=o?_l.noise(...f):a(...f),m=this.children[t++];m.scale.x=1+s(t,gt(p,r.scale[0]))||Yr,m.scale.y=1+s(t,gt(p,r.scale[1]))||Yr,m.scale.z=1+s(t,gt(p,r.scale[2]))||Yr;let y=s(t,gt(p,r.rotation[0])),g=s(t,gt(p,r.rotation[1])),v=s(t,gt(p,r.rotation[2]));m.rotation.set(y,g,v),m.position.x=n.size[0]*h-c.x+s(t,gt(p,r.position[0])),m.position.y=n.size[1]*u-c.y+s(t,gt(p,r.position[1])),m.position.z=n.size[2]*d-c.z+s(t,gt(p,r.position[2]))}}else for(let l=0;l<n.count[0];l++)for(let c=0;c<n.count[1];c++)for(let h=0;h<n.count[2];h++){let u=[(l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(h+1)*(r.freqScale/10)+r.movement],d=o?_l.noise(...u):a(...u),f=this.children[t++];f.scale.x=1+s(t,gt(d,r.scale[0]))||Yr,f.scale.y=1+s(t,gt(d,r.scale[1]))||Yr,f.scale.z=1+s(t,gt(d,r.scale[2]))||Yr;let p=s(t,gt(d,r.rotation[0])),m=s(t,gt(d,r.rotation[1])),y=s(t,gt(d,r.rotation[2]));f.rotation.set(p,m,y),f.position.x=n.size[0]*l+s(t,gt(d,r.position[0])),f.position.y=-n.size[1]*c+s(t,gt(d,r.position[1])),f.position.z=-n.size[2]*h+s(t,gt(d,r.position[2]))}}_updateToObject(e){var y;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,n=new xs(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??au.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";_l.noiseSeed(r.seed);let o=Yb((0,Rg.default)(r.seed)),a=g4(r.strength,this.parameters.randomness);if(!t.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof LK)if(!((y=this.objectForSample.font)!=null&&y.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.object.parent===this.objectForSample){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let l=this.getSubdivData(),c=[],h=g=>{let v=g.length,x=g.map(b=>b[0]).reduce((b,S)=>b+S,0),_=g.map(b=>b[1]).reduce((b,S)=>b+S,0),w=g.map(b=>b[2]).reduce((b,S)=>b+S,0);return[x/v,_/v,w/v]},u=g=>Math.round(g*1e6)/1e6;l.forEach(g=>{let v=l.filter(x=>u(g.pos[0])===u(x.pos[0])&&u(g.pos[1])===u(x.pos[1])&&u(g.pos[2])===u(x.pos[2]));v.length>1?c.push({pos:g.pos,norm:h(v.map(x=>x.norm))}):c.push(g)});let d=COe(c);if(l.length>0){let g=Math.round(d.length*t.count/100);this._updateCount(g)}this.objectForSample.updateMatrixWorld();let f=new XPe(this.objectForSample).build(),p=MOe[t.axis],m=this.children;f.setRandomGenerator((0,Rg.default)(this.object.uuid+t.seed));for(let[g,v]of m.entries()){let x=g*(r.freqScale/10)+r.movement,_=s?_l.noise(x):o(x,x),w=a(g,gt(_,r.rotation[0])),b=a(g,gt(_,r.rotation[1])),S=a(g,gt(_,r.rotation[2]));t.spreadType==="random"?f.sample(Gg,hw):(d.length&&(Gg.fromArray(d[g].pos),hw.fromArray(d[g].norm)),this.objectForSample instanceof d8&&Gg.applyMatrix4(kOe.copy(this.objectForSample.matrixWorld).invert())),Gg.applyMatrix4(this.object.hiddenMatrix.clone().invert()),v.position.copy(Gg),Nc.fromArray(p);let A=t.align==="normal"?hw:this.object.getWorldDirection(VOe),E=Lh.fromArray(t.position);Lh.x+=Lh.x+a(g,gt(_,r.position[0])),Lh.y+=Lh.y+a(g,gt(_,r.position[1])),Lh.z+=Lh.z+a(g,gt(_,r.position[2]));let T=Math.acos(A.dot(Nc)),M=UOe.crossVectors(Nc,A).normalize(),C=BOe.makeRotationAxis(M,T),D=A.clone().cross(this.object.up).normalize(),P=D.clone().cross(A).normalize(),I=new Fe().makeBasis(D,A,P),k=new O(Nc.y,Nc.z,Nc.x).normalize(),G=k.clone().cross(Nc).normalize(),U=new Fe().makeBasis(k,Nc,G).invert(),Z=new Fe().multiplyMatrices(I,U);v.rotation.setFromRotationMatrix(Z),E.applyMatrix4(C),v.position.add(E),v.rotation.x=v.rotation.x+n.x+w,v.rotation.y=v.rotation.y+n.y+b,v.rotation.z=v.rotation.z+n.z+S,v.scale.setScalar(1),v.scale.x=v.scale.x+t.scale[0]+a(g,gt(_,r.scale[0]))||Yr,v.scale.y=v.scale.y+t.scale[1]+a(g,gt(_,r.scale[1]))||Yr,v.scale.z=v.scale.z+t.scale[2]+a(g,gt(_,r.scale[2]))||Yr,v.scale.multiply(this.object.scale),v.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof d8){let t=this.objectForSample,n=EOe[e],r=RK[n],s=IK[n],o=OK[n],a=[],l=r(t.subdivPointerNew);for(let c=0;c<=l-1;c++){let h=s(t.subdivPointerNew,c),u=o(t.subdivPointerNew,c);Wk.fromArray(h).applyMatrix4(t.matrixWorld),$k.fromArray(u),a.push({pos:Wk.toArray(),norm:$k.toArray()})}return a}else return(this.objectForSample.geometry.index?IOe(this.objectForSample.geometry):OOe(this.objectForSample.geometry)).map((t,n)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var n;if(this.parameters=u7(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(n=this.object.parent)==null||n.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=t.find(this.parameters.toObject.object);r instanceof oh?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new Fe,this.hiddenMatrix=new Fe,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},hy=i=>{var e;return e=class extends i{},e.geometryHelper=new Wd(30,30,30),e},x4=new Em,dw=new Qo,qk=new Fe,dy=(i,e,t,n,r=!1)=>{let s=e,o=i.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),dw.copy(s.boundingSphere),dw.applyMatrix4(o),t.ray.intersectsSphere(dw)===!1||(qk.copy(o).invert(),x4.copy(t.ray).applyMatrix4(qk),s.boundingBox!==null&&x4.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,p,m;if(r===!1){let g=Math.max(0,f.start),v=Math.min(u.count,f.start+f.count);for(p=g,m=v;p<m;p+=3)if(l=u.getX(p),c=u.getX(p+1),h=u.getX(p+2),a=y(i,t,x4,d,l,c,h),a){a.faceIndex=Math.floor(p/3),n.push(a);return}}else{let g=s.attributes.position,v=new O,x=new O,_=new O,w=new O,b=2,S=1/((i.scale.x+i.scale.y+i.scale.z)/3),A=S*S,E=Math.max(0,f.start),T=Math.min(g.count,f.start+f.count);for(let M=E,C=T-1;M<C;M+=b){if(v.fromBufferAttribute(g,M),x.fromBufferAttribute(g,M+1),x4.distanceSqToSegment(v,x,w,_)>A)continue;w.applyMatrix4(i.matrixWorld);let D=t.ray.origin.distanceTo(w);D<t.near||D>t.far||n.push({distance:D,point:_.clone().applyMatrix4(i.matrixWorld),object:i})}}function y(g,v,x,_,w,b,S){let A=new O,E=new O,T=new O,M=new O,C=new O;if(A.fromBufferAttribute(_,w),E.fromBufferAttribute(_,b),T.fromBufferAttribute(_,S),x.intersectTriangle(A,E,T,!1,M)===null)return null;C.copy(M),C.applyMatrix4(g.matrixWorld);let D=v.ray.origin.distanceTo(C);return D<v.near||D>v.far?null:{faceIndex:1,distance:D,point:C.clone(),object:g}}},_4=new O,mo=new Cm,jOe=class extends ay{constructor(e){let t=new _t,n=new uf({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new St(15711266),l=new St(15711266),c=new St(2857471);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",l),h("p","n2",l),h("p","n3",l),h("p","n4",l),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c);function h(d,f,p){u(d,p),u(f,p)}function u(d,f){r.push(0,0,0),s.push(f.r,f.g,f.b),o[d]===void 0&&(o[d]=[]),o[d].push(r.length/3-1)}t.setAttribute("position",new We(r,3)),t.setAttribute("color",new We(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;mo.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=1,r=1,s=.8;ua("n1",t,e,mo,-n,-r,s),ua("n2",t,e,mo,n,-r,s),ua("n3",t,e,mo,-n,r,s),ua("n4",t,e,mo,n,r,s);let o=s;ua("f1",t,e,mo,-n,-r,o),ua("f2",t,e,mo,n,-r,o),ua("f3",t,e,mo,-n,r,o),ua("f4",t,e,mo,n,r,o);let a=o,l=.5;ua("u1",t,e,mo,n*.7*l,r*1.1,a),ua("u2",t,e,mo,-n*.7*l,r*1.1,a),ua("u3",t,e,mo,0,r*(1.1+.9*l),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ua(i,e,t,n,r,s,o){_4.set(r,s,o).unproject(n);let a=e[i];if(a!==void 0){let l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],_4.x,_4.y,_4.z)}}var HOe=class extends hy(jOe){constructor(i){super(i),this.object=i,this.object=i,this.name=`CombinedCameraHelper: ${i.uuid}`}updateMatrixWorld(i){super.updateMatrixWorld(i),this.updateTarget()}updateTarget(){let i=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(i)}raycast(i,e){dy(this.object,this.geometry,i,e,!0)}},FT;(i=>i.is=e=>"objectHelper"in e)(FT||(FT={}));var y7=(i,e)=>class extends EQ(i){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(t,n){this.objectHelper.raycast(t,n)}showGizmos(){for(let t in this.gizmos){let n=this.gizmos[t];n instanceof k6&&(n.visible=!0)}}updateEntityBoxSize(t,n){this.objectHelper.visible&&this.geometryHelper instanceof Wd?(t.setScalar(0),n.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(t,n)}hideGizmos(){for(let t in this.gizmos){let n=this.gizmos[t];n instanceof k6&&(n.visible=!1)}}},fw=790,lp=new O,pw=new O,Y1=class extends y7(Cm,HOe){constructor(e="",t={...i8.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=u3.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.super_Entity(e,t),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,r=this.height;if(t.orthographic.autoZoom){let s=t.orthographic.autoZoomFrustumSize??fw,o=n/r,a=n>r?o:1,l=n>r?1:o;this.orthoCamera=new R6(-s*.5*a,s*.5*a,s*.5*(1/l),-s*.5*(1/l),-5e4,1e4)}else this.orthoCamera=new R6(n*-.5,n*.5,r*.5,r*-.5,-5e4,1e4);this.perspCamera=new gD(45,n/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,n){typeof e=="number"&&(e=new O(e,t,n)),super.lookAt(e),this.getWorldPosition(lp),this.targetOffset=lp.distanceTo(e)}getTarget(e=new O){return this.getWorldDirection(pw),this.getWorldPosition(lp),pw.multiplyScalar(this.targetOffset),e.copy(lp).add(pw),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(lp),lp.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new Ni),t=new O(0,0,1).applyQuaternion(e),n=new O().copy(Pi.DEFAULT_UP);this.isUpVectorFlipped&&n.negate(),n.applyQuaternion(e);let r=new O().copy(Pi.DEFAULT_UP).projectOnPlane(t),s=new O().crossVectors(r,n).dot(t)>=0?1:-1;this.angleOffsetFromUp=r.angleTo(n)*s}updateTransformState(e){let t=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}getViewFrontToObject(e){let t=e.getWorldPosition(new O),n=e.getWorldDirection(new O).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}getViewToObject(e){let t=e.getWorldPosition(new O),n=this.getWorldDirection(new O).multiplyScalar(this.targetOffset);return{position:t.clone().sub(n),target:t}}setViewplaneSize(e,t){if(this.aspect=e/t,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let n=this.data.orthographic.autoZoomFrustumSize??fw,r=e>t?this.aspect:1,s=e>t?1:this.aspect;this.left=-n*.5*r,this.right=n*.5*r,this.top=n*.5*(1/s),this.bottom=-n*.5*(1/s)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,n,r,s,o){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,n,r,s,o):this.orthoCamera.setViewOffset(e,t,n,r,s,o)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:fw},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return QA(t,e)}updateCameraSubtype(e,t){let n=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(n,t.zoom),t.near!==void 0&&this.setNear(n,t.near),t.fov!==void 0&&n==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Xk=new Fe,Z1=class extends v7{constructor(e,t,n){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new _t,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var r;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let s=0;s<this.children.length;s++){let o=this.children[s];o instanceof Z1&&o.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof oh&&o.dataPatched.visible===!0&&((r=o.geometry.attributes.position)==null?void 0:r.count)>0&&o.geometry.drawRange.count>0){if(o.booleanMeshSetAddress===-1){if((o.geometry.index??o.geometry.getAttribute("position")).count/3<15e5&&(o.booleanMeshSetAddress=jc.getMeshSet(o.geometry,e===!0,t)),o.booleanMeshSetAddress===-1)return;jc.transformMeshSet(o.booleanMeshSetAddress,o.matrix),o.booleanMatrixInvOld.copy(o.matrix).invert(),o.booleanWasTransformed=!1}else o instanceof Z1&&o.needsTransformForDownstream===!0?(jc.transformMeshSet(o.booleanMeshSetAddress,o.matrix),o.needsTransformForDownstream=!1):o.booleanWasTransformed===!0&&(Xk.multiplyMatrices(o.matrix,o.booleanMatrixInvOld),jc.transformMeshSet(o.booleanMeshSetAddress,Xk),o.booleanMatrixInvOld.copy(o.matrix).invert(),o.booleanWasTransformed=!1);this.meshSetAddresses.push(o.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new pxe([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return jc.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new _t,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=jc.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(s){this.booleanMeshSetAddress=0,console.error(s)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,uP(this),hP(this)}dispose(){super.dispose(),this.geometry.dispose()}},zT;(i=>{function e(t){return Fn.is(t)&&t instanceof ly}i.is=e})(zT||(zT={}));var dP=(i,e)=>class extends y7(i,e){updateState_Light(t,n){this.updateState_Entity(t,n),t.color!==void 0&&(this.color=n.shared.color(t.color)),t.intensity!==void 0&&(this.intensity=t.intensity),t.depth!==void 0&&(this.shadow.camera.far=t.depth,this.shadow.needsUpdate=!0),t.shadows!==void 0&&(this.castShadow=t.shadows)}},Up=i=>i instanceof oh,dd=i=>i!==null&&i instanceof Z1,WOe=i=>i instanceof Y1,$Oe=i=>zT.is(i),qOe=i=>FT.is(i),fP=class extends hy(Zbe){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){dy(this.object,fP.geometryHelper,e,t)}update(){}},Yk=class extends y7(JY,fP){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},NK=class extends hy(Ybe){constructor(e,t=15,n=10066329){super(e,t,n),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){dy(this.object,NK.geometryHelper,e,t)}},FK=class extends hy(Xbe){constructor(e,t=15,n=6710886){super(e,t,n),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){dy(this.object,FK.geometryHelper,e,t)}},kT=class extends hy(qbe){constructor(i,e=6710886){super(i,e),this.object=i,this.name=`SpotLightHelper: ${i.uuid}`}raycast(i,e){dy(this.object,kT.geometryHelper,i,e)}update(){if(this.object!==void 0){let i=kT._vector,e=this.object.distance?this.object.distance:1e3,t=e*Math.tan(this.object.angle);this.cone.scale.set(t,t,e),i.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(i);let n=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(n);else this.cone.material.color.set(n)}}},zK=kT;zK._vector=new O;function XOe(i,e){i.shadow.camera.right=e/2,i.shadow.camera.left=-e/2,i.shadow.camera.top=e/2,i.shadow.camera.bottom=-e/2,i.shadow.needsUpdate=!0}var YOe=class extends dP(Gbe,NK){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let s=new z6(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof z6&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let n=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&XOe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update()}},ZOe=class extends dP(Ube,FK){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let s=new O(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),o=new O(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),a=new Wn(s,o),l=new k6(a,new St(16755200));l.visible=!1,this.gizmos.shadowmap=l,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof k6){let n=this.shadow.camera,r=new O(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),s=new O(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);t.box.set(r,s),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Zk=new O,Qk=new O,Kk=new Ni,QOe=class extends dP(kbe,zK){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=Ht.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let s=new z6(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof z6&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),Qk.setFromMatrixPosition(this.matrixWorld),Kk.setFromRotationMatrix(this.matrixWorld),Zk.copy(this.up).applyQuaternion(Kk).negate().multiplyScalar(this.distance),this.target.position.copy(Qk).add(Zk),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},KOe=class extends sc{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");n!==void 0?oP(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},pP=class extends sc{constructor(e,t,n){super(e,t,n),this._shapeId=null,this.snappedEntities=new Set,this._context=n}updateState(e,t){super.updateState(e,t),this.updateShape(),this.updateSnappedEntities(t)}updateShape(){var r;let e=this.data.geometry.extrusion.shape,t;if(e.type==="Custom"){let s=e.shapeId;if(s!==this._shapeId&&this.detachShape(),s){this._shapeId=s;let o=this._context.scene.find(s);o!=null&&o.data&&(o.attachedPaths.add(this),t=(r=o.geometry.userData)==null?void 0:r.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let s;switch(e.type){case"Rectangle":s=jQ;break;case"Ellipse":s=nP;break;case"Polygon":s=GQ;break;case"Star":s=HQ;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=s.create({parameters:e}).userData.shape}let n=this.geometry;t&&n.inputs&&(n.inputs.shapeData=t,n.build(),this.attachedSurfaceCloners.forEach(s=>s.update()))}updateSnappedEntities(e){this.snappedEntities.forEach(t=>{t.updatePathSnapping(e.scene)})}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e),this.updateSnappedEntities(e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");n!==void 0?oP(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},av=class extends y7(JY,fP){constructor(e,t,n){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,n)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let n=t.scene.data.objects.get(e.component);if(n){let r,s;for(let o of X1.rootOverrideProps)e[o]===void 0?(r===void 0&&(r={...e}),r[o]=n.data[o]):(s===void 0&&(s={}),s[o]=e[o]);return this.overrideData=s,r??e}return e}updateByOp(e,t,n,r){let s;if(this.isInstanceRoot&&!r&&(t=this.transformAssignData(t,n),e.type===0&&e.path.length===0&&this.component))for(let o of X1.rootOverrideProps)o in e.props&&e.props[o]===void 0&&(s===void 0&&(s={...e,props:{...e.props}}),s.props[o]=this.component.data[o]);super.updateByOp(s??e,t,n,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){this.component=e.scene.find(t.component)??null;let n=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let r=0;for(let s of this.children)if(Fn.is(s))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),mP(s),r+=1;else break;this.children.splice(0,r)}n=!0}this.component&&kK(e,[this.uuid],t.overrides,this,this.component,this.component,0,n),this.oldComponent=this.component}}};function mP(i){if(i.component){let e=i.component.instances.indexOf(i);e>=0&&i.component.instances.splice(e,1);for(let t of i.children)Fn.is(t)&&mP(t)}}function Jk(i,e,t,n){return i.component===e&&UD(i.identity,n)?i.overrideData===t?2:1:0}function kK(i,e,t,n,r,s,o,a){if(o>50)return!1;if(n.component!==r){if(n.component){let c=n.component.instances.indexOf(n);c>=0&&n.component.instances.splice(c,1)}r.instances.push(n),n.component=r}r instanceof av&&r.isInstanceRoot&&r.expandInstanceChildren(i);let l=0;for(let c of r.children)if(Fn.is(c)){let h=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=n8.resolve(t,h,1),d=null,f;if(!a){let p=n.children[l];if(d=Fn.is(p)?p:null,d!==null){let m=Jk(d,c,u,h);f=m>=1?d.stateSelection:void 0,m!==2&&(d=null)}if(d===null&&(d=i.scene.findInstance(h)??null,d!==null)){let m=Jk(d,c,u,h);if(f=m>=1?d.stateSelection:void 0,m!==2)d=null;else{let y=d.parent.children.indexOf(d);d.parent.children.splice(y,1),n.children.splice(l,0,d),d.parent===n?y<=l&&console.error("not possible"):(d.parent=n,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),i.pendingDeletes.delete(d))}}}if(d===null){let p=u?Td.apply(c.data,u):c.data;Xd.is(p.type)&&(p={...p,type:"Empty"}),d=lu.createEntity(h,p,i),d.overrideData=u,n.add(d),n.children.splice(n.children.length-1,1),n.children.splice(l,0,d),d.updateState(d.data,i),f&&d.changeSelectedState(f,i),i.scene.registerInstanceAndSetUuid(d)}l+=1,kK(i,e,t,d,c,s,o+1,a)}if(!a){let c=l;for(;;){let h=n.children[l];if(Fn.is(h))i.pendingDeletes.add(h);else break;l+=1}n.children.splice(c,l-c)}return!0}function JOe(i,e,t){let n;return e.geometry.type==="TextGeometry"?new LK(i,e,t):(e.geometry.type==="SubdivGeometry"?n=new d8(i,e,t):e.geometry.type==="PathGeometry"?n=new pP(i,e,t):e.geometry.type==="VectorGeometry"?n=new KOe(i,e,t):e.geometry.type==="BooleanGeometry"?n=new Z1(i,e,t):n=new sc(i,e,t),n)}function gP(i,e,t){return e.type==="Mesh"?JOe(i,e,t):e.type==="Empty"?new Yk(i,e):e.type==="PointLight"?new ZOe(i,e,t):e.type==="SpotLight"?new QOe(i,e,t):e.type==="DirectionalLight"?new YOe(i,e,t):e.type==="Component"||e.type==="Instance"?new av(i,e,t):Xd.is(e.type)?new Y1(i,e):(console.error(e),new Yk(i,e))}lu.createEntity=gP;function eRe(i,e,t){let n=gP(i.identity,e,t),r=i.children,s=i.attachedPaths,o=i.parent,a=i.component,l=i.instances,c=i.overrideData,h=i.uuid,u=i.stateSelection;i.dispose();for(let d of Object.keys(i))delete i[d];Object.setPrototypeOf(i,Object.getPrototypeOf(n));for(let d of Object.keys(n))i[d]=n[d];i.children=[...i.children,...r],i.attachedPaths=s,i.parent=o,i.component=a,i.instances=l,i.uuid=h,i.overrideData=c,i.updateState(i.data,t),u&&i.changeSelectedState(u,t),i.resetBBoxNeedsUpdate()}lu.changeEntityProptotype=eRe;lu.Cloner=GOe;function tRe(i,e,t,n){i.updateByOp(e,t,n,!1)}function eB(i,e){let t=!1,n=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(i.layers.set(8),n.length>0&&i.layers.enable(3),t=!0,hP(i),uP(i)),n.length===0&&r.length===0&&i.layers.set(0),t}function tB(i,e){if(!e.layers)return!1;let t=!1,n=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return n.length>0&&(i.layers.set(3),r.length>0&&i.layers.enable(8),t=!0),n.length===0&&r.length===0&&i.layers.set(0),t}function iRe(i){let e=!1;return i.traverseEntity(t=>{if(t instanceof v7)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)eB(t,t.material[n])&&(e=!0);else eB(t,t.material)&&(e=!0)}),e}function nRe(i){let e=!1;return i.traverseEntity(t=>{if(t instanceof v7)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)tB(t,t.material[n])&&(e=!0);else tB(t,t.material)&&(e=!0)}),e}var rRe=new Wbe,sRe=new Fe,oRe=new Em;function aRe(i,e,t){let n=i.cloner;if(n)for(let r of n.children){let s=sRe.copy(r.matrixWorld).invert(),o=oRe.copy(e.ray).applyMatrix4(s),a=i.matrixWorld;o.applyMatrix4(a);let l=rRe;l.set(o.origin,o.direction),l.near=e.near,l.far=e.far,l.intersectObject(i,!1).length>0&&t.push({object:i})}}var lRe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,cRe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`;new mD({vertexShader:lRe,fragmentShader:cRe,uniforms:{depthContrast:{value:1}}});var uRe=new i7;uRe.wireframe=!0;var iB=new O,BK=class extends tZ{constructor(e,t){super(),this.data=e,this.backupFog=new eZ(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new so(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.needsRecomputeInstances=!1,this.ambientLight=new Fbe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=nRe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=iRe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),n=this.entityIdentityToEntity[t];n&&(e.uuid=n.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let n=[],r=t;for(;r!==this;){let s=r;r=r.parent;let o=r.children.indexOf(s);n.splice(0,0,o)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let r=this.getWithSortKey(n.id);r!==void 0&&t.push(r)}return t.sort((n,r)=>yPe(n.sortKey,r.sortKey)),t.map(n=>n.entity)}nonExistOrDescendantOf(e,t){let n=this.find(e);if(n===void 0)return!0;for(;n;){if(n.uuid===t)return!0;n=n.parent}return!1}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateTreeByOp(e,t){var n;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let s=this.createObject(e.id,e.data,e.children,r,e.localIndex,t);s.updateVisible(),s.resetBBoxNeedsUpdate(),Up(s)&&dd(s.parent)&&(s.invalidateUpstreamBooleanData(),s.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(s),this.markToExpandCloner(s)}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let s=r.parent;this.markNeedsRecomputeInstancesForAncessors(s),this.markNeedsRecomputeInstancesForChildren(r),r.parent.remove(r),dd(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Up(r)&&(r.freeBooleanPointer(),s instanceof Z1&&s.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof pP&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r)}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let s=r.parent;this.markNeedsRecomputeInstancesForAncessors(s),(n=r.cloner)==null||n.resetOnMove(),this.markToExpandCloner(r);let o=e.parent===null?this:this.find(e.parent);if(o===void 0)throw new Error("unexpected");o.add(r),this.markNeedsRecomputeInstancesForAncessors(o),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(),r.resetBBoxNeedsUpdate();let a=e.localIndex;o.children.splice(a,0,o.children.pop()),Up(r)&&(r.invalidateUpstreamBooleanData(),dd(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():s instanceof Z1&&s.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(e,t,n,r){if(t.type===0&&(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),t.path.includes("overrides")&&"states"in t.props)){let{states:o,rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}let s=this.find(e);if(s)try{tRe(s,t,n,{scene:this,shared:r}),s instanceof sc&&s.updateGeometryGroupsIfNeeded()}catch(o){console.error(o)}}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(to(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let n=this.find(e.publish.playCamera);n instanceof Y1&&this.switchActiveCamera(n)}this.expandInstances(t,!0),this.traverseEntity(n=>{dd(n)&&n.recomputeBoolean()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Fn.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Fn.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,n,r,s,o,a){e&&e!==r.uuid&&r.find(e)&&s.forInstancesRec(l=>{l.isInstanceRoot||(l.data=$6(l.data,c=>{let h=c.events.data(a.id),u=l.goUp(o);if(u){let d=[..._Q(u.identity),e].join("-"),f=this.entityIdentityToEntity[d];if(f){let p=f.uuid;z0.zoom(h,t)[n]=p}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof av&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,n)=>{t.data.events.forEach(r=>{r.data.type==="GameControl"?t.forInstancesRec(s=>{s.isInstanceRoot||(s.data=$6(s.data,o=>{o.events.delete(r.id)}).data)}):r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,n,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,n,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,n,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,n,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,n,r)),r.data.inActions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["inActions",s.id],"object",e,t,n,r)}),r.data.outActions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["outActions",s.id],"object",e,t,n,r)})):"actions"in r.data&&r.data.actions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["actions",s.id],"object",e,t,n,r)})})}),!0})}expandInstances(e,t){let n=new Set;this.traverseEntity(r=>{if(r instanceof av&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:n}),t||r.resetBBoxNeedsUpdate(),!0});for(let r of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),mP(r)}recomputeInstances(e){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(t=>{t instanceof av&&t.isInstanceRoot&&(t.component=void 0)}),this.expandInstances(e,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let n=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[n]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[n]),t.dispose()})}clearScene(){for(let e of this.children)y0(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=new Y1(BK.PERSONAL_CAMERA_ID,{...i8.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],n=r=>{for(let s of r.children)y0(s)&&!s.raycastLock&&s.visible&&((Up(s)||qOe(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,t),aRe(s,e,t)),n(s))};return n(this),t}forEachEntity(e){for(let t of this.children)y0(t)&&e(t)}traverseEntity(e){for(let t of this.children)y0(t)&&t.traverseEntity(e)}traverseObject(e){for(let t of this.children)l8.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)y0(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=to(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=to(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.groundColor!==void 0&&(this.ambientLight.groundColor=to(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,t,n){let r=0;for(let s of e)this.createObject(s.id,s.data,s.children,t,r,n),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,n,r,s,o){let a={scene:this,shared:o},l=gP(e,t,a);return l&&(this.entityByUuid[e]=l,r.add(l),r.children.splice(s,0,r.children.pop()),n.length>0&&(l.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,l,o)),l.updateState(t,a),l instanceof sc&&l.updateGeometryGroupsIfNeeded(),l.updateVisible(),l.cloner&&this.toExpandCloner.add(l)),l}getCenter(e){let t=[];for(let r=0,s=e.length;r<s;++r){let{id:o,recursive:a}=e[r],l=this.find(o),c=a?l.recursiveBBox:l.singleBBox;t.push(...c.vertices)}let n=new Wn;return n.setFromPoints(t),n.getCenter(iB),iB}copyMatrixWorld(e,t){if(e===null){t.identity();return}let n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let n=(r=this.find(e))==null?void 0:r.parent;n?t.copy(n.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof oh)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)t.material[n]instanceof Qu&&e(t.material[n]);else t.material instanceof Qu&&e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let n,r;e>=t?(n=t/e,r=1):(n=1,r=e/t),this.traverseMaterial(s=>{s.getLayersOfType("transmission").forEach(o=>{o.uniforms[`f${o.id}_aspectRatio`].value.x=n,o.uniforms[`f${o.id}_aspectRatio`].value.y=r})})}},hRe=BK;hRe.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var E5=(i,e)=>{let t=e.x-i.x,n=e.y-i.y;return Math.sqrt(t*t+n*n)},dRe=(i,e)=>{let t=e.x-i.x,n=e.y-i.y;return pRe(Math.atan2(n,t))},fRe=(i,e,t)=>{let n={x:0,y:0};return t=BT(t),n.x=i.x-e*Math.cos(t),n.y=i.y-e*Math.sin(t),n},BT=i=>i*(Math.PI/180),pRe=i=>i*(180/Math.PI),mRe=i=>isNaN(i.buttons)?i.pressure!==0:i.buttons!==0,mw=new Map,nB=i=>{mw.has(i)&&clearTimeout(mw.get(i)),mw.set(i,setTimeout(i,100))},p8=(i,e,t)=>{let n=e.split(/[ ,]+/g),r;for(let s=0;s<n.length;s+=1)r=n[s],i.addEventListener?i.addEventListener(r,t,!1):i.attachEvent&&i.attachEvent(r,t)},rB=(i,e,t)=>{let n=e.split(/[ ,]+/g),r;for(let s=0;s<n.length;s+=1)r=n[s],i.removeEventListener?i.removeEventListener(r,t):i.detachEvent&&i.detachEvent(r,t)},UK=i=>(i.preventDefault(),i.type.match(/^touch/)?i.changedTouches:i),sB=()=>{if(typeof window>"u")return;let i=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:i,y:e}},UT=(i,e)=>{e.top||e.right||e.bottom||e.left?(i.style.top=e.top,i.style.right=e.right,i.style.bottom=e.bottom,i.style.left=e.left):(i.style.left=e.x+"px",i.style.top=e.y+"px")},vP=(i,e,t)=>{let n=VK(i);for(let r in n)if(n.hasOwnProperty(r))if(typeof e=="string")n[r]=e+" "+t;else{let s="";for(let o=0,a=e.length;o<a;o+=1)s+=e[o]+" "+t+", ";n[r]=s.slice(0,-2)}return n},gRe=(i,e)=>{let t=VK(i);for(let n in t)t.hasOwnProperty(n)&&(t[n]=e);return t},VK=i=>{let e={};return e[i]="",["webkit","Moz","o"].forEach(function(t){e[t+i.charAt(0).toUpperCase()+i.slice(1)]=""}),e},gw=(i,e)=>{for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},vRe=(i,e)=>{let t={};for(let n in i)i.hasOwnProperty(n)&&e.hasOwnProperty(n)?t[n]=e[n]:i.hasOwnProperty(n)&&(t[n]=i[n]);return t},VT=(i,e)=>{if(i.length)for(let t=0,n=i.length;t<n;t+=1)e(i[t]);else e(i)},yRe=(i,e,t)=>({x:Math.min(Math.max(i.x,e.x-t),e.x+t),y:Math.min(Math.max(i.y,e.y-t),e.y+t)});typeof window<"u"&&(GK="ontouchstart"in window,jK=!!window.PointerEvent,HK=!!window.MSPointerEvent);var GK,jK,HK,jg={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Vp,p3={};jK?Vp=jg.pointer:HK?Vp=jg.MSPointer:GK?(Vp=jg.touch,p3=jg.mouse):Vp=jg.mouse;function mf(){}mf.prototype.on=function(i,e){var t=this,n=i.split(/[ ,]+/g),r;t._handlers_=t._handlers_||{};for(var s=0;s<n.length;s+=1)r=n[s],t._handlers_[r]=t._handlers_[r]||[],t._handlers_[r].push(e);return t};mf.prototype.off=function(i,e){var t=this;return t._handlers_=t._handlers_||{},i===void 0?t._handlers_={}:e===void 0?t._handlers_[i]=null:t._handlers_[i]&&t._handlers_[i].indexOf(e)>=0&&t._handlers_[i].splice(t._handlers_[i].indexOf(e),1),t};mf.prototype.trigger=function(i,e){var t=this,n=i.split(/[ ,]+/g),r;t._handlers_=t._handlers_||{};for(var s=0;s<n.length;s+=1)r=n[s],t._handlers_[r]&&t._handlers_[r].length&&t._handlers_[r].forEach(function(o){o.call(t,{type:r,target:t},e)})};mf.prototype.config=function(i){var e=this;e.options=e.defaults||{},i&&(e.options=vRe(e.options,i))};mf.prototype.bindEvt=function(i,e){var t=this;return t._domHandlers_=t._domHandlers_||{},t._domHandlers_[e]=function(){typeof t["on"+e]=="function"?t["on"+e].apply(t,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},p8(i,Vp[e],t._domHandlers_[e]),p3[e]&&p8(i,p3[e],t._domHandlers_[e]),t};mf.prototype.unbindEvt=function(i,e){var t=this;return t._domHandlers_=t._domHandlers_||{},rB(i,Vp[e],t._domHandlers_[e]),p3[e]&&rB(i,p3[e],t._domHandlers_[e]),delete t._domHandlers_[e],this};var yP=mf;function Jn(i,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=i,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Jn.id,Jn.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Jn.prototype=new yP;Jn.constructor=Jn;Jn.id=0;Jn.prototype.buildEl=function(i){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Jn.prototype.stylize=function(){if(this.options.dataOnly)return this;var i=this.options.fadeTime+"ms",e=gRe("borderRadius","50%"),t=vP("transition","opacity",i),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},gw(n.el,t),this.options.shape==="circle"&&gw(n.back,e),gw(n.front,e),this.applyStyles(n),this};Jn.prototype.applyStyles=function(i){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var t in i[e])this.ui[e].style[t]=i[e][t];return this};Jn.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Jn.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Jn.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Jn.prototype.show=function(i){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof i=="function"&&i.call(this)},e.options.fadeTime)),e};Jn.prototype.hide=function(i){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var t=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=t,typeof i=="function"&&i.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){let t=e.options.restJoystick,n={};n.x=t===!0||t.x!==!1?0:e.instance.frontPosition.x,n.y=t===!0||t.y!==!1?0:e.instance.frontPosition.y,e.setPosition(i,n)}return e};Jn.prototype.setPosition=function(i,e){var t=this;t.frontPosition={x:e.x,y:e.y};var n=t.options.fadeTime+"ms",r={};r.front=vP("transition",["top","left"],n);var s={front:{}};s.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(r),t.applyStyles(s),t.restTimeout=setTimeout(function(){typeof i=="function"&&i.call(t),t.restCallback()},t.options.fadeTime)};Jn.prototype.restCallback=function(){var i=this,e={};e.front=vP("transition","none",""),i.applyStyles(e),i.trigger("rested",i.instance)};Jn.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Jn.prototype.computeDirection=function(i){var e=i.angle.radian,t=Math.PI/4,n=Math.PI/2,r,s,o;if(e>t&&e<t*3&&!i.lockX?r="up":e>-t&&e<=t&&!i.lockY?r="left":e>-t*3&&e<=-t&&!i.lockX?r="down":i.lockY||(r="right"),i.lockY||(e>-n&&e<n?s="left":s="right"),i.lockX||(e>0?o="up":o="down"),i.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:r},i.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return i;(!c.x||!c.y)&&this.trigger("plain",i),c.x||this.trigger("plain:"+s,i),c.y||this.trigger("plain:"+o,i),c.angle||this.trigger("dir dir:"+r,i)}else this.resetDirection();return i};var xRe=Jn;function In(i,e){var t=this;t.nipples=[],t.idles=[],t.actives=[],t.ids=[],t.pressureIntervals={},t.manager=i,t.id=In.id,In.id+=1,t.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},t.config(e),(t.options.mode==="static"||t.options.mode==="semi")&&(t.options.multitouch=!1),t.options.multitouch||(t.options.maxNumberOfNipples=1);let n=getComputedStyle(t.options.zone.parentElement);return n&&n.display==="flex"&&(t.parentIsFlex=!0),t.updateBox(),t.prepareNipples(),t.bindings(),t.begin(),t.nipples}In.prototype=new yP;In.constructor=In;In.id=0;In.prototype.prepareNipples=function(){var i=this,e=i.nipples;e.on=i.on.bind(i),e.off=i.off.bind(i),e.options=i.options,e.destroy=i.destroy.bind(i),e.ids=i.ids,e.id=i.id,e.processOnMove=i.processOnMove.bind(i),e.processOnEnd=i.processOnEnd.bind(i),e.get=function(t){if(t===void 0)return e[0];for(var n=0,r=e.length;n<r;n+=1)if(e[n].identifier===t)return e[n];return!1}};In.prototype.bindings=function(){var i=this;i.bindEvt(i.options.zone,"start"),i.options.zone.style.touchAction="none",i.options.zone.style.msTouchAction="none"};In.prototype.begin=function(){var i=this,e=i.options;if(e.mode==="static"){var t=i.createNipple(e.position,i.manager.getIdentifier());t.add(),i.idles.push(t)}};In.prototype.createNipple=function(i,e){var t=this,n=t.manager.scroll,r={},s=t.options,o={x:t.parentIsFlex?n.x:n.x+t.box.left,y:t.parentIsFlex?n.y:n.y+t.box.top};if(i.x&&i.y)r={x:i.x-o.x,y:i.y-o.y};else if(i.top||i.right||i.bottom||i.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=i.top,a.style.right=i.right,a.style.bottom=i.bottom,a.style.left=i.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),r=i,i={x:l.left+n.x,y:l.top+n.y}}var c=new xRe(t,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:i,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(UT(c.ui.el,r),UT(c.ui.front,c.frontPosition)),t.nipples.push(c),t.trigger("added "+c.identifier+":added",c),t.manager.trigger("added "+c.identifier+":added",c),t.bindNipple(c),c};In.prototype.updateBox=function(){var i=this;i.box=i.options.zone.getBoundingClientRect()};In.prototype.bindNipple=function(i){var e=this,t,n=function(r,s){t=r.type+" "+s.id+":"+r.type,e.trigger(t,s)};i.on("destroyed",e.onDestroyed.bind(e)),i.on("shown hidden rested dir plain",n),i.on("dir:up dir:right dir:down dir:left",n),i.on("plain:up plain:right plain:down plain:left",n)};In.prototype.pressureFn=function(i,e,t){var n=this,r=0;clearInterval(n.pressureIntervals[t]),n.pressureIntervals[t]=setInterval(function(){var s=i.force||i.pressure||i.webkitForce||0;s!==r&&(e.trigger("pressure",s),n.trigger("pressure "+e.identifier+":pressure",s),r=s)}.bind(n),100)};In.prototype.onstart=function(i){var e=this,t=e.options,n=i;i=UK(i),e.updateBox();var r=function(s){e.actives.length<t.maxNumberOfNipples?e.processOnStart(s):n.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(o){if(Object.values(n.touches).findIndex(function(l){return l.identifier===o})<0){var a=[i[0]];a.identifier=o,e.processOnEnd(a)}}),e.actives.length<t.maxNumberOfNipples&&e.processOnStart(s))};return VT(i,r),e.manager.bindDocument(),!1};In.prototype.processOnStart=function(i){var e=this,t=e.options,n,r=e.manager.getIdentifier(i),s=i.force||i.pressure||i.webkitForce||0,o={x:i.pageX,y:i.pageY},a=e.getOrCreate(r,o);a.identifier!==r&&e.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(h){h.trigger("start",h),e.trigger("start "+h.id+":start",h),h.show(),s>0&&e.pressureFn(i,h,h.identifier),e.processOnMove(i)};if((n=e.idles.indexOf(a))>=0&&e.idles.splice(n,1),e.actives.push(a),e.ids.push(a.identifier),t.mode!=="semi")l(a);else{var c=E5(o,a.position);if(c<=t.catchDistance)l(a);else{a.destroy(),e.processOnStart(i);return}}return a};In.prototype.getOrCreate=function(i,e){var t=this,n=t.options,r;return/(semi|static)/.test(n.mode)?(r=t.idles[0],r?(t.idles.splice(0,1),r):n.mode==="semi"?t.createNipple(e,i):(console.warn("Coudln't find the needed nipple."),!1)):(r=t.createNipple(e,i),r)};In.prototype.processOnMove=function(i){var e=this,t=e.options,n=e.manager.getIdentifier(i),r=e.nipples.get(n),s=e.manager.scroll;if(!mRe(i)){this.processOnEnd(i);return}if(!r){console.error("Found zombie joystick with ID "+n),e.manager.removeIdentifier(n);return}if(t.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:s.x+o.left,y:s.y+o.top}}r.identifier=n;var a=r.options.size/2,l={x:i.pageX,y:i.pageY};t.lockX&&(l.y=r.position.y),t.lockY&&(l.x=r.position.x);var c=E5(l,r.position),h=dRe(l,r.position),u=BT(h),d=c/a,f={distance:c,position:l},p,m;if(r.options.shape==="circle"?(p=Math.min(c,a),m=fRe(r.position,p,h)):(m=yRe(l,r.position,a),p=E5(m,r.position)),t.follow){if(c>a){let x=l.x-m.x,_=l.y-m.y;r.position.x+=x,r.position.y+=_,r.el.style.top=r.position.y-(e.box.top+s.y)+"px",r.el.style.left=r.position.x-(e.box.left+s.x)+"px",c=E5(l,r.position)}}else l=m,c=p;var y=l.x-r.position.x,g=l.y-r.position.y;r.frontPosition={x:y,y:g},t.dataOnly||UT(r.ui.front,r.frontPosition);var v={identifier:r.identifier,position:l,force:d,pressure:i.force||i.pressure||i.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:y/a,y:-g/a},raw:f,instance:r,lockX:t.lockX,lockY:t.lockY};v=r.computeDirection(v),v.angle={radian:BT(180-h),degree:180-h},r.trigger("move",v),e.trigger("move "+r.id+":move",v)};In.prototype.processOnEnd=function(i){var e=this,t=e.options,n=e.manager.getIdentifier(i),r=e.nipples.get(n),s=e.manager.removeIdentifier(r.identifier);!r||(t.dataOnly||r.hide(function(){t.mode==="dynamic"&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(t.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(t.mode)&&(e.manager.ids[s.id]=s.identifier))};In.prototype.onDestroyed=function(i,e){var t=this;t.nipples.indexOf(e)>=0&&t.nipples.splice(t.nipples.indexOf(e),1),t.actives.indexOf(e)>=0&&t.actives.splice(t.actives.indexOf(e),1),t.idles.indexOf(e)>=0&&t.idles.splice(t.idles.indexOf(e),1),t.ids.indexOf(e.identifier)>=0&&t.ids.splice(t.ids.indexOf(e.identifier),1),t.manager.removeIdentifier(e.identifier),t.manager.unbindDocument()};In.prototype.destroy=function(){var i=this;i.unbindEvt(i.options.zone,"start"),i.nipples.forEach(function(t){t.destroy()});for(var e in i.pressureIntervals)i.pressureIntervals.hasOwnProperty(e)&&clearInterval(i.pressureIntervals[e]);i.trigger("destroyed",i.nipples),i.manager.unbindDocument(),i.off()};var _Re=In;function fr(i){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=sB(),e.config(i),e.prepareCollections();var t=function(){var r;e.collections.forEach(function(s){s.forEach(function(o){r=o.el.getBoundingClientRect(),o.position={x:e.scroll.x+r.left,y:e.scroll.y+r.top}})})};if(typeof window>"u")return e.collections;p8(window,"resize",function(){nB(t)});var n=function(){e.scroll=sB()};return p8(window,"scroll",function(){nB(n)}),e.collections}fr.prototype=new yP;fr.constructor=fr;fr.prototype.prepareCollections=function(){var i=this;i.collections.create=i.create.bind(i),i.collections.on=i.on.bind(i),i.collections.off=i.off.bind(i),i.collections.destroy=i.destroy.bind(i),i.collections.get=function(e){var t;return i.collections.every(function(n){return t=n.get(e),!t}),t}};fr.prototype.create=function(i){return this.createCollection(i)};fr.prototype.createCollection=function(i){var e=this,t=new _Re(e,i);return e.bindCollection(t),e.collections.push(t),t};fr.prototype.bindCollection=function(i){var e=this,t,n=function(r,s){t=r.type+" "+s.id+":"+r.type,e.trigger(t,s)};i.on("destroyed",e.onDestroyed.bind(e)),i.on("shown hidden rested dir plain",n),i.on("dir:up dir:right dir:down dir:left",n),i.on("plain:up plain:right plain:down plain:left",n)};fr.prototype.bindDocument=function(){var i=this;i.binded||(i.bindEvt(document,"move").bindEvt(document,"end"),i.binded=!0)};fr.prototype.unbindDocument=function(i){var e=this;(!Object.keys(e.ids).length||i===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};fr.prototype.getIdentifier=function(i){var e;return i?(e=i.identifier===void 0?i.pointerId:i.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};fr.prototype.removeIdentifier=function(i){var e={};for(var t in this.ids)if(this.ids[t]===i){e.id=t,e.identifier=this.ids[t],delete this.ids[t];break}return e};fr.prototype.onmove=function(i){var e=this;return e.onAny("move",i),!1};fr.prototype.onend=function(i){var e=this;return e.onAny("end",i),!1};fr.prototype.oncancel=function(i){var e=this;return e.onAny("end",i),!1};fr.prototype.onAny=function(i,e){var t=this,n,r="processOn"+i.charAt(0).toUpperCase()+i.slice(1);e=UK(e);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)},o=function(a){n=t.getIdentifier(a),VT(t.collections,s.bind(null,a,n)),a._found_||t.removeIdentifier(n)};return VT(e,o),!1};fr.prototype.destroy=function(){var i=this;i.unbindDocument(!0),i.ids={},i.index=0,i.collections.forEach(function(e){e.destroy()}),i.off()};fr.prototype.onDestroyed=function(i,e){var t=this;if(t.collections.indexOf(e)<0)return!1;t.collections.splice(t.collections.indexOf(e),1)};var bRe=fr;new bRe;var wRe=t7(jY()),SRe=new Fe,ARe=new Fe,Ka=[[0,0,0],[0,0,0],[0,0,0]];function TRe(i){let e=i.elements;Ka[0][0]=e[0],Ka[0][1]=e[4],Ka[0][2]=e[8],Ka[1][0]=e[1],Ka[1][1]=e[5],Ka[1][2]=e[9],Ka[2][0]=e[2],Ka[2][1]=e[6],Ka[2][2]=e[10];let{u:t,v:n}=(0,wRe.SVD)(Ka),r=SRe.set(t[0][0],t[0][1],t[0][2],0,t[1][0],t[1][1],t[1][2],0,t[2][0],t[2][1],t[2][2],0,0,0,0,1),s=ARe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1);return r.multiply(s.transpose())}var WK=(i=>(i[i.keydown=0]="keydown",i[i.keyup=1]="keyup",i[i.pointerdown=2]="pointerdown",i[i.pointerup=3]="pointerup",i[i.pointermove=4]="pointermove",i[i.wheel=5]="wheel",i))(WK||{}),$K=new Map,lv=new Map,b4=class{constructor(e,t,n,r){this.data=t;let{audio:s,volume:o,delay:a,loop:l}=t;if(!s)throw new Error("Missing property");let c=typeof s=="string"?r.getAudio(s).src:s.data;this.audioPlayer=new A2({src:c,volume:o,delay:a,loop:l}),lv.has(n.uuid)?lv.get(n.uuid).push(this):lv.set(n.uuid,[this]),$K.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},MRe=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=$K.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=lv.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...lv.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},w4=class{constructor(e,t,n,r){if(this.data=t,t.interaction==="play")this.interaction=new b4(e,t,n,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new MRe(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof b4?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof b4?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof b4&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function ERe(i,e){let t=i.material.layers.find(n=>n.uuid===e);return t.color.texture.image.img instanceof HTMLVideoElement?t.color.texture.image.img:void 0}var qK=new Map,cv=new Map,vw=class{constructor(e,t,n){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:s,volume:o,delay:a}=t;if(this.object=n,r===void 0)throw new Error("Missing property");let l=ERe(n,r);if(l)this.videoElement=l,this.videoElement.loop=s===1/0,this.videoElement.autoplay=!0,o!==void 0&&(this.videoElement.volume=o);else throw new Error("Missing property");a!==void 0&&(this.delay=a),cv.has(n.uuid)?cv.get(n.uuid).push(this):cv.set(n.uuid,[this]),qK.set(e,this),this.pause()}mute(){this.videoElement.muted=!0}unMute(){this.videoElement.muted=!1}play(e){let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{this.videoElement.play(),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){this.videoElement.pause(),this.status="paused"}stop(){this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay()}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){this.stop(),this.videoElement.muted=!0}},CRe=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=qK.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=cv.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let e=[...cv.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},oB=class{constructor(e,t,n){if(this.data=t,t.interaction==="play")this.interaction=new vw(e,t,n);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new CRe(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof vw?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof vw?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},XK={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},xP={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},DRe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],m8={CSS:{},springs:{}};function T0(i,e,t){return Math.min(Math.max(i,e),t)}function uv(i,e){return i.indexOf(e)>-1}function yw(i,e){return i.apply(null,e)}var nt={arr:function(i){return Array.isArray(i)},obj:function(i){return uv(Object.prototype.toString.call(i),"Object")},pth:function(i){return nt.obj(i)&&i.hasOwnProperty("totalLength")},svg:function(i){return i instanceof SVGElement},inp:function(i){return i instanceof HTMLInputElement},dom:function(i){return!("isNode"in i)&&(i.nodeType||nt.svg(i))},str:function(i){return typeof i=="string"},fnc:function(i){return typeof i=="function"},und:function(i){return typeof i>"u"},hex:function(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)},rgb:function(i){return/^rgb/.test(i)},hsl:function(i){return/^hsl/.test(i)},col:function(i){return nt.hex(i)||nt.rgb(i)||nt.hsl(i)},key:function(i){return!XK.hasOwnProperty(i)&&!xP.hasOwnProperty(i)&&i!=="targets"&&i!=="keyframes"}};function YK(i){var e=/\(([^)]+)\)/.exec(i);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function ZK(i,e){var t=YK(i),n=T0(nt.und(t[0])?1:t[0],.1,100),r=T0(nt.und(t[1])?100:t[1],.1,100),s=T0(nt.und(t[2])?10:t[2],.1,100),o=T0(nt.und(t[3])?0:t[3],.1,100),a=Math.sqrt(r/n),l=s/(2*Math.sqrt(r*n)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,u=l<1?(l*a+-o)/c:-o+a;function d(p){var m=e?e*p/1e3:p;return l<1?m=Math.exp(-m*l*a)*(h*Math.cos(c*m)+u*Math.sin(c*m)):m=(h+u*m)*Math.exp(-m*a),p===0||p===1?p:1-m}function f(){var p=m8.springs[i];if(p)return p;for(var m=1/6,y=0,g=0;;)if(y+=m,d(y)===1){if(g++,g>=16)break}else g=0;var v=y*m*1e3;return m8.springs[i]=v,v}return e?d:f}function PRe(i){return i===void 0&&(i=10),function(e){return Math.ceil(T0(e,1e-6,1)*i)*(1/i)}}var LRe=function(){var i=11,e=1/(i-1);function t(h,u){return 1-3*u+3*h}function n(h,u){return 3*u-6*h}function r(h){return 3*h}function s(h,u,d){return((t(u,d)*h+n(u,d))*h+r(u))*h}function o(h,u,d){return 3*t(u,d)*h*h+2*n(u,d)*h+r(u)}function a(h,u,d,f,p){var m,y,g=0;do y=u+(d-u)/2,m=s(y,f,p)-h,m>0?d=y:u=y;while(Math.abs(m)>1e-7&&++g<10);return y}function l(h,u,d,f){for(var p=0;p<4;++p){var m=o(u,d,f);if(m===0)return u;var y=s(u,d,f)-h;u-=y/m}return u}function c(h,u,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var p=new Float32Array(i);if(h!==u||d!==f)for(var m=0;m<i;++m)p[m]=s(m*e,h,d);function y(g){for(var v=0,x=1,_=i-1;x!==_&&p[x]<=g;++x)v+=e;--x;var w=(g-p[x])/(p[x+1]-p[x]),b=v+w*e,S=o(b,h,d);return S>=.001?l(g,b,h,d):S===0?b:a(g,v,v+e,h,d)}return function(g){return h===u&&d===f||g===0||g===1?g:s(y(g),u,f)}}return c}(),QK=function(){var i={linear:function(){return function(n){return n}}},e={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var r,s=4;n<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-n,2)}},Elastic:function(n,r){n===void 0&&(n=1),r===void 0&&(r=.5);var s=T0(n,1,10),o=T0(r,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},t=["Quad","Cubic","Quart","Quint","Expo"];return t.forEach(function(n,r){e[n]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(e).forEach(function(n){var r=e[n];i["easeIn"+n]=r,i["easeOut"+n]=function(s,o){return function(a){return 1-r(s,o)(1-a)}},i["easeInOut"+n]=function(s,o){return function(a){return a<.5?r(s,o)(a*2)/2:1-r(s,o)(a*-2+2)/2}}}),i}();function _P(i,e){if(nt.fnc(i))return i;var t=i.split("(")[0],n=QK[t],r=YK(i);switch(t){case"spring":return ZK(i,e);case"cubicBezier":return yw(LRe,r);case"steps":return yw(PRe,r);default:return yw(n,r)}}function KK(i){try{var e=document.querySelectorAll(i);return e}catch{return}}function x7(i,e){for(var t=i.length,n=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<t;s++)if(s in i){var o=i[s];e.call(n,o,s,i)&&r.push(o)}return r}function _7(i){return i.reduce(function(e,t){return e.concat(nt.arr(t)?_7(t):t)},[])}function aB(i){return nt.arr(i)?i:(nt.str(i)&&(i=KK(i)||i),i instanceof NodeList||i instanceof HTMLCollection?[].slice.call(i):[i])}function bP(i,e){return i.some(function(t){return t===e})}function wP(i){var e={};for(var t in i)e[t]=i[t];return e}function GT(i,e){var t=wP(i);for(var n in i)t[n]=e.hasOwnProperty(n)?e[n]:i[n];return t}function b7(i,e){var t=wP(i);for(var n in e)t[n]=nt.und(i[n])?e[n]:i[n];return t}function IRe(i){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i);return e?"rgba("+e[1]+",1)":i}function ORe(i){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=i.replace(e,function(a,l,c,h){return l+l+c+c+h+h}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=parseInt(n[1],16),s=parseInt(n[2],16),o=parseInt(n[3],16);return"rgba("+r+","+s+","+o+",1)"}function RRe(i){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(i)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(i),t=parseInt(e[1],10)/360,n=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100,s=e[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var a,l,c;if(n==0)a=l=c=r;else{var h=r<.5?r*(1+n):r+n-r*n,u=2*r-h;a=o(u,h,t+1/3),l=o(u,h,t),c=o(u,h,t-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function NRe(i){if(nt.rgb(i))return IRe(i);if(nt.hex(i))return ORe(i);if(nt.hsl(i))return RRe(i)}function jl(i){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(i);if(e)return e[1]}function FRe(i){if(uv(i,"translate")||i==="perspective")return"px";if(uv(i,"rotate")||uv(i,"skew"))return"deg"}function jT(i,e){return nt.fnc(i)?i(e.target,e.id,e.total):i}function M0(i,e){return i.getAttribute(e)}function SP(i,e,t){var n=jl(e);if(bP([t,"deg","rad","turn"],n))return e;var r=m8.CSS[e+t];if(!nt.und(r))return r;var s=100,o=document.createElement(i.tagName),a=i.parentNode&&i.parentNode!==document?i.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+t;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(e);return m8.CSS[e+t]=c,c}function JK(i,e,t){if(e in i.style){var n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=i.style[e]||getComputedStyle(i).getPropertyValue(n)||"0";return t?SP(i,r,t):r}}function AP(i,e){if(nt.dom(i)&&!nt.inp(i)&&(M0(i,e)||nt.svg(i)&&i[e]))return"attribute";if(nt.dom(i)&&bP(DRe,e))return"transform";if(nt.dom(i)&&e!=="transform"&&JK(i,e))return"css";if(i[e]!=null)return"object"}function eJ(i){if(nt.dom(i)){for(var e=i.style.transform||"",t=/(\w+)\(([^)]*)\)/g,n=new Map,r;r=t.exec(e);)n.set(r[1],r[2]);return n}}function zRe(i,e,t,n){var r=uv(e,"scale")?1:0+FRe(e),s=eJ(i).get(e)||r;return t&&(t.transforms.list.set(e,s),t.transforms.last=e),n?SP(i,s,n):s}function TP(i,e,t,n){switch(AP(i,e)){case"transform":return zRe(i,e,n,t);case"css":return JK(i,e,t);case"attribute":return M0(i,e);default:return i[e]||0}}function MP(i,e){var t=/^(\*=|\+=|-=)/.exec(i);if(!t)return i;var n=jl(i)||0,r=parseFloat(e),s=parseFloat(i.replace(t[0],""));switch(t[0][0]){case"+":return r+s+n;case"-":return r-s+n;case"*":return r*s+n}}function tJ(i,e){if(nt.col(i))return NRe(i);if(/\s/g.test(i))return i;var t=jl(i),n=t?i.substr(0,i.length-t.length):i;return e?n+e:n}function EP(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function kRe(i){return Math.PI*2*M0(i,"r")}function BRe(i){return M0(i,"width")*2+M0(i,"height")*2}function URe(i){return EP({x:M0(i,"x1"),y:M0(i,"y1")},{x:M0(i,"x2"),y:M0(i,"y2")})}function iJ(i){for(var e=i.points,t=0,n,r=0;r<e.numberOfItems;r++){var s=e.getItem(r);r>0&&(t+=EP(n,s)),n=s}return t}function VRe(i){var e=i.points;return iJ(i)+EP(e.getItem(e.numberOfItems-1),e.getItem(0))}function nJ(i){if(i.getTotalLength)return i.getTotalLength();switch(i.tagName.toLowerCase()){case"circle":return kRe(i);case"rect":return BRe(i);case"line":return URe(i);case"polyline":return iJ(i);case"polygon":return VRe(i)}}function GRe(i){var e=nJ(i);return i.setAttribute("stroke-dasharray",e),e}function jRe(i){for(var e=i.parentNode;nt.svg(e)&&nt.svg(e.parentNode);)e=e.parentNode;return e}function rJ(i,e){var t=e||{},n=t.el||jRe(i),r=n.getBoundingClientRect(),s=M0(n,"viewBox"),o=r.width,a=r.height,l=t.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function HRe(i,e){var t=nt.str(i)?KK(i)[0]:i,n=e||100;return function(r){return{property:r,el:t,svg:rJ(t),totalLength:nJ(t)*(n/100)}}}function WRe(i,e){function t(a){a===void 0&&(a=0);var l=e+a>=1?e+a:0;return i.el.getPointAtLength(l)}var n=rJ(i.el,i.svg),r=t(),s=t(-1),o=t(1);switch(i.property){case"x":return(r.x-n.x)*n.w;case"y":return(r.y-n.y)*n.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function lB(i,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=tJ(nt.pth(i)?i.totalLength:i,e)+"";return{original:n,numbers:n.match(t)?n.match(t).map(Number):[0],strings:nt.str(i)||e?n.split(t):[]}}function sJ(i){var e=i?_7(nt.arr(i)?i.map(aB):aB(i)):[];return x7(e,function(t,n,r){return r.indexOf(t)===n})}function oJ(i){var e=sJ(i);return e.map(function(t,n){return{target:t,id:n,total:e.length,transforms:{list:eJ(t)}}})}function $Re(i,e){var t=wP(e);if(/^spring/.test(t.easing)&&(t.duration=ZK(t.easing)),nt.arr(i)){var n=i.length,r=n===2&&!nt.obj(i[0]);r?i={value:i}:nt.fnc(e.duration)||(t.duration=e.duration/n)}var s=nt.arr(i)?i:[i];return s.map(function(o,a){var l=nt.obj(o)&&!nt.pth(o)?o:{value:o};return nt.und(l.delay)&&(l.delay=a?0:e.delay),nt.und(l.endDelay)&&(l.endDelay=a===s.length-1?e.endDelay:0),l}).map(function(o){return b7(o,t)})}function qRe(i){for(var e=x7(_7(i.map(function(s){return Object.keys(s)})),function(s){return nt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),t={},n=function(s){var o=e[s];t[o]=i.map(function(a){var l={};for(var c in a)nt.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<e.length;r++)n(r);return t}function XRe(i,e){var t=[],n=e.keyframes;n&&(e=b7(qRe(n),e));for(var r in e)nt.key(r)&&t.push({name:r,tweens:$Re(e[r],i)});return t}function YRe(i,e){var t={};for(var n in i){var r=jT(i[n],e);nt.arr(r)&&(r=r.map(function(s){return jT(s,e)}),r.length===1&&(r=r[0])),t[n]=r}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function ZRe(i,e){var t;return i.tweens.map(function(n){var r=YRe(n,e),s=r.value,o=nt.arr(s)?s[1]:s,a=jl(o),l=TP(e.target,i.name,a,e),c=t?t.to.original:l,h=nt.arr(s)?s[0]:c,u=jl(h)||jl(l),d=a||u;return nt.und(o)&&(o=c),r.from=lB(h,d),r.to=lB(MP(o,h),d),r.start=t?t.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=_P(r.easing,r.duration),r.isPath=nt.pth(s),r.isColor=nt.col(r.from.original),r.isColor&&(r.round=1),t=r,r})}var aJ={css:function(i,e,t){return i.style[e]=t},attribute:function(i,e,t){return i.setAttribute(e,t)},object:function(i,e,t){return i[e]=t},transform:function(i,e,t,n,r){if(n.list.set(e,t),e===n.last||r){var s="";n.list.forEach(function(o,a){s+=a+"("+o+") "}),i.style.transform=s}}};function lJ(i,e){var t=oJ(i);t.forEach(function(n){for(var r in e){var s=jT(e[r],n),o=n.target,a=jl(s),l=TP(o,r,a,n),c=a||jl(l),h=MP(tJ(s,c),l),u=AP(o,r);aJ[u](o,r,h,n.transforms,!0)}})}function QRe(i,e){var t=AP(i.target,e.name);if(t){var n=ZRe(e,i),r=n[n.length-1];return{type:t,property:e.name,animatable:i,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}function KRe(i,e){return x7(_7(i.map(function(t){return e.map(function(n){return QRe(t,n)})})),function(t){return!nt.und(t)})}function cJ(i,e){var t=i.length,n=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=t?Math.max.apply(Math,i.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return n(s)+o+a+s.duration*(s.loop??1)})):e.duration,r.delay=t?Math.min.apply(Math,i.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return n(s)+o+a+s.delay})):e.delay,r.endDelay=t?r.duration-Math.max.apply(Math,i.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return n(s)+o+a+s.duration*(s.loop??1)-s.endDelay})):e.endDelay,r}var cB=0;function JRe(i){var e=GT(XK,i),t=GT(xP,i),n=XRe(t,i),r=oJ(i.targets),s=KRe(r,n),o=cJ(s,t),a=cB;return cB++,b7(e,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:t.startOnceDelay,pingPongDelayCorrection:t.pingPongDelayCorrection})}var qo=[],uB=[],C5,eNe=function(){function i(){C5=requestAnimationFrame(e)}function e(t){var n=qo.length;if(n){for(var r=0;r<n;){var s=qo[r];s.paused?(qo.splice(r,1),n-=1):(s.tick(t),r++)}i()}else C5=cancelAnimationFrame(C5)}return i}();function tNe(i){document.hidden?(qo.forEach(function(e){return e.pause(i.timeStamp)}),uB=qo.slice(0),Ln.running=qo=[]):uB.forEach(function(e){return e.play(i.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",tNe);function Ln(i){i===void 0&&(i={});var e=0,t=0,n=0,r,s,o=0,a=null;function l(x){var _=window.Promise&&new Promise(function(w){return a=w});return x.finished=_,_}var c=JRe(i);l(c);function h(){var x=c.direction;x!=="alternate"&&(c.direction=x!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(_){return _.reversed=c.reversed})}function u(x){return c.reversed?c.duration-x:x}function d(){e=0,t=u(c.currentTime)*(1/Ln.speed)}function f(x,_){_&&(c.reversed?_.seek(_.duration*_.loop-(x-_.timelineOffset-_.pingPongDelayCorrection)):_.seek(x-_.timelineOffset-_.startOnceDelay-_.pingPongDelayCorrection))}function p(x){if(c.reversed)for(var _=o;_--;)f(x,s[_]);else for(var w=0;w<o;w++)f(x,s[w])}function m(x){var _=0,w=c.animations,b=w.length;for(c.reversePlayback===!0&&c.rewind===!1&&(x=c.duration+c.delay-c.endDelay-x);_<b;){var S=w[_],A=S.animatable,E=S.tweens,T=E.length-1,M=E[T];T&&(M=x7(E,function(q){return x<q.end})[0]||M);for(var C=T0(x-M.start-M.delay,0,M.duration)/M.duration,D=isNaN(C)?1:M.easing(C),P=M.to.strings,I=M.round,k=[],G=M.to.numbers.length,U=void 0,Z=0;Z<G;Z++){var $=void 0;if(c.reversePlayback===!0&&c.rewind===!1)var X=M.to.numbers[Z],W=M.from.numbers[Z]||0;else var W=M.to.numbers[Z],X=M.from.numbers[Z]||0;M.isPath?$=WRe(M.value,D*W):$=X+D*(W-X),I&&(M.isColor&&Z>2||($=Math.round($*I)/I)),k.push($)}var j=P.length;if(!j)U=k[0];else{U=P[0];for(var H=0;H<j;H++){P[H];var V=P[H+1],B=k[H];isNaN(B)||(V?U+=B+V:U+=B+" ")}}aJ[S.type](A.target,S.property,U,A.transforms),S.currentValue=U,_++}}function y(x){c[x]&&!c.passThrough&&c[x](c)}function g(){c.remaining&&c.remaining!==!0&&c.remaining--}function v(x){var _=c.duration,w=c.delay,b=_-c.endDelay,S=u(x);if(c.progress=T0(S/_*100,0,100),c.reversePlayback=S<c.currentTime,o&&p(S),!c.began&&c.currentTime>=0&&(c.began=!0,y("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,y("loopBegin")),(c.reversed||S>=0)&&S<=w&&c.currentTime!==0&&(m(0),y("change")),(S>=b&&c.currentTime!==_||!_)&&(m(_),y("change")),S>w&&S<b?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,y("changeBegin")),m(S),y("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,y("change"),o&&y("timelineChangeComplete")):c.began&&S>b&&y("changeComplete"),c.currentTime=T0(S,0,_),c.began&&y("update"),x>=_)if(g(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,y("loopComplete"),y("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)));else{o?e+=c.duration/Ln.speed:e+=c.duration;for(let A of s)A.setStartTime(0),A.remaining=A.loop;y("loopComplete"),c.loopBegan=!1,c.direction==="alternate"&&h()}}return c.reset=function(){var x=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=x==="reverse",c.remaining=c.loop,s=c.children,o=s.length;for(var _=o;_--;)c.children[_].reset();(c.reversed&&c.loop!==!0||x==="alternate"&&c.loop===1)&&c.remaining++,m(c.reversed?c.duration:0)},c.setStartTime=function(x){e=x},c.set=function(x,_){return lJ(x,_),c},c.tick=function(x){n=x,e||(e=n),v((n+(t-e))*Ln.speed)},c.seek=function(x){v(x-e)},c.pause=function(x){c.paused=!0,o&&(r=x??performance.now())},c.play=function(x){!c.paused||(c.completed&&c.reset(),c.paused=!1,qo.push(c),o&&r!==void 0&&(e+=(x??performance.now())-r),C5||eNe())},c.reverse=function(){h(),c.completed=!c.reversed,d()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function hB(i,e){for(var t=e.length;t--;)bP(i,e[t].animatable.target)&&e.splice(t,1)}function iNe(i){for(var e=sJ(i),t=qo.length;t--;){var n=qo[t],r=n.animations,s=n.children;hB(e,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;hB(e,l),!l.length&&!a.children.length&&s.splice(o,1)}!r.length&&!s.length&&n.pause()}}function nNe(i,e){e===void 0&&(e={});var t=e.direction||"normal",n=e.easing?_P(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,a=o==="first",l=o==="center",c=o==="last",h=nt.arr(i),u=parseFloat(h?i[0]:i),d=h?parseFloat(i[1]):0,f=jl(h?i[1]:i)||0,p=e.start||0+(h?u:0),m=[],y=0;return function(g,v,x){if(a&&(o=0),l&&(o=(x-1)/2),c&&(o=x-1),!m.length){for(var _=0;_<x;_++){if(!r)m.push(Math.abs(o-_));else{var w=l?(r[0]-1)/2:o%r[0],b=l?(r[1]-1)/2:Math.floor(o/r[0]),S=_%r[0],A=Math.floor(_/r[0]),E=w-S,T=b-A,M=Math.sqrt(E*E+T*T);s==="x"&&(M=-E),s==="y"&&(M=-T),m.push(M)}y=Math.max.apply(Math,m)}n&&(m=m.map(function(D){return n(D/y)*y})),t==="reverse"&&(m=m.map(function(D){return s?D<0?D*-1:-D:Math.abs(y-D)}))}var C=h?(d-u)/y:u;return p+C*(Math.round(m[v]*100)/100)+f}}function rNe(i){i===void 0&&(i={});var e=Ln(i);return e.duration=0,e.add=function(t,n){var r=qo.indexOf(e),s=e.children;r>-1&&qo.splice(r,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=b7(t,GT(xP,i));l.targets=l.targets||i.targets;var c=e.duration;l.autoplay=!1,l.timelineOffset=nt.und(n)?c:MP(n,c),o(e);var h=Ln(l);o(h),s.push(h);var u=cJ(s,i);return e.delay=u.delay,e.endDelay=u.endDelay,e.duration=u.duration,h.loop===!0&&(e.duration=1/0),e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}Ln.version="3.2.0";Ln.speed=1;Ln.running=qo;Ln.remove=iNe;Ln.get=TP;Ln.set=lJ;Ln.convertPx=SP;Ln.path=HRe;Ln.setDashoffset=GRe;Ln.stagger=nNe;Ln.timeline=rNe;Ln.easing=_P;Ln.penner=QK;Ln.random=function(i,e){return Math.floor(Math.random()*(e-i+1))+i};var sNe=Ln,dB=new O,fB=new O,pB=new Ni;function oNe(i,e,t,n){if(n===0)return t.copy(i);if(n===1)return t.copy(e);let r=i.w*e.w+i.x*e.x+i.y*e.y+i.z*e.z;if(r>=1)return t.copy(i);let s=1-r*r;if(s<=Number.EPSILON){let h=1-n;return t.w=h*i.w+n*e.w,t.x=h*i.x+n*e.x,t.y=h*i.y+n*e.y,t.z=h*i.z+n*e.z,t.normalize(),t}let o=Math.sqrt(s),a=Math.atan2(o,r),l=Math.sin((1-n)*a)/o,c=Math.sin(n*a)/o;return t.w=i.w*l+e.w*c,t.x=i.x*l+e.x*c,t.y=i.y*l+e.y*c,t.z=i.z*l+e.z*c,t}function zm(i,e,t,n,r){let s=t[i]?t[i]:void 0,o=n[i];if(o==null)return;let a=s??e[i],l=o;if(a!==l)return{update:c=>{let h=Ht.lerp(a,l,c);r?e[i]=Math.trunc(h):e[i]=h},start:()=>{e[i]=a},end:()=>{e[i]=l}}}function uJ(i,e,t,n,r){let s=t[i]?t[i]:void 0,o=n[i];if(!o)return;let a=e[i],l=[...s??a],c=[...o];if(!(l.length!==c.length||UD(l,c)))return{update:h=>{l.forEach((u,d)=>{let f=Ht.lerp(u,c[d],h);e[i][d]=r?Math.trunc(f):f})},start:()=>{Object.assign(e[i],l)},end:()=>{Object.assign(e[i],c)}}}function mB(i,e,t,n){let r=t[i]?t[i]:void 0,s=n[i];if(!s)return;let o=e[i],a=r?new O().fromArray(r):o.clone(),l=new O().fromArray(s);if(!a.equals(l))return{update:c=>{o.lerpVectors(a,l,c)},start:()=>{o.copy(a)},end:()=>{o.copy(l)}}}function aNe(i,e,t,n){let r=t[i]?t[i]:void 0,s=n[i];if(!s)return;let o=e[i],a=r?new Fe().fromArray(r):o.clone(),l=new O,c=new Ni,h=new O;a.decompose(l,c,h);let u=new Fe().fromArray(s),d=new O,f=new Ni,p=new O;if(u.decompose(d,f,p),!a.equals(u))return{update:m=>{pB.slerpQuaternions(c,f,m),dB.lerpVectors(l,d,m),fB.lerpVectors(h,p,m),o.compose(dB,pB,fB)},start:()=>{o.compose(l,c,h)},end:()=>{o.compose(d,f,p)}}}function lNe(i,e,t,n,r){let s=t[i]?t[i]:void 0,o=n[i];if(!o)return;let a=e[i],l=s?typeof s=="string"?r.getColor(s).clone():new St().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new St().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return e[i]=h,{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function lh(i,e,t,n){if(typeof e[i]=="number")return zm(i,e,t??{},n);if(Array.isArray(e[i]))return uJ(i,e,t??{},n)}function cNe(i,e,t){var o,a,l,c;let n=[],r=i.cameraType==="OrthographicCamera"?(o=e.orthographic)==null?void 0:o.zoom:(a=e.perspective)==null?void 0:a.zoom,s=i.cameraType==="OrthographicCamera"?(l=t.orthographic)==null?void 0:l.zoom:(c=t.perspective)==null?void 0:c.zoom;if(s!==void 0){let h=r??i.zoom,u=s;h!==u&&n.push({update:d=>{i.zoom=Ht.lerp(h,u,d),i.updateProjectionMatrix()},start:()=>{i.zoom=h,i.updateProjectionMatrix()},end:()=>{i.zoom=u,i.updateProjectionMatrix()}})}if(t.targetOffset!==void 0){let h=zm("targetOffset",i,e,t);h&&n.push(h)}return n}function uNe(i,e,t,n){if(t.scaleBaked===void 0)return;let r=e.scaleBaked??i.data.geometry.scaleBaked,s=t.scaleBaked;if(Md.isEqual(r,s))return;let o=[];return o.push({update:a=>{i.updateGeometryInteractions({scaleBaked:[Ht.lerp(r[0],s[0],a),Ht.lerp(r[1],s[1],a),Ht.lerp(r[2],s[2],a)]},n),i.invalidateDownstreamBooleanData()},start:()=>{i.updateGeometryInteractions({scaleBaked:r},n),i.invalidateDownstreamBooleanData()},end:()=>{i.updateGeometryInteractions({scaleBaked:s},n),i.invalidateDownstreamBooleanData()}}),o}function hNe(i,e,t){if(!t.extrusion)return;let n=i.extrusion,r=e.extrusion??{},s=t.extrusion,o=[];return xQ.forEach(a=>{let l=lh(a,n,r,s);l&&o.push(l)}),o}function dNe(i,e,t,n){let r=[];if(!("geometry"in t))return r;let s=i.geometry.userData.parameters,o="geometry"in e?e.geometry:{},a=t.geometry;if(i instanceof d8){let l=uNe(i,o,a,n);l&&r.push(...l)}else{let l={};if(Object.assign(l,zDe(s,Uz)),Uz.forEach(c=>{let h=lh(c,l,o,a);h&&r.push(h)}),i instanceof pP){Object.assign(l,{extrusion:{...s.extrusion}});let c=hNe(l,o,a);c&&r.push(...c)}r.length&&r.push({update:c=>{i.updateGeometryInteractions(l,n),i.updateGeometryGroupsIfNeeded()},start:c=>{i.updateGeometryInteractions(l,n),i.updateGeometryGroupsIfNeeded()},end:c=>{i.updateGeometryInteractions(l,n),i.updateGeometryGroupsIfNeeded()}})}return r}function fNe(i,e,t,n){let r=[];if(t.intensity!==void 0){let s=zm("intensity",i,e,t);s&&r.push(s)}if(t.color!==void 0){let s=lNe("color",i,e,t,n);s&&r.push(s)}return r}function pNe(i,e,t,n){let r=[];if(Array.isArray(i.material)){if(!("materials"in t&&t.materials))return r;let s="materials"in e&&e.materials?e.materials:[],o=t.materials;i.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},h=o[l];typeof c=="string"||typeof h=="string"||r.push(...gB(a,c,h,n))})}else{if(!("material"in t&&t.material))return r;let s="material"in e&&e.material?e.material:{},o=t.material;if(typeof s=="string"||typeof o=="string")return r;r.push(...gB(i.material,s,o,n))}return r}function gB(i,e,t,n){var s;let r=[];i.transparent=RT(t,n);for(let o of i.layers){let a=(s=e.layers)==null?void 0:s.data(o.uuid),l=t.layers.data(o.uuid);if(!l||!(o.visible??!0)||!(l.visible??!0))continue;let c=o.getNames().filter(h=>!hPe.some(u=>h.includes(u)));for(let h of c)try{let u=o.getValue(h),d;if(h==="colors")d=bNe(o,a,l,h);else if(Array.isArray(u))h==="steps"&&(d=_Ne(o,a,l,h));else if(typeof u=="number")d=mNe(o,a,l,h);else{if(typeof u=="boolean")continue;u instanceof fe?d=gNe(o,a,l,h):u instanceof O?d=vNe(o,a,l,h):u instanceof so?d=xNe(o,a,l,h,n):u instanceof St?d=yNe(o,a,l,h,n):"isTexture"in u&&(d=wNe(o,a,l,h))}d&&(Array.isArray(d)?r.push(...d):r.push(d))}catch(u){console.error(`lerpMaterial: unexpected material layer for ${h}`,u)}}return r}function mNe(i,e,t,n){if(!i.hasValue(n)||!(n in t))return;let r=e?e[n]:i.getValue(n),s=t[n];if(r!==s)return{update:o=>{i.setValue(n,Ht.lerp(r,s,o))},start:()=>{i.setValue(n,r)},end:()=>{i.setValue(n,s)}}}function gNe(i,e,t,n){if(!i.hasValue(n)||!(n in t))return;let r=i.getValue(n),s=e?new fe().fromArray(e[n]):r.clone(),o=new fe().fromArray(t[n]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function vNe(i,e,t,n){if(!i.hasValue(n)||!(n in t))return;let r=i.getValue(n),s=e?new O().fromArray(e[n]):r.clone(),o=new O().fromArray(t[n]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function yNe(i,e,t,n,r){if(!i.hasValue(n)||!(n in t))return;let s=e?e[n]:void 0,o=t[n],a=i.getValue(n),l=s?typeof s=="string"?r.getColor(s).clone():new St().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new St().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return i.setValue(n,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function xNe(i,e,t,n,r){if(!i.hasValue(n)||!(n in t))return;let s=e?e[n]:void 0,o=t[n],a=i.getValue(n),l=s?typeof s=="string"?r.getColor(s).clone():new St().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new so(o.r,o.g,o.b,o.a);if(l.equals(c))return;let h=a.clone();return i.setValue(n,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function _Ne(i,e,t,n="steps"){if(!i.hasValue(n)||!(n in t))return;let r=[],s=i.getValue(n),o=e?e[n]:s,a=t[n];for(let l=0;l<s.length;++l){let c=o[l],h=a[l];c!==h&&r.push({update:u=>{s[l]=Ht.lerp(c,h,u)},start:()=>{s[l]=c},end:()=>{s[l]=h}})}return r.length?r:void 0}function bNe(i,e,t,n="colors"){if(!i.hasValue(n)||!(n in t))return;let r=[],s=i.getValue(n),o=e?e[n]:s.map(l=>l.toArray()),a=t[n];for(let l=0;l<s.length;++l){let c=[...o[l]],h=[...a[l]];Z6.isEqual(c,h)||r.push({update:u=>{s[l].fromArray(Z6.lerp(c,h,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(h)}})}return r.length?r:void 0}function wNe(i,e,t,n="texture"){if(!i.hasValue(n)||!(n in t))return;let r=i.getNode("mat");if(!r)return;let s=e?e[n]:r,o=t[n],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],h=[...o.offset];if(!Fp.isEqual(a,c)||!Fp.isEqual(l,h))return{update:u=>{r.repeat=Fp.lerp(a,c,u),r.offset=Fp.lerp(l,h,u),r.updateMatrix()},start:()=>{r.repeat=[...a],r.offset=[...l],r.updateMatrix()},end:()=>{r.repeat=[...c],r.offset=[...h],r.updateMatrix()}}}var xw=new O,vB=new xs;function SNe(i,e,t,n){let r=[],s=mB("position",i,e,t);s&&r.push(s);let o=mB("scale",i,e,t);o&&r.push(o);let a=ANe(i,e,t,n);a&&r.push(a);let l=aNe("hiddenMatrix",i,e,t);l&&r.push(l);let c={slide:(e.pathSnapping??i.dataPatched.pathSnapping).slide},h=zm("slide",c,e.pathSnapping??i.dataPatched.pathSnapping,t.pathSnapping??i.dataPatched.pathSnapping);if(h&&r.push(h),s||o||a||l||h){let u=()=>{var d;i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),(d=i.parent)!=null&&d.matrixWorldFusedFalse&&(i.matrixWorld.multiplyMatrices(i.parent.matrixWorldFusedFalse,i.matrix),i.matrixWorldNeedsUpdate=!1),Up(i)&&dd(i.parent)&&i.invalidateDownstreamBooleanData(!0),i.updatePathSnappingSlide(Object.assign({},e.pathSnapping,c))};r.push({update:u,start:u,end:u})}return r}function ANe(i,e,t,n){let r=e!=null&&e.rotation?e.rotation:void 0,s=t.rotation;if(!s)return;let o=r?new O().fromArray(r):new O().setFromEuler(i.rotation),a=new O().fromArray(s);if(o.equals(a))return;let l=xw.subVectors(a,o);if(n&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new Ni().setFromEuler(vB.setFromVector3(o)),h=new Ni().setFromEuler(vB.setFromVector3(a));return{update:u=>{oNe(c,h,i.quaternion,u)},start:()=>{i.rotation.setFromVector3(o)},end:()=>{i.rotation.setFromVector3(a)}}}else return{update:c=>{xw.lerpVectors(o,a,c),i.rotation.setFromVector3(xw)},start:()=>{i.rotation.setFromVector3(o)},end:()=>{i.rotation.setFromVector3(a)}}}function TNe(i,e,t){let n=[];if(!("cloner"in t)||!i.cloner)return n;let r=i.cloner,s="cloner"in e?e.cloner:{},o=t.cloner;hQ.forEach(d=>{let f;d==="count"?f=zm("count",r.parameters,s,o,!0):f=lh(d,r.parameters,s??{},o),f&&n.push(f)});let a=MNe(r,s,o);a!=null&&a.length&&n.push(...a);let l=ENe(r,s,o);l!=null&&l.length&&n.push(...l);let c=CNe(r,s,o);c!=null&&c.length&&n.push(...c);let h=DNe(r,s,o);h!=null&&h.length&&n.push(...h);let u=PNe(r,s,o);return u!=null&&u.length&&n.push(...u),n.length&&n.push({update:()=>{r.update()}}),n}function MNe(i,e,t){if(i.parameters.type!=="radial")return;let n=e.radial,r=t.radial;if(!r)return;let s=i.parameters.radial,o=[];return dQ.forEach(a=>{let l=lh(a,s,n??{},r);l&&o.push(l)}),o}function ENe(i,e,t){if(i.parameters.type!=="linear")return;let n=e.linear,r=t.linear;if(!r)return;let s=[],o=i.parameters.linear;return fQ.forEach(a=>{let l=lh(a,o,n??{},r);l&&s.push(l)}),s}function CNe(i,e,t){if(i.parameters.type!=="grid")return;let n=e.grid,r=t.grid;if(!r)return;let s=[],o=i.parameters.grid;return pQ.forEach(a=>{let l;a==="count"?l=uJ(a,o,n??{},r,!0):l=lh(a,o,n??{},r),l&&s.push(l)}),s}function DNe(i,e,t){if(i.parameters.type!=="toObject")return;let n=e.toObject,r=t.toObject;if(!r)return;let s=[],o=i.parameters.toObject;return mQ.forEach(a=>{let l;a==="count"?l=zm(a,o,n??{},r,!0):l=lh(a,o,n??{},r),l&&s.push(l)}),s}function PNe(i,e,t){if(!i.parameters.randomness)return;let n=e.randomnessObject,r=t.randomnessObject;if(!r)return;let s=[],o=i.parameters.randomnessObject;return gQ.forEach(a=>{let l=lh(a,o,n??{},r);l&&s.push(l)}),s}function yB(i,e,t,n,r){let s=[];return i.data.visible&&s.push(...SNe(i,e,t,r)),i.data.visible&&s.push(...TNe(i,e,t)),Up(i)?(i instanceof sc&&i.data.visible&&s.push(...dNe(i,e,t,n)),i.data.visible&&s.push(...pNe(i,e,t,n))):$Oe(i)?i.data.visible&&s.push(...fNe(i,e,t,n)):WOe(i)&&s.push(...cNe(i,e,t)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>{var l;return(l=a.start)==null?void 0:l.call(a,o)})},end:o=>{s.forEach(a=>{var l;return(l=a.end)==null?void 0:l.call(a,o)})}}:void 0}new O;function LNe(i){let e;switch(i.easing){case 0:e="cubicBezier( 0, 0, 1, 1 )";break;case 1:e="cubicBezier( .25, .1, .25, 1 )";break;case 2:e="cubicBezier( .42, 0, 1, 1 )";break;case 3:e="cubicBezier( 0, 0, .58, 1 )";break;case 4:e="cubicBezier( .42, 0, .58, 1 )";break;case 5:let{control1:t,control2:n}=i;e=`cubicBezier(
				${t[0]}, ${t[1]}, ${n[0]}, ${n[1]}
			)`;break;case 6:let{mass:r,stiffness:s,damping:o,velocity:a}=i;e=`spring( ${r}, ${s}, ${o}, ${a} )`;break;default:e="linear"}return{duration:i.duration,easing:e}}function hJ(i){let e={delay:0,loop:i.repeat===-1?!0:i.repeat+1};if(i.repeat===0)e.direction="normal",e.rewind=i.direction==="pingpong-rewind";else switch(i.direction){case"pingpong":e.direction="alternate",e.rewind=!1;break;case"pingpong-rewind":e.direction="alternate",e.rewind=!0;break;default:e.direction="normal",e.rewind=!1;break}switch(e.delay=0,e.endDelay=0,e.startOnceDelay=0,e.pingPongDelayCorrection=0,i.delayDirection){case"start-once":e.startOnceDelay=i.delay;break;case"start":e.delay=i.delay;break;case"end":e.endDelay=i.delay;break;case"start-end":case void 0:e.delay=i.delay,e.endDelay=i.delay;break}return e.direction==="alternate"&&(e.delay/=2,e.endDelay/=2,e.delay!==0&&(e.pingPongDelayCorrection=e.delay)),e}var xB=class{constructor(i,e,t,n,r,s){if(this.object=i,this.data=n,this.sharedAssets=r,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=yB(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},e===void 0){let o=D5(this.object,this.object.currentState===t?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=D5(this.object,e);if(!o)throw new Error("Missing property");this.from=o}if(t===void 0)throw new Error("Missing property");{let o=D5(this.object,t);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=e===void 0||t===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...hJ(n),...LNe(n),change:this.onChange},this.callback=yB(this.object,e===void 0?{}:this.from.data,t===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},S4=class extends cf{constructor(e,t,n){if(super(),this.data=e,this.scene=t,this.sharedAssets=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.isTwoState=!1,this.onTimelineChangeComplete=()=>{var s;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((s=this.timeline)==null||s.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let r=t.find(e.object);if(!r)throw new Error("Missing property");if(!r.states)throw new Error("Missing property");if(this.object=r,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.isTwoState=e.tweens.length===2,this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.actionCurrentState=D5(this.object,this.object.currentState),this.toggleIsForward=!1}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var n,r;try{let s=hJ(this.data.tweens[0].data),o=s.loop;t&&typeof s.loop=="number"&&s.loop--,(n=this.timeline)==null||n.pause(),this.timeline=sNe.timeline({autoplay:!1,...s,...o===!0||o>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let a=this.tweens.findIndex(l=>l==null?void 0:l.changeBegan);if(this.timelineNeedsRebuild=a!==-1&&(o===!0||o>1),s.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let l=a===-1?0:a;(r=this.object.previousAction)!=null&&r.playing&&(this.object.previousAction.pause(),a===-1&&this.data.tweens[l].data.state===void 0&&(a=l));for(let c=l;c<this.data.tweens.length-1;c++){let h=this.data.tweens[c],u=this.data.tweens[c+1],d=new xB(this.object,c===a?void 0:h.data.state===void 0?this.actionCurrentState.id:h.data.state,u.data.state===void 0?this.actionCurrentState.id:u.data.state,u.data,this.sharedAssets,this.data.allowSlerp??!1);a!==-1&&c===l&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[c]=d,this.timeline.add(d.params,this.timeline.duration+(c===l?s.delay:0)+(c===l&&!t?s.pingPongDelayCorrection:0))}this.timeline.duration+=s.endDelay}else{let l=a===-1?this.data.tweens.length-1:a+1;for(let c=l;c>0;c--){let h=this.data.tweens[c],u=this.data.tweens[c-1],d=new xB(this.object,c===a+1?void 0:h.data.state===void 0?this.actionCurrentState.id:h.data.state,u.data.state===void 0?this.actionCurrentState.id:u.data.state,h.data,this.sharedAssets,this.data.allowSlerp??!1);a!==-1&&c===l&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[c-1]=d,this.timeline.add(d.params,this.timeline.duration+(c===l?s.endDelay:0))}this.timeline.duration+=s.delay+(t?0:s.pingPongDelayCorrection)}}catch(s){s instanceof Error&&console.error(s.message)}this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause(),this.seek(0)}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration)}toggle(e){var t;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var n;(n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function D5(i,e){var r;let t,n;if(typeof e=="string"?(t=e,n=(r=i.states)==null?void 0:r[t]):e===null&&(t=null,n=i.data),!(t===void 0||n===void 0))return{id:t,data:n}}new O;new O;new O;new O;new O;new O;new xa;(function(){let i=new O,e=new O;return(t,n,r)=>r>0?(i.subVectors(t,n),i.length()<=r?t:e.copy(n).add(i.normalize().multiplyScalar(r))):n})();(function(){let i=new Fe;return(e,t)=>{e.position.copy(t),e.parent!==null&&(i.copy(e.parent.matrixWorld).invert(),e.position.applyMatrix4(i)),i.copy(e.hiddenMatrix).invert(),e.position.applyMatrix4(i),e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e instanceof oh&&dd(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})();new O;new O;new Fe;new O;new O;new O;new xa;(function(){let i=new Fe,e=new O,t=new O,n=new O;return(r,s)=>(s==="x"?(e.set(0,0,1),t.set(0,1,0),n.set(-1,0,0)):s==="y"?(e.set(1,0,0),t.set(0,0,1),n.set(0,-1,0)):(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1)),e.applyMatrix4(r),t.applyMatrix4(r),n.applyMatrix4(r),i.makeBasis(e,t,n))})();(function(){let i=new Fe;return function(e,t){e.parent!==null?i.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix):i.copy(e.hiddenMatrix),t.premultiply(TRe(i).invert()),e.rotation.setFromRotationMatrix(t),e.updateMatrix(),e instanceof oh&&dd(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})();kDe.then(i=>i);new Fe;new O(1,1,1);new O;new O;var INe={type:"beginEvent",eventName:"Collision"},_w={type:"change"},ONe={type:"lock"},RNe={type:"unlock"};new O;var _B=new O,bB=new O,NNe=new O,Zr=new O,Hs=new O,Fc=new O,bw=new Fe,wB=new Fe,FNe=new Fe;new Fe;var ha=new Ni,bl=new Ni,Ja=new xs(0,0,0,"YXZ"),zNe=new O(1,0,0),da=new O(0,1,0),kNe=new O(0,0,1),SB=new O(1,1,1),BNe=1,UNe=.025,VNe=16e-6,AB=12,GNe=20,Cr=new $o,go=new Wn,jNe={type:"requestRender"},TB=Math.PI/6,HT=class extends cf{constructor(e,t,n,r,s,o,a,l,c){var m,y;super(),this.object=e,this.domElement=t,this.sharedGameControlGlobals=s,this.cameraFollow=o,this.camera=a,this.scene=l,this.sharedAssets=c,this.enableDamping=!0,this.position0=new O,this.rotation0=new xs(0,0,0,"XYZ"),this.scale0=new O,this.hiddenMatrix0=new Fe,this.target0=new O,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new xs(0,0,0,"YXZ"),this.position0Cam=new O,this.quat0Cam=new Ni,this.scale0Cam=new O,this.hiddenMatrix0Cam=new Fe,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new $o(new O(0,-40,0),new O(0,40,0)),matrix:new Fe,position:new O,rotation:new Ni},this.euler=new xs(0,0,0,"YXZ"),this.eulerDelta=new O,this.lastPosition=new O,this.lastCameraQuaternion=new Ni,this.lastCameraPosition=new O,this.PI_2=Math.PI/2,this.prevMouse=new fe,this.velocityTarget=new O,this.velocity=new O,this.directionXZ=new O,this.rotVelocityStick=new O,this.rotVelocityTarget=new O,this.rotVelocity=new O,this.rotDirection=new O,this.nonColliderRotOffset=new Fe,this.nonColliderPosOffset=new Fe,this.firstPointerId=-1,this.rot=new O,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Fe,this.objectToTarget=new O,this.objectToTarget0=new O,this.objectToCamXZ=new O,this.objectToCamXZ0=new O,this.targetToCamera=new O,this.targetToCamera0=new O,this.cameraPolarAxis0=new O,this.targetPos=new O,this.targetQuat=new Ni,this.lerpFactorPos=new O().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Ni,this.objXZQuatInv=new Ni,this.objXZRotMat=new Fe,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new O,this.pushedVelocity=new O,this.groundYRotation=0,this.objectRealQuat=new Ni,this.colliderWorldQuat=new Ni,this.groundNormal=new O,this.groundTilt=new Ni,this.groundTiltInv=new Ni,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Hz&&(!Wz||$z>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let v=g.clientX-this.prevMouse.x,x=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(Wz&&$z<15.5&&!Hz?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-x*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-x*this.mouseOrbitSensitivity*5),this.dispatchEvent(_w)},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(ONe),HT.isLocked=!0):(this.dispatchEvent(RNe),HT.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]){this.movementState[v[0]]=1;break}this.dispatchEvent(_w)},this.onKeyUp=g=>{for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]||g.code.slice(3,g.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(g,v)=>{for(let x=2;x<4;x++){let _=g.axes[x];v===0?x===2?this.movementState.movePosX=_:this.movementState.movePosZ=_:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,x===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(_)>=.3&&(this.vrEulerYOffset+=_<0?1:-1),this.movementState.rotPosY=_):this.moveMode==="fly"&&(this.movementState.moveNegY=_))}},e===a&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let h=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,h,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){if(this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),(y=(m=this.camera)==null?void 0:m.parent)==null?void 0:y.parent){let w=this.camera.matrix.clone().invert().premultiply(this.camera.matrixWorld),b=w.clone().invert();this.camera.hiddenMatrix.multiply(b),this.camera.matrix.premultiply(w),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)}this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new O(0,0,-1).applyQuaternion(this.camera.quaternion),v=new O().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let x;if(Math.abs(g.y)<1e-6){v.y=0,g.y=0;let w=v.projectOnVector(g);this.targetToCamera0.copy(w).negate(),x=this.camera.position.clone().add(w)}else{let w=g.multiplyScalar(v.y/g.y);this.targetToCamera0.copy(w).negate(),x=w.clone().add(this.camera.position)}this.objectToTarget0.subVectors(x,this.object.position);let _=new xs().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-_.x,_.x=0,_.z=0,_.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(_)}if(this.object instanceof Y1&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=(n.speedTranslate??250)*BNe,this.speedOrbit=(n.speedRotate??100)*UNe,this.mouseOrbitSensitivity=(n.speedRotate??100)*VNe,this.keyAssignments=n.keyAssignments.map(g=>{let v=[g[0],g[1]];return v[1]==="▲"?v[1]="ArrowUp":v[1]==="◀"?v[1]="ArrowLeft":v[1]==="▼"?v[1]="ArrowDown":v[1]==="▶"?v[1]="ArrowRight":v[1]==="⇧"?v[1]="Shift":v[1]==="↵"?v[1]="Enter":v[1]==="Space"?v[1]=" ":v[1]==="⌘"?v[1]="Meta":v[1]==="Ctrl"?v[1]="Control":v[1]==="Esc"&&(v[1]="Escape"),v}),n.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(v=>v[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((n.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((n.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((n.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((n.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((n.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((n.delayRotCamera??.3)*60)),this.gravity=(r.gravity??h0.defaultData.gravity)*AB,this.pixelsPerMeter=r.pixelsPerMeter??h0.defaultData.pixelsPerMeter,this.usePhysics=r.usePhysics??h0.defaultData.usePhysics,this.jumpPower=n.jumpPower*GNe,this.resetYPosition=n.resetYPosition,this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??xT.defaultDataThirdPerson.orientWith;let u=r.skinWidthRelative??h0.defaultData.skinWidthRelative,d=r.stepThreshRelative??h0.defaultData.stepThreshRelative;this.slopeThresh=(r.slopeThresh??h0.defaultData.slopeThresh)*Math.PI/180,n.collider.type==="capsule"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=n.collider.height*u/this.pixelsPerMeter,this.stepThresh=n.collider.height*d/this.pixelsPerMeter):n.collider.type==="sphere"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*u/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*d/this.pixelsPerMeter):(this.offset=n.collider.height*u/this.pixelsPerMeter,this.stepThresh=n.collider.height*d/this.pixelsPerMeter),this.collider.type=n.collider.type;let f=new O().fromArray(n.collider.position),p=new Ni().setFromEuler(new xs().fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(f).multiply(this.object.scale),this.collider.rotation.copy(p),this.collider.matrix.compose(f,p,SB),n.cameraXAxis!==void 0&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),n.gameActions!==void 0&&Object.entries(n.gameActions).forEach(([g,v],x)=>{v.forEach(({id:_,data:w})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),w.type==="Transition"?this.actions[g].push(new S4(w,l,c)):w.type==="Audio"?this.actions[g].push(new w4(_,w,e,c)):w.type==="Video"&&this.actions[g].push(new oB(_,w,e))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle")}reset(e=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),e===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let t=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,t,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}e===!1&&(this.object instanceof Y1?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(_w)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect(),Object.values(this.actions).forEach(e=>{e.forEach(t=>{(t instanceof S4||t instanceof w4||t instanceof oB)&&t.dispose()})})}resetTo(e,t,n){}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach(t=>{t instanceof S4?t.play():t instanceof w4&&t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach(t=>{t instanceof S4?t.stop():t instanceof w4&&t.dispatchGameControl("stop")}),this.object.traverseEntity(t=>{t.currentState!==null&&t.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})})))}update(e,t,n){var l,c,h,u,d;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let s=r*60,o=!1;if(this.usePhysics&&this.collisionEnabled){let f=Hs.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*AB),1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),p=this.sharedGameControlGlobals.rapierWorld.castShape(Zr.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,f,(l=this.object.rigidBody)==null?void 0:l.collider(0).shape,1,8,void 0,void 0,this.object.rigidBody);if(p){this.onObject=!0,this.groundNormal.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(o=!0);let m=p.collider._parent;this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let y of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(y.rigidBody===m){(y.hasNonUniformScale?y.matrixWorldRigid:y.matrixWorld).decompose(Zr,bl,Hs),this.groundVelocity.subVectors(Zr,y.prevT),this.object.getWorldPosition(Hs).add(this.collider.position).sub(y.position),this.groundYRotation=Ja.setFromQuaternion(bl).y-y.prevR.y,Fc.copy(Hs).applyAxisAngle(da,this.groundYRotation),this.groundVelocity.add(Fc.sub(Hs)).divideScalar(r);break}}else this.onObject=!1}this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.velocityTarget.y+=this.onObject?0:this.gravity*s),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.normalize(),this.movementState.moveNegZ||this.movementState.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.movementState.moveNegX||this.movementState.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**s),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**s),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**s)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let a=NNe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let f=Hs.copy(a);f.y=0,a.set(0,a.y,f.length()*-1)}if(Ja.setFromVector3(this.rot),this.moveMode==="walk"&&(Ja.x=0),a.applyEuler(Ja),o&&(bl.setFromUnitVectors(da,this.groundNormal),a.applyQuaternion(bl)),n){let f=Ja.set(0,this.vrEulerYOffset*TB,0);n.applyEuler(f),a.x+=n.x,a.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*r}if(this.usePhysics===!0){let f=Hs;this.pushedVelocity.set(0,0,0);for(let p of this.sharedGameControlGlobals.entitiesWithTransformAnim){let m=Fc.setFromMatrixPosition(p.matrixWorld).sub(p.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),y=p.rigidBody.collider(0).castCollider(m,this.object.rigidBody.collider(0),Zr.copy(a).divideScalar(this.pixelsPerMeter),r);if(m.multiplyScalar(this.pixelsPerMeter),y!==null){this.pushedVelocity.copy(m),f.copy(y.normal1).applyQuaternion(p.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let p=f.dot(a);p<0&&a.addScaledVector(f,-p),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**s):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**s),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let f=Zr,p=Hs.copy(this.directionXZ);p.x*=-1,this.camera.getWorldDirection(f);let m=Fc.copy(da).multiplyScalar(f.dot(da));if(f.sub(m),this.orientWith==="camera"?this.rot.y=f.angleTo(p)*(f.cross(p).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera:this.rot.y=this.euler.y+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2,this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(da,this.euler.y-this.euler0.y);let y=Hs.copy(this.objectToCamXZ).normalize(),g=Fc.copy(a).multiplyScalar(r);g.y=0;let v=g.sub(Zr.copy(y).multiplyScalar(g.dot(y))).cross(y).y;this.euler.y-=Math.atan2(v,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Ht.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Ht.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Ht.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Ja.copy(t),Ja.y=0):(Ja.copy(this.euler),Ja.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Ja)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*TB),ha.setFromAxisAngle(zNe,this.rot.x),bl.setFromAxisAngle(da,this.rot.y),bl.multiply(ha),ha.setFromAxisAngle(kNe,this.rot.z),bl.multiply(ha),this.object.quaternion.copy(bl),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let f=Hs.copy(a).multiplyScalar(r/this.pixelsPerMeter),p;this.didHit=!1;let m=new O;for(let y=0;y<5;y++){let g=f.length(),v=Fc.copy(f).normalize();if(p=this.sharedGameControlGlobals.rapierWorld.castShape(Zr.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),this.colliderWorldQuat,v,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,g,8,void 0,void 0,this.object.rigidBody),p!==null){this.didHit=!0;let x=this.sharedGameControlGlobals.colliderToEntity[p.collider.handle];if(x!==this.lastHitObj&&y===0){this.lastHitObj=x;let S=this.sharedGameControlGlobals.eventsPerObjects[x==null?void 0:x.uuid];if(S)for(let A of S)A.data.target==="character"&&(x.dispatchEvent(INe),A.dispatch())}let _=_B.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat),w=bB.copy(v).multiplyScalar(p.toi).dot(_),b=p.toi;if(b===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),w>this.offset&&(b=p.toi*(w-this.offset)/w,m.addScaledVector(v,b)),f.copy(v).multiplyScalar(g-b),Math.acos(-_.y)>this.slopeThresh){let S=Zr.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),A=Fc.copy(p.witness2).applyQuaternion(this.colliderWorldQuat);A.y=0;let E=S.add(A);E.y+=this.stepThresh;let T=this.sharedGameControlGlobals.rapierWorld.castShape(E,this.colliderWorldQuat,f,(h=this.object.rigidBody)==null?void 0:h.collider(0).shape,1,8,void 0,void 0,this.object.rigidBody);T!==null&&T.toi===0&&(_.y=0,_.normalize())}f.addScaledVector(_,-f.dot(_))}else{y===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),m.add(f);break}}this.object.position.addScaledVector(m,this.pixelsPerMeter),(u=this.object.rigidBody)==null||u.setTranslation(Zr.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(d=this.object.rigidBody)==null||d.setRotation(ha.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let f=this.onObject?1:5,p=a.multiplyScalar(r/f);for(let m=0;m<f;m++)this.object.position.add(p),this.collisionAdjustment(r/f)}else this.object.position.addScaledVector(a,r);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let f=this.objectToTarget.add(this.object.position),p=this.targetToCamera.add(f);bw.lookAt(p,f,da).setPosition(p),bw.decompose(this.targetPos,this.targetQuat,Zr),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**s),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**s),this.camera.updateMatrix(),this.camera.matrixWorldNeedsUpdate=!0,this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Ht.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Ht.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(jNe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=ha.setFromAxisAngle(da,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Ht.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Ht.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Ht.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Zr.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&n.applyQuaternion(e);let r=bl.setFromAxisAngle(n,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){da.angleTo(e)*180/Math.PI<15||da.angleTo(e)*180/Math.PI>85?ha.identity():ha.setFromUnitVectors(da,e),this.groundTilt.slerp(ha,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var s;let t=bB.set(0,0,0);this.object.updateMatrix();let n=bw.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Zr,ha,Hs).compose(Zr,ha,SB);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(o=>{if(o===this.object||o.isDescendantOf(this.object))return;go.makeEmpty(),o.updateMatrixWorldSVD();let a=o.matrixWorldRigid,l=wB.copy(a).invert(),c=FNe.copy(wB).multiply(n);Cr.copy(this.collider.segment),Cr.start.applyMatrix4(c),Cr.end.applyMatrix4(c);let h=_B.copy(this.object.position).applyMatrix4(l);go.expandByPoint(Cr.start),go.expandByPoint(Cr.end),go.min.addScalar(-this.collider.radius),go.max.addScalar(this.collider.radius),o.boundsTree.shapecast({intersectsBounds:u=>u.intersectsBox(go),intersectsTriangle:u=>{let d=Zr,f=Hs,p=u.closestPointToSegment(Cr,d,f);if(p<this.collider.radius){let m=this.collider.radius-p,y=f.sub(d).normalize(),g=Fc.copy(h);g.addScaledVector(y,m);let v=g.applyMatrix4(a).sub(this.object.position);t.add(v),Cr.start.addScaledVector(y,m),Cr.end.addScaledVector(y,m)}}})}),go.makeEmpty(),Cr.copy(this.collider.segment),Cr.start.applyMatrix4(n),Cr.end.applyMatrix4(n),go.expandByPoint(Cr.start),go.expandByPoint(Cr.end),go.min.addScalar(-this.collider.radius),go.max.addScalar(this.collider.radius),(s=this.sharedGameControlGlobals.staticMeshBVH)==null||s.shapecast({intersectsBounds:o=>o.intersectsBox(go),intersectsTriangle:o=>{let a=Zr,l=Hs,c=o.closestPointToSegment(Cr,a,l);if(c<this.collider.radius){let h=this.collider.radius-c,u=l.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(u),t.addScaledVector(u,h),Cr.start.addScaledVector(u,h),Cr.end.addScaledVector(u,h)}}}),this.onObject=t.y>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.object.position.add(t)}},HNe=HT;HNe.isLocked=!1;new fe;new O;new fe;Object.keys(WK).filter(i=>isNaN(Number(i)));new Cm;new St;new O;new Fe;new St;new O;new O;new tZ;new mD({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `});new Ps;new fe;const MB={type:"change"},ww={type:"start"},Sw={type:"end"};class WNe extends hc{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Af.ROTATE,MIDDLE:Af.DOLLY,RIGHT:Af.PAN},this.touches={ONE:Tf.ROTATE,TWO:Tf.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(se){se.addEventListener("keydown",ue),this._domElementKeyEvents=se},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(MB),n.update(),s=r.NONE},this.update=function(){const se=new R,be=new Yi().setFromUnitVectors(e.up,new R(0,1,0)),Ge=be.clone().invert(),et=new R,Mt=new Yi,mt=2*Math.PI;return function(){const Vi=n.object.position;se.copy(Vi).sub(n.target),se.applyQuaternion(be),a.setFromVector3(se),n.autoRotate&&s===r.NONE&&E(S()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let gn=n.minAzimuthAngle,Jt=n.maxAzimuthAngle;return isFinite(gn)&&isFinite(Jt)&&(gn<-Math.PI?gn+=mt:gn>Math.PI&&(gn-=mt),Jt<-Math.PI?Jt+=mt:Jt>Math.PI&&(Jt-=mt),gn<=Jt?a.theta=Math.max(gn,Math.min(Jt,a.theta)):a.theta=a.theta>(gn+Jt)/2?Math.max(gn,a.theta):Math.min(Jt,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),se.setFromSpherical(a),se.applyQuaternion(Ge),Vi.copy(n.target).add(se),n.object.lookAt(n.target),n.enableDamping===!0?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),c=1,u||et.distanceToSquared(n.object.position)>o||8*(1-Mt.dot(n.object.quaternion))>o?(n.dispatchEvent(MB),et.copy(n.object.position),Mt.copy(n.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",we),n.domElement.removeEventListener("pointerdown",Y),n.domElement.removeEventListener("pointercancel",F),n.domElement.removeEventListener("wheel",re),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",ee),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ue)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new KN,l=new KN;let c=1;const h=new R;let u=!1;const d=new ae,f=new ae,p=new ae,m=new ae,y=new ae,g=new ae,v=new ae,x=new ae,_=new ae,w=[],b={};function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function A(){return Math.pow(.95,n.zoomSpeed)}function E(se){l.theta-=se}function T(se){l.phi-=se}const M=function(){const se=new R;return function(Ge,et){se.setFromMatrixColumn(et,0),se.multiplyScalar(-Ge),h.add(se)}}(),C=function(){const se=new R;return function(Ge,et){n.screenSpacePanning===!0?se.setFromMatrixColumn(et,1):(se.setFromMatrixColumn(et,0),se.crossVectors(n.object.up,se)),se.multiplyScalar(Ge),h.add(se)}}(),D=function(){const se=new R;return function(Ge,et){const Mt=n.domElement;if(n.object.isPerspectiveCamera){const mt=n.object.position;se.copy(mt).sub(n.target);let yi=se.length();yi*=Math.tan(n.object.fov/2*Math.PI/180),M(2*Ge*yi/Mt.clientHeight,n.object.matrix),C(2*et*yi/Mt.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(Ge*(n.object.right-n.object.left)/n.object.zoom/Mt.clientWidth,n.object.matrix),C(et*(n.object.top-n.object.bottom)/n.object.zoom/Mt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(se){n.object.isPerspectiveCamera?c/=se:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*se)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(se){n.object.isPerspectiveCamera?c*=se:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/se)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(se){d.set(se.clientX,se.clientY)}function G(se){v.set(se.clientX,se.clientY)}function U(se){m.set(se.clientX,se.clientY)}function Z(se){f.set(se.clientX,se.clientY),p.subVectors(f,d).multiplyScalar(n.rotateSpeed);const be=n.domElement;E(2*Math.PI*p.x/be.clientHeight),T(2*Math.PI*p.y/be.clientHeight),d.copy(f),n.update()}function $(se){x.set(se.clientX,se.clientY),_.subVectors(x,v),_.y>0?P(A()):_.y<0&&I(A()),v.copy(x),n.update()}function W(se){y.set(se.clientX,se.clientY),g.subVectors(y,m).multiplyScalar(n.panSpeed),D(g.x,g.y),m.copy(y),n.update()}function X(se){se.deltaY<0?I(A()):se.deltaY>0&&P(A()),n.update()}function j(se){let be=!1;switch(se.code){case n.keys.UP:D(0,n.keyPanSpeed),be=!0;break;case n.keys.BOTTOM:D(0,-n.keyPanSpeed),be=!0;break;case n.keys.LEFT:D(n.keyPanSpeed,0),be=!0;break;case n.keys.RIGHT:D(-n.keyPanSpeed,0),be=!0;break}be&&(se.preventDefault(),n.update())}function H(){if(w.length===1)d.set(w[0].pageX,w[0].pageY);else{const se=.5*(w[0].pageX+w[1].pageX),be=.5*(w[0].pageY+w[1].pageY);d.set(se,be)}}function V(){if(w.length===1)m.set(w[0].pageX,w[0].pageY);else{const se=.5*(w[0].pageX+w[1].pageX),be=.5*(w[0].pageY+w[1].pageY);m.set(se,be)}}function B(){const se=w[0].pageX-w[1].pageX,be=w[0].pageY-w[1].pageY,Ge=Math.sqrt(se*se+be*be);v.set(0,Ge)}function q(){n.enableZoom&&B(),n.enablePan&&V()}function K(){n.enableZoom&&B(),n.enableRotate&&H()}function Q(se){if(w.length==1)f.set(se.pageX,se.pageY);else{const Ge=Re(se),et=.5*(se.pageX+Ge.x),Mt=.5*(se.pageY+Ge.y);f.set(et,Mt)}p.subVectors(f,d).multiplyScalar(n.rotateSpeed);const be=n.domElement;E(2*Math.PI*p.x/be.clientHeight),T(2*Math.PI*p.y/be.clientHeight),d.copy(f)}function oe(se){if(w.length===1)y.set(se.pageX,se.pageY);else{const be=Re(se),Ge=.5*(se.pageX+be.x),et=.5*(se.pageY+be.y);y.set(Ge,et)}g.subVectors(y,m).multiplyScalar(n.panSpeed),D(g.x,g.y),m.copy(y)}function ne(se){const be=Re(se),Ge=se.pageX-be.x,et=se.pageY-be.y,Mt=Math.sqrt(Ge*Ge+et*et);x.set(0,Mt),_.set(0,Math.pow(x.y/v.y,n.zoomSpeed)),P(_.y),v.copy(x)}function L(se){n.enableZoom&&ne(se),n.enablePan&&oe(se)}function z(se){n.enableZoom&&ne(se),n.enableRotate&&Q(se)}function Y(se){n.enabled!==!1&&(w.length===0&&(n.domElement.setPointerCapture(se.pointerId),n.domElement.addEventListener("pointermove",J),n.domElement.addEventListener("pointerup",ee)),ce(se),se.pointerType==="touch"?pe(se):N(se))}function J(se){n.enabled!==!1&&(se.pointerType==="touch"?xe(se):te(se))}function ee(se){n.enabled!==!1&&(se.pointerType==="touch"?Se():le(),Ee(se),w.length===0&&(n.domElement.releasePointerCapture(se.pointerId),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",ee)))}function F(se){Ee(se)}function N(se){let be;switch(se.button){case 0:be=n.mouseButtons.LEFT;break;case 1:be=n.mouseButtons.MIDDLE;break;case 2:be=n.mouseButtons.RIGHT;break;default:be=-1}switch(be){case Af.DOLLY:if(n.enableZoom===!1)return;G(se),s=r.DOLLY;break;case Af.ROTATE:if(se.ctrlKey||se.metaKey||se.shiftKey){if(n.enablePan===!1)return;U(se),s=r.PAN}else{if(n.enableRotate===!1)return;k(se),s=r.ROTATE}break;case Af.PAN:if(se.ctrlKey||se.metaKey||se.shiftKey){if(n.enableRotate===!1)return;k(se),s=r.ROTATE}else{if(n.enablePan===!1)return;U(se),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(ww)}function te(se){if(n.enabled!==!1)switch(s){case r.ROTATE:if(n.enableRotate===!1)return;Z(se);break;case r.DOLLY:if(n.enableZoom===!1)return;$(se);break;case r.PAN:if(n.enablePan===!1)return;W(se);break}}function le(se){n.dispatchEvent(Sw),s=r.NONE}function re(se){n.enabled===!1||n.enableZoom===!1||s!==r.NONE||(se.preventDefault(),n.dispatchEvent(ww),X(se),n.dispatchEvent(Sw))}function ue(se){n.enabled===!1||n.enablePan===!1||j(se)}function pe(se){switch(ve(se),w.length){case 1:switch(n.touches.ONE){case Tf.ROTATE:if(n.enableRotate===!1)return;H(),s=r.TOUCH_ROTATE;break;case Tf.PAN:if(n.enablePan===!1)return;V(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case Tf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;q(),s=r.TOUCH_DOLLY_PAN;break;case Tf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;K(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(ww)}function xe(se){switch(ve(se),s){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;Q(se),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;oe(se),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;L(se),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;z(se),n.update();break;default:s=r.NONE}}function Se(se){n.dispatchEvent(Sw),s=r.NONE}function we(se){n.enabled!==!1&&se.preventDefault()}function ce(se){w.push(se)}function Ee(se){delete b[se.pointerId];for(let be=0;be<w.length;be++)if(w[be].pointerId==se.pointerId){w.splice(be,1);return}}function ve(se){let be=b[se.pointerId];be===void 0&&(be=new ae,b[se.pointerId]=be),be.set(se.pageX,se.pageY)}function Re(se){const be=se.pointerId===w[0].pointerId?w[1]:w[0];return b[be.pointerId]}n.domElement.addEventListener("contextmenu",we),n.domElement.addEventListener("pointerdown",Y),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",re,{passive:!1}),this.update()}}function $Ne(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},o={},a=i[0].morphTargetsRelative,l=new ze;let c=0;for(let h=0;h<i.length;++h){const u=i[h];let d=0;if(t!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const f in u.attributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),e){let f;if(t)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(t){let h=0;const u=[];for(let d=0;d<i.length;++d){const f=i[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+h);h+=i[d].attributes.position.count}l.setIndex(u)}for(const h in s){const u=EB(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(const h in o){const u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){const f=[];for(let m=0;m<o[h].length;++m)f.push(o[h][m][d]);const p=EB(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function EB(i){let e,t,n,r=0;for(let a=0;a<i.length;++a){const l=i[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=l.normalized),n!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}const s=new e(r);let o=0;for(let a=0;a<i.length;++a)s.set(i[a].array,o),o+=i[a].array.length;return new at(s,t,n)}var qNe=Object.create,CP=Object.defineProperty,XNe=Object.getOwnPropertyDescriptor,YNe=Object.getOwnPropertyNames,ZNe=Object.getPrototypeOf,QNe=Object.prototype.hasOwnProperty,DP=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),KNe=(i,e)=>{for(var t in e)CP(i,t,{get:e[t],enumerable:!0})},JNe=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of YNe(e))!QNe.call(i,r)&&r!==t&&CP(i,r,{get:()=>e[r],enumerable:!(n=XNe(e,r))||n.enumerable});return i},PP=(i,e,t)=>(t=i!=null?qNe(ZNe(i)):{},JNe(e||!i||!i.__esModule?CP(t,"default",{value:i,enumerable:!0}):t,i)),eFe=DP((i,e)=>{(function(t,n){typeof i=="object"?e.exports=n():typeof define=="function"&&define.amd?define(n):t.Alea=n()})(i,function(){return t.importState=function(r){var s=new t;return s.importState(r),s},t;function t(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=n();s=c(" "),o=c(" "),a=c(" ");for(var h=0;h<r.length;h++)s-=c(r[h]),s<0&&(s+=1),o-=c(r[h]),o<0&&(o+=1),a-=c(r[h]),a<0&&(a+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(d){s=+d[0]||0,o=+d[1]||0,a=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function n(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),tFe=DP((i,e)=>{(function(t,n){typeof i=="object"&&typeof e<"u"?n(i):typeof define=="function"&&define.amd?define(["exports"],n):n((t=typeof globalThis<"u"?globalThis:t||self).SVDJS={})})(i,function(t){t.SVD=function(n,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!n)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,p,m,y,g,v,x,_=n[0].length,w=n.length;if(w<_)throw new TypeError("Invalid matrix: m < n");for(var b=[],S=[],A=[],E=r==="f"?w:_,T=g=p=0;T<w;T++)S[T]=new Array(E).fill(0);for(T=0;T<_;T++)A[T]=new Array(_).fill(0);var M,C=new Array(_).fill(0);for(T=0;T<w;T++)for(l=0;l<_;l++)S[T][l]=n[T][l];for(T=0;T<_;T++){for(b[T]=p,y=0,h=T+1,l=T;l<w;l++)y+=Math.pow(S[l][T],2);if(y<a)p=0;else for(m=(f=S[T][T])*(p=f<0?Math.sqrt(y):-Math.sqrt(y))-y,S[T][T]=f-p,l=h;l<_;l++){for(y=0,c=T;c<w;c++)y+=S[c][T]*S[c][l];for(f=y/m,c=T;c<w;c++)S[c][l]=S[c][l]+f*S[c][T]}for(C[T]=p,y=0,l=h;l<_;l++)y+=Math.pow(S[T][l],2);if(y<a)p=0;else{for(m=(f=S[T][T+1])*(p=f<0?Math.sqrt(y):-Math.sqrt(y))-y,S[T][T+1]=f-p,l=h;l<_;l++)b[l]=S[T][l]/m;for(l=h;l<w;l++){for(y=0,c=h;c<_;c++)y+=S[l][c]*S[T][c];for(c=h;c<_;c++)S[l][c]=S[l][c]+y*b[c]}}g<(v=Math.abs(C[T])+Math.abs(b[T]))&&(g=v)}if(s)for(T=_-1;0<=T;T--){if(p!==0){for(m=S[T][T+1]*p,l=h;l<_;l++)A[l][T]=S[T][l]/m;for(l=h;l<_;l++){for(y=0,c=h;c<_;c++)y+=S[T][c]*A[c][l];for(c=h;c<_;c++)A[c][l]=A[c][l]+y*A[c][T]}}for(l=h;l<_;l++)A[T][l]=0,A[l][T]=0;A[T][T]=1,p=b[T],h=T}if(r){if(r==="f")for(T=_;T<w;T++){for(l=_;l<w;l++)S[T][l]=0;S[T][T]=1}for(T=_-1;0<=T;T--){for(h=T+1,p=C[T],l=h;l<E;l++)S[T][l]=0;if(p!==0){for(m=S[T][T]*p,l=h;l<E;l++){for(y=0,c=h;c<w;c++)y+=S[c][T]*S[c][l];for(f=y/m,c=T;c<w;c++)S[c][l]=S[c][l]+f*S[c][T]}for(l=T;l<w;l++)S[l][T]=S[l][T]/p}else for(l=T;l<w;l++)S[l][T]=0;S[T][T]=S[T][T]+1}}for(o*=g,c=_-1;0<=c;c--)for(var D=0;D<50;D++){for(M=!1,h=c;0<=h;h--){if(Math.abs(b[h])<=o){M=!0;break}if(Math.abs(C[h-1])<=o)break}if(!M){for(d=0,u=h-(y=1),T=h;T<c+1&&(f=y*b[T],b[T]=d*b[T],!(Math.abs(f)<=o));T++)if(p=C[T],C[T]=Math.sqrt(f*f+p*p),d=p/(m=C[T]),y=-f/m,r)for(l=0;l<w;l++)v=S[l][u],x=S[l][T],S[l][u]=v*d+x*y,S[l][T]=-v*y+x*d}if(x=C[c],h===c){if(x<0&&(C[c]=-x,s))for(l=0;l<_;l++)A[l][c]=-A[l][c];break}for(g=C[h],f=(((v=C[c-1])-x)*(v+x)+((p=b[c-1])-(m=b[c]))*(p+m))/(2*m*v),p=Math.sqrt(f*f+1),f=((g-x)*(g+x)+m*(v/(f<0?f-p:f+p)-m))/g,T=h+(y=d=1);T<c+1;T++){if(p=b[T],v=C[T],m=y*p,p*=d,x=Math.sqrt(f*f+m*m),f=g*(d=f/(b[T-1]=x))+p*(y=m/x),p=-g*y+p*d,m=v*y,v*=d,s)for(l=0;l<_;l++)g=A[l][T-1],x=A[l][T],A[l][T-1]=g*d+x*y,A[l][T]=-g*y+x*d;if(x=Math.sqrt(f*f+m*m),f=(d=f/(C[T-1]=x))*p+(y=m/x)*v,g=-y*p+d*v,r)for(l=0;l<w;l++)v=S[l][T-1],x=S[l][T],S[l][T-1]=v*d+x*y,S[l][T]=-v*y+x*d}b[h]=0,b[c]=f,C[c]=g}for(T=0;T<_;T++)C[T]<o&&(C[T]=0);return{u:S,q:C,v:A}},t.VERSION="1.1.1",Object.defineProperty(t,"__esModule",{value:!0})})}),iFe=DP(i=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||t;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||t;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=d._howls[f]._soundById(p[m]);y&&y._node&&(y._node.volume=y._volume*u)}return d}return d._volume},mute:function(u){var d=this||t;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=d._howls[f]._soundById(p[m]);y&&y._node&&(y._node.muted=u?!0:y._muted)}return d},stop:function(){for(var u=this||t,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||t,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||t)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||t;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/([0-6].)/g),y=m&&parseInt(m[0].split("/")[1],10)<33,g=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,v=p.match(/Version\/(.*?) /),x=g&&v&&parseInt(v[1],10)<15;return u._codecs={mp3:!!(!y&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||t;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var y=u._howls[m]._getSoundIds(),g=0;g<y.length;g++){var v=u._howls[m]._soundById(y[g]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var _=0;_<u._howls.length;_++)u._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||t;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||t;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!t.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var t=new e,n=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};n.prototype={init:function(u){var d=this;return t.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(t.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&t.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,y=0;y<f._sounds.length;y++)f._sounds[y]._paused&&!f._sounds[y]._ended&&(m++,p=f._sounds[y]._id);m===1?u=null:p=null}}var g=p?f._soundById(p):f._inactiveSound();if(!g)return null;if(p&&!u&&(u=g._sprite||"__default"),f._state!=="loaded"){g._sprite=u,g._ended=!1;var v=g._id;return f._queue.push({event:"play",action:function(){f.play(v)}}),v}if(p&&!g._paused)return d||f._loadQueue("play"),g._id;f._webAudio&&t._autoResume();var x=Math.max(0,g._seek>0?g._seek:f._sprite[u][0]/1e3),_=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),w=_*1e3/Math.abs(g._rate),b=f._sprite[u][0]/1e3,S=(f._sprite[u][0]+f._sprite[u][1])/1e3;g._sprite=u,g._ended=!1;var A=function(){g._paused=!1,g._seek=x,g._start=b,g._stop=S,g._loop=!!(g._loop||f._sprite[u][2])};if(x>=S){f._ended(g);return}var E=g._node;if(f._webAudio){var T=function(){f._playLock=!1,A(),f._refreshBuffer(g);var P=g._muted||f._muted?0:g._volume;E.gain.setValueAtTime(P,t.ctx.currentTime),g._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?g._loop?E.bufferSource.noteGrainOn(0,x,86400):E.bufferSource.noteGrainOn(0,x,_):g._loop?E.bufferSource.start(0,x,86400):E.bufferSource.start(0,x,_),w!==1/0&&(f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),w)),d||setTimeout(function(){f._emit("play",g._id),f._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(g._id))}else{var M=function(){E.currentTime=x,E.muted=g._muted||f._muted||t._muted||E.muted,E.volume=g._volume*t.volume(),E.playbackRate=g._rate;try{var P=E.play();if(P&&typeof Promise<"u"&&(P instanceof Promise||typeof P.then=="function")?(f._playLock=!0,A(),P.then(function(){f._playLock=!1,E._unlocked=!0,d?f._loadQueue():f._emit("play",g._id)}).catch(function(){f._playLock=!1,f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):d||(f._playLock=!1,A(),f._emit("play",g._id)),E.playbackRate=g._rate,E.paused){f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||g._loop?f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),w):(f._endTimers[g._id]=function(){f._ended(g),E.removeEventListener("ended",f._endTimers[g._id],!1)},E.addEventListener("ended",f._endTimers[g._id],!1))}catch(I){f._emit("playerror",g._id,I)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=f._src,E.load());var C=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||C)M();else{f._playLock=!0,f._state="loading";var D=function(){f._state="loaded",M(),E.removeEventListener(t._canPlayEvent,D,!1)};E.addEventListener(t._canPlayEvent,D,!1),f._clearTimer(g._id)}}return g._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var m=d._soundById(f[p]);if(m&&!m._paused&&(m._seek=d.seek(f[p]),m._rateSeek=0,m._paused=!0,d._stopFade(f[p]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var y=f._soundById(p[m]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,f._stopFade(p[m]),y._node&&(f._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&f._clearSound(y._node))),d||f._emit("stop",y._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),m=0;m<p.length;m++){var y=f._soundById(p[m]);y&&(y._muted=u,y._interval&&f._stopFade(y._id),f._webAudio&&y._node?y._node.gain.setValueAtTime(u?0:y._volume,t.ctx.currentTime):y._node&&(y._node.muted=t._muted?!0:u),f._emit("mute",y._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var g;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)g=u._soundById(p[v]),g&&(g._volume=f,d[2]||u._stopFade(p[v]),u._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(f,t.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=f*t.volume()),u._emit("volume",g._id))}else return g=p?u._soundById(p):u._sounds[0],g?g._volume:0;return u},fade:function(u,d,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),m.volume(u,p);for(var y=m._getSoundIds(p),g=0;g<y.length;g++){var v=m._soundById(y[g]);if(v){if(p||m._stopFade(y[g]),m._webAudio&&!v._muted){var x=t.ctx.currentTime,_=x+f/1e3;v._volume=u,v._node.gain.setValueAtTime(u,x),v._node.gain.linearRampToValueAtTime(d,_)}m._startFadeInterval(v,u,d,f,y[g],typeof p>"u")}}return m},_startFadeInterval:function(u,d,f,p,m,y){var g=this,v=d,x=f-d,_=Math.abs(x/.01),w=Math.max(4,_>0?p/_:p),b=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var S=(Date.now()-b)/p;b=Date.now(),v+=x*S,v=Math.round(v*100)/100,x<0?v=Math.max(f,v):v=Math.min(f,v),g._webAudio?u._volume=v:g.volume(v,u._id,!0),y&&(g._volume=v),(f<d&&v<=f||f>d&&v>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,g.volume(f,u._id),g._emit("fade",u._id))},w)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var y=u._getSoundIds(p),g=0;g<y.length;g++)m=u._soundById(y[g]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(y[g])&&(u.pause(y[g],!0),u.play(y[g],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var g;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)if(g=u._soundById(p[v]),g){u.playing(p[v])&&(g._rateSeek=u.seek(p[v]),g._playStart=u._webAudio?t.ctx.currentTime:g._playStart),g._rate=f,u._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(f,t.ctx.currentTime):g._node&&(g._node.playbackRate=f);var x=u.seek(p[v]),_=(u._sprite[g._sprite][0]+u._sprite[g._sprite][1])/1e3-x,w=_*1e3/Math.abs(g._rate);(u._endTimers[p[v]]||!g._paused)&&(u._clearTimer(p[v]),u._endTimers[p[v]]=setTimeout(u._ended.bind(u,g),w)),u._emit("rate",g._id)}}else return g=u._soundById(p),g?g._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),y=m.indexOf(d[0]);y>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var g=u._soundById(p);if(g)if(typeof f=="number"&&f>=0){var v=u.playing(p);v&&u.pause(p,!0),g._seek=f,g._ended=!1,u._clearTimer(p),!u._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=f);var x=function(){v&&u.play(p,!0),u._emit("seek",p)};if(v&&!u._webAudio){var _=function(){u._playLock?setTimeout(_,0):x()};setTimeout(_,0)}else x()}else if(u._webAudio){var w=u.playing(p)?t.ctx.currentTime-g._playStart:0,b=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(b+w*Math.abs(g._rate))}else return g._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(t._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),t._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=t._howls.indexOf(u);p>=0&&t._howls.splice(p,1);var m=!0;for(f=0;f<t._howls.length;f++)if(t._howls[f]._src===u._src||u._src.indexOf(t._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],t.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var m=this,y=m["_on"+u];return typeof d=="function"&&y.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),m},off:function(u,d,f){var p=this,m=p["_on"+u],y=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(y=0;y<m.length;y++){var g=f===m[y].id;if(d===m[y].fn&&g||!d&&g){m.splice(y,1);break}}else if(u)p["_on"+u]=[];else{var v=Object.keys(p);for(y=0;y<v.length;y++)v[y].indexOf("_on")===0&&Array.isArray(p[v[y]])&&(p[v[y]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,m=p["_on"+u],y=m.length-1;y>=0;y--)(!m[y].id||m[y].id===d||u==="load")&&(setTimeout(function(g){g.call(this,d,f)}.bind(p,m[y].fn),0),m[y].once&&p.off(u,m[y].fn,m[y].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=t.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),t._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new r(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=t.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,t.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=t._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=t._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),u._node.gain.setValueAtTime(f,t.ctx.currentTime),u._node.paused=!0,u._node.connect(t.masterGain)):t.noAudio||(u._node=t._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(t._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*t.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(t._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var y=new XMLHttpRequest;y.open(u._xhr.method,d,!0),y.withCredentials=u._xhr.withCredentials,y.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(g){y.setRequestHeader(g,u._xhr.headers[g])}),y.onload=function(){var g=(y.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}l(y.response,u)},y.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(y)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&d._sounds.length>0?(s[d._src]=m,c(d,m)):f()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(u).then(p).catch(f):t.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!p&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),typeof i<"u"&&(i.Howler=t,i.Howl=n),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,r=typeof r!="number"?s._pos[2]:r,typeof t=="number")s._pos=[t,n,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(n=typeof n!="number"?c[1]:n,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof t=="number")l._orientation=[t,n,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,n,r,s,o,a);else return c;return l},Howl.prototype.init=function(t){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,s)}}),o;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof t=="number")o._pos=[t,n,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof t=="number")c._pos=[t,n,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(t,n,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof t=="number")c._orientation=[t,n,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(t,n,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,r,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(r=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,t.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}),Ir=class{modifyById(i,e){let t=this;if(t[i]===void 0)throw new Error("not expected");{let n={...t,[i]:e};return Object.setPrototypeOf(n,Ir.prototype),n}}add(i,e){var t;return((t=this.runOp({type:1,id:i,data:e}))==null?void 0:t.data)??this}runOp(i){let e=this;if(i.type===1){let t=e[i.id],n;t===void 0?n={type:2,id:i.id}:n={type:1,id:i.id,data:t};let{id:r,data:s}=i,o={...e,[r]:s};return Object.setPrototypeOf(o,Ir.prototype),{data:o,actual:i,reverse:n}}else if(i.type===2){let{id:t}=i,n=e[t];if(n===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,Ir.prototype),delete r[t],{data:r,actual:i,reverse:{type:1,id:t,data:n}}}}return null}};function LP(i){if(i.deepFreeze!==void 0){i.deepFreeze(i);return}let e=Object.getOwnPropertyNames(i);for(let t of e){let n=i[t];n&&typeof n=="object"&&LP(n)}return Object.freeze(i)}function nFe(i,e){let t=0;for(;t<i.length&&t<e.length;){if(i[t]<e[t])return-1;if(i[t]>e[t])return 1;t+=1}return t!==e.length?-1:t!==i.length?1:0}var dJ=class extends Error{};function Aw(i){let e={...i};return Object.setPrototypeOf(e,Object.getPrototypeOf(i)),e}function hu(i,e,t){if(i===void 0?e===void 0?(i=0,e=10):i=e-10:e===void 0&&(e=i+10),i>e){let s=i;i=e,e=s}let n=[],r=1/(t+1);for(let s=0;s<t;s++){let o=i+(e-i)*(s+.75+Math.random()*.5)*r;n.push(o)}return n}function IP(i){return i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Uint32Array||i instanceof Int8Array||i instanceof Int16Array||i instanceof Int32Array||i instanceof Float32Array||i instanceof Float64Array}function rFe(){return typeof process<"u"}function fJ(i,e){for(let t of i)e(t.id,t.data)!==!0&&fJ(t.children,e)}function pJ(i,e){if(e(i.id,i.data)!==!0)for(let t of i.children)pJ(t,e)}var Fa=class extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,Fa.prototype)}deepFreeze(){let i=0;for(;i<this.length;)LP(this[i]),i++}fillCaches0(i,e){this.objCaches.set(i.id,i),this.parentCaches.set(i.id,e);for(let t of i.children)this.fillCaches0(t,i.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let i of this)this.fillCaches0(i,null)}}randomId(){this.fillCaches();let i=Array.from(this.objCaches.keys());if(i.length!==0)return i[Math.max(0,Math.floor(Math.random()*i.length)-1)]}nonExistOrDescendantOf(i,e){if(!this.has(i))return!0;for(;i;){let t=this.parent(i);if(t===e)return!0;i=t}return!1}isDescendantOf(i,e){for(;i;){let t=this.parent(i);if(t===e)return!0;i=t}return!1}data(i){var e;return(e=this.get(i))==null?void 0:e.data}has(i){return this.childrenOf(i)!==void 0}get(i){return this.fillCaches(),this.objCaches.get(i)}childrenOf(i){var e;return i===null?this:(e=this.get(i))==null?void 0:e.children}traverseFrom(i,e){if(i===null)this.traverse(e);else{let t=this.get(i);t&&pJ(t,e)}}traverse(i){fJ(this,i)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(i){return this.fillCaches(),this.parentCaches.get(i)}childrenArray(i){return i===null?this:this.get(i).children}modifyById(i,e){if(this.get(i)===void 0)throw new Error("not expected");{let t=this.parent(i),n=this.childrenArray(t),r=n.findIndex(o=>o.id===i);if(r<0)throw new Error("not expected");let s=n[r];return n=[...n],n[r]={...s,data:e},this.modifyArrayBy(t,n)}}modifyArrayBy(i,e){let t=i,n=e;for(;t!==null;){let s=n,o=t;if(t=this.parent(t),t===void 0)throw new Error;n=this.childrenArray(t);let a=n.findIndex(l=>l.id===o);if(a<0)throw new Error;n=[...n],n[a]={...n[a],children:s}}Object.setPrototypeOf(n,Fa.prototype);let r=n;return r.fillCaches(),r}runOp(i){switch(i.type){case 7:return this.addOp(i);case 8:return this.deleteOp(i);case 9:return this.moveOp(i)}return null}checkDuplicatedIdRec({id:i,children:e}){if(this.get(i)!==void 0)return!0;for(let t of e)if(this.checkDuplicatedIdRec(t))return!0;return!1}addOp(i){let{parent:e,fi:t,id:n,data:r,children:s}=i;if(e!==null&&this.get(e)===void 0||this.checkDuplicatedIdRec(i))return null;{let o=e,a=this.childrenArray(o),l={fi:t,id:n,data:r,children:s};return a=[...a,l],a.sort((c,h)=>c.fi-h.fi),i.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:i,reverse:{type:8,id:n}}}}deleteOp(i){let{id:e}=i;if(this.get(e)===null)return null;{let t=this.parent(e);if(t===void 0)return null;let n=this.childrenArray(t),r=n.findIndex(o=>o.id===e);i.localIndex=r,n=[...n];let s=n.splice(r,1)[0];return{data:this.modifyArrayBy(t,n),actual:i,reverse:{type:7,...s,parent:t}}}}moveOp(i){let{parent:e,fi:t,id:n}=i;if(e!==null&&this.get(e)===void 0)return this.deleteOp({type:8,id:n});if(e!==null){let u=e;for(;u!==null;){if(u===void 0)throw new Error;if(u===n)throw new dJ("cyclic tree");u=this.parent(u)}}let r=this.parent(n);if(r===void 0)return null;let s=r,o=this.childrenArray(r),a=o.findIndex(u=>u.id===n);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(r,o);r=e,o=c.childrenArray(r);let h=l.fi;return l={...l,fi:t},o=[...o,l],o.sort((u,d)=>u.fi-d.fi),i.localIndex=o.indexOf(l),c=c.modifyArrayBy(r,o),{data:c,actual:i,reverse:{type:9,parent:s,fi:h,id:n}}}previous(i,e){if(e===null){let n=this.childrenArray(i);return n.length===0?null:n[n.length-1].id}let t=null;for(let n of this.childrenArray(i)){if(n.id===e)return t;t=n.id}return null}traverseSortNext(i){let e=this.parent(i);if(e!==void 0){let t=this.childrenArray(e),n=t.findIndex(r=>r.id===i)+1;if(n<t.length)return t[n].id;if(e)return this.traverseSortNext(e)}}sortNext(i){let e=this.childrenArray(i);return e.length>0?e[0].id:this.traverseSortNext(i)}traverseSortPrevious(i){let e=this.childrenArray(i);return e.length>0?this.traverseSortPrevious(e[e.length-1].id):i}sortPrevious(i){let e=this.parent(i);if(e!==void 0){let t=this.childrenArray(e),n=t.findIndex(r=>r.id===i)-1;return n>=0?this.traverseSortPrevious(t[n].id):e}}getAllSorted(i){let e=[];for(let t of i){let n=this.getWithSortKey(t.id);n!==void 0&&e.push({...t,...n})}e.sort((t,n)=>nFe(t.sortKey,n.sortKey));for(let t of e)delete t.sortKey;return e}getWithSortKey(i){var e=i;let t=[],n=this.get(e),r=n;if(n!==void 0){for(;e;)t.splice(0,0,n.fi),e=this.parent(e),e!==null&&(n=this.get(e));return{...r,sortKey:t}}}insertBeforeHelper(i,e,t){return this.insertAfterHelper(i,this.previous(i,e),t)}insertAfterHelper(i,e,t){let n=this.childrenArray(i);if(e===null){if(n.length===0)return hu(0,t,t);{let r=n[0].fi;return hu(r-t,r,t)}}else{let r=this.get(e);if(r===void 0||this.parent(e)!==i)throw new Error("illegal args");let s=n.find(o=>o.fi>r.fi);if(s===void 0){let o=n[n.length-1].fi;return hu(o,o+t,t)}else return hu(r.fi,s.fi,t)}}},g8;(i=>{function e(t,n){if(n.type!==0)return null;if(Array.isArray(t)){let r=n.props,s={},o=[...t],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:n,reverse:{type:0,props:s}}:null}else{let r=n.props,s={},o={...t},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:n,reverse:{type:0,props:s}}:null}}i.runOp=e})(g8||(g8={}));var Pn=class extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,Pn.prototype)}deepFreeze(){let i=0;for(;i<this.length;)LP(this[i]),i++}fillCaches0(i){this.objCaches.set(i.id,i)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let i of this)this.fillCaches0(i)}}randomId(){this.fillCaches();let i=Array.from(this.objCaches.keys());if(i.length!==0)return i[Math.max(0,Math.floor(Math.random()*i.length)-1)]}data(i){var e;return(e=this.get(i))==null?void 0:e.data}get(i){return this.fillCaches(),this.objCaches.get(i)}modifyById(i,e){if(this.get(i)===void 0)throw new Error("not expected");{let t=this,n=t.findIndex(s=>s.id===i);if(n<0)throw new Error("not expected");let r=t[n];return t=[...t],t[n]={...r,data:e},this.modifyArrayBy(t)}}modifyArrayBy(i){Object.setPrototypeOf(i,Pn.prototype);let e=i;return rFe()||e.fillCaches(),e}runOp(i){switch(i.type){case 4:return this.addOp(i);case 5:return this.deleteOp(i);case 6:return this.moveOp(i)}return null}addOp(i){let{fi:e,id:t,data:n}=i,r=this,s={fi:e,id:t,data:n};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),i.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:i,reverse:{type:5,id:t}}}deleteOp(i){let{id:e}=i,t=this,n=t.findIndex(s=>s.id===e);if(n===-1)return null;i.localIndex=n,t=[...t];let r=t.splice(n,1)[0];return{data:this.modifyArrayBy(t),actual:i,reverse:{type:4,...r}}}moveOp(i){let{fi:e,id:t}=i,n=this;n=[...n];let r=n.findIndex(a=>a.id===t);if(r===-1)return null;let s=n[r].fi,o={...n[r],fi:e};return n[r]=o,n.sort((a,l)=>a.fi-l.fi),i.localIndex=n.indexOf(o),{data:this.modifyArrayBy(n),actual:i,reverse:{type:6,fi:s,id:t}}}previous(i){if(i===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let t of this){if(t.id===i)return e;e=t.id}return null}insertBeforeHelper(i,e){return this.insertAfterHelper(this.previous(i),e)}insertAfterHelper(i,e){let t=this;if(i===null){if(t.length===0)return hu(0,e,e);{let n=t[0].fi;return hu(n-e,n,e)}}else{let n=this.get(i);if(n===void 0)throw new Error("illegal args");let r=t.find(s=>s.fi>n.fi);if(r===void 0){let s=t[t.length-1].fi;return hu(s,s+e,e)}else return hu(n.fi,r.fi,e)}}};function Q1(i){return i&&typeof i=="object"&&i instanceof Os}var Os=class{unusedFunOverridesTable(i){}runOp(i){let e=[],t=this,n=0,r={};for(;n<i.path.length;){if(e.push(t),t=t===void 0?void 0:t[i.path[n]],t!==void 0&&!Q1(t))return null;n+=1}t=t?Aw(t):new Os;for(let[a,l]of Object.entries(i.props)){let c=t[a];r[a]=c,l===void 0?delete t[a]:t[a]=l}for(;n>0;){if(Object.keys(t).length===0){let a=e[n-1];a&&(t=Aw(a),delete t[i.path[n-1]])}else{let a=e[n-1];if(a){let l=Aw(a);l[i.path[n-1]]=t,t=l}else{let l=new Os;l[i.path[n-1]]=t,t=l}}n-=1}let s=Object.setPrototypeOf(t,Os.prototype),o={...i,props:r};return{data:s,actual:i,reverse:o}}},Pd;(i=>{function e(r,s){return m3(r,s)??r}i.apply=e;function t(r,s){return RP(r,s)}i.merge=t;function n(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=k0.zoomOnce(l,a[o]),l===void 0)return s;if(!Q1(l))return;o+=1}if(l===void 0)return s;if(Q1(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=OP([s],l);return c?(console.log(c),c):s}else return s}i.filterOp=n})(Pd||(Pd={}));function OP(i,e){if(e===void 0)return;let t=!1,n=i.map(r=>{let s=r.id,o=m3(r.data,e[s]);if(t=t||o!==void 0,o===void 0&&(o=r.data),r.children){let a=OP(r.children,e);return a!==void 0?t=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(t)return n}function sFe(i,e){if(e===void 0)return;let t=!1,n=i.map(r=>{let s=r.id,o=m3(r.data,e[s]);return t=t||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(t)return Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n}function m3(i,e){if(!Q1(e))return e;if(i instanceof Fa){let t=OP(i,e);return t!==void 0&&Object.setPrototypeOf(t,Object.getPrototypeOf(i)),t}else{if(i instanceof Pn)return sFe(i,e);if(Array.isArray(i)){let t=!1,n=i.map((r,s)=>{let o=m3(r,e[s]);return t=t||o!==void 0,o===void 0&&(o=r),o});return t?(Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n):void 0}else{if(i instanceof Os)return RP(i,e);if(i&&typeof i=="object"){let t={},n=!1;for(let[r,s]of Object.entries(i)){let o=m3(s,e[r]);n=n||o!==void 0,o===void 0&&(o=s),t[r]=o}return n?(Object.setPrototypeOf(t,Object.getPrototypeOf(i)),t):void 0}}}}function RP(i,e){if(i===void 0)return e;if(e===void 0)return i;if(!Q1(e))return e;if(!Q1(i))return Pd.apply(i,e);let t=new Set;for(let r of Object.keys(i))t.add(r);for(let r of Object.keys(e))t.add(r);let n=new Os;for(let r of t){let s=RP(i===void 0?void 0:i[r],e===void 0?void 0:e[r]);n[r]=s}return n}function oFe(i,e){let t={cur:[],result:[],len:0};return i=g3(i,e,t)??i,[i,t.result]}function v8(i,e){return i===null?null:(i.cur[i.len]=e,i.len+=1,i)}function y8(i){i&&(i.len-=1)}function aFe(i){if(i===null)return null;i.result.push(i.cur.slice(0,i.len))}function mJ(i,e,t){let n=!1,r=i.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(n=!0,o=a,t!==null))throw new Error("not supported");let l=g3(s.data,e,v8(t,o));y8(t),n=n||l!==void 0,l===void 0&&(l=s.data);let c=mJ(s.children,e,t);return c!==void 0?n=!0:c=s.children,{...s,id:o,data:l,children:c}});if(n)return r}function lFe(i,e,t){let n=!1,r=i.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(n=!0,o=a,t!==null))throw new Error("not supported");let l=g3(s.data,e,v8(t,o));return y8(t),n=n||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(n)return Object.setPrototypeOf(r,Object.getPrototypeOf(i)),r}function g3(i,e,t){if(i instanceof Fa){let n=mJ(i,e,t);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n}else{if(i instanceof Pn)return lFe(i,e,t);if(Array.isArray(i)){let n=!1,r=i.map((s,o)=>{let a=g3(s,e,v8(t,o));return y8(t),n=n||a!==void 0,a===void 0&&(a=s),a});return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(i)),r):void 0}else if(i&&typeof i=="object"&&!IP(i)){let n={},r=!1;for(let[s,o]of Object.entries(i))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(t!==null)throw new Error("not supported");r=!0,s=a}let l=g3(o,e,v8(t,s));y8(t),r=r||l!==void 0,l===void 0&&(l=o),n[s]=l}else n[s]=o;return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(i)),n):void 0}else if(typeof i=="string"){let n=e[i];if(n!==void 0){if(i.length!==36)throw new Error("for now you should only call this method when the key is a uuid");aFe(t)}return n}else return}}var WT;(i=>{function e(t,n){let r=k0.zoom(n,t.path);if(typeof r=="object"){let s={};for(let o of Object.keys(t.props))s[o]=r[o];return{...t,props:s}}else return{...t,props:{}}}i.replaceProps=e})(WT||(WT={}));var io;(i=>{function e(l,c){return{...l,path:l.path.slice(c)}}i.drop=e;function t(l,c){var h;return((h=n(l,c))==null?void 0:h.data)??l}i.applySimple=t;function n(l,c){var d,f;let h=c.path;for(var u=[];;){let p;if(l instanceof Os&&c.type===0&&(p=l.runOp({...c,path:h.slice(u.length)}),p===null&&(p=void 0)),u.length===h.length&&(l instanceof Fa||l instanceof Pn||l instanceof Ir?p=l.runOp(c):p=g8.runOp(l,c)),p!==void 0)if(p!==null){let g=p.data;for(let v=u.length-1;v>=0;v--){let x=h[v],_=u[v];if(_ instanceof Fa){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Pn){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Ir){if(typeof x=="number")throw new Error("illegal arg");g=_.modifyById(x,g)}else if(_ instanceof Os){let w={..._,[x]:g};g=Object.setPrototypeOf(w,Os.prototype)}else if(typeof _=="object")if(Array.isArray(_)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let w=g;g=[..._],g[x]=w}else g={..._,[x]:g};else return null}return{data:g,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let m=h[u.length],y;if(l instanceof Fa){if(typeof m=="number")throw new Error("");y=(d=l.get(m))==null?void 0:d.data}else if(l instanceof Pn){if(typeof m=="number")throw new Error("");y=(f=l.get(m))==null?void 0:f.data}else l!==null&&(y=l[m]);if(y!==void 0)u.push(l),l=y;else return null}}i.apply=n;function r(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}i.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}i.pathEq=s;function o(l,c){return r(l.path,c.path)}i.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}i.subsumed=a})(io||(io={}));var CB;(i=>{function e(){return[]}i.empty=e;function t(c,h){let u=[];for(let d of c){let[f,...p]=d.path;f===h&&u.push({...d,path:p})}return u}i.removePrefix=t;function n(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}i.addPrefix=n;function r(c,h){return[...c,...h]}i.concat=r;function s(c,h){return[...c.filter(u=>!h.some(d=>io.subsumed(u,d))),...h]}i.compress=s;function o(c,h){return c.every(u=>h.every(d=>io.commutative(u,d)))}i.commutative=o;function a(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}i.applyAll=a;function l(c,h){var u=c;let d=[],f=[];for(let p of h)try{if(p.type===3){let m=k0.zoom(u,[...p.path,p.id]),y=io.apply(u,{...p,type:2});if(y!==null){u=y.data;let[g,v]=oFe(u,{[p.id]:m});u=g;for(let x of v){let _=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[_]:m}}),f.push({type:0,path:x,props:{[_]:p.id}})}f.push(y.reverse),d.push(y.actual)}}else{let m=io.apply(u,p);m!==null&&(d.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof dJ)return null;throw m}return{data:u,actual:d,reverse:f.reverse()}}i.apply=l})(CB||(CB={}));var gJ=Symbol(),cFe=Symbol(),w7=Symbol(),fy=class{reportOp(i,e,t=[]){let n=this;if(e===null)return;n._current=e.data;let r=t;for(;!(n instanceof yJ);){let s=n._path,o=n._current;if(s!==""&&r.splice(0,0,s),n=n._parent,n===null)return;n.update(s,o)}n.push(r,i,e.actual,e.reverse)}deleteChildren(i){if(this._children){let e=this._children[i];if(e){let t=e[w7];t&&t(),delete this._children[i]}}}},uFe=class extends fy{constructor(i,e,t){super(),this._parent=i,this._path=e,this._current=t}update(i,e){if(Array.isArray(this._current)){if(typeof i=="string"&&(i=parseInt(i),isNaN(i)))throw new Error("Invalid path");this._current=[...this._current],this._current[i]=e}else this._current={...this._current,[i]:e}}runOp(i){this.reportOp(i,g8.runOp(this._current,i),i.path)}},hFe=class extends fy{constructor(i,e,t){super(),this._parent=i,this._path=e,this._current=t}update(i,e){this._current={...this._current,[i]:e},Object.setPrototypeOf(this._current,Ir.prototype)}runOp(i){this.reportOp(i,this._current.runOp(i))}},vJ={get(i,e){if(e===w7)return()=>{i._parent=null};if(e===gJ)return i._current;if(e===cFe)return i;let{_current:t,_children:n}=i;if(e==="push"&&Array.isArray(t))throw new Error("not supported to expand array");let r=n===void 0?void 0:n[e];if(r!==void 0)return r;let s=t[e],o=S7(i,e,s);return o!==s?(n===void 0&&(n={},i._children=n),n[e]=o,o):s},has(i,e){return e in i._current},ownKeys(i){return Reflect.ownKeys(i._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(i){return Object.getPrototypeOf(i._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(i,e){let t=i._current,n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:t[e]}}},dFe={...vJ,set(i,e,t){let n={type:0,props:{[e]:mFe(t)??t}};return i.deleteChildren(e),i.runOp(n),!0},deleteProperty(i,e){let t={type:0,props:{[e]:void 0}};return i.deleteChildren(e),i.runOp(t),!0}},fFe={...vJ,set(i,e,t){return t===void 0?this.deleteProperty(i,e):(i.deleteChildren(e),i.runOp({type:1,id:e,data:t})),!0},deleteProperty(i,e){return i.runOp({type:2,id:e}),!0}},NP=class extends fy{constructor(i,e,t){super(),this._children={},this._parent=i,this._path=e,this._current=t,this[w7]=()=>{this._parent=null}}unproxy(){return this._current}update(i,e){this._current=this._current.modifyById(i,e)}runOp(i){this.reportOp(i,this._current.runOp(i))}randomId(){return this._current.randomId()}isDescendantOf(i,e){return this._current.isDescendantOf(i,e)}childrenOf(i){return this._current.childrenOf(i)}traverse(i){return this._current.traverse(i)}get(i){return this._current.get(i)}parent(i){return this._current.parent(i)}traverse(i){this._current.traverse((e,t)=>{i(e,this.data(e))})}data(i){var o;let{_current:e,_children:t}=this,n=t===void 0?void 0:t[i];if(n!==void 0)return n;let r=(o=e.get(i))==null?void 0:o.data,s=S7(this,i,r);return s!==r?(t===void 0&&(t={},this._children=t),t[i]=s,s):r}add(i,e,t,n,r){this.runOp({type:7,parent:i,fi:e,id:t,data:n,children:r})}move(i,e,t){this.runOp({type:9,parent:i,fi:e,id:t})}insertAfter(i,e,t){let n=this._current.insertAfterHelper(i,e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(i,n[r],s.id,s.data,s.children)}}insertBefore(i,e,t){let n=this._current.insertBeforeHelper(i,e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(i,n[r],s.id,s.data,s.children)}}moveAfter(i,e,t){let n=this._current.insertAfterHelper(i,e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(i,n[r],s)}}moveBefore(i,e,t){let n=this._current.insertBeforeHelper(i,e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(i,n[r],s)}}delete(i){this.deleteChildren(i),this.runOp({type:8,id:i})}sortNext(i){return this._current.sortNext(i)}sortPrevious(i){return this._current.sortPrevious(i)}getAllSorted(i){return this._current.getAllSorted(i)}},FP=class extends fy{constructor(i,e,t){super(),this._children={},this._parent=i,this._path=e,this._current=t,this[w7]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(i){let e=this.length;for(let t=0;t<e;t++){let n=this._current[t].id,r=this._current[t].fi;i(this.data(this._current[t].id),n,r)}}find(i){let e=this.length;for(let t=0;t<e;t++){let n=this._current[t].id;if(i(this.data(n),n))return this.get(n)}}update(i,e){this._current=this._current.modifyById(i,e)}randomId(){return this._current.randomId()}get(i){return{...this._current.get(i),data:this.data(i)}}data(i){var o;let{_current:e,_children:t}=this,n=t===void 0?void 0:t[i];if(n!==void 0)return n;let r=(o=e.get(i))==null?void 0:o.data,s=S7(this,i,r);return s!==r?(t===void 0&&(t={},this._children=t),t[i]=s,s):r}runOp(i){this.reportOp(i,this._current.runOp(i))}add(i,e,t){this.runOp({type:4,fi:i,id:e,data:t})}move(i,e){this.runOp({type:6,fi:i,id:e})}insertAfter(i,e){let t=this._current.insertAfterHelper(i,e.length);for(let n=0;n<e.length;n++){let r=e[n];this.add(t[n],r.id,r.data)}}insertBefore(i,e){let t=this._current.insertBeforeHelper(i,e.length);for(let n=0;n<e.length;n++){let r=e[n];this.add(t[n],r.id,r.data)}}moveAfter(i,e){let t=this._current.insertAfterHelper(i,e.length);for(let n=0;n<e.length;n++){let r=e[n];this.move(t[n],r)}}moveBefore(i,e){let t=this._current.insertBeforeHelper(i,e.length);for(let n=0;n<e.length;n++){let r=e[n];this.move(t[n],r)}}delete(i){this.deleteChildren(i),this.runOp({type:5,id:i})}};function Tw(i,e,t){if(i.length>0){let n=i[i.length-1];if(n.type===0&&e.type===0&&k0.equal(n.path,t)){Object.assign(n.props,e.props);return}}i.push({...e,path:t})}var yJ=class extends fy{constructor(i){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=i}update(i,e){if(i!=="")throw new Error("");this._current=e}push(i,e,t,n){Tw(this.ts,e,i),Tw(this.actual,t,i),Tw(this.reverse,n,i)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function S7(i,e,t){return t instanceof Fa?new NP(i,e,t):t instanceof Pn?new FP(i,e,t):t instanceof Ir?new Proxy(new hFe(i,e,t),fFe):t!==null&&typeof t=="object"?IP(t)?t:new Proxy(new uFe(i,e,t),dFe):t}function pFe(i){let e=new yJ(i);return[S7(e,"",i),e]}function x8(i,e){let[t,n]=pFe(i);return e(t),n.result()}function mFe(i){return i instanceof NP||i instanceof FP?i._current:i!==null&&typeof i=="object"?i[gJ]:i}var k0;(i=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}i.equal=e;function t(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}i.removeOverridden=t;function n(s,o){if((s instanceof Fa||s instanceof NP)&&typeof o=="string"||(s instanceof Pn||s instanceof FP)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}i.zoomOnce=n;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=n(s,o[a]),a+=1;return s}i.zoom=r})(k0||(k0={}));function gFe(i,e){let t=[];if(e.length===i.length)for(var n=0;n<i.length;){if(e[n]==="*")t.push(i[n]);else if(i[n]!==e[n])return null;n+=1}else return null;return t}function Jc(i,e){let t=[];if(e.length<=i.length)for(var n=0;n<e.length;){if(e[n]==="*")t.push(i[n]);else if(i[n]!==e[n])return null;n+=1}else return null;return t}var xJ=class{},DB=class extends xJ{constructor(i){super(),this.id=i}},PB=class extends xJ{constructor(i){super(),this.data=i}},$T;try{$T=new TextDecoder}catch{}var Ve,Iu,de=0,Ss={},Xt,du,To=0,x0=0,Xs,Hl,ds=[],ti,LB={useRecords:!1,mapsAsObjects:!0},_J=class{},bJ=new _J;bJ.name="MessagePack 0xC1";var K1=!1,_8=class{constructor(i){i&&(i.useRecords===!1&&i.mapsAsObjects===void 0&&(i.mapsAsObjects=!0),i.structures?i.structures.sharedLength=i.structures.length:i.getStructures&&((i.structures=[]).uninitialized=!0,i.structures.sharedLength=0)),Object.assign(this,i)}unpack(i,e){if(Ve)return EJ(()=>(XT(),this?this.unpack(i,e):_8.prototype.unpack.call(LB,i,e)));Iu=e>-1?e:i.length,de=0,x0=0,du=null,Xs=null,Ve=i;try{ti=i.dataView||(i.dataView=new DataView(i.buffer,i.byteOffset,i.byteLength))}catch(t){throw Ve=null,i instanceof Uint8Array?t:new Error("Source must be a Uint8Array or Buffer but was a "+(i&&typeof i=="object"?i.constructor.name:typeof i))}if(this instanceof _8){if(Ss=this,this.structures)return Xt=this.structures,A4();(!Xt||Xt.length>0)&&(Xt=[])}else Ss=LB,(!Xt||Xt.length>0)&&(Xt=[]);return A4()}unpackMultiple(i,e){let t,n=0;try{K1=!0;let r=i.length,s=this?this.unpack(i,r):T7.unpack(i,r);if(e){for(e(s);de<r;)if(n=de,e(A4())===!1)return}else{for(t=[s];de<r;)n=de,t.push(A4());return t}}catch(r){throw r.lastPosition=n,r.values=t,r}finally{K1=!1,XT()}}_mergeStructures(i,e){i=i||[];for(let t=0,n=i.length;t<n;t++){let r=i[t];r&&(r.isShared=!0,t>=32&&(r.highByte=t-32>>5))}i.sharedLength=i.length;for(let t in e||[])if(t>=0){let n=i[t],r=e[t];r&&(n&&((i.restoreStructures||(i.restoreStructures=[]))[t]=n),i[t]=r)}return this.structures=i}decode(i,e){return this.unpack(i,e)}};function A4(){try{if(!Ss.trusted&&!K1){let e=Xt.sharedLength||0;e<Xt.length&&(Xt.length=e)}let i=rn();if(de==Iu)Xt.restoreStructures&&IB(),Xt=null,Ve=null,Hl&&(Hl=null);else if(de>Iu){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!K1)throw new Error("Data read, but end of buffer not reached");return i}catch(i){throw Xt.restoreStructures&&IB(),XT(),(i instanceof RangeError||i.message.startsWith("Unexpected end of buffer"))&&(i.incomplete=!0),i}}function IB(){for(let i in Xt.restoreStructures)Xt[i]=Xt.restoreStructures[i];Xt.restoreStructures=null}function rn(){let i=Ve[de++];if(i<160)if(i<128){if(i<64)return i;{let e=Xt[i&63]||Ss.getStructures&&wJ()[i&63];return e?(e.read||(e.read=zP(e,i&63)),e.read()):i}}else if(i<144)if(i-=128,Ss.mapsAsObjects){let e={};for(let t=0;t<i;t++)e[AJ()]=rn();return e}else{let e=new Map;for(let t=0;t<i;t++)e.set(rn(),rn());return e}else{i-=144;let e=new Array(i);for(let t=0;t<i;t++)e[t]=rn();return e}else if(i<192){let e=i-160;if(x0>=de)return du.slice(de-To,(de+=e)-To);if(x0==0&&Iu<140){let t=e<16?kP(e):SJ(e);if(t!=null)return t}return qT(e)}else{let e;switch(i){case 192:return null;case 193:return Xs?(e=rn(),e>0?Xs[1].slice(Xs.position1,Xs.position1+=e):Xs[0].slice(Xs.position0,Xs.position0-=e)):bJ;case 194:return!1;case 195:return!0;case 196:return Mw(Ve[de++]);case 197:return e=ti.getUint16(de),de+=2,Mw(e);case 198:return e=ti.getUint32(de),de+=4,Mw(e);case 199:return Ih(Ve[de++]);case 200:return e=ti.getUint16(de),de+=2,Ih(e);case 201:return e=ti.getUint32(de),de+=4,Ih(e);case 202:if(e=ti.getFloat32(de),Ss.useFloat32>2){let t=BP[(Ve[de]&127)<<1|Ve[de+1]>>7];return de+=4,(t*e+(e>0?.5:-.5)>>0)/t}return de+=4,e;case 203:return e=ti.getFloat64(de),de+=8,e;case 204:return Ve[de++];case 205:return e=ti.getUint16(de),de+=2,e;case 206:return e=ti.getUint32(de),de+=4,e;case 207:return Ss.int64AsNumber?(e=ti.getUint32(de)*4294967296,e+=ti.getUint32(de+4)):e=ti.getBigUint64(de),de+=8,e;case 208:return ti.getInt8(de++);case 209:return e=ti.getInt16(de),de+=2,e;case 210:return e=ti.getInt32(de),de+=4,e;case 211:return Ss.int64AsNumber?(e=ti.getInt32(de)*4294967296,e+=ti.getUint32(de+4)):e=ti.getBigInt64(de),de+=8,e;case 212:if(e=Ve[de++],e==114)return zB(Ve[de++]&63);{let t=ds[e];if(t)return t.read?(de++,t.read(rn())):t.noBuffer?(de++,t()):t(Ve.subarray(de,++de));throw new Error("Unknown extension "+e)}case 213:return e=Ve[de],e==114?(de++,zB(Ve[de++]&63,Ve[de++])):Ih(2);case 214:return Ih(4);case 215:return Ih(8);case 216:return Ih(16);case 217:return e=Ve[de++],x0>=de?du.slice(de-To,(de+=e)-To):yFe(e);case 218:return e=ti.getUint16(de),de+=2,x0>=de?du.slice(de-To,(de+=e)-To):xFe(e);case 219:return e=ti.getUint32(de),de+=4,x0>=de?du.slice(de-To,(de+=e)-To):_Fe(e);case 220:return e=ti.getUint16(de),de+=2,RB(e);case 221:return e=ti.getUint32(de),de+=4,RB(e);case 222:return e=ti.getUint16(de),de+=2,NB(e);case 223:return e=ti.getUint32(de),de+=4,NB(e);default:if(i>=224)return i-256;if(i===void 0){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+i)}}}var vFe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function zP(i,e){function t(){if(t.count++>2){let r=i.read=new Function("r","return function(){return {"+i.map(s=>vFe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(rn);return i.highByte===0&&(i.read=OB(e,i.read)),r()}let n={};for(let r=0,s=i.length;r<s;r++){let o=i[r];n[o]=rn()}return n}return t.count=0,i.highByte===0?OB(e,t):t}var OB=(i,e)=>function(){let t=Ve[de++];if(t===0)return e();let n=i<32?-(i+(t<<5)):i+(t<<5),r=Xt[n]||wJ()[n];if(!r)throw new Error("Record id is not defined for "+n);return r.read||(r.read=zP(r,i)),r.read()};function wJ(){let i=EJ(()=>(Ve=null,Ss.getStructures()));return Xt=Ss._mergeStructures(i,Xt)}var qT=A7,yFe=A7,xFe=A7,_Fe=A7;function A7(i){let e;if(i<16&&(e=kP(i)))return e;if(i>64&&$T)return $T.decode(Ve.subarray(de,de+=i));let t=de+i,n=[];for(e="";de<t;){let r=Ve[de++];if(!(r&128))n.push(r);else if((r&224)===192){let s=Ve[de++]&63;n.push((r&31)<<6|s)}else if((r&240)===224){let s=Ve[de++]&63,o=Ve[de++]&63;n.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=Ve[de++]&63,o=Ve[de++]&63,a=Ve[de++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l)}else n.push(r);n.length>=4096&&(e+=rr.apply(String,n),n.length=0)}return n.length>0&&(e+=rr.apply(String,n)),e}function RB(i){let e=new Array(i);for(let t=0;t<i;t++)e[t]=rn();return e}function NB(i){if(Ss.mapsAsObjects){let e={};for(let t=0;t<i;t++)e[AJ()]=rn();return e}else{let e=new Map;for(let t=0;t<i;t++)e.set(rn(),rn());return e}}var rr=String.fromCharCode;function SJ(i){let e=de,t=new Array(i);for(let n=0;n<i;n++){let r=Ve[de++];if((r&128)>0){de=e;return}t[n]=r}return rr.apply(String,t)}function kP(i){if(i<4)if(i<2){if(i===0)return"";{let e=Ve[de++];if((e&128)>1){de-=1;return}return rr(e)}}else{let e=Ve[de++],t=Ve[de++];if((e&128)>0||(t&128)>0){de-=2;return}if(i<3)return rr(e,t);let n=Ve[de++];if((n&128)>0){de-=3;return}return rr(e,t,n)}else{let e=Ve[de++],t=Ve[de++],n=Ve[de++],r=Ve[de++];if((e&128)>0||(t&128)>0||(n&128)>0||(r&128)>0){de-=4;return}if(i<6){if(i===4)return rr(e,t,n,r);{let s=Ve[de++];if((s&128)>0){de-=5;return}return rr(e,t,n,r,s)}}else if(i<8){let s=Ve[de++],o=Ve[de++];if((s&128)>0||(o&128)>0){de-=6;return}if(i<7)return rr(e,t,n,r,s,o);let a=Ve[de++];if((a&128)>0){de-=7;return}return rr(e,t,n,r,s,o,a)}else{let s=Ve[de++],o=Ve[de++],a=Ve[de++],l=Ve[de++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){de-=8;return}if(i<10){if(i===8)return rr(e,t,n,r,s,o,a,l);{let c=Ve[de++];if((c&128)>0){de-=9;return}return rr(e,t,n,r,s,o,a,l,c)}}else if(i<12){let c=Ve[de++],h=Ve[de++];if((c&128)>0||(h&128)>0){de-=10;return}if(i<11)return rr(e,t,n,r,s,o,a,l,c,h);let u=Ve[de++];if((u&128)>0){de-=11;return}return rr(e,t,n,r,s,o,a,l,c,h,u)}else{let c=Ve[de++],h=Ve[de++],u=Ve[de++],d=Ve[de++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){de-=12;return}if(i<14){if(i===12)return rr(e,t,n,r,s,o,a,l,c,h,u,d);{let f=Ve[de++];if((f&128)>0){de-=13;return}return rr(e,t,n,r,s,o,a,l,c,h,u,d,f)}}else{let f=Ve[de++],p=Ve[de++];if((f&128)>0||(p&128)>0){de-=14;return}if(i<15)return rr(e,t,n,r,s,o,a,l,c,h,u,d,f,p);let m=Ve[de++];if((m&128)>0){de-=15;return}return rr(e,t,n,r,s,o,a,l,c,h,u,d,f,p,m)}}}}}function Mw(i){return Ss.copyBuffers?Uint8Array.prototype.slice.call(Ve,de,de+=i):Ve.subarray(de,de+=i)}function Ih(i){let e=Ve[de++];if(ds[e])return ds[e](Ve.subarray(de,de+=i));throw new Error("Unknown extension type "+e)}var FB=new Array(4096);function AJ(){let i=Ve[de++];if(i>=160&&i<192){if(i=i-160,x0>=de)return du.slice(de-To,(de+=i)-To);if(!(x0==0&&Iu<180))return qT(i)}else return de--,rn();let e=(i<<5^(i>1?ti.getUint16(de):i>0?Ve[de]:0))&4095,t=FB[e],n=de,r=de+i-3,s,o=0;if(t&&t.bytes==i){for(;n<r;){if(s=ti.getUint32(n),s!=t[o++]){n=1879048192;break}n+=4}for(r+=3;n<r;)if(s=Ve[n++],s!=t[o++]){n=1879048192;break}if(n===r)return de=n,t.string;r-=3,n=de}for(t=[],FB[e]=t,t.bytes=i;n<r;)s=ti.getUint32(n),t.push(s),n+=4;for(r+=3;n<r;)s=Ve[n++],t.push(s);let a=i<16?kP(i):SJ(i);return a!=null?t.string=a:t.string=qT(i)}var zB=(i,e)=>{var t=rn();let n=i;e!==void 0&&(i=i<32?-((e<<5)+i):(e<<5)+i,t.highByte=e);let r=Xt[i];return r&&r.isShared&&((Xt.restoreStructures||(Xt.restoreStructures=[]))[i]=r),Xt[i]=t,t.read=zP(t,n),t.read()},TJ=typeof self=="object"?self:global;ds[0]=()=>{};ds[0].noBuffer=!0;ds[101]=()=>{let i=rn();return(TJ[i[0]]||Error)(i[1])};ds[105]=i=>{let e=ti.getUint32(de-4);Hl||(Hl=new Map);let t=Ve[de],n;t>=144&&t<160||t==220||t==221?n=[]:n={};let r={target:n};Hl.set(e,r);let s=rn();return r.used?Object.assign(n,s):(r.target=s,s)};ds[112]=i=>{let e=ti.getUint32(de-4),t=Hl.get(e);return t.used=!0,t.target};ds[115]=()=>new Set(rn());var MJ=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(i=>i+"Array");ds[116]=i=>{let e=i[0],t=MJ[e];if(!t)throw new Error("Could not find typed array for code "+e);return new TJ[t](Uint8Array.prototype.slice.call(i,1).buffer)};ds[120]=()=>{let i=rn();return new RegExp(i[0],i[1])};ds[98]=i=>{let e=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3],t=de;de+=e-4,Xs=[rn(),rn()],Xs.position0=0,Xs.position1=0;let n=de;de=t;try{return rn()}finally{de=n}};ds[255]=i=>i.length==4?new Date((i[0]*16777216+(i[1]<<16)+(i[2]<<8)+i[3])*1e3):i.length==8?new Date(((i[0]<<22)+(i[1]<<14)+(i[2]<<6)+(i[3]>>2))/1e6+((i[3]&3)*4294967296+i[4]*16777216+(i[5]<<16)+(i[6]<<8)+i[7])*1e3):i.length==12?new Date(((i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3])/1e6+((i[4]&128?-281474976710656:0)+i[6]*1099511627776+i[7]*4294967296+i[8]*16777216+(i[9]<<16)+(i[10]<<8)+i[11])*1e3):new Date("invalid");function EJ(i){let e=Iu,t=de,n=To,r=x0,s=du,o=Hl,a=Xs,l=new Uint8Array(Ve.slice(0,Iu)),c=Xt,h=Xt.slice(0,Xt.length),u=Ss,d=K1,f=i();return Iu=e,de=t,To=n,x0=r,du=s,Hl=o,Xs=a,Ve=l,K1=d,Xt=c,Xt.splice(0,Xt.length,...h),Ss=u,ti=new DataView(Ve.buffer,Ve.byteOffset,Ve.byteLength),f}function XT(){Ve=null,Hl=null,Xt=null}function bFe(i){i.unpack?ds[i.type]=i.unpack:ds[i.type]=i}var BP=new Array(147);for(let i=0;i<256;i++)BP[i]=+("1e"+Math.floor(45.15-i*.30103));var T7=new _8({useRecords:!1});T7.unpack;T7.unpackMultiple;T7.unpack;var wFe=new Float32Array(1);new Uint8Array(wFe.buffer,0,4);var P5;try{P5=new TextEncoder}catch{}var b8,UP,M7=typeof Buffer<"u",Ew=M7?Buffer.allocUnsafeSlow:Uint8Array,CJ=M7?Buffer:Uint8Array,kB=M7?4294967296:2144337920,Me,Sn,ge=0,e0,t0=null,SFe=/[\u0080-\uFFFF]/,Hg=Symbol("record-id"),DJ=class extends _8{constructor(i){super(i),this.offset=0;let e,t,n,r,s,o=0,a=CJ.prototype.utf8Write?function(b,S,A){return Me.utf8Write(b,S,A)}:P5&&P5.encodeInto?function(b,S){return P5.encodeInto(b,Me.subarray(S)).written}:!1,l=this;i||(i={});let c=i&&i.sequential,h=i.structures||i.saveStructures,u=i.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=i.maxOwnStructures;d==null&&(d=h?32:64),c&&!i.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,p=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],g=0,v=0;this.pack=this.encode=function(b,S){if(Me||(Me=new Ew(8192),Sn=new DataView(Me.buffer,0,8192),ge=0),e0=Me.length-10,e0-ge<2048?(Me=new Ew(Me.length),Sn=new DataView(Me.buffer,0,Me.length),e0=Me.length-10,ge=0):ge=ge+7&2147483640,e=ge,s=l.structuredClone?new Map:null,l.bundleStrings?(t0=["",""],Me[ge++]=214,Me[ge++]=98,t0.position=ge-e,ge+=4):t0=null,t=l.structures,t){t.uninitialized&&(t=l._mergeStructures(l.getStructures()));let A=t.sharedLength||0;if(A>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+t.sharedLength);if(!t.transitions){t.transitions=Object.create(null);for(let E=0;E<A;E++){let T=t[E];if(!T)continue;let M,C=t.transitions;for(let D=0,P=T.length;D<P;D++){let I=T[D];M=C[I],M||(M=C[I]=Object.create(null)),C=M}C[Hg]=E+64}o=A}c||(t.nextId=A+64)}n&&(n=!1),r=t||[];try{if(x(b),t0){Sn.setUint32(t0.position+e,ge-t0.position-e);let A=t0;t0=null,x(A[0]),x(A[1])}if(l.offset=ge,s&&s.idsToInsert){ge+=s.idsToInsert.length*6,ge>e0&&w(ge),l.offset=ge;let A=TFe(Me.subarray(e,ge),s.idsToInsert);return s=null,A}return S&MFe?(Me.start=e,Me.end=ge,Me):Me.subarray(e,ge)}finally{if(t){if(v<10&&v++,g>1e4)t.transitions=null,v=0,g=0,y.length>0&&(y=[]);else if(y.length>0&&!c){for(let A=0,E=y.length;A<E;A++)y[A][Hg]=0;y=[]}if(n&&l.saveStructures){let A=t.sharedLength||u;t.length>A&&(t=t.slice(0,A));let E=Me.subarray(e,ge);return l.saveStructures(t,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(o=A,E)}}S&EFe&&(ge=e)}};let x=b=>{ge>e0&&(Me=w(ge));var S=typeof b,A;if(S==="string"){let E=b.length;if(t0&&E>=8&&E<4096){let C=SFe.test(b);t0[C?0:1]+=b,Me[ge++]=193,x(C?-E:E);return}let T;E<32?T=1:E<256?T=2:E<65536?T=3:T=5;let M=E*3;if(ge+M>e0&&(Me=w(ge+M)),E<64||!a){let C,D,P,I=ge+T;for(C=0;C<E;C++)D=b.charCodeAt(C),D<128?Me[I++]=D:D<2048?(Me[I++]=D>>6|192,Me[I++]=D&63|128):(D&64512)===55296&&((P=b.charCodeAt(C+1))&64512)===56320?(D=65536+((D&1023)<<10)+(P&1023),C++,Me[I++]=D>>18|240,Me[I++]=D>>12&63|128,Me[I++]=D>>6&63|128,Me[I++]=D&63|128):(Me[I++]=D>>12|224,Me[I++]=D>>6&63|128,Me[I++]=D&63|128);A=I-ge-T}else A=a(b,ge+T,M);A<32?Me[ge++]=160|A:A<256?(T<2&&Me.copyWithin(ge+2,ge+1,ge+1+A),Me[ge++]=217,Me[ge++]=A):A<65536?(T<3&&Me.copyWithin(ge+3,ge+2,ge+2+A),Me[ge++]=218,Me[ge++]=A>>8,Me[ge++]=A&255):(T<5&&Me.copyWithin(ge+5,ge+3,ge+3+A),Me[ge++]=219,Sn.setUint32(ge,A),ge+=4),ge+=A}else if(S==="number")if(b>>>0===b)b<64?Me[ge++]=b:b<256?(Me[ge++]=204,Me[ge++]=b):b<65536?(Me[ge++]=205,Me[ge++]=b>>8,Me[ge++]=b&255):(Me[ge++]=206,Sn.setUint32(ge,b),ge+=4);else if(b>>0===b)b>=-32?Me[ge++]=256+b:b>=-128?(Me[ge++]=208,Me[ge++]=b+256):b>=-32768?(Me[ge++]=209,Sn.setInt16(ge,b),ge+=2):(Me[ge++]=210,Sn.setInt32(ge,b),ge+=4);else{let E;if((E=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){Me[ge++]=202,Sn.setFloat32(ge,b);let T;if(E<4||(T=b*BP[(Me[ge]&127)<<1|Me[ge+1]>>7])>>0===T){ge+=4;return}else ge--}Me[ge++]=203,Sn.setFloat64(ge,b),ge+=8}else if(S==="object")if(!b)Me[ge++]=192;else{if(s){let T=s.get(b);if(T){if(!T.id){let M=s.idsToInsert||(s.idsToInsert=[]);T.id=M.push(T)}Me[ge++]=214,Me[ge++]=112,Sn.setUint32(ge,T.id),ge+=4;return}else s.set(b,{offset:ge-e})}let E=b.constructor;if(E===Object)_(b,!0);else if(E===Array){A=b.length,A<16?Me[ge++]=144|A:A<65536?(Me[ge++]=220,Me[ge++]=A>>8,Me[ge++]=A&255):(Me[ge++]=221,Sn.setUint32(ge,A),ge+=4);for(let T=0;T<A;T++)x(b[T])}else if(E===Map){A=b.size,A<16?Me[ge++]=128|A:A<65536?(Me[ge++]=222,Me[ge++]=A>>8,Me[ge++]=A&255):(Me[ge++]=223,Sn.setUint32(ge,A),ge+=4);for(let[T,M]of b)x(T),x(M)}else{for(let T=0,M=b8.length;T<M;T++){let C=UP[T];if(b instanceof C){let D=b8[T];if(D.write){D.type&&(Me[ge++]=212,Me[ge++]=D.type,Me[ge++]=0),x(D.write.call(this,b));return}let P=Me,I=Sn,k=ge;Me=null;let G;try{G=D.pack.call(this,b,U=>(Me=P,P=null,ge+=U,ge>e0&&w(ge),{target:Me,targetView:Sn,position:ge-U}),x)}finally{P&&(Me=P,Sn=I,ge=k,e0=Me.length-10)}G&&(G.length+ge>e0&&w(G.length+ge),ge=AFe(G,Me,ge,D.type));return}}_(b,!b.hasOwnProperty)}}else if(S==="boolean")Me[ge++]=b?195:194;else if(S==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))Me[ge++]=211,Sn.setBigInt64(ge,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)Me[ge++]=207,Sn.setBigUint64(ge,b);else if(this.largeBigIntToFloat)Me[ge++]=203,Sn.setFloat64(ge,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ge+=8}else if(S==="undefined")this.encodeUndefinedAsNil?Me[ge++]=192:(Me[ge++]=212,Me[ge++]=0,Me[ge++]=0);else if(S==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},_=this.useRecords===!1?this.variableMapSize?b=>{let S=Object.keys(b),A=S.length;A<16?Me[ge++]=128|A:A<65536?(Me[ge++]=222,Me[ge++]=A>>8,Me[ge++]=A&255):(Me[ge++]=223,Sn.setUint32(ge,A),ge+=4);let E;for(let T=0;T<A;T++)x(E=S[T]),x(b[E])}:(b,S)=>{Me[ge++]=222;let A=ge-e;ge+=2;let E=0;for(let T in b)(S||b.hasOwnProperty(T))&&(x(T),x(b[T]),E++);Me[A+++e]=E>>8,Me[A+e]=E&255}:b=>{let S=Object.keys(b),A,E=r.transitions||(r.transitions=Object.create(null)),T=0;for(let C=0,D=S.length;C<D;C++){let P=S[C];A=E[P],A||(A=E[P]=Object.create(null),T++),E=A}let M=E[Hg];if(M)M>=96&&f?(Me[ge++]=((M-=96)&31)+96,Me[ge++]=M>>5):Me[ge++]=M;else{M=r.nextId,M||(M=64),M<p&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(M=r.nextOwnId,M<m||(M=p),r.nextOwnId=M+1):(M>=m&&(M=p),r.nextId=M+1);let C=S.highByte=M>=96&&f?M-96>>5:-1;E[Hg]=M,r[M-64]=S,M<p?(S.isShared=!0,r.sharedLength=M-63,n=!0,C>=0?(Me[ge++]=(M&31)+96,Me[ge++]=C):Me[ge++]=M):(C>=0?(Me[ge++]=213,Me[ge++]=114,Me[ge++]=(M&31)+96,Me[ge++]=C):(Me[ge++]=212,Me[ge++]=114,Me[ge++]=M),T&&(g+=v*T),y.length>=d&&(y.shift()[Hg]=0),y.push(E),x(S))}for(let C=0,D=S.length;C<D;C++)x(b[S[C]])},w=b=>{let S;if(b>16777216){if(b-e>kB)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(kB,Math.round(Math.max((b-e)*(b>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(b-e<<2,Me.length-1)>>12)+1<<12;let A=new Ew(S);return Sn=new DataView(A.buffer,0,S),Me.copy?Me.copy(A,0,e,b):A.set(Me.slice(e,b)),ge-=e,e=0,e0=A.length-10,Me=A}}useBuffer(i){Me=i,Sn=new DataView(Me.buffer,Me.byteOffset,Me.byteLength),ge=0}};UP=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,_J];b8=[{pack(i,e,t){let n=i.getTime()/1e3;if((this.useTimestamp32||i.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,n)}else if(n>0&&n<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,i.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),t(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,i.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(i,e,t){let n=Array.from(i),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),t(n)}},{pack(i,e,t){let{target:n,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=101,n[r++]=0),t([i.name,i.message])}},{pack(i,e,t){let{target:n,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=120,n[r++]=0),t([i.source,i.flags])}},{pack(i,e){this.structuredClone?BB(i,16,e):UB(M7?Buffer.from(i):new Uint8Array(i),e)}},{pack(i,e){let t=i.constructor;t!==CJ&&this.structuredClone?BB(i,MJ.indexOf(t.name),e):UB(i,e)}},{pack(i,e){let{target:t,position:n}=e(1);t[n]=193}}];function BB(i,e,t,n){let r=i.byteLength;if(r+1<256){var{target:s,position:o}=t(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=t(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=t(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(i.buffer,i.byteOffset,i.byteLength),o)}function UB(i,e){let t=i.byteLength;var n,r;if(t<256){var{target:n,position:r}=e(t+2);n[r++]=196,n[r++]=t}else if(t<65536){var{target:n,position:r}=e(t+3);n[r++]=197,n[r++]=t>>8,n[r++]=t&255}else{var{target:n,position:r,targetView:s}=e(t+5);n[r++]=198,s.setUint32(r,t),r+=4}n.set(i,r)}function AFe(i,e,t,n){let r=i.length;switch(r){case 1:e[t++]=212;break;case 2:e[t++]=213;break;case 4:e[t++]=214;break;case 8:e[t++]=215;break;case 16:e[t++]=216;break;default:r<256?(e[t++]=199,e[t++]=r):r<65536?(e[t++]=200,e[t++]=r>>8,e[t++]=r&255):(e[t++]=201,e[t++]=r>>24,e[t++]=r>>16&255,e[t++]=r>>8&255,e[t++]=r&255)}return e[t++]=n,e.set(i,t),t+=r,t}function TFe(i,e){let t,n=e.length*6,r=i.length-n;for(e.sort((s,o)=>s.offset>o.offset?1:-1);t=e.pop();){let s=t.offset,o=t.id;i.copyWithin(s+n,s,r),n-=6;let a=s+n;i[a++]=214,i[a++]=105,i[a++]=o>>24,i[a++]=o>>16&255,i[a++]=o>>8&255,i[a++]=o&255,r=s}return i}function km(i){if(i.Class){if(!i.pack&&!i.write)throw new Error("Extension has no pack or write function");if(i.pack&&!i.type)throw new Error("Extension has no type (numeric code to identify the extension)");UP.unshift(i.Class),b8.unshift(i)}bFe(i)}var PJ=new DJ({useRecords:!1});PJ.pack;PJ.pack;var MFe=512,EFe=1024,VB=new DJ({structuredClone:!0});km({Class:Ir.prototype.constructor,type:1,write(i){return{...i}},read(i){return Object.setPrototypeOf(i,Ir.prototype),i}});km({Class:Pn.prototype.constructor,type:2,write(i){return[...i]},read(i){return Object.setPrototypeOf(i,Pn.prototype),i}});km({Class:Fa.prototype.constructor,type:3,write(i){return[...i]},read(i){return Object.setPrototypeOf(i,Fa.prototype),i}});km({Class:DB.prototype.constructor,type:4,write(i){return i.id},read(i){return new DB(i)}});km({Class:PB.prototype.constructor,type:5,write(i){return i.data},read(i){return new PB(i)}});km({Class:Os.prototype.constructor,type:6,write(i){return{...i}},read(i){return Object.setPrototypeOf(i,Os.prototype),i}});function CFe(i){var e=0;if(i.length===0)return e;for(let t=0;t<i.length;t++){let n=i[t];e=(e<<5)-e+n,e=e&e}return e}function YT(i){if(IP(i))return i;if(Array.isArray(i))return i.map(YT);if(typeof i=="object"&&i!==null){let e={};for(let t of Object.keys(i).sort())e[t]=YT(i[t]);return Object.setPrototypeOf(e,Object.getPrototypeOf(i)),e}else return i}var GB;(i=>{function e(r){return VB.pack(r)}i.serialize=e;function t(r){return VB.unpack(r)}i.deserialize=t;function n(r){return CFe(e(YT(r))).toString()}i.checksum=n})(GB||(GB={}));var jB;(i=>{function e(n,r){return n[0]===r[0]&&n[1]===r[1]}i.isEqual=e;function t(n,r,s){return[n[0]+(r[0]-n[0])*s,n[1]+(r[1]-n[1])*s]}i.lerp=t})(jB||(jB={}));var h1;(i=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}i.isEqual=e;function t(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}i.add=t;function n(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}i.sub=n;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}i.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}i.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}i.dist=o;function a(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}i.lerp=a})(h1||(h1={}));var HB;(i=>{function e(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}i.isEqual=e;function t(n,r,s){return[n[0]+(r[0]-n[0])*s,n[1]+(r[1]-n[1])*s,n[2]+(r[2]-n[2])*s,n[3]+(r[3]-n[3])*s]}i.lerp=t})(HB||(HB={}));var J1;(i=>{i.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}i.isEqual=e;function t(r){return r??i.identity}i.simplify=t;function n(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}i.applyMatrix4=n})(J1||(J1={}));var No;(i=>{function e(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}i.isRGB=e,i.white={r:1,g:1,b:1},i.red={r:1,g:0,b:0},i.black={r:0,g:0,b:0};function t(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}i.toRgb255a1=t;function n(a){return{r:a.r,g:a.g,b:a.b}}i.clone=n;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}i.fromHex=r;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}i.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}i.lerp=o})(No||(No={}));var kl;(i=>{i.white={...No.white,a:1},i.transparent={...No.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}i.from0to1=e;function t(o,a){return{...No.fromHex(o),a}}i.fromHexAndA=t;function n(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}i.toRgb255a1=n;function r(o,a){return No.equals(o,a)&&o.a===a.a}i.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}i.lerp=s})(kl||(kl={}));var ZT;(i=>i.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(ZT||(ZT={}));var WB;(i=>i.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(WB||(WB={}));var $B;(i=>i.defaultData={control1:[.5,.05],control2:[.1,.3]})($B||($B={}));var Yd;(i=>{i.all=["PerspectiveCamera","OrthographicCamera"];function e(t){return i.all.includes(t)}i.is=e})(Yd||(Yd={}));var v3;(i=>{i.DefaultUp=[0,1,0],i.DefaultTargetOffset=1e3,i.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:i.DefaultUp,isUpVectorFlipped:!1,targetOffset:i.DefaultTargetOffset};function e(t){return t.type==="PerspectiveCamera"?t.perspective.zoom:t.orthographic.zoom}i.getZoom=e})(v3||(v3={}));var fu;(i=>{function e(n,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(n[0],n[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[n[0]+n[0]*r,0,0]},grid:{count:[2,2,2],size:n.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}i.defaultData=e;function t(n,r){let s={...n};if(DFe.forEach(o=>{Object.assign(s,{[o]:r[o]??n[o]})}),s.radial={...n.radial},r.radial){let o=n.radial,a=r.radial;PFe.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...n.linear},r.linear){let o=n.linear,a=r.linear;LFe.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...n.grid},r.grid){let o=n.grid,a=r.grid;IFe.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...n.toObject},r.toObject){let o=n.toObject,a=r.toObject;OFe.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...n.randomnessObject},r.randomnessObject){let o=n.randomnessObject,a=r.randomnessObject;RFe.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}i.merge=t})(fu||(fu={}));var QT;(i=>{i.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function t(n,r){let s=[];n.count!==void 0&&s.push({type:0,path:r,props:{count:n.count}});for(let o of e){let a=n[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}i.toOps=t})(QT||(QT={}));var DFe=["count"],PFe=["radius","start","end","position","scale","rotation"],LFe=["position","scale","rotation"],IFe=["count","size"],OFe=["count","position","scale","rotation"],RFe=["strength","scale","rotation","position","movement","seed","freqScale"],KT;(i=>{i.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(t){return i.all.includes(t)}i.is=e})(KT||(KT={}));var JT;(i=>{function e(n){return t(n)}i.defaultData=e;function t(n){if(n==="PointLight")return{type:n,color:kl.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(n==="SpotLight")return{type:n,color:kl.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(n==="DirectionalLight")return{type:n,color:kl.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(JT||(JT={}));var eM;(i=>{i.defaultData={castShadow:!0,receiveShadow:!0};function e(t,n){return t.castShadow===n.castShadow&&t.receiveShadow===n.receiveShadow}i.equals=e})(eM||(eM={}));var tM;(i=>{i.defaultData={flatShading:!1,wireframe:!1,side:0};function e(t,n){return t.flatShading===n.flatShading&&t.side===n.side&&t.wireframe===n.wireframe}i.equals=e})(tM||(tM={}));var iM;(i=>i.defaultData={...tM.defaultData,...eM.defaultData})(iM||(iM={}));var w8;(i=>(i.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},i.maxSize=3e7))(w8||(w8={}));var ba;(i=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}i.patch=e;function t(s,o){return s==="light"&&o?n(o):r(s)}i.defaultData=t;function n(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:w8.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:No.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...No.fromHex(6710886),a:1},colorB:{...No.fromHex(6710886),a:1},colorC:{...No.fromHex(16777215),a:1},colorD:{...No.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:kl.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:kl.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:kl.fromHexAndA(0,1),contourColor:kl.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(ba||(ba={}));var Ld;(i=>{function e(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}i.isMergable=e;function t(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}i.getHash=t;function n(){return{layers:new Pn}}i.defaultEmptyData=n;function r(c="layer1",h="layer2"){return o("phong",c,h)}i.defaultData=r;function s(c,h){return{...c,name:h}}i.withName=s;function o(c,h="layer1",u="layer2"){let d=new Pn;return d.push({fi:0,data:ba.defaultData("light",c),id:h}),d.push({fi:1,data:ba.defaultData("color"),id:u}),{layers:d}}i.defaultTwoLayerData=o;function a(c,h="phong",u="layer1",d="layer2"){let f=ba.defaultData("texture");Object.assign(f.texture,{image:c});let p=new Pn;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:ba.defaultData("light",h),id:d}),{layers:p}}i.defaultTwoLayerTextureData=a;function l(c,h="phong",u="layer1",d="layer2"){let f=ba.defaultData("video");Object.assign(f.texture,{video:c});let p=new Pn;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:ba.defaultData("light",h),id:d}),{layers:p}}i.defaultTwoLayerVideoTextureData=l})(Ld||(Ld={}));var S8;(i=>{function e(){return{points:new Pn,roundness:0,shapeHoles:[],isClosed:!1}}i.defaultData=e})(S8||(S8={}));var A8;(i=>{function e(){return{points:new Pn,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}i.defaultData=e})(A8||(A8={}));var LJ={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},nM;(i=>{function e(t,n){let r={...t};return NFe.forEach(s=>{Object.assign(r,{[s]:n[s]??t[s]})}),r}i.merge=e})(nM||(nM={}));var IJ={shape:LJ,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},NFe=["depth","offset","angle","twist","startScale","endScale"],T8;(i=>{function e(t){return t==="PolygonGeometry"||t==="RectangleGeometry"||t==="StarGeometry"||t==="TriangleGeometry"||t==="EllipseGeometry"}i.is2DParametricMesh=e})(T8||(T8={}));var rM;(i=>{function e(t,n){let r={...t};return Object.assign(r,n),r.type==="PathGeometry"&&"extrusion"in n&&n.extrusion&&(r.extrusion={...t.extrusion},Object.assign(r.extrusion,nM.merge(r.extrusion,n.extrusion))),r}i.merge=e})(rM||(rM={}));var hv;(i=>{function e(t){if(t==="RectangleGeometry")return{width:320,height:320,type:t,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(t==="PathGeometry")return{type:t,width:1,height:1,depth:1,path:A8.defaultData(),extrusion:IJ};if(t==="VectorGeometry")return{width:1,height:1,type:t,subdivisions:12,shape:S8.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(t==="BooleanGeometry")return{type:t,operation:2,width:0,height:0,depth:0,phongAngle:35};if(t==="TextGeometry")return{type:t,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}i.defaultData=e})(hv||(hv={}));var qB;(i=>{function e(n){return n==="Component"||n==="Instance"}i.isComponentRelated=e;function t(n){return n==="Empty"||n==="Instance"}i.isEmptyOrComponent=t})(qB||(qB={}));var em;(i=>{i.identity={...ZT.identity,hiddenMatrix:J1.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}i.fromObject=e;function t(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}i.merge=t;function n(r,s){return{position:h1.isEqual(r.position,s.position)?null:s.position,rotation:h1.isEqual(r.rotation,s.rotation)?null:s.rotation,scale:h1.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:J1.isEqual(r.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}i.diff=n})(em||(em={}));var sM;(i=>i.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(sM||(sM={}));var za;(i=>i.defaultData={states:new Pn,events:new Pn,visible:!0,raycastLock:!1,physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...em.identity,cloner:null})(za||(za={}));var XB;(i=>i.defaultData={type:"Empty",...za.defaultData})(XB||(XB={}));var YB;(i=>i.defaultData={type:"Component",...za.defaultData})(YB||(YB={}));var dv;(i=>i.defaultData={type:"Mesh",...za.defaultData,...iM.defaultData})(dv||(dv={}));var M8;(i=>i.defaultData={...za.defaultData,...em.identity,...v3.defaultData})(M8||(M8={}));var ZB;(i=>{function e(t){return{...za.defaultData,...JT.defaultData(t)}}i.defaultData=e})(ZB||(ZB={}));var E8;(i=>{function e(n,r,s=0){for(;s<r.length;){let o=n?n[r[s]]:void 0;if(r.length===s+1)return o;if(o)n=o.descendants,s+=1;else return}}i.resolveWithDes=e;function t(n,r,s=0){let o=e(n,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}i.resolve=t})(E8||(E8={}));var tm;(i=>{i.rootOverrideProps=["physics"],i.compositeNonOptionalOverrideProps=["geometry"],i.compositeEntireOverrideOverrideProps=["material"];function e(n,r){return{...za.defaultData,...r,component:n,overrides:new Os,physics:void 0,type:"Instance"}}i.ofComponent=e;function t(n){let r=em.fromObject(n.data);return e(n.id,r)}i.fromComponentData=t})(tm||(tm={}));var QB;(i=>(i.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:J1.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:sM.defaultData,states:new Pn,events:new Pn,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...v3.defaultData},i.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},i.defaultMeshObject={name:"Rectangle",...za.defaultData,...dv.defaultData,geometry:hv.defaultData("RectangleGeometry"),material:Ld.defaultTwoLayerData("phong","layer1","layer2")},i.defaultBooleanObject={name:"Boolean",...za.defaultData,...dv.defaultData,geometry:hv.defaultData("BooleanGeometry"),material:Ld.defaultTwoLayerData("phong","layer1","layer2")},i.defaultTextObject={name:"Text",...za.defaultData,...dv.defaultData,geometry:hv.defaultData("TextGeometry"),material:Ld.defaultTwoLayerData("phong","layer1","layer2")}))(QB||(QB={}));var Gp;(i=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new Os}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new Os})))):Yd.is(s.type)&&(a.perspective={},a.orthographic={}),a}i.newEmpty=e;function t(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=x8(a.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&ba.patch(u,h)}}).data),a.materials&&o.materials&&(a.materials=x8(a.materials,l=>{var c,h;for(let u=0;u<a.materials.length;u++){let d=o.materials[u];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let m=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(f);m&&ba.patch(m,p)}}}).data),a}function n(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:m,...y}=p;if(m!==void 0&&Object.keys(m).length>0){let g={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(g)}if(Object.keys(y).length>0){let g={path:[...u,"layers",f],props:y,type:0};l.push(g)}}}for(let[u,d]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...QT.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=d;return l}i.toOps=n;function r(s,o){var l,c,h;if(o===void 0)return s;let a={...s};if(Object.assign(a,em.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??a.pathSnapping.slide})}),Yd.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let u=o;((c=u.orthographic)==null?void 0:c.zoom)!==void 0&&(a.orthographic.zoom=u.orthographic.zoom),((h=u.perspective)==null?void 0:h.zoom)!==void 0&&(a.perspective.zoom=u.perspective.zoom),u.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=u.isUpVectorFlipped),u.targetOffset!==void 0&&(a.targetOffset=u.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:rM.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=t(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:fu.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:fu.merge(a.cloner,o.cloner)});else if(KT.is(s.type)){let u=o;u.intensity!==void 0&&(a.intensity=u.intensity),u.color!==void 0&&(typeof u.color=="string"?a.color=u.color:a.color=No.clone(u.color))}return a}i.patch=r})(Gp||(Gp={}));var oM;(i=>i.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(oM||(oM={}));var KB;(i=>i.defaultData={orbitControls:oM.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,hideCursor:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:typeof window<"u"?Math.floor(window.devicePixelRatio):1,stopMode:"manual",duration:5e3},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,t)=>{let n=0,r=0;return t<5?r=-30:t<10&&(r=30),t===0||t===10||t===5?n=30:(t===4||t===11||t===9)&&(n=-30),[120,[n,r],"show"]}),gameControlObject:null})(KB||(KB={}));function OJ(i,e){return Object.setPrototypeOf(i,e),i}function RJ(i){return Array.isArray(i)?i:[i]}function FFe(i,e){let t=0;for(;t<i.length&&t<e.length;){if(i[t]<e[t])return-1;if(i[t]>e[t])return 1;t+=1}return t!==e.length?-1:t!==i.length?1:0}var aM;(i=>{function e(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},OJ(n,Ir.prototype)}i.defaultColors=e;function t(){return{materials:new Ir,images:new Ir,videos:new Ir,colors:new Ir,audios:new Ir,fonts:new Ir,penumbraSize:[.5,.5,.5]}}i.emptyData=t})(aM||(aM={}));var zFe=typeof global=="object"&&global&&global.Object===Object&&global,NJ=zFe,kFe=typeof self=="object"&&self&&self.Object===Object&&self,BFe=NJ||kFe||Function("return this")(),tl=BFe,UFe=tl.Symbol,Jo=UFe,FJ=Object.prototype,VFe=FJ.hasOwnProperty,GFe=FJ.toString,Wg=Jo?Jo.toStringTag:void 0;function jFe(i){var e=VFe.call(i,Wg),t=i[Wg];try{i[Wg]=void 0;var n=!0}catch{}var r=GFe.call(i);return n&&(e?i[Wg]=t:delete i[Wg]),r}var HFe=jFe,WFe=Object.prototype,$Fe=WFe.toString;function qFe(i){return $Fe.call(i)}var XFe=qFe,YFe="[object Null]",ZFe="[object Undefined]",JB=Jo?Jo.toStringTag:void 0;function QFe(i){return i==null?i===void 0?ZFe:YFe:JB&&JB in Object(i)?HFe(i):XFe(i)}var gf=QFe;function KFe(i){return i!=null&&typeof i=="object"}var oc=KFe,JFe="[object Symbol]";function eze(i){return typeof i=="symbol"||oc(i)&&gf(i)==JFe}var VP=eze;function tze(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var zJ=tze,ize=Array.isArray,q0=ize,nze=1/0,eU=Jo?Jo.prototype:void 0,tU=eU?eU.toString:void 0;function kJ(i){if(typeof i=="string")return i;if(q0(i))return zJ(i,kJ)+"";if(VP(i))return tU?tU.call(i):"";var e=i+"";return e=="0"&&1/i==-nze?"-0":e}var rze=kJ;function sze(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Zd=sze;function oze(i){return i}var aze=oze,lze="[object AsyncFunction]",cze="[object Function]",uze="[object GeneratorFunction]",hze="[object Proxy]";function dze(i){if(!Zd(i))return!1;var e=gf(i);return e==cze||e==uze||e==lze||e==hze}var BJ=dze,fze=tl["__core-js_shared__"],Cw=fze,iU=function(){var i=/[^.]+$/.exec(Cw&&Cw.keys&&Cw.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function pze(i){return!!iU&&iU in i}var mze=pze,gze=Function.prototype,vze=gze.toString;function yze(i){if(i!=null){try{return vze.call(i)}catch{}try{return i+""}catch{}}return""}var vf=yze,xze=/[\\^$.*+?()[\]{}|]/g,_ze=/^\[object .+?Constructor\]$/,bze=Function.prototype,wze=Object.prototype,Sze=bze.toString,Aze=wze.hasOwnProperty,Tze=RegExp("^"+Sze.call(Aze).replace(xze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mze(i){if(!Zd(i)||mze(i))return!1;var e=BJ(i)?Tze:_ze;return e.test(vf(i))}var Eze=Mze;function Cze(i,e){return i==null?void 0:i[e]}var Dze=Cze;function Pze(i,e){var t=Dze(i,e);return Eze(t)?t:void 0}var yf=Pze,Lze=yf(tl,"WeakMap"),lM=Lze,nU=Object.create,Ize=function(){function i(){}return function(e){if(!Zd(e))return{};if(nU)return nU(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),Oze=Ize;function Rze(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var Nze=Rze;function Fze(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var zze=Fze,kze=800,Bze=16,Uze=Date.now;function Vze(i){var e=0,t=0;return function(){var n=Uze(),r=Bze-(n-t);if(t=n,r>0){if(++e>=kze)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var Gze=Vze;function jze(i){return function(){return i}}var Hze=jze,Wze=function(){try{var i=yf(Object,"defineProperty");return i({},"",{}),i}catch{}}(),C8=Wze,$ze=C8?function(i,e){return C8(i,"toString",{configurable:!0,enumerable:!1,value:Hze(e),writable:!0})}:aze,qze=$ze,Xze=Gze(qze),Yze=Xze;function Zze(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var Qze=Zze,Kze=9007199254740991,Jze=/^(?:0|[1-9]\d*)$/;function eke(i,e){var t=typeof i;return e=e??Kze,!!e&&(t=="number"||t!="symbol"&&Jze.test(i))&&i>-1&&i%1==0&&i<e}var GP=eke;function tke(i,e,t){e=="__proto__"&&C8?C8(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var UJ=tke;function ike(i,e){return i===e||i!==i&&e!==e}var jP=ike,nke=Object.prototype,rke=nke.hasOwnProperty;function ske(i,e,t){var n=i[e];(!(rke.call(i,e)&&jP(n,t))||t===void 0&&!(e in i))&&UJ(i,e,t)}var HP=ske;function oke(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n?n(t[a],i[a],a,t,i):void 0;l===void 0&&(l=i[a]),r?UJ(t,a,l):HP(t,a,l)}return t}var py=oke,rU=Math.max;function ake(i,e,t){return e=rU(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,s=rU(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=t(o),Nze(i,this,a)}}var lke=ake,cke=9007199254740991;function uke(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=cke}var WP=uke;function hke(i){return i!=null&&WP(i.length)&&!BJ(i)}var VJ=hke,dke=Object.prototype;function fke(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||dke;return i===t}var $P=fke;function pke(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var mke=pke,gke="[object Arguments]";function vke(i){return oc(i)&&gf(i)==gke}var sU=vke,GJ=Object.prototype,yke=GJ.hasOwnProperty,xke=GJ.propertyIsEnumerable,_ke=sU(function(){return arguments}())?sU:function(i){return oc(i)&&yke.call(i,"callee")&&!xke.call(i,"callee")},qP=_ke;function bke(){return!1}var wke=bke,jJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oU=jJ&&typeof module=="object"&&module&&!module.nodeType&&module,Ske=oU&&oU.exports===jJ,aU=Ske?tl.Buffer:void 0,Ake=aU?aU.isBuffer:void 0,Tke=Ake||wke,D8=Tke,Mke="[object Arguments]",Eke="[object Array]",Cke="[object Boolean]",Dke="[object Date]",Pke="[object Error]",Lke="[object Function]",Ike="[object Map]",Oke="[object Number]",Rke="[object Object]",Nke="[object RegExp]",Fke="[object Set]",zke="[object String]",kke="[object WeakMap]",Bke="[object ArrayBuffer]",Uke="[object DataView]",Vke="[object Float32Array]",Gke="[object Float64Array]",jke="[object Int8Array]",Hke="[object Int16Array]",Wke="[object Int32Array]",$ke="[object Uint8Array]",qke="[object Uint8ClampedArray]",Xke="[object Uint16Array]",Yke="[object Uint32Array]",Ri={};Ri[Vke]=Ri[Gke]=Ri[jke]=Ri[Hke]=Ri[Wke]=Ri[$ke]=Ri[qke]=Ri[Xke]=Ri[Yke]=!0;Ri[Mke]=Ri[Eke]=Ri[Bke]=Ri[Cke]=Ri[Uke]=Ri[Dke]=Ri[Pke]=Ri[Lke]=Ri[Ike]=Ri[Oke]=Ri[Rke]=Ri[Nke]=Ri[Fke]=Ri[zke]=Ri[kke]=!1;function Zke(i){return oc(i)&&WP(i.length)&&!!Ri[gf(i)]}var Qke=Zke;function Kke(i){return function(e){return i(e)}}var XP=Kke,HJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fv=HJ&&typeof module=="object"&&module&&!module.nodeType&&module,Jke=fv&&fv.exports===HJ,Dw=Jke&&NJ.process,eBe=function(){try{var i=fv&&fv.require&&fv.require("util").types;return i||Dw&&Dw.binding&&Dw.binding("util")}catch{}}(),im=eBe,lU=im&&im.isTypedArray,tBe=lU?XP(lU):Qke,WJ=tBe,iBe=Object.prototype,nBe=iBe.hasOwnProperty;function rBe(i,e){var t=q0(i),n=!t&&qP(i),r=!t&&!n&&D8(i),s=!t&&!n&&!r&&WJ(i),o=t||n||r||s,a=o?mke(i.length,String):[],l=a.length;for(var c in i)(e||nBe.call(i,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||GP(c,l)))&&a.push(c);return a}var $J=rBe;function sBe(i,e){return function(t){return i(e(t))}}var qJ=sBe,oBe=qJ(Object.keys,Object),aBe=oBe,lBe=Object.prototype,cBe=lBe.hasOwnProperty;function uBe(i){if(!$P(i))return aBe(i);var e=[];for(var t in Object(i))cBe.call(i,t)&&t!="constructor"&&e.push(t);return e}var hBe=uBe;function dBe(i){return VJ(i)?$J(i):hBe(i)}var YP=dBe;function fBe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var pBe=fBe,mBe=Object.prototype,gBe=mBe.hasOwnProperty;function vBe(i){if(!Zd(i))return pBe(i);var e=$P(i),t=[];for(var n in i)n=="constructor"&&(e||!gBe.call(i,n))||t.push(n);return t}var yBe=vBe;function xBe(i){return VJ(i)?$J(i,!0):yBe(i)}var ZP=xBe,_Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bBe=/^\w*$/;function wBe(i,e){if(q0(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||VP(i)?!0:bBe.test(i)||!_Be.test(i)||e!=null&&i in Object(e)}var SBe=wBe,ABe=yf(Object,"create"),y3=ABe;function TBe(){this.__data__=y3?y3(null):{},this.size=0}var MBe=TBe;function EBe(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var CBe=EBe,DBe="__lodash_hash_undefined__",PBe=Object.prototype,LBe=PBe.hasOwnProperty;function IBe(i){var e=this.__data__;if(y3){var t=e[i];return t===DBe?void 0:t}return LBe.call(e,i)?e[i]:void 0}var OBe=IBe,RBe=Object.prototype,NBe=RBe.hasOwnProperty;function FBe(i){var e=this.__data__;return y3?e[i]!==void 0:NBe.call(e,i)}var zBe=FBe,kBe="__lodash_hash_undefined__";function BBe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=y3&&e===void 0?kBe:e,this}var UBe=BBe;function Bm(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Bm.prototype.clear=MBe;Bm.prototype.delete=CBe;Bm.prototype.get=OBe;Bm.prototype.has=zBe;Bm.prototype.set=UBe;var cU=Bm;function VBe(){this.__data__=[],this.size=0}var GBe=VBe;function jBe(i,e){for(var t=i.length;t--;)if(jP(i[t][0],e))return t;return-1}var E7=jBe,HBe=Array.prototype,WBe=HBe.splice;function $Be(i){var e=this.__data__,t=E7(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():WBe.call(e,t,1),--this.size,!0}var qBe=$Be;function XBe(i){var e=this.__data__,t=E7(e,i);return t<0?void 0:e[t][1]}var YBe=XBe;function ZBe(i){return E7(this.__data__,i)>-1}var QBe=ZBe;function KBe(i,e){var t=this.__data__,n=E7(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var JBe=KBe;function Um(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Um.prototype.clear=GBe;Um.prototype.delete=qBe;Um.prototype.get=YBe;Um.prototype.has=QBe;Um.prototype.set=JBe;var C7=Um,eUe=yf(tl,"Map"),x3=eUe;function tUe(){this.size=0,this.__data__={hash:new cU,map:new(x3||C7),string:new cU}}var iUe=tUe;function nUe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var rUe=nUe;function sUe(i,e){var t=i.__data__;return rUe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var D7=sUe;function oUe(i){var e=D7(this,i).delete(i);return this.size-=e?1:0,e}var aUe=oUe;function lUe(i){return D7(this,i).get(i)}var cUe=lUe;function uUe(i){return D7(this,i).has(i)}var hUe=uUe;function dUe(i,e){var t=D7(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var fUe=dUe;function Vm(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Vm.prototype.clear=iUe;Vm.prototype.delete=aUe;Vm.prototype.get=cUe;Vm.prototype.has=hUe;Vm.prototype.set=fUe;var P7=Vm,pUe="Expected a function";function QP(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(pUe);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=t.cache;if(s.has(r))return s.get(r);var o=i.apply(this,n);return t.cache=s.set(r,o)||s,o};return t.cache=new(QP.Cache||P7),t}QP.Cache=P7;var mUe=QP,gUe=500;function vUe(i){var e=mUe(i,function(n){return t.size===gUe&&t.clear(),n}),t=e.cache;return e}var yUe=vUe,xUe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Ue=/\\(\\)?/g,bUe=yUe(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(xUe,function(t,n,r,s){e.push(r?s.replace(_Ue,"$1"):n||t)}),e}),wUe=bUe;function SUe(i){return i==null?"":rze(i)}var AUe=SUe;function TUe(i,e){return q0(i)?i:SBe(i,e)?[i]:wUe(AUe(i))}var Gm=TUe,MUe=1/0;function EUe(i){if(typeof i=="string"||VP(i))return i;var e=i+"";return e=="0"&&1/i==-MUe?"-0":e}var L7=EUe;function CUe(i,e){e=Gm(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[L7(e[t++])];return t&&t==n?i:void 0}var XJ=CUe;function DUe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var KP=DUe,uU=Jo?Jo.isConcatSpreadable:void 0;function PUe(i){return q0(i)||qP(i)||!!(uU&&i&&i[uU])}var LUe=PUe;function YJ(i,e,t,n,r){var s=-1,o=i.length;for(t||(t=LUe),r||(r=[]);++s<o;){var a=i[s];e>0&&t(a)?e>1?YJ(a,e-1,t,n,r):KP(r,a):n||(r[r.length]=a)}return r}var IUe=YJ;function OUe(i){var e=i==null?0:i.length;return e?IUe(i,1):[]}var RUe=OUe;function NUe(i){return Yze(lke(i,void 0,RUe),i+"")}var ZJ=NUe,FUe=qJ(Object.getPrototypeOf,Object),JP=FUe,zUe="[object Object]",kUe=Function.prototype,BUe=Object.prototype,QJ=kUe.toString,UUe=BUe.hasOwnProperty,VUe=QJ.call(Object);function GUe(i){if(!oc(i)||gf(i)!=zUe)return!1;var e=JP(i);if(e===null)return!0;var t=UUe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&QJ.call(t)==VUe}var jUe=GUe;function HUe(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=i[n+e];return s}var WUe=HUe;function $Ue(){this.__data__=new C7,this.size=0}var qUe=$Ue;function XUe(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var YUe=XUe;function ZUe(i){return this.__data__.get(i)}var QUe=ZUe;function KUe(i){return this.__data__.has(i)}var JUe=KUe,eVe=200;function tVe(i,e){var t=this.__data__;if(t instanceof C7){var n=t.__data__;if(!x3||n.length<eVe-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new P7(n)}return t.set(i,e),this.size=t.size,this}var iVe=tVe;function jm(i){var e=this.__data__=new C7(i);this.size=e.size}jm.prototype.clear=qUe;jm.prototype.delete=YUe;jm.prototype.get=QUe;jm.prototype.has=JUe;jm.prototype.set=iVe;var L5=jm;function nVe(i,e){return i&&py(e,YP(e),i)}var rVe=nVe;function sVe(i,e){return i&&py(e,ZP(e),i)}var oVe=sVe,KJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hU=KJ&&typeof module=="object"&&module&&!module.nodeType&&module,aVe=hU&&hU.exports===KJ,dU=aVe?tl.Buffer:void 0,fU=dU?dU.allocUnsafe:void 0;function lVe(i,e){if(e)return i.slice();var t=i.length,n=fU?fU(t):new i.constructor(t);return i.copy(n),n}var cVe=lVe;function uVe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}var hVe=uVe;function dVe(){return[]}var JJ=dVe,fVe=Object.prototype,pVe=fVe.propertyIsEnumerable,pU=Object.getOwnPropertySymbols,mVe=pU?function(i){return i==null?[]:(i=Object(i),hVe(pU(i),function(e){return pVe.call(i,e)}))}:JJ,eL=mVe;function gVe(i,e){return py(i,eL(i),e)}var vVe=gVe,yVe=Object.getOwnPropertySymbols,xVe=yVe?function(i){for(var e=[];i;)KP(e,eL(i)),i=JP(i);return e}:JJ,eee=xVe;function _Ve(i,e){return py(i,eee(i),e)}var bVe=_Ve;function wVe(i,e,t){var n=e(i);return q0(i)?n:KP(n,t(i))}var tee=wVe;function SVe(i){return tee(i,YP,eL)}var cM=SVe;function AVe(i){return tee(i,ZP,eee)}var iee=AVe,TVe=yf(tl,"DataView"),uM=TVe,MVe=yf(tl,"Promise"),hM=MVe,EVe=yf(tl,"Set"),dM=EVe,mU="[object Map]",CVe="[object Object]",gU="[object Promise]",vU="[object Set]",yU="[object WeakMap]",xU="[object DataView]",DVe=vf(uM),PVe=vf(x3),LVe=vf(hM),IVe=vf(dM),OVe=vf(lM),Gh=gf;(uM&&Gh(new uM(new ArrayBuffer(1)))!=xU||x3&&Gh(new x3)!=mU||hM&&Gh(hM.resolve())!=gU||dM&&Gh(new dM)!=vU||lM&&Gh(new lM)!=yU)&&(Gh=function(i){var e=gf(i),t=e==CVe?i.constructor:void 0,n=t?vf(t):"";if(n)switch(n){case DVe:return xU;case PVe:return mU;case LVe:return gU;case IVe:return vU;case OVe:return yU}return e});var _3=Gh,RVe=Object.prototype,NVe=RVe.hasOwnProperty;function FVe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&NVe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var zVe=FVe,kVe=tl.Uint8Array,P8=kVe;function BVe(i){var e=new i.constructor(i.byteLength);return new P8(e).set(new P8(i)),e}var tL=BVe;function UVe(i,e){var t=e?tL(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var VVe=UVe,GVe=/\w*$/;function jVe(i){var e=new i.constructor(i.source,GVe.exec(i));return e.lastIndex=i.lastIndex,e}var HVe=jVe,_U=Jo?Jo.prototype:void 0,bU=_U?_U.valueOf:void 0;function WVe(i){return bU?Object(bU.call(i)):{}}var $Ve=WVe;function qVe(i,e){var t=e?tL(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var XVe=qVe,YVe="[object Boolean]",ZVe="[object Date]",QVe="[object Map]",KVe="[object Number]",JVe="[object RegExp]",eGe="[object Set]",tGe="[object String]",iGe="[object Symbol]",nGe="[object ArrayBuffer]",rGe="[object DataView]",sGe="[object Float32Array]",oGe="[object Float64Array]",aGe="[object Int8Array]",lGe="[object Int16Array]",cGe="[object Int32Array]",uGe="[object Uint8Array]",hGe="[object Uint8ClampedArray]",dGe="[object Uint16Array]",fGe="[object Uint32Array]";function pGe(i,e,t){var n=i.constructor;switch(e){case nGe:return tL(i);case YVe:case ZVe:return new n(+i);case rGe:return VVe(i,t);case sGe:case oGe:case aGe:case lGe:case cGe:case uGe:case hGe:case dGe:case fGe:return XVe(i,t);case QVe:return new n;case KVe:case tGe:return new n(i);case JVe:return HVe(i);case eGe:return new n;case iGe:return $Ve(i)}}var mGe=pGe;function gGe(i){return typeof i.constructor=="function"&&!$P(i)?Oze(JP(i)):{}}var vGe=gGe,yGe="[object Map]";function xGe(i){return oc(i)&&_3(i)==yGe}var _Ge=xGe,wU=im&&im.isMap,bGe=wU?XP(wU):_Ge,wGe=bGe,SGe="[object Set]";function AGe(i){return oc(i)&&_3(i)==SGe}var TGe=AGe,SU=im&&im.isSet,MGe=SU?XP(SU):TGe,EGe=MGe,CGe=1,DGe=2,PGe=4,nee="[object Arguments]",LGe="[object Array]",IGe="[object Boolean]",OGe="[object Date]",RGe="[object Error]",ree="[object Function]",NGe="[object GeneratorFunction]",FGe="[object Map]",zGe="[object Number]",see="[object Object]",kGe="[object RegExp]",BGe="[object Set]",UGe="[object String]",VGe="[object Symbol]",GGe="[object WeakMap]",jGe="[object ArrayBuffer]",HGe="[object DataView]",WGe="[object Float32Array]",$Ge="[object Float64Array]",qGe="[object Int8Array]",XGe="[object Int16Array]",YGe="[object Int32Array]",ZGe="[object Uint8Array]",QGe="[object Uint8ClampedArray]",KGe="[object Uint16Array]",JGe="[object Uint32Array]",Ci={};Ci[nee]=Ci[LGe]=Ci[jGe]=Ci[HGe]=Ci[IGe]=Ci[OGe]=Ci[WGe]=Ci[$Ge]=Ci[qGe]=Ci[XGe]=Ci[YGe]=Ci[FGe]=Ci[zGe]=Ci[see]=Ci[kGe]=Ci[BGe]=Ci[UGe]=Ci[VGe]=Ci[ZGe]=Ci[QGe]=Ci[KGe]=Ci[JGe]=!0;Ci[RGe]=Ci[ree]=Ci[GGe]=!1;function I5(i,e,t,n,r,s){var o,a=e&CGe,l=e&DGe,c=e&PGe;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!Zd(i))return i;var h=q0(i);if(h){if(o=zVe(i),!a)return zze(i,o)}else{var u=_3(i),d=u==ree||u==NGe;if(D8(i))return cVe(i,a);if(u==see||u==nee||d&&!r){if(o=l||d?{}:vGe(i),!a)return l?bVe(i,oVe(o,i)):vVe(i,rVe(o,i))}else{if(!Ci[u])return r?i:{};o=mGe(i,u,a)}}s||(s=new L5);var f=s.get(i);if(f)return f;s.set(i,o),EGe(i)?i.forEach(function(y){o.add(I5(y,e,t,y,i,s))}):wGe(i)&&i.forEach(function(y,g){o.set(g,I5(y,e,t,g,i,s))});var p=c?l?iee:cM:l?ZP:YP,m=h?void 0:p(i);return Qze(m||i,function(y,g){m&&(g=y,y=i[g]),HP(o,g,I5(y,e,t,g,i,s))}),o}var oee=I5,eje=1,tje=4;function ije(i){return oee(i,eje|tje)}var I7=ije,nje="__lodash_hash_undefined__";function rje(i){return this.__data__.set(i,nje),this}var sje=rje;function oje(i){return this.__data__.has(i)}var aje=oje;function L8(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new P7;++e<t;)this.add(i[e])}L8.prototype.add=L8.prototype.push=sje;L8.prototype.has=aje;var lje=L8;function cje(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var uje=cje;function hje(i,e){return i.has(e)}var dje=hje,fje=1,pje=2;function mje(i,e,t,n,r,s){var o=t&fje,a=i.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(i),h=s.get(e);if(c&&h)return c==e&&h==i;var u=-1,d=!0,f=t&pje?new lje:void 0;for(s.set(i,e),s.set(e,i);++u<a;){var p=i[u],m=e[u];if(n)var y=o?n(m,p,u,e,i,s):n(p,m,u,i,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(f){if(!uje(e,function(g,v){if(!dje(f,v)&&(p===g||r(p,g,t,n,s)))return f.push(v)})){d=!1;break}}else if(!(p===m||r(p,m,t,n,s))){d=!1;break}}return s.delete(i),s.delete(e),d}var aee=mje;function gje(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var vje=gje;function yje(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var xje=yje,_je=1,bje=2,wje="[object Boolean]",Sje="[object Date]",Aje="[object Error]",Tje="[object Map]",Mje="[object Number]",Eje="[object RegExp]",Cje="[object Set]",Dje="[object String]",Pje="[object Symbol]",Lje="[object ArrayBuffer]",Ije="[object DataView]",AU=Jo?Jo.prototype:void 0,Pw=AU?AU.valueOf:void 0;function Oje(i,e,t,n,r,s,o){switch(t){case Ije:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case Lje:return!(i.byteLength!=e.byteLength||!s(new P8(i),new P8(e)));case wje:case Sje:case Mje:return jP(+i,+e);case Aje:return i.name==e.name&&i.message==e.message;case Eje:case Dje:return i==e+"";case Tje:var a=vje;case Cje:var l=n&_je;if(a||(a=xje),i.size!=e.size&&!l)return!1;var c=o.get(i);if(c)return c==e;n|=bje,o.set(i,e);var h=aee(a(i),a(e),n,r,s,o);return o.delete(i),h;case Pje:if(Pw)return Pw.call(i)==Pw.call(e)}return!1}var Rje=Oje,Nje=1,Fje=Object.prototype,zje=Fje.hasOwnProperty;function kje(i,e,t,n,r,s){var o=t&Nje,a=cM(i),l=a.length,c=cM(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:zje.call(e,d)))return!1}var f=s.get(i),p=s.get(e);if(f&&p)return f==e&&p==i;var m=!0;s.set(i,e),s.set(e,i);for(var y=o;++u<l;){d=a[u];var g=i[d],v=e[d];if(n)var x=o?n(v,g,d,e,i,s):n(g,v,d,i,e,s);if(!(x===void 0?g===v||r(g,v,t,n,s):x)){m=!1;break}y||(y=d=="constructor")}if(m&&!y){var _=i.constructor,w=e.constructor;_!=w&&"constructor"in i&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(i),s.delete(e),m}var Bje=kje,Uje=1,TU="[object Arguments]",MU="[object Array]",T4="[object Object]",Vje=Object.prototype,EU=Vje.hasOwnProperty;function Gje(i,e,t,n,r,s){var o=q0(i),a=q0(e),l=o?MU:_3(i),c=a?MU:_3(e);l=l==TU?T4:l,c=c==TU?T4:c;var h=l==T4,u=c==T4,d=l==c;if(d&&D8(i)){if(!D8(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new L5),o||WJ(i)?aee(i,e,t,n,r,s):Rje(i,e,l,t,n,r,s);if(!(t&Uje)){var f=h&&EU.call(i,"__wrapped__"),p=u&&EU.call(e,"__wrapped__");if(f||p){var m=f?i.value():i,y=p?e.value():e;return s||(s=new L5),r(m,y,t,n,s)}}return d?(s||(s=new L5),Bje(i,e,t,n,r,s)):!1}var jje=Gje;function lee(i,e,t,n,r){return i===e?!0:i==null||e==null||!oc(i)&&!oc(e)?i!==i&&e!==e:jje(i,e,t,n,lee,r)}var Hje=lee;function Wje(i,e){return i!=null&&e in Object(i)}var $je=Wje;function qje(i,e,t){e=Gm(e,i);for(var n=-1,r=e.length,s=!1;++n<r;){var o=L7(e[n]);if(!(s=i!=null&&t(i,o)))break;i=i[o]}return s||++n!=r?s:(r=i==null?0:i.length,!!r&&WP(r)&&GP(o,r)&&(q0(i)||qP(i)))}var Xje=qje;function Yje(i,e){return i!=null&&Xje(i,e,$je)}var Zje=Yje;function Qje(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var Kje=Qje;function Jje(i,e){return e.length<2?i:XJ(i,WUe(e,0,-1))}var eHe=Jje;function tHe(i,e){return Hje(i,e)}var cee=tHe;function iHe(i,e){return e=Gm(e,i),i=eHe(i,e),i==null||delete i[L7(Kje(e))]}var nHe=iHe;function rHe(i){return jUe(i)?void 0:i}var sHe=rHe,oHe=1,aHe=2,lHe=4,cHe=ZJ(function(i,e){var t={};if(i==null)return t;var n=!1;e=zJ(e,function(s){return s=Gm(s,i),n||(n=s.length>1),s}),py(i,iee(i),t),n&&(t=oee(t,oHe|aHe|lHe,sHe));for(var r=e.length;r--;)nHe(t,e[r]);return t}),fM=cHe;function uHe(i,e,t,n){if(!Zd(i))return i;e=Gm(e,i);for(var r=-1,s=e.length,o=s-1,a=i;a!=null&&++r<s;){var l=L7(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(r!=o){var h=a[l];c=n?n(h,l,a):void 0,c===void 0&&(c=Zd(h)?h:GP(e[r+1])?[]:{})}HP(a,l,c),a=a[l]}return i}var hHe=uHe;function dHe(i,e,t){for(var n=-1,r=e.length,s={};++n<r;){var o=e[n],a=XJ(i,o);t(a,o)&&hHe(s,Gm(o,i),a)}return s}var fHe=dHe;function pHe(i,e){return fHe(i,e,function(t,n){return Zje(i,n)})}var mHe=pHe,zrt=ZJ(function(i,e){return i==null?{}:mHe(i,e)});var pM;(i=>i.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(pM||(pM={}));var $g=PP(eFe()),gHe=.5*(Math.sqrt(3)-1),qg=(3-Math.sqrt(3))/6,vHe=1/3,i0=1/6,pv=i=>Math.floor(i)|0,CU=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Lw=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Iw(i=Math.random){let e=uee(i),t=new Float64Array(e).map(r=>CU[r%12*2]),n=new Float64Array(e).map(r=>CU[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*gHe,h=pv(r+c),u=pv(s+c),d=(h+u)*qg,f=h-d,p=u-d,m=r-f,y=s-p,g,v;m>y?(g=1,v=0):(g=0,v=1);let x=m-g+qg,_=y-v+qg,w=m-1+2*qg,b=y-1+2*qg,S=h&255,A=u&255,E=.5-m*m-y*y;if(E>=0){let C=S+e[A],D=t[C],P=n[C];E*=E,o=E*E*(D*m+P*y)}let T=.5-x*x-_*_;if(T>=0){let C=S+g+e[A+v],D=t[C],P=n[C];T*=T,a=T*T*(D*x+P*_)}let M=.5-w*w-b*b;if(M>=0){let C=S+1+e[A+1],D=t[C],P=n[C];M*=M,l=M*M*(D*w+P*b)}return 70*(o+a+l)}}function yHe(i=Math.random){let e=uee(i),t=new Float64Array(e).map(s=>Lw[s%12*3]),n=new Float64Array(e).map(s=>Lw[s%12*3+1]),r=new Float64Array(e).map(s=>Lw[s%12*3+2]);return function(s,o,a){let l,c,h,u,d=(s+o+a)*vHe,f=pv(s+d),p=pv(o+d),m=pv(a+d),y=(f+p+m)*i0,g=f-y,v=p-y,x=m-y,_=s-g,w=o-v,b=a-x,S,A,E,T,M,C;_>=w?w>=b?(S=1,A=0,E=0,T=1,M=1,C=0):_>=b?(S=1,A=0,E=0,T=1,M=0,C=1):(S=0,A=0,E=1,T=1,M=0,C=1):w<b?(S=0,A=0,E=1,T=0,M=1,C=1):_<b?(S=0,A=1,E=0,T=0,M=1,C=1):(S=0,A=1,E=0,T=1,M=1,C=0);let D=_-S+i0,P=w-A+i0,I=b-E+i0,k=_-T+2*i0,G=w-M+2*i0,U=b-C+2*i0,Z=_-1+3*i0,$=w-1+3*i0,W=b-1+3*i0,X=f&255,j=p&255,H=m&255,V=.6-_*_-w*w-b*b;if(V<0)l=0;else{let Q=X+e[j+e[H]];V*=V,l=V*V*(t[Q]*_+n[Q]*w+r[Q]*b)}let B=.6-D*D-P*P-I*I;if(B<0)c=0;else{let Q=X+S+e[j+A+e[H+E]];B*=B,c=B*B*(t[Q]*D+n[Q]*P+r[Q]*I)}let q=.6-k*k-G*G-U*U;if(q<0)h=0;else{let Q=X+T+e[j+M+e[H+C]];q*=q,h=q*q*(t[Q]*k+n[Q]*G+r[Q]*U)}let K=.6-Z*Z-$*$-W*W;if(K<0)u=0;else{let Q=X+1+e[j+1+e[H+1]];K*=K,u=K*K*(t[Q]*Z+n[Q]*$+r[Q]*W)}return 32*(l+c+h+u)}}function uee(i){let e=new Uint8Array(512);for(let t=0;t<512/2;t++)e[t]=t;for(let t=0;t<512/2-1;t++){let n=t+~~(i()*(256-t)),r=e[t];e[t]=e[n],e[n]=r}for(let t=256;t<512;t++)e[t]=e[t-256];return e}var fa=new sn,xHe=class{constructor(i){this.weightAttribute=null;let e=i.geometry;if(!e.isBufferGeometry||e.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let i=this.positionAttribute,e=new Float32Array(i.count/3);for(let n=0;n<i.count;n+=3){let r=1;fa.a.fromBufferAttribute(i,n),fa.b.fromBufferAttribute(i,n+1),fa.c.fromBufferAttribute(i,n+2),r*=fa.getArea(),e[n/3]=r}this.distribution=new Float32Array(i.count/3);let t=0;for(let n=0;n<e.length;n++)t+=e[n],this.distribution[n]=t;return this}setRandomGenerator(i){return this.randomFunction=i,this}sample(i,e){if(this.distribution){let t=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*t);return this.sampleFace(n,i,e)}}binarySearch(i){if(!this.distribution)return 0;let e=this.distribution,t=0,n=e.length-1,r=-1;for(;t<=n;){let s=Math.ceil((t+n)/2);if(s===0||e[s-1]<=i&&e[s]>i){r=s;break}else i<e[s]?n=s-1:t=s+1}return r}sampleFace(i,e,t){let n=this.randomFunction(),r=this.randomFunction();return n+r>1&&(n=1-n,r=1-r),fa.a.fromBufferAttribute(this.positionAttribute,i*3),fa.b.fromBufferAttribute(this.positionAttribute,i*3+1),fa.c.fromBufferAttribute(this.positionAttribute,i*3+2),e.set(0,0,0).addScaledVector(fa.a,n).addScaledVector(fa.b,r).addScaledVector(fa.c,1-(n+r)),fa.getNormal(t),this}},_He=PP(tFe()),bHe=new Ce,wHe=new Ce,SHe=new Ce,I8;(i=>{function e(t){return t&&t.__isSPEObject}i.is=e})(I8||(I8={}));var iL=i=>class extends i{constructor(){super(...arguments),this.hiddenMatrix=new Ce,this.matrixWorldRigid=new Ce,this.shearScale=new Ce,this.shearScaleInv=new Ce}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof Pt&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(e&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,t=0){if(e(this,t)!==!0)for(let n of this.children)I8.is(n)&&n.traverseObject(e,t+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:n,v:r,q:s}=(0,_He.SVD)(t),o=bHe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),a=wHe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=SHe.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,t){this.updateWorldMatrix(!0,!1);let n=new Ce().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof Ce?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),t!==void 0&&(this.children.pop(),this.children.splice(t,0,e)),this}},AHe=class extends iL(Pt){},THe=i=>i.type==="Mesh",T2=class extends AHe{constructor(i){super(),this.object=i,this.matrixAutoUpdate=!1}expand(){let i=0,e=this.object.entityChildren(i);for(;e;){let t=this.children[i];(t==null?void 0:t.object)!==e&&(t&&this.remove(t),t=new T2(e),this.add(t),t.matrixAutoUpdate=!1,t.matrix=e.matrix,t.hiddenMatrix=e.hiddenMatrix),t.expand(),i+=1,e=this.object.entityChildren(i)}for(;this.children.length>i;)this.remove(this.children[i])}get visible(){var i;return this.object.visible||this.object.dataPatched.visible&&((i=this.object.dataPatched.cloner)==null?void 0:i.hideBase)===!0}set visible(i){}get castShadow(){return this.object.castShadow}set castShadow(i){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(i){}get isMesh(){return THe(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(i){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},td=new R,id=new R,d1=new Ce,hee=[new R(-1,1,1),new R(-1,-1,1),new R(1,-1,1),new R(1,1,1),new R(-1,1,-1),new R(-1,-1,-1),new R(1,-1,-1),new R(1,1,-1)],MHe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],EHe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],DU=(i,e,t)=>{i.updateEntityBoxSize(td,id),d1.copy(e).multiply(i.matrixWorld),id.x===0&&id.y===0&&id.z===0?t.push(new R(td.x,td.y,td.z).applyMatrix4(d1)):hee.forEach(n=>{t.push(n.clone().multiply(id).add(td).applyMatrix4(d1))})},PU=class extends er{constructor(){super(...arguments),this.matrix=new Ce,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(i){return super.copy(i),this.matrix.copy(i.matrix),this.vertices=i.vertices.map(e=>e.clone()),this.faces=i.faces.map(e=>e.clone()),this.edges=i.edges.map(e=>e.clone()),this.centerEdges=i.centerEdges.map(e=>e.clone()),this}setFromObjectSize(i,e=!1){i.updateWorldMatrix(!1,e),this.makeEmpty(),this.matrix.copy(i.matrixWorld);let t=new Ce().copy(i.matrixWorld).invert();return this.expandByObjectSize(i,t,e)}expandByObjectSize(i,e,t=!1){let n=[];return t===!0?i.traverseEntity(r=>{r.visible&&DU(r,e,n)}):DU(i,e,n),this.setFromPoints(n)}getCenter(i){return i=super.getCenter(i),i.applyMatrix4(this.matrix),i}getPositionToCenter(i){return i=super.getCenter(i),i.applyMatrix4(d1.copy(this.matrix).setPosition(0,0,0)),i}computeVertices(){this.getSize(id).multiplyScalar(.5),this.getCenter(td),d1.copy(this.matrix).setPosition(td),this.vertices=hee.map(i=>i.clone().multiply(id).applyMatrix4(d1))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=MHe.map(([i,e])=>new FY(this.vertices[i],this.vertices[e])),this.centerEdges=this.edges.map(i=>i.getCenter(new R))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=EHe.map(([i,e])=>this.vertices[i].clone().add(this.vertices[e]).multiplyScalar(.5))}},pu={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},CHe=class extends eY{constructor(){super()}getPoints(i=12){let e=[],t,n=this.getCurveLengths(),r=n[n.length-1]/n.length;for(let s=0,o=this.curves;s<o.length;s++){let a=o[s],l=s===0?n[s]:n[s]-n[s-1],c=Math.ceil(i*l/r),h=a.getPoints(c);for(let u=0;u<h.length;u++){let d=h[u];t&&t.equals(d)||(e.push(d),t=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}},mM=.001;function gM(i,e,t){return e.clone().sub(i).cross(e.clone().sub(t)).length()<=mM}function Ow(i,e){let t=new R(...i.position),n=new R(...i.controlNext.position),r=new R(...e.controlPrevious.position),s=new R(...e.position);return gM(t,n,s)&&gM(t,r,s)}function dee(i){let e=i.points.map(h=>new R(...h.data.position)),t=[i.points[0]],n=new R(...t[0].data.position);for(let h=0;h<i.points.length-1;h++)gM(n,e[h],e[h+1])||(t.push(i.points[h]),n=e[h]);t.push(i.points[i.points.length-1]);let r=i.isClosed,s=t.length-(r?0:1),o=t.length,a=[];for(let h=0;h<o;h++){let u=t[h].data,d=new R(...u.position),f=new R(...u.controlPrevious.position),p=new R(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!i.isClosed&&(h===0||h===o-1)){a[h]={...m,removedLength:0};continue}let y=r&&h==0?o-1:h-1,g=r&&h==o-1?0:h+1,v=t[y].data,x=t[g].data,_=new R(...v.position),w=new R(...x.position),b=_.clone().sub(d).normalize(),S=w.clone().sub(d).normalize();Object.assign(m,{prevDir:b,nextDir:S});let A=Ow(v,u),E=Ow(u,x);if(!A||!E)a[h]={...m,removedLength:0};else{let T=b.clone().add(S).normalize(),M=T.clone().cross(b).length()/b.dot(T);a[h]={...m,tan:M,removedLength:u.roundness/M}}}for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d],m=null;if(!Ow(t[u].data,t[d].data))f.position.distanceTo(p.position)>mM&&(m=new Q2(f.position,f.controlNext,p.controlPrevious,p.position));else{let y=f.position.clone(),g=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&y.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&g.add(p.prevDir.clone().setLength(p.removedLength))),y.distanceTo(g)>mM&&(m=new Q2(y,y.clone().lerp(g,.3),g.clone().lerp(y,.3),g))}l[2*h+1]=m}for(let h=0;h<o;h++){let u=a[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,y=u.prevDir.clone().add(u.nextDir).normalize(),g=f.clone().lerp(p,.5),v=f.distanceTo(p)/2,x=y.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(v,2))).add(g),_=y.clone().multiplyScalar(-m).add(x),w=d.distanceTo(_)/d.distanceTo(g),b=u.prevDir.clone().multiplyScalar(w*d.distanceTo(f)).add(d),S=b.clone().lerp(_,2),A=f.clone().lerp(b,4/3),E=p.clone().lerp(S,4/3);l[2*h]=new Q2(f,A,E,p)}let c=new CHe;return l.forEach(h=>{h&&c.add(h)}),c}var zn;(i=>{function e(t){return t&&t.__isEntity}i.is=e})(zn||(zn={}));var _0=i=>zn.is(i),fee=i=>class extends iL(i){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new PU,this._recursiveBBox=new PU,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let t=this.children[e];if(zn.is(t))return t}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let t=e.parent;if(zn.is(t))e=t;else return}return e}forInstancesRec(e){this.instances.forEach(t=>{t.disposed||e(t),t.forInstancesRec(e)})}super_Entity(e,t){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=t,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,t,n=!1){if(!(this.data.states.length===0&&!n)){for(let r of this.data.states)Gp.toOps(this.data,r.data).forEach(s=>{let o=WT.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=Gp.patch(this.data,r),Gp.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,t)}))}n&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(t.scene)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,t){e.setScalar(0),t.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{_0(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let t;return this.traverseEntity(n=>{n.uuid===e&&(t=n)}),t}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children,n=t.indexOf(this)+1;if(zn.is(t[n]))return t[n];if(zn.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&zn.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let t=this;for(;e>0&&t!==null;)t=t.parent,e-=1;return t}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let t=this.parent;for(;t;){if(e===t)return!0;t=t.parent}return!1}countToAccestor(e){let t=0,n=this;for(;n!==e;){if(n===null)return-1;n=n.parent,t+=1}return t}forEachEntity(e){for(let t of this.children)_0(t)&&e(t)}traverseEntityAncestors(e){this.traverseAncestors(t=>{zn.is(t)&&e(t)})}traverseEntity(e,t=0){if(e(this,t)!==!0)for(let n of this.children)_0(n)&&n.traverseEntity(e,t+1)}traverseVisibleEntity(e){e(this);for(let t of this.children)_0(t)&&t.visible&&t.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,t=!0){return super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>_0(e))}isAncestorOf(e){if(this.uuid===e)return!1;let t=!1;return this.traverseEntity(n=>{n.uuid===e&&(t=!0)}),t}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return fM(t,e)}updateTransformState(e){let t=!1;return e.position&&(this.position.fromArray(e.position),t=!0),e.rotation&&(this.rotation.fromArray(e.rotation),t=!0),e.scale&&(t=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(t=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??J1.identity)),t&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),t}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)zn.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{zn.is(e)&&e.disposeRecursively()})}toState(e=[]){let t={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return fM(t,e)}updateByOp(e,t,n,r){let s=this.data;this.data=t;let o=e,a=Jc(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=k0.zoom(h,e.path.slice(2));if(u)for(let d in e.props)e.props[d]===void 0&&d in u&&(c[d]=u[d])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=k0.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,Gp.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),Jc(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let h of Object.keys(e.props)){l[l.length-1]=h;let u=n.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[h],u.updateState(Pd.apply(u.component.data,u.overrideData),n))}}else{let h=n.scene.findInstance([this.uuid,...l]);if(h){let u=k0.zoom(h.component.data,c);if(e={...e,path:c},e.type===0){let d=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(d===e.props&&(d={...e.props}),d[f]=u[f]);e={...e,props:d}}h.overrideData=E8.resolve(t.overrides,l),h.updateByOp(e,io.applySimple(h.data,e),n,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let h of tm.rootOverrideProps)h in e.props&&(c===void 0&&(c={}),c[h]=e.props[h]);c&&(l={...e,props:c})}else for(let c of tm.rootOverrideProps)if(Jc(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=Pd.filterOp(c.overrideData,l);h&&c.updateByOp(h,io.applySimple(c.data,h),n,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=Pd.filterOp(c.overrideData,e);if(h){let u;s===c.data&&e===h?u=t:u=io.applySimple(c.data,h),c.updateByOp(h,u,n,!0)}}})}}updateByPatchedOpBase(e,t,n){if(this.dataPatched=t,e.path.length===0&&e.type===0)e.props.type!==void 0&&!Yd.is(e.props.type)&&pu.changeEntityProptotype(this,t,n);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){pu.changeEntityProptotype(this,t,n);for(let r of this.children)zn.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,t,n)}updateByPatchedOp(e,t,n){if(e.path.length===0&&e.type===0&&this.updateState(e.props,n),Jc(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.scene),Jc(e.path,["cloner"])!==null){let r=io.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(t.cloner,n.scene):(this.setFromClonerState(t.cloner,n),this.expandCloner(n.scene)),this.updateVisible()}}updatePathSnapping(e,t=this.dataPatched.pathSnapping){if(t!=null&&t.pathId){let n=e.find(t.pathId);this._pathSnappingObject=n,n?this.updatePathSnappingSlide(t):e.addPendingCommand(()=>{this.updatePathSnapping(e)})}}updatePathSnappingSlide(e=this.dataPatched.pathSnapping){var h;let t=this._pathSnappingObject;if(!t)return;t.snappedEntities.add(this);let n=t.data,r=dee(n.geometry.path),s=(e.slide+e.offset)%1,o=r.getPointAt(s),a=this.parent?(h=this.parent)==null?void 0:h.matrixWorld:new Ce,l=new Ce().multiplyMatrices(a.clone().invert(),t.matrixWorld);o.applyMatrix4(l);let c={position:o.toArray(),rotation:n.rotation};if(e.orientation==="tangential"){let u=new Ce().extractRotation(t.matrixWorld),d=r.getTangentAt(s).applyMatrix4(u).add(o),f=new Ce().lookAt(o,d,new R(0,1,0)),p=new ss().setFromRotationMatrix(f);c={...c,rotation:[p.x,p.y,p.z]}}this.updateTransformState(c)}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,t){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,t),this.updateVisible()),this.updateTransformState(e),t!=null&&t.scene&&this.updatePathSnapping(t.scene,e.pathSnapping)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof pu.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,t){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):(this.cloner===void 0&&(this.cloner=new pu.Cloner(this,e),t.scene.addPendingExpandCloner(this)),this.cloner.updateState(e,t.scene)))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},DHe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},i.parameters),n=t.width/2,r=t.radiusTop??n,s=t.radiusBottom??n;return r===s?(r=n,s=n):r>s?(r=n,s=s*n/r):(r=r*n/s,s=n),{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width),radiusTop:r,radiusBottom:s})}}static build(i){let{width:e,depth:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:f}=i.parameters,p;return u||f?p=new pee(c,h,n,r,s,o,a,l*Math.PI/180,u,u,d,f):p=new KC(c,h,n,r,s,o,a,l*Math.PI/180),p.scale(1,1,t/e),Object.assign(p,{userData:{...i,type:"CylinderGeometry"}})}};function zc(i,e,t){t.x=i.x*e.x,t.y=i.y,t.z=i.x*e.y}function LU(i){return new ae(i.y,-i.x)}var pee=class extends ze{constructor(i,e,t,n,r,s,o,a,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",i=i!==void 0?i:1,e=e!==void 0?e:1,t=t||1,n=Math.floor(n)||8,r=Math.floor(r)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],p=[],m=[],y=[],g=0,v=t/2,x=new R,_=new R;d&&i==0&&(i=l),d&&e==0&&(e=c);let w=new ae(i,v),b=new ae(e,-v),S=null,A=null,E=null,T=null,M=w.clone().sub(b),C=0,D=0,P=0;u>0&&(C=Math.min(i,e)*(1-u),D=i-C,P=e-C);let I=w.clone();I.x-=C;let k=Math.PI-M.angle(),G=M.angle(),U=Math.tan(G/2),Z=Math.tan(k/2),$=U+Z,W=u?$:Z,X=u?$:U;if(l=Math.min(l,(i-D)/W,M.length()/$),c=Math.min(c,(e-P)/X,M.length()/$),l>0){let K=l/U;S=w.clone().sub(new ae(K,l)),u&&(E=S.clone(),E.x-=C-$*l),w.sub(M.clone().setLength(K))}if(c>0){let K=c/Z;A=b.clone().sub(new ae(K,-c)),b.add(M.clone().setLength(K)),u&&(T=A.clone(),T.x-=C-$*c,I.sub(M.clone().setLength(K)))}M=w.clone().sub(b);let j=M.length()<.5,H=[];for(let K=0;K<=n;K++){let Q=[],oe=K/n,ne=oe*a+o,L=new ae(Math.sin(ne),Math.cos(ne));T&&A?(V(Q,oe,L,k,c,T,-1,!0),V(Q,oe,L,G,c,A,-1,!1)):A?(B(Q,L,A.x,0,-1),V(Q,oe,L,G,c,A,-1,!1)):s||B(Q,L,e,P,-1);let z=LU(M).normalize();if(zc(z,L,x),!j)for(let Y=0;Y<=r;Y++){let J=Y/r,ee=M.clone().multiplyScalar(J).add(b);zc(ee,L,_),p.push(_.x,_.y,_.z),m.push(x.x,x.y,x.z),y.push(oe,.5+_.y/t),Q.push(g++)}if(E&&S?(V(Q,oe,L,k,l,S,1,!1),V(Q,oe,L,G,l,E,1,!0)):S?(V(Q,oe,L,k,l,S,1,!1),B(Q,L,S.x,0,1)):s||B(Q,L,i,D,1),u&&!j){let Y=LU(M).multiplyScalar(-1).normalize();zc(Y,L,x);for(let J=0;J<=r;J++){let ee=J/r,F=M.clone().multiplyScalar(-ee).add(I);zc(F,L,_),p.push(_.x,_.y,_.z),m.push(x.x,x.y,x.z),y.push(oe,.5+_.y/t),Q.push(g++)}}u&&!s&&Q.push(Q[0]),H.push(Q)}for(let K=0;K<H.length-1;K++)for(let Q=0;Q<H[0].length-1;Q++){if(s&&u&&Q==r)continue;let oe=H[K][Q],ne=H[K+1][Q],L=H[K+1][Q+1],z=H[K][Q+1],Y=p[L*3+0],J=p[L*3+2];f.push(oe,ne,z),(Y!=0||J!=0)&&f.push(ne,L,z)}a<Math.PI*2&&(q(-1,H[0],o),q(1,H[H.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(m,3)),this.setAttribute("uv",new Le(y,2));function V(K,Q,oe,ne,L,z,Y,J){for(let ee=0;ee<h+1;ee++){let F=ee/h,N=Y<0?F:1-F;J&&(N-=1),N*=ne;let te=new ae(Math.sin(N),Math.cos(N)*Y),le=te.clone().multiplyScalar(L).add(z);zc(le,oe,_),p.push(_.x,_.y,_.z),zc(te,oe,x),m.push(x.x,x.y,x.z),y.push(Q,.5+_.y/t),K.push(g++)}}function B(K,Q,oe,ne,L){let z=new R,Y=new ae,J=[oe,ne];L<0&&J.reverse();for(let ee of J)Y.set(ee,v*L),zc(Y,Q,z),p.push(z.x,z.y,z.z),m.push(0,L,0),y.push(.5,.5),K.push(g++)}function q(K,Q,oe){let ne=new ae(Math.sin(oe),Math.cos(oe)),L=new ae(-Math.cos(oe),Math.sin(oe)),z=new R,Y=K<0?(F,N,te)=>f.push(F,N,te):(F,N,te)=>f.push(F,te,N),J=new ae((i+e+D+P)/4,0);zc(J,ne,z),p.push(z.x,z.y,z.z),m.push(L.x,0,L.y),y.push(.5,.5);let ee=g++;for(let F of Q){let N=p.slice(F*3,F*3+3);p.push(...N),m.push(L.x,0,L.y);let te=y.slice(F*2,F*2+2);y.push(...te),g++}for(let F=ee+1;F<g-1;F++)Y(ee,F,F+1);Y(ee,g-1,ee+1)}}},PHe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,depth:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=i.parameters,d;return c>0||h>0||l<360?d=new pee(0,e/2,n,r,s,o,a,l*Math.PI/180,c,h,u,0,!0):d=new qX(e/2,n,r,s,o),d.scale(1,1,t/e),Object.assign(d,{userData:{...i,type:"ConeGeometry"}})}},LHe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=i.parameters,c;return a==0?c=new Va(e,t,n,r,s,o):c=new IHe(e,t,n,r,s,o,a,l),Object.assign(c,{userData:{...i,type:"CubeGeometry"}})}},Rw=Math.PI/2,IHe=class extends ze{constructor(i=1,e=1,t=1,n=1,r=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;n=Math.floor(n),r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,i/2,e/2,t/2);let c=[],h=[],u=[],d=[],f=0,p=0;m("z","y","x",-1,-1,t,e,i,s,r,0),m("z","y","x",1,-1,t,e,-i,s,r,1),m("x","z","y",1,1,i,t,e,n,s,2),m("x","z","y",1,-1,i,t,-e,n,s,3),m("x","y","z",1,-1,i,e,t,n,r,4),m("x","y","z",-1,-1,i,e,-t,n,r,5),o>0&&(y("z","y","x",-1,-1,1,t,e,i,s,0),y("z","y","x",1,-1,-1,t,e,i,s,1),y("z","y","x",-1,1,-1,t,e,i,s,1),y("z","y","x",1,1,1,t,e,i,s,0),y("x","y","z",-1,-1,-1,i,e,t,n,0),y("x","y","z",1,-1,1,i,e,t,n,1),y("x","y","z",-1,1,1,i,e,t,n,0),y("x","y","z",1,1,-1,i,e,t,n,1),y("y","x","z",-1,-1,1,e,i,t,r,0),y("y","x","z",1,-1,-1,e,i,t,r,1),y("y","x","z",1,1,1,e,i,t,r,1),y("y","x","z",-1,1,-1,e,i,t,r,0),g(1,1,1),g(-1,1,1),g(1,-1,1),g(-1,-1,1),g(1,1,-1),g(-1,1,-1),g(1,-1,-1),g(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new Le(h,3)),this.setAttribute("normal",new Le(u,3)),this.setAttribute("uv",new Le(d,2));function m(v,x,_,w,b,S,A,E,T,M,C){let D=(S-2*o)/T,P=(A-2*o)/M,I=S/2-o,k=A/2-o,G=E/2,U=T+1,Z=M+1,$=0,W=0,X=new R;for(let j=0;j<Z;j++){let H=j*P-k;for(let V=0;V<U;V++){let B=V*D-I;X[v]=B*w,X[x]=H*b,X[_]=G,h.push(X.x,X.y,X.z),X[v]=0,X[x]=0,X[_]=E>0?1:-1,u.push(X.x,X.y,X.z),d.push(V/T),d.push(1-j/M),$+=1}}for(let j=0;j<M;j++)for(let H=0;H<T;H++){let V=f+H+U*j,B=f+H+U*(j+1),q=f+(H+1)+U*(j+1),K=f+(H+1)+U*j;c.push(V,B,K),c.push(B,q,K),W+=6}l.addGroup(p,W,C),p+=W,f+=$}function y(v,x,_,w,b,S,A,E,T,M,C){let D=(A-2*o)/M,P=A/2-o,I=E/2-o,k=T/2,G=M+1,U=0,Z=0,$=new R,W=new R;for(let X=0;X<a+1;X++){let j=X/a*Rw,H=Math.sin(j)*o,V=(1-Math.cos(j))*o,B=Math.sin(j),q=Math.cos(j);$[x]=(I+H)*b,$[_]=(k-V)*S,W[v]=0,W[x]=B*Math.sign($[x]),W[_]=q*Math.sign($[_]);for(let K=0;K<G;K++){let Q=K*D-P;$[v]=Q*w,h.push($.x,$.y,$.z),u.push(W.x,W.y,W.z),d.push(K/M),d.push(0),U+=1}}for(let X=0;X<a;X++)for(let j=0;j<M;j++){let H=f+j+G*X,V=f+j+G*(X+1),B=f+(j+1)+G*(X+1),q=f+(j+1)+G*X;c.push(H,V,q),c.push(V,B,q),Z+=6}l.addGroup(p,Z,C),p+=Z,f+=U}function g(v,x,_){let w=new R,b=new R(i/2,e/2,t/2);b.subScalar(o);let S=[],A=v*x*_>0?(T,M,C)=>c.push(T,M,C):(T,M,C)=>c.push(T,C,M);for(let T=0;T<=a;T++){let M=[],C=Rw*(1-T/a),D=Math.cos(C),P=Math.sin(C),I=0;for(let k=0;k<=T;k++){let G=Math.cos(I),U=Math.sin(I);w.x=D*G,w.y=P,w.z=D*U;let Z=b.clone().addScaledVector(w,o);h.push(v*Z.x,x*Z.y,_*Z.z),u.push(v*w.x,x*w.y,_*w.z),d.push(0,0),M.push(f++),I+=Rw/T}S.push(M)}let E=S.length-1;for(let T=0;T<E;T++){let M=S[T],C=S[T+1],D=M.length-1;A(M[0],C[1],C[0]);for(let P=1;P<=D;P++)A(M[P-1],M[P],C[P]),A(M[P],C[P+1],C[P])}}}},nL=class extends ze{constructor(i=[],e=[],t="",n=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),h(),this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(a,2));return;function c(){var G;r=Math.min(1-1e-5,r),r==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[t],d=new R,f=d.clone(),p=new sn,m=r*n,y=n-m,g=s+1,v=new R,x=(U,Z)=>v.subVectors(U,Z).normalize(),_=(U,Z)=>Array(U).fill(void 0).map(Z),w=_(i.length/3,(U,Z)=>new R().fromArray(i,Z*3).setLength(n)),b=[],S=1e6;for(let U=0;U<w.length;U++){let Z=w[U],$=[],W,X,j,H=1e10,V=-1;for(;(V=e.indexOf(U,V+1))!=-1;){let Q=V-V%3;W=e[Q+(V+1)%3],X=e[Q+(V+2)%3],j=Z.distanceToSquared(w[W]),H=Math.min(H,j),$.push([W,X,j])}H+=1e-6;let B=[],q=0,K=$.length;for(let Q=0;Q<K;Q++){[W,X,j]=$[q];let oe=((G=b[W])==null?void 0:G.includes(U))==!0;j<=H&&B.push(W+ +oe*S),q=$.findIndex(ne=>ne[0]==X)}b.push(B)}let A=[];{let U=0,Z=0,$,W,X=u==3;for(let j=0;j<=s;j++){$=j*(j+1)/2,W=(j+1)*(j+2)/2;for(let H=0;H<s-j;H++)[U,Z]=[$+H+j+2,W+H+j+3],A.push($,W,...X?[Z,$]:[U,W],Z,U),[$,W]=[U,Z];A.push($,W,$+s+2)}}let E=d.clone(),T=d.clone(),M=d.clone(),C=d.clone(),D=d.clone(),P=[],I=_(w.length,()=>_(u,()=>d.clone()));for(let U=0;U<w.length;U++){d.copy(w[U]).normalize(),E.copy(d).multiplyScalar(y);let Z=b[U];for(let B=0;B<Z.length;B++){let q=Z[B],K=Z[(B+1)%u];p.setFromPointsAndIndices(w,U,q%S,K%S),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(E,I[U][B])}let $=[],W=[],X=[],j=new R;s==0&&[...I[U]].reduce((B,q)=>B.add(q),j).multiplyScalar(1/u);for(let B=0;B<u;B++){let q=[],K=(B-1+u)%u,Q=I[U][K],oe=I[U][B];d.copy(Q).sub(E),f.copy(oe).sub(E);let ne=E.angleTo(d),L=d.angleTo(f),z=Math.cos(ne)*m;s==0?T.copy(j):T.copy(E).setLength(y+z),W.push(z);let Y=[T,Q,oe];for(let J=0;J<2;J++){let ee=Y[J],F=Y[J+1];C.subVectors(ee,E),D.subVectors(F,E),M.crossVectors(C,D).normalize();for(let N=0;N<g;N++){let te=[ne,L][J]*N/g;d.copy(C).applyAxisAngle(M,te).add(E),$.push(d.clone()),J&&(x(d,E),q.push([N==0?ee:d.clone(),v.clone()]))}J&&(x(F,E),q.push([F,v.clone()]))}X.push(q)}P.push(X);let H=2*g,V=2;for(let B=0;B<u;B++){let q=H*B,K=H*((B+1)%u),Q=[$[q]];for(let ne=1;ne<g;ne++){C=$[q+ne],D=$[K+ne],Q.push(C);for(let L=1,z=ne-V+1;L<=z;L++)d.lerpVectors(C,D,L/(z+1)),d.sub(E).setLength(W[B]).add(E),Q.push(d.clone());Q.push(D)}for(let ne=0;ne<g;ne++)Q.push($[ne+g+q]);Q.push($[K+g]);let oe=A.map(ne=>Q[ne]);o.push(...oe.map(ne=>[ne.x,ne.y,ne.z]).flat()),l.push(...oe.map(ne=>(x(ne,E),[v.x,v.y,v.z])).flat())}}let k=[];for(let U=0;U<b.length;U++)for(let Z=0;Z<u;Z++){let $=b[U][Z];if($<S){let W=b[$].findIndex(H=>H%S==U),X=P[U][Z],j=P[$][W];for(let H=0;H<g;H++){let V=X[H],B=j[g-H],q=X[H+1],K=j[g-(H+1)];[V,B,q,q,B,K].forEach(Q=>{o.push(Q[0].x,Q[0].y,Q[0].z),l.push(Q[1].x,Q[1].y,Q[1].z)})}k.push(X[0][0],j[g][0],X[g][0],j[0][0])}}for(;k.length;){let U,Z,$,W;[U,Z]=k.splice(0,2);let X=[U];for(;U!=Z;)X.push(Z),$=k.indexOf(Z),W=$%2,Z=k.splice($-W,2)[1-W];v.subVectors(X[0],X[1]).cross(d.subVectors(X[0],X[2])).normalize();let j=v.dot(X[0])<0;j&&v.negate();for(let H=1;H<=X.length-2;H++)[X[H+ +j],X[H+1-+j],X[0]].forEach(V=>{o.push(V.x,V.y,V.z),l.push(v.x,v.y,v.z)})}}function h(){let u=new R;for(let b=0;b<o.length;b+=3){u.x=o[b+0],u.y=o[b+1],u.z=o[b+2];let S=_(u)/2/Math.PI+.5,A=w(u)/Math.PI+.5;a.push(S,1-A)}let d=new R,f=new R,p=new R,m=new R,y=new ae,g=new ae,v=new ae,x=(b,S,A,E)=>{E<0&&b.x===1&&(a[S]=b.x-1),A.x===0&&A.z===0&&(a[S]=E/2/Math.PI+.5)};for(let b=0,S=0;b<o.length;b+=9,S+=6){d.set(o[b+0],o[b+1],o[b+2]),f.set(o[b+3],o[b+4],o[b+5]),p.set(o[b+6],o[b+7],o[b+8]),y.set(a[S+0],a[S+1]),g.set(a[S+2],a[S+3]),v.set(a[S+4],a[S+5]),m.copy(d).add(f).add(p).divideScalar(3);let A=_(m);x(y,S+0,d,A),x(g,S+2,f,A),x(v,S+4,p,A)}for(let b=0;b<a.length;b+=6){let S=a[b+0],A=a[b+2],E=a[b+4],T=Math.max(S,A,E),M=Math.min(S,A,E);T>.9&&M<.1&&(S<.2&&(a[b+0]+=1),A<.2&&(a[b+2]+=1),E<.2&&(a[b+4]+=1))}function _(b){return Math.atan2(b.z,-b.x)}function w(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(i){return new nL(i.vertices,i.indices,i.radius,i.corner,i.cornerSides)}},OHe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,detail:r,corner:s,cornerSides:o}=i.parameters,a=r===0&&s!==0?new mee(e*.5,s,o):new ZX(e*.5,r);return a.scale(1,t/e,n/e),Object.assign(a,{userData:{...i,type:"DodecahedronGeometry"}})}},mee=class extends nL{constructor(i=1,e=.2,t=4){let n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,i,e,t),this.type=a}static fromJSON(i){return new mee(i.radius,i.corner,i.cornerSides)}},Xg=1e-12,rL=class{constructor(i){this.position=new ae,this.startPosition=new ae,this.uuid=hi.generateUUID(),this.position=i.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(i){this.position.copy(this.startPosition).add(i)}copy(i){return this.position.copy(i.position),this.startPosition.copy(i.startPosition),this}clone(){return new rL(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},vM=class extends rL{constructor(i){super(i.position),this.parent=i}copy(i){return super.copy(i),this}clone(){return new vM(this.parent).copy(this)}},f1=class extends rL{constructor(i,e){super(e),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=i,this.controls.push(new vM(this),new vM(this))}static create(i,e){let t=new f1(i,new ae(...e.position));return t.controls[0].position.set(...e.controlPrevious.position),t.controls[1].position.set(...e.controlNext.position),t.roundness=e.roundness,t.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored,t}getOppositeControl(i){let e=this.controls.indexOf(i);return e===0?this.controls[1]:e===1?this.controls[0]:null}applyOffsetToControls(i,e=1){for(let t=0,n=this.controls.length;t<n;t++){let r=this.controls[t];this.position.distanceTo(r.position)<=e?r.position.copy(this.position):r.applyOffset(i)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(i){return super.copy(i),this.controls[0].copy(i.controls[0]),this.controls[1].copy(i.controls[1]),this.roundness=i.roundness,this.uuid=i.uuid,this}clone(){return new f1(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var t,n;let i=(t=this.curveBefore)==null?void 0:t.getTangentAt(1),e=(n=this.curveAfter)==null?void 0:n.getTangentAt(0);return[i,e]}computeNormals(i=new ae,e=new ae){let[t,n]=this.computeTangents();return t&&n&&(IU(t,i),IU(n,e)),[i,e]}computeTangent(i=new ae){let[e,t]=this.computeTangents();return e&&t&&i.copy(e).add(t).normalize(),i}computeNormal(i=new ae){let[e,t]=this.computeNormals();return i.copy(e).add(t).normalize(),i}};function IU(i,e=new ae){let t=i.length();return e.set(-i.y/t,i.x/t)}var sL=i=>i,Hm=new ae,O7=new ae,RHe=new ae,NHe=new ae,FHe=new ae,zHe=new ae,gee=new R,vee=new R;function kHe(i){let e=new ae;e.addVectors(i.v0,Hm.subVectors(i.v1,i.v0).multiplyScalar(2/3));let t=new ae;return t.addVectors(i.v2,O7.subVectors(i.v1,i.v2).multiplyScalar(2/3)),new Uo(i.v0,e,t,i.v2)}function M2(i,e,t=Number.EPSILON){return Math.abs(i-e)<t}function BHe(i,e,t=Number.EPSILON){return i.distanceTo(e)<t}function UHe(i,e,t=Number.EPSILON){return i.distanceTo(e)<t}function yee(i,e,t){let n=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));return Math.acos((r*r+n*n-s*s)/(2*r*n))}function VHe(i,e,t){return RU(i,e)&&RU(e,t)&&yM(i.position,e.position,t.position)}function yM(i,e,t){return Hm.copy(e).sub(i).cross(O7.copy(t).sub(i))===0}function GHe(i,e,t,n,r){let s=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),o=(i.y+e.y)/2,a=(i.x+e.x)/2,l=Math.sqrt(Math.pow(t,2)-Math.pow(s/2,2))*(i.y-e.y)/s,c=Math.sqrt(Math.pow(t,2)-Math.pow(s/2,2))*(e.x-i.x)/s;return n.set(a+l,o+c),r.set(a-l,o-c),[n,r]}function jHe(i,e,t){let n=i.distanceTo(t),r=e.distanceTo(t);return n<r?e:i}function HHe(i,e,t,n,r,s){let o=e.x-i.x,a=e.y-i.y,l=t.x-i.x,c=t.y-i.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return yee(e,i,t)>Math.PI&&(h*=-1),M2(c,a)?u=(a+c)*(n/h-.5)*8/3/(o-l):u=(o+l)*(n/h-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(t.x+u*c,t.y-u*l),[r,s]}function OU(i,e){return i.position.equals(i.controls[1].position)&&e.position.equals(e.controls[0].position)}function RU(i,e){return yM(i.position,i.controls[1].position,e.position)&&yM(i.position,e.controls[0].position,e.position)}function WHe(i,e,t,n,r=.5){let s=Hm.subVectors(e,i).multiplyScalar(r).add(i),o=O7.subVectors(t,e).multiplyScalar(r).add(e),a=RHe.subVectors(n,t).multiplyScalar(r).add(t),l=s,c=NHe.subVectors(o,s).multiplyScalar(r).add(s),h=FHe.subVectors(a,o).multiplyScalar(r).add(o),u=a,d=zHe.subVectors(h,c).multiplyScalar(r).add(c);return[i.x,i.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,n.x,n.y]}function $He(i,e,t=12,n=!0){let r=vee.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=sL(e[a]),c=Hm,h=Id(l,t);for(let u=0;u<=h;u++)if(l instanceof Uo||l instanceof ec||l instanceof Ho){if(l.getPoint(u/h,c),r.set(c.x,c.y,0),s!==void 0&&UHe(s,r))continue;s===void 0&&(s=gee),s.copy(r),i.setXYZ(o,r.x,r.y,r.z),o++}}return n&&o>1&&!(i.getX(o-1)===i.getX(0)&&i.getY(o-1)===i.getY(0)&&i.getZ(o-1)===i.getZ(0))&&(i.setXYZ(o,i.getX(0),i.getY(0),i.getZ(0)),o++),i}function qHe(i,e,t,n=12,r=!0){let s=vee.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(t[l]===!1)continue;let c,h=sL(e[l]),u=Hm,d=Id(h,n);a.push(d);for(let f=0;f<=d;f++)if(h instanceof Uo||h instanceof ec||h instanceof Ho){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=gee:(i.setXYZ(o,c.x,c.y,c.z),o++,i.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(i.getX(o-1)===i.getX(0)&&i.getY(o-1)===i.getY(0)&&i.getZ(o-1)===i.getZ(0))&&(i.setXYZ(o,i.getX(0),i.getY(0),i.getZ(0)),o++),a}function NU(i,e=12,t=!1){let n=[];for(let r=0,s=i.length;r<s;r++){let o=i[r],a=0;if(t&&o.roundedCurveCorner!==void 0){let l=Id(o.roundedCurveCorner,e)*.5;r>0&&(n[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Id(o.curveAfter,e)),n.push(a)}return i.length>0&&t&&i[0].roundedCurveCorner!==void 0&&(n[i.length-1]+=Id(i[0].roundedCurveCorner,e)*.5),n}function Id(i,e=12){return i&&i instanceof ry?e*2:i&&(i instanceof Ho||i instanceof JX)?1:i&&i instanceof Jx?e*i.points.length:e}function XHe(i,e,t=12,n=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=sL(e[o]),l=Id(a,t),c=Hm;for(let h=0;h<=l;h++)if(a instanceof Uo||a instanceof ec||a instanceof Ho){if(a.getPoint(h/l,c),r!==void 0&&BHe(r,c,Xg))continue;r===void 0&&(r=O7),r.copy(c),i.push(c.x,c.y),s++}}return M2(i[0],i[i.length-2],Xg)&&M2(i[1],i[i.length-1],Xg)&&(i.pop(),i.pop()),n&&s>1&&!(M2(i[s-1],i[1],Xg)&&M2(i[s-2],i[0],Xg))&&(i.push(i[0],i[1]),s++),i}var Nw=new ae,YHe=new ae,ZHe=new ae,QHe=new ae,KHe=new ae,JHe=new ae,ln=class extends Wo{constructor(i=100,e=100){super(),this.points=[],this.shapeHoles=[],this.plane=new va(new R(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=hi.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=i,this._height=e}static createFromState(i,e,t){let n=new ln;return n.isClosed=i.isClosed,n.points=i.points.map(r=>f1.create(r.id,r.data)),typeof i.roundness=="number"&&(n.roundness=i.roundness),n.shapeHoles=i.shapeHoles.map(r=>ln.createFromState(r)),e!==void 0&&t!==void 0&&n.applySize(e,t),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(i){if(this._roundness!==i){this._roundness=i;for(let e=0,t=this.points.length;e<t;e++)this.points[e].roundness=i;this.needsUpdate=!0}}getPointsIndexesByIds(i){return i.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(i){let e=this.points.length,t=this.points.findIndex(n=>n.uuid===i);if(t<0){let n=e;for(let r=0,s=this.shapeHoles.length;r<s;r++){let o=this.shapeHoles[r],a=o.points.length,l=o.getPointIndexById(i);if(l<0)n+=a;else return l+n}}return t}getLineIndexById(i){return this.getPointIndexById(i)}getBezierPoint(i){if(i<=this.points.length-1)return this.points[i];if(this.shapeHoles.length>0){let e=this.points.length;for(let t=0,n=this.shapeHoles.length;t<n;t++){let r=this.shapeHoles[t],s=i-e;if(s<=r.points.length-1)return r.points[s];e+=r.points.length}}throw new Error("This shape does not have a point for this index: "+i)}getBezierPointIndex(i){let e=this.points.indexOf(i);if(e>=0)return e;if(e=this.points.length,this.shapeHoles.length>0)for(let t=0,n=this.shapeHoles.length;t<n;t++){let r=this.shapeHoles[t],s=r.points.indexOf(i);if(s>=0)return e+s;e+=r.points.length}return-1}getAllPoints(){let i=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...i]}applySize(i,e){i===0&&(i=.001),e===0&&(e=.001),this._width=i,this._height=e}applyScale(i,e){let t=Nw.set(i,e);for(let n=0,r=this.points.length;n<r;n++){let s=this.points[n];s.position.multiply(t),s.controls[0].position.multiply(t),s.controls[1].position.multiply(t)}for(let n=0,r=this.shapeHoles.length;n<r;n++)this.shapeHoles[n].applyScale(i,e);this._update()}createPoint(i,e=0,t=hi.generateUUID()){let n;i instanceof ae?n=i:n=new ae(i,e);let r=new f1(t,n);return r.roundness=this.roundness,r}addPoint(i){this.points.push(i),this.needsUpdate=!0}addPointAt(i,e){this.points.splice(e,0,i),this.needsUpdate=!0}getPointByUuid(i){for(let e=0,t=this.points.length;e<t;e++){let n=this.points[e];if(n.uuid===i)return n}for(let e=0,t=this.shapeHoles.length;e<t;e++){let n=this.shapeHoles[e].getPointByUuid(i);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(i){let e=this.points.indexOf(i);e>=0&&this.points.splice(e,1),this.needsUpdate=!0}removePointById(i){let e=this.points.find(t=>t.uuid===i);e&&this.removePoint(e)}update(){for(let i=0,e=this.shapeHoles.length;i<e;i++)this.shapeHoles[i].update();this._update()}extractShapePointsToBuffer(i,e=12,t=!1){this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e);let n=t?this.roundedCurveDivisions:this.curveDivisions;return $He(i,t?this.roundedCurves:this.curves,e,this.autoClose),n.reduce((r,s)=>r+s,0)+1}computeCurveDivisions(i=12){return this.curveDivisions=NU(this.points,i,!1),this.roundedCurveDivisions=NU(this.points,i,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(i,e,t=12){return qHe(i,this.curves,e,t,this.autoClose).reduce((n,r)=>n+r,0)*2}extractShapePointsToFlatArray(i,e=12){return this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e),XHe(i,this.roundedCurves,e,this.autoClose)}getCurveIndexFromVertexId(i,e=!1){let t=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let n=e?this.roundedCurveDivisions:this.curveDivisions,r=0;e&&this.points[0].roundedCurveCorner!==void 0&&(r=Id(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=i-r;s<0&&(s+=n.reduce((o,a)=>o+a,0));for(let o=0,a=n.length;o<a;o++){let l=n[o];if(s<t+l)return[o,(s-t+1)/l];t+=l}return[0,1]}getCurveT(i,e,t){let n=this.points[i],r=this.points[i>=this.points.length-1?0:i+1],s=this.curveDivisions,o=s[i];if(OU(n,r)){let l=n.position.distanceTo(r.position);return n.position.distanceTo(Nw.set(t.x,t.y))/l}let a=0;for(let l=0;l<i;l++)a+=s[l];return(e-a)/o}dispose(){}_applyCurveForPoint(i,e){OU(e,i)?this.lineTo(i.position.x,i.position.y):this.bezierCurveTo(e.controls[1].position.x,e.controls[1].position.y,i.controls[0].position.x,i.controls[0].position.y,i.position.x,i.position.y);let t=this.curves[this.curves.length-1];i.curveBefore=t,e.curveAfter=t;let n=t.clone();i.roundedCurveBefore=n,e.roundedCurveAfter=n,i.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let e=0,t=this.points.length;e<t;e++){let n=this.points[e];if(e===0)this.moveTo(n.position.x,n.position.y);else{let r=this.points[e-1];this._applyCurveForPoint(n,r)}}let i=this.getLastPoint();if(i!=null&&i.curveAfter&&(i.curveAfter=void 0),this.isClosed){let e=this.points[0],t=this.points[this.points.length-1];this._applyCurveForPoint(e,t)}if(this.points.length>2){let e=0;for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t],s=this.points[t-1]??this.points[this.points.length-1],o=this.points[t+1]??this.points[0],a=r.roundness,l=s&&o&&VHe(s,r,o);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,h=r.curveAfter;if(c===void 0||h===void 0)continue;let u=r.roundedCurveBefore,d=r.roundedCurveAfter,f=c.getLength(),p=h.getLength(),m=Math.min(a,f*.499),y=Math.min(a,p*.499),g=Math.min(m,y),v=1-g/f,x=g/p,_=c.getPointAt(v,Nw),w=h.getPointAt(x,YHe);this._subSplitCurve(c,u,v,_,void 0),this._subSplitCurve(h,d,x,void 0,w);let b;if(this.useCubicForRoundedCorners){let S=yee(_,r.position,w)/2,A=Math.tan(S)*_.distanceTo(r.position),[E,T]=GHe(_,w,A,ZHe,QHe),M=jHe(E,T,r.position),[C,D]=HHe(M,_,w,A,KHe,JHe);b=new Uo(_.clone(),C.clone(),D.clone(),w.clone())}else b=new ec(_.clone(),r.position.clone(),w.clone());r.roundedCurveCorner=b,this.roundedCurves.splice(t+e,0,b),e++}}}}_subSplitCurve(i,e,t,n,r){if(i instanceof Ho)n!==void 0&&e.v2.copy(n),r!==void 0&&e.v1.copy(r);else{let s=i,o=e,a=s.getUtoTmapping(t,0),l=WHe(s.v0,s.v1,s.v2,s.v3,a);return n!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),r!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return e}clone(){let i=new ln(this._width,this._height);return i.points=this.points.map(e=>e.clone()),i.isClosed=this.isClosed,i.roundness=this.roundness,i.isMesh2D=this.isMesh2D,i.shapeHoles=this.shapeHoles.map(e=>e.clone()),i}toJSON(){return{points:this.points.reduce((i,e)=>i.concat(e.toJSON()),[]),shapeHoles:this.shapeHoles.map(i=>i.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(i){var t;this.points=[],this.pointIDs=0;let e=i.points.length/7;for(let n=0;n<e;n++){let r=n*7,s=i.points[r+0],o=i.points[r+1],a=i.points[r+2],l=i.points[r+3],c=i.points[r+4],h=i.points[r+5],u=i.points[r+6],d=new f1(hi.generateUUID(),new ae(s,o));d.controls[0].position.set(a,l),d.controls[1].position.set(c,h),d.roundness=u,this.points.push(d)}return this.shapeHoles=(t=i.shapeHoles)!=null&&t.length?i.shapeHoles.map(n=>{let r=new ln;return r.fromJSON(n),r}):[],this.isClosed=i.isClosed,this._roundness=i.roundness,this._update(),this}fromShape(i){let e=(n,r)=>{r instanceof Uo&&r.v3.equals(n.position)&&n.controls[0].position.copy(r.v2)},t=n=>{let r=[],s,o;for(s=0,o=n.length;s<o;s++)n[s]instanceof ec&&(n[s]=kHe(n[s]));for(s=0,o=n.length;s<o;s++){let c=n[s],h=s>0?n[s-1]:null,u;c instanceof Uo?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof Ho&&(u=this.createPoint(c.v1)),u!==void 0&&(h!==null&&e(u,h),r.push(u))}let a=n[n.length-1],l=!1;return a instanceof Uo?a.v3.equals(r[0].position)&&(r[0].controls[0].position.copy(a.v2),l=!0):a instanceof Ho&&a.v2.equals(r[0].position)&&(l=!0),this.isClosed=l,r};return this.points=t(i.curves),i instanceof Wo&&(this.shapeHoles=i.holes.map(n=>{let r=new ln;return r.fromShape(n),r})),this.update(),this}updatePoint(i,e){let t=this.getPointByUuid(i);t&&(e.position!==void 0&&t.position.fromArray(e.position),e.roundness!==void 0&&(t.roundness=e.roundness),e.areControlsDirectionsMirrored!==void 0&&(t.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(i,e){var n;let t=(n=this.getPointByUuid(i))==null?void 0:n.controls[0];t&&(e.position&&t.position.fromArray(e.position),this.needsUpdate=!0)}updateNextControl(i,e){var n;let t=(n=this.getPointByUuid(i))==null?void 0:n.controls[1];t&&(e.position&&t.position.fromArray(e.position),this.needsUpdate=!0)}},xM=Math.PI*2;function Fw({x:i,y:e},t,n,r,s){return{x:i*t+r,y:e*n+s}}function eWe(i,e){let t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=Math.cos(i),r=Math.sin(i),s=Math.cos(i+e),o=Math.sin(i+e);return[{x:n-r*t,y:r+n*t},{x:s+o*t,y:o-s*t},{x:s,y:o}]}function FU(i,e,t,n){let r=i*n-e*t<0?-1:1,s=Math.min(1,Math.max(-1,i*t+e*n));return r*Math.acos(s)}function tWe(i,e,t,n,r,s,o,a,l,c){let h=Math.pow(r,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),p=h*u-h*f-u*d;p<0&&(p=0),p/=h*f+u*d,p=Math.sqrt(p)*(l===c?-1:1);let m=p*r/s*a,y=p*-s/r*o,g=m+(i+t)/2,v=y+(e+n)/2,x=(o-m)/r,_=(a-y)/s,w=(-o-m)/r,b=(-a-y)/s,S=FU(1,0,x,_),A=FU(x,_,w,b);return!c&&A>0&&(A-=xM),c&&A<0&&(A+=xM),{centerx:g,centery:v,ang1:S,ang2:A}}function iWe({px:i,py:e,cx:t,cy:n,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(i-t)/2,h=(e-n)/2;if(c===0&&h===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let d=tWe(i,e,t,n,r,s,c,h,o,a),{ang1:f,ang2:p}=d,{centerx:m,centery:y}=d,g=Math.abs(p)/(xM/4);Math.abs(1-g)<1e-7&&(g=1);let v=Math.max(Math.ceil(g),1);p/=v;for(let x=0;x<v;x++)l.push(eWe(f,p)),f+=p;return l.map(x=>{let{x:_,y:w}=Fw(x[0],r,s,m,y),{x:b,y:S}=Fw(x[1],r,s,m,y),{x:A,y:E}=Fw(x[2],r,s,m,y);return{x1:_,y1:w,x2:b,y2:S,x:A,y:E}})}var fi;(function(i){i[i.ODD=0]="ODD",i[i.NONZERO=1]="NONZERO",i[i.POSITIVE=2]="POSITIVE",i[i.NEGATIVE=3]="NEGATIVE",i[i.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(fi||(fi={}));var Gn;(function(i){i[i.POLYGONS=0]="POLYGONS",i[i.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",i[i.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Gn||(Gn={}));function it(i,e){if(!i)throw e||"Assertion Failed!"}var Ze=function(){function i(){}return i.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},i.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},i.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},i.edgeGoesLeft=function(e){return i.vertLeq(e.Dst,e.Org)},i.edgeGoesRight=function(e){return i.vertLeq(e.Org,e.Dst)},i.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},i.edgeEval=function(e,t,n){it(i.vertLeq(e,t)&&i.vertLeq(t,n));var r=t.s-e.s,s=n.s-t.s;return r+s>0?r<s?t.t-e.t+(e.t-n.t)*(r/(r+s)):t.t-n.t+(n.t-e.t)*(s/(r+s)):0},i.edgeSign=function(e,t,n){it(i.vertLeq(e,t)&&i.vertLeq(t,n));var r=t.s-e.s,s=n.s-t.s;return r+s>0?(t.t-n.t)*r+(t.t-e.t)*s:0},i.transEval=function(e,t,n){it(i.transLeq(e,t)&&i.transLeq(t,n));var r=t.t-e.t,s=n.t-t.t;return r+s>0?r<s?t.s-e.s+(e.s-n.s)*(r/(r+s)):t.s-n.s+(n.s-e.s)*(s/(r+s)):0},i.transSign=function(e,t,n){it(i.transLeq(e,t)&&i.transLeq(t,n));var r=t.t-e.t,s=n.t-t.t;return r+s>0?(t.s-n.s)*r+(t.s-e.s)*s:0},i.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},i.interpolate=function(e,t,n,r){return e=e<0?0:e,n=n<0?0:n,e<=n?n===0?(t+r)/2:t+(r-t)*(e/(e+n)):r+(t-r)*(n/(e+n))},i.intersect=function(e,t,n,r,s){var o,a,l;i.vertLeq(e,t)||(l=e,e=t,t=l),i.vertLeq(n,r)||(l=n,n=r,r=l),i.vertLeq(e,n)||(l=e,e=n,n=l,l=t,t=r,r=l),i.vertLeq(n,t)?i.vertLeq(t,r)?(o=i.edgeEval(e,n,t),a=i.edgeEval(n,t,r),o+a<0&&(o=-o,a=-a),s.s=i.interpolate(o,n.s,a,t.s)):(o=i.edgeSign(e,n,t),a=-i.edgeSign(e,r,t),o+a<0&&(o=-o,a=-a),s.s=i.interpolate(o,n.s,a,r.s)):s.s=(n.s+t.s)/2,i.transLeq(e,t)||(l=e,e=t,t=l),i.transLeq(n,r)||(l=n,n=r,r=l),i.transLeq(e,n)||(l=e,e=n,n=l,l=t,t=r,r=l),i.transLeq(n,t)?i.transLeq(t,r)?(o=i.transEval(e,n,t),a=i.transEval(n,t,r),o+a<0&&(o=-o,a=-a),s.t=i.interpolate(o,n.t,a,t.t)):(o=i.transSign(e,n,t),a=-i.transSign(e,r,t),o+a<0&&(o=-o,a=-a),s.t=i.interpolate(o,n.t,a,r.t)):s.t=(n.t+t.t)/2},i}(),Yg=function(){function i(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return i}(),M4=function(){function i(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(i.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),i}(),bp=function(){function i(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return i}(),zU=function(){function i(){var e=new bp,t=new Yg,n=new M4(0),r=new M4(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=r,r.next=r,r.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=r}return i.prototype.makeEdge_=function(e){var t=new M4(0),n=new M4(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return n.next=r,r.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},i.prototype.splice_=function(e,t){var n=e.Onext,r=t.Onext;n.Sym.Lnext=t,r.Sym.Lnext=e,e.Onext=r,t.Onext=n},i.prototype.makeVertex_=function(e,t,n){var r=e;it(r,"Vertex can't be null!");var s=n.prev;r.prev=s,s.next=r,r.next=n,n.prev=r,r.anEdge=t;var o=t;do o.Org=r,o=o.Onext;while(o!==t)},i.prototype.makeFace_=function(e,t,n){var r=e;it(r,"Face can't be null");var s=n.prev;r.prev=s,s.next=r,r.next=n,n.prev=r,r.anEdge=t,r.trail=null,r.marked=!1,r.inside=n.inside;var o=t;do o.Lface=r,o=o.Lnext;while(o!==t)},i.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},i.prototype.killVertex_=function(e,t){var n=e.anEdge,r=n;do r.Org=t,r=r.Onext;while(r!==n);var s=e.prev,o=e.next;o.prev=s,s.next=o},i.prototype.killFace_=function(e,t){var n=e.anEdge,r=n;do r.Lface=t,r=r.Lnext;while(r!==n);var s=e.prev,o=e.next;o.prev=s,s.next=o},i.prototype.makeEdge=function(){var e=new bp,t=new bp,n=new Yg,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(t,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},i.prototype.splice=function(e,t){var n=!1,r=!1;if(e!==t){if(t.Org!==e.Org&&(r=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!r){var s=new bp;this.makeVertex_(s,t,e.Org),e.Org.anEdge=e}if(!n){var o=new Yg;this.makeFace_(o,t,e.Lface),e.Lface.anEdge=e}}},i.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var r=new Yg;this.makeFace_(r,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},i.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var r=new bp;return this.makeVertex_(r,n,t.Org),t.Lface=n.Lface=e.Lface,t},i.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e),n=t.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,n),e.Dst=n.Org,n.Dst.anEdge=n.Sym,n.Rface=e.Rface,n.winding=e.winding,n.Sym.winding=e.Sym.winding,n.idx=e.idx,n.Sym.idx=e.Sym.idx,n},i.prototype.connect=function(e,t){var n=!1,r=this.makeEdge_(e),s=r.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,t),r.Org=e.Dst,s.Org=t.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!n){var o=new Yg;this.makeFace_(o,r,e.Lface)}return r},i.prototype.zapFace=function(e){var t=e.anEdge,n,r,s,o,a;r=t.Lnext;do n=r,r=n.Lnext,n.Lface=null,n.Rface===null&&(n.Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),s=n.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(n));while(n!=t);o=e.prev,a=e.next,a.prev=o,o.next=a},i.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do n++,t=t.Lnext;while(t!==e.anEdge);return n},i.prototype.mergeConvexFaces=function(e){var t,n,r,s,o,a,l;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(n=t.anEdge,o=n.Org;r=n.Lnext,s=n.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(t),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&Ze.vertCCW(n.Lprev.Org,n.Org,s.Lnext.Lnext.Org)&&Ze.vertCCW(s.Lprev.Org,s.Org,n.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),n=null,s=null)),!(n&&n.Lnext.Org===o);)n=r;return!0},i.prototype.check=function(){var e=this.fHead,t=this.vHead,n=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){it(r.prev===s),l=r.anEdge;do it(l.Sym!==l),it(l.Sym.Sym===l),it(l.Lnext.Onext.Sym===l),it(l.Onext.Sym.Lnext===l),it(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(it(r.prev===s&&r.anEdge===null),a=t,a=t;(o=a.next)!==t;a=o){it(o.prev===a),l=o.anEdge;do it(l.Sym!==l),it(l.Sym.Sym===l),it(l.Lnext.Onext.Sym===l),it(l.Onext.Sym.Lnext===l),it(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(it(o.prev===a&&o.anEdge===null),c=n,c=n;(l=c.next)!==n;c=l)it(l.Sym.next===c.Sym),it(l.Sym!==l),it(l.Sym.Sym===l),it(l.Org!==null),it(l.Dst!==null),it(l.Lnext.Onext.Sym===l),it(l.Onext.Sym.Lnext===l);it(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},i}(),kU=function(){function i(){this.handle=null}return i}(),BU=function(){function i(){this.key=null,this.node=0}return i}(),nWe=function(){function i(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new kU,this.handles[n]=new BU;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return i.prototype.floatDown_=function(e){var t=this.nodes,n=this.handles,r,s,o;for(r=t[e].handle;;){if(o=e<<1,o<this.size&&this.leq(n[t[o+1].handle].key,n[t[o].handle].key)&&++o,it(o<=this.max),s=t[o].handle,o>this.size||this.leq(n[r].key,n[s].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=s,n[s].node=e,e=o}},i.prototype.floatUp_=function(e){var t=this.nodes,n=this.handles,r,s,o;for(r=t[e].handle;;){if(o=e>>1,s=t[o].handle,o===0||this.leq(n[s].key,n[r].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=s,n[s].node=e,e=o}},i.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},i.prototype.min=function(){return this.handles[this.nodes[1].handle].key},i.prototype.insert=function(e){var t,n;if(t=++this.size,t*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new kU;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new BU}return this.freeList===0?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},i.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,r=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},i.prototype.delete=function(e){var t=this.nodes,n=this.handles,r;it(e>=1&&e<=this.max&&n[e].key!==null),r=n[e].node,t[r].handle=t[this.size].handle,n[t[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(n[t[r>>1].handle].key,n[t[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),n[e].key=null,n[e].node=this.freeList,this.freeList=e},i}(),zw=function(){function i(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return i}(),UU=function(){function i(){this.key=null,this.next=null,this.prev=null}return i}(),rWe=function(){function i(e,t){this.frame=e,this.leq=t,this.head=new UU,this.head.next=this.head,this.head.prev=this.head}return i.prototype.min=function(){return this.head.next},i.prototype.max=function(){return this.head.prev},i.prototype.insert=function(e){return this.insertBefore(this.head,e)},i.prototype.search=function(e){var t=this.head;do t=t.next;while(t.key!==null&&!this.leq(this.frame,e,t.key));return t},i.prototype.insertBefore=function(e,t){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,t));var n=new UU;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},i.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},i}(),sWe=function(){function i(){}return i.regionBelow=function(e){return e.nodeUp.prev.key},i.regionAbove=function(e){return e.nodeUp.next.key},i.debugEvent=function(e){},i.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},i.edgeLeq=function(e,t,n){var r=e.event,s=t.eUp,o=n.eUp;if(s.Dst===r)return o.Dst===r?Ze.vertLeq(s.Org,o.Org)?Ze.edgeSign(o.Dst,s.Org,o.Org)<=0:Ze.edgeSign(s.Dst,o.Org,s.Org)>=0:Ze.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return Ze.edgeSign(s.Dst,r,s.Org)>=0;var a=Ze.edgeEval(s.Dst,r,s.Org),l=Ze.edgeEval(o.Dst,r,o.Org);return a>=l},i.deleteRegion=function(e,t){t.fixUpperEdge&&it(t.eUp.winding===0),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},i.fixUpperEdge=function(e,t,n){it(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},i.topLeftRegion=function(e,t){var n=t.eUp.Org,r;do t=i.regionAbove(t);while(t.eUp.Org===n);if(t.fixUpperEdge){if(r=e.mesh.connect(i.regionBelow(t).eUp.Sym,t.eUp.Lnext),r===null)return null;i.fixUpperEdge(e,t,r),t=i.regionAbove(t)}return t},i.topRightRegion=function(e){var t=e.eUp.Dst;do e=i.regionAbove(e);while(e.eUp.Dst===t);return e},i.addRegionBelow=function(e,t,n){var r=new zw;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},i.isWindingInside=function(e,t){switch(e.windingRule){case fi.ODD:return(t&1)!==0;case fi.NONZERO:return t!==0;case fi.POSITIVE:return t>0;case fi.NEGATIVE:return t<0;case fi.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},i.computeWinding=function(e,t){t.windingNumber=i.regionAbove(t).windingNumber+t.eUp.winding,t.inside=i.isWindingInside(e,t.windingNumber)},i.finishRegion=function(e,t){var n=t.eUp,r=n.Lface;r.inside=t.inside,r.anEdge=n,i.deleteRegion(e,t)},i.finishLeftRegions=function(e,t,n){for(var r,s=null,o=t,a=t.eUp;o!==n;){if(o.fixUpperEdge=!1,s=i.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){i.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),i.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),i.finishRegion(e,o),a=s.eUp,o=s}return a},i.addRightEdges=function(e,t,n,r,s,o){var a,l,c,h,u=!0;c=n;do it(Ze.vertLeq(c.Org,c.Dst)),i.addRegionBelow(e,t,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=i.regionBelow(t).eUp.Rprev),l=t,h=s;a=i.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=i.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&i.checkForRightSplice(e,l)&&(i.addWinding(c,h),i.deleteRegion(e,l),e.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,it(l.windingNumber-c.winding===a.windingNumber),o&&i.walkDirtyRegions(e,l)},i.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},i.vertexWeights=function(e,t,n){var r=Ze.vertL1dist(t,e),s=Ze.vertL1dist(n,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*t.coords[0]+a*n.coords[0],e.coords[1]+=o*t.coords[1]+a*n.coords[1],e.coords[2]+=o*t.coords[2]+a*n.coords[2]},i.getIntersectData=function(e,t,n,r,s,o){t.coords[0]=t.coords[1]=t.coords[2]=0,t.idx=-1,i.vertexWeights(t,n,r),i.vertexWeights(t,s,o)},i.checkForRightSplice=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp;if(Ze.vertLeq(r.Org,s.Org)){if(Ze.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Ze.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),i.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),t.dirty=n.dirty=!0)}else{if(Ze.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;i.regionAbove(t).dirty=t.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},i.checkForLeftSplice=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp,o;if(it(!Ze.vertEq(r.Dst,s.Dst)),Ze.vertLeq(r.Dst,s.Dst)){if(Ze.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;i.regionAbove(t).dirty=t.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=t.inside}else{if(Ze.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;t.dirty=n.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=t.inside}return!0},i.checkForIntersect=function(e,t){var n=i.regionBelow(t),r=t.eUp,s=n.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,h,u,d=new bp,f,p;if(it(!Ze.vertEq(c,l)),it(Ze.edgeSign(l,e.event,o)<=0),it(Ze.edgeSign(c,e.event,a)>=0),it(o!==e.event&&a!==e.event),it(!t.fixUpperEdge&&!n.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(Ze.vertLeq(o,a)){if(Ze.edgeSign(c,o,a)>0)return!1}else if(Ze.edgeSign(l,a,o)<0)return!1;return i.debugEvent(e),Ze.intersect(l,o,c,a,d),it(Math.min(o.t,l.t)<=d.t),it(d.t<=Math.max(a.t,c.t)),it(Math.min(c.s,l.s)<=d.s),it(d.s<=Math.max(a.s,o.s)),Ze.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),f=Ze.vertLeq(o,a)?o:a,Ze.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Ze.vertEq(d,o)||Ze.vertEq(d,a)?(i.checkForRightSplice(e,t),!1):!Ze.vertEq(l,e.event)&&Ze.edgeSign(l,e.event,d)>=0||!Ze.vertEq(c,e.event)&&Ze.edgeSign(c,e.event,d)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),t=i.topLeftRegion(e,t),r=i.regionBelow(t).eUp,i.finishLeftRegions(e,i.regionBelow(t),n),i.addRightEdges(e,t,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),n=t,t=i.topRightRegion(t),p=i.regionBelow(t).eUp.Rprev,n.eUp=s.Oprev,s=i.finishLeftRegions(e,n,null),i.addRightEdges(e,t,s.Onext,r.Rprev,p,!0),!0):(Ze.edgeSign(l,e.event,d)>=0&&(i.regionAbove(t).dirty=t.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),Ze.edgeSign(c,e.event,d)<=0&&(t.dirty=n.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),i.getIntersectData(e,r.Org,o,l,a,c),i.regionAbove(t).dirty=t.dirty=n.dirty=!0,!1)},i.walkDirtyRegions=function(e,t){for(var n=i.regionBelow(t),r,s;;){for(;n.dirty;)t=n,n=i.regionBelow(n);if(!t.dirty&&(n=t,t=i.regionAbove(t),t===null||!t.dirty))return;if(t.dirty=!1,r=t.eUp,s=n.eUp,r.Dst!==s.Dst&&i.checkForLeftSplice(e,t)&&(n.fixUpperEdge?(i.deleteRegion(e,n),e.mesh.delete(s),n=i.regionBelow(t),s=n.eUp):t.fixUpperEdge&&(i.deleteRegion(e,t),e.mesh.delete(r),t=i.regionAbove(n),r=t.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!t.fixUpperEdge&&!n.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(i.checkForIntersect(e,t))return}else i.checkForRightSplice(e,t);r.Org===s.Org&&r.Dst===s.Dst&&(i.addWinding(s,r),i.deleteRegion(e,t),e.mesh.delete(r),t=i.regionAbove(n))}},i.connectRightVertex=function(e,t,n){var r,s=n.Onext,o=i.regionBelow(t),a=t.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&i.checkForIntersect(e,t),Ze.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),t=i.topLeftRegion(e,t),s=i.regionBelow(t).eUp,i.finishLeftRegions(e,i.regionBelow(t),o),c=!0),Ze.vertEq(l.Org,e.event)&&(e.mesh.splice(n,l.Oprev),n=i.finishLeftRegions(e,o,null),c=!0),c){i.addRightEdges(e,t,n.Onext,s,s,!0);return}Ze.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(n.Lprev,r),i.addRightEdges(e,t,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,i.walkDirtyRegions(e,t)},i.connectLeftDegenerate=function(e,t,n){var r,s,o,a,l;if(r=t.eUp,Ze.vertEq(r.Org,n)){it(!1),i.spliceMergeVertices(e,r,n.anEdge);return}if(!Ze.vertEq(r.Dst,n)){e.mesh.splitEdge(r.Sym),t.fixUpperEdge&&(e.mesh.delete(r.Onext),t.fixUpperEdge=!1),e.mesh.splice(n.anEdge,r),i.sweepEvent(e,n);return}it(!1),t=i.topRightRegion(t),l=i.regionBelow(t),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(it(s!==o),i.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(n.anEdge,o),Ze.edgeGoesLeft(s)||(s=null),i.addRightEdges(e,t,o.Onext,a,s,!0)},i.connectLeftVertex=function(e,t){var n,r,s,o,a,l,c=new zw;if(c.eUp=t.anEdge.Sym,n=e.dict.search(c).key,r=i.regionBelow(n),!!r){if(o=n.eUp,a=r.eUp,Ze.edgeSign(o.Dst,t,o.Org)===0){i.connectLeftDegenerate(e,n,t);return}if(s=Ze.vertLeq(a.Dst,o.Dst)?n:r,n.inside||s.fixUpperEdge){if(s===n)l=e.mesh.connect(t.anEdge.Sym,o.Lnext);else{var h=e.mesh.connect(a.Dnext,t.anEdge);l=h.Sym}s.fixUpperEdge?i.fixUpperEdge(e,s,l):i.computeWinding(e,i.addRegionBelow(e,n,l)),i.sweepEvent(e,t)}else i.addRightEdges(e,n,t.anEdge,t.anEdge,null,!0)}},i.sweepEvent=function(e,t){e.event=t,i.debugEvent(e);for(var n=t.anEdge;n.activeRegion===null;)if(n=n.Onext,n===t.anEdge){i.connectLeftVertex(e,t);return}var r=i.topLeftRegion(e,n.activeRegion);it(r!==null);var s=i.regionBelow(r),o=s.eUp,a=i.finishLeftRegions(e,s,null);a.Onext===o?i.connectRightVertex(e,r,a):i.addRightEdges(e,r,a.Onext,o,o,!0)},i.addSentinel=function(e,t,n,r){var s=new zw,o=e.mesh.makeEdge();o.Org.s=n,o.Org.t=r,o.Dst.s=t,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},i.initEdgeDict=function(e){e.dict=new rWe(e,i.edgeLeq);var t=e.bmax[0]-e.bmin[0],n=e.bmax[1]-e.bmin[1],r=e.bmin[0]-t,s=e.bmax[0]+t,o=e.bmin[1]-n,a=e.bmax[1]+n;i.addSentinel(e,r,s,o),i.addSentinel(e,r,s,a)},i.doneEdgeDict=function(e){for(var t,n=0;(t=e.dict.min().key)!==null;)t.sentinel||(it(t.fixUpperEdge),it(++n===1)),it(t.windingNumber===0),i.deleteRegion(e,t)},i.removeDegenerateEdges=function(e){var t,n,r,s=e.mesh.eHead;for(t=s.next;t!==s;t=n)n=t.next,r=t.Lnext,Ze.vertEq(t.Org,t.Dst)&&t.Lnext.Lnext!==t&&(i.spliceMergeVertices(e,r,t),e.mesh.delete(t),t=r,r=t.Lnext),r.Lnext===t&&(r!==t&&((r===n||r===n.Sym)&&(n=n.next),e.mesh.delete(r)),(t===n||t===n.Sym)&&(n=n.next),e.mesh.delete(t))},i.initPriorityQ=function(e){var t,n,r,s=0;for(r=e.mesh.vHead,n=r.next;n!==r;n=n.next)s++;for(s+=8,t=e.pq=new nWe(s,Ze.vertLeq),r=e.mesh.vHead,n=r.next;n!==r;n=n.next)n.pqHandle=t.insert(n);return n!==r?!1:(t.init(),!0)},i.donePriorityQ=function(e){e.pq=null},i.removeDegenerateFaces=function(e,t){var n,r,s;for(n=t.fHead.next;n!==t.fHead;n=r)r=n.next,s=n.anEdge,it(s.Lnext!==s),s.Lnext.Lnext===s&&(i.addWinding(s.Onext,s),e.mesh.delete(s));return!0},i.computeInterior=function(e,t){t===void 0&&(t=!0);var n,r;if(i.removeDegenerateEdges(e),!i.initPriorityQ(e))return!1;for(i.initEdgeDict(e);(n=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!Ze.vertEq(r,n));)r=e.pq.extractMin(),i.spliceMergeVertices(e,n.anEdge,r.anEdge);i.sweepEvent(e,n)}return e.event=e.dict.min().key.eUp.Org,i.debugEvent(e),i.doneEdgeDict(e),i.donePriorityQ(e),i.removeDegenerateFaces(e,e.mesh)?(t&&e.mesh.check(),!0):!1},i}(),oWe=function(){function i(){this.mesh=new zU,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=fi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return i.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},i.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},i.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},i.prototype.computeNormal_=function(e){var t,n,r,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;t=m.next;for(var y=0;y<3;++y)s=t.coords[y],c[y]=s,p[y]=t,l[y]=s,f[y]=t;for(t=m.next;t!==m;t=t.next)for(var g=0;g<3;++g)s=t.coords[g],s<c[g]&&(c[g]=s,p[g]=t),s>l[g]&&(l[g]=s,f[g]=t);var v=0;if(l[1]-c[1]>l[0]-c[0]&&(v=1),l[2]-c[2]>l[v]-c[v]&&(v=2),c[v]>=l[v]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,n=p[v],r=f[v],h[0]=n.coords[0]-r.coords[0],h[1]=n.coords[1]-r.coords[1],h[2]=n.coords[2]-r.coords[2],t=m.next;t!==m;t=t.next)u[0]=t.coords[0]-r.coords[0],u[1]=t.coords[1]-r.coords[1],u[2]=t.coords[2]-r.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(h)]=1)},i.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,t,n=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(t=n.next;t!==n;t=t.next)t.t=-t.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},i.prototype.projectPolygon_=function(){var e=this.mesh.vHead,t=[0,0,0],n,r,s=!1;t[0]=this.normal[0],t[1]=this.normal[1],t[2]=this.normal[2],!t[0]&&!t[1]&&!t[2]&&(this.computeNormal_(t),s=!0),n=this.sUnit,r=this.tUnit;var o=this.longAxis_(t);n[o]=0,n[(o+1)%3]=1,n[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=t[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,n),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},i.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},i.prototype.tessellateMonoRegion_=function(e,t){var n,r;if(n=t.anEdge,!(n.Lnext!==n&&n.Lnext.Lnext!==n))throw"Mono region invalid";for(;Ze.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;Ze.vertLeq(n.Org,n.Dst);n=n.Lnext);r=n.Lprev;for(var s=void 0;n.Lnext!==r;)if(Ze.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(Ze.edgeGoesLeft(r.Lnext)||Ze.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==n&&(Ze.edgeGoesRight(n.Lprev)||Ze.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)s=e.connect(n,n.Lprev),n=s.Sym;n=n.Lnext}if(r.Lnext===n)throw"Mono region invalid";for(;r.Lnext.Lnext!==n;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},i.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},i.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},i.prototype.setWindingNumber_=function(e,t,n){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?t:-t:n?e.delete(s):s.winding=0},i.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},i.prototype.outputPolymesh_=function(e,t,n,r){var s,o=0,a=0,l;n>3&&e.mergeConvexFaces(n);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var h=e.fHead.next;h!==e.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>n)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,t===Gn.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*n,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=e.fHead.next;h!==e.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<n;++f)this.elements[d++]=-1;if(t===Gn.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var p=l;p<n;++p)this.elements[d++]=-1}}},i.prototype.outputContours_=function(e,t){var n,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=n=a.anEdge;do this.vertexCount++,n=n.Lnext;while(n!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=n=a.anEdge;do this.vertices[l++]=n.Org.coords[0],this.vertices[l++]=n.Org.coords[1],t>2&&(this.vertices[l++]=n.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,o++,n=n.Lnext;while(n!==r);this.elements[h++]=s,this.elements[h++]=o,s+=o}},i.prototype.addContour=function(e,t){this.mesh===null&&(this.mesh=new zU),e<2&&(e=2),e>3&&(e=3);for(var n=null,r=0;r<t.length;r+=e)n===null?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[r+0],n.Org.coords[1]=t[r+1],e>2?n.Org.coords[2]=t[r+2]:n.Org.coords[2]=0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},i.prototype.tesselate=function(e,t,n,r,s,o){if(e===void 0&&(e=fi.ODD),t===void 0&&(t=Gn.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),sWe.computeInterior(this,o);var a=this.mesh;return t===Gn.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),t===Gn.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,t,n,r),!0},i}();function mu(i){var e=i.windingRule,t=e===void 0?fi.ODD:e,n=i.elementType,r=n===void 0?Gn.POLYGONS:n,s=i.polySize,o=s===void 0?3:s,a=i.vertexSize,l=a===void 0?2:a,c=i.normal,h=c===void 0?[0,0,1]:c,u=i.contours,d=u===void 0?[]:u,f=i.strict,p=f===void 0?!0:f,m=i.debug,y=m===void 0?!1:m;if(!d&&p)throw new Error("Contours can't be empty");if(d){var g=new oWe;i.edgeCreateCallback&&(g.edgeCreateCallback=i.edgeCreateCallback),i.vertexIdCallback&&(g.vertexIdCallback=i.vertexIdCallback);for(var v=0;v<d.length;v++)g.addContour(l||2,d[v]);return g.tesselate(t,r,o,l,h,p),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:y?g.mesh:void 0}}}fi.ODD;fi.NONZERO;fi.POSITIVE;fi.NEGATIVE;fi.ABS_GEQ_TWO;Gn.POLYGONS;Gn.CONNECTED_POLYGONS;Gn.BOUNDARY_CONTOURS;var xee=class extends ze{constructor(i,e=12,t={}){super(),this.type="ShapeGeometry",this.windingRule=fi.ODD,this.elementType=Gn.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=i,this._curveSegments=e,this._triangulationOptions=Object.assign({windingRule:fi.ODD,elementType:Gn.POLYGONS,polySize:3,vertexSize:2,strict:!0},t);let n=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let d=0,f=n.length/2;d<f;d++){let p=d*2,m=n[p+0],y=n[p+1];if(l!==void 0&&m!==l&&(o=!1),c!==void 0&&y!==c&&(a=!1),l=m,c=y,!o&&!a)break}!o&&!a&&(s=mu({contours:[n,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let h=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new at(new Float32Array(h*3),3),this._normalAttribute=new at(new Float32Array(h*3),3),this._uvAttribute=new at(new Float32Array(h*2),2),this._indexAttribute=new at(new Uint32Array(u*3),1),s){let d=1/0,f=-1/0,p=1/0,m=-1/0;for(let v=0,x=h;v<x;v++){let _=v*2,w=s.vertices[_+0],b=s.vertices[_+1];w<d&&(d=w),w>f&&(f=w),b<p&&(p=b),b>m&&(m=b)}let y=f-d,g=m-p;for(let v=0,x=h;v<x;v++){let _=v*2,w=s.vertices[_+0],b=s.vertices[_+1],S=(w-d)/y,A=(b-p)/g;this._positionAttribute.setXYZ(v,w,b,0),this._normalAttribute.setXYZ(v,0,0,1),this._uvAttribute.setXY(v,S,A)}for(let v=0,x=u;v<x;v++){let _=v*3,w=s.elements[_+0],b=s.elements[_+1],S=s.elements[_+2];this._indexAttribute.setX(_+0,w),this._indexAttribute.setX(_+1,b),this._indexAttribute.setX(_+2,S)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let i=new xee(this._shape,this._curveSegments);return i.userData=I7(this.userData),i}},_M=class{constructor(i=256,e=!1){this.capacity=i,this.size=0,this.debug=e,this.debug&&console.log(`allocating with cap ${i}`);let t=i*_M.eSize;this.buffer=new ArrayBuffer(t);let n=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*n,3*i),r+=3*i,this.normals=new Float32Array(this.buffer,r*n,3*i),r+=3*i,this.uvs=new Float32Array(this.buffer,r*n,2*i)}realloc(i,e=!1){if(i<this.size)throw Error("cannot shrink buffer");if(i<=this.capacity&&!e)return;this.debug&&console.log(`resizing from ${this.capacity} → ${i}`);let t=i*_M.eSize,n=new ArrayBuffer(t),r=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(n,s*r,3*i);s+=3*i;let a=new Float32Array(n,s*r,3*i);s+=3*i;let l=new Float32Array(n,s*r,2*i);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=n,this.positions=o,this.normals=a,this.uvs=l,this.capacity=i}get(i=1){let e=this.size+i;if(e>this.capacity){let n=this.capacity;for(;e>n;)n*=2;this.realloc(n)}let t=this.size;return this.size=e,t}reserve(i){let e=this.size+i;e>this.capacity&&this.realloc(e)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},_ee=_M;_ee.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var kw=(i,e)=>([t,n])=>(n<t&&(n+=e),(i>=t?i:i+e)<=n),bee=class extends ze{constructor(i,e,t=0,n=12,r=3,s=fi.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=i,this._depth=e,this._bevel=t,this._curveSegments=n,this._bevelSegmentsInput=r,t<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(t,e/2-1e-12),this._bevelSegments=Math.floor(r));let o=this._shape.extractShapePointsToFlatArray([],n),a=this._shape.shapeHoles.map(w=>{let b=w.extractShapePointsToFlatArray([],n),S=[];for(let A=b.length-1;A>=1;A-=2){let E=b[A-1],T=b[A-0];S.push(E,T)}return S}),l=mu({windingRule:s,elementType:Gn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]}),c=mu({windingRule:fi.ODD,elementType:Gn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!l)throw new Error("error generating geometry");let h=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let w=0;w<c.elements.length;w++){let b=c.elements[w],S=w%2===0?l.vertexCount:0;l.elements.push(b+S)}for(let w=0;w<c.vertexIndices.length;w++){let b=c.vertexIndices[w],S=l.vertexCount;l.vertexIndices.push(b+S)}for(let w=0;w<c.vertices.length;w++){let b=c.vertices[w];l.vertices.push(b)}}let u=1/0,d=-1/0,f=1/0,p=-1/0;for(let w=0,b=l.vertexCount;w<b;w++){let S=w*2,A=l.vertices[S+0],E=l.vertices[S+1];A<u&&(u=A),A>d&&(d=A),E<f&&(f=E),E>p&&(p=E)}this._minX=u,this._minY=f,this._width=d-u,this._height=p-f,this._buffer=new _ee(this._computeBufferEstimatedSize(l));let m=[],y=[];for(let w=l.elementCount-1;w>=0;w--){let b=w>=h,S=w*2,A=l.elements[S+0],E=l.elements[S+1],T=A+E,M={start:A,count:E,normals:[],continuous:[],concave:[]},C=A,D=T-1,P=A+1,I=this._shape.roundedCurves.length;do{let Z=C-A,$=l.vertices[D*2+0],W=l.vertices[D*2+1],X=l.vertices[C*2+0],j=l.vertices[C*2+1],H=l.vertices[P*2+0],V=l.vertices[P*2+1],B=X-$,q=j-W,K=Math.sqrt(B*B+q*q);B/=K,q/=K;let Q=X-H,oe=j-V,ne=Math.sqrt(Q*Q+oe*oe);Q/=ne,oe/=ne,M.normals[Z*2+0]=-oe,M.normals[Z*2+1]=Q,M.concave[Z]=B*oe-q*Q>0;let L=l.vertexIndices[C];if(Array.isArray(L))M.continuous[Z]=!1;else{let[z,Y]=this._shape.getCurveIndexFromVertexId(L-1,!0);if(Y>0&&Y<1)M.continuous[Z]=!0;else{let J=Y===1?z+1:z-1;J=(J+I)%I;let ee=Y===1?0:1,F=this._shape.roundedCurves[z].getTangent(Y),N=this._shape.roundedCurves[J].getTangent(ee);M.continuous[Z]=F.dot(N)>.95}}b&&(M.normals[Z*2+0]*=-1,M.normals[Z*2+1]*=-1),[D,C,P]=[C,P,P+1],P>=T&&(P-=E)}while(P!==A+1);let k=[];k.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(A*2,T*2),vertexCount:E,vertexIndices:new Array(E).fill(!0).map((Z,$)=>[$,$]),elements:[0,E],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(A*2,T*2)});for(let Z=1;Z<=this._bevelSegments;Z++){let $=Z/this._bevelSegments*Math.PI/2,W=(1-Math.cos($))*this._bevelSize,X=[],j=[],H=0;for(let B=0;B<E;B++){let q=B*2,K=(B-1+E)%E*2,Q=l.vertices[M.start*2+q+0],oe=l.vertices[M.start*2+q+1],ne=-M.normals[K+0]*W,L=-M.normals[K+1]*W,z=-M.normals[q+0]*W,Y=-M.normals[q+1]*W;if(M.concave[B]||!M.concave[B]&&b){let J=Math.atan2(L,ne),ee=Math.atan2(Y,z);ee>J&&(ee-=Math.PI*2);let F=ee-J;if(M.continuous[B]||b){let N=J+F/2,te=Math.cos(N)*W,le=Math.sin(N)*W;X[2*H+0]=Q+te*(b?-1:1),X[2*H+1]=oe+le*(b?-1:1),j[H]=B,H++}else{let N=Math.max(1,Math.floor(n/4*Math.abs(F)/Math.PI));for(let te=0;te<=N;te++){let le=J+F*(te/N),re=Math.cos(le)*W,ue=Math.sin(le)*W;X[2*H+0]=Q+re,X[2*H+1]=oe+ue,j[H]=B,H++}}}else X[2*H+0]=Q+ne,X[2*H+1]=oe+L,j[H]=B,H++,X[2*H+0]=Q,X[2*H+1]=oe,j[H]=B,H++,X[2*H+0]=Q+z,X[2*H+1]=oe+Y,j[H]=B,H++}let V=mu({windingRule:fi.POSITIVE,elementType:Gn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[X],edgeCreateCallback:B=>{let q=B.Org.idx,K=j[q],Q=j[(q+1)%j.length];B.idx=[K,Q],B.Sym.idx=[Q,K]},vertexIdCallback:B=>{let q=B.Lprev.idx;return[q?q[1]:0,B.idx[0]]}});if(!V)throw console.log("Error"),new Error(`error generating bevel geometry for ${Z}'th loop`);if(!V.vertexCount)break;for(let B=0;B<V.vertexIndices.length;B++){let[q,K]=V.vertexIndices[B];if(q===K)continue;let Q=K;K<q&&(Q+=E);for(let oe=q;oe<Q;oe++){let ne=oe%E,L=(oe+1)%E;if(!M.continuous[ne]||!M.continuous[L]){V.vertexIndices[B]=[q,ne],V.vertexIndices.splice(B+1,0,[L,K]),V.vertices.splice((B+1)*2,0,V.vertices[B*2],V.vertices[B*2+1]);break}}}k.push({bevelI:Z,angle:$,size:W,boundary:V,reverseMap:j,insetPoints:X})}let G=(Z,$,W)=>{let X=0,j=Z.boundary.vertexIndices.length;for(;X<j&&W(Z.boundary.vertexIndices[$]);)$=($+1)%j,X++;return X},U=m.length;for(let Z=1;Z<k.length;Z++){let $=k[Z-1],W=k[Z],X=$.boundary.vertexIndices.length,j=W.boundary.vertexIndices.length;if(!X||!j)break;let H=M.concave.length,V=0,B=kw(V,E);for(;!$.boundary.vertexIndices.filter(B).length||!W.boundary.vertexIndices.filter(B).length;)V++,B=kw(V,E);let q=$.boundary.vertexIndices.findIndex(B),K=W.boundary.vertexIndices.findIndex(B);do q=(q+1)%X;while(B($.boundary.vertexIndices[q]));do K=(K+1)%j;while(B(W.boundary.vertexIndices[K]));V=(V+1)%E;let Q=V,oe=this._buildBevelVert(M,$,(q-1+X)%X),ne=this._buildBevelVert(M,W,(K-1+j)%j),L=oe,z=ne,Y,J,ee=!1;do{B=kw(V,E);let F=G($,q,B),N=G(W,K,B),te=ee;if(ee=!1,F&&!N){for(let le=0;le<F;le++)Y=this._buildBevelVert(M,$,(q+le)%X,le/(F-1)),m.push(L.topN,Y.topP,z.topN),m.push(Y.bottomP,L.bottomN,z.bottomN),L=Y;ee=!0}else if(!F&&N)for(let le=0;le<N;le++)J=this._buildBevelVert(M,W,(K+le)%j,le/(N-1)),m.push(z.topN,L.topP,J.topP),m.push(L.bottomP,z.bottomN,J.bottomP),z=J;else if(F&&N)if(Y=this._buildBevelVert(M,$,q,0),J=this._buildBevelVert(M,W,K,0),te?(m.push(L.topN,J.topP,z.topN),m.push(L.topN,Y.topP,J.topP),m.push(J.bottomP,L.bottomN,z.bottomN),m.push(J.bottomP,Y.bottomP,L.bottomN)):(m.push(z.topN,L.topN,Y.topP),m.push(z.topN,Y.topP,J.topP),m.push(Y.bottomP,L.bottomN,z.bottomN),m.push(Y.bottomP,z.bottomN,J.bottomP)),L=Y,z=J,F===N)for(let le=1;le<F;le++)Y=this._buildBevelVert(M,$,(q+le)%X,le/(F-1)),J=this._buildBevelVert(M,W,(K+le)%j,le/(N-1)),m.push(L.topN,Y.topP,z.topN),m.push(z.topN,Y.topP,J.topP),m.push(Y.bottomP,L.bottomN,z.bottomN),m.push(Y.bottomP,z.bottomN,J.bottomP),L=Y,z=J;else if(F>N){let le=F/N,re=0;for(let ue=1;ue<F;ue++)Y=this._buildBevelVert(M,$,(q+ue)%X,ue/(F-1)),m.push(L.topN,Y.topP,z.topN),m.push(Y.bottomP,L.bottomN,z.bottomN),L=Y,ue>(re+1)*le&&(re++,J=this._buildBevelVert(M,W,(K+re)%j,re/(N-1)),m.push(z.topN,Y.topP,J.topP),m.push(Y.bottomP,z.bottomN,J.bottomP),z=J)}else{let le=N/F,re=0;for(let ue=1;ue<N;ue++)J=this._buildBevelVert(M,W,(K+ue)%j,ue/(N-1)),m.push(z.topN,Y.topP,J.topP),m.push(Y.bottomP,z.bottomN,J.bottomP),z=J,ue>(re+1)*le&&(re++,Y=this._buildBevelVert(M,$,(q+re)%X,re/(F-1)),m.push(L.topN,Y.topP,z.topN),m.push(Y.bottomP,L.bottomN,z.bottomN),L=Y)}q=(q+F)%X,K=(K+N)%j,V=(V+1)%H}while(V!==Q)}if(this._buildWall(k,M,m),b){let Z=[];for(let $=m.length-1;$>=U+2;$-=3){let W=m[$-2],X=m[$-1],j=m[$-0];Z.push(j,X,W)}m.splice(U,m.length-U,...Z)}if(b){let Z=[];for(let $=k[k.length-1].boundary.vertices.length-1;$>=1;$-=2){let W=k[k.length-1].boundary.vertices[$-1],X=k[k.length-1].boundary.vertices[$-0];Z.push(W,X)}y.push(Z)}if(!b){let Z=k[k.length-1],$=mu({windingRule:k.length>1?fi.POSITIVE:fi.ODD,elementType:Gn.POLYGONS,vertexSize:2,strict:!0,contours:[Z.insetPoints,...y]});if(!$)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:m.length});for(let W=0;W<$.elementCount*3;W+=3){let X=this._buildSurfaceVert($,$.elements[W+0]),j=this._buildSurfaceVert($,$.elements[W+1]),H=this._buildSurfaceVert($,$.elements[W+2]);m.push(X.top,j.top,H.top),m.push(H.bottom,j.bottom,X.bottom)}}this.vertexCache={}}this._buffer.shrink();let g=new at(Uint32Array.from(m),1),v=new at(this._buffer.positions,3),x=new at(this._buffer.normals,3),_=new at(this._buffer.uvs,2);v.needsUpdate=!0,x.needsUpdate=!0,_.needsUpdate=!0,g.needsUpdate=!0,this.setAttribute("position",v),this.setAttribute("normal",x),this.setAttribute("uv",_),this.setIndex(g)}_computeBufferEstimatedSize(i){return i.vertexCount*2*(2+this._bevelSegments)}_buildWall(i,e,t){let n=i[0];for(let r=0,s=n.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,n,r),a=this._buildBevelVert(e,n,(r+1)%s);t.push(a.topP,o.topN,o.bottomN),t.push(a.topP,o.bottomN,a.bottomP)}}_buildSurfaceVert(i,e){let t=e.toString();if(t in this.vertexCache)return this.vertexCache[t];let n=i.vertices[e*2+0],r=i.vertices[e*2+1],s=(n-this._minX)/this._width,o=(r-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,h={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=n,this._buffer.positions[l+1]=r,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=n,this._buffer.positions[l+4]=r,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[t]=h,h}_buildBevelVert(i,e,t,n=1){let r=`${e.bevelI}:${t}`;if(r in this.vertexCache)return this.vertexCache[r];let[s,o]=e.boundary.vertexIndices[t],a,l,c,h;s!==o?(l=s,a=o,h=!1,c=i.continuous[l]&&i.continuous[a]):(a=s,l=(a-1+i.count)%i.count,h=i.concave[a]&&e.bevelI>0,c=i.continuous[a]||h);let u=Math.cos(e.angle),d=Math.sin(e.angle),f=t*2,p=a*2,m=l*2,y=e.boundary.vertices[f+0],g=e.boundary.vertices[f+1],v=(1-d)*this._bevelSize,x=(y-this._minX)/this._width,_=(g-this._minY)/this._height,w=i.normals[p+0],b=i.normals[p+1],S=i.normals[m+0],A=i.normals[m+1];if(h){let D=S-w,P=A-b;w=w+D*(1-n),b=b+P*(1-n);let I=Math.sqrt(w*w+b*b);w/=I,b/=I}let E=this._buffer.get(c?2:4),T=E*3,M=E*2,C={i:t,fi:a,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1};return this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=g,this._buffer.positions[T+2]=this._depth-v,this._buffer.normals[T+0]=w*u,this._buffer.normals[T+1]=b*u,this._buffer.normals[T+2]=d,this._buffer.uvs[M+0]=x,this._buffer.uvs[M+1]=_,this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=g,this._buffer.positions[T+5]=v,this._buffer.normals[T+3]=w*u,this._buffer.normals[T+4]=b*u,this._buffer.normals[T+5]=-d,this._buffer.uvs[M+2]=_,this._buffer.uvs[M+3]=x,c||(E+=2,T+=6,M+=4,C.topP=E+0,C.bottomP=E+1,this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=g,this._buffer.positions[T+2]=this._depth-v,this._buffer.normals[T+0]=S*u,this._buffer.normals[T+1]=A*u,this._buffer.normals[T+2]=d,this._buffer.uvs[M+0]=x,this._buffer.uvs[M+1]=_,this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=g,this._buffer.positions[T+5]=v,this._buffer.normals[T+3]=S*u,this._buffer.normals[T+4]=A*u,this._buffer.normals[T+5]=-d,this._buffer.uvs[M+2]=_,this._buffer.uvs[M+3]=x),this.vertexCache[r]=C,C}clone(){let i=new bee(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return i.userData=I7(this.userData),i}},wee=class extends bee{constructor(i,e,t=0,n=12,r=3,s=fi.ODD){super(i,e,t,n,r,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(i){return i.vertexCount*2*(2+this._bevelSegments)}_buildWall(i,e,t){let n=i[0];for(let r=0,s=n.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,n,r),a=this._buildBevelVert(e,n,(r+1)%s);t.push(a.topP,o.topN,o.bottomN),t.push(a.topP,o.bottomN,a.bottomP)}}clone(){let i=new wee(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return i.userData=I7(this.userData),i}},xf=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){var c,h;let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:fi.ODD},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??t.width),s=Math.abs(t.depth??0),o=i.shape??(e==null?void 0:e.shape),a=(o==null?void 0:o.roundness)??t.roundness;o!==void 0&&(o instanceof ln?(o.width!==n||o.height!==r)&&o.applySize(n,r):o=new ln(n,r).fromJSON(o),((c=i.parameters)==null?void 0:c.roundness)!==void 0&&((h=i.parameters)==null?void 0:h.roundness)>0&&o.update());let l=o??new ln(n,r);return{parameters:Object.assign(t,{width:n,height:r,depth:s,roundness:a}),shape:l}}static build(i){let{depth:e,extrudeBevelSize:t,extrudeBevelSegments:n,subdivisions:r,roundness:s,windingRule:o}=i.parameters;i.shape.roundness=s;let a;return e<=0?a=new xee(i.shape,r,{windingRule:o}):a=new wee(i.shape,e,t,r,n,o),Object.assign(a,{userData:{...i,type:"VectorGeometry"}})}},See=Math.PI*2,oL=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},i.parameters);return{shape:i.shape&&i.shape instanceof ln?i.shape:new ln,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e,height:t,spikes:n,angle:r,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=i.parameters,c=i.shape,h=e*.5,u=t*.5,d=aWe(c,h,u,r*Math.PI/180,n,s);c.isClosed=!0,c.update();let f=xf.create({shape:c,parameters:{subdivisions:d,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...i,type:"EllipseGeometry"}})}};function aWe(i,e,t,n,r,s){if(n>=See)return r>30||r%4===0?(cWe(i,e,t,s),Math.round(r/4)):VU(i,n,r,e,t,s);n=Math.max(n,.001);let o={x:0,y:t},a=n+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*t},c=iWe({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:t,largeArcFlag:n>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?lWe(i,o.x,o.y,c,r,e,t,s):VU(i,n,r,e,t,s)}function lWe(i,e,t,n,r,s,o,a){let l=Math.round(r/n.length);i.addPoint(p1(e,t));for(let c=0,h=n.length;c<h;c++){let u=n[c],d=i.points[c],f=p1(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),i.addPoint(f)}return a>0?Aee(i,s,o,a):i.addPoint(p1(0,0)),l}function VU(i,e,t,n,r,s){let o=-e/t;for(let a=0;a<=t;a++){let l=o*a,c=Math.sin(l)*n,h=Math.cos(l)*r;i.addPoint(p1(c,h))}return e<See?s>0?Aee(i,n,r,s):i.addPoint(p1(0,0)):(i.removePoint(i.points[i.points.length-1]),s>0&&Tee(i,n,r,s)),1}function cWe(i,e,t,n=0,r=0,s=0){let o=.5522847498,a=e*o,l=t*o;i.addPoint(E4(r-e,s,r-e,s-l,r-e,s+l)),i.addPoint(E4(r,s+t,r-a,s+t,r+a,s+t)),i.addPoint(E4(r+e,s,r+e,s+l,r+e,s-l)),i.addPoint(E4(r,s-t,r+a,s-t,r-a,s-t)),n>0&&Tee(i,e,t,n)}function p1(i,e){return new f1(hi.generateUUID(),new ae(i,e))}function E4(i,e,t,n,r,s){let o=p1(i,e);return o.controls[0].position.set(t,n),o.controls[1].position.set(r,s),o}function Aee(i,e,t,n){Mee(i,e,t,n).forEach(r=>i.addPoint(r))}function Tee(i,e,t,n){let r=Mee(i,e,t,n),s=new ln;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,i.shapeHoles.push(s)}function Mee(i,e,t,n){let r=n*e/100,s=r*(Math.abs(t)/Math.abs(e)),o=new ae(r/e,s/t),a=i.points.map(l=>{let c=l.clone();return c.uuid=hi.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var uWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??n),s=Math.abs(t.depth??n),o=Math.abs(Math.min(n,s))/2;return{parameters:Object.assign(t,{width:n,height:r,depth:s,radius:o,segments:Math.round(t.segments),pathSegments:Math.round(t.pathSegments),cornerSegments:Math.round(t.cornerSegments)})}}static build(i){let{width:e,height:t,depth:n,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=i.parameters,d=new aL(!1,e,t,n,r,s,o,a,l,c,h,u);return Object.assign(d,{userData:{...i,type:"HelixGeometry"}})}},aL=class extends ze{constructor(i=!0,e=1,t=1,n=1,r=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1,d=!1){super();let f=i&&s===1;f&&(u=0),h>100&&(h=100);let p=()=>new R,m=new R,y=p(),g=p(),v=p(),x,_,w,b,S,A,E,T,M=p(),C=p(),D=p(),P=p(),I=p(),k=p(),G=p(),U=p(),Z=t-2*a+.001,$=Z/s,W=Math.ceil(o*s),X=W+1,j=Z/W,H=-Z/2,V=c+1,B=2*Math.PI/c,q=Math.PI/2/u,K=.01,Q=Math.min((1-h/100)*a,a-K),oe=a-Q,ne=0,L=2,z=u*L+L,Y=V*z/L,J=Y+V*X,ee=V*(X+z),[F,N,te]=[3,3,2].map(se=>Array(ee*se).fill(0)),le=[],re=r-a;function ue(se,be){let Ge=Math.PI/2;A=be*j,T=2*Math.PI*(A%$)/$+Ge,A+=H,E=Math.sin(T)*re,S=Math.cos(T)*re,i?se.set(S,E,A):se.set(S,A,E)}ue(m,-1e-10),ue(y,0),M.copy(m),ue(m,1);let pe=m.distanceTo(y),xe=f?0:oe+Q,Se=pe*W+2*xe,we=Q,ce=Se-xe;for(let se=0;se<=W;se++){ue(g,se),U.subVectors(g,M).normalize(),M.copy(g),k.copy(g).setComponent(+i+1,0).normalize(),G.crossVectors(U,k).normalize();let be=se===0,Ge=se===W,et=be?3*Math.PI/2:q,Mt=be?we:ce,mt=be?V:J,yi=be?0:ee-V,Vi=U.clone().multiplyScalar(be?-oe:oe).add(g),gn=U.clone().multiplyScalar(be?-1:1).normalize();for(let Jt=0;Jt<V;Jt++){let vn=Jt*B;if(C.addVectors(m.copy(k).multiplyScalar(a*Math.cos(vn)),y.copy(G).multiplyScalar(a*Math.sin(vn))),D.copy(C).normalize(),be||Ge){f||(ne=yi+Jt,[0,1,2].forEach(Li=>{F[ne*3+Li]=Vi.getComponent(Li),N[ne*3+Li]=gn.getComponent(Li)}),te[ne*2]=+Ge,te[ne*2+1]=Jt/c),y.copy(D).multiplyScalar(Q),v.addVectors(g,y);for(let Li=0;Li<u;Li++){let yn=Li*q+et;P.addVectors(m.copy(U).multiplyScalar(oe*Math.sin(yn)),y.copy(D).multiplyScalar(oe*Math.cos(yn))),I.copy(P).normalize(),y.addVectors(v,P),P.normalize(),ne=mt+Li*V+Jt,[0,1,2].forEach(pc=>{F[ne*3+pc]=y.getComponent(pc),N[ne*3+pc]=I.getComponent(pc)});let fc=+be+Math.sin(yn);te[ne*2]=(Mt+oe*fc)/Se,te[ne*2+1]=Jt/c}}y.addVectors(g,C),ne=Y+se*V+Jt,[0,1,2].forEach(Li=>{F[ne*3+Li]=y.getComponent(Li),N[ne*3+Li]=D.getComponent(Li)}),te[ne*2]=(xe+se*pe)/Se,te[ne*2+1]=Jt/c}}let Ee=X+2*u+L,[ve,Re]=[+f,Ee-1];d&&(Re-=1);for(let se=ve;se<=Re-1;se++){let be=f&&se===Re-1;for(let Ge=0;Ge<V-1;Ge++)x=se*V+Ge,_=x+1,w=(be?Ge:x)+V,b=(be?Ge+1:_)+V,se===0?le.push(_,b,w):se===Ee-2?le.push(x,_,w):le.push(x,_,w,_,b,w)}this.setIndex(le),this.setAttribute("position",new Le(F,3)),this.setAttribute("normal",new Le(N,3)),this.setAttribute("uv",new Le(te,2))}},hWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,detail:r,corner:s,cornerSides:o}=i.parameters,a=r===0&&s!==0?new Eee(e*.5,s,o):new sY(e*.5,r);return a.scale(1,t/e,n/e),Object.assign(a,{userData:{...i,type:"IcosahedronGeometry"}})}},Eee=class extends nL{constructor(i=1,e=.2,t=4){let n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(r,s,o,i,e,t),this.type=o}static fromJSON(i){return new Eee(i.radius,i.corner,i.cornerSides)}},dWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){var n;(((n=i.parameters)==null?void 0:n.points)??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{points:e,segments:t,verticalSegments:n}=i.parameters,r=new Wo;r.moveTo(e[0].x,e[0].y),r.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new aY(r.extractPoints(n).shape,t);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...i,type:"LatheGeometry"}})}},n0=new Ce,Bw=new Pt,C4=new R,O8=class extends hc{constructor(){super(),this.uuid=hi.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(i){let e=new hn().getNormalMatrix(i);for(let t=0,n=this.vertices.length;t<n;t++)this.vertices[t].applyMatrix4(i);for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(i){return n0.makeRotationX(i),this.applyMatrix4(n0),this}rotateY(i){return n0.makeRotationY(i),this.applyMatrix4(n0),this}rotateZ(i){return n0.makeRotationZ(i),this.applyMatrix4(n0),this}translate(i,e,t){return n0.makeTranslation(i,e,t),this.applyMatrix4(n0),this}scale(i,e,t){return n0.makeScale(i,e,t),this.applyMatrix4(n0),this}lookAt(i){return Bw.lookAt(i),Bw.updateMatrix(),this.applyMatrix4(Bw.matrix),this}fromBufferGeometry(i){let e=this,t=i.index!==null?i.index:void 0,n=i.attributes;if(n.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=n.position,s=n.normal,o=n.color,a=n.uv,l=n.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new R().fromBufferAttribute(r,u)),o!==void 0&&e.colors.push(new Pe().fromBufferAttribute(o,u));function c(u,d,f,p){let m=o===void 0?[]:[e.colors[u].clone(),e.colors[d].clone(),e.colors[f].clone()],y=s===void 0?[]:[new R().fromBufferAttribute(s,u),new R().fromBufferAttribute(s,d),new R().fromBufferAttribute(s,f)],g=new bM(u,d,f,y,m,p);e.faces.push(g),a!==void 0&&e.faceVertexUvs[0].push([new ae().fromBufferAttribute(a,u),new ae().fromBufferAttribute(a,d),new ae().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new ae().fromBufferAttribute(l,u),new ae().fromBufferAttribute(l,d),new ae().fromBufferAttribute(l,f)])}let h=i.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],f=d.start,p=d.count;for(let m=f,y=f+p;m<y;m+=3)t!==void 0?c(t.getX(m),t.getX(m+1),t.getX(m+2),d.materialIndex):c(m,m+1,m+2,d.materialIndex)}else if(t!==void 0)for(let u=0;u<t.count;u+=3)c(t.getX(u),t.getX(u+1),t.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone()),i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(C4).negate(),this.translate(C4.x,C4.y,C4.z),this}normalize(){this.computeBoundingSphere();let i=this.boundingSphere.center,e=this.boundingSphere.radius,t=e===0?1:1/e,n=new Ce;return n.set(t,0,0,-t*i.x,0,t,0,-t*i.y,0,0,t,-t*i.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let i=new R,e=new R;for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];i.subVectors(a,o),e.subVectors(s,o),i.cross(e),i.normalize(),r.normal.copy(i)}}computeVertexNormals(i=!0){let e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new R;if(i){let t=new R,n=new R;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];t.subVectors(c,l),n.subVectors(a,l),t.cross(n),e[o.a].add(t),e[o.b].add(t),e[o.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){let r=this.faces[t],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let i=0,e=this.faces.length;i<e;i++){let t=this.faces[i],n=t.vertexNormals;n.length===3?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(let r=0,s=n.vertexNormals.length;r<s;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}let i=new O8;i.faces=this.faces;for(let e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new R,c={a:new R,b:new R,c:new R};r.push(l),s.push(c)}}let n=this.morphNormals[e];i.vertices=this.morphTargets[e].vertices,i.computeFaceNormals(),i.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=n.faceNormals[r],l=n.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e];n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new er),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fs),this.boundingSphere.setFromPoints(this.vertices)}merge(i,e,t=0){if(!(i&&i.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",i);return}let n,r=this.vertices.length,s=this.vertices,o=i.vertices,a=this.faces,l=i.faces,c=this.colors,h=i.colors;e!==void 0&&(n=new hn().getNormalMatrix(e));for(let u=0,d=o.length;u<d;u++){let f=o[u].clone();e!==void 0&&f.applyMatrix4(e),s.push(f)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],p,m,y=f.vertexNormals,g=f.vertexColors,v=new bM(f.a+r,f.b+r,f.c+r);v.normal.copy(f.normal),n!==void 0&&v.normal.applyMatrix3(n).normalize();for(let x=0,_=y.length;x<_;x++)p=y[x].clone(),n!==void 0&&p.applyMatrix3(n).normalize(),v.vertexNormals.push(p);v.color.copy(f.color);for(let x=0,_=g.length;x<_;x++)m=g[x],v.vertexColors.push(m.clone());v.materialIndex=f.materialIndex+t,a.push(v)}for(let u=0,d=i.faceVertexUvs.length;u<d;u++){let f=i.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],g=[];for(let v=0,x=y.length;v<x;v++)g.push(y[v].clone());this.faceVertexUvs[u].push(g)}}}mergeMesh(i){if(!(i&&i.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",i);return}i.matrixAutoUpdate&&i.updateMatrix(),this.merge(i.geometry,i.matrix)}mergeVertices(i=4){let e={},t=[],n=[],r=Math.pow(10,i);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,t.push(this.vertices[a]),n[a]=t.length-1):n[a]=n[e[h]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-t.length;return this.vertices=t,o}setFromPoints(i){this.vertices=[];for(let e=0,t=i.length;e<t;e++){let n=i[e];this.vertices.push(new R(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let i=this.faces,e=i.length;for(let a=0;a<e;a++)i[a]._id=a;function t(a,l){return a.materialIndex-l.materialIndex}i.sort(t);let n=this.faceVertexUvs[0],r=this.faceVertexUvs[1],s,o;n&&n.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){let l=i[a]._id;s&&s.push(n[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(i[p]=f[p]);return i}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let t=[],n=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,y=!1,g=this.faceVertexUvs[0][f]!==void 0,v=p.normal.length()>0,x=p.vertexNormals.length>0,_=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0,b=0;if(b=c(b,0,0),b=c(b,1,m),b=c(b,2,y),b=c(b,3,g),b=c(b,4,v),b=c(b,5,x),b=c(b,6,_),b=c(b,7,w),t.push(b),t.push(p.a,p.b,p.c),t.push(p.materialIndex),g){let S=this.faceVertexUvs[0][f];t.push(d(S[0]),d(S[1]),d(S[2]))}if(v&&t.push(h(p.normal)),x){let S=p.vertexNormals;t.push(h(S[0]),h(S[1]),h(S[2]))}if(_&&t.push(u(p.color)),w){let S=p.vertexColors;t.push(u(S[0]),u(S[1]),u(S[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function h(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=n.length/3,n.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return i.data={},i.data.vertices=e,i.data.normals=n,s.length>0&&(i.data.colors=s),a.length>0&&(i.data.uvs=[a]),i.data.faces=t,i}clone(){return new O8().copy(this)}copy(i){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=i.name;let e=i.vertices;for(let u=0,d=e.length;u<d;u++)this.vertices.push(e[u].clone());let t=i.colors;for(let u=0,d=t.length;u<d;u++)this.colors.push(t[u].clone());let n=i.faces;for(let u=0,d=n.length;u<d;u++)this.faces.push(n[u].clone());for(let u=0,d=i.faceVertexUvs.length;u<d;u++){let f=i.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let y=f[p],g=[];for(let v=0,x=y.length;v<x;v++){let _=y[v];g.push(_.clone())}this.faceVertexUvs[u].push(g)}}let r=i.morphTargets;for(let u=0,d=r.length;u<d;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,m=r[u].vertices.length;p<m;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,m=r[u].normals.length;p<m;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let s=i.morphNormals;for(let u=0,d=s.length;u<d;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=s[u].vertexNormals.length;p<m;p++){let y=s[u].vertexNormals[p],g={};g.a=y.a.clone(),g.b=y.b.clone(),g.c=y.c.clone(),f.vertexNormals.push(g)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=s[u].faceNormals.length;p<m;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}let o=i.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());let a=i.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());let l=i.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=i.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=i.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=i.elementsNeedUpdate,this.verticesNeedUpdate=i.verticesNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.lineDistancesNeedUpdate=i.lineDistancesNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}toBufferGeometry(){let i=new fWe().fromGeometry(this),e=new ze,t=new Float32Array(i.vertices.length*3);if(e.setAttribute("position",D4.call(new at(t,3),i.vertices)),i.normals.length>0){let n=new Float32Array(i.normals.length*3);e.setAttribute("normal",D4.call(new at(n,3),i.normals))}if(i.colors.length>0){let n=new Float32Array(i.colors.length*3);e.setAttribute("color",GU.call(new at(n,3),i.colors))}if(i.uvs.length>0){let n=new Float32Array(i.uvs.length*2);e.setAttribute("uv",jU.call(new at(n,2),i.uvs))}if(i.uvs2.length>0){let n=new Float32Array(i.uvs2.length*2);e.setAttribute("uv2",jU.call(new at(n,2),i.uvs2))}e.groups=i.groups;for(let n in i.morphTargets){let r=[],s=i.morphTargets[n];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new Le(l.data.length*3,3);c.name=l.name,r.push(D4.call(c,l.data))}e.morphAttributes[n]=r}if(i.skinIndices.length>0){let n=new Le(i.skinIndices.length*4,4);e.setAttribute("skinIndex",HU.call(n,i.skinIndices))}if(i.skinWeights.length>0){let n=new Le(i.skinWeights.length*4,4);e.setAttribute("skinWeight",HU.call(n,i.skinWeights))}return i.boundingSphere!==null&&(e.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(e.boundingBox=i.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(i){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(i){let e=new ze,t=i.geometry;if(i.isPoints||i.isLine){let n=new Le(t.vertices.length*3,3),r=new Le(t.colors.length*3,3);if(e.setAttribute("position",D4.call(n,t.vertices)),e.setAttribute("color",GU.call(r,t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){let s=new Le(t.lineDistances.length,1);e.setAttribute("lineDistance",pWe.call(s,t.lineDistances))}t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone())}else i.isMesh&&(e=t.toBufferGeometry());return e}};O8.prototype.isGeometry=!0;var fWe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(i){let e=[],t,n,r,s=i.faces;for(n=0;n<s.length;n++){let o=s[n];o.materialIndex!==r&&(r=o.materialIndex,t!==void 0&&(t.count=n*3-t.start,e.push(t)),t={start:n*3,materialIndex:r})}t!==void 0&&(t.count=n*3-t.start,e.push(t)),this.groups=e}fromGeometry(i){let e=i.faces,t=i.vertices,n=i.faceVertexUvs,r=n[0]&&n[0].length>0,s=n[1]&&n[1].length>0,o=i.morphTargets,a=o.length,l;if(a>0){l=[];for(let y=0;y<a;y++)l[y]={name:o[y].name,data:[]};this.morphTargets.position=l}let c=i.morphNormals,h=c.length,u;if(h>0){u=[];for(let y=0;y<h;y++)u[y]={name:c[y].name,data:[]};this.morphTargets.normal=u}let d=i.skinIndices,f=i.skinWeights,p=d.length===t.length,m=f.length===t.length;t.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let y=0;y<e.length;y++){let g=e[y];this.vertices.push(t[g.a],t[g.b],t[g.c]);let v=g.vertexNormals;if(v.length===3)this.normals.push(v[0],v[1],v[2]);else{let _=g.normal;this.normals.push(_,_,_)}let x=g.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let _=g.color;this.colors.push(_,_,_)}if(r===!0){let _=n[0][y];_!==void 0?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new ae,new ae,new ae))}if(s===!0){let _=n[1][y];_!==void 0?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new ae,new ae,new ae))}for(let _=0;_<a;_++){let w=o[_].vertices;l[_].data.push(w[g.a],w[g.b],w[g.c])}for(let _=0;_<h;_++){let w=c[_].vertexNormals[y];u[_].data.push(w.a,w.b,w.c)}p&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(i),this.verticesNeedUpdate=i.verticesNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,i.boundingSphere!==null&&(this.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(this.boundingBox=i.boundingBox.clone()),this}},bM=class{constructor(i,e,t,n,r,s=0){this.a=i,this.b=e,this.c=t,this.normal=n&&n.isVector3?n:new R,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new Pe,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(i){this.a=i.a,this.b=i.b,this.c=i.c,this.normal.copy(i.normal),this.color.copy(i.color),this.materialIndex=i.materialIndex;for(let e=0,t=i.vertexNormals.length;e<t;e++)this.vertexNormals[e]=i.vertexNormals[e].clone();for(let e=0,t=i.vertexColors.length;e<t;e++)this.vertexColors[e]=i.vertexColors[e].clone();return this}};function pWe(i){return this.array.set(i),this}function GU(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),s=new Pe),e[t++]=s.r,e[t++]=s.g,e[t++]=s.b}return this}function jU(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),s=new ae),e[t++]=s.x,e[t++]=s.y}return this}function D4(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new R),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z}return this}function HU(i){let e=this.array,t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new xt),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z,e[t++]=s.w}return this}var mWe=["a","b","c"];function gWe(i,e){switch(e){case"c":return i.c;case"b":return i.b;case"a":default:return i.a}}function Uw(i,e,t){let n=Math.min(i,e),r=Math.max(i,e),s=n+"_"+r;return t.get(s)}function Vw(i,e,t,n,r,s){let o=Math.min(i,e),a=Math.max(i,e),l=o+"_"+a,c;if(n.has(l))c=n.get(l);else{let h=t[o],u=t[a];c={a:h,b:u,newEdge:null,faces:[]},n.set(l,c)}c.faces.push(r),s[i].edges.push(c),s[e].edges.push(c)}function vWe(i,e,t,n){let r,s,o;for(r=0,s=i.length;r<s;r++)t[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],Vw(o.a,o.b,i,n,o,t),Vw(o.b,o.c,i,n,o,t),Vw(o.c,o.a,i,n,o,t)}function P4(i,e,t,n,r){i.push(new bM(e,t,n,void 0,void 0,r))}function cp(i,e){return Math.abs(e-i)/2+Math.min(i,e)}function L4(i,e,t,n){i.push([e.clone(),t.clone(),n.clone()])}var yWe=class{constructor(i=1){this.subdivisions=i}modify(i){i instanceof ze?i=new O8().fromBufferGeometry(i):i=i.clone(),i.mergeVertices();let e=this.subdivisions;for(;e-- >0;)this._smooth(i);return i.computeFaceNormals(),i.computeVertexNormals(),i}_smooth(i){let e=new R,t,n,r,s,o,a=i.vertices,l=i.faces,c=i.faceVertexUvs[0],h=c!==void 0&&c.length>0,u=[],d=new Map;vWe(a,l,u,d);let f=[],p,m,y,g,v,x,_;for(let q of Array.from(d.keys())){for(m=d.get(q),y=new R,v=3/8,x=1/8,_=m.faces.length,_!=2&&(v=.5,x=0,_!=1),y.addVectors(m.a,m.b).multiplyScalar(v),e.set(0,0,0),s=0;s<_;s++){for(g=m.faces[s],o=0;o<3&&(p=a[gWe(g,mWe[o])],!(p!==m.a&&p!==m.b));o++);p&&e.add(p)}e.multiplyScalar(x),y.add(e),m.newEdge=f.length,f.push(y)}let w,b,S,A,E,T,M,C=[];for(n=0,r=a.length;n<r;n++){for(T=a[n],E=u[n].edges,t=E.length,t==3?w=3/16:t>3&&(w=3/(8*t)),b=1-t*Number(w),S=w,t<=2&&(t==2?(b=3/4,S=1/8):t==1||t==0),M=T.clone().multiplyScalar(b),e.set(0,0,0),s=0;s<t;s++)A=E[s],p=A.a!==T?A.a:A.b,e.add(p);e.multiplyScalar(Number(S)),M.add(e),C.push(M)}let D=C.concat(f),P=C.length,I,k,G,U=[],Z=[],$,W,X,j,H=new ae,V=new ae,B=new ae;for(n=0,r=l.length;n<r;n++)g=l[n],I=Number(Uw(g.a,g.b,d).newEdge)+P,k=Number(Uw(g.b,g.c,d).newEdge)+P,G=Number(Uw(g.c,g.a,d).newEdge)+P,P4(U,I,k,G,g.materialIndex),P4(U,g.a,I,G,g.materialIndex),P4(U,g.b,k,I,g.materialIndex),P4(U,g.c,G,k,g.materialIndex),h&&($=c[n],W=$[0],X=$[1],j=$[2],H.set(cp(W.x,X.x),cp(W.y,X.y)),V.set(cp(X.x,j.x),cp(X.y,j.y)),B.set(cp(W.x,j.x),cp(W.y,j.y)),L4(Z,H,V,B),L4(Z,W,H,B),L4(Z,X,V,H),L4(Z,j,B,V));i.vertices=D,i.faces=U,h&&(i.faceVertexUvs[0]=Z)}},Xn=new R,xWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=i.geometry??(e==null?void 0:e.geometry)??new ze().copy(new Va(100,100,100)),n;e===void 0?(t.computeBoundingBox(),t.boundingBox.getSize(Xn),n={width:Xn.x,height:Xn.y,depth:Xn.z,subdivisions:0}):n=e.parameters;let r={...n,...i.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:t}}static build(i){let{width:e,height:t,depth:n,subdivisions:r}=i.parameters,s=i.geometry??new ze().copy(new Va(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(Xn)):Xn.set(o.width,o.height,o.depth),(e!==Xn.x||t!==Xn.y||n!==Xn.z)&&s.scale(Xn.x===0?1:e/Xn.x,Xn.y===0?1:t/Xn.y,Xn.z===0?1:n/Xn.z);let a=s.originalGeometry;return r>0?(a===void 0||(o==null?void 0:o.subdivisions)!==r)&&(a===void 0&&(a=s),s=new yWe(r).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete i.geometry,Object.assign(s,{userData:{...i,type:"NonParametricGeometry"}})}static loadFromUrl(i,e,t){new OY(t).load(i,n=>{let r=this.normalizeInputs({geometry:n});n.boundingBox.getSize(Xn);let s=100/Xn.x;Object.assign(r.parameters,{width:100,height:Xn.y*s,depth:Xn.z*s}),e(this.build(r))})}},Cee=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},i.parameters);return{shape:i.shape&&i.shape instanceof ln?i.shape:new ln,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e,height:t,spikes:n,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=i.parameters,l=i.shape,c=e*.5,h=t*.5,u=0,d=0,f=2*Math.PI/n;for(let m=0;m<n;m++){let y=f*m,g=u+Math.sin(y)*c,v=d+Math.cos(y)*h;l.addPoint(l.createPoint(g,v))}l.isClosed=!0;for(let m=0,y=l.points.length;m<y;m++)l.points[m].roundness=r;l.roundness=r,l.update();let p=xf.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(p,{userData:{...i,type:"PolygonGeometry"}})}},_We=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=i.parameters,c=new wWe(e*.5,t,r,s,o,a,l);return c.scale(1,1,n/e),Object.assign(c,{userData:{...i,type:"PyramidGeometry"}})}};function Zg(i,e,t){t.x=i.x*e.x,t.y=i.y,t.z=i.x*e.y}function Gw(i,e,t,n,r,s){let o=e.clone().sub(i),a=t.clone().sub(i),l=o.angleTo(a);if(o.normalize(),a.normalize(),n===r){let c=o.add(a).normalize();s.copy(i).addScaledVector(c,n/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(i),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,n/Math.sin(c))}}function bWe(i,e,t){let n=i.clone().sub(e),r=t.clone().sub(e);return n.projectOnVector(r),n.add(e)}var wWe=class extends ze{constructor(i=.5,e=1,t=4,n=1,r=!1,s=0,o=4){super(),t=Math.floor(Math.max(3,t)),n=Math.floor(n),o=Math.floor(o);let a=[],l=[],c=[],h=[],u=0,d=e/2,f=Math.PI/t,p=i*Math.cos(Math.PI/t),m=2*Math.PI/t,y=(t-2)*Math.PI/t,g=Math.PI-y,v=new R(0,-d,0),x=new R(0,d,0),_=new ae(i,-d),w=new ae(p,-d),b=new ae(0,x.y).sub(w),S=new ae(0,x.y).sub(_),A=new ae(b.y,-b.x).normalize(),E=new ae(S.y,-S.x).normalize(),T=i*Math.cos(Math.PI/t)*Math.tan((Math.PI-b.angle())/2)-1e-8;s=Math.min(s,T);let M;{let G=new R(A.x,A.y,0),U=new R(Math.cos(m)*G.x,G.y,Math.sin(m)*G.x);M=G.angleTo(U)}let C=s/Math.tan((Math.PI-b.angle())/2),D=s/Math.tan((Math.PI-M)/2),P=new R;if(!r){l.push(v.x,v.y,v.z),c.push(0,-1,0),h.push(0,0);let G=u++,U=[],Z=_.clone(),$=C/Math.cos(Math.PI/t);Z.x-=$;for(let W=0;W<t;W++){let X=W/t*Math.PI*2+f,j=new ae(Math.sin(X),Math.cos(X));Zg(Z,j,P),l.push(P.x,P.y,P.z),c.push(0,-1,0),h.push(0,0),U.push(u++)}for(let W=0;W<U.length;W++)a.push(U[W],G,U[(W+1)%U.length])}{let G=new R,U=new R,Z=new R,$=new R,W=new R,X=new R;for(let j=0;j<t;j++){let H=j/t*Math.PI*2+f,V=(j+.5)/t*Math.PI*2+f,B=(j+1)/t*Math.PI*2+f,q=new ae(Math.sin(H),Math.cos(H)),K=new ae(Math.sin(V),Math.cos(V)),Q=new ae(Math.sin(B),Math.cos(B));Zg(_,q,U),Zg(_,Q,Z),Zg(A,K,G),Gw(x,U,Z,D,D,$),l.push($.x,$.y,$.z),Gw(U,x,Z,D,C,W),l.push(W.x,W.y,W.z),Gw(Z,U,x,C,D,X),l.push(X.x,X.y,X.z),c.push(G.x,G.y,G.z),c.push(G.x,G.y,G.z),c.push(G.x,G.y,G.z),h.push(0,0),h.push(0,0),h.push(0,0);let oe=u++,ne=u++,L=u++;if(a.push(oe,ne,L),s>0){{let J=U.clone().add(Z).multiplyScalar(.5),ee=x.clone().sub(J).normalize(),F=v.clone().sub(J).normalize().add(ee).normalize().multiplyScalar(-1),N=X.clone().sub(W);I(J,N,F,b.angle())}let z,Y;{let J=new R;Zg(E,Q,J);let ee=X.clone().add($).multiplyScalar(.5);ee=bWe(ee,Z,x);let F=X.clone().sub($);[z,Y]=I(ee,F,J,M,$.y)}{let J=z,ee=J.clone().setY(0).normalize(),F=new R(0,-1,0),N=ee.clone().cross(F);k(J,ee,F,N)}{let J=b.angle(),ee=Math.PI-J,F=x.clone();F.y-=s/Math.sin(J-Math.PI/2);let N=new R,te=[];for(let re=0;re<o;re++){let ue=[],pe=Math.PI/2-ee*re/o,xe=Math.cos(pe),Se=Math.sin(pe),we=V;for(let ce=0;ce<=re;ce++){let Ee=Math.cos(we),ve=Math.sin(we);G.x=xe*ve,G.y=Se,G.z=xe*Ee,N.copy(F).addScaledVector(G,s),l.push(N.x,N.y,N.z),c.push(G.x,G.y,G.z),h.push(0,0),ue.push(u++),we+=Math.PI*2/re/t}te.push(ue)}Y.reverse(),te.push(Y);let le=te.length-1;for(let re=0;re<le;re++){let ue=te[re],pe=te[re+1],xe=ue.length-1;a.push(pe[1],ue[0],pe[0]);for(let Se=1;Se<=xe;Se++)a.push(ue[Se],ue[Se-1],pe[Se]),a.push(pe[Se+1],ue[Se],pe[Se])}}}}}this.setIndex(a),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(h,2));function I(G,U,Z,$,W){let X=-$/2,j=(Math.PI-$)/2,H=U.clone().normalize().cross(Z);G.addScaledVector(Z,-s/Math.sin(j));let V=new R,B=new R,q=1,K=u,Q=[];for(let oe=0;oe<=o;oe++){let ne=X+oe/o*$;B.set(0,0,0),B.addScaledVector(H,Math.sin(ne)),B.addScaledVector(Z,Math.cos(ne));for(let L=0;L<=q;L++){let z=L/q-.5;if(V.copy(G),V.addScaledVector(U,z),V.addScaledVector(B,s),W!=null){let Y=Math.max(0,V.y-W);V.addScaledVector(U,-Y/U.y)}l.push(V.x,V.y,V.z),c.push(B.x,B.y,B.z),h.push(0,0),L===0&&Q.push(u),u++}}for(let oe=0;oe<o;oe++)for(let ne=0;ne<q;ne++){let L=K+ne+(q+1)*oe,z=L+(q+1),Y=z+1,J=L+1;a.push(L,z,J),a.push(z,Y,J)}return[G.clone().addScaledVector(U,.5),Q]}function k(G,U,Z,$){let W=Math.PI/2,X=S.angle()-W,j=[],H=new R,V=new R;for(let q=0;q<=o;q++){let K=[],Q=q/o;for(let oe=0;oe<=q;oe++){let ne=((q?oe/q:0)-.5)*g,L=Math.cos(ne),z=Math.sin(ne),Y=Math.atan(Math.tan(X)*L),J=(W+Y)*Q,ee=Math.cos(J),F=Math.sin(J);H.set(0,0,0),H.addScaledVector(U,F*L),H.addScaledVector(Z,ee),H.addScaledVector($,F*z),V.copy(G).addScaledVector(H,s),l.push(V.x,V.y,V.z),c.push(H.x,H.y,H.z),h.push(0,0),K.push(u++)}j.push(K)}let B=j.length-1;for(let q=0;q<B;q++){let K=j[q],Q=j[q+1],oe=K.length-1;a.push(K[0],Q[1],Q[0]);for(let ne=1;ne<=oe;ne++)a.push(K[ne-1],K[ne],Q[ne]),a.push(K[ne],Q[ne+1],Q[ne])}}}},Dee=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},i.parameters),n=Object.assign((e==null?void 0:e.ui)??{enabledIndieCorners:!1},i.ui);return{shape:i.shape&&i.shape instanceof ln?i.shape:new ln,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)}),ui:n}}static build(i){let e=i.shape,{width:t,height:n,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=i.parameters,c={x:t*.5,y:n*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(_,w,b){return w>t&&b>n?Math.min(_*t/w,_*n/b):w>t?_*t/w:b>n?_*n/b:_}let f=[];f[0]=r[0]===0?0:d(r[0],r[0]+r[3],r[0]+r[1]),f[1]=r[1]===0?0:d(r[1],r[1]+r[2],r[1]+r[0]),f[2]=r[2]===0?0:d(r[2],r[2]+r[1],r[2]+r[3]),f[3]=r[3]===0?0:d(r[3],r[3]+r[0],r[3]+r[2]);let p=h.x,m=u.x,y=u.y,g=h.y;e.addPoint(e.createPoint(p,y)),e.addPoint(e.createPoint(m,y)),e.addPoint(e.createPoint(m,g)),e.addPoint(e.createPoint(p,g)),e.isClosed=!0;let v=!0;for(let _=0,w=e.points.length;_<w;_++)e.points[_].roundness=f[_],_>0&&f[_]!==f[_-1]&&(v=!1);v&&(e.roundness=f[0]),e.useCubicForRoundedCorners=s!==1,e.update();let x=xf.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...i,type:"RectangleGeometry"}})}},SWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e=100,height:t=e,depth:n=e,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=i.parameters,h=new iD(.5*e,r,s,o,a,l,c);return h.scale(1,t/e,n/e),Object.assign(h,{userData:{...i,type:"SphereGeometry"}})}},AWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:0})}}static build(i){let{width:e=100,height:t=e,widthSegments:n=8,heightSegments:r=8}=i.parameters,s=new iy(e,t,n,r);return s.scale(1,1,1),Object.assign(s,{userData:{...i,type:"PlaneGeometry"}})}},TWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width)})}}static build(i){let{width:e,height:t,depth:n,angle:r,cornerRadius:s,cornerSegments:o}=i.parameters,a=new MWe(e,t,n,r,s,o);return Object.assign(a,{userData:{...i,type:"BackdropGeometry"}})}},MWe=class extends ze{constructor(i=1,e=1,t=1,n=90,r=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;r==0&&(s=1),s=Math.max(1,Math.floor(s)),r=Math.min(r,100),n=Math.min(180-c,n),n*=Math.PI/180;let h=[],u=Math.PI/2,d=(q=0,K=0,Q=0)=>new R(q,K,Q),f=d(),p=d(),[m,y,g]=[e/2,i/2,t/2],v=-y,x=+y,[_,w,b]=[d(v,-m,+g),d(v,-m,-g),d(v,+m,-g)],S=(q,K=!1)=>Math.sin(q-Math.PI/(1+ +K)),A=(q,K=!1)=>Math.cos(q-Math.PI/(1+ +K));b.y=Math.sin(n)*e-m;let E=Math.cos(n)*e-g,T=_.z-c;n<=u?(b.z=Math.min(E,T),b.z==T&&(b.y-=(E-T)/Math.tan(u-n))):w.z=Math.min(w.z-E-g,_.z-c),f.subVectors(_,w),p.subVectors(b,w);let M=Math.min(f.length(),p.length())*r/100,C=M*Math.tan(n/2),D=M/Math.cos(n/2),P=f.clone().normalize().add(p.normalize()).setLength(D).add(w);f.set(0,S(n,!0),A(n,!0)),h.push([b,f.clone()]);let I=(Math.PI-n)/s;for(let q=0;q<=s;q++){let K=u+n+q*I;f.set(0,Math.sin(K)*C,Math.cos(K)*C),f.add(P),p.set(0,S(K),A(K)),h.push([f.clone(),p.clone()])}h.push([_,d(0,1,0)]);let k=Math.sin(I/2)*C*2,G=h.length-1,U=h[0][0].distanceTo(h[1][0]),Z=h[G-1][0].distanceTo(h[G][0]),$=U+k*s+Z;h[0].push(1);for(let q=0;q<=s;q++)h[q+1].push(1-(U+q*k)/$);h[G].push(0);let[W,X,j]=h[0],H,V,B;for(let q=1;q<h.length;q++)[H,V,B]=h[q],o.push(v,W.y,W.z,v,H.y,H.z,x,W.y,W.z,x,W.y,W.z,v,H.y,H.z,x,H.y,H.z),a.push(0,X.y,X.z,0,V.y,V.z,0,X.y,X.z,0,X.y,X.z,0,V.y,V.z,0,V.y,V.z),l.push(0,j,0,B,1,j,1,j,0,B,1,B),[W,X,j]=[H,V,B];this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(a,3)),this.setAttribute("uv",new Le(l,2))}},Pee=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},i.parameters);return{shape:i.shape&&i.shape instanceof ln?i.shape:new ln,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e,height:t,innerRadiusPercent:n,spikes:r,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=i.parameters,h=i.shape,u=e*.5,d=t*.5,f=0,p=0,m=o*Math.PI/360/r,y=Math.PI/2*3*-1,g=u*n/100,v=d*n/100;if(r===3&&n===50){m=2*Math.PI/r;for(let _=0;_<r;_++){let w=m*_,b=f+Math.sin(w)*u,S=p+Math.cos(w)*d;h.addPoint(h.createPoint(b,S))}}else for(let _=0;_<r;_++){let w=f+Math.cos(y)*u,b=p+Math.sin(y)*d;h.addPoint(h.createPoint(w,b)),y+=m,w=f+Math.cos(y)*g,b=p+Math.sin(y)*v,h.addPoint(h.createPoint(w,b)),y+=m}h.isClosed=!0;for(let _=0,w=h.points.length;_<w;_++)h.points[_].roundness=s;h.roundness=s,h.update();let x=xf.create({shape:h,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(x,{userData:{...i,type:"StarGeometry"}})}},EWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e,height:t}=i.parameters,n=new iy(e,t);return Object.assign(n,{userData:{...i,type:"TextFrameGeometry"}})}},CWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??t.width),s=Math.round(Math.abs(t.depth??t.width*.25));return{parameters:Object.assign(t,{width:n,height:r,depth:s})}}static build(i){let{width:e,height:t,depth:n,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=i.parameters,c=DWe(e,t,n,e*.5,o,s,0,0,r,a,l);return c.scale(1,t/e,1),Object.assign(c,{userData:{...i,type:"TorusGeometry"}})}};function DWe(i,e,t,n,r,s,o,a,l,c,h){return[e,t]=[t,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new aL(!0,i,e,t,n,r,s,o,a,l,c,h)}var PWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},i.parameters);return{parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width),depth:Math.abs(t.depth??t.width),tube:t.tube??t.width*.125})}}static build(i){let{width:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o}=i.parameters,a=e*.5;a!==t&&(a-=t);let l=new gY(a,t,n,r,s,o);return Object.assign(l,{userData:{...i,type:"TorusKnotGeometry"}})}},LWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},i.parameters);return{shape:i.shape&&i.shape instanceof ln?i.shape:new ln,parameters:Object.assign(t,{width:Math.abs(t.width),height:Math.abs(t.height??t.width*(t.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(t.depth??0)})}}static build(i){let{width:e=100,height:t,cornerRadius:n,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=i.parameters,l=i.shape,c=e*.5,h=t*.5;a?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=n;l.roundness=n,l.update();let u=xf.create({shape:l,parameters:{roundness:n,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...i,type:"TriangleGeometry"}})}};function IWe(i,e){let t=2*Math.PI;return(i%t+t)%t===(e%t+t)%t}var OWe=class{static create(i){return this.build(this.normalizeInputs(i))}static normalizeInputs(i,e){let t=Object.assign({},(e==null?void 0:e.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},i.parameters),n=Math.abs(t.width),r=Math.abs(t.height??t.width),s=Math.abs(t.depth??0),o=(e==null?void 0:e.shapeData)??oL.create({parameters:LJ}).userData.shape;return{path:i.path??A8.defaultData(),parameters:Object.assign(t,{width:n,height:r,depth:s,extrusion:{...IJ,...t.extrusion}}),shapeData:o}}static build(i){if(i.path.points.length>=2){let e=new RWe(i);return Object.assign(e,{userData:{...i,type:"PathGeometry"}})}else return Object.assign(new ze,{userData:{...i,type:"PathGeometry"}})}},RWe=class extends ze{constructor(i){super(),this.type="PathExtrusionGeometry",this.inputs=i,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let i=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&i.depth===1)||!IWe(i.twist,0)||i.startScale!==i.endScale}build(){let i=this._extractPathPoints();if(i.length<2)return;let e=this._computeBasisMatrices(i),{depth:t,offset:n}=this.inputs.parameters.extrusion,r=Math.max(2,Math.ceil(this.inputs.path.isClosed?t*i.length:(Math.min(n+t,1)-n)*i.length)),s=[],o=[],a=Math.floor(n*i.length);for(let x=0;x<r;x++){let _=this.inputs.path.isClosed?(x+a)%i.length:Math.min(i.length-1,x+a);s.push(i[_]),o.push(e[_])}this._isOpenEnded()&&this._isGeometryClosed()&&(r++,s.push(s[0].clone()),o.push(o[0].clone())),this._applyPathModifiers(o);let{regions:l,infos:c,vertices:h}=this._computeShapePoints(5),u=0,d=0;c.sort((x,_)=>x.start-_.start),c.forEach(x=>{x.verticesStart=u,x.verticesCount=x.count+x.continuous.reduce((_,w)=>_+(w?0:1),0),d+=x.verticesCount,u=d});let f=d*r,p,m=0;this._isOpenEnded()&&(p=mu({windingRule:fi.ODD,elementType:Gn.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:l}),m=p.vertexCount);let y=f+2*m,g={positions:new Float32Array(y*3),normals:new Float32Array(y*3),uvs:new Float32Array(y*2)},v=[];c.forEach(x=>{this._extrudeRegion(x,h,o,s,g,v,this._isGeometryClosed()&&!this._isOpenEnded())}),p&&(this._closeEnd(p,f,v,g,o[0],s[0],!1),this._closeEnd(p,f+m,v,g,o[o.length-1],s[s.length-1],!0)),this.setAttribute("position",new at(g.positions,3)),this.setAttribute("normal",new at(g.normals,3)),this.setAttribute("uv",new at(g.uvs,2)),this.setIndex(v),this.computeVertexNormals()}_extractPathPoints(){let i=this.inputs.path.isClosed,e=dee(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(n=>{t[t.length-1].distanceToSquared(n)>.001&&t.push(n)}),i&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(i){let e=[],t=i.length,n=this.inputs.path.isClosed,r=new R,s=new R,o=new R,a=new R,l=new R(0,1,0);for(let p=0;p<t;p++){let m=i[p],y;p===0?y=n?i[i.length-1]:m.clone().multiplyScalar(2).sub(i[1]):y=i[p-1];let g;p===t-1?g=n?i[0]:m.clone().multiplyScalar(2).sub(i[p-1]):g=i[p+1];let v=m.clone().sub(y).normalize(),x=g.clone().sub(m).normalize(),_=v.clone().add(x).normalize();o.copy(_),p===0&&(_.equals(l)||_.clone().negate().equals(l))&&l.set(0,0,1);let w=l.clone().cross(_).normalize(),b=_.clone().cross(w).normalize();l.copy(b),a.copy(w),p===0&&(r.copy(b),s.copy(_));let S=new Ce().makeBasis(w,b,_);e.push(S)}let c=n?s:o,h=n?r:new R(0,1,0),u=c.clone().cross(a).normalize(),d=Math.acos(h.dot(u));if(isNaN(d))return e;let f=h.clone().cross(u);c.dot(f)>0&&(d*=-1);for(let p=1;p<e.length;p++){let m=new Ce().makeRotationZ(d*p/e.length);e[p].multiply(m)}return e}_applyPathModifiers(i){let e=i.length,{angle:t,twist:n,startScale:r,endScale:s}=this.inputs.parameters.extrusion,o=new Ce,a=new Ce;return i.forEach((l,c)=>{let h=this._isGeometryClosed()?c/e:c/(e-1);o.makeRotationZ(hi.lerp(t,t+n,h));let u=hi.lerp(r,s,h);a.makeScale(u,u,u),l.multiply(o).multiply(a)}),i}_computeShapePoints(i=12,e=fi.ODD){let t=this.inputs.shapeData,n=t.extractShapePointsToFlatArray([],i),r=t.shapeHoles.map(c=>{let h=c.extractShapePointsToFlatArray([],i),u=[];for(let d=h.length-1;d>=1;d-=2){let f=h[d-1],p=h[d-0];u.push(f,p)}return u}),s=mu({windingRule:e,elementType:Gn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[n]}),o=mu({windingRule:fi.ODD,elementType:Gn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]});if(!s)throw new Error("error generating geometry");let a=s.elementCount;if(o){s.elementCount+=o.elementCount;for(let c=0;c<o.elements.length;c++){let h=o.elements[c],u=c%2===0?s.vertexCount:0;s.elements.push(h+u)}for(let c=0;c<o.vertexIndices.length;c++){let h=o.vertexIndices[c],u=s.vertexCount;s.vertexIndices.push(h+u)}for(let c=0;c<o.vertices.length;c++){let h=o.vertices[c];s.vertices.push(h)}}for(let c=0,h=s.vertexCount;c<h;c++){let u=c*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let h=c>=a,u=c*2,d=s.elements[u+0],f=s.elements[u+1],p=d+f,m={start:d,count:f,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let y=d,g=p-1,v=d+1,x=t.roundedCurves.length;do{let _=y-d;s.vertices[g*2+0],s.vertices[g*2+1];let w=s.vertices[y*2+0],b=s.vertices[y*2+1],S=s.vertices[v*2+0],A=s.vertices[v*2+1],E=w-S,T=b-A,M=Math.sqrt(E*E+T*T);E/=M,T/=M,m.normals[_*2+0]=-T,m.normals[_*2+1]=E;let C=s.vertexIndices[y];if(Array.isArray(C))m.continuous[_]=!1;else{let[D,P]=t.getCurveIndexFromVertexId(C-1,!0);if(P>0&&P<1)m.continuous[_]=!0;else{let I=P===1?D+1:D-1;I=(I+x)%x;let k=P===1?0:1,G=t.roundedCurves[D].getTangent(P),U=t.roundedCurves[I].getTangent(k);m.continuous[_]=G.dot(U)>.95}}h&&(m.normals[_*2+0]*=-1,m.normals[_*2+1]*=-1),[g,y,v]=[y,v,v+1],v>=p&&(v-=f)}while(v!==d+1)}return{regions:[n,...r],infos:l,vertices:s.vertices}}_insertVertex(i,e,t,n,r){let s=e*2,o=e*3;i.positions[o+0]=t.x,i.positions[o+1]=t.y,i.positions[o+2]=t.z,i.normals[o+0]=n.x,i.normals[o+1]=n.y,i.normals[o+2]=n.z,i.uvs[s+0]=r.x,i.uvs[s+1]=r.y}_extrudeRegion(i,e,t,n,r,s,o){let a=new R,l=new R,c=new ae;t.forEach((u,d)=>{let f=n[d],p=i.verticesStart*t.length+i.verticesCount*d;for(let m=0;m<i.count;m++){let y=(i.start+m)*2;a.set(e[y+0],e[y+1],0).applyMatrix4(u).add(f),l.set(i.normals[m*2+0],i.normals[m*2+1],0).applyMatrix4(u).normalize(),c.set(m/(i.count-1),d/(t.length-1)),this._insertVertex(r,p,a,l,c),p++,i.continuous[m]||(this._insertVertex(r,p,a,l,c),p++)}});let h=o?t.length:t.length-1;for(let u=0;u<h;u++){let d=i.verticesStart*t.length+i.verticesCount*u,f=o&&u===h-1?i.verticesStart*t.length:i.verticesStart*t.length+i.verticesCount*(u+1),p=0;for(let m=0;m<i.count;m++){i.continuous[m]||p++;let y=(m+1)%i.count===0?0:p+1,g=d+p,v=d+y,x=f+y,_=f+p;i.isHole?s.push(g,x,v,g,_,x):s.push(g,v,x,g,x,_),p++}}}_closeEnd(i,e,t,n,r,s,o){let a=i.vertexCount,l=new R(0,0,o?-1:1).applyMatrix4(r),c=new R,h=new ae;for(let d=0;d<a;d++){let f=2*d;c.set(i.vertices[f+0],i.vertices[f+1],0).applyMatrix4(r).add(s),this._insertVertex(n,e+d,c,l,h)}let u=i.elements;for(let d=0;d<i.elementCount;d++){let f=3*d,p=u[f+0]+e,m=u[f+(o?1:2)]+e,y=u[f+(o?2:1)]+e;t.push(p,m,y)}}};function NWe(){let i=new ze;return i.setAttribute("position",new at(new Float32Array([]),3)),i.setIndex(new at(new Uint16Array([]),1)),i}var FWe=12,zWe=1,Lee=class extends ze{constructor(i,e){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],this.userData={parameters:i,type:"TextGeometry"};let t=e.getFont(i.font);t!=null&&t.isLoaded?(this.font=t,this.update(i)):this.updateFont(i.font,e).then(()=>{this.update(i),e==null||e.requestRender()})}async updateFont(i,e){let t=e.getFont(i);t&&(this.font=t,await t.loadingPromise)}update(i){let e=this.font;if(this.userData={parameters:i,type:"TextGeometry"},!(e!=null&&e.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:t,height:n,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=i,c=l===2?a.toUpperCase():l===3?a.toLowerCase():a,h=kWe(i,e,c),{shapes:u,charWidths:d,charCoords:f}=e.generateShapes(h,i),p=t*.5,m=n*.5,y=u.map(x=>new ln().fromShape(x));this.vectorShapes=y;let g=y.map(x=>xf.create({shape:x,parameters:{depth:r,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:r<=0?fi.NONZERO:fi.ODD,subdivisions:this.isLowResolution&&r>0?zWe:FWe}})),v=g.length?$Ne(g):NWe();v.translate(-p,m,0),this.dispose(),this.wrappedText=h,this.charCoords=f,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(v.attributes).forEach(([x,_])=>{this.setAttribute(x,_)}),this.setIndex(v.index),this.computeBoundingSphere()}clone(){let i=OJ(new ze,Lee.prototype);return i.copy(this),console.log("CloneGeometry",this,i),i}copy(i){return Object.entries(i.attributes).forEach(([e,t])=>{this.setAttribute(e,t)}),this.setIndex(i.index),this.userData={parameters:{...i.userData.parameters},type:"TextGeometry"},this}async setText(i){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:i})}get text(){return this.userData.parameters.text??""}};function kWe(i,e,t){t=t??i.text;let n=[""],r="";for(let s of t)r+=s,s===" "||s===`
`?(n[n.length-1]+=r,r="",s===`
`&&n.push("")):e.getTextWidth(n[n.length-1]+r,i)>i.width&&(n[n.length-1].length&&n.push(""),e.getTextWidth(n[n.length-1]+r,i)>i.width&&(r.length===1?(n[n.length-1]+=r,r=""):(n[n.length-1]+=r.slice(0,-1),r=r[r.length-1],n.push(""))));return n[n.length-1]+=r,n}var BWe,lL=new Promise(i=>{BWe=i});function R8(i,e,t){let n={parameters:i,type:i.type};if(i.type==="PathGeometry")n.path=i.path;else if(i.type==="VectorGeometry"){let s=ln.createFromState(i.shape,i.width,i.height);n.shape=s}else if(i.type==="NonParametricGeometry")i.data.groups&&i.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),n.geometry=new OY().parse(i);else{if(i.type==="SubdivGeometry")return new ts(i,t);if(i.type==="TextGeometry")return new Lee(i,e)}let r;try{r=YU(n)}catch(s){console.error(s)}if(!r){let s=ln.createFromState(S8.defaultData(),100,100);n.shape=s,r=YU(n)}return r}var UWe=new Ce;function wM(i,e,t,n){let r=i.position.array,s=i.normal.array,o=UWe.makeScale(e,t,n).invert().elements,a,l,c;for(var h=0,u=r.length;h<u;h+=3)r[h]*=e,r[h+1]*=t,r[h+2]*=n,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c;i.position.needsUpdate=!0,i.normal.needsUpdate=!0}var I4=new er,up=new R,Je;lL.then(i=>{Je=i});var WU=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),$U=new Uint32Array([0,1,2,3]),qU=new Uint8Array([4]),ts=class extends ze{constructor(i,e){super(),this.data=i,this.flatShading=e,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(i,e){this.freeSubdivPointer();let t=this.data.scaleBaked,n=h1.div(e,t);this.subdividedGeometry&&wM(this.subdividedGeometry.attributes,...n),this.originalGeometry&&wM(this.originalGeometry.attributes,...n),this.data=i;let r=this.userData.parameters;this.userData.parameters={width:r.width*n[0],height:r.height*n[1],depth:r.depth*n[2]},this.originalGeometry.boundingSphere.center.multiply(up.fromArray(n));let s=up.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let i,e,t;try{({originalGeometry:i,subdividedGeometry:e,subdivPointer:t}=ts.build(this.data,void 0,!this.flatShading,void 0))}catch{i=new Va(100,100,100),t=0}this.subdivPointer=t,this.originalGeometry=i,this.subdividedGeometry=e??void 0;let n=this.subdividedGeometry??this.originalGeometry;Object.assign(this,n),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(ts.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let i=this.originalGeometry;i.boundingSphere===null&&(i.boundingSphere=new Fs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=i.boundingSphere));let e=i.attributes.position,t=i.boundingSphere.center;I4.setFromBufferAttribute(e),I4.getCenter(t),i.boundingSphere.radius=t.distanceTo(I4.max),isNaN(i.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),I4.getSize(up);let n={width:up.x,height:up.y,depth:up.z};return this.userData.parameters=n,n}static build(i,e,t,n){let r,s,o,a=(i==null?void 0:i.phongAngle)??35;t===!1&&(a=-1),e&&(Je.free_bvh(e),Je.free_subdivision_surface(e));try{r=ts.allocate(i,n)}catch(l){console.error(l,i),r=ts.allocate({positionWASM:WU,indexWASM:$U,verticesPerFaceWASM:qU},n)}if(Je.set_destination_refinement_level(r,0),s=ts.buildLevel(r,!0,a),i.subdivisions>0)try{Je.set_destination_refinement_level(r,i.subdivisions),o=ts.buildLevel(r,!1,a)}catch{try{Je.set_destination_refinement_level(r,i.subdivisions-1),o=ts.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(i,e,t){i.widthSegments>16&&(i.widthSegments=16),i.heightSegments>16&&(i.heightSegments=16),i.depthSegments>16&&(i.depthSegments=16),i.radialSegments>16&&(i.radialSegments=16),i.type==="DodecahedronGeometry"&&(i.detail=0);let n;if(i.type==="TorusGeometry"&&i.arc===Math.PI*2){let{width:c,height:h,depth:u,arc:d,tubularSegments:f,radialSegments:p}=i;n=new aL(!0,c,u,h,c*.5,d/(2*Math.PI),f,u/2,0,p,0,0,!0)}else n=i.shape!==void 0?e.geometry:R8(i,t,!1);let r,s,o,a;({positions:r,triIndices:a}=Iee(n.getAttribute("position"),n.getIndex()));let l;if(i.type==="CylinderGeometry"&&i.cornerRadius===0&&i.hollow===0&&i.openEnded===!1){let c=i.radialSegments*i.heightSegments*3*2,h=c+i.radialSegments*3;l=[c,h]}return{indices:s,verticesPerFace:o}=Oee(r,a,n,l),{positions:r,indices:s,verticesPerFace:o}}static allocate(i,e){var x;let t,n,r,s=[],o=[];i.positionWASM&&i.positionWASM.length>0?(t=i.positionWASM,n=i.indexWASM,r=i.verticesPerFaceWASM):(t=WU,n=$U,r=qU);let a=t.length,l=n.length,c=r.length,h=t.length+s.length+o.length,u=n.length+r.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,p=Je._malloc(d),m=new Float32Array(Je.HEAPF32.buffer,p,h),y=new Uint32Array(Je.HEAPU32.buffer,p+f,u);m.set(t,0),m.set(s,t.length),m.set(o,t.length+s.length),y.set(n,0),y.set(r,n.length);let g;(x=i==null?void 0:i.scaleBaked)!=null&&x.some(_=>_!==1)&&(g=new Ce().makeScale(...i.scaleBaked)),e&&(g?g.premultiply(e):g=e);let v=g?Je.alloc_subdivision_surface2(p,a,p+f,l,p+f+n.length*Uint32Array.BYTES_PER_ELEMENT,c,g.elements):Je.alloc_subdivision_surface(p,a,p+f,l,p+f+n.length*Uint32Array.BYTES_PER_ELEMENT,c);return Je._free(p),v}static buildLevel(i,e,t,n,r){let s=r?Je.get_mesh_data2(i,e?Je.Level.CONTROL:Je.Level.REFINED,t,r.elements):Je.get_mesh_data(i,e?Je.Level.CONTROL:Je.Level.REFINED,t),o=8,a=Je.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,h=Je.HEAPU32[a[c]>>2],u=Je.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Je.HEAPU32[a[c]>>2],f=Je.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=Je.HEAPU32[a[c]>>2],m=Je.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let y=Je.HEAPU32[a[c]>>2],g=Je.HEAPU32.subarray(y>>2,(y>>2)+l[c]);if(c++,n===void 0){let v=new ze;if(v.setIndex(new X2(g,1)),v.setAttribute("position",new Le(u,3)),v.setAttribute("normal",new Le(f,3)),e){v.setAttribute("faceMap",new X2(m,1));let x=new Float32Array(f.length/3*4).fill(0);v.setAttribute("color",new at(x,4))}return Je.free_mesh_data(s),v.userData.type="SubdivGeometry",v}n.getAttribute("position").copyArray(u),n.getAttribute("normal").copyArray(f),n.attributes.position.needsUpdate=!0,n.attributes.normal.needsUpdate=!0,Je.free_mesh_data(s)}static freeSubdivPointer(i){Je.free_bvh(i),Je.free_subdivision_surface(i)}static buildControlCageWireframe(i,e,t){let n=Je.get_wireframe_data_for_base_level(i),r=4,s=Je.HEAPU32.subarray(n>>2,(n>>2)+r),o=s.subarray(2,2+2),a=0,l=Je.HEAPU32[s[a]>>2],c=Je.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let h=Je.HEAPU32[s[a]>>2],u=Je.HEAPU32.subarray(h>>2,(h>>2)+o[a]);if(e===void 0){let d=new ze;d.setAttribute("position",new Le(c,3));let f=new Float32Array(c.length);for(let p=0,m=c.length;p<m;)f[p++]=t.r,f[p++]=t.g,f[p++]=t.b;return d.setAttribute("color",new at(f,3)),d.setIndex(new X2(u,1)),Je.free_wireframe_data_for_base_level(n),d}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,Je.free_wireframe_data_for_base_level(n)}static updateCollabMesh(i,e,t){let n=e===0;n||Je.set_destination_refinement_level(i,e);let r=t?Je.get_topological_data2(i,n?Je.Level.CONTROL:Je.Level.REFINED,t.elements):Je.get_topological_data(i,n?Je.Level.CONTROL:Je.Level.REFINED),s=6,o=Je.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(3,3+3),l=0,c=Je.HEAPU32[o[l]>>2],h=new Float32Array(Je.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=Je.HEAPU32[o[l]>>2],d=new Uint32Array(Je.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=Je.HEAPU32[o[l]>>2],p=new Uint8Array(Je.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return Je.free_topological_data(r),{positions:h,indices:d,verticesPerFace:p}}},XU=["getX","getY","getZ"];function Iee(i,e){let t={},n=e?e.count:i.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<n;c++){let h=e?e.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(i[XU[d]](h)*a)},`;if(u in t)s.push(t[u]);else{for(let d=0;d<3;d++)o.push(i[XU[d]](h));t[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var O4=new R,jw=new R,Hw=new R,Ww=new R;function Oee(i,e,t,n){let r=[],s=[];if(t.userData.shape!==void 0&&t.userData.parameters.depth===0&&t.userData.shape.shapeHoles.length===0){let o=t.userData.shape.extractShapePointsToFlatArray([]),a=t.userData.parameters.spikes;if(t.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&t.userData.parameters.angle>=360){let h=o.length/2/a;o=o.filter((u,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);i.length=0;let c=0;if(l<0)for(let h=0;h<o.length;h+=2)i.push(o[h],o[h+1],0),r.push(c++);else for(let h=o.length-2;h>=0;h-=2)i.push(o[h],o[h+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=t.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){O4.set(i[e[o]*3],i[e[o]*3+1],i[e[o]*3+2]),jw.set(i[e[o+1]*3],i[e[o+1]*3+1],i[e[o+1]*3+2]),Hw.set(i[e[o+4]*3],i[e[o+4]*3+1],i[e[o+4]*3+2]),Ww.set(i[e[o+5]*3],i[e[o+5]*3+1],i[e[o+5]*3+2]),jw.sub(O4).normalize(),Hw.sub(O4).normalize(),Ww.sub(O4).normalize();let l=jw.cross(Hw).dot(Ww);Math.abs(l)>.005||n&&n.some((c,h)=>h%2===1?!1:o>=n[h]&&o<n[h+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(t.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([t.userData.parameters.depth])[0];for(let h=0,u=0;h<i.length;h+=3,u++)i[h+2]===0&&(o.push(u),l++),i[h+2]===c&&a.push(u);if(t.userData.parameters.extrudeBevelSize===0){let h=a[0];a[0]=a[1],a[1]=h}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var Hc={};KNe(Hc,{calcBoolean:()=>HWe,calcBooleanTopological:()=>jWe,freeMeshSet:()=>qWe,getMeshSet:()=>WWe,transformMeshSet:()=>$We});var VWe=new Promise(i=>{}),Dt,m1;VWe.then(i=>Dt=i);function GWe(i,e,t){let n,{positions:r,triIndices:s}=Iee(i.getAttribute("position"),i.getIndex()),o;if(e&&t){let{indices:a,verticesPerFace:l}=Oee(r,s,i);o=l.length,n=[];for(let c=0,h=0;c<o;c++){n.push(l[c]);for(let u=0;u<l[c];u++)n.push(a[h++])}}else{let a=s.length;n=Array(a+a/3),o=0;for(let l=0,c=0;c<n.length;)n[c++]=3,o++,n[c++]=s[l++],n[c++]=s[l++],n[c++]=s[l++]}return{positions:r,faceIndices:n,nFaces:o}}function Ree(i){let e=i.length,t=e*Uint32Array.BYTES_PER_ELEMENT,n=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(i[0])?t:n,s=Dt._malloc(r);return(Number.isInteger(i[0])?new Uint32Array(Dt.HEAPU32.buffer,s,e):new Float32Array(Dt.HEAPF32.buffer,s,e)).set(i,0),s}function Nee(i){switch(i){case 0:return Dt.OP.UNION;case 1:return Dt.OP.INTERSECTION;case 2:return Dt.OP.A_MINUS_B;case 3:return Dt.OP.B_MINUS_A;case 4:return Dt.OP.SYMMETRIC_DIFFERENCE;case 5:return Dt.OP.ALL;default:throw new Error("Unknown boolean operation "+i)}}function jWe(i,e){m1===void 0&&(m1=Dt.init_csg());let t=Ree(i),n=Dt.csg_calc_topological(m1,t,i.length,Nee(e));Dt._free(t);let r=6,s=Dt.HEAPU32.subarray(n>>2,(n>>2)+r),o=s.subarray(3,3+3),a=0,l=Dt.HEAPU32[s[a]>>2],c=new Float32Array(Dt.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=Dt.HEAPU32[s[a]>>2],u=new Uint32Array(Dt.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=Dt.HEAPU32[s[a]>>2],f=new Uint8Array(Dt.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return Dt.free_mesh_data(n),{positions:c,indices:u,verticesPerFace:f}}function HWe(i,e,t,n){m1===void 0&&(m1=Dt.init_csg());let r=Ree(i),s=Dt.csg_calc(m1,r,i.length,n,Nee(e));Dt._free(r);let o=5,a=Dt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=Dt.HEAPU32[a[c]>>2],u=Dt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Dt.HEAPU32[a[c]>>2],f=Dt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=l[c];t.setAttribute("position",new Le(u,3)),t.setAttribute("normal",new Le(f,3));let m=Dt.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return t.boundingSphere===null&&(t.boundingSphere=new Fs),t.boundingSphere.center.set(m[0],m[1],m[2]),t.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,t.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},Dt.free_mesh_data(s),p}function WWe(i,e,t){if(Dt===void 0)return-1;let n,r,s;if(e&&i.userData.positions!==void 0){let m=i.userData;s=m.verticesPerFace.length,n=m.positions,r=Array(m.verticesPerFace.reduce((y,g)=>y+g,0)+s);for(let y=0,g=0,v=0;y<m.verticesPerFace.length;y++){r[v++]=m.verticesPerFace[y];for(let x=0;x<m.verticesPerFace[y];x++)r[v++]=m.indices[g++]}}else({positions:n,faceIndices:r,nFaces:s}=GWe(i,e,t));let o=n.length,a=r.length,l=n.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=Dt._malloc(h),f=new Float32Array(Dt.HEAPF32.buffer,d,l),p=new Uint32Array(Dt.HEAPU32.buffer,d+u,c);return f.set(n,0),p.set(r,0),Dt.get_csg_mesh(d,o,d+u,a,s)}function $We(i,e){Dt.transform_csg_mesh(i,e.elements)}function qWe(i){Dt.free_csg_mesh(i)}var XWe={ConeGeometry:PHe,CubeGeometry:LHe,CylinderGeometry:DHe,DodecahedronGeometry:OHe,EllipseGeometry:oL,HelixGeometry:uWe,IcosahedronGeometry:hWe,LatheGeometry:dWe,NonParametricGeometry:xWe,PolygonGeometry:Cee,PyramidGeometry:_We,RectangleGeometry:Dee,SphereGeometry:SWe,PlaneGeometry:AWe,BackdropGeometry:TWe,StarGeometry:Pee,TextFrameGeometry:EWe,TorusGeometry:CWe,TorusKnotGeometry:PWe,TriangleGeometry:LWe,PathGeometry:OWe,VectorGeometry:xf},YU=i=>XWe[i.type].create(i);function Qg(i){return i!==null&&"booleanOp"in i}var Fee=class extends fee(Cn){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ce}updateVisible(){super.updateVisible(),this.visible=!Qg(this.parent)&&this.visible,Qg(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Hc.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(i=!1){return i?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Qg(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let i of this.children)i instanceof Fee&&(i.freeBooleanPointer(),Qg(i)&&i.invalidateUpstreamBooleanData())}updateTransformState(i){let e=super.updateTransformState(i);return e&&Qg(this.parent)&&this.invalidateDownstreamBooleanData(!0),e}},R4=new er;function cL(i,e=0,t=i.count,n,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=e;u<t;u++){let d=i.getX(u),f=i.getY(u),p=i.getZ(u);d<s&&(s=d),f<o&&(o=f),p<a&&(a=p),d>l&&(l=d),f>c&&(c=f),p>h&&(h=p)}R4.min.set(s,o,a),R4.max.set(l,c,h),R4.getCenter(n),R4.getSize(r).multiplyScalar(.5)}var YWe=new ze,ZWe=new os,Wm=class extends Fee{constructor(i,e){super(YWe,ZWe),this.super_Entity(i,e)}updateState(i,e){this.updateState_Entity(i,e)}updateEntityBoxSize(i,e){let t=this.geometry.getAttribute("position");t!==void 0?cL(t,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:t.count,i,e):super.updateEntityBoxSize(i,e)}},ZU=class{constructor(i){i=i??{},this.name=i.name,this.type=i.type,this.node=i.node,this.size=i.size,this.needsUpdate=i.needsUpdate}get value(){return this.node.value}set value(i){this.node.value=i}},ch=class{constructor(i){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=hi.generateUUID(),this.type=i,this.name=""}analyze(i,e){e=e??{},i.analyzing=!0,this.build(i.addFlow(e.slot,e.cache,e.context),"v4"),i.clearVertexNodeCode(),i.clearFragmentNodeCode(),i.removeFlow(),i.analyzing=!1}analyzeAndFlow(i,e,t){return t=t??{},this.analyze(i,t),this.flow(i,e,t)}flow(i,e,t){t=t??{},i.addFlow(t.slot,t.cache,t.context);let n={result:this.build(i,e),code:i.clearNodeCode(),extra:i.context.extra};return i.removeFlow(),n}build(i,e,t){e=e??this.getType(i,e);let n=i.getNodeData(t??this);return i.analyzing&&this.appendDepsNode(i,n,e),i.nodes.indexOf(this)===-1&&i.nodes.push(this),this.updateFrame!==void 0&&i.updaters.indexOf(this)===-1&&i.updaters.push(this),this.generate(i,e,t)}updateFrame(i){}generateReadonly(i,e,t,n,r,s){return""}generate(i,e,t,n,r){return""}parse(i,e,t,n){}appendDepsNode(i,e,t){e.deps=(e.deps||0)+1;let n=i.getTypeLength(t);(n>(e.outputMax||0)||this.getType(i,t))&&(e.outputMax=n,e.output=t)}setName(i){this.name=i}getName(){return this.name}getType(i,e){return e==="sampler2D"||e==="samplerCube"?e:this.type}getHash(){let i="{",e,t;for(e in this)t=this[e],t instanceof ch&&(i+='"'+e+'":'+t.getHash()+",");if(this.hashProperties)for(let n=0;n<this.hashProperties.length;n++)e=this.hashProperties[n],t=this[e],i+='"'+e+'":"'+String(t)+'",';return i+='"id":"'+this.uuid+'"}',i}},QWe=class{constructor(){this.nodes={},this.keywords={}}add(i){this.nodes[i.name]=i}addKeyword(i,e,t){t=t!==void 0?t:!0,this.keywords[i]={callback:e,cache:t}}remove(i){delete this.nodes[i.name]}removeKeyword(i){delete this.keywords[i]}get(i){return this.nodes[i]}getKeyword(i,e){return this.keywords[i].callback(e)}getKeywordData(i){return this.keywords[i]}contains(i){return this.nodes[i]!==void 0}containsKeyword(i){return this.keywords[i]!==void 0}},As=new QWe,Ti=class extends ch{constructor(i,e){super(i),this.scope="",e=e??{},this.shared=e.shared!==void 0?e.shared:!0,this.unique=e.unique!==void 0?e.unique:!1}build(i,e,t,n){if(e=e??this.getType(i),this.getShared(i,e)){let r=this.getUnique(i,e);r&&this.uuid===void 0&&(this.uuid=hi.generateUUID()),t=i.getUUID(t??this.getUUID(),!r);let s=i.getNodeData(t),o=s.output||this.getType(i);if(i.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(i,s,e),this.generate(i,e,t)):super.build(i,e,t);if(r)return s.name=s.name||super.build(i,e,t),s.name;if(!this.getLabel()&&(!this.getShared(i,o)||i.context.ignoreCache||s.deps===1))return super.build(i,e,t);t=this.getUUID(!1);let a=this.getTemp(i,t);if(a)return i.format(a,o,e);{a=super.generate(i,e,t,s.output,n);let l=this.generate(i,o,t);return i.addNodeCode(a+" = "+l+";"),i.format(a,o,e)}}return super.build(i,e,t)}getShared(i,e){return e!=="sampler2D"&&e!=="samplerCube"&&this.shared}getUnique(i,e){return this.unique}setLabel(i){return this.label=i,this}getLabel(){return this.label}getUUID(i){let e=this.uuid;return typeof this.scope=="string"&&(e=this.scope+"-"+e),e}getTemp(i,e){e=e||this.uuid;let t=i.getVars()[e];return t?t.name:void 0}generate(i,e,t,n,r){return this.getShared(i,e)||console.error("TempNode is not shared"),t=t??this.uuid,i.getTempVar(t,n??this.getType(i),r,this.getLabel()).name}},uo=class extends Ti{constructor(i,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(i,e),this.readonly=!1}setReadonly(i){return this.readonly=i,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(i,e,t,n,r,s){t=i.getUUID(t??this.getUUID()),n=n??this.getType(i);let o=i.getNodeData(t);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(i,e,t,n,r,s):i.isShader("vertex")?(o.vertex||(o.vertex=i.createVertexUniform(n,this,r,s,this.getLabel())),i.format(o.vertex.name,n,e)):(o.fragment||(o.fragment=i.createFragmentUniform(n,this,r,s,this.getLabel())),i.format(o.fragment.name,n,e))}},Co=class extends uo{constructor(i=0,e){super("v2"),this.nodeType="Vector2",this.value=i instanceof ae?i:new ae(i,e)}get x(){return this.value.x}set x(i){this.value.x=i}get y(){return this.value.y}set y(i){this.value.y=i}generateReadonly(i,e,t,n,r,s){return i.format("vec2("+this.value.x+", "+this.value.y+")",n,e)}},wo=class extends uo{constructor(i=0,e,t){super("v3"),this.nodeType="Vector3",this.value=i instanceof R?i:new R(i,e,t)}get x(){return this.value.x}set x(i){this.value.x=i}get y(){return this.value.y}set y(i){this.value.y=i}get z(){return this.value.z}set z(i){this.value.z=i}generateReadonly(i,e,t,n,r,s){return i.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,e)}},ka=class extends Pe{constructor(i,e,t,n){super(i,e,t),this.isColorA=!0,this.a=n}setRGBA(i,e,t,n){super.setRGB(i,e,t),this.a=n}copy(i){return super.copy(i),this.a="a"in i?i.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(i){this.r=i}set y(i){this.g=i}set z(i){this.b=i}set w(i){this.a=i}},nd=class extends uo{constructor(i){super("v4"),this.nodeType="Vector4",this.value=i instanceof ka?i:new ka(i.r,i.g,i.b,i.a)}generateReadonly(i,e,t,n,r,s){return i.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",n,e)}},KWe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,QU=/[a-z_0-9]+/gi,Xe=class extends Ti{constructor(i,e,t,n,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=r===void 0,this.isInterface=!1,this.parse(i,e,t,n)}getShared(i,e){return!this.isMethod}getType(i){return i.getTypeByFormat(this.type)}getInputByName(i){if(this.inputs){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===i)return this.inputs[e]}}getIncludeByName(i){if(this.includes){let e=this.includes.length;for(;e--;)if(this.includes[e].name===i)return this.includes[e]}}generate(i,e,t,n,r){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)i.include(this.includes[c],this);for(let c in this.extensions)i.extensions[c]=!0;let l=[];for(;s=QU.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let h=l[c],u=h[0],d=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&d&&As.containsKeyword(u)){let p=this.keywords[u];if(!p){let m=As.getKeywordData(u);m.cache&&(p=i.keywords[u]),p=p||As.getKeyword(u,i),m.cache&&(i.keywords[u]=p)}f=p.build(i)}u!==f&&a[h.index+o-1]!=="."&&(a=a.substring(0,h.index+o)+f+a.substring(h.index+u.length+o),o+=f.length-u.length),this.getIncludeByName(f)===void 0&&As.contains(f)&&i.include(As.get(f))}return e==="source"?a:this.isMethod?(this.isInterface||i.include(this,void 0,a),this.name):i.format("( "+a+" )",this.getType(i),e)}parse(i,e,t,n){if(this.src=i||"",this.includes=e??[],this.extensions=t??{},this.keywords=n??{},this.isMethod){let r=KWe.exec(this.src);if(this.inputs=[],r&&r.length==4){this.type=r[1],this.name=r[2];let s=r[3].match(QU);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},JWe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,zee=class extends Ti{constructor(i="",e){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(i||zee.PI,void 0,void 0,void 0,e)}getType(i){return i.getTypeByFormat(this.type)}parse(i,e,t,n,r){this.src=i||"";let s,o,a="",l=JWe.exec(i);this.useDefine=r??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(i,e){if(e==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return i.include(this),i.format(this.name,this.getType(i),e)}generate(i,e,t,n,r){return i.format(this.name,this.getType(i),e)}},li=zee;li.PI="PI",li.PI2="PI2",li.RECIPROCAL_PI="RECIPROCAL_PI",li.RECIPROCAL_PI2="RECIPROCAL_PI2",li.LOG2="LOG2",li.EPSILON="EPSILON";var e$e=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),t$e=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),kee=class extends Ti{constructor(i=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(i)}getType(i){return i.getTypeByFormat(this.name)}getInputByName(i){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===i)return this.inputs[e]}generate(i,e,t,n,r){return e==="source"?this.src+";":i.format("( "+this.src+" )",this.getType(i),e)}parse(i=""){this.src=i,this.inputs=[];let e=e$e.exec(i);if(e){let t=e[2],n;for(;n=t$e.exec(t);)this.inputs.push({type:n[1],name:n[2]});this.name=e[1]}else this.name="";this.type=this.name}},uL=class extends Ti{constructor(i){super("v2",{shared:!1}),this.nodeType="UV",this.index=i??0}generate(i,e){i.requires.uv[this.index]=!0;let t=this.index>0?this.index+1:"",n=i.isShader("vertex")?"uv"+t:"vUv"+t;return i.format(n,this.getType(i),e)}};As.addKeyword("uv",function(){return new uL});As.addKeyword("uv2",function(){return new uL(1)});var wp=class extends Ti{constructor(i,e){super("v4"),this.nodeType="ColorSpace",this.input=i,this.method=e??wp.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(i){switch(i){case Kn:return["Linear"];case Fr:return["sRGB"];default:return[]}}generate(i,e){var o;let t=this.input.build(i,"v4"),n=this.getType(i),r=wp.Nodes[this.method],s=i.include(r);if(s===wp.LINEAR_TO_LINEAR)return i.format(t,n,e);if(((o=r.inputs)==null?void 0:o.length)===2){let a=this.factor.build(i,"f");return i.format(s+"( "+t+", "+a+" )",n,e)}else return i.format(s+"( "+t+" )",n,e)}fromEncoding(i){let e=wp.getEncodingComponents(i);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(i){let e=wp.getEncodingComponents(i);this.method=e[0]+"ToLinear",this.factor=e[1]}},E0=wp;E0.Nodes={LinearToLinear:new Xe(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Xe(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Xe(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},E0.LINEAR_TO_LINEAR="LinearToLinear",E0.SRGB_TO_LINEAR="sRGBToLinear",E0.LINEAR_TO_SRGB="LinearTosRGB";var zi=class extends Xe{constructor(i="",e,t,n,r){super(i,r,n,t,e),this.nodeType="Expression"}},gu=class extends uo{constructor(i=new Zi,e,t,n){super("v4",{shared:!0}),this.nodeType="Texture",this.value=i,this.uv=e??new uL,this.bias=t,this.project=n!==void 0?n:!1}getTexture(i,e){return super.generate(i,e,this.value.uuid,"t")}generate(i,e){if(e==="sampler2D")return this.getTexture(i,e);let t=this.getTexture(i,e),n=this.uv.build(i,this.project?"v4":"v2"),r=this.bias?this.bias.build(i,"f"):void 0;r===void 0&&i.context.bias&&(r=i.context.bias.setTexture(this).build(i,"f"));let s,o;this.project?s="texture2DProj":s=r?"tex2DBias":"tex2D",r?o=s+"( "+t+", "+n+", "+r+" )":o=s+"( "+t+", "+n+" )";let a={include:i.isShader("vertex"),ignoreCache:!0},l=this.getType(i);return i.addContext(a),this.colorSpace=this.colorSpace??new E0(new zi("",l)),this.colorSpace.fromDecoding(i.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(i,l),i.removeContext(),i.format(o,l,e)}},He=class extends uo{constructor(i){super("f"),this.nodeType="Float",this.value=i??0}generateReadonly(i,e,t,n,r,s){return i.format(this.value+(this.value%1?"":".0"),n,e)}},KU=class extends Ti{constructor(i,e){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=i,this.inputs=e??[]}getFunction(){return this.value}getType(i){return this.value.getType(i)}generate(i,e,t,n,r){n=this.getType(i);let s=this.value,o=s.build(i,e)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],h=this.inputs[l]||this.inputs[c.name];a.push(h.build(i,i.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return i.format(o,n,e)}},Bee=class extends Ti{constructor(i,e,t=Bee.ADD){super(),this.nodeType="Operator",this.type=i.type,this.a=i,this.b=e,this.op=t}getType(i){let e=this.a.getType(i),t=this.b.getType(i);return i.isTypeMatrix(e)?"v4":i.getTypeLength(t)>i.getTypeLength(e)?t:e}generate(i,e){let t=this.getType(i);this.type=t;let n=this.a.build(i,t),r=this.b.build(i,t);return i.format("( "+n+" "+this.op+" "+r+" )",t,e)}},C0=Bee;C0.ADD="+",C0.SUB="-",C0.MUL="*",C0.DIV="/";var oi=class extends Ti{constructor(i,e=oi.ABS,t,n){super(),this.nodeType="Math",this.a=i,typeof e!="string"?this.b=e:n=e,typeof t!="string"?this.c=t:n=t,this.method=n,this.hashProperties=["method"]}getNumInputs(i){switch(this.method){case oi.MIX:case oi.CLAMP:case oi.REFRACT:case oi.SMOOTHSTEP:case oi.FACEFORWARD:return 3;case oi.MIN:case oi.MAX:case oi.MOD:case oi.STEP:case oi.REFLECT:case oi.DISTANCE:case oi.DOT:case oi.CROSS:case oi.POW:return 2;default:return 1}}getInputType(i){let e=i.getTypeLength(this.a.getType(i)),t=this.b?i.getTypeLength(this.b.getType(i)):0,n=this.c?i.getTypeLength(this.c.getType(i)):0;return e>t&&e>n?this.a.getType(i):t>n?this.b.getType(i):this.c.getType(i)}getType(i){switch(this.method){case oi.LENGTH:case oi.DISTANCE:case oi.DOT:return"f";case oi.CROSS:return"v3"}return this.getInputType(i)}generate(i,e){let t,n,r,s=this.a?i.getTypeLength(this.a.getType(i)):0,o=this.b?i.getTypeLength(this.b.getType(i)):0,a=this.c?i.getTypeLength(this.c.getType(i)):0,l=this.getInputType(i),c=this.getType(i);switch(this.type=c,this.method){case oi.NEGATE:return i.format("( -"+this.a.build(i,l)+" )",l,e);case oi.INVERT:return i.format("( 1.0 - "+this.a.build(i,l)+" )",l,e);case oi.CROSS:t=this.a.build(i,"v3"),n=this.b.build(i,"v3");break;case oi.STEP:t=this.a.build(i,s===1?"f":l),n=this.b.build(i,l);break;case oi.MIN:case oi.MAX:case oi.MOD:t=this.a.build(i,l),n=this.b.build(i,o===1?"f":l);break;case oi.REFRACT:t=this.a.build(i,l),n=this.b.build(i,l),r=this.c.build(i,"f");break;case oi.MIX:t=this.a.build(i,l),n=this.b.build(i,l),r=this.c.build(i,a===1?"f":l);break;default:t=this.a.build(i,l),this.b&&(n=this.b.build(i,l)),this.c&&(r=this.c.build(i,l));break}let h=[];h.push(t),n&&h.push(n),r&&h.push(r);let u=this.getNumInputs(i);if(h.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${h.length}.`);return i.format(this.method+"( "+h.join(", ")+" )",c,e)}},dt=oi;dt.RAD="radians",dt.DEG="degrees",dt.EXP="exp",dt.EXP2="exp2",dt.LOG="log",dt.LOG2="log2",dt.SQRT="sqrt",dt.INV_SQRT="inversesqrt",dt.FLOOR="floor",dt.CEIL="ceil",dt.NORMALIZE="normalize",dt.FRACT="fract",dt.SATURATE="saturate",dt.SIN="sin",dt.COS="cos",dt.TAN="tan",dt.ASIN="asin",dt.ACOS="acos",dt.ARCTAN="atan",dt.ABS="abs",dt.SIGN="sign",dt.LENGTH="length",dt.NEGATE="negate",dt.INVERT="invert",dt.MIN="min",dt.MAX="max",dt.MOD="mod",dt.STEP="step",dt.REFLECT="reflect",dt.DISTANCE="distance",dt.DOT="dot",dt.CROSS="cross",dt.POW="pow",dt.MIX="mix",dt.CLAMP="clamp",dt.REFRACT="refract",dt.SMOOTHSTEP="smoothstep",dt.FACEFORWARD="faceforward";var E2=class extends Ti{constructor(i,e,t){super("v4"),this.nodeType="TextureCubeUV",this.value=i,this.uv=e,this.bias=t}bilinearCubeUV(i,e,t,n){let r=new KU(E2.Nodes.bilinearCubeUV,[e,t,n]);this.colorSpaceTL=this.colorSpaceTL??new E0(new zi("","v4")),this.colorSpaceTL.fromDecoding(i.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(i)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new E0(new zi("","v4")),this.colorSpaceTR.fromDecoding(i.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(i)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new E0(new zi("","v4")),this.colorSpaceBL.fromDecoding(i.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(i)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new E0(new zi("","v4")),this.colorSpaceBR.fromDecoding(i.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(i)+".br");let s={include:i.isShader("vertex"),ignoreCache:!0};i.addContext(s),this.colorSpaceTLExp=new zi(this.colorSpaceTL.build(i,"v4"),"v4"),this.colorSpaceTRExp=new zi(this.colorSpaceTR.build(i,"v4"),"v4"),this.colorSpaceBLExp=new zi(this.colorSpaceBL.build(i,"v4"),"v4"),this.colorSpaceBRExp=new zi(this.colorSpaceBR.build(i,"v4"),"v4"),i.removeContext();let o=new zi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=r,o}generate(i,e){if(i.isShader("fragment")){let t=this.uv,n=this.bias||i.context.roughness,r=new KU(E2.Nodes.roughnessToMip,[n]),s=new dt(r,E2.Nodes.m0,E2.Nodes.cubeUV_maxMipLevel,dt.CLAMP),o=new dt(s,dt.FLOOR),a=new dt(s,dt.FRACT),l=this.bilinearCubeUV(i,this.value,t,o),c=this.bilinearCubeUV(i,this.value,t,new C0(o,new He(1).setReadonly(!0),C0.ADD)),h=new dt(l,c,a,dt.MIX);return i.format(h.build(i),"v4",e)}else return console.warn("TextureCubeUVNode is not compatible with "+i.shader+" shader."),i.format("vec4( 0.0 )",this.getType(i),e)}},SM=E2;SM.Nodes=function(){let i=new kee(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new li("float cubeUV_maxMipLevel 8.0",!0),t=new li("float cubeUV_minMipLevel 4.0",!0),n=new li("float cubeUV_maxTileSize 256.0",!0),r=new li("float cubeUV_minTileSize 16.0",!0),s=new Xe(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new Xe(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new Xe(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[i,s,o,e,t,n,r]);a.useKeywords=!1;let l=new li("float r0 1.0",!0),c=new li("float v0 0.339",!0),h=new li("float m0 -2.0",!0),u=new li("float r1 0.8",!0),d=new li("float v1 0.276",!0),f=new li("float m1 -1.0",!0),p=new li("float r4 0.4",!0),m=new li("float v4 0.046",!0),y=new li("float m4 2.0",!0),g=new li("float r5 0.305",!0),v=new li("float v5 0.016",!0),x=new li("float m5 3.0",!0),_=new li("float r6 0.21",!0),w=new li("float v6 0.0038",!0),b=new li("float m6 4.0",!0),S=[l,c,h,u,d,f,p,m,y,g,v,x,_,w,b],A=new Xe(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,S);return{bilinearCubeUV:a,roughnessToMip:A,m0:h,cubeUV_maxMipLevel:e}}();var Sp=class extends Ti{constructor(i){super("v3"),this.nodeType="Normal",this.scope=i??Sp.VIEW}getShared(){return this.scope===Sp.WORLD}build(i,e,t,n){let r=i.context[this.scope+"Normal"];return r?r.build(i,e,t,n):super.build(i,e,t)}generate(i,e,t,n,r){let s;switch(this.scope){case Sp.VIEW:i.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Sp.LOCAL:i.isShader("vertex")?s="objectNormal":(i.requires.normal=!0,s="vObjectNormal");break;case Sp.WORLD:i.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(i.requires.worldNormal=!0,s="vWNormal");break}return i.format(s,this.getType(i),e)}},Ms=Sp;Ms.LOCAL="local",Ms.WORLD="world",Ms.VIEW="view",Ms.NORMAL="normal";As.addKeyword("viewNormal",function(){return new Ms(Ms.VIEW)});As.addKeyword("localNormal",function(){return new Ms(Ms.NORMAL)});As.addKeyword("worldNormal",function(){return new Ms(Ms.WORLD)});var El=class extends Ti{constructor(i){super("v3"),this.nodeType="Position",this.scope=i??El.LOCAL}getType(){switch(this.scope){case El.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case El.LOCAL:case El.WORLD:return!1}return!0}generate(i,e,t,n,r){let s;switch(this.scope){case El.LOCAL:i.isShader("vertex")?s="transformed":(i.requires.position=!0,s="vPosition");break;case El.WORLD:if(i.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";i.requires.worldPosition=!0,s="vWPosition";break;case El.VIEW:s=i.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case El.PROJECTION:s=i.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return i.format(s,this.getType(),e)}},Da=El;Da.LOCAL="local",Da.WORLD="world",Da.VIEW="view",Da.PROJECTION="projection";As.addKeyword("position",function(){return new Da});As.addKeyword("worldPosition",function(){return new Da(Da.WORLD)});As.addKeyword("viewPosition",function(){return new Da(Da.VIEW)});var a0=class extends Ti{constructor(i){super("v3"),this.nodeType="Reflect",this.scope=i??a0.CUBE}getUnique(i){return!i.context.viewNormal}getType(){switch(this.scope){case a0.SPHERE:return"v2"}return this.type}generate(i,e){let t=this.getUnique(i);if(i.isShader("fragment")){let n;switch(this.scope){case a0.VECTOR:{let r=new Ms(Ms.VIEW),s=i.context.roughness,o=r.build(i,"v3"),a=new Da(Da.VIEW).build(i,"v3"),l=s?s.build(i,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${c}, viewMatrix )`;t?(i.addNodeCode(`vec3 reflectVec = ${h};`),n="reflectVec"):n=h;break}case a0.CUBE:{let r=new a0(a0.VECTOR).build(i,"v3"),s="vec3( -"+r+".x, "+r+".yz )";t?(i.addNodeCode(`vec3 reflectCubeVec = ${s};`),n="reflectCubeVec"):n=s;break}case a0.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new a0(a0.VECTOR).build(i,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";t?(i.addNodeCode(`vec2 reflectSphereVec = ${r};`),n="reflectSphereVec"):n=r;break}}return i.format(n,this.getType(),e)}else return console.warn("ReflectNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.type,e)}},g1=a0;g1.CUBE="cube",g1.SPHERE="sphere",g1.VECTOR="vector";var i$e=class extends Ti{constructor(i=new gu,e,t){super("v4"),this.nodeType="TextureCube",this.value=i,this.radianceNode=new SM(this.value,e??new g1(g1.VECTOR),t),this.irradianceNode=new SM(this.value,new Ms(Ms.WORLD),new He(1).setReadonly(!0))}generate(i,e){return i.isShader("fragment")?(i.require("irradiance"),i.context.bias&&i.context.bias.setTexture(this.value),(i.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(i,e)):(console.warn("TextureCubeNode is not compatible with "+i.shader+" shader."),i.format("vec4( 0.0 )",this.getType(i),e))}},n$e=class extends uo{constructor(i=new ty,e,t){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=i,this.uv=e??new g1,this.bias=t}getTexture(i,e){return super.generate(i,e,this.value.uuid,"tc")}generate(i,e){var l;if(e==="samplerCube")return this.getTexture(i,e);let t=this.getTexture(i,e),n=(l=this.uv)==null?void 0:l.build(i,"v3"),r=this.bias?this.bias.build(i,"f"):void 0;r===void 0&&i.context.bias&&(r=i.context.bias.setTexture(this).build(i,"f"));let s;r?s="texCubeBias( "+t+", "+n+", "+r+" )":s="texCube( "+t+", "+n+" )";let o={include:i.isShader("vertex"),ignoreCache:!0},a=this.getType(i);return i.addContext(o),this.colorSpace=this.colorSpace??new E0(new zi("",a)),this.colorSpace.fromDecoding(i.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(i,a),i.removeContext(),i.format(s,a,e)}},JU=["x","y","z","w"],r$e=["float","vec2","vec3","vec4"],s$e={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},o$e={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},a$e=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function i(e,t){return e.deps.length-t.deps.length}return function(e,t){let n=this.getIncludes(e,t);if(!n)return"";let r="";n=n.sort(i);for(let s=0;s<n.length;s++)n[s].src&&(r+=n[s].src+`
`);return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(i,e){this.buildShader("vertex",i),this.buildShader("fragment",e);for(let t=0;t<this.requires.uv.length;t++)if(this.requires.uv[t]){let n=t>0?t+1:"";this.addVaryCode("varying vec2 vUv"+n+";"),t>0&&this.addVertexParsCode("attribute vec2 uv"+n+";"),this.addVertexFinalCode("vUv"+n+" = uv"+n+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(i,e){this.resultCode[i]=e.build(this.setShader(i),"v4")}setMaterial(i,e){return this.defines={},this}addFlow(i,e,t){return this.addSlot(i).addCache(e).addContext(t)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(i){return this.cache=i??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(i){return this.context=Object.assign({},this.context,i),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(i){return this.slot=i||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(i,e){this.fragmentVariables[i]===void 0&&(this.addFragmentCode(`${e} ${i};`),this.fragmentVariables[i]="")}addFragmentParsVariable(i,e){this.fragmentParsVariables[i]===void 0&&(this.addFragmentParsCode(`${e} ${i};`),this.fragmentParsVariables[i]="")}addVertexParsVariable(i,e){this.vertexParsVariables[i]===void 0&&(this.addVertexParsCode(`${e} ${i};`),this.vertexParsVariables[i]="")}addVertexCode(i){this.addCode(i,"vertex")}addFragmentCode(i){this.addCode(i,"fragment")}addCode(i,e){this.code[e??this.shader]+=i+`
`}addVertexNodeCode(i){this.addNodeCode(i,"vertex")}addFragmentNodeCode(i){this.addNodeCode(i,"fragment")}addNodeCode(i,e){this.nodeCode[e??this.shader]+=i+`
`}clearNodeCode(i){i=i??this.shader;let e=this.nodeCode[i];return this.nodeCode[i]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(i){this.addFinalCode(i,"vertex")}addFragmentFinalCode(i){this.addFinalCode(i,"fragment")}addFinalCode(i,e){this.finalCode[e??this.shader]+=i+`
`}addVertexParsCode(i){this.addParsCode(i,"vertex")}addFragmentParsCode(i){this.addParsCode(i,"fragment")}addParsCode(i,e){this.parsCode[e??this.shader]+=i+`
`}addVaryCode(i){this.addVertexParsCode(i),this.addFragmentParsCode(i)}isCache(i){return this.caches.indexOf(i)!==-1}isSlot(i){return this.slots.indexOf(i)!==-1}define(i,e){this.defines[i]=e===void 0?1:e}require(i){this.requires[i]=!0}isDefined(i){return this.defines[i]!==void 0}getVar(i,e,t,n="varying",r="V",s=""){let o=this.getVars(n),a=o[i];if(!a){let l=o.length;a={name:t||"node"+r+l+(s?"_"+s:""),type:e},o.push(a),o[i]=a}return a}getTempVar(i,e,t,n){return this.getVar(i,e,t,this.shader,"T",n)}getAttribute(i,e){if(!this.attributes[i]){let t=this.getVar(i,e);this.addVertexParsCode("attribute "+e+" "+i+";"),this.addVertexFinalCode(t.name+" = "+i+";"),this.attributes[i]={varying:t,name:i,type:e}}return this.attributes[i]}getCode(i){return[this.prefixCode,this.parsCode[i],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[i],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[i],"uniform"),this.getIncludesCode("consts",i),this.getIncludesCode("structs",i),this.getIncludesCode("functions",i),"void main() {",this.getVarListCode(this.getVars(i)),this.code[i],this.resultCode[i],this.finalCode[i],"}"].join(`
`)}getVarListCode(i,e){e=e??"";let t="";for(let n=0,r=i.length;n<r;++n){let s=i[n],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?t+=e+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:t+=e+" "+c+" "+a+`;
`}return t}getVars(i){return this.inputs.vars[i??this.shader]}getNodeData(i){let e=i instanceof ch?i.uuid:i;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(i,e,t,n,r,s){if(e.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new ZU({type:e,size:t.size,name:n||"nodeUA"+a+(s?"_"+s:""),node:t,needsUpdate:r});return o.list.push(l),o[i].push(l),o[i][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new ZU({type:e,name:n||"nodeU"+a+(s?"_"+s:""),node:t,needsUpdate:r});return o.list.push(l),o[i].push(l),o[i][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(i,e,t,n,r){return this.createUniform("vertex",i,e,t,n,r)}createFragmentUniform(i,e,t,n,r){return this.createUniform("fragment",i,e,t,n,r)}include(i,e,t){var s;let n;if(i=typeof i=="string"?As.get(i):i,this.context.include===!1)return i.name;i instanceof Xe?n=this.includes.functions:i instanceof li?n=this.includes.consts:i instanceof kee&&(n=this.includes.structs);let r=n[this.shader]=n[this.shader]||[];if(i){let o=r[i.name];if(o||(o=r[i.name]={node:i,deps:[]},r.push(o),o.src=i.build(this,"source")),i instanceof Xe&&e&&r[e.name]&&r[e.name].deps.indexOf(i)===-1&&(r[e.name].deps.push(i),(s=i.includes)==null?void 0:s.length)){let a=0;do this.include(i.includes[a++],e);while(a<i.includes.length)}return t&&(o.src=t),i.name}else throw new Error("Include not found.")}colorToVectorProperties(i){return i.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(i){return i.replace(/c/g,"v3")}getIncludes(i,e){return this.includes[i][e||this.shader]}getConstructorFromLength(i){return r$e[i-1]}isTypeMatrix(i){return/^m/.test(i)}getTypeLength(i){return i==="f"?1:parseInt(this.colorToVector(i).substr(1))}getTypeFromLength(i){return i===1?"f":"v"+i}findNode(...i){for(let e=0;e<arguments.length;e++){let t=i[e];if(t!=null&&t.isNode)return t}}resolve(...i){for(let e=0;e<arguments.length;e++){let t=i[e];if(t!==void 0){if(t.isNode)return t;if(t.isTexture)switch(t.mapping){case rf:case vm:return new n$e(t);case ey:return new i$e(new gu(t));default:return new gu(t)}else{if(t.isVector2)return new Co(t);if(t.isVector3)return new wo(t);if(t.isVector4)return new nd(t)}}}}format(i,e,t){switch(this.colorToVector(t+" <- "+e)){case"f <- v2":return i+".x";case"f <- v3":return i+".x";case"f <- v4":return i+".x";case"f <- i":case"f <- b":return"float( "+i+" )";case"v2 <- f":return"vec2( "+i+" )";case"v2 <- v3":return i+".xy";case"v2 <- v4":return i+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+i+" ) )";case"v3 <- f":return"vec3( "+i+" )";case"v3 <- v2":return"vec3( "+i+", 0.0 )";case"v3 <- v4":return i+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+i+" ) )";case"v4 <- f":return"vec4( "+i+" )";case"v4 <- v2":return"vec4( "+i+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+i+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+i+" ) )";case"i <- f":case"i <- b":return"int( "+i+" )";case"i <- v2":return"int( "+i+".x )";case"i <- v3":return"int( "+i+".x )";case"i <- v4":return"int( "+i+".x )";case"b <- f":return"( "+i+" != 0.0 )";case"b <- v2":return"( "+i+" != vec2( 0.0 ) )";case"b <- v3":return"( "+i+" != vec3( 0.0 ) )";case"b <- v4":return"( "+i+" != vec4( 0.0 ) )";case"b <- i":return"( "+i+" != 0 )"}return i}getTypeByFormat(i){return s$e[i]||i}getFormatByType(i){return o$e[i]||i}getUUID(i,e){return e=e!==void 0?e:!0,e&&this.cache&&(i=this.cache+"-"+i),i}getElementByIndex(i){return JU[i]}getIndexByElement(i){return JU.indexOf(i)}isShader(i){return this.shader===i}setShader(i){return this.shader=i,this}mergeDefines(i){for(let e in i)this.defines[e]=i[e];return this.defines}mergeUniform(i){for(let e in i)this.uniforms[e]=i[e];return this.uniforms}getTextureEncodingFromMap(i){let e;return i?i.isTexture&&(e=i.encoding):e=Kn,e===Kn&&this.context.gamma&&(e=Fr),e}},cn=class extends uo{constructor(i=0,e,t,n){super("c"),this.nodeType="Color",this.value=i instanceof ka?i:new ka(i||0,e,t,n)}setRGBA(i){this.value.setRGBA(i.r,i.g,i.b,i.a)}generate(i,e,t,n,r,s){t=i.getUUID(t??this.getUUID()),n=n??this.getType(i);let o=i.getNodeData(t),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(i,"f");i.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(i,e,t,n,r,s):i.isShader("vertex")?(o.vertex||(o.vertex=i.createVertexUniform(n,this,r,s,this.getLabel())),i.format(o.vertex.name,n,e)):(o.fragment||(o.fragment=i.createFragmentUniform(n,this,r,s,this.getLabel())),i.format(o.fragment.name,n,e))}generateReadonly(i,e,t,n,r,s){return i.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",n,e)}},vi=class extends uo{constructor(i){super("i"),this.nodeType="Int",this.value=Math.floor(i??0)}generateReadonly(i,e,t,n,r,s){return i.format(this.value.toString(),n,e)}},Uee=class extends ch{constructor(){super("basic"),this.nodeType="Basic",this.color=new cn(5855577),this.shadingAlpha=new He(1),this.shadingBlend=new vi(0)}get category(){return"phong"}generate(i){let e;if(i.isShader("vertex")){let t=this.position?this.position.analyzeAndFlow(i,"v3",{cache:"position"}):void 0;i.mergeUniform(Dn.merge([Oe.fog])),i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];t&&n.push(t.code,t.result?"displaced_position = "+t.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=n.join(`
`)}else{this.color===void 0&&(this.color=new cn(5855577)),this.color.analyze(i,{slot:"color"}),this.alpha&&this.alpha.analyze(i),this.afterColor&&this.afterColor.analyze(i,{slot:"afterColor"});let t=this.color.flow(i,"c",{slot:"color"}),n=this.alpha?this.alpha.flow(i,"f"):void 0,r=this.afterColor?this.afterColor.flow(i,"c",{slot:"afterColor"}):void 0;i.requires.transparent=n!==void 0,i.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",t.code];n&&s.push(n.code,"#ifdef ALPHATEST"," if ( "+n.result+" <= ALPHATEST ) discard;","#endif"),r?s.push(r.code,`vec3 outgoingLight = ${t.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${r.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${t.result};`),n?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${n.result} );`):s.push("gl_FragColor = vec4("+t.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),e=s.join(`
`)}return e}},jh=class extends uo{constructor(i=1,e){super("f[]"),this.nodeType="FloatArray",this.size=i,this.value=Array.isArray(e)?e:typeof e=="number"?new Array(i).fill(e):new Array(i).fill(0)}},Do={normalRenderTarget:new gu,normalRenderTargetDepth:new gu,transmissionRenderTarget:new gu,transmissionSize:new Co(2048,2048),transmissionRenderTargetDepth:new gu,pixelRatioNode:new He(1),resolution:new Co,penumbraSize:new jh(5,.5)};for(let i of Object.values(Do))i.isRenderGlobal=!0;var l$e=class extends ch{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new cn(5855577),this.emissive=new cn(0),this.emissiveIntensity=new He(1),this.shadingAlpha=new He(1),this.shadingBlend=new vi(0)}get category(){return"lambert"}build(i){let e;if(i.define("LAMBERT"),i.requires.lights=!0,i.extensions.derivatives=!0,i.isShader("vertex")){let t=this.position?this.position.analyzeAndFlow(i,"v3",{cache:"position"}):void 0;i.mergeUniform(Dn.merge([Oe.fog,Oe.lights])),i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];t&&n.push(t.code,t.result?"displaced_position = "+t.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=n.join(`
`)}else{i.mergeUniform({penumbraSize:Do.penumbraSize}),this.color===void 0&&(this.color=new cn(5855577)),this.color.analyze(i,{slot:"color"}),this.shadingAlpha.analyze(i),this.shadingBlend.analyze(i),this.afterColor&&this.afterColor.analyze(i,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(i);let t=this.color.flow(i,"c",{slot:"color"}),n=this.emissive.flow(i,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(i,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(i,"f"),o=this.shadingBlend.flow(i,"i"),a=this.afterColor?this.afterColor.flow(i,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(i,"f"):void 0;i.requires.transparent=l!==void 0,i.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(t.code,"vec3 diffuseColor = "+t.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),n&&c.push(n.code,"reflectedLight.directDiffuse += "+n.result+" * "+r.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},c$e=class extends ch{constructor(){super("phong"),this.nodeType="Phong",this.color=new cn(5855577),this.specular=new cn(1118481),this.shininess=new He(30),this.shadingAlpha=new He(1),this.shadingBlend=new vi(0)}get category(){return"phong"}build(i){let e;if(i.define("PHONG"),i.requires.lights=!0,i.extensions.derivatives=!0,i.isShader("vertex")){let t=this.position?this.position.analyzeAndFlow(i,"v3",{cache:"position"}):void 0;i.mergeUniform(Dn.merge([Oe.fog,Oe.lights])),i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];t&&n.push(t.code,t.result?"displaced_position = "+t.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=n.join(`
`)}else{i.mergeUniform({penumbraSize:Do.penumbraSize}),this.color===void 0&&(this.color=new cn(5855577)),this.color.analyze(i,{slot:"color"}),this.specular.analyze(i),this.shininess.analyze(i),this.shadingAlpha.analyze(i),this.shadingBlend.analyze(i),this.afterColor&&this.afterColor.analyze(i,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(i);let t=this.color.flow(i,"c",{slot:"color"}),n=this.specular.flow(i,"c"),r=this.shininess.flow(i,"f"),s=this.shadingAlpha.flow(i,"f"),o=this.shadingBlend.flow(i,"i"),a=this.afterColor?this.afterColor.flow(i,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(i,"f"):void 0;i.requires.transparent=l!==void 0,i.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(t.code,"	vec3 diffuseColor = "+t.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},u$e=class extends ch{constructor(){super("standard"),this.nodeType="Standard",this.color=new cn(5855577),this.roughness=new He(.3),this.metalness=new He(0),this.reflectivity=new He(.5),this.shadingAlpha=new He(1),this.shadingBlend=new vi(0)}get category(){return"physical"}build(i){let e;if(i.define("STANDARD"),i.requires.lights=!0,i.extensions.derivatives=!0,i.extensions.shaderTextureLOD=!0,i.isShader("vertex")){let t=this.position?this.position.analyzeAndFlow(i,"v3",{cache:"position"}):void 0;i.mergeUniform(Dn.merge([Oe.fog,Oe.lights])),Oe.LTC_1&&(i.uniforms.ltc_1={value:void 0},i.uniforms.ltc_2={value:void 0}),i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];t&&n.push(t.code,t.result?"displaced_position = "+t.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=n.join(`
`)}else{i.mergeUniform({penumbraSize:Do.penumbraSize});let t={gamma:!0};this.color===void 0&&(this.color=new cn(5855577)),this.color.analyze(i,{slot:"color",context:t}),this.roughness.analyze(i),this.metalness.analyze(i),this.shadingAlpha.analyze(i),this.shadingBlend.analyze(i),this.afterColor&&this.afterColor.analyze(i,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(i),this.reflectivity&&this.reflectivity.analyze(i);let n=this.color.flow(i,"c",{slot:"color",context:t}),r=this.roughness.flow(i,"f"),s=this.metalness.flow(i,"f"),o=this.shadingAlpha.flow(i,"f"),a=this.shadingBlend.flow(i,"i"),l=this.afterColor?this.afterColor.flow(i,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(i,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(i,"f"):void 0;i.requires.transparent=c!==void 0,i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	float roughnessFactor = "+r.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?u.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=u.join(`
`)}return e}},h$e=class extends ch{constructor(){super("toon"),this.nodeType="Toon",this.color=new cn(5855577),this.specular=new cn(1118481),this.shininess=new He(30),this.shadingAlpha=new He(1),this.shadingBlend=new vi(0)}get category(){return"toon"}build(i){let e;if(i.define("TOON"),i.requires.lights=!0,i.extensions.derivatives=!0,i.isShader("vertex")){let t=this.position?this.position.analyzeAndFlow(i,"v3",{cache:"position"}):void 0;i.mergeUniform(Dn.merge([Oe.fog,Oe.lights])),i.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let n=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];t&&n.push(t.code,t.result?"displaced_position = "+t.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=n.join(`
`)}else{i.mergeUniform({penumbraSize:Do.penumbraSize}),this.color===void 0&&(this.color=new cn(5855577)),this.color.analyze(i,{slot:"color"}),this.specular.analyze(i),this.shininess.analyze(i),this.shadingAlpha.analyze(i),this.shadingBlend.analyze(i),this.afterColor&&this.afterColor.analyze(i,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(i);let t=this.color.flow(i,"c",{slot:"color"}),n=this.specular.flow(i,"c"),r=this.shininess.flow(i,"f"),s=this.shadingAlpha.flow(i,"f"),o=this.shadingBlend.flow(i,"i"),a=this.afterColor?this.afterColor.flow(i,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(i,"f"):void 0;i.requires.transparent=l!==void 0,i.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(t.code,"	vec3 diffuseColor = "+t.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	vec3 specular = "+n.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},Kg=class extends uo{constructor(i){super("b"),this.nodeType="Bool",this.value=i??!1}generateReadonly(i,e,t,n){return i.format(this.value?"true":"false",n,e)}},Vee=class extends uo{constructor(i){super("m3"),this.nodeType="Matrix3",this.value=i??new hn}generateReadonly(i,e,t,n,r,s){return i.format("mat3("+this.value.elements.join(", ")+")",n,e)}get elements(){return this.value.elements}set elements(i){this.value.fromArray(i)}},Hh=class extends uo{constructor(i=1,e){super("v4[]"),this.nodeType="Vector4Array",this.size=i,this.value=Array.isArray(e)?e:e instanceof xt?new Array(i).fill(e):new Array(i).fill(new xt(0))}},hL=(i=>(i.SIMPLEX="simplex3d",i.SIMPLEX_FRACTAL="simplex3dFractal",i.ASHIMA="simplexAshima",i.FBM="fbm",i.PERLIN="perlin",i))(hL||{}),Fo=function(){let i=new Xe(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new Xe(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[i]);e.keywords.F3=new li("float F3 0.3333333"),e.keywords.G3=new li("float G3 0.1666667");let t=new Xe(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),n=new Xe("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new Xe("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new Xe(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,r]),o=new Xe("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new Xe("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new Xe(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new Xe(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new li(`int NUM_OCTAVES ${5}`);let h=new Xe("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new Xe(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,r,h]);return{simplex:e,simplexFractal:t,simplexAshima:s,fbm:c,perlin:u}}(),Gee=class extends Ti{constructor(i,e,t,n,r,s,o,a,l,c,h,u){super("v3"),this.nodeType="Noise",this.scale=i,this.size=e,this.move=t,this.fA=n,this.fB=r,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=h,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e,t,n,r){i.require("uv"),i.requires.uv=[!0],i.addFragmentVariable(this.calpha,"float");let s=Object.values(hL)[this.noiseType.value],o=new Xe(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Fo.simplex,Fo.simplexFractal,Fo.simplexAshima,Fo.fbm,Fo.perlin]),a=i.include(o),l=[];return l.push(this.scale.build(i,"f")),l.push(this.size.build(i,"v3")),l.push(this.move.build(i,"f")),l.push(this.fA.build(i,"v2")),l.push(this.fB.build(i,"v2")),l.push(this.distortion.build(i,"v2")),l.push(this.colorA.build(i,"v4")),l.push(this.colorB.build(i,"v4")),l.push(this.colorC.build(i,"v4")),l.push(this.colorD.build(i,"v4")),l.push(this.alpha.build(i,"f")),l.push(this.calpha),i.format(a+"("+l.join(",")+")",this.getType(i),e)}};Gee.numOctaves=5;var jee=class extends Ti{constructor(i,e,t,n,r,s,o){super("v3"),this.nodeType="Fresnel",this.color=i,this.bias=e,this.scale=t,this.intensity=n,this.factor=r,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.require("vWorldViewDir"),i.require("worldNormal"),i.isShader("fragment")){i.addFragmentVariable(this.calpha,"float");let t=i.include(jee.Nodes.fresnel),n=[];return n.push(this.color.build(i,"c")),n.push(this.bias.build(i,"f")),n.push(this.scale.build(i,"f")),n.push(this.intensity.build(i,"f")),n.push(this.factor.build(i,"f")),n.push(this.alpha.build(i,"f")),n.push(this.mode.build(i,"i")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("FresnelNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},Hee=jee;Hee.Nodes=function(){return{fresnel:new Xe(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var Wee=class extends Ti{constructor(i,e,t,n,r,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=i,this.movement=e,this.wavelengths=t,this.noiseStrength=n,this.noiseScale=r,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.require("vWorldViewDir"),i.require("worldNormal"),i.isShader("fragment")){i.require("uv"),i.requires.uv=[!0],i.addFragmentVariable(this.calpha,"float");let t=i.include(Wee.Nodes.rainbow),n=[];return n.push(this.filmThickness.build(i,"f")),n.push(this.movement.build(i,"f")),n.push(this.wavelengths.build(i,"v3")),n.push(this.noiseStrength.build(i,"f")),n.push(this.noiseScale.build(i,"f")),n.push(this.offset.build(i,"v3")),n.push(this.alpha.build(i,"f")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("RainbowNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},$ee=Wee;$ee.Nodes=function(){let i=new Xe(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Fo.simplex]);return{rainbow:new Xe(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[i])}}();var qee=class extends Ti{constructor(i,e,t,n,r,s,o,a,l,c,h,u,d,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=i,this.contourColor=e,this.outlineWidth=t,this.contourWidth=n,this.contourThreshold=r,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.require("vWorldViewDir"),i.require("worldNormal"),i.extensions.derivatives=!0,this.firstTime){let t=this.outlineWidth.build(i,"f"),n=this.resolution.build(i,"v2"),r=this.compensation.build(i,"b"),s=this.pixelRatio.build(i,"f");i.addVertexParsVariable("randomColor","attribute vec3"),i.addVertexParsVariable("extrudeNormal","attribute vec3"),i.addVertexParsVariable(t,"uniform float"),i.addVertexParsVariable(n,"uniform vec2"),i.addVertexParsVariable(r,"uniform bool"),i.addVertexParsVariable(s,"uniform float"),i.addVertexParsVariable("vID","flat out float"),i.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;i.addVertexFinalCode(`
                vID = randomColor.r;
                if (${r}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${n} * (${t} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(i.isShader("fragment")){i.require("uv"),i.requires.uv=[!0],i.addFragmentVariable(this.calpha,"float");let t=i.include(qee.Nodes.outline),n=[];return n.push(this.outlineColor.build(i,"c")),n.push(this.contourColor.build(i,"c")),n.push(this.outlineWidth.build(i,"f")),n.push(this.contourWidth.build(i,"f")),n.push(this.contourThreshold.build(i,"f")),n.push(this.outlineThreshold.build(i,"f")),n.push(this.contourFrequency.build(i,"f")),n.push(this.outlineSmoothing.build(i,"f")),n.push(this.contourDirection.build(i,"v3")),n.push(this.positionalLines.build(i,"b")),n.push(this.resolution.build(i,"v2")),n.push(this.normalMap.getTexture(i,"t")),n.push(this.depthMap.getTexture(i,"t")),n.push(this.pixelRatio.build(i,"f")),n.push(this.compensation.build(i,"b")),n.push(this.alpha.build(i,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("OutlineNode is not compatible with "+i.shader+" shader."),""}},Xee=qee;Xee.Nodes=function(){let i=new Xe(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Xe(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[i])}}();var Yee=class extends Ti{constructor(i,e,t,n,r,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=i,this.ior=e,this.roughness=t,this.transmissionSamplerSize=n,this.transmissionSamplerMap=r,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.extensions.shaderTextureLOD=!0,i.extensions.derivatives=!0,i.isShader("fragment")){i.define("NUM_SAMPLES",30),i.require("worldPosition"),i.requires.worldNormal=!0,i.requires.modelMatrix=!0,i.requires.projectionMatrix=!0,i.addFragmentVariable(this.calpha,"float");let t=i.include(Yee.Nodes.transmission),n=[];return n.push(this.thickness.build(i,"f")),n.push(this.ior.build(i,"f")),n.push(this.roughness.build(i,"f")),n.push(this.transmissionSamplerSize.build(i,"v2")),n.push(this.transmissionSamplerMap.getTexture(i,"t")),n.push(this.transmissionDepthMap.getTexture(i,"t")),n.push(this.aspectRatio.build(i,"v2")),n.push("normal"),n.push(this.alpha.build(i,"f")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("TransmissionNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},Zee=Yee;Zee.Nodes=function(){let i=new Xe(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new Xe(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[i]),t=new Xe(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),n=new Xe(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),r=new Xe(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[n,e]),s=new Xe(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[r,t]);return{transmission:new Xe(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var C2=class extends Ti{constructor(i,e,t,n,r,s,o,a,l,c,h){super("v3"),this.nodeType="Depth",this.gradientType=i,this.smooth=e,this.near=t,this.far=n,this.isVector=r,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){let t=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Xe(`vec3 ${t}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${t}_MAX_COLORS], float steps[${t}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${t}_IS_VECTOR
                   #ifdef ${t}_LINEAR
                       #ifdef ${t}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${t}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${t}_SMOOTH
				for ( int i = 1; i < ${t}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${t}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[C2.Nodes.vectorLinearWorldSpaceDepth,C2.Nodes.vectorLinearObjectSpaceDepth,C2.Nodes.vectorSphericalObjectSpaceDepth,C2.Nodes.vectorSphericalWorldSpaceDepth]);if(i.isShader("fragment")){i.define(`${t}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&i.define(`${t}_SMOOTH`),this.isVector.value>.5&&i.define(`${t}_IS_VECTOR`),this.gradientType.value===0&&i.define(`${t}_LINEAR`),this.isWorldSpace.value>.5&&i.define(`${t}_WORLDSPACE`),i.require("worldPosition"),i.addFragmentVariable(this.calpha,"float");let r=i.include(n),s=[];return s.push(this.near.build(i,"f")),s.push(this.far.build(i,"f")),s.push(this.origin.build(i,"v3")),s.push(this.direction.build(i,"v3")),s.push(this.colors.build(i,"v4[]")),s.push(this.steps.build(i,"f[]")),s.push(this.alpha.build(i,"f")),s.push(this.calpha),i.format(r+"("+s.join(",")+")",this.getType(i),e)}else return console.warn("DepthNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},Qee=C2;Qee.Nodes=function(){let i=new Xe(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new Xe(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Xe(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),n=new Xe(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:i,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:t,vectorSphericalObjectSpaceDepth:n}}();var eV=class extends Ti{constructor(i,e,t,n){super("v3"),this.nodeType="Blend",this.a=i,this.b=e,this.alpha=t,this.mode=n}generate(i,e){if(i.isShader("fragment")){let t=[];return t.push(this.a.build(i,"c")),t.push(this.b.build(i,"c")),t.push(this.alpha.build(i,"f")),t.push(this.mode.build(i,"i")),i.format("spe_blend("+t.join(",")+")",this.getType(i),e)}else return console.warn("BlendNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},AM=(i=>(i.NOISE="noise",i.MAP="map",i))(AM||{}),Kee=class extends Ti{constructor(i,e,t,n,r){super("v3"),this.displacementTypeIndex=new vi(0),this.nodeType="VertexDisplacement",this.intensity=i,this.movementOrTexture=e,Object.values(AM)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Vee(this.movementOrTexture.value.matrix)),this.cropOrOffset=t,this.scale=n,this.noiseFunctionIndex=r}generate(i,e){if(i.isShader("vertex")){i.define("USE_LAYER_DISPLACE");let t,n=[];switch(n.push("displaced_position"),n.push("displaced_normal"),Object.values(AM)[this.displacementTypeIndex.value]){case"map":{t=i.include(Kee.Nodes.map),n.push(this.movementOrTexture.getTexture(i,"t")),n.push("uv"),n.push(this.cropOrOffset.build(i,"f")),this.mat&&n.push(this.mat.build(i,"mat3"));break}case"noise":{let r=Object.values(hL)[this.noiseFunctionIndex.value],s=new Xe(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new Xe(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Fo.simplex,Fo.simplexFractal,Fo.simplexAshima,Fo.fbm,Fo.perlin]),a=new Xe(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);t=i.include(a),n.push(this.scale.build(i,"f")),n.push(this.cropOrOffset.build(i,"v3")),n.push(this.movementOrTexture.build(i,"f"));break}}return n.push(this.intensity.build(i,"f")),n.push("displaced_normal"),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("VertexDisplacementNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},Jee=Kee;Jee.Nodes=function(){let i=new Xe(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new Xe(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Xe(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[i,e])}}();var ete=class extends Ti{constructor(i,e,t,n,r,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=i,this.smooth=e,this.colors=t,this.steps=n,this.offset=r,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.isShader("fragment")){i.define("GRAD_MAX",10),i.require("uv"),i.requires.uv=[!0],i.addFragmentVariable(this.calpha,"float");let t=i.include(ete.Nodes.gradient),n=[];return n.push(this.gradientType.build(i,"i")),n.push(this.smooth.build(i,"b")),n.push(this.colors.build(i,"v4[]")),n.push(this.steps.build(i,"f[]")),n.push(this.offset.build(i,"v2")),n.push(this.morph.build(i,"v2")),n.push(this.angle.build(i,"f")),n.push(this.alpha.build(i,"f")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("GradientNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},tte=ete;tte.Nodes=function(){return{gradient:new Xe(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var O5=class extends Ti{constructor(i,e,t,n,r,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=i,this.textureSize=e,this.crop=t,this.projection=n,this.axis=r,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){i.require("position"),i.require("normal"),i.require("uv"),i.requires.uv=[!0],i.extensions.shaderTextureLOD=!0,i.extensions.derivatives=!0;let t=`g${this.uuid.toString().replace(/-/g,"")}`,n;switch(this.projection.value){case 3:n=i.include(O5.Nodes.cylindrical);break;case 2:n=i.include(O5.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new Xe(`
		vec3 ${t}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${t}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);n=i.include(o);break;default:n=i.include(O5.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){i.addVertexParsCode(`varying vec2 ${t}_vCustomUv;`),i.addFragmentParsCode(`varying vec2 ${t}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];i.addVertexFinalCode(`${t}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}i.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.texture.generate(i,"t")),r.push(this.textureSize.build(i,"v2")),r.push(this.crop.build(i,"f")),r.push(this.mat.build(i,"mat3")),r.push(this.size.build(i,"v2")),r.push(this.alpha.build(i,"f")),r.push(this.mode.build(i,"i")),r.push(this.calpha),this.firstTime=!this.firstTime,i.format(n+"("+r.join(",")+")",this.getType(i),e)}},ite=O5;ite.Nodes=function(){let i=new Xe(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new Xe(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new Xe(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:i,spherical:e,uv:t}}();var nte=class extends Ti{constructor(i,e){super("v3"),this.nodeType="CustomNormal",this.cnormal=i,this.alpha=e}generate(i,e){if(i.isShader("fragment")){let t=i.include(nte.Nodes.customNormal),n=[];return n.push(this.cnormal.build(i,"v3")),n.push("normal"),n.push(this.alpha.build(i,"f")),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("CustomNormalNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},rte=nte;rte.Nodes=function(){return{customNormal:new Xe(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function no(i,e){return e.color(i)}function d$e(i,e){switch(i.type){case"fresnel":return m$e(i,e);case"gradient":return g$e(i);case"depth":return v$e(i);case"normal":return y$e(i);case"noise":return x$e(i,e);case"rainbow":return _$e(i);case"toon":return b$e(i,e);case"outline":return w$e(i,e);case"transmission":return S$e(i);case"color":return p$e(i,e)}}function f$e(i){return{type:i.type}}function il(i){let{alpha:e,mode:t}=i;return{...f$e(i),alpha:e,mode:t}}function p$e(i,e){return{...il(i),color:no(i.color,e)}}function m$e(i,e){let{bias:t,scale:n,intensity:r,factor:s,color:o}=i;return{...il(i),color:no(o,e),bias:t,scale:n,intensity:r,factor:s}}function g$e(i){let{gradientType:e,smooth:t,colors:n,steps:r,angle:s,offset:o,morph:a}=i;return{...il(i),gradientType:e,smooth:t,colors:n.map(l=>new xt(l[0],l[1],l[2],l[3])),num:n.length,steps:r,offset:new ae(...o),morph:new ae(...a),angle:s}}function v$e(i){let{gradientType:e,near:t,far:n,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=i;return{...il(i),gradientType:e,near:t,far:n,isVector:r,isWorldSpace:s,origin:new R(...o),direction:a?new R(...a):new R(1,0,0),colors:l.map(u=>u!==void 0?new xt(u[0],u[1],u[2],u[3]):new xt(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function y$e(i){let{cnormal:e}=i;return{...il(i),cnormal:new R(e[0],e[1],e[2])}}function x$e(i,e){return{...il(i),scale:i.scale,move:i.move,fA:new ae(...i.fA),fB:new ae(...i.fB),size:new R(...i.size),distortion:new ae(...i.distortion),colorA:no(i.colorA,e),colorB:no(i.colorB,e),colorC:no(i.colorC,e),colorD:no(i.colorD,e),noiseType:i.noiseType}}function _$e(i){return{...il(i),filmThickness:i.filmThickness,movement:i.movement,wavelengths:new R(...i.wavelengths),noiseStrength:i.noiseStrength,noiseScale:i.noiseScale,offset:new R(...i.offset)}}function b$e(i,e){return{...il(i),positioning:i.positioning,colors:i.colors.map(t=>new xt(t[0],t[1],t[2],t[3])),num:i.colors.length,steps:i.steps,source:new R(...i.source),isWorldSpace:i.isWorldSpace,noiseStrength:i.noiseStrength,noiseScale:i.noiseScale,shadowColor:no(i.shadowColor,e),offset:new R(...i.offset)}}function w$e(i,e){return{...il(i),outlineColor:no(i.outlineColor,e),contourColor:no(i.contourColor,e),outlineWidth:i.outlineWidth,contourWidth:i.contourWidth,outlineThreshold:i.outlineThreshold,contourThreshold:i.contourThreshold,outlineSmoothing:i.outlineSmoothing,contourFrequency:i.contourFrequency,contourDirection:new R(...i.contourDirection),positionalLines:i.positionalLines,compensation:i.compensation}}function S$e(i,e){return{...il(i),thickness:i.thickness,ior:i.ior,roughness:i.roughness}}var N8=class extends ka{},A$e=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),n=this.cache.get(e);return n===void 0?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},T$e=class extends A$e{create(i){return URL.createObjectURL(new Blob([i]))}dispose(i,e){URL.revokeObjectURL(e)}},$w;function M$e(i){return typeof i=="string"?i:($w||($w=new T$e),$w.load(i))}var E$e=class{constructor(i,e){this.data=i,this.cache=e,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},C$e=class{constructor(){this.cache=new Map}remove(i){this.cache.delete(i.data)}load(i){let e=this.cache.get(i);return e===void 0&&(e=this.create(i),this.cache.set(i,e)),e.refCount+=1,e}},ste=class extends E$e{constructor(i,e){super(i,e.imageHolderCache),this.data=i,this.shared=e,this.loaded=!1,this.isVideo=!1,this.isVideo=i.type=="video",this.updateSrc(i.data)}async updateSrc(i){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let e=()=>{this.loaded=!0;let n=[1e3,1001,1002];for(let r of n){let s=this[r];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof i!="string"){var t=new FileReader;t.readAsDataURL(new Blob([i],{type:"video/mp4"}));let n;await new Promise(r=>{t.onloadend=s=>{var o;n=(o=s.target)==null?void 0:o.result,r(null)}}),this.img.src=n}else this.img.src=i;this.img.onloadeddata=()=>{e()}}else this.img=new Image,this.img.src=M$e(i),this.img.onload=e}getTexture(i){let e=this[i];if(e)return e;{let t;return this.isVideo?t=new QC(this.img,void 0,i,i):t=new Zi(this.img,void 0,i,i),this.loaded&&(t.needsUpdate=!0),this[i]=t,t}}disposeTextures(){var i,e,t;(i=this[1e3])==null||i.dispose(),this[1e3]=void 0,(e=this[1001])==null||e.dispose(),this[1001]=void 0,(t=this[1002])==null||t.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},fd=class extends ste{},dL=class extends uo{},ote={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},ate={depth:["colors"]};function D$e(i,e,t){var s,o;let n=ote[i.type],r=ate[i.type];if(r!==void 0){let a=i.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==t.length)return!0}}return n!==void 0?n.includes(e):!1}function lte(i,e,t){let n=t.uniforms[`f${t.id}_texture`];if(!n)return!1;let r=!1,s=i;if("image"in s){let o=s.image,a=e.image(o),l=n;l.image instanceof fd||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=n;l.image instanceof fd||l.image.deref(),l.image=a}if("wrapping"in s){let o=n;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=t.uniforms[`f${t.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function P$e(i,e,t,n){let r=!1;for(let[s,o]of Object.entries(i)){if(!s||o===void 0)continue;if(pte(s,t,n)){s==="visible"&&t.type==="light"&&(r=!0);continue}t.visible=n.visible;let a=t.uniforms[`f${t.id}_${s}`];if(a&&!(a instanceof dL))switch(r=r||D$e(t,s,o),a.constructor){case cn:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof N8?a.value=new ka(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case nd:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof N8?a.value=new ka(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case Co:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case wo:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case gu:{lte(o,e,t);break}case Hh:{a.value=o.map(l=>new xt(...l));break}default:{a.value=o;break}}}return r}var cte=class extends Ti{constructor(i,e,t){super("v3"),this.nodeType="Matcap",this.texture=i,this.alpha=e,this.mode=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.isShader("fragment")){i.addFragmentVariable(this.calpha,"float");let t=i.include(cte.Nodes.matcap);i.require("normal"),i.requires.normal=!0;let n=[];return n.push(this.texture.generate(i,"t")),n.push("normal"),n.push(this.alpha.build(i,"f")),n.push(this.mode.build(i,"i")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("MatcapNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},ute=cte;ute.Nodes=function(){return{matcap:new Xe(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var TM=class extends dL{constructor(i,e){super("t"),this.image=i,this.wrap=e}get value(){return this.image.getTexture(this.wrap)}},L$e=class extends dL{constructor(i){super("v3"),this.image=i,this._value=new R}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},hte=class extends Ti{constructor(i,e,t,n,r,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=i,this.colors=e,this.steps=t,this.source=n,this.isWorldSpace=r,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(i,e){if(i.require("worldNormal"),i.require("worldPosition"),i.isShader("fragment")){i.define("COLORS_MAX",10),i.addFragmentVariable(this.calpha,"float");let t=i.include(hte.Nodes.toon),n=[];return n.push(this.positioning.build(i,"i")),n.push(this.colors.build(i,"v4[]")),n.push(this.steps.build(i,"f[]")),n.push(this.source.build(i,"v3")),n.push(this.isWorldSpace.build(i,"b")),n.push(this.noiseStrength.build(i,"f")),n.push(this.noiseScale.build(i,"f")),n.push(this.shadowColor.build(i,"v4")),n.push(this.offset.build(i,"v3")),n.push(this.alpha.build(i,"f")),n.push(this.calpha),i.format(t+"("+n.join(",")+")",this.getType(i),e)}else return console.warn("ToonNode is not compatible with "+i.shader+" shader."),i.format("vec3( 0.0 )",this.getType(i),e)}},dte=hte;dte.Nodes=function(){let i=new Xe(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new Xe(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),t=new Xe(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),n=new Xe(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new Xe(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[n]);return{toon:new Xe(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Fo.simplex,i,t,r])}}();function tV(i,e,t){i.setUvTransform(t[0],t[1],e[0],e[1],0,0,0)}var I$e=class extends Vee{constructor(i,e){super(new hn),this.repeat=i,this.offset=e,tV(this.value,i,e)}updateMatrix(){tV(this.value,this.repeat,this.offset)}},Od=class{constructor(i,e,t,n){this.id=i,this.uuid=e,this.data=t,this.uniforms={};for(let r in n)this.uniforms[`f${this.id}_${r}`]=n[r];for(let r in t)pte(r,this,t)}get type(){return this.data.type}static create(i,e,t,n){if(t.type==="light")return jp.createLigherLayer(i,e,t,n);if(t.type==="texture"||t.type==="video"){let r=t.type==="texture"?n.image(t.texture.image):n.video(t.texture.video),s=new TM(r,t.texture.wrapping),o=new L$e(r),a=new I$e(t.texture.repeat,t.texture.offset),l=new He(t.crop?1:0),c=new vi(t.projection??0),h=new vi(["x","y","z"].indexOf(t.axis)??0),u=new vi(t.side??0),d=new Co(t.size?new ae(t.size[0],t.size[1]):new ae(100,100)),f=new He(t.alpha??1),p=new vi(t.mode??0),m=new ite(s,o,l,c,h,u,d,a,f,p),y=new zi(m.calpha,"f");return new gr(i,e,t,{texture:s,textureSize:o,crop:l,projection:c,axis:h,side:u,size:d,mat:a,alpha:f,mode:p},m,p,y)}else if(t.type==="matcap"){let r=n.image(t.texture.image),s=new TM(r,t.texture.wrapping),o=new He(t.alpha??1),a=new vi(t.mode??0),l=new ute(s,o,a),c=new zi(l.calpha,"f");return new gr(i,e,t,{texture:s,alpha:o,mode:a},l,a,c)}else if(t.type==="displace")if(t.displacementType==="noise"){let r=new wo(new R(...t.offset)),s=new He(t.scale??10),o=new He(t.intensity??8),a=new He(t.movement??1),l=new vi(t.noiseType??0),c=new Jee(o,a,r,s,l);return new fte(i,e,t,{offset:r,scale:s,intensity:o,movement:a,noiseType:l},c)}else throw new Error;else return N$e(i,e,t,n)}updateByOp(i,e,t){var r;let n=i;if(n.path[0]===void 0){if(n.type===0)return"type"in n.props||"category"in n.props?((r=t.scene)==null||r.markNeedsUpdateRendererDirty(),!0):P$e(n.props,t.shared,this,e)}else if(n.path[0]==="texture")return"texture"in e||"video"in e?lte(n.props,t.shared,this):!0;return!1}dispose(){if(O$e(this)){let i=this.uniforms[`f${this.id}_texture`];if(!i)return!1;let e=i;e.image instanceof fd||e.image.deref()}}hasValueByKey(i){return this.uniforms[i]!==void 0}hasValue(i){return this.hasValueByKey(`f${this.id}_${i}`)}setValue(i,e){let t=`f${this.id}_${i}`;this.hasValueByKey(t)&&e!==void 0&&(this.uniforms[t].value=e)}getNode(i){let e=`f${this.id}_${i}`;if(this.hasValueByKey(e))return this.uniforms[e]}getValue(i){let e=`f${this.id}_${i}`;if(this.hasValueByKey(e))return this.uniforms[e].value}getName(i){let e=/f\d+_(.*)/.exec(i);if(e&&e.length>1)return e[1];console.log(`Layer.getName: error ${i}`)}getNames(){let i=[];for(let e in this.uniforms){let t=this.getName(e);t&&i.push(t)}return i}},gr=class extends Od{constructor(i,e,t,n,r,s,o){super(i,e,t,n),this.params=n,this.color=r,this.mode=s,this.alpha=o}},fte=class extends Od{constructor(i,e,t,n,r){super(i,e,t,n),this.position=r}},jp=class extends Od{constructor(i,e,t,n,r){super(i,e,t,r),this.node=n}static createLigherLayer(i,e,t,n){let r,s=new He(t.alpha),o=new vi(t.mode),a;if(!t.visible)r=new Uee,a={};else if(t.category==="lambert"){r=new l$e;let l=new cn(n.color(t.emissive)??0);a={emissive:l},r.emissive=l}else if(t.category==="toon"){r=new h$e;let l=new He(t.shininess??30),c=new cn(n.color(t.specular)??1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}else if(t.category==="physical"){r=new u$e;let l=new He(t.roughness??.3),c=new He(t.metalness??0),h=new He(t.reflectivity??.5);a={roughness:l,metalness:c,reflectivity:h},r.roughness=l,r.metalness=c,r.reflectivity=h}else{r=new c$e;let l=new He(t.shininess??30),c=new cn(t.specular!==void 0?n.color(t.specular)??1118481:1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}return r.alpha=new He(1),r.shadingAlpha=s,r.shadingBlend=o,a.alpha=r.shadingAlpha,a.mode=r.shadingBlend,new jp(i,e,t,r,a)}get category(){return this.node.category}};function O$e(i){let e=i instanceof Od?i.type:i;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function R$e(i,e,t,n){switch(i.type){case"color":{let r=new cn(n.color??5855577),s=new He(n.alpha??1),o=new zi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new vi(n.mode??0);return r.alpha=s,new gr(e,t,i,{color:r,alpha:s,mode:a},r,a,o)}case"fresnel":{let r=new cn(n.color??16777215),s=new He(n.bias??.1),o=new He(n.scale??1),a=new He(n.intensity??2),l=new He(n.factor??1),c=new He(n.alpha??1),h=new vi(n.mode??0),u=new Hee(r,s,o,a,l,c,h),d=new zi(u.calpha,"f");return new gr(e,t,i,{color:r,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:h},u,h,d)}case"rainbow":{let r=new He(n.filmThickness??30),s=new He(n.movement??0),o=new wo(n.wavelengths??new R(0,0,0)),a=new He(n.noiseStrength??0),l=new He(n.noiseScale??1),c=new wo(n.offset??new R(0,0,0)),h=new He(n.alpha??1),u=new $ee(r,s,o,a,l,c,h),d=new zi(u.calpha,"f"),f=new vi(n.mode??0);return new gr(e,t,i,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:h,mode:f},u,f,d)}case"transmission":{let r=new He(n.thickness??10),s=new He(n.ior??1.5),o=new He(n.roughness??.5),a=Do.transmissionSize,l=Do.transmissionRenderTarget,c=Do.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,d=h>=u?new Co(u/h,1):new Co(1,h/u),f=new He(n.alpha??1),p=new Zee(r,s,o,a,l,c,d,f),m=new zi(p.calpha,"f"),y=new vi(n.mode??0);return new gr(e,t,i,{thickness:r,ior:s,roughness:o,aspectRatio:d,alpha:f,mode:y},p,y,m)}case"toon":{let r=new vi(n.positioning??0),s;n.colors?s=new Hh(n.colors.length,n.colors):(s=new Hh(10,new xt(0,0,0,1)),s.value[1]=new xt(1,1,1,1));let o;n.steps?o=new jh(n.steps.length,n.steps):(o=new jh(10,1),o.value[0]=0);let a=new wo(n.source??new R(0,0,0)),l=new Kg(n.isWorldSpace??!0),c=new He(n.noiseStrength??0),h=new He(n.noiseScale??1),u=new nd(n.shadowColor),d=new wo(n.offset??new R(0,0,0)),f=new He(n.alpha??1),p=new dte(r,s,o,a,l,c,h,u,d,f),m=new zi(p.calpha,"f"),y=new vi(n.mode??0);return new gr(e,t,i,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:h,shadowColor:u,offset:d,alpha:f,mode:y},p,y,m)}case"outline":{let r=new cn(n.outlineColor??16777215),s=new cn(n.contourColor??16777215),o=new He(n.outlineWidth??.1),a=new He(n.contourWidth??.1),l=new He(n.outlineThreshold??.1),c=new He(n.contourThreshold??.1),h=new He(n.outlineSmoothing??.1),u=new He(n.contourFrequency??.1),d=new wo(n.contourDirection??new R(0,1,0)),f=new Kg(n.positionalLines??!1),p=new Kg(n.compensation??!0),m=Do.normalRenderTarget,y=Do.normalRenderTargetDepth,g=Do.pixelRatioNode,v=Do.resolution,x=new He(n.alpha??1),_=new Xee(r,s,o,a,l,c,h,u,d,f,p,v,m,y,g,x),w=new zi(_.calpha,"f"),b=new vi(n.mode??0);return new gr(e,t,i,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:h,contourFrequency:u,contourDirection:d,positionalLines:f,compensation:p,alpha:x,mode:b},_,b,w)}case"depth":{let r=new vi(n.gradientType??0),s=new Kg(n.smooth??!1),o=new He(n.near??50),a=new He(n.far??200),l=new He(n.isVector??1),c=new He(n.isWorldSpace??0),h=new wo(n.origin??new R),u=new wo(n.direction??new R),d;n.colors?d=new Hh(n.colors.length,n.colors):(d=new Hh(2,new xt(0,0,0,1)),d.value[1]=new xt(1,1,1,1));let f;n.steps?f=new jh(n.steps.length,n.steps):(f=new jh(2,1),f.value[0]=0);let p=new He(n.alpha??1),m=new vi(n.mode??0),y=new Qee(r,s,o,a,l,c,h,u,d,f,p),g=new zi(y.calpha,"f");return new gr(e,t,i,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:h,direction:u,colors:d,steps:f,alpha:p,mode:m},y,m,g)}case"noise":{let r=new He(n.scale??1),s=new wo(n.size??new R(100,100,100)),o=new He(n.move??1),a=new Co(n.fA??new ae(1.7,9.2)),l=new Co(n.fB??new ae(8.3,2.8)),c=new Co(n.distortion??new ae(1,1)),h=new nd(n.colorA),u=new nd(n.colorB),d=new nd(n.colorC),f=new nd(n.colorD),p=new He(n.alpha??1),m=new vi(n.mode??0),y=new vi(n.noiseType??0),g=new Gee(r,s,o,a,l,c,h,u,d,f,p,y),v=new zi(g.calpha,"f");return new gr(e,t,i,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:h,colorB:u,colorC:d,colorD:f,alpha:p,mode:m,noiseType:y},g,m,v)}case"normal":{let r=new wo(n.cnormal??new R(1,1,1)),s=new He(n.alpha??1),o=new vi(n.mode??0),a=new rte(r,s),l=new zi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new gr(e,t,i,{cnormal:r,alpha:s,mode:o},a,o,l)}case"gradient":{let r=new vi(n.gradientType??0),s=new Kg(n.smooth??!1),o;n.colors?o=new Hh(n.colors.length,n.colors):(o=new Hh(10,new xt(0,0,0,1)),o.value[1]=new xt(1,1,1,1));let a;n.steps?a=new jh(n.steps.length,n.steps):(a=new jh(10,1),a.value[0]=0);let l=new Co(n.offset??new ae(0,0)),c=new Co(n.morph??new ae(0,0)),h=new He(n.angle??0),u=new He(n.alpha??1),d=new vi(n.mode??0),f=new tte(r,s,o,a,l,c,h,u),p=new zi(f.calpha,"f");return new gr(e,t,i,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:h,alpha:u,mode:d},f,d,p)}default:{let r=new cn(1,0,0,1),s=new He(1),o=new zi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new vi(0);return r.alpha=s,new gr(e,t,i,{color:r,alpha:s,mode:a},r,a,o)}}}function N$e(i,e,t,n){let r=d$e(t,n);return R$e(t,i,e,r)}function pte(i,e,t){if(t.type==="displace"&&(i==="intensity"||i==="visible")){let n=e.uniforms[`f${e.id}_intensity`];return n?(n.value=t.intensity*(t.visible?1:0),n):void 0}if(t.type!=="displace"&&(i==="alpha"||i==="visible")){let n=e.uniforms[`f${e.id}_alpha`];if(!n)return;if(n.value=t.alpha*(t.visible?1:0),t.type==="outline"&&i==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=t.compensation&&t.visible)}return n}}function iV(i,e){let t=0;for(let n of i.layers)if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"){let r=n.data.visible?n.data.alpha:0;if(r==1&&n.data.type=="depth"||n.data.type=="gradient"){for(let s of n.data.colors)if(s[3]<1){r=s[3];break}}else if(r==1&&n.data.type=="noise"){let s=e.color(n.data.colorA).a,o=e.color(n.data.colorB).a,a=e.color(n.data.colorC).a,l=e.color(n.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}t+=(1-t)*r}return t<1}var Ku=class extends Si{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},F$e=class extends Ku{constructor(i,e,t,n){super(),this.flatShading=i,this.side=e,this.wireframe=t,this.root=n}updateAfterBuild(){let i=this.root;this.lights=i.lights,this.vertexShader=i.vertexShader,this.fragmentShader=i.fragmentShader,this.defines=i.defines,this.uniforms=i.uniforms,this.extensions=i.extensions,this.transparent=i.transparent,this.cacheKey=i.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(i,e){this.root.onBeforeCompile(i)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(i,e,t){return this.root.getFlavor(i,e,t)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(i){return this.root.getLayersOfType(i)}getLayerByUuid(i){return this.root.getLayerByUuid(i)}updateByOp(i,e,t){this.root.updateByOp(i,e,t)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},mte=class extends Ku{constructor(i,e){super(),this.data=i,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(i,e)}get nodeMaterial(){return this}getFlavor(i,e,t){let n=t?6:(i?3:0)+e;if(n===0)return this;this.flavors===void 0&&(this.flavors=[]),n-=1;let r=this.flavors[n];return r===void 0&&(r=new F$e(i,e,t,this),this.flavors[n]=r,r.flatShading=i,r.side=e,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(i,e){this.data!==i&&this.reset0(i,e)}reset0(i,e){this.data=i;let t=i.layers??Ld.defaultTwoLayerData("phong").layers;this.layers=t.map(n=>Od.create(this.layerIdGen++,n.id,n.data,e.shared)),this.layers.reverse(),this.name=i.name??"Untitled Material",this.onUpdate(),this.transparent=iV(i,e.shared)}getLayersOfType(i){return this.layers.filter(e=>e.type===i)}getLayerByUuid(i){return this.layers.find(e=>e.uuid===i)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(i=>i instanceof jp),this.lightLayer===void 0&&(this.lightLayer=new jp(0,"",{...ba.defaultData("light","phong"),visible:!1},new Uee,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(i,e,t){var n,r,s;if(this.data=e,this.transparent=iV(e,t.shared),i.path[0]==="layers"){this.data=e;let o=t.shared,a=i.path[1];if(a===void 0){if(this.layers.reverse(),i.type===4){let l=Od.create(this.layerIdGen++,i.id,i.data,t.shared);this.layers.splice(i.localIndex,0,l),(n=t.scene)==null||n.markNeedsUpdateRendererDirty()}else if(i.type===5)this.layers.splice(i.localIndex,1)[0].dispose(),(r=t.scene)==null||r.markNeedsUpdateRendererDirty();else if(i.type===6){let l=this.layers.findIndex(h=>h.uuid===i.id),c=this.layers[l];this.layers.splice(l,1),this.layers.splice(i.localIndex,0,c),(s=t.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let l=this.layers.find(c=>c.uuid===a);if(l){let c=e.layers.data(a);if(l.updateByOp({...i,path:i.path.slice(2)},c,t)){let h=Od.create(this.layerIdGen++,a,c,o);this.layers.splice(this.layers.findIndex(u=>u.uuid===a),1,h),this.onUpdate()}}}}else this.reset(e,t)}blendColors(){let i=this.layers.findIndex(t=>t instanceof gr),e=this.layers.findIndex(t=>t instanceof jp);if(i!==-1&&i<e){let t=this.layers[i].color;for(let n=i+1;n<e;++n){let r=this.layers[n];r instanceof gr&&(t=new eV(t,r.color,r.alpha,r.mode))}this.fragment.color=t}else this.fragment.color=void 0}blendAfterColors(){let i=new zi("outgoingLight","f"),e=this.layers.findIndex(t=>t instanceof jp);if(this.layers.length>e+1){for(let t=e+1;t<this.layers.length;++t){let n=this.layers[t];n instanceof gr&&(i=new eV(i,n.color,n.alpha,n.mode))}this.fragment.afterColor=i}else this.fragment.afterColor=void 0}blendPositions(){let i=this.layers.filter(e=>e instanceof fte);if(i.length>0){let e=i[0].position;for(let t=1;t<i.length;++t)i[t]&&(e=new C0(e,i[t].position,C0.ADD),e=new C0(e,new He(.5).setReadonly(!0),C0.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(i){this.build(),i.defines=this.defines,i.uniforms=this.uniforms,i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.extensionDerivatives=this.extensions.derivatives===!0,i.extensionFragDepth=this.extensions.fragDepth===!0,i.extensionDrawBuffers=this.extensions.drawBuffers===!0,i.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(i,e){let t=(n,r,s)=>Math.min(Math.max(n,r),s);for(let n of this.layers)if(n.type==="displace"){let r=t(n.uniforms[`f${n.id}_intensity`].value,i,e);n.uniforms[`f${n.id}_intensity`].value=r}}computeCacheKey(){let i="[";for(let{data:e}of this.data.layers)if(e.type==="light")i+=`"${e.visible?e.category.toUpperCase():"Basic"}"`;else{let t=(ote[e.type]??[]).map(s=>e[s]),n=(ate[e.type]??[]).map(s=>{var o;return((o=e[s])==null?void 0:o.length)??0}),r=[...t,...n];r.length?i+=`["${e.type}", "${r.join('","')}"],`:i+=`"${e.type}",`}return i=i.slice(0,-1)+"]",i}updateFrame(i){for(let e=0;e<this.updaters.length;++e)i.updateNode(this.updaters[e])}build(){let i=new a$e;this.lights=this.lightLayer.data.visible,i.build(this.fragment,this.fragment),this.vertexShader=i.getCode("vertex"),this.fragmentShader=i.getCode("fragment"),this.defines=i.defines,this.uniforms=i.uniforms,this.extensions=i.extensions,this.updaters=i.updaters;for(let e of this.flavors)e&&e.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(i=>i.dispose()),super.dispose();for(let i of this.flavors)i&&i.dispose()}assetsLoaded(){for(let i of this.layers)if(i instanceof gr){let e=i.params.texture;if(e instanceof TM&&!e.image.loaded)return!1}return!0}getHash(){let i="{";return i+='"fragment":'+this.fragment.getHash(),i+="}",i}};Object.defineProperties(Ku.prototype,{properties:{get:function(){return this.fragment.properties}}});var MM=class extends mte{},z$e=PP(iFe()),nV=new Map;function k$e(i){if(typeof i=="string")return i;let e=nV.get(i);return e||(e={url:URL.createObjectURL(new Blob([i]))},nV.set(i,e)),e.url}var N4=class{constructor({src:i,volume:e,delay:t,loop:n}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let r;typeof i=="string"?r={src:i}:r={src:k$e(i),format:"wav"},this.sound=new z$e.Howl(r),this.sound.on("end",this.onEnd),this.src=i,e!==void 0&&(this.volume=e),t!==void 0&&(this.delay=t),n!==void 0&&(this.loop=n)}get status(){return this._status}get volume(){return this._volume}set volume(i){this._volume=i,this.sound.volume(i)}get loop(){return this._loop}set loop(i){this._loop=i,this.loopsRemaining=i}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(i,e=1e3){i?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,e),this.clearFade()},i)):this.sound.fade(this._volume,0,e)}on(i,e,t){this.sound.on(i,e,t)}off(i,e,t){this.sound.off(i,e,t)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(i=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},B$e=class{constructor(){this.type="ShapePath",this.color=new Pe,this.subPaths=[],this.currentPath=null}moveTo(i,e){return this.currentPath=new k1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(i,e),this}lineTo(i,e){var t;return(t=this.currentPath)==null||t.lineTo(i,e),this}quadraticCurveTo(i,e,t,n){var r;return(r=this.currentPath)==null||r.quadraticCurveTo(i,e,t,n),this}bezierCurveTo(i,e,t,n,r,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(i,e,t,n,r,s),this}splineThru(i){var e;return(e=this.currentPath)==null||e.splineThru(i),this}toShapes(){let i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},e={loc:i.ORIGIN,t:0};function t(f,p,m,y){let g=f.x,v=p.x,x=m.x,_=y.x,w=f.y,b=p.y,S=m.y,A=y.y,E=(_-x)*(w-S)-(A-S)*(g-x),T=(v-g)*(w-S)-(b-w)*(g-x),M=(A-S)*(v-g)-(_-x)*(b-w),C=E/M,D=T/M;if(M===0&&E!==0||C<=0||C>=1||D<0||D>1)return null;if(E===0&&M===0){for(let P=0;P<2;P++)if(n(P===0?m:y,f,p),e.loc===i.ORIGIN){let I=P===0?m:y;return{x:I.x,y:I.y,t:e.t}}else if(e.loc===i.BETWEEN){let I=+(g+e.t*(v-g)).toPrecision(10),k=+(w+e.t*(b-w)).toPrecision(10);return{x:I,y:k,t:e.t}}return null}else{for(let k=0;k<2;k++)if(n(k===0?m:y,f,p),e.loc===i.ORIGIN){let G=k===0?m:y;return{x:G.x,y:G.y,t:e.t}}let P=+(g+C*(v-g)).toPrecision(10),I=+(w+C*(b-w)).toPrecision(10);return{x:P,y:I,t:C}}}function n(f,p,m){let y=m.x-p.x,g=m.y-p.y,v=f.x-p.x,x=f.y-p.y,_=y*x-v*g;if(f.x===p.x&&f.y===p.y){e.loc=i.ORIGIN,e.t=0;return}if(f.x===m.x&&f.y===m.y){e.loc=i.DESTINATION,e.t=1;return}if(_<-Number.EPSILON){e.loc=i.LEFT;return}if(_>Number.EPSILON){e.loc=i.RIGHT;return}if(y*v<0||g*x<0){e.loc=i.BEHIND;return}if(Math.sqrt(y*y+g*g)<Math.sqrt(v*v+x*x)){e.loc=i.BEYOND;return}let w;y!==0?w=v/y:w=x/g,e.loc=i.BETWEEN,e.t=w}function r(f,p){let m=[],y=[];for(let g=1;g<f.length;g++){let v=f[g-1],x=f[g];for(let _=1;_<p.length;_++){let w=p[_-1],b=p[_],S=t(v,x,w,b);S!==null&&m.find(A=>A.t<=S.t+Number.EPSILON&&A.t>=S.t-Number.EPSILON)===void 0&&(m.push(S),y.push(new ae(S.x,S.y)))}}return y}function s(f,p,m){let y=new ae;p.getCenter(y);let g=[];return m.forEach(v=>{v.boundingBox.containsPoint(y)&&r(f,v.points).forEach(x=>{g.push({identifier:v.identifier,isCW:v.isCW,point:x})})}),g.sort((v,x)=>v.point.x-x.point.x),g}function o(f,p,m,y,g){(g==null||g==="")&&(g="nonzero");let v=new ae;f.boundingBox.getCenter(v);let x=[new ae(m,v.y),new ae(y,v.y)],_=s(x,f.boundingBox,p);_.sort((T,M)=>T.point.x-M.point.x);let w=[],b=[];_.forEach(T=>{T.identifier===f.identifier?w.push(T):b.push(T)});let S=w[0].point.x,A=[],E=0;for(;E<b.length&&b[E].point.x<S;)A.length>0&&A[A.length-1]===b[E].identifier?A.pop():A.push(b[E].identifier),E++;if(A.push(f.identifier),g==="evenodd"){let T=A.length%2===0,M=A[A.length-2];return{identifier:f.identifier,isHole:T,for:M}}else if(g==="nonzero"){let T=!0,M=null,C=null;for(let D=0;D<A.length;D++){let P=A[D];p[P]&&(T?(C=p[P].isCW,T=!1,M=P):C!==p[P].isCW&&(C=p[P].isCW,T=!0))}return{identifier:f.identifier,isHole:T,for:M}}else console.warn('fill-rule: "'+g+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,h=[];this.subPaths.forEach(f=>{let p=f.getPoints(),m=-999999999,y=999999999,g=-999999999,v=999999999;for(let x=0;x<p.length;x++){let _=p[x];_.y>m&&(m=_.y),_.y<y&&(y=_.y),_.x>g&&(g=_.x),_.x<v&&(v=_.x)}c<=g&&(c=g+1),l>=v&&(l=v-1),p.length&&h.push({curves:f.curves,points:p,isCW:N0.isClockWise(p),identifier:a++,boundingBox:new Mm(new ae(v,y),new ae(g,m))})});let u=h.map(f=>{var p;return o(f,h,l,c,(p=this.userData)==null?void 0:p.style.fillRule)}),d=[];return h.forEach(f=>{let p=u[f.identifier];if(p&&!p.isHole){let m=new Wo;m.curves=f.curves,u.filter(y=>(y==null?void 0:y.isHole)&&y.for===f.identifier).forEach(y=>{if(y){let g=h[y.identifier],v=new k1;v.curves=g.curves,m.holes.push(v)}}),d.push(m)}}),d}},U$e,rV=new Promise(i=>{U$e=i});var V$e=class{async load(i,e,t=()=>{}){let{load:n}=await rV;n(i,(r,s)=>{r||!s?t(r??"Something went wrong"):e(s)})}async parse(i){let{parse:e,Bidi:t}=await rV;try{let n=e(i),r=new t,s=o=>n.charToGlyphIndex(o.char);return r.registerModifier("glyphIndex",null,s),r.applyFeatures(n,n.defaultRenderOptions.features),{font:n,bidi:r}}catch(n){console.error(n)}}};async function G$e(i){return await(await fetch(i)).arrayBuffer()}var j$e=new V$e;async function sV(i){let e,t,n=!1;if(i.url?(e=await G$e(i.url),t=i.url,n=i.url.startsWith("/")):i.data&&(e=i.data.buffer),e){let r=await j$e.parse(e);if(r)return{font:r.font,url:t,intercepted:n,arr:e,bidi:r.bidi}}}function H$e(i,e){return e.state.glyphIndex===i||e.state.fina===i||e.state.medi===i||e.state.init===i}var W$e=class{constructor(i){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=i.isUserFont??!1,this._loadingPromise=sV(i).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(i){this._isLoaded=!1,this._isUserFont=i.isUserFont??!1,this._loadingPromise=sV(i).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(i,e,t){if(!this._bidi)return[];let n=this._bidi;n.getTextGlyphs(e);let r=n.tokenizer.tokens,s=[],o=0,a=t.length===r.length;for(let l=0;l<t.length;l++){let c=t[l].index,h=String.fromCharCode(t[l].unicode),u=r[o];if(H$e(c,u)||a)s.push({char:h,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let d=u.char,f="",p=[u.state.glyphIndex],m=[],y=!1;for(;!y;)o++,f=e.charAt(o),d+=f,p.push(i.charToGlyphIndex(f)),m=i.stringToGlyphs(d),m.length===1&&m[0].index===c&&(y=!0),o>e.length&&(y=!0);s.push({char:h,index:c,replacements:p,replacementChars:Array.from(d)}),o++}}return s}generateShapes(i,e){if(!this._isLoaded)return;let t=this.font,n=e.fontSize/this.unitsPerEm,r=e.fontSize*e.lineHeight,s=i.map(g=>this.getTextWidth(g,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(i,0,e),h=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,i[0],a),u=this.getLineInitialOffsetY(r,i.length,e.height,n,e.verticalAlign),d=[],f=i.map(g=>[]),p=i.map(g=>[]),m;for(let g=0;g<i.length;g++){let v=i[g],x={features:{liga:!0}},_=[];try{_=t.stringToGlyphs(v,x)}catch(b){console.warn(b)}h=this.getLineInitialOffsetX(s[g],o,e.horizontalAlign,v,a);let w=[];try{w=this.reverseLigaturesTable(t,v,_)}catch(b){console.warn(b)}c=this.computeSpaceWidthForLine(i,g,e);for(let b=0;b<_.length;b++){let S=_[b],A=S.index===0?`
`:S.unicode?String.fromCharCode(S.unicode):void 0,E=w[b],T=0,M=0;b===0&&e.horizontalAlign===2&&S.leftSideBearing!==void 0&&(M=-S.leftSideBearing*n),m&&(T=t.getKerningValue(S,m)*n),h+=M+T;let C=0;if(A===`
`)C=l;else if(A===" ")C=c;else{let D=this.createPath(S,n,h,u,e);D&&(C=D.offsetX-(T+M),d.push(D.path))}if(E.replacements.length===1)p[g].push([h,u]),f[g].push(C);else{let D=E.replacements.map(G=>(t.glyphs.get(G).advanceWidth??0)*n),P=D.reduce((G,U)=>G+=U,0),I=D.map(G=>G/P),k=h;for(let G=0;G<I.length;G++){let U=C*I[G];p[g].push([k,u]),f[g].push(U),k+=U}}h+=C,m=S}u-=r}let y=[];for(let g=0,v=d.length;g<v;g++)y.push(...d[g].toShapes());return{shapes:y,charWidths:f,lineWidths:s,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var i;return((i=this.font)==null?void 0:i.ascender)??0}get descender(){var i;return((i=this.font)==null?void 0:i.descender)??0}get familyName(){var i;return((i=this.font)==null?void 0:i.names.fontFamily)??""}get subfamilyName(){var i;return((i=this.font)==null?void 0:i.names.fontSubfamily)??""}get unitsPerEm(){var i;return((i=this.font)==null?void 0:i.unitsPerEm)??1}getLineInitialOffsetX(i,e,t,n,r){return(t===3||t===2)&&n.indexOf(`
`)>=0&&(i-=r),t===3?e*.5-i*.5:t===2?e-i:0}getLineInitialOffsetY(i,e,t,n,r){let s=e*i,o=Math.abs(this.ascender-this.descender)*n,a=i-o,l=-this.ascender*n-a/2;return r===3?-(t-s-l):r===2?-(t*.5-s*.5-l):l}createPath(i,e,t,n,r){var l;let s=i.getPath(t,-n,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+this.familyName+".");return}let o=new B$e,a=(i.advanceWidth??1)*e;if(i)for(let c of s.commands){let h=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(h&&c.type!=="Z"&&h.x===c.x&&-h.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let h=$$e(c.curves);h!==void 0&&c.currentPoint.distanceTo(h)>0&&c.lineTo(h.x,h.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(i,e){var t;return((t=this.font)==null?void 0:t.getAdvanceWidth(i,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}getTextWidth(i,e){var t;return((t=this.font)==null?void 0:t.getAdvanceWidth(i,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}computeSpaceWidthForLine(i,e,t){let n=this.getCharWidth(" ",t),r=i[e];if(r){let s=this.countSpaces(r.trimEnd());if(t.horizontalAlign===4&&e<i.length-1&&s){let o=t.width,a=this.getTextWidth(r,t);return(o-(a-s*n))/s}}return n}countSpaces(i){return(i.match(/ /g)||[]).length}};function $$e(i){if(i.length){let e=i[0];if(e instanceof Ho)return e.v1;if(e instanceof Uo||e instanceof ec)return e.v0}}var q$e=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(i){return this.objects.get(i)}get size(){return this.objects.size}get(i,e){let t=this.objects.get(i);return t===void 0?(t=this.createObject(i,e),this.objects.set(i,t)):t.isShared=!0,t}mutateIfUnique(i,e){let t=this.objects.get(i);if(t&&t.isShared!==!0)return this.objects.delete(i),this.objects.set(e,t),t}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(i,e){let t=this.objects.get(i);e===t&&this.unreachable.delete(i)}endGc(){this.unreachable.forEach(i=>{this.disposeObject(this.objects.get(i)),this.objects.delete(i)}),this.unreachable.clear()}dispose(){this.objects.forEach(i=>{this.disposeObject(i)}),this.objects.clear()}},oV=class extends q$e{constructor(i){super(),this.flatShading=i}disposeObject(i){i.dispose()}createObject(i,e){let t=R8(i,e,this.flatShading);return t.computeBoundingSphere(),t}},X$e={find(i){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(i){},addPendingUpdateCloner(i){},addPendingCommand(i){}},Y$e=class extends C$e{constructor(i){super(),this.shared=i}create(i){return new ste(i,this.shared)}},gte=class{constructor(i,e={}){if(this.geometryCache=new oV(!0),this.geometryCache2=new oV(!1),this.imageHolderCache=new Y$e(this),this.thisContext={scene:X$e,shared:this},this.deletedMaterial=new MM(Ld.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new fd(pM.emptyImage,this),this.deletedVideo=new fd(w8.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},e.images)for(let[t,n]of Object.entries(e.images))this.addImage(t,n);if(e.videos)for(let[t,n]of Object.entries(e.videos))this.addVideo(t,n);if(e.audios)for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.data);this.reset(i)}setRequestRender(i){this._requestRender=i}reset(i){for(let[e,t]of Object.entries(i.images))this.addImage(e,t);for(let[e,t]of Object.entries(i.videos))this.addVideo(e,t);for(let[e,t]of Object.entries(i.colors))this.addColor(e,t);for(let[e,t]of Object.entries(i.materials))this.addMaterial(e,new MM(t,this.thisContext));for(let[e,t]of Object.entries(i.audios))this.addAudio(e,t.data);for(let[e,t]of Object.entries(i.fonts))this.addFont(e,t);this.penumbraSize=i.penumbraSize}addMaterial(i,e){e.uuid=i,this.materials[i]=e}deleteMaterial(i){this.materials[i]&&(this.materials[i].nodeMaterialDispose(),delete this.materials[i])}getMaterial(i){return this.materials[i]}getMaterialOrDeletedPlaceholder(i){return this.materials[i]??this.deletedMaterial}material(i){return typeof i=="string"?this.getMaterialOrDeletedPlaceholder(i):new mte(i,this.thisContext)}getMaterials(){return this.materials}addImage(i,e){return this.images[i]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[i].updateSrc(e.data),!0):(this.images[i]=new fd(e,this),!1)}deleteImage(i){let e=this.images[i];e&&(e.dispose(),delete this.images[i])}getDefaultImage(){return this.images.image_0}getImage(i){return this.images[i]??this.deletedImage}image(i){return typeof i=="string"?this.getImage(i):this.imageHolderCache.load(i)}addVideo(i,e){return this.videos[i]?(this.videos[i].updateSrc(e.data),!0):(this.videos[i]=new fd(e,this),!1)}deleteVideo(i){let e=this.videos[i];e&&(e.dispose(),delete this.videos[i])}getVideo(i){return this.videos[i]??this.deletedVideo}video(i){return typeof i=="string"?this.getVideo(i):this.imageHolderCache.load(i)}addColor(i,e){return this.colors[i]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in e?this.colors[i].setRGBA(e.r,e.g,e.b,e.a):this.colors[i].setRGBA(e.r,e.g,e.b,1),!0):("a"in e?this.colors[i]=new N8(e.r,e.g,e.b,e.a):this.colors[i]=new N8(e.r,e.g,e.b,1),!1)}updateColor(i,e){if(this.colors[i]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let t=this.colors[i];return this.colors[i].r=e.r??t.r,this.colors[i].g=e.g??t.g,this.colors[i].b=e.b??t.b,this.colors[i].a=e.a??t.a,!0}return!1}deleteColor(i){this.colors[i]&&delete this.colors[i]}getColor(i){return this.colors[i]}color(i){let e;if(typeof i=="string"){let t=this.getColor(i);t?e=t:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),e=new ka(0,0,0,0))}else return"a"in i?new ka(i.r,i.g,i.b,i.a):new ka(i.r,i.g,i.b,1);return e}addAudio(i,e){this.audios[i]=e}getAudio(i){let e=this.audios[i];if(e instanceof N4)return e;{let t=new N4({src:e});return this.audios[i]=t,t}}deleteAudio(i){let e=this.audios[i];e&&(e instanceof N4&&e.dispose(),delete this.audios[i])}addFont(i,e){this.fonts[i]=new W$e(e),this.fonts[i].loadingPromise.then(()=>this.requestRender())}getFont(i){return this.fonts[i]}deleteFont(i){this.fonts[i]&&delete this.fonts[i]}dispose(){Object.keys(this.materials).forEach(i=>this.deleteMaterial(i)),this._requestRender=void 0,Object.values(this.audios).forEach(i=>{i instanceof N4&&i.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}},Brt=new gte(aM.emptyData()),R7=class extends Wm{updateByPatchedOp(i,e,t){if(super.updateByPatchedOp(i,e,t),gFe(i.path,["materials"])!==null&&i.type===0&&Array.isArray(this.material))for(let[n,r]of Object.entries(i.props)){let s=t.shared.material(r);this.material[Number(n)]=s}else if(Jc(i.path,["material"])&&this.material instanceof Ku)"material"in e&&typeof e.material!="string"&&this.material.updateByOp(io.drop(i,1),e.material,t);else if(Jc(i.path,["materials","*"])&&Array.isArray(this.material)){let n=i.path[1];if("materials"in e&&n<this.material.length){let r=e.materials[n];typeof r!="string"&&this.material[n].updateByOp(io.drop(i,2),r,t)}}}updateState(i,e){var n,r,s,o,a;super.updateState(i,e),i.castShadow!==void 0&&(this.castShadow=i.castShadow),i.receiveShadow!==void 0&&(this.receiveShadow=i.receiveShadow);let t=this.dataPatched;if(((n=i.geometry)==null?void 0:n.type)!=="NonParametricGeometry"&&"material"in i&&i.material!==void 0&&(this.disposeMaterial(),this.material=e.shared.material(i.material).getFlavor(t.flatShading,t.side,t.wireframe),(r=e.scene)==null||r.markNeedsUpdateRendererDirty()),((s=i.geometry)==null?void 0:s.type)==="NonParametricGeometry"&&("materials"in i&&i.materials!==void 0?(this.disposeMaterial(),this.material=i.materials.map(l=>e.shared.material(l).getFlavor(t.flatShading,t.side,t.wireframe)),(o=e.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in i&&i.material!==void 0&&(this.disposeMaterial(),this.material=[e.shared.material(i.material).getFlavor(t.flatShading,t.side,t.wireframe)],(a=e.scene)==null||a.markNeedsUpdateRendererDirty())),i.flatShading!==void 0||i.wireframe!==void 0||i.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(t.flatShading,t.side,t.wireframe);else this.material=this.material.getFlavor(t.flatShading,t.side,t.wireframe)}disposeMaterial(){this.material&&RJ(this.material).forEach(i=>{i instanceof Ku&&(i instanceof MM||i.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},Ju=class extends R7{constructor(i,e,t){super(i,e),this.data=e,this.localGeometry=void 0}chooseGeoemtryCache(i){return i.geometryCache}markGeometryAsReachable(i){this.geometryCreateDeleyed instanceof ze&&this.chooseGeoemtryCache(i).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof gte){let i=this.geometryCreateDeleyed,e=this.chooseGeoemtryCache(i);this.geometryCreateDeleyed=e.get(this.dataPatched.geometry,i)}return this.geometryCreateDeleyed}set geometry(i){this.localGeometry=i}get is2DAndNoDepth(){let i=this.dataPatched.geometry;return T8.is2DParametricMesh(i.type)&&i.depth===0}get is2DType(){return T8.is2DParametricMesh(this.geometry.userData.type)}updateByPatchedOp(i,e,t){super.updateByPatchedOp(i,e,t),Jc(i.path,["geometry"])&&this.updateByPatchedOpGeometry(io.drop(i,1),e.geometry,t)}removeInteractionGeometry(){var i;(i=this.localGeometry)==null||i.dispose(),this.localGeometry=void 0}updateGeometryInteractions(i,e){var n;this.invalidateDownstreamBooleanData();let t=this.data.geometry.type;if(t==="NonParametricGeometry"||t==="SubdivGeometry"){let r=i;if(this.localGeometry===void 0){let c={...this.data.geometry,...r};this.localGeometry=R8(c,e,this.data.flatShading)}let s,o,a;r.scaleBaked?[s,o,a]=r.scaleBaked:{width:s,height:o,depth:a}=r;let l=this.localGeometry.userData;l.sxPrev!==void 0&&wM(this.localGeometry.attributes,s/l.sxPrev,o/l.syPrev,a/l.szPrev),l.sxPrev=s,l.syPrev=o,l.szPrev=a}else{let r={...this.data.geometry,...i};(n=this.localGeometry)==null||n.dispose(),this.localGeometry=R8(r,e,this.data.flatShading)}}refreshAttachedCloners(i){for(let e of this.attachedSurfaceCloners)i.scene.addPendingUpdateCloner(e.object)}refreshAttachedPaths(i){for(let e of this.attachedPaths)i.scene.addPendingCommand(()=>e.updateShape())}createGeometryDelayed(i){this.geometryCreateDeleyed=i.shared,this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)}updateByPatchedOpGeometry(i,e,t){var r;let n=!1;i.type===0&&i.path.length===0&&cee(["scaleBaked"],Object.keys(i.props))&&this.geometryCreateDeleyed instanceof ts&&this.chooseGeoemtryCache(t.shared).mutateIfUnique(this.geometryCreateDeleyed.data,e)===this.geometryCreateDeleyed&&(n=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(e,i.props.scaleBaked),this.refreshAttachedCloners(t),this.refreshAttachedPaths(t)),n||((r=t.scene)==null||r.markGeometryCacheDirty(),this.createGeometryDelayed(t)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(i,e){this.createGeometryDelayed(e)}updateState(i,e){i.geometry!==void 0&&this.updateGeometryOnStateUpdate(i.geometry,e),super.updateState(i,e)}updateGeometryGroupsIfNeeded(){var i;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((i=this.geometry.getIndex())==null?void 0:i.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(i,e){let t=this.geometry.userData.parameters;this.is2DType?i.set(0,0,t.depth*.5):i.setScalar(0),e.set(t.width,t.height,t.depth??0).multiplyScalar(.5)}};function Z$e(i){var o,a;if(i.geometry.attributes.extrudeNormal||!i.geometry.attributes.position||!i.geometry.attributes.normal)return;let e=new Map,t=i.geometry.attributes,n=t.position.array,r=t.normal.array,s=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){let c=`${n[l]}_${n[l+1]}_${n[l+2]}`,h=new R(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(h):e.set(c,{normals:[h],result:new R})}e.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<n.length;l+=3){let c=`${n[l]}_${n[l+1]}_${n[l+2]}`,h=(a=e.get(c))==null?void 0:a.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}i.geometry.setAttribute("extrudeNormal",new Le(s,3))}function Q$e(i){if(i.geometry.attributes.extrudeNormals||!i.geometry.attributes.position)return;let e=i.geometry.attributes.position.array,t=new Float32Array(e.length),n=new R;for(let r=0;r<e.length;r+=3)n.set(e[r],e[r+1],e[r+2]).normalize(),t[r]=n.x,t[r+1]=n.y,t[r+2]=n.z;i.geometry.setAttribute("extrudeNormal",new Le(t,3))}function fL(i){if(Array.isArray(i.material)){for(let e of i.material)if(e.getLayersOfType("outline").length===0)return}else if(!(i.material instanceof Ku)||i.material.getLayersOfType("outline").length===0)return;i instanceof Ju&&i.is2DAndNoDepth?Q$e(i):Z$e(i)}function pL(i){if(!i.geometry.attributes.position)return;let e=i.geometry.attributes.position.array,t=new Float32Array(e.length),n=parseInt(i.uuid.replace(/\D/g,"")),r=[hi.seededRandom(n),hi.seededRandom(n+1e4),hi.seededRandom(n+2e4)];for(let s=0;s<e.length;s++)t[s]=r[s%3];i.geometry.setAttribute("randomColor",new at(t,3))}lL.then(i=>{});var r0=new er,Jg=new R;var EM=class extends Ju{constructor(i,e,t){super(i,e,t),this.data=e,this.hiddenMatrixOld=new Ce,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(i){return this.dataPatched.flatShading?i.geometryCache:i.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(i,e){let t=this.geometry.userData.parameters;i.copy(this.originalGeometryNew.boundingSphere.center),e.set(t.width,t.height,t.depth??0).multiplyScalar(.5)}createGeometryByControls(i){var s,o,a;if(this.skipReactionUpdate===!0)return;let e=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:t,subdividedGeometry:n,subdivPointer:r}=ts.build(i,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,t!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=t),n!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=n??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,fL(this),pL(this),this.calcBoundingBox(),e&&(this.localGeometry.uuid=e)}updateState(i,e){if(super.updateState(i,e),i.flatShading!==void 0){let t=this.material;this.material=t.getFlavor(!1,t.side,t.wireframe),this.smoothShading=!i.flatShading,this.createGeometryDelayed(e)}}updateMesh(i=!1){ts.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,i&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ts.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,i&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=ts.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ts.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(i,e){let t=this.localGeometry;this.localGeometry=this.originalGeometryNew,Wm.prototype.raycast.call(this,i,e),this.localGeometry=t}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let i=this.originalGeometry;i.boundingSphere===null&&(i.boundingSphere=new Fs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=i.boundingSphere));let e=i.attributes.position,t=i.boundingSphere.center;r0.setFromBufferAttribute(e),r0.getCenter(t),i.boundingSphere.radius=t.distanceTo(r0.max),isNaN(i.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),r0.getSize(Jg),this.hasNonUniformScale&&Jg.divide(this.scale);let n={width:Jg.x,height:Jg.y,depth:Jg.z};return this.geometry.userData.parameters=n,n}updateBoundingSphere(i){let e=this.originalGeometry;r0.min.set(i[0],i[2],i[4]),r0.max.set(i[1],i[3],i[5]),this.hasNonUniformScale&&(r0.min.applyMatrix4(this.shearScaleInv),r0.max.applyMatrix4(this.shearScaleInv)),e.boundingSphere===null&&(e.boundingSphere=new Fs);let t=e.boundingSphere.center;r0.getCenter(t),e.boundingSphere.radius=t.distanceTo(r0.max)}freeSubdivPointer(){var i,e;this.subdivPointer&&(ts.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(i=this.originalGeometry)==null||i.dispose(),(e=this.subdividedGeometry)==null||e.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(i,e,t){super.updateByPatchedOpGeometry(i,e,t),this.localGeometry&&this.createGeometryByControls(e)}},aV=-1,K$e=1,J$e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},eqe={polygon_center:0,edge:1,vertex:2},F4=(i,e)=>(t,n)=>!e||t===0||i===0?0:i*n/100,vt=(i,e)=>{let t=Math.abs(e),n=t*-1;return(i-aV)*(t-n)/(K$e-aV)+n};function tqe(i){let e=[],t={};for(var n=0,r=i.length;n<r;n++){var s=JSON.stringify(i[n].pos.map(o=>Math.round(o*1e4)/1e4));t[s]||(e.push(i[n]),t[s]=!0)}return e}var iqe=new R,z4=new R,nqe=new R,rqe=new R;function v1(i,e){let t=nqe.fromArray(i),n=rqe.fromArray(e);z4.copy(n).sub(t);let r=z4.length();return z4.normalize().multiplyScalar(r*.5),iqe.copy(t).add(z4).toArray()}var Lo=new sn,k4=new R,F8=new R,rd=new R;function sqe(i){let e=[];for(let t=0;t<=i.index.count;t++)if(k4.fromArray(i.index.array,t*3),Lo.setFromAttributeAndIndices(i.attributes.position,k4.x,k4.y,k4.z),Lo.getNormal(F8),Lo.getMidpoint(rd),!(isNaN(rd.x)||isNaN(rd.y)||isNaN(rd.z))){let{a:n,b:r,c:s}=Lo,o=n.toArray(),a=r.toArray(),l=s.toArray(),c=n.distanceTo(r),h=r.distanceTo(s),u=s.distanceTo(n),d=v1(o,a),f=v1(a,l),p=v1(l,o),m=[c,h,u],y=Math.max(...m),g=m.filter(_=>Math.round(_)===Math.round(y)).length>1,v=[],x=Lo.getMidpoint(rd).toArray();y===c&&!g&&(v=[f,p,p],x=d),y===h&&!g&&(v=[d,p,p],x=f),y===u&&!g&&(v=[d,f,f],x=p),g&&(v=[d,f,p]),e.push({vertices:[o,a,l],faceCenters:v,midpoint:x,norm:Lo.getNormal(F8).toArray()})}return e}function oqe(i){let e=[],{position:t}=i.attributes;for(let n=0;n<t.count;n++){Lo.setFromAttributeAndIndices(t,n*3,n*3+1,n*3+2),Lo.getNormal(F8),Lo.getMidpoint(rd);let r=Lo.a.toArray(),s=Lo.b.toArray(),o=Lo.c.toArray();e.push({vertices:[r,s,o],faceCenters:[v1(r,s),v1(s,o),v1(o,r)],midpoint:rd.toArray(),norm:F8.toArray()})}return e}var aqe=4,lqe=.5,qw=i=>.5*(1-Math.cos(i*Math.PI)),cqe=class{constructor(){this.perlin=new Array(4095+1)}noise(i,e=0,t=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let y=0;y<4095+1;y++)this.perlin[y]=Math.random()}i<0&&(i=-i),e<0&&(e=-e),t<0&&(t=-t);let n=Math.floor(i),r=Math.floor(e),s=Math.floor(t),o=i-n,a=e-r,l=t-s,c,h,u=0,d=.5,f,p,m;for(let y=0;y<aqe;y++){let g=n+(r<<4)+(s<<8);c=qw(o),h=qw(a),f=this.perlin[g&4095],f+=c*(this.perlin[g+1&4095]-f),p=this.perlin[g+16&4095],p+=c*(this.perlin[g+16+1&4095]-p),f+=h*(p-f),g+=256,p=this.perlin[g&4095],p+=c*(this.perlin[g+1&4095]-p),m=this.perlin[g+16&4095],m+=c*(this.perlin[g+16+1&4095]-m),p+=h*(m-p),f+=qw(l)*(p-f),u+=f*d,d*=lqe,n<<=1,o*=2,r<<=1,a*=2,s<<=1,l*=2,o>=1&&(n++,o--),a>=1&&(r++,a--),l>=1&&(s++,l--)}return u}noiseSeed(i){let e=(()=>{let t,n;return{setSeed(r){n=t=(r??Math.random()*4294967296)>>>0},getSeed(){return t},rand(){return n=(1664525*n+1013904223)%4294967296,n/4294967296}}})();e.setSeed(i),this.perlin=new Array(4095+1);for(let t=0;t<4095+1;t++)this.perlin[t]=e.rand()}},uqe=cqe,lV=new R,cV=new Ce,uV=new Z0;var vte=class extends Ju{constructor(i,e,t){super(i,e,t),this.data=e}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let i=this.dataPatched;return((e=this.font)==null?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,i.geometry.height,this.fontScale,i.geometry.verticalAlign))??0}get fontScale(){let i=this.dataPatched;return this.font?i.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var i;return(((i=this.font)==null?void 0:i.ascender)??1)*this.fontScale}get descender(){var i;return(((i=this.font)==null?void 0:i.descender)??1)*this.fontScale}get lineHeight(){let i=this.dataPatched;return i.geometry.fontSize*i.geometry.lineHeight}raycast(i,e){let{matrixWorld:t}=this;if(!(isNaN(i.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(cV.copy(t).invert(),uV.copy(i.ray).applyMatrix4(cV),uV.intersectBox(this.singleBBox,lV))){let n=lV.applyMatrix4(t),r=i.ray.origin.distanceTo(n);e.push({distance:r,point:n.clone(),object:this})}}},Qr=1e-4,s0,yte,xte,_te,hV=new R,dV=new R;lL.then(i=>{s0=i,yte=[s0.get_face_center,s0.get_edge_midpoint,s0.get_vertex_position],xte=[s0.get_face_normal,s0.get_edge_normal,s0.get_vertex_normal],_te=[s0.face_count,s0.edge_count,s0.vertex_count]});var hqe=new Ce,dqe=new Ce,kc=new R,Oh=new R,e2=new R,Xw=new R,fqe=new R,pqe=new R,wl=new uqe,mqe=class extends iL(Pt){constructor(i,e){super(),this.parameters=e,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=i}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(i){if(this.parent===null)this.updateState(this.parameters,i);else for(let e of this.children)e instanceof T2&&e.expand()}invalidateTransform(i){this.matrixWorldNeedsUpdate=!0,this.traverse(e=>{e instanceof T2&&e.object===i&&(e.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let i of this.children)i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD())}_updateCount(i){let e;if(i!==void 0?e=i:e=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(e=0),this.parameters.type==="toObject"&&this.objectForSample){for(let n=0,r=this.children.length;n<r;++n)this.remove(this.children[0]);let t=this.children;if(t.length===e)return;if(t.length<e)for(let n=0,r=e-t.length;n<r;++n){let s=new T2(this.object);s.expand(),this.add(s)}else for(let n=0,r=t.length-e;n<r;++n)this.remove(t[n])}else{if(this.children.length===e)return;if(this.children.length<e)for(let t=0,n=e-this.children.length;t<n;++t){let r=new T2(this.object);r.expand(),this.add(r)}else for(let t=0,n=this.children.length-e;t<n;++t)this.remove(this.children[0])}}_updateRadial(i){let e=i.radial,t=e.start*hi.DEG2RAD,n=e.end*hi.DEG2RAD,r=t-n,s=new ss(e.rotation[0],e.rotation[1],e.rotation[2]),o;switch(e.axis){case"z":o=new R(0,0,1);break;case"y":o=new R(0,1,0);break;default:case"x":o=new R(1,0,0);break}let a=i.randomnessObject??fu.defaultData([1,1,1]).randomnessObject,l=a.noiseType==="perlin";wl.noiseSeed(a.seed);let c=Iw((0,$g.default)(a.seed)),h=F4(a.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let f=u*(a.freqScale/10)+a.movement,p=l?wl.noise(f):c(f,f);d.scale.x=e.scale[0]+h(u,vt(p,a.scale[0]))||Qr,d.scale.y=e.scale[1]+h(u,vt(p,a.scale[1]))||Qr,d.scale.z=e.scale[2]+h(u,vt(p,a.scale[2]))||Qr,d.position.setScalar(0);let m=r/i.count*u-t;switch(e.axis){case"x":d.rotation.set(0,m,0);break;case"y":d.rotation.set(0,0,m);break;case"z":d.rotation.set(m,0,0);break}d.translateOnAxis(o,e.radius),d.position.x+=e.position[0]+h(u,vt(p,a.position[0])),d.position.y+=e.position[1]+h(u,vt(p,a.position[1])),d.position.z+=e.position[2]+h(u,vt(p,a.position[2]));let y=h(u,vt(p,a.rotation[0])),g=h(u,vt(p,a.rotation[1])),v=h(u,vt(p,a.rotation[2]));e.alignment===!0?(d.rotation.x+=s.x+y,d.rotation.y+=s.y+g,d.rotation.z+=s.z+v):d.rotation.set(s.x+y,s.y+g,s.z+v)}}_updateLinear(i){if(i.type!=="linear")throw new Error;let e=i.linear,t=new ss(e.rotation[0],e.rotation[1],e.rotation[2]),n=i.randomnessObject??fu.defaultData([1,1,1]).randomnessObject,r=n.noiseType==="perlin";wl.noiseSeed(n.seed);let s=Iw((0,$g.default)(n.seed)),o=F4(n.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(n.freqScale/10)+n.movement,h=r?wl.noise(c):s(c,c),u=o(a,vt(h,n.rotation[0])),d=o(a,vt(h,n.rotation[1])),f=o(a,vt(h,n.rotation[2]));l.scale.x=1+(e.scale[0]-1)*a+o(a,vt(h,n.scale[0]))||Qr,l.scale.y=1+(e.scale[1]-1)*a+o(a,vt(h,n.scale[1]))||Qr,l.scale.z=1+(e.scale[2]-1)*a+o(a,vt(h,n.scale[2]))||Qr,l.rotation.x=t.x*a+u,l.rotation.y=t.y*a+d,l.rotation.z=t.z*a+f,l.position.x=e.position[0]*a+o(a,vt(h,n.position[0])),l.position.y=e.position[1]*a+o(a,vt(h,n.position[1])),l.position.z=e.position[2]*a+o(a,vt(h,n.position[2]))}}_updateGrid(i){let e=0,t=i.grid,n=i.randomnessObject??fu.defaultData([1,1,1]).randomnessObject,r=F4(n.strength,this.parameters.randomness),s=n.noiseType==="perlin";wl.noiseSeed(n.seed);let o=yHe((0,$g.default)(n.seed));if(t.useCenter===!0){let a={x:t.count[0]%2===0?2:1,y:t.count[1]%2===0?2:1,z:t.count[2]%2===0?2:1},l=new R(t.size[0]*(t.count[0]-a.x)*.5,t.size[1]*(t.count[1]-a.y)*.5,t.size[2]*(t.count[2]-a.z)*.5);for(let c=0;c<t.count[0];c++)for(let h=0;h<t.count[1];h++)for(let u=0;u<t.count[2];u++){let d=[(c+1)*(n.freqScale/10)+n.movement,(h+1)*(n.freqScale/10)+n.movement,(u+1)*(n.freqScale/10)+n.movement],f=s?wl.noise(...d):o(...d),p=this.children[e++];p.scale.x=1+r(e,vt(f,n.scale[0]))||Qr,p.scale.y=1+r(e,vt(f,n.scale[1]))||Qr,p.scale.z=1+r(e,vt(f,n.scale[2]))||Qr;let m=r(e,vt(f,n.rotation[0])),y=r(e,vt(f,n.rotation[1])),g=r(e,vt(f,n.rotation[2]));p.rotation.set(m,y,g),p.position.x=t.size[0]*c-l.x+r(e,vt(f,n.position[0])),p.position.y=t.size[1]*h-l.y+r(e,vt(f,n.position[1])),p.position.z=t.size[2]*u-l.z+r(e,vt(f,n.position[2]))}}else for(let a=0;a<t.count[0];a++)for(let l=0;l<t.count[1];l++)for(let c=0;c<t.count[2];c++){let h=[(a+1)*(n.freqScale/10)+n.movement,(l+1)*(n.freqScale/10)+n.movement,(c+1)*(n.freqScale/10)+n.movement],u=s?wl.noise(...h):o(...h),d=this.children[e++];d.scale.x=1+r(e,vt(u,n.scale[0]))||Qr,d.scale.y=1+r(e,vt(u,n.scale[1]))||Qr,d.scale.z=1+r(e,vt(u,n.scale[2]))||Qr;let f=r(e,vt(u,n.rotation[0])),p=r(e,vt(u,n.rotation[1])),m=r(e,vt(u,n.rotation[2]));d.rotation.set(f,p,m),d.position.x=t.size[0]*a+r(e,vt(u,n.position[0])),d.position.y=-t.size[1]*l+r(e,vt(u,n.position[1])),d.position.z=-t.size[2]*c+r(e,vt(u,n.position[2]))}}_updateToObject(i){var m;if(i.type!=="toObject")throw new Error;let{toObject:e}=i,t=new ss(e.rotation[0],e.rotation[1],e.rotation[2]),n=i.randomnessObject??fu.defaultData([1,1,1]).randomnessObject,r=n.noiseType==="perlin";wl.noiseSeed(n.seed);let s=Iw((0,$g.default)(n.seed)),o=F4(n.strength,this.parameters.randomness);if(!e.object){for(let[,y]of this.children.entries())y.position.set(0,0,0),y.scale.setScalar(1),y.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof vte)if(!((m=this.objectForSample.font)!=null&&m.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.object.parent===this.objectForSample){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let a=this.getSubdivData(),l=[],c=y=>{let g=y.length,v=y.map(w=>w[0]).reduce((w,b)=>w+b,0),x=y.map(w=>w[1]).reduce((w,b)=>w+b,0),_=y.map(w=>w[2]).reduce((w,b)=>w+b,0);return[v/g,x/g,_/g]},h=y=>Math.round(y*1e6)/1e6;a.forEach(y=>{let g=a.filter(v=>h(y.pos[0])===h(v.pos[0])&&h(y.pos[1])===h(v.pos[1])&&h(y.pos[2])===h(v.pos[2]));g.length>1?l.push({pos:y.pos,norm:c(g.map(v=>v.norm))}):l.push(y)});let u=tqe(l);if(a.length>0){let y=Math.round(u.length*e.count/100);this._updateCount(y)}this.objectForSample.updateMatrixWorld();let d=new xHe(this.objectForSample).build(),f=J$e[e.axis],p=this.children;d.setRandomGenerator((0,$g.default)(this.object.uuid+e.seed));for(let[y,g]of p.entries()){let v=y*(n.freqScale/10)+n.movement,x=r?wl.noise(v):s(v,v),_=o(y,vt(x,n.rotation[0])),w=o(y,vt(x,n.rotation[1])),b=o(y,vt(x,n.rotation[2]));e.spreadType==="random"?d.sample(e2,Xw):(u.length&&(e2.fromArray(u[y].pos),Xw.fromArray(u[y].norm)),this.objectForSample instanceof EM&&e2.applyMatrix4(hqe.copy(this.objectForSample.matrixWorld).invert())),e2.applyMatrix4(this.object.hiddenMatrix.clone().invert()),g.position.copy(e2),kc.fromArray(f);let S=e.align==="normal"?Xw:this.object.getWorldDirection(pqe),A=Oh.fromArray(e.position);Oh.x+=Oh.x+o(y,vt(x,n.position[0])),Oh.y+=Oh.y+o(y,vt(x,n.position[1])),Oh.z+=Oh.z+o(y,vt(x,n.position[2]));let E=Math.acos(S.dot(kc)),T=fqe.crossVectors(kc,S).normalize(),M=dqe.makeRotationAxis(T,E),C=S.clone().cross(this.object.up).normalize(),D=C.clone().cross(S).normalize(),P=new Ce().makeBasis(C,S,D),I=new R(kc.y,kc.z,kc.x).normalize(),k=I.clone().cross(kc).normalize(),G=new Ce().makeBasis(I,kc,k).invert(),U=new Ce().multiplyMatrices(P,G);g.rotation.setFromRotationMatrix(U),A.applyMatrix4(M),g.position.add(A),g.rotation.x=g.rotation.x+t.x+_,g.rotation.y=g.rotation.y+t.y+w,g.rotation.z=g.rotation.z+t.z+b,g.scale.setScalar(1),g.scale.x=g.scale.x+e.scale[0]+o(y,vt(x,n.scale[0]))||Qr,g.scale.y=g.scale.y+e.scale[1]+o(y,vt(x,n.scale[1]))||Qr,g.scale.z=g.scale.z+e.scale[2]+o(y,vt(x,n.scale[2]))||Qr,g.scale.multiply(this.object.scale),g.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let i=this.parameters.toObject.spreadType;if(i==="random")return[];if(this.objectForSample instanceof EM){let e=this.objectForSample,t=eqe[i],n=_te[t],r=yte[t],s=xte[t],o=[],a=n(e.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=r(e.subdivPointerNew,l),h=s(e.subdivPointerNew,l);hV.fromArray(c).applyMatrix4(e.matrixWorld),dV.fromArray(h),o.push({pos:hV.toArray(),norm:dV.toArray()})}return o}else return(this.objectForSample.geometry.index?sqe(this.objectForSample.geometry):oqe(this.objectForSample.geometry)).map((e,t)=>i==="polygon_center"?{pos:e.midpoint,norm:e.norm}:i==="vertex"?[{pos:e.vertices[0],norm:e.norm},{pos:e.vertices[1],norm:e.norm},{pos:e.vertices[2],norm:e.norm}]:i==="edge"?[{pos:e.faceCenters[0],norm:e.norm},{pos:e.faceCenters[1],norm:e.norm},{pos:e.faceCenters[2],norm:e.norm}]:[]).flat()}updateState(i,e){var t;if(this.parameters=I7(i),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(t=this.object.parent)==null||t.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=e.find(this.parameters.toObject.object);n instanceof Wm?this.objectForSample=n:this.objectForSample=void 0,this.matrix=new Ce,this.hiddenMatrix=new Ce,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},my=i=>{var e;return e=class extends i{},e.geometryHelper=new Va(30,30,30),e},B4=new Z0,Yw=new Fs,fV=new Ce,gy=(i,e,t,n,r=!1)=>{let s=e,o=i.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),Yw.copy(s.boundingSphere),Yw.applyMatrix4(o),t.ray.intersectsSphere(Yw)===!1||(fV.copy(o).invert(),B4.copy(t.ray).applyMatrix4(fV),s.boundingBox!==null&&B4.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,p,m;if(r===!1){let g=Math.max(0,f.start),v=Math.min(u.count,f.start+f.count);for(p=g,m=v;p<m;p+=3)if(l=u.getX(p),c=u.getX(p+1),h=u.getX(p+2),a=y(i,t,B4,d,l,c,h),a){a.faceIndex=Math.floor(p/3),n.push(a);return}}else{let g=s.attributes.position,v=new R,x=new R,_=new R,w=new R,b=2,S=1/((i.scale.x+i.scale.y+i.scale.z)/3),A=S*S,E=Math.max(0,f.start),T=Math.min(g.count,f.start+f.count);for(let M=E,C=T-1;M<C;M+=b){if(v.fromBufferAttribute(g,M),x.fromBufferAttribute(g,M+1),B4.distanceSqToSegment(v,x,w,_)>A)continue;w.applyMatrix4(i.matrixWorld);let D=t.ray.origin.distanceTo(w);D<t.near||D>t.far||n.push({distance:D,point:_.clone().applyMatrix4(i.matrixWorld),object:i})}}function y(g,v,x,_,w,b,S){let A=new R,E=new R,T=new R,M=new R,C=new R;if(A.fromBufferAttribute(_,w),E.fromBufferAttribute(_,b),T.fromBufferAttribute(_,S),x.intersectTriangle(A,E,T,!1,M)===null)return null;C.copy(M),C.applyMatrix4(g.matrixWorld);let D=v.ray.origin.distanceTo(C);return D<v.near||D>v.far?null:{faceIndex:1,distance:D,point:C.clone(),object:g}}},U4=new R,vo=new xm,gqe=class extends dc{constructor(i){let e=new ze,t=new Bs({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],s={},o=new Pe(15711266),a=new Pe(15711266),l=new Pe(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,d,f){h(u,f),h(d,f)}function h(u,d){n.push(0,0,0),r.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(n.length/3-1)}e.setAttribute("position",new Le(n,3)),e.setAttribute("color",new Le(r,3)),super(e,t),this.type="CameraHelper",this.camera=i,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let i=this.geometry,e=this.pointMap;vo.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let t=1,n=1,r=.8;pa("n1",e,i,vo,-t,-n,r),pa("n2",e,i,vo,t,-n,r),pa("n3",e,i,vo,-t,n,r),pa("n4",e,i,vo,t,n,r);let s=r;pa("f1",e,i,vo,-t,-n,s),pa("f2",e,i,vo,t,-n,s),pa("f3",e,i,vo,-t,n,s),pa("f4",e,i,vo,t,n,s);let o=s,a=.5;pa("u1",e,i,vo,t*.7*a,n*1.1,o),pa("u2",e,i,vo,-t*.7*a,n*1.1,o),pa("u3",e,i,vo,0,n*(1.1+.9*a),o),i.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function pa(i,e,t,n,r,s,o){U4.set(r,s,o).unproject(n);let a=e[i];if(a!==void 0){let l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],U4.x,U4.y,U4.z)}}var vqe=class extends my(gqe){constructor(i){super(i),this.object=i,this.object=i,this.name=`CombinedCameraHelper: ${i.uuid}`}updateMatrixWorld(i){super.updateMatrixWorld(i),this.updateTarget()}updateTarget(){let i=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(i)}raycast(i,e){gy(this.object,this.geometry,i,e,!0)}},CM;(i=>i.is=e=>"objectHelper"in e)(CM||(CM={}));var N7=(i,e)=>class extends fee(i){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(t,n){this.objectHelper.raycast(t,n)}showGizmos(){for(let t in this.gizmos){let n=this.gizmos[t];n instanceof L6&&(n.visible=!0)}}updateEntityBoxSize(t,n){this.objectHelper.visible&&this.geometryHelper instanceof Va?(t.setScalar(0),n.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(t,n)}hideGizmos(){for(let t in this.gizmos){let n=this.gizmos[t];n instanceof L6&&(n.visible=!1)}}},Zw=790,hp=new R,Qw=new R,DM=class extends N7(xm,vqe){constructor(i="",e={...M8.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=v3.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.super_Entity(i,e),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let t=this.width,n=this.height;if(e.orthographic.autoZoom){let r=e.orthographic.autoZoomFrustumSize??Zw,s=t/n,o=t>n?s:1,a=t>n?1:s;this.orthoCamera=new H0(-r*.5*o,r*.5*o,r*.5*(1/a),-r*.5*(1/a),-5e4,1e4)}else this.orthoCamera=new H0(t*-.5,t*.5,n*.5,n*-.5,-5e4,1e4);this.perspCamera=new or(45,t/n,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(i){this.perspCamera.fov=i}get fov(){return this.perspCamera.fov}setNear(i,e){i==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}setZoom(i,e){e>=0&&(i==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}set cameraType(i){i==="PerspectiveCamera"?this.toPerspective():i==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(i){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=i:this.orthoCamera.near=i}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(i){i>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=i:this.orthoCamera.zoom=i)}lookAt(i,e,t){typeof i=="number"&&(i=new R(i,e,t)),super.lookAt(i),this.getWorldPosition(hp),this.targetOffset=hp.distanceTo(i)}getTarget(i=new R){return this.getWorldDirection(Qw),this.getWorldPosition(hp),Qw.multiplyScalar(this.targetOffset),i.copy(hp).add(Qw),i}getDistanceToTarget(){let i=this.getTarget();return this.getWorldPosition(hp),hp.distanceTo(i)}updateUp(){let i=this.getWorldQuaternion(new Yi),e=new R(0,0,1).applyQuaternion(i),t=new R().copy(Pt.DEFAULT_UP);this.isUpVectorFlipped&&t.negate(),t.applyQuaternion(i);let n=new R().copy(Pt.DEFAULT_UP).projectOnPlane(e),r=new R().crossVectors(n,t).dot(e)>=0?1:-1;this.angleOffsetFromUp=n.angleTo(t)*r}updateTransformState(i){let e=super.updateTransformState(i);return i.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=i.isUpVectorFlipped),this.updateUp(),e}getViewFrontToObject(i){let e=i.getWorldPosition(new R),t=i.getWorldDirection(new R).multiplyScalar(this.targetOffset);return{position:e.clone().add(t),target:e}}getViewToObject(i){let e=i.getWorldPosition(new R),t=this.getWorldDirection(new R).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}setViewplaneSize(i,e){if(this.aspect=i/e,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let t=this.data.orthographic.autoZoomFrustumSize??Zw,n=i>e?this.aspect:1,r=i>e?1:this.aspect;this.left=-t*.5*n,this.right=t*.5*n,this.top=t*.5*(1/r),this.bottom=-t*.5*(1/r)}else this.left=-i*.5,this.right=i*.5,this.top=e*.5,this.bottom=-e*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(i){this.perspCamera.setFocalLength(i),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(i,e,t,n,r,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(i,e,t,n,r,s):this.orthoCamera.setViewOffset(i,e,t,n,r,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(i){super.updateMatrixWorld(i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(i,e){super.updateWorldMatrix(i,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(i,e){return super.copy(i,e),this.orthoCamera.copy(i.orthoCamera),this.perspCamera.copy(i.perspCamera),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.far=i.far,this.view=i.view===null?null:Object.assign({},i.view),this._cameraType=i._cameraType,this.aspect=i.aspect,this.fov=i.fov,this.focus=i.focus,this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this.targetOffset=i.targetOffset,this.updateProjectionMatrix(),this}toCameraState(i=[]){let e={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:Zw},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return fM(e,i)}updateCameraSubtype(i,e){let t=i==="perspective"?"PerspectiveCamera":"OrthographicCamera";e.zoom!==void 0&&this.setZoom(t,e.zoom),e.near!==void 0&&this.setNear(t,e.near),e.fov!==void 0&&t==="PerspectiveCamera"&&(this.fov=e.fov)}updateState(i,e){this.updateCameraState(i,e)}updateCameraState(i,e){this.updateState_Entity(i,e),i.far!==void 0&&(this.far=i.far),i.orthographic!==void 0&&this.updateCameraSubtype("orthographic",i.orthographic),i.perspective!==void 0&&this.updateCameraSubtype("perspective",i.perspective),i.type!==void 0&&(this.cameraType=i.type),i.up!==void 0&&this.up.fromArray(i.up),i.targetOffset!==void 0&&(this.targetOffset=i.targetOffset),i.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=i.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(i,e,t){super.updateByPatchedOp(i,e,t),i.path.length===1&&i.type===0&&this.updateCameraSubtype(i.path[0],i.props)}toState(i){return{...super.toState(i),...this.toCameraState(i),type:this.cameraType}}},pV=new Ce,nm=class extends R7{constructor(i,e,t){super(i,e),this.data=e,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new ze,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(i,e,t){super.updateByPatchedOp(i,e,t),i.path.length===1&&i.path[0]==="geometry"&&i.type===0&&i.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(i,e=!0){var n;if(this.booleanMeshSetAddress!==-1&&!i)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof nm&&s.recomputeBoolean(i===!0,e)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof Wm&&s.dataPatched.visible===!0&&((n=s.geometry.attributes.position)==null?void 0:n.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=Hc.getMeshSet(s.geometry,i===!0,e)),s.booleanMeshSetAddress===-1)return;Hc.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else s instanceof nm&&s.needsTransformForDownstream===!0?(Hc.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(pV.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Hc.transformMeshSet(s.booleanMeshSetAddress,pV),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new AX([],0)),this.geometry.setDrawRange(0,0);return}if(i===!0)return Hc.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let t=this.geometry;t.dispose(),this.geometry=new ze,this.geometry.userData=t.userData,this.geometry.boundingSphere=t.boundingSphere;try{this.booleanMeshSetAddress=Hc.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,fL(this),pL(this)}dispose(){super.dispose(),this.geometry.dispose()}},mV;(i=>{function e(t){return zn.is(t)&&t instanceof Ga}i.is=e})(mV||(mV={}));var mL=(i,e)=>class extends N7(i,e){updateState_Light(t,n){this.updateState_Entity(t,n),t.color!==void 0&&(this.color=n.shared.color(t.color)),t.intensity!==void 0&&(this.intensity=t.intensity),t.depth!==void 0&&(this.shadow.camera.far=t.depth,this.shadow.needsUpdate=!0),t.shadows!==void 0&&(this.castShadow=t.shadows)}},V4=i=>i instanceof Wm,G4=i=>i!==null&&i instanceof nm;var yqe=i=>CM.is(i),gL=class extends my(y6e){constructor(i,e=15){super(e),this.object=i,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${i.uuid}`,this.matrix=i.matrixWorld,this.matrixAutoUpdate=!1}raycast(i,e){gy(this.object,gL.geometryHelper,i,e)}update(){}},gV=class extends N7(Js,gL){constructor(i,e){super(),this.super_Entity(i,e),this.objectHelper.update()}updateState(i,e){this.updateState_Entity(i,e)}},bte=class extends my(v6e){constructor(i,e=15,t=10066329){super(i,e,t),this.object=i,this.added=!1,this.name=`DirectionalLightHelper: ${i.uuid}`}raycast(i,e){gy(this.object,bte.geometryHelper,i,e)}},wte=class extends my(m6e){constructor(i,e=15,t=6710886){super(i,e,t),this.object=i,this.name=`PointLightHelper: ${i.uuid}`}raycast(i,e){gy(this.object,wte.geometryHelper,i,e)}},PM=class extends my(f6e){constructor(i,e=6710886){super(i,e),this.object=i,this.name=`SpotLightHelper: ${i.uuid}`}raycast(i,e){gy(this.object,PM.geometryHelper,i,e)}update(){if(this.object!==void 0){let i=PM._vector,e=this.object.distance?this.object.distance:1e3,t=e*Math.tan(this.object.angle);this.cone.scale.set(t,t,e),i.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(i);let n=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(n);else this.cone.material.color.set(n)}}},Ste=PM;Ste._vector=new R;function xqe(i,e){i.shadow.camera.right=e/2,i.shadow.camera.left=-e/2,i.shadow.camera.top=e/2,i.shadow.camera.bottom=-e/2,i.shadow.needsUpdate=!0}var _qe=class extends mL(Hd,bte){constructor(i,e,t){super(),this.super_Entity(i,e),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.top=1250,n.bottom=-1250,n.right=1250,n.left=-1250,n.near=-1e4,n.far=2500;let r=new P6(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let i in this.gizmos){let e=this.gizmos[i];e instanceof P6&&e.update()}}updateMatrixWorld(i){super.updateMatrixWorld(i),this.objectHelper&&this.objectHelper.update()}updateState(i,e){this.updateState_Light(i,e);let t=i.depth!==void 0&&i.depth!==this.shadow.camera.far||i.size!==void 0&&i.size/2!==this.shadow.camera.right;i.size!==void 0&&xqe(this,i.size),i.shadowRadius!==void 0&&(this.shadow.radius=i.shadowRadius),i.shadowResolution!==void 0&&(this.shadow.mapSize.set(i.shadowResolution,i.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),t&&this.update()}},bqe=class extends mL(G1,wte){constructor(i,e,t){super(),this.super_Entity(i,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=90,n.aspect=1,n.near=100,n.far=2500;let r=new R(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),s=new R(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z),o=new er(r,s),a=new L6(o,new Pe(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let i in this.gizmos){let e=this.gizmos[i];if(e instanceof L6){let t=this.shadow.camera,n=new R(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),r=new R(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z);e.box.set(n,r),e.updateMatrixWorld(!0)}}}updateMatrixWorld(i){super.updateMatrixWorld(i),this.objectHelper&&this.objectHelper.update()}updateState(i,e){this.updateState_Light(i,e),i.distance!==void 0&&(this.distance=i.distance),i.decay!==void 0&&(this.decay=i.decay),i.shadowRadius!==void 0&&(this.shadow.radius=i.shadowRadius),i.shadowResolution!==void 0&&(this.shadow.mapSize.set(i.shadowResolution,i.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},vV=new R,yV=new R,xV=new Yi,wqe=class extends mL(jd,Ste){constructor(i,e,t){super(),this.super_Entity(i,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=hi.RAD2DEG*2*this.angle,n.aspect=1,n.near=100,n.far=2500;let r=new P6(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let i in this.gizmos){let e=this.gizmos[i];e instanceof P6&&e.update()}}updateMatrixWorld(i){super.updateMatrixWorld(i),yV.setFromMatrixPosition(this.matrixWorld),xV.setFromRotationMatrix(this.matrixWorld),vV.copy(this.up).applyQuaternion(xV).negate().multiplyScalar(this.distance),this.target.position.copy(yV).add(vV),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(i,e){this.updateState_Light(i,e),i.distance!==void 0&&(this.distance=i.distance),i.decay!==void 0&&(this.decay=i.decay),i.angle!==void 0&&(this.angle=i.angle),i.penumbra!==void 0&&(this.penumbra=i.penumbra),i.shadowRadius!==void 0&&(this.shadow.radius=i.shadowRadius),i.shadowResolution!==void 0&&(this.shadow.mapSize.set(i.shadowResolution,i.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Sqe=class extends Ju{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(i,e){let t=this.geometry.getAttribute("position");t!==void 0?cL(t,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:t.count,i,e):super.updateEntityBoxSize(i,e)}},Ate=class extends Ju{constructor(i,e,t){super(i,e,t),this._shapeId=null,this.snappedEntities=new Set,this._context=t}updateState(i,e){super.updateState(i,e),this.updateShape(),this.updateSnappedEntities(e)}updateShape(){var n;let i=this.data.geometry.extrusion.shape,e;if(i.type==="Custom"){let r=i.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let s=this._context.scene.find(r);s!=null&&s.data&&(s.attachedPaths.add(this),e=(n=s.geometry.userData)==null?void 0:n.shape),e||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let r;switch(i.type){case"Rectangle":r=Dee;break;case"Ellipse":r=oL;break;case"Polygon":r=Cee;break;case"Star":r=Pee;break;default:throw new Error(`Unknown shape type: ${i.type}`)}e=r.create({parameters:i}).userData.shape}let t=this.geometry;e&&t.inputs&&(t.inputs.shapeData=e,t.build(),this.attachedSurfaceCloners.forEach(r=>r.update()))}updateSnappedEntities(i){this.snappedEntities.forEach(e=>{e.updatePathSnapping(i.scene)})}detachShape(){var i;this._shapeId!==null&&((i=this._context.scene.find(this._shapeId))==null||i.attachedPaths.delete(this))}createGeometryDelayed(i){this.geometryCreateDeleyed=i.shared,this.updateShape(),this.refreshAttachedPaths(i),this.updateSnappedEntities(i)}updateGeometryInteractions(i,e){super.updateGeometryInteractions(i,e),this.updateShape()}updateEntityBoxSize(i,e){let t=this.geometry.getAttribute("position");t!==void 0?cL(t,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:t.count,i,e):super.updateEntityBoxSize(i,e)}},mv=class extends N7(Js,gL){constructor(i,e,t){super(),e.type==="Instance"&&typeof i=="string"&&(e=this.transformAssignData(e,t)),this.super_Entity(i,e),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(i,e){let t=e.scene.data.objects.get(i.component);if(t){let n,r;for(let s of tm.rootOverrideProps)i[s]===void 0?(n===void 0&&(n={...i}),n[s]=t.data[s]):(r===void 0&&(r={}),r[s]=i[s]);return this.overrideData=r,n??i}return i}updateByOp(i,e,t,n){let r;if(this.isInstanceRoot&&!n&&(e=this.transformAssignData(e,t),i.type===0&&i.path.length===0&&this.component))for(let s of tm.rootOverrideProps)s in i.props&&i.props[s]===void 0&&(r===void 0&&(r={...i,props:{...i.props}}),r.props[s]=this.component.data[s]);super.updateByOp(r??i,e,t,n)}updateState(i,e){this.updateState_Entity(i,e)}expandInstanceChildren(i){let e=this.data;if(this.component===void 0){this.component=i.scene.find(e.component)??null;let t=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let n=0;for(let r of this.children)if(zn.is(r))i.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),vL(r),n+=1;else break;this.children.splice(0,n)}t=!0}this.component&&Tte(i,[this.uuid],e.overrides,this,this.component,this.component,0,t),this.oldComponent=this.component}}};function vL(i){if(i.component){let e=i.component.instances.indexOf(i);e>=0&&i.component.instances.splice(e,1);for(let t of i.children)zn.is(t)&&vL(t)}}function _V(i,e,t,n){return i.component===e&&cee(i.identity,n)?i.overrideData===t?2:1:0}function Tte(i,e,t,n,r,s,o,a){if(o>50)return!1;if(n.component!==r){if(n.component){let c=n.component.instances.indexOf(n);c>=0&&n.component.instances.splice(c,1)}r.instances.push(n),n.component=r}r instanceof mv&&r.isInstanceRoot&&r.expandInstanceChildren(i);let l=0;for(let c of r.children)if(zn.is(c)){let h=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=E8.resolve(t,h,1),d=null,f;if(!a){let p=n.children[l];if(d=zn.is(p)?p:null,d!==null){let m=_V(d,c,u,h);f=m>=1?d.stateSelection:void 0,m!==2&&(d=null)}if(d===null&&(d=i.scene.findInstance(h)??null,d!==null)){let m=_V(d,c,u,h);if(f=m>=1?d.stateSelection:void 0,m!==2)d=null;else{let y=d.parent.children.indexOf(d);d.parent.children.splice(y,1),n.children.splice(l,0,d),d.parent===n?y<=l&&console.error("not possible"):(d.parent=n,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),i.pendingDeletes.delete(d))}}}if(d===null){let p=u?Pd.apply(c.data,u):c.data;Yd.is(p.type)&&(p={...p,type:"Empty"}),d=pu.createEntity(h,p,i),d.overrideData=u,n.add(d),n.children.splice(n.children.length-1,1),n.children.splice(l,0,d),d.updateState(d.data,i),f&&d.changeSelectedState(f,i),i.scene.registerInstanceAndSetUuid(d)}l+=1,Tte(i,e,t,d,c,s,o+1,a)}if(!a){let c=l;for(;;){let h=n.children[l];if(zn.is(h))i.pendingDeletes.add(h);else break;l+=1}n.children.splice(c,l-c)}return!0}function Aqe(i,e,t){let n;return e.geometry.type==="TextGeometry"?new vte(i,e,t):(e.geometry.type==="SubdivGeometry"?n=new EM(i,e,t):e.geometry.type==="PathGeometry"?n=new Ate(i,e,t):e.geometry.type==="VectorGeometry"?n=new Sqe(i,e,t):e.geometry.type==="BooleanGeometry"?n=new nm(i,e,t):n=new Ju(i,e,t),n)}function yL(i,e,t){return e.type==="Mesh"?Aqe(i,e,t):e.type==="Empty"?new gV(i,e):e.type==="PointLight"?new bqe(i,e,t):e.type==="SpotLight"?new wqe(i,e,t):e.type==="DirectionalLight"?new _qe(i,e,t):e.type==="Component"||e.type==="Instance"?new mv(i,e,t):Yd.is(e.type)?new DM(i,e):(console.error(e),new gV(i,e))}pu.createEntity=yL;function Tqe(i,e,t){let n=yL(i.identity,e,t),r=i.children,s=i.attachedPaths,o=i.parent,a=i.component,l=i.instances,c=i.overrideData,h=i.uuid,u=i.stateSelection;i.dispose();for(let d of Object.keys(i))delete i[d];Object.setPrototypeOf(i,Object.getPrototypeOf(n));for(let d of Object.keys(n))i[d]=n[d];i.children=[...i.children,...r],i.attachedPaths=s,i.parent=o,i.component=a,i.instances=l,i.uuid=h,i.overrideData=c,i.updateState(i.data,t),u&&i.changeSelectedState(u,t),i.resetBBoxNeedsUpdate()}pu.changeEntityProptotype=Tqe;pu.Cloner=mqe;function Mqe(i,e,t,n){i.updateByOp(e,t,n,!1)}function bV(i,e){let t=!1,n=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(i.layers.set(8),n.length>0&&i.layers.enable(3),t=!0,pL(i),fL(i)),n.length===0&&r.length===0&&i.layers.set(0),t}function wV(i,e){if(!e.layers)return!1;let t=!1,n=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return n.length>0&&(i.layers.set(3),r.length>0&&i.layers.enable(8),t=!0),n.length===0&&r.length===0&&i.layers.set(0),t}function Eqe(i){let e=!1;return i.traverseEntity(t=>{if(t instanceof R7)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)bV(t,t.material[n])&&(e=!0);else bV(t,t.material)&&(e=!0)}),e}function Cqe(i){let e=!1;return i.traverseEntity(t=>{if(t instanceof R7)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)wV(t,t.material[n])&&(e=!0);else wV(t,t.material)&&(e=!0)}),e}var Dqe=new NY,Pqe=new Ce,Lqe=new Z0;function Iqe(i,e,t){let n=i.cloner;if(n)for(let r of n.children){let s=Pqe.copy(r.matrixWorld).invert(),o=Lqe.copy(e.ray).applyMatrix4(s),a=i.matrixWorld;o.applyMatrix4(a);let l=Dqe;l.set(o.origin,o.direction),l.near=e.near,l.far=e.far,l.intersectObject(i,!1).length>0&&t.push({object:i})}}var Oqe=new os;Oqe.wireframe=!0;var SV=new R,Mte=class extends Xx{constructor(i,e){super(),this.data=i,this.backupFog=new qx(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new ka(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.needsRecomputeInstances=!1,this.ambientLight=new rD(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=i.postprocessing,this.init(i,e),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Cqe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=Eqe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(i){let e=i.identity.join("-"),t=this.entityIdentityToEntity[e];t&&(i.uuid=t.uuid),this.entityIdentityToEntity[e]=i,this.entityByUuid[i.uuid]=i}findInstance(i){return this.entityIdentityToEntity[i.join("-")]}getWithSortKey(i){let e=this.find(i);if(e===void 0)return;let t=[],n=e;for(;n!==this;){let r=n;n=n.parent;let s=n.children.indexOf(r);t.splice(0,0,s)}return{entity:e,sortKey:t}}getAllSorted(i){let e=[];for(let t of i){let n=this.getWithSortKey(t.id);n!==void 0&&e.push(n)}return e.sort((t,n)=>FFe(t.sortKey,n.sortKey)),e.map(t=>t.entity)}nonExistOrDescendantOf(i,e){let t=this.find(i);if(t===void 0)return!0;for(;t;){if(t.uuid===e)return!0;t=t.parent}return!1}find(i){if(i===""||i===void 0)return;let e=this.entityByUuid[i];return e===void 0?this.getObjectByProperty("uuid",i):e}debugEnsureEntity(i){let e=this.find(i);if(e){if(Array.isArray(e.identity)&&this.findInstance(e.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(i){this.toExpandCloner.add(i)}addPendingUpdateCloner(i){this.toUpdateCloner.add(i)}markToExpandCloner(i){this.toExpandCloner.add(i),i.traverseEntityAncestors(e=>{this.toExpandCloner.add(e)})}doPendingExpandCloner(){this.toExpandCloner.forEach(i=>{i.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(i=>{var e;(e=i.cloner)==null||e.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(i){this.pendingCommands.push(i)}applyPendingCommands(){this.pendingCommands.forEach(i=>i()),this.pendingCommands.length=0}updateTreeByOp(i,e){var t;if(i.path.length===0&&i.type===7){let n=i.parent===null?this:this.find(i.parent);if(n===void 0)throw new Error("unexpected");let r=this.createObject(i.id,i.data,i.children,n,i.localIndex,e);r.updateVisible(),r.resetBBoxNeedsUpdate(),V4(r)&&G4(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r)}else if(i.path.length===0&&i.type===8){let n=this.find(i.id);if(n===void 0)throw new Error("unexpected");this.markToExpandCloner(n),n.resetBBoxNeedsUpdate(),this.unregisterObject(n);let r=n.parent;this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(n),n.parent.remove(n),G4(n.parent)&&(n.parent.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),V4(n)&&(n.freeBooleanPointer(),r instanceof nm&&r.invalidateDownstreamBooleanData().recomputeBoolean()),n instanceof Ate&&n.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n)}else if(i.path.length===0&&i.type===9){let n=this.find(i.id);if(n===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(n);let r=n.parent;this.markNeedsRecomputeInstancesForAncessors(r),(t=n.cloner)==null||t.resetOnMove(),this.markToExpandCloner(n);let s=i.parent===null?this:this.find(i.parent);if(s===void 0)throw new Error("unexpected");s.add(n),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(n),n.invalidateClonerTransform(n),n.updateVisible(),n.resetBBoxNeedsUpdate();let o=i.localIndex;s.children.splice(o,0,s.children.pop()),V4(n)&&(n.invalidateUpstreamBooleanData(),G4(n.parent)?n.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof nm&&r.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(i,e,t,n){if(e.type===0&&(("overrides"in e.props||"component"in e.props)&&this.markNeedsRecomputeInstances(),e.path.includes("overrides")&&"states"in e.props)){let{states:s,rest:o}=e.props;e={...e,props:o},this.markNeedsRecomputeInstances()}let r=this.find(i);if(r)try{Mqe(r,e,t,{scene:this,shared:n}),r instanceof Ju&&r.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get enableFog(){return this.fog!==null}set enableFog(i){this.fog=i===!0?this.backupFog:null}init(i,e){if(this.createChildrenObjects(i.objects,this,e),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(no(i.backgroundColor,e)),this.updateFog(i.fog,e),this.updateAmbientLight(i.environment.ambientLight,e),this.activeCamera=this.personalCamera,i.publish.playCamera!==null){let t=this.find(i.publish.playCamera);t instanceof DM&&this.switchActiveCamera(t)}this.expandInstances(e,!0),this.traverseEntity(t=>{G4(t)&&t.recomputeBoolean()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(i){i.traverseEntity(e=>{(e.data.type==="Component"||e.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(i){zn.is(i)&&(i.data.type==="Component"&&this.markNeedsRecomputeInstances(),i.traverseAncestors(e=>{zn.is(e)&&e.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(i,e,t,n,r,s,o){i&&i!==n.uuid&&n.find(i)&&r.forInstancesRec(a=>{a.isInstanceRoot||(a.data=x8(a.data,l=>{let c=l.events.data(o.id),h=a.goUp(s);if(h){let u=[...RJ(h.identity),i].join("-"),d=this.entityIdentityToEntity[u];if(d){let f=d.uuid;k0.zoom(c,e)[t]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(i=>{if(i instanceof mv&&typeof i.identity=="string"&&i.data.type==="Component")return i.traverseEntity((e,t)=>{e.data.events.forEach(n=>{n.data.type==="GameControl"?e.forInstancesRec(r=>{r.isInstanceRoot||(r.data=x8(r.data,s=>{s.events.delete(n.id)}).data)}):n.data.type==="Conditional"?(n.data.condition.type==="Distance"?(this.relativeizeInner(n.data.condition.fromObject,["condition"],"fromObject",i,e,t,n),this.relativeizeInner(n.data.condition.toObject,["condition"],"toObject",i,e,t,n)):n.data.condition.type==="State"?this.relativeizeInner(n.data.condition.object,["condition"],"object",i,e,t,n):n.data.condition.type==="Comparison"&&(n.data.condition.lOperand.type==="Property"&&this.relativeizeInner(n.data.condition.lOperand.value[0],["condition","lOperand","value"],0,i,e,t,n),n.data.condition.rOperand.type==="Property"&&this.relativeizeInner(n.data.condition.rOperand.value[0],["condition","rOperand","value"],0,i,e,t,n)),n.data.inActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["inActions",r.id],"object",i,e,t,n)}),n.data.outActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["outActions",r.id],"object",i,e,t,n)})):"actions"in n.data&&n.data.actions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["actions",r.id],"object",i,e,t,n)})})}),!0})}expandInstances(i,e){let t=new Set;this.traverseEntity(n=>{if(n instanceof mv&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:i,pendingDeletes:t}),e||n.resetBBoxNeedsUpdate(),!0});for(let n of t)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),vL(n)}recomputeInstances(i){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(e=>{e instanceof mv&&e.isInstanceRoot&&(e.component=void 0)}),this.expandInstances(i,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(i){i.traverseEntity(e=>{let t=typeof e.identity=="string"?e.identity:e.identity.join("-");this.entityIdentityToEntity[t]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[t]),e.dispose()})}clearScene(){for(let i of this.children)_0(i)&&i.disposeRecursively();this.children.length=0}resetAfterClear(i,e){this.init(i,e)}createPersonalCamera(){let i=new DM(Mte.PERSONAL_CAMERA_ID,{...M8.defaultData,name:"Personal Camera"});return i.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(i),i}raycast(i){let e=[],t=n=>{for(let r of n.children)_0(r)&&!r.raycastLock&&r.visible&&((V4(r)||yqe(r)&&this.enableHelpers&&r.objectHelper.visible)&&(i.intersectObject(r,!1,e),Iqe(r,i,e)),t(r))};return t(this),e}forEachEntity(i){for(let e of this.children)_0(e)&&i(e)}traverseEntity(i){for(let e of this.children)_0(e)&&e.traverseEntity(i)}traverseObject(i){for(let e of this.children)I8.is(e)&&e.traverseObject(i)}traverseVisibleEntity(i){for(let e of this.children)_0(e)&&e.visible&&e.traverseVisibleEntity(i)}updateFog(i,e){this.enableFog=i.enabled,this.fogUseBGColor=i.useBackgroundColor,i.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=no(i.color,e),this.backupFog.near=i.near,this.backupFog.far=i.far}dispose(){this.clearScene()}updateAmbientLight(i,e){i.color!==void 0&&(this.ambientLight.color=no(i.color,e)),i.intensity!==void 0&&(this.ambientLight.intensity=i.intensity),i.groundColor!==void 0&&(this.ambientLight.groundColor=no(i.groundColor,e)),i.enabled!==void 0&&(this.ambientLight.visible=i.enabled)}switchActiveCamera(i){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=i,i.objectHelper.visible=!1}setBackgroundColor(i){this.bgColor=i,this.fogUseBGColor===!0&&(this.backupFog.color=i)}createChildrenObjects(i,e,t){let n=0;for(let r of i)this.createObject(r.id,r.data,r.children,e,n,t),n+=1}registerObjectCreatedInLegacy(i){this.entityByUuid[i.uuid]=i}unregisterObject(i){delete this.entityByUuid[i.uuid];for(let e of i.children)this.unregisterObject(e)}createObject(i,e,t,n,r,s){let o={scene:this,shared:s},a=yL(i,e,o);return a&&(this.entityByUuid[i]=a,n.add(a),n.children.splice(r,0,n.children.pop()),t.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(t,a,s)),a.updateState(e,o),a instanceof Ju&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a)),a}getCenter(i){let e=[];for(let n=0,r=i.length;n<r;++n){let{id:s,recursive:o}=i[n],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;e.push(...l.vertices)}let t=new er;return t.setFromPoints(e),t.getCenter(SV),SV}copyMatrixWorld(i,e){if(i===null){e.identity();return}let t=this.find(i);t?e.copy(t.matrixWorld):e.identity()}copyParentMatrixWorld(i,e){var n;if(i===null){e.identity();return}let t=(n=this.find(i))==null?void 0:n.parent;t?e.copy(t.matrixWorld):e.identity()}traverseMaterial(i){this.traverseEntity(e=>{if(e instanceof Wm)if(Array.isArray(e.material))for(let t=0;t<e.material.length;t++)e.material[t]instanceof Ku&&i(e.material[t]);else e.material instanceof Ku&&i(e.material)})}updateCanvasSize(i,e){this.activeCamera.setViewplaneSize(i,e);let t,n;i>=e?(t=e/i,n=1):(t=1,n=i/e),this.traverseMaterial(r=>{r.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=t,s.uniforms[`f${s.id}_aspectRatio`].value.y=n})})}},Rqe=Mte;Rqe.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";const Nqe={id:"nokey"},Fqe={__name:"CanvasVue",setup(i){let e=()=>{let t=document.getElementById("nokey"),n=parseInt(t.getAttribute("width")),r=parseInt(t.getAttribute("height")),s=t.getContext("2d");var o=60,a={r:0,g:255,b:255},l=2,c=[],h=.03,u=.8,d=260,f={x:0,y:0,vx:0,vy:0,r:0,type:"mouse"};function p(C){var D=-1,P=1;switch(C){case"top":return[y(D,P),y(.1,P)];case"right":return[y(D,-.1),y(D,P)];case"bottom":return[y(D,P),y(D,-.1)];case"left":return[y(.1,P),y(D,P)];default:return}}function m(C){return C[Math.floor(Math.random()*C.length)]}function y(C,D){return Math.random()*(D-C)+C}console.log(y(0,10));function g(){var C=m(["top","right","bottom","left"]);switch(C){case"top":return{x:v(n),y:-l,vx:p("top")[0],vy:p("top")[1],r:l,alpha:1,phase:y(0,10)};case"right":return{x:n+l,y:v(r),vx:p("right")[0],vy:p("right")[1],r:l,alpha:1,phase:y(0,10)};case"bottom":return{x:v(n),y:r+l,vx:p("bottom")[0],vy:p("bottom")[1],r:l,alpha:1,phase:y(0,10)};case"left":return{x:-l,y:v(r),vx:p("left")[0],vy:p("left")[1],r:l,alpha:1,phase:y(0,10)}}}function v(C){return Math.ceil(Math.random()*C)}function x(){Array.prototype.forEach.call(c,function(C){C.hasOwnProperty("type")||(s.fillStyle="rgba("+a.r+","+a.g+","+a.b+","+C.alpha+")",s.beginPath(),s.arc(C.x,C.y,l,0,Math.PI*2,!0),s.closePath(),s.fill())})}function _(){var C=[];Array.prototype.forEach.call(c,function(D){D.x+=D.vx,D.y+=D.vy,D.x>-50&&D.x<n+50&&D.y>-50&&D.y<r+50&&C.push(D),D.phase+=h,D.alpha=Math.abs(Math.cos(D.phase))}),c=C.slice(0)}function w(){for(var C,D,P=0;P<c.length;P++)for(var I=P+1;I<c.length;I++)C=b(c[P],c[I])/d,C<1&&(D=(1-C).toString(),s.strokeStyle="rgba(150,150,150,"+D+")",s.lineWidth=u,s.beginPath(),s.moveTo(c[P].x,c[P].y),s.lineTo(c[I].x,c[I].y),s.stroke(),s.closePath())}function b(C,D){var P=Math.abs(C.x-D.x),I=Math.abs(C.y-D.y);return Math.sqrt(P*P+I*I)}function S(){c.length<o&&c.push(g())}function A(){s.clearRect(0,0,n,r),x(),w(),_(),S(),window.requestAnimationFrame(A)}function E(C){for(var D=1;D<=C;D++)c.push({x:v(n),y:v(r),vx:p("top")[0],vy:p("top")[1],r:l,alpha:1,phase:y(0,10)})}function T(){t.setAttribute("width",window.innerWidth),t.setAttribute("height",document.body.clientHeight),n=parseInt(t.getAttribute("width")),r=parseInt(t.getAttribute("height"))}window.addEventListener("resize",function(C){T()});function M(){T(),E(o),window.requestAnimationFrame(A)}M(),t.addEventListener("mouseenter",function(){c.push(f)}),t.addEventListener("mouseleave",function(){var C=[];Array.prototype.forEach.call(c,function(D){D.hasOwnProperty("type")||C.push(D)}),c=C.slice(0)}),t.addEventListener("mousemove",function(D){var D=D||window.event;f.x=D.pageX,f.y=D.pageY})};return cm(()=>{e()}),(t,n)=>(ur(),wr("canvas",Nqe," Your Browser Don't Support Canvas, Please Download Chrome ^_^`` "))}},zqe={setup(){return{onSwiper:t=>{console.log(t)},onSlideChange:()=>{console.log("slide change")},modules:[Lge,Ige,Oge,Rge]}},data(){return{}},onMounted(){},components:{CanvasVue:Fqe}},kqe=Object.assign(zqe,{__name:"HomeView",setup(i){return(e,t)=>(ur(),wr(is,null,[Gt(hme),Gt(p8e),Gt(G6e,{isbg:!0,class:""})],64))}}),xL=koe({history:toe("/pixselvue/"),routes:[{path:"/",name:"home",component:kqe},{path:"/about",name:"about",component:()=>cg(()=>import("./AboutView-f85d3796.js"),[])},{path:"/login",name:"login",component:()=>cg(()=>import("./LoginView-0a076b4d.js"),[])},{path:"/play",name:"play",component:()=>cg(()=>import("./PlayView-1855de08.js"),[])},{path:"/profile",name:"profile",component:()=>cg(()=>import("./ProfileView-d620d2bc.js"),[]),meta:{requiresAuth:!0}},{path:"/news",name:"news",component:()=>cg(()=>import("./NewsView-2eb1a40b.js"),[])}]}),Bqe=()=>new Promise((i,e)=>{const t=vC(K3(),n=>{t(),i(n)},e)});xL.beforeEach(async(i,e,t)=>{i.matched.some(n=>n.meta.requiresAuth)?await Bqe()?t():(alert("you dont have authentication"),console.log(K3().currentUser),t("/")):t()});const Uqe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAILklEQVR4Xu2aa2wUVRTH/zOzj7ZLuwWXlpeUZ3ljCRiiEB4fFIFErSIRJTFRiKR+MxoTiBhjVAwkImKDigZNNCSgaIwKPpBg4IslBaw8Ky9JpQj0QXfb3Z2HOXf27s7MTme7bOm2S++X3bn3zMw9v/O4d/dcASna5LsLNRKJRKPwuN1Mmr5Ti3ZIWD57nOMTNu47JqR6RzbHU06OAJDCPq9XV1pV4wDouvKeCQiGBYy4y4XL12X2Sa2pTYeUEwDcosiUaY9G4ZIkWwDVB46aDFm1oAI+r9b3AYwbkqeR9bnleRgQFOpbOnkM84CcBUAhwJWVFYVZOT+WC+4YAKS0VXmeDzrzgMcmlmNsWX7fDwHyAFKerB5RFCiqinBIQLHfZQoBu0yeEzmAAGiaxhQ3NkqG1MgDnFqvXwUmDi9g67yqAYIgQBQE5HtdiOrhDhEKZBVwCSLCigxZViCKItwuCZoGSDEQbgloD8tQNQ0ETIwtsKKog+psH3GxOZhyKb6d+wTBCIBe5HG5mLVFUUCex4WOiBx/P137PQIUSLjeFoasKvDleZiMqmqQRBERWZc3AnDaR9Rf6cgugKkji7RIRAFEXQGyrqIokBUNbhddC9j4wjPwuj3IzytCe7AVkEQ0XWnAhj17EWyPICqrcEkC8wZVVfVwUQV4PBLzCKd9RNYBMA/QJLglAZpA2V6GBgFuSYLkkrDu6SdQ4PUiFA5Dkrxoam1CWWkJLl44wyz9/r5DUGQFUUWBAA0uyQVBA6IKxRSBVNkusrN9xIl/bmbXA3gI6HlAt/6qhTMw2OfDp4dqsXblCixdtwXlY3Zj81O/wFPkQ9W2+3Dm3DLsWv88Nu/6Gs/OmYH/gkFs/62WeYEoJBIm5QCnfUTvAaDp7uvxePDkrFEYVFiM1mgHAvmFKB0yAi5vMb7bv59ZfdlDc3H50lmca7yOPK8bRe483LjZjJ01FxCJRFgYkfVZLoglwc72EVkHQDmA3N4tunBv+WjMmTAKSjiIa83N7AfN8NIAPIKCXQdrsHjKDKbUzyeOYcncCrQGo2hrC2HgADcCxcWQvD4cOn0Bf5w5j6gqs3CgHOC0j8g6gLcen8WWQVKAlC4JBBDpCKMtEsHVpjYW2+QZdecuQZBVSG791968mdPQHu5AJCKjZOAADPYXQdE0qIoIUVKhyjJ7HjUC+e2fZ02r2SPTxjNwa7+qyW4OsK6xyxfXMCC8HT+/0iRy6tQp5wnX1Ggvr3vOdune+OYnwNatzsv6jh3Oz9+5U8O42H8Q9fWo2rYB/7YEMdTvY597as+mBTRJuDsAVL20ylbJ6k3bMwdQYzYQvevOBVBfj8p3Xo1bn7yg+sDR7HtAT4ZAxgAqJr7IYj4UbkSBtxQlg2aa3PfqjSPxMRowjre1X8bhh0MJ+fp6YN48wO3G699/jNGlRTjf2MrGX1u6Wpe7eNEcHmVlQEFBoi/21xvCYb3v5El7eZIjGet4RYVZvrLS0SMEAkDKU0sXAN3z0wNngEb9fpSWApMm6d9DIQYhrvzAgXr/0aMJebpesADgShunzgEcOJDopeeTgjRG9zQ16UCN779VAKS81cJ07eQBDMD035MnSD00yVAIoH+Q/f6Ekvv2mS20aJH52gqBLGwFbARmBMoBGZ/RVQ+4ZQCjfwAKC/VX3rwJLFuWeD1ZiACUlCT6du+2l796VZcjcC0tie9WABQy3Jt6ygOYR8dyREG+7im8HZ59XlecN8oBzJViSnPF6JPawYNmixMwq9IcAIDqb7bE5VtCEYydOMV0/9+n/oK/wBPvC4wcbxpf/sZHXcsBRg+g5EZtQP6IeAjQNckkAZh8PPFC8oQZ+nbZ1pqkWG1tAhjJUwhwOEYPiIWNHYBrrUEEinzsNdcunQWB4RC6BYARYZdyAPcADsBofR7/3MocAA8bAsDHuKwByNtfboorxz2AA6BPNDckAWD9tL0v8qFLHmBUOJ1lkO5LWgWGDTO7vxVAQ4N5FeBJkJROAYApZXBxKwC7EOkWAE6AkgAYlyGjUvQQujYCsMva5gwB7gHcze0A8FtuCcD8+fPZRqilUd8A2XkA9ftLj7DxqVOnmqb4QSCgW5SUoUYewJvR+rR02QEwylPoWPJB9Y8fsqfZAeA5wDghAmQMkar3vnBOghwAf4hVwbq6OpPC1vFDv9LfZfoukj5HDV1isSHAdozry+MAyj+vZzJ848WT7uFXyvQlEMD925pZEn50/HZbAFxJvgoYAWUNgJ0HcRoMwppiVLx72nlrvaYYD342IA6RA4h3FA9jyY0nupaGC0nLYFoAksx1h3Wk9dMxF9n0A8hFq6ajU78HpEMrF2X7PSAXrZqOTv0ekA6tXJTt94BctGo6OvV7QDq0clG23wNy0arp6NTtHpBxed1S/8+0+JkKRu8DYKn/V65ekVH5u+8BMHoAgEwPQPRtAN1wBOa2A0j3fAGV1ujfXt5YXcHYqLzOa/9UXbaeJ0iz/N1rANBE7M4fJBVWePWXnwGwniewltNTlL97BQCaRGcnUBwrS/wESAYHIPoegG6u//cIAG5dellnpbXOzhesnL43PsfbUf/vMQDGGLeeLzCGgPV8AQdgrf1ZS19ckXTr/z0CwCnG6XyB07i19gdD6YtKYMYTIMbzAfTMrtT/ew0APhFriCwcXs1qe/FTHjEAXJ5OgPB2K+XvHgPQmYLcA1IBiE/UBgCH0ysBZHq+YErbCZORrDFuPQNkDZFUJ0Buuwdker6AAFgt7HQIKicBGGPcP2wUu4yfAWhuMBvRkiQz9YD/AYzxiYwCZbgGAAAAAElFTkSuQmCC";Ul(null);const Vqe=K3(),Kw=Ul(null),Gqe={watch:{},methods:{async downloadSkin(){Pde(Lde(kde,`skins/${Vqe.currentUser.uid}`)).then(i=>{Kw.value=i,this.draw(i)})},draw(i){let e=document.getElementById("head"),t=e.getContext("2d"),n=new Image;i?n.src=Kw.value:n.src=Uqe,console.log("DRAW",Kw.value),n.onload=()=>{let s=n.naturalWidth/64*8;e.width=s,e.height=s,t.drawImage(n,s,s,s,s,0,0,s,s),t.drawImage(n,s*5,s,s,s,0,0,s,s)}}},mounted(){this.draw(),this.downloadSkin()}},jqe={id:"head",class:"rounded"};function Hqe(i,e,t,n,r,s){return ur(),wr("canvas",jqe)}const Ete=zx(Gqe,[["render",Hqe]]);const Wqe={class:"flex h-full container mx-auto"},$qe={class:"flex-1 my-4 ml-3 z-30 hover:scale-105 transition ease-in-out sm:text-3xl text-2xl sm:py-0 py-1 animate-text bg-gradient-to-r from-teal-500 via-purple-500 to-orange-500 bg-clip-text text-transparent font-black"},qqe={class:"list pt-16 sm:py-2 text-gray-400 lg:block sm:hidden text-3xl sm:text-base"},Xqe={class:"flex sm:flex-row flex-col"},Yqe={class:""},Zqe={class:"flex p-2 rounded bg-gray-200/10 dropdawn"},Qqe={class:"ml-2 my-auto text-base"},Kqe=Be("span",{class:"material-symbols-outlined my-auto"}," expand_more ",-1),Jqe={class:"dropdawn-inner sm:absolute static rounded w-32 mt-1 bg-gray-200/10 px-3 py-1"},eXe={class:"mt-1"},tXe={key:0,class:"flex pt-3 sm:pt-0 sm:text-base text-xl"},iXe=Be("a",null,"Войти",-1),nXe={key:1,class:"flex sm:p-0 pt-2"},rXe={data(){return{path:"/",openMenu:!1,dropdawm:!1}},watch:{$route(){this.path=this.$route.path,this.openMenu&&(this.openMenu=!1)},openMenu(){this.openMenu?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")}},methods:{routeToMain(){this.$route.push("/")},handelMenuButton(){this.openMenu=!this.openMenu},bounce(){let i=0;const e=200,t="-translate-y-16",n=document.querySelector(".header"),r=()=>window.pageYOffset||document.documentElement.scrollTop,s=()=>n.classList.contains(t);window.addEventListener("scroll",()=>{r()>i&&!s()&&r()>e?n.classList.add(t):r()<i&&s()&&n.classList.remove(t),i=r()}),window.addEventListener("resize",()=>{window.innerWidth>=640&&(this.openMenu=!1)})}},mounted(){},components:{HamburgerManuVue:K$,HeadDrawVue:Ete}},sXe=Object.assign(rXe,{__name:"HeaderVue",setup(i){const e=Ul(!1),t=Ul(),n=Ul(),r=K3();DG(()=>{e.value===!0&&bhe(Kue(zde,"users"),o=>{o.forEach(a=>{a.data().uid===r.currentUser.uid&&(n.value=a.data().nickname)})})}),cm(async()=>{vC(r,o=>{o?e.value=!0:e.value=!1,o?(t.value=o.email)&&console.log(o):console.log("not logged in")}),console.log(e.value)});const s=()=>{Mfe(r).then(()=>{xL.push("/")})};return(o,a)=>{const l=oE("router-link");return ur(),wr("div",{class:Ll([{"backdrop-blur-xl-before":!o.openMenu},"header fixed w-full bg-zinc-900/25 rounded-b-2xl z-20 h-16"])},[Be("div",Wqe,[Be("div",$qe,[Gt(l,{to:"/"},{default:So(()=>[vs("PixselCraft")]),_:1})]),Be("div",{class:Ll([{hidden:!o.openMenu,"backdrop-blur-xl":o.openMenu},"sm:flex ease-linear px-7 sm:px-0 -z-10 sm:z-50 sm:my-3 my-0 mr-3 sm:pt-0 sm:flex-row flex-col absolute sm:static sm:h-fit sm:w-fit h-screen w-screen"])},[Be("div",qqe,[Be("ul",Xqe,[Be("li",{class:Ll([{"text-gray-300":o.path==="/"},"py-0 lg:px-9 sm:px-3 px-1 hover:text-gray-300"])},[Gt(l,{to:"/"},{default:So(()=>[vs("Главная")]),_:1})],2),Be("li",{class:Ll([{"text-gray-300":o.path==="/about"},"lg:px-9 sm:px-3 px-1 sm:my-0 my-0.5 hover:text-gray-300"])},[Gt(l,{to:"/about"},{default:So(()=>[vs("О нас")]),_:1})],2),Be("li",{class:Ll([{"text-gray-300":o.path==="/play"},"lg:px-9 sm:px-3 px-1 hover:text-gray-300"])},[Gt(l,{to:"/play"},{default:So(()=>[vs("Начать играть")]),_:1})],2)])]),V5(Be("div",{onClick:a[0]||(a[0]=c=>o.dropdawm=!o.dropdawm),class:"m-auto sm:text-base text-xl mx-1 sm:mx-3 text-white"},[Be("div",Yqe,[Be("div",Zqe,[Gt(Ete,{class:"h-6"}),Be("p",Qqe,wa(n.value?n.value:t.value),1),Kqe]),Gt(hE,{name:"dropdawn-inner-animate"},{default:So(()=>[V5(Be("div",Jqe,[Be("ul",eXe,[Be("li",null,[Gt(l,{to:"/profile"},{default:So(()=>[vs("профиль")]),_:1})])])],512),[[j5,o.dropdawm]])]),_:1})])],512),[[j5,e.value]]),e.value?(ur(),wr("div",nXe,[Be("a",{onClick:s,class:"btn text-cyan-500 bg-cyan-900/30 hover:bg-cyan-900/50 hover:scale-110 ease-out transition p-2 px-5 mx-1 rounded-xl"}," Выйти ")])):(ur(),wr("div",tXe,[Gt(l,{class:"btn text-white bg-cyan-500/30 hover:bg-cyan-500/50 hover:scale-110 ease-out transition p-2 px-5 mx-1 rounded-xl",to:"/login"},{default:So(()=>[iXe]),_:1}),Gt(l,{to:"/login?q=register",class:"btn text-cyan-500 bg-cyan-900/30 hover:bg-cyan-900/50 hover:scale-110 ease-out transition p-2 px-5 mx-1 rounded-xl"},{default:So(()=>[vs(" Регистрация ")]),_:1})]))],2),Be("div",{onClick:a[1]||(a[1]=(...c)=>o.handelMenuButton&&o.handelMenuButton(...c)),class:"block z-30 my-3 mr-3 sm:hidden btn animate-text bg-gradient-to-r from-teal-500 via-purple-500 to-orange-500 hover:scale-110 ease-out transition rounded-xl"},[Gt(K$,{class:Ll([{active:o.openMenu},"h-8 px-3 my-1"])},null,8,["class"])])])],2)}}}),oXe={data(){return{year:new Date().getFullYear()}}},aXe={class:"bg-zinc-900 text-white max-w-screen z-10 sticky"},lXe={class:"py-3 mx-5 text-center"},cXe=Be("h1",null,[Be("h1",null,[Be("span",{class:"font-bold text-xl animate-text bg-gradient-to-r from-teal-500 via-purple-500 to-orange-500 bg-clip-text text-transparent"},"PixselCraft"),vs(" - Игровой проект нового поколения ")])],-1),uXe={class:"text-sm text-gray-500 mx-6"},hXe={class:""},dXe=Be("a",{class:"hover:underline",href:""},"Разработка и поддержка r3gmvn",-1);function fXe(i,e,t,n,r,s){return ur(),wr("div",aXe,[Be("div",lXe,[cXe,Be("div",uXe,[Be("p",hXe,[dXe,vs(" 2015-"+wa(r.year),1)])])])])}const pXe=zx(oXe,[["render",fXe]]),mXe={class:"page min-h-screen"},gXe={__name:"App",setup(i){return(e,t)=>(ur(),wr(is,null,[Gt(sXe),Be("div",mXe,[Gt(yu(uj)),Gt(pXe)])],64))}};class vXe{static init(){const e=[1,0,0,2e-5,1,0,0,503905e-9,1,0,0,.00201562,1,0,0,.00453516,1,0,0,.00806253,1,0,0,.0125978,1,0,0,.018141,1,0,0,.0246924,1,0,0,.0322525,1,0,0,.0408213,1,0,0,.0503999,1,0,0,.0609894,1,0,0,.0725906,1,0,0,.0852058,1,0,0,.0988363,1,0,0,.113484,1,0,0,.129153,1,0,0,.145839,1,0,0,.163548,1,0,0,.182266,1,0,0,.201942,1,0,0,.222314,1,0,0,.241906,1,0,0,.262314,1,0,0,.285754,1,0,0,.310159,1,0,0,.335426,1,0,0,.361341,1,0,0,.387445,1,0,0,.412784,1,0,0,.438197,1,0,0,.466966,1,0,0,.49559,1,0,0,.523448,1,0,0,.549938,1,0,0,.57979,1,0,0,.608746,1,0,0,.636185,1,0,0,.664748,1,0,0,.69313,1,0,0,.71966,1,0,0,.747662,1,0,0,.774023,1,0,0,.799775,1,0,0,.825274,1,0,0,.849156,1,0,0,.873248,1,0,0,.89532,1,0,0,.917565,1,0,0,.937863,1,0,0,.958139,1,0,0,.976563,1,0,0,.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,.999547,-448815e-12,.0224417,199902e-10,.999495,-113079e-10,.0224406,503651e-9,.999496,-452317e-10,.0224406,.00201461,.999496,-101772e-9,.0224406,.00453287,.999495,-180928e-9,.0224406,.00805845,.999497,-282702e-9,.0224406,.0125914,.999496,-407096e-9,.0224406,.0181319,.999498,-554114e-9,.0224406,.02468,.999499,-723768e-9,.0224406,.0322363,.999495,-916058e-9,.0224405,.0408009,.999499,-.00113101,.0224408,.050375,.999494,-.00136863,.0224405,.0609586,.999489,-.00162896,.0224401,.0725537,.999489,-.00191201,.0224414,.0851619,.999498,-.00221787,.0224413,.0987867,.999492,-.00254642,.0224409,.113426,.999507,-.00289779,.0224417,.129088,.999494,-.0032716,.0224386,.145767,.999546,-.0036673,.0224424,.163472,.999543,-.00408166,.0224387,.182182,.999499,-.00450056,.0224338,.201843,.999503,-.00483661,.0224203,.222198,.999546,-.00452928,.022315,.241714,.999508,-.00587403,.0224329,.262184,.999509,-.00638806,.0224271,.285609,.999501,-.00691028,.0224166,.309998,.999539,-.00741979,.0223989,.335262,.999454,-.00786282,.0223675,.361154,.999529,-.00811928,.0222828,.387224,.999503,-.00799941,.0221063,.41252,.999561,-.00952753,.0223057,.438006,.999557,-.0099134,.0222065,.466735,.999541,-.0100935,.0220402,.495332,.999562,-.00996821,.0218067,.523197,.999556,-.0105031,.0217096,.550223,.999561,-.0114191,.0217215,.579498,.999588,-.0111818,.0213357,.608416,.999633,-.0107725,.0208689,.635965,.999527,-.0121671,.0210149,.664476,.999508,-.0116005,.020431,.692786,.999568,-.0115604,.0199791,.719709,.999671,-.0121117,.0197415,.74737,.999688,-.0110769,.0188846,.773692,.99962,-.0122368,.0188452,.799534,.999823,-.0110325,.0178001,.825046,.999599,-.0114923,.0174221,.849075,.999619,-.0105923,.0164345,.872999,.999613,-.0105988,.0158227,.895371,.99964,-.00979861,.0148131,.917364,.99977,-.00967238,.0140721,.938002,.999726,-.00869175,.0129543,.957917,.99973,-.00866872,.0122329,.976557,.999773,-.00731956,.0108958,.994459,.999811,-.00756027,.0102715,1.01118,.999862,-.00583732,.00878781,1.02701,.999835,-.00631438,.00827529,1.04186,.999871,-.00450785,.00674583,1.05569,.999867,-.00486079,.00621041,1.06861,.999939,-.00322072,.00478301,1.08064,.999918,-.00318199,.00406395,1.09181,1.00003,-.00193348,.00280682,1.10207,.999928,-.00153729,.00198741,1.11152,.999933,-623666e-9,917714e-9,1.12009,1,-102387e-11,907581e-12,1.12813,.997866,-896716e-12,.0448334,199584e-10,.997987,-225945e-10,.0448389,502891e-9,.997987,-903781e-10,.0448388,.00201156,.997985,-203351e-9,.0448388,.00452602,.997986,-361514e-9,.0448388,.00804629,.997987,-56487e-8,.0448389,.0125724,.997988,-813423e-9,.0448389,.0181045,.997984,-.00110718,.0448387,.0246427,.997985,-.00144616,.0448388,.0321875,.997987,-.00183038,.044839,.0407392,.997983,-.00225987,.0448387,.0502986,.997991,-.00273467,.0448389,.0608667,.997984,-.00325481,.0448384,.0724444,.998002,-.00382043,.044839,.0850348,.997997,-.00443145,.0448396,.0986372,.998007,-.00508796,.0448397,.113255,.998008,-.00578985,.04484,.128891,.998003,-.00653683,.0448384,.145548,.997983,-.00732713,.0448358,.163221,.997985,-.00815454,.0448358,.181899,.998005,-.00898985,.0448286,.201533,.998026,-.00964404,.0447934,.221821,.998055,-.00922677,.044611,.241282,.99804,-.0117361,.0448245,.261791,.998048,-.0127628,.0448159,.285181,.998088,-.0138055,.0447996,.30954,.998058,-.0148206,.0447669,.334751,.998099,-.0156998,.044697,.36061,.998116,-.0161976,.0445122,.386603,.998195,-.015945,.0441711,.411844,.998168,-.0183947,.0444255,.43773,.998184,-.0197913,.0443809,.466009,.998251,-.0201426,.0440689,.494574,.998305,-.0198847,.0435632,.522405,.998273,-.0210577,.043414,.549967,.998254,-.0227901,.0433943,.578655,.998349,-.0223108,.0426529,.60758,.99843,-.0223088,.042,.635524,.998373,-.0241141,.0418987,.663621,.998425,-.0231446,.0408118,.691906,.998504,-.0233684,.0400565,.719339,.998443,-.0241652,.0394634,.74643,.99848,-.0228715,.0380002,.773086,.998569,-.023519,.0372322,.798988,.998619,-.0223108,.0356468,.824249,.998594,-.0223105,.034523,.848808,.998622,-.0213426,.0328887,.87227,.998669,-.0207912,.0314374,.895157,.998705,-.0198416,.0296925,.916769,.998786,-.0189168,.0279634,.937773,.998888,-.0178811,.0261597,.957431,.99906,-.0166845,.0242159,.976495,.999038,-.0155464,.0222638,.994169,.999237,-.0141349,.0201967,1.01112,.999378,-.0129324,.0181744,1.02692,.999433,-.0113192,.0159898,1.04174,.999439,-.0101244,.0140385,1.05559,.999614,-.00837456,.0117826,1.06852,.999722,-.00721769,.00983745,1.08069,.999817,-.00554067,.00769002,1.09176,.99983,-.00426961,.005782,1.10211,.999964,-.00273904,.00374503,1.11152,1.00001,-.00136739,.00187176,1.12031,.999946,393227e-10,-28919e-9,1.12804,.995847,-13435e-10,.0671785,19916e-9,.995464,-338387e-10,.0671527,501622e-9,.99547,-135355e-9,.0671531,.00200649,.995471,-30455e-8,.0671532,.00451461,.99547,-541423e-9,.0671531,.008026,.995471,-84598e-8,.0671531,.0125407,.99547,-.00121823,.0671531,.0180589,.99547,-.00165817,.0671531,.0245806,.995463,-.00216583,.0671526,.0321062,.995468,-.00274127,.0671527,.0406366,.995474,-.00338447,.0671534,.0501717,.995473,-.00409554,.0671533,.0607131,.995478,-.00487451,.0671531,.0722618,.995476,-.00572148,.0671532,.0848191,.995477,-.00663658,.0671539,.0983882,.995498,-.00761986,.0671541,.112972,.995509,-.00867094,.0671542,.128568,.995509,-.00978951,.0671531,.145183,.995503,-.0109725,.0671491,.162808,.995501,-.012211,.0671465,.181441,.99553,-.0134565,.0671371,.201015,.99555,-.014391,.0670831,.221206,.99558,-.014351,.0668883,.240813,.995577,-.0173997,.0671055,.261257,.995602,-.0191111,.0671178,.284467,.995623,-.0206705,.0670946,.308765,.995658,-.022184,.0670472,.333905,.995705,-.0234832,.0669417,.359677,.995719,-.0241933,.0666714,.385554,.995786,-.0243539,.066266,.410951,.995887,-.0271866,.0664367,.437163,.995944,-.0296012,.0664931,.464842,.996004,-.0301045,.0660105,.49332,.996128,-.0298311,.0652694,.521131,.996253,-.0316426,.0650739,.549167,.996244,-.0339043,.0649433,.57737,.996309,-.033329,.0638926,.606073,.996417,-.0338935,.0630849,.634527,.996372,-.0353104,.0625083,.66256,.996542,-.0348942,.0611986,.690516,.996568,-.0351614,.060069,.718317,.996711,-.0354317,.0588522,.74528,.996671,-.0349513,.0571902,.772061,.996865,-.0345622,.0555321,.798089,.996802,-.0342566,.0537816,.823178,.996992,-.0330862,.0516095,.847949,.996944,-.0324666,.0495537,.871431,.997146,-.0309544,.0470302,.894357,.997189,-.0299372,.0446043,.916142,.997471,-.0281389,.0418812,.937193,.997515,-.0268702,.0391823,.957,.997812,-.0247166,.0361338,.975936,.998027,-.0233525,.0333945,.99391,.998233,-.0209839,.0301917,1.01075,.998481,-.0194309,.027271,1.02669,.998859,-.0169728,.0240162,1.04173,.99894,-.0152322,.0210517,1.05551,.999132,-.0127497,.0178632,1.06856,.999369,-.0108282,.014787,1.08054,.999549,-.00845886,.0116185,1.09185,.999805,-.0063937,.00867209,1.10207,.99985,-.00414582,.00566823,1.1117,.999912,-.00207443,.00277562,1.12022,1.00001,870226e-10,-53766e-9,1.12832,.991943,-178672e-11,.0893382,198384e-10,.991952,-450183e-10,.089339,499849e-9,.991956,-180074e-9,.0893394,.0019994,.991955,-405167e-9,.0893393,.00449867,.991953,-720298e-9,.0893391,.00799764,.991955,-.00112548,.0893393,.0124964,.991957,-.0016207,.0893395,.0179951,.991958,-.00220601,.0893396,.0244939,.991947,-.00288137,.0893385,.0319929,.991962,-.00364693,.0893399,.0404933,.991965,-.00450264,.0893399,.049995,.99198,-.00544862,.0893411,.0604995,.99197,-.00648491,.0893397,.0720074,.991976,-.00761164,.089341,.0845207,.99198,-.00882891,.0893405,.0980413,.991982,-.0101367,.0893396,.112571,.992008,-.011535,.0893415,.128115,.992026,-.0130228,.0893414,.144672,.992064,-.0145966,.0893418,.162241,.992041,-.0162421,.0893359,.180801,.992086,-.0178888,.0893214,.200302,.992157,-.0190368,.0892401,.220332,.992181,-.0195584,.0890525,.240144,.992175,-.0227257,.0892153,.260728,.99221,-.0254195,.089304,.283473,.99222,-.0274883,.0892703,.307673,.992317,-.0294905,.0892027,.332729,.992374,-.0311861,.0890577,.358387,.992505,-.0320656,.0886994,.384102,.992568,-.0329715,.0883198,.409767,.992675,-.036006,.0883602,.436145,.992746,-.0392897,.0884591,.463217,.992873,-.0399337,.0878287,.491557,.992934,-.040231,.0870108,.519516,.993091,-.0422013,.0865857,.547741,.993259,-.0443503,.0861937,.575792,.993455,-.0446368,.0851187,.604233,.993497,-.0454299,.0840576,.632925,.993694,-.0463296,.0829671,.660985,.993718,-.0470619,.0817185,.688714,.993973,-.0468838,.0800294,.716743,.994207,-.046705,.0781286,.74377,.994168,-.0469698,.0763337,.77042,.9945,-.0456816,.0738184,.796659,.994356,-.0455518,.0715545,.821868,.994747,-.0439488,.0686085,.846572,.994937,-.0430056,.065869,.870435,.995142,-.0413414,.0626446,.893272,.995451,-.0396521,.05929,.915376,.995445,-.0378453,.0558503,.936196,.995967,-.0355219,.0520949,.956376,.996094,-.0335146,.048377,.975327,.996622,-.030682,.0442575,.993471,.996938,-.0285504,.0404693,1.01052,.997383,-.0253399,.0360903,1.02637,.997714,-.0231651,.0322176,1.04139,.998249,-.0198138,.0278433,1.05542,.998596,-.0174337,.0238759,1.06846,.998946,-.0141349,.0195944,1.08056,.99928,-.0115603,.0156279,1.09181,.999507,-.00839065,.0114607,1.10213,.999697,-.005666,.00763325,1.11169,.999869,-.00269902,.00364946,1.12042,1.00001,623836e-10,-319288e-10,1.12832,.987221,-222675e-11,.111332,197456e-10,.98739,-561116e-10,.111351,497563e-9,.987448,-224453e-9,.111357,.00199031,.987441,-505019e-9,.111357,.0044782,.987442,-897816e-9,.111357,.00796129,.987442,-.00140284,.111357,.0124396,.987444,-.00202012,.111357,.0179132,.987442,-.00274964,.111357,.0243824,.987446,-.00359147,.111357,.0318474,.987435,-.00454562,.111356,.0403086,.987461,-.00561225,.111358,.0497678,.987458,-.00679125,.111358,.0602239,.987443,-.0080828,.111356,.0716792,.987476,-.0094872,.111358,.0841364,.98749,-.0110044,.111361,.097597,.987508,-.0126344,.111362,.112062,.987494,-.0143767,.111357,.127533,.987526,-.0162307,.111359,.144015,.987558,-.0181912,.111361,.161502,.987602,-.0202393,.111355,.179979,.987692,-.022273,.111346,.199386,.987702,-.0235306,.111215,.219183,.987789,-.0247628,.111061,.239202,.987776,-.0280668,.111171,.259957,.987856,-.0316751,.111327,.282198,.987912,-.0342468,.111282,.306294,.988,-.0367205,.111198,.331219,.988055,-.0387766,.110994,.356708,.988241,-.0397722,.110547,.382234,.988399,-.0416076,.110198,.408227,.988539,-.0448192,.110137,.434662,.988661,-.0483793,.110143,.461442,.988967,-.0495895,.109453,.489318,.989073,-.0506797,.108628,.517516,.989274,-.0526953,.108003,.545844,.989528,-.054578,.107255,.573823,.989709,-.0561503,.106294,.601944,.989991,-.056866,.104896,.630855,.990392,-.0572914,.103336,.658925,.990374,-.0586224,.10189,.686661,.990747,-.0584764,.099783,.714548,.991041,-.0582662,.0974309,.74186,.991236,-.0584118,.0951678,.768422,.991585,-.0573055,.0921581,.794817,.991984,-.0564241,.0891167,.820336,.9921,-.0553608,.085805,.84493,.992749,-.0533816,.0820354,.868961,.99288,-.0518661,.0782181,.891931,.993511,-.0492492,.0738935,.914186,.993617,-.0471956,.0696402,.93532,.99411,-.044216,.0649659,.95543,.994595,-.0416654,.0603177,.974685,.994976,-.0384314,.0553493,.992807,.995579,-.0353491,.0503942,1.00996,.996069,-.0319787,.0452123,1.02606,.996718,-.028472,.0400112,1.04114,.997173,-.0250789,.0349456,1.05517,.997818,-.0213326,.029653,1.0683,.998318,-.0178509,.024549,1.0805,.998853,-.0141118,.0194197,1.09177,.999218,-.0105914,.0143869,1.1022,.999594,-.00693474,.00943517,1.11175,.99975,-.00340478,.00464051,1.12056,1.00001,109172e-9,-112821e-9,1.12853,.983383,-266524e-11,.133358,196534e-10,.981942,-671009e-10,.133162,494804e-9,.981946,-268405e-9,.133163,.00197923,.981944,-603912e-9,.133163,.00445326,.981941,-.00107362,.133162,.00791693,.981946,-.00167755,.133163,.0123703,.981944,-.00241569,.133162,.0178135,.981945,-.00328807,.133163,.0242466,.981945,-.00429472,.133162,.03167,.981955,-.00543573,.133164,.0400846,.981951,-.00671105,.133163,.0494901,.981968,-.00812092,.133165,.0598886,.981979,-.00966541,.133166,.0712811,.981996,-.0113446,.133168,.083669,.982014,-.0131585,.133169,.0970533,.982011,-.0151073,.133167,.111438,.982062,-.0171906,.133172,.126826,.9821,-.0194067,.133175,.143215,.982149,-.0217502,.133176,.160609,.982163,-.0241945,.133173,.178981,.982247,-.0265907,.133148,.198249,.982291,-.027916,.132974,.217795,.982396,-.0299663,.132868,.238042,.982456,-.0334544,.132934,.258901,.982499,-.0378636,.133137,.280639,.982617,-.0409274,.133085,.304604,.98274,-.0438523,.132985,.329376,.982944,-.0462288,.132728,.354697,.98308,-.0475995,.132228,.380102,.983391,-.0501901,.131924,.406256,.983514,-.0535899,.131737,.432735,.98373,-.0571858,.131567,.459359,.984056,-.0592353,.130932,.486637,.984234,-.0610488,.130092,.51509,.984748,-.0630758,.12923,.543461,.985073,-.0647398,.128174,.571376,.985195,-.0671941,.127133,.599414,.985734,-.0681345,.125576,.628134,.986241,-.0686089,.123639,.656399,.986356,-.0698511,.121834,.684258,.986894,-.0700931,.119454,.711818,.987382,-.0698321,.116718,.739511,.988109,-.0693975,.113699,.766267,.988363,-.0689584,.110454,.792456,.989112,-.0672353,.106602,.81813,.989241,-.0662034,.10267,.842889,.990333,-.0638938,.0981381,.867204,.990591,-.0618534,.0935388,.89038,.991106,-.0593117,.088553,.912576,.991919,-.0562676,.0832187,.934118,.992111,-.0534085,.0778302,.954254,.992997,-.0495459,.0720453,.973722,.993317,-.0463707,.0663458,.991949,.994133,-.0421245,.0601883,1.00936,.994705,-.0384977,.0542501,1.02559,.995495,-.0340956,.0479862,1.04083,.996206,-.030105,.041887,1.05497,.996971,-.0256095,.0355355,1.06824,.997796,-.0213932,.0293655,1.08056,.998272,-.0169612,.0232926,1.09182,.998857,-.0126756,.0172786,1.10219,.99939,-.00832486,.0113156,1.11192,.999752,-.00410826,.00557892,1.12075,1,150957e-9,-119101e-9,1.12885,.975169,-309397e-11,.154669,195073e-10,.975439,-779608e-10,.154712,491534e-9,.975464,-311847e-9,.154716,.00196617,.975464,-701656e-9,.154716,.00442387,.975462,-.0012474,.154715,.0078647,.975461,-.00194906,.154715,.0122886,.975464,-.00280667,.154715,.0176959,.975468,-.00382025,.154716,.0240867,.975471,-.00498985,.154716,.0314612,.975472,-.00631541,.154717,.0398199,.975486,-.00779719,.154718,.0491639,.975489,-.00943505,.154718,.0594932,.975509,-.0112295,.154721,.0708113,.97554,-.0131802,.154724,.0831176,.975557,-.0152876,.154726,.096415,.975585,-.0175512,.154728,.110705,.975605,-.0199713,.154729,.125992,.975645,-.0225447,.154729,.142272,.975711,-.0252649,.154735,.159549,.975788,-.0280986,.154736,.177805,.975872,-.0308232,.154704,.196911,.975968,-.0324841,.154525,.216324,.976063,-.0351281,.154432,.236628,.976157,-.0388618,.15446,.257539,.976204,-.0437704,.154665,.278975,.976358,-.047514,.154652,.302606,.976571,-.0508638,.154535,.327204,.976725,-.0534995,.154221,.352276,.977013,-.0555547,.153737,.377696,.977294,-.0586728,.153403,.403855,.977602,-.0622715,.15312,.430333,.977932,-.0658166,.152755,.456855,.978241,-.0689877,.152233,.483668,.978602,-.0712805,.15132,.512097,.979234,-.0732775,.150235,.540455,.97977,-.075163,.148978,.568486,.979995,-.0778026,.147755,.596524,.98078,-.0791854,.146019,.624825,.981628,-.0799666,.143906,.653403,.982067,-.0808532,.141561,.681445,.98271,-.0816024,.139025,.708918,.983734,-.0812511,.135764,.736594,.98431,-.0806201,.132152,.763576,.985071,-.0801605,.12846,.789797,.98618,-.0784208,.124084,.815804,.986886,-.0766643,.1193,.840869,.987485,-.0747744,.114236,.864952,.988431,-.0716701,.108654,.888431,.988886,-.0691609,.102994,.910963,.990024,-.0654048,.0967278,.932629,.990401,-.0619765,.090384,.95313,.991093,-.0579296,.0837885,.972587,.992018,-.0536576,.0770171,.991184,.992536,-.0493719,.0701486,1.00863,.993421,-.0444813,.062953,1.02494,.993928,-.040008,.0560455,1.04017,.994994,-.0347982,.04856,1.05463,.995866,-.0301017,.0416152,1.06807,.996916,-.0248225,.0342597,1.08039,.997766,-.0199229,.0271668,1.09177,.998479,-.0147422,.0201387,1.10235,.99921,-.00980173,.0131944,1.11206,.999652,-.0047426,.00640712,1.12104,.999998,891673e-10,-10379e-8,1.12906,.967868,-351885e-11,.175947,193569e-10,.968001,-886733e-10,.175972,487782e-9,.96801,-354697e-9,.175973,.00195115,.968012,-798063e-9,.175974,.00439006,.968011,-.00141879,.175973,.00780461,.968011,-.00221686,.175973,.0121948,.968016,-.00319231,.175974,.0175607,.968019,-.00434515,.175974,.0239027,.968018,-.00567538,.175974,.0312208,.968033,-.00718308,.175977,.0395158,.968049,-.00886836,.175979,.0487885,.968047,-.0107312,.175978,.0590394,.968072,-.0127719,.175981,.0702705,.968108,-.0149905,.175986,.0824836,.968112,-.0173866,.175985,.0956783,.968173,-.0199611,.175993,.109862,.96827,-.0227128,.176008,.125033,.968292,-.025639,.17601,.141193,.968339,-.0287299,.176007,.158336,.968389,-.0319399,.176001,.176441,.968501,-.034941,.175962,.195359,.968646,-.0370812,.175793,.214686,.968789,-.0402329,.175708,.234973,.96886,-.0442601,.1757,.255871,.969013,-.049398,.175876,.277238,.969242,-.0539932,.17594,.300326,.969419,-.0577299,.175781,.324702,.969763,-.0605643,.175432,.349527,.970093,-.0634488,.174992,.374976,.970361,-.0670589,.174611,.401097,.970825,-.0708246,.174226,.427496,.971214,-.0742871,.173684,.453858,.971622,-.0782608,.173186,.480637,.972175,-.0813151,.172288,.508655,.972944,-.0832678,.170979,.536973,.973595,-.0855964,.169573,.565138,.974345,-.0882163,.168152,.593222,.975233,-.0901671,.166314,.621201,.976239,-.0912111,.163931,.649919,.977289,-.0916959,.161106,.678011,.978076,-.0927061,.158272,.705717,.979533,-.0925562,.15475,.733228,.980335,-.0918159,.150638,.760454,.981808,-.0908508,.146201,.786918,.983061,-.0896172,.141386,.812953,.984148,-.0871588,.135837,.838281,.985047,-.0850624,.130135,.862594,.986219,-.0818541,.123882,.88633,.987043,-.0784523,.117126,.908952,.988107,-.0749601,.110341,.930744,.988955,-.0703548,.102885,.951728,.989426,-.0662798,.0954167,.971166,.990421,-.0610834,.0876331,.989984,.991032,-.0562936,.0797785,1.00765,.992041,-.0508154,.0718166,1.02434,.992794,-.0454045,.0637125,1.03976,.993691,-.0398194,.0555338,1.05418,.994778,-.0341482,.0473388,1.06772,.995915,-.028428,.0391016,1.08028,.997109,-.022642,.0309953,1.09185,.998095,-.0168738,.0230288,1.10247,.998985,-.0111274,.0150722,1.11229,.999581,-.00543881,.00740605,1.12131,1.00003,162239e-9,-105549e-9,1.12946,.959505,-393734e-11,.196876,191893e-10,.959599,-992157e-10,.196895,483544e-9,.959641,-396868e-9,.196903,.0019342,.959599,-892948e-9,.196895,.00435193,.959603,-.00158747,.196896,.0077368,.959604,-.00248042,.196896,.0120888,.959605,-.00357184,.196896,.0174082,.959605,-.00486169,.196896,.0236949,.959613,-.00635008,.196897,.0309497,.959619,-.00803696,.196898,.0391725,.959636,-.00992255,.196901,.0483649,.959634,-.0120067,.1969,.0585266,.959675,-.0142898,.196906,.0696609,.959712,-.0167717,.196911,.0817678,.959752,-.0194524,.196918,.0948494,.959807,-.0223321,.196925,.10891,.959828,-.0254091,.196924,.123947,.959906,-.0286815,.196934,.139968,.960005,-.0321371,.196944,.156968,.960071,-.0357114,.196936,.17491,.960237,-.0389064,.196882,.193597,.960367,-.041623,.196731,.21285,.960562,-.0452655,.196654,.233075,.960735,-.0496207,.196643,.253941,.960913,-.0549379,.196774,.275278,.961121,-.0603414,.196893,.297733,.96139,-.0644244,.196717,.321877,.961818,-.067556,.196314,.346476,.962175,-.0712709,.195917,.371907,.96255,-.0752848,.1955,.397916,.963164,-.0792073,.195026,.424229,.963782,-.0828225,.194424,.450637,.964306,-.0873119,.193831,.477288,.964923,-.0911051,.192973,.504716,.966048,-.093251,.19151,.533053,.967024,-.0958983,.190013,.561366,.968038,-.09835,.188253,.589464,.969152,-.100754,.186257,.617433,.970557,-.102239,.183775,.645801,.972104,-.102767,.180645,.674278,.973203,-.103492,.177242,.702004,.975123,-.103793,.17345,.729529,.97641,-.102839,.168886,.756712,.978313,-.101687,.163892,.783801,.980036,-.100314,.158439,.809671,.981339,-.097836,.152211,.835402,.982794,-.0950006,.145679,.860081,.984123,-.0920994,.138949,.883757,.984918,-.0878641,.131283,.90685,.985999,-.083939,.123464,.928786,.987151,-.0791234,.115324,.94983,.987827,-.0739332,.106854,.96962,.988806,-.0688088,.0982691,.98861,.989588,-.0628962,.0893456,1.00667,.990438,-.0573146,.0805392,1.02344,.991506,-.0509433,.0713725,1.03933,.992492,-.0448724,.0623732,1.05378,.993663,-.0383497,.0530838,1.06747,.994956,-.0319593,.0439512,1.08007,.99634,-.025401,.0347803,1.09182,.99761,-.0189687,.0257954,1.1025,.99863,-.0124441,.0169893,1.11247,.99947,-.00614003,.00829498,1.12151,1.00008,216624e-9,-146107e-9,1.12993,.950129,-434955e-11,.217413,190081e-10,.950264,-10957e-8,.217444,47884e-8,.9503,-438299e-9,.217451,.00191543,.950246,-986124e-9,.21744,.00430951,.950246,-.00175311,.21744,.00766137,.950245,-.00273923,.21744,.011971,.950253,-.00394453,.217441,.0172385,.950258,-.00536897,.217442,.0234641,.950267,-.00701262,.217444,.030648,.950277,-.00887551,.217446,.038791,.950284,-.0109576,.217446,.0478931,.950312,-.0132591,.217451,.0579568,.950334,-.01578,.217454,.0689821,.950378,-.0185204,.217462,.0809714,.950417,-.0214803,.217467,.0939265,.950488,-.0246594,.217479,.10785,.950534,-.0280565,.217483,.122743,.950633,-.0316685,.217498,.138611,.950698,-.0354787,.217499,.155442,.950844,-.0394003,.217507,.173208,.950999,-.0426812,.217419,.191605,.951221,-.0461302,.217317,.21084,.951412,-.0502131,.217238,.230945,.951623,-.0549183,.21722,.251745,.951867,-.0604493,.217306,.273001,.952069,-.0665189,.217466,.294874,.952459,-.0709179,.217266,.318732,.952996,-.0746112,.216891,.34318,.953425,-.0789252,.216503,.36849,.953885,-.0833293,.216042,.394373,.954617,-.087371,.215469,.420505,.955429,-.0914054,.214802,.446907,.956068,-.0961671,.214146,.473522,.957094,-.10048,.213286,.50052,.958372,-.103248,.211796,.528715,.959654,-.106033,.21016,.557065,.961305,-.108384,.208149,.585286,.962785,-.111122,.206024,.613334,.964848,-.112981,.203442,.641334,.966498,-.113717,.19996,.669955,.968678,-.114121,.196105,.698094,.970489,-.114524,.191906,.725643,.972903,-.113792,.186963,.752856,.974701,-.112406,.181343,.780013,.976718,-.110685,.175185,.806268,.978905,-.108468,.168535,.832073,.980267,-.105061,.161106,.857149,.981967,-.101675,.153387,.881145,.983063,-.0974492,.145199,.904255,.984432,-.0925815,.136527,.926686,.985734,-.0877983,.127584,.947901,.986228,-.081884,.118125,.968111,.98719,-.0761208,.108594,.98719,.988228,-.0698196,.0989996,1.00559,.989046,-.0632739,.0890074,1.02246,.990242,-.056522,.0790832,1.03841,.991252,-.0495272,.0689182,1.05347,.992542,-.0425373,.0588592,1.06724,.994096,-.0353198,.0486833,1.08009,.995593,-.028235,.0385977,1.09177,.99711,-.0209511,.0286457,1.10274,.998263,-.0139289,.0188497,1.11262,.999254,-.0067359,.009208,1.12191,.999967,141846e-9,-657764e-10,1.13024,.935608,-474692e-11,.236466,187817e-10,.93996,-11971e-8,.237568,473646e-9,.939959,-478845e-9,.237567,.0018946,.939954,-.0010774,.237566,.00426284,.939956,-.00191538,.237566,.00757842,.939954,-.00299277,.237566,.0118413,.93996,-.00430961,.237567,.0170518,.939969,-.00586589,.237569,.02321,.939982,-.00766166,.237572,.0303164,.939987,-.00969686,.237572,.0383711,.939997,-.0119715,.237574,.0473751,.940031,-.0144858,.237581,.0573298,.940073,-.0172399,.237589,.0682366,.94012,-.0202335,.237598,.080097,.940162,-.0234663,.237604,.0929116,.940237,-.0269387,.237615,.106686,.940328,-.0306489,.237632,.121421,.940419,-.0345917,.237645,.137115,.940522,-.0387481,.237654,.153766,.940702,-.0429906,.237661,.17133,.940871,-.0465089,.237561,.189502,.941103,-.050531,.23748,.208616,.941369,-.0550657,.237423,.228595,.941641,-.0601337,.237399,.249287,.941903,-.0658804,.237443,.270467,.942224,-.0722674,.237597,.292024,.942633,-.0771788,.237419,.315272,.943172,-.0815623,.237068,.339579,.943691,-.0863973,.236682,.364717,.944382,-.0911536,.236213,.390435,.945392,-.0952967,.235562,.416425,.946185,-.0998948,.234832,.442772,.947212,-.104796,.234114,.469347,.948778,-.10928,.233222,.496162,.950149,-.113081,.231845,.523978,.951989,-.115893,.230005,.552295,.953921,-.11846,.227862,.580569,.955624,-.12115,.225439,.608698,.958234,-.123373,.222635,.636696,.960593,-.124519,.219093,.665208,.963201,-.124736,.214749,.693557,.965642,-.125012,.210059,.721334,.968765,-.124661,.204935,.748613,.971753,-.122996,.198661,.776224,.973751,-.120998,.191823,.802461,.976709,-.118583,.184359,.828399,.977956,-.115102,.176437,.853693,.979672,-.111077,.167681,.877962,.981816,-.10688,.158872,.901564,.98238,-.101469,.149398,.924057,.983964,-.0960013,.139436,.945751,.984933,-.0899626,.12943,.966272,.985694,-.0832973,.11894,.985741,.986822,-.0767082,.108349,1.00407,.987725,-.0693614,.0976026,1.02154,.98877,-.06211,.086652,1.03757,.990129,-.0544143,.0756182,1.05296,.991337,-.046744,.0645753,1.06683,.992978,-.0387931,.0534683,1.0798,.994676,-.030973,.0424137,1.09181,.99645,-.0230311,.0314035,1.10286,.997967,-.0152065,.0206869,1.11291,.99922,-.00744837,.010155,1.12237,1.00002,240209e-9,-752767e-10,1.13089,.922948,-515351e-11,.255626,186069e-10,.928785,-129623e-9,.257244,468009e-9,.928761,-51849e-8,.257237,.00187202,.928751,-.0011666,.257235,.00421204,.928751,-.00207395,.257234,.0074881,.928754,-.00324055,.257235,.0117002,.92876,-.00466639,.257236,.0168486,.928763,-.00635149,.257237,.0229334,.928774,-.00829584,.257239,.029955,.928791,-.0104995,.257243,.0379139,.928804,-.0129623,.257245,.0468108,.928847,-.0156846,.257255,.0566473,.92889,-.0186661,.257263,.0674246,.928924,-.0219067,.257268,.0791433,.928989,-.0254066,.257282,.0918076,.92909,-.0291651,.257301,.105419,.92918,-.0331801,.257316,.119978,.92929,-.0374469,.257332,.135491,.929453,-.041939,.257357,.151948,.929586,-.0464612,.257347,.169275,.929858,-.0503426,.257269,.187257,.930125,-.0548409,.257199,.206204,.930403,-.0598063,.257149,.22601,.930726,-.0652437,.257122,.246561,.931098,-.0712376,.257153,.267618,.931396,-.0777506,.257237,.288993,.931947,-.0832374,.257124,.311527,.932579,-.0883955,.25683,.335697,.933194,-.0937037,.256444,.360634,.934013,-.0987292,.255939,.386126,.935307,-.103215,.255282,.412018,.936374,-.108234,.254538,.438292,.93776,-.113234,.253728,.464805,.939599,-.118013,.25275,.491464,.941036,-.122661,.251404,.518751,.94337,-.125477,.249435,.547133,.945318,-.128374,.247113,.575456,.947995,-.130996,.244441,.60372,.950818,-.133438,.241352,.63174,.954378,-.135004,.237849,.659971,.957151,-.135313,.233188,.688478,.960743,-.13521,.228001,.716767,.964352,-.135007,.222249,.744349,.967273,-.133523,.21542,.771786,.969767,-.131155,.208039,.798639,.973195,-.128492,.200076,.824774,.975557,-.125094,.191451,.850222,.977692,-.120578,.18184,.874761,.98026,-.115882,.172102,.898497,.981394,-.110372,.161859,.921636,.982386,-.10415,.15108,.943467,.983783,-.0978128,.140407,.964045,.98422,-.0906171,.129058,.98398,.985447,-.0832921,.117614,1.00276,.986682,-.0754412,.10585,1.02047,.987326,-.0673885,.0940943,1.03678,.988707,-.0592565,.0822093,1.05218,.990185,-.050717,.070192,1.06652,.991866,-.0423486,.0582081,1.07965,.993897,-.0336118,.0460985,1.09188,.995841,-.0252178,.0342737,1.10307,.997605,-.0164893,.0224829,1.11324,.999037,-.00817112,.0110647,1.12262,1.00003,291686e-9,-168673e-9,1.13139,.915304,-552675e-11,.275999,183285e-10,.91668,-139285e-9,.276414,461914e-9,.916664,-55713e-8,.276409,.00184763,.916653,-.00125354,.276406,.00415715,.916651,-.00222851,.276405,.00739053,.916655,-.00348205,.276406,.0115478,.916653,-.00501414,.276405,.0166291,.916667,-.00682478,.276409,.0226346,.91668,-.00891398,.276412,.0295648,.91669,-.0112817,.276413,.0374199,.916727,-.013928,.276422,.0462016,.916759,-.0168528,.276429,.0559101,.916793,-.0200558,.276436,.0665466,.916849,-.0235373,.276448,.0781139,.916964,-.0272973,.276474,.0906156,.917047,-.0313344,.276491,.104051,.917152,-.0356465,.276511,.118424,.917286,-.0402271,.276533,.133736,.917469,-.0450408,.276564,.149978,.917686,-.0497872,.276563,.167057,.917953,-.0540937,.276493,.184846,.918228,-.0590709,.276437,.203614,.918572,-.0644277,.276398,.223212,.918918,-.0702326,.276362,.243584,.919356,-.076484,.276383,.264465,.919842,-.0830808,.276434,.285701,.920451,-.0892972,.276407,.307559,.921113,-.095016,.276128,.331501,.921881,-.100771,.275754,.356207,.923027,-.106029,.275254,.381477,.924364,-.111029,.274595,.40722,.925818,-.116345,.273841,.433385,.92746,-.121424,.272913,.459848,.929167,-.12657,.271837,.486493,.931426,-.131581,.270575,.513432,.934001,-.135038,.268512,.541502,.936296,-.138039,.266135,.569658,.939985,-.140687,.263271,.598375,.943516,-.143247,.260058,.626563,.94782,-.145135,.256138,.654711,.951023,-.145733,.251154,.683285,.955338,-.145554,.245562,.711831,.959629,-.145008,.239265,.739573,.963123,-.144003,.232064,.767027,.966742,-.141289,.224036,.794359,.969991,-.138247,.215305,.820361,.973403,-.134786,.206051,.846548,.975317,-.129966,.195914,.871541,.977647,-.12471,.185184,.895313,.980137,-.119086,.174161,.918398,.981031,-.112297,.162792,.940679,.982037,-.105372,.150952,.961991,.983164,-.097821,.138921,.981913,.983757,-.0897245,.126611,1.00109,.985036,-.0815974,.114228,1.01902,.986289,-.0727725,.101389,1.03604,.987329,-.0639323,.0886476,1.05149,.989193,-.0548109,.0756837,1.06619,.990716,-.045687,.0627581,1.07948,.992769,-.0364315,.0498337,1.09172,.99524,-.0271761,.0370305,1.1033,.997154,-.0179609,.0243959,1.11353,.998845,-.00878063,.0119567,1.12319,1.00002,259038e-9,-108146e-9,1.13177,.903945,-591681e-11,.295126,181226e-10,.903668,-148672e-9,.295037,455367e-9,.903677,-594683e-9,.29504,.00182145,.903673,-.00133805,.295039,.00409831,.903666,-.00237872,.295036,.00728584,.903668,-.00371676,.295037,.0113842,.903679,-.00535212,.29504,.0163936,.903684,-.00728479,.295041,.0223141,.903698,-.00951473,.295044,.0291462,.903718,-.0120419,.295049,.0368904,.903754,-.0148664,.295058,.0455477,.903801,-.017988,.29507,.0551194,.903851,-.0214064,.295082,.0656058,.903921,-.0251219,.295097,.0770109,.904002,-.0291337,.295116,.0893354,.904111,-.033441,.29514,.102583,.904246,-.0380415,.295169,.116755,.904408,-.0429258,.295202,.131853,.904637,-.0480468,.295245,.147869,.904821,-.0529208,.295214,.164658,.905163,-.0577748,.295185,.182274,.905469,-.0631763,.295143,.200828,.905851,-.068917,.295112,.2202,.906322,-.0750861,.295104,.240372,.906761,-.0815855,.295086,.261082,.90735,-.0882138,.295095,.282123,.908087,-.095082,.295139,.303563,.908826,-.101488,.29492,.327028,.909832,-.107577,.294577,.351464,.911393,-.113033,.294115,.376497,.912804,-.118629,.293446,.402115,.914081,-.124232,.292581,.428111,.91637,-.129399,.29166,.454442,.91814,-.134892,.290422,.481024,.921179,-.140069,.289194,.507924,.924544,-.144431,.287421,.535557,.927995,-.147498,.284867,.563984,.931556,-.150197,.281722,.5923,.935777,-.152711,.278207,.620832,.940869,-.154836,.274148,.649069,.945994,-.155912,.269057,.677746,.949634,-.155641,.262799,.706293,.955032,-.154809,.256097,.734278,.95917,-.153678,.248618,.761751,.962931,-.151253,.239794,.789032,.966045,-.147625,.230281,.815422,.96971,-.143964,.220382,.841787,.972747,-.139464,.209846,.867446,.975545,-.133459,.198189,.892004,.978381,-.127424,.186362,.915458,.979935,-.120506,.173964,.937948,.980948,-.11282,.161429,.959732,.982234,-.104941,.148557,.980118,.982767,-.0962905,.135508,.999463,.983544,-.0873625,.122338,1.01756,.984965,-.0783447,.108669,1.03492,.986233,-.0684798,.0949911,1.05087,.987796,-.0590867,.0811386,1.0656,.989885,-.0489145,.0673099,1.0794,.991821,-.0391,.0535665,1.09174,.99448,-.029087,.0397529,1.10341,.996769,-.019114,.0261463,1.11383,.998641,-.00947007,.0128731,1.1237,.999978,446316e-9,-169093e-9,1.13253,.888362,-627064e-11,.312578,178215e-10,.889988,-157791e-9,.313148,448451e-9,.889825,-631076e-9,.313092,.00179356,.88984,-.00141994,.313097,.00403554,.889828,-.0025243,.313092,.00717429,.889831,-.00394421,.313093,.0112099,.889831,-.00567962,.313093,.0161425,.889844,-.00773051,.313096,.0219724,.889858,-.0100968,.3131,.0286999,.889882,-.0127786,.313106,.0363256,.889918,-.0157757,.313116,.0448509,.889967,-.0190878,.313129,.0542758,.89003,-.022715,.313145,.0646032,.890108,-.0266566,.313165,.0758339,.890218,-.0309131,.313193,.0879729,.890351,-.0354819,.313226,.101019,.89051,-.0403613,.313263,.114979,.890672,-.0455385,.313294,.129848,.890882,-.0509444,.313333,.145616,.891189,-.0559657,.313324,.162122,.891457,-.0613123,.313281,.179524,.891856,-.0671488,.313281,.197855,.892312,-.0732732,.313268,.216991,.892819,-.0797865,.313263,.236924,.893369,-.0865269,.313247,.257433,.894045,-.0931592,.313205,.278215,.894884,-.100532,.313276,.299467,.895832,-.107716,.313205,.322276,.897043,-.114099,.312873,.34642,.898515,-.119941,.312331,.371187,.900191,-.126044,.311731,.396656,.90188,-.131808,.310859,.422488,.904359,-.137289,.309857,.448744,.906923,-.142991,.308714,.475239,.910634,-.148253,.307465,.501983,.914502,-.153332,.305774,.529254,.919046,-.156646,.303156,.557709,.923194,-.159612,.299928,.586267,.928858,-.162027,.296245,.614925,.934464,-.164203,.291832,.643187,.939824,-.165602,.286565,.671601,.944582,-.165383,.280073,.700213,.949257,-.164439,.272891,.728432,.954389,-.162953,.264771,.756082,.958595,-.161007,.255927,.78369,.962138,-.157243,.245769,.810769,.966979,-.152872,.235127,.836999,.969566,-.148209,.22347,.862684,.972372,-.142211,.211147,.887847,.975916,-.135458,.198606,.911843,.978026,-.128398,.185498,.934795,.979686,-.120313,.17171,.956787,.980748,-.11166,.158159,.978046,.981622,-.103035,.144399,.997693,.982356,-.0930328,.13001,1.01642,.983308,-.0834627,.115778,1.03366,.985037,-.0732249,.101327,1.05014,.986493,-.0628145,.086554,1.06507,.988484,-.0526556,.0720413,1.07907,.991051,-.0415744,.0571151,1.09189,.993523,-.0314275,.0426643,1.10369,.99628,-.0203603,.0279325,1.11423,.998344,-.0102446,.0138182,1.12421,.999997,42612e-8,-193628e-9,1.1333,.871555,-660007e-11,.329176,174749e-10,.875255,-166579e-9,.330571,441051e-9,.875644,-666394e-9,.330718,.00176441,.875159,-.00149903,.330536,.00396899,.87516,-.00266493,.330536,.007056,.875158,-.00416393,.330535,.0110251,.87516,-.00599598,.330535,.0158764,.875163,-.00816108,.330536,.0216101,.875174,-.0106591,.330538,.0282266,.875199,-.0134899,.330545,.0357266,.875257,-.0166538,.330563,.0441117,.875304,-.0201501,.330575,.0533821,.875373,-.0239785,.330595,.0635395,.875464,-.0281389,.330619,.0745872,.875565,-.0326301,.330645,.0865255,.875691,-.0374516,.330676,.0993599,.875897,-.0425993,.330733,.113093,.876091,-.0480576,.330776,.127722,.876353,-.0537216,.330826,.143227,.876649,-.0589807,.330809,.159462,.877034,-.0647865,.330819,.176642,.877443,-.0709789,.330817,.194702,.877956,-.0774782,.330832,.213577,.878499,-.0843175,.330822,.233246,.879144,-.0912714,.330804,.253512,.879982,-.0980824,.330766,.274137,.88097,-.105823,.330864,.295209,.882051,-.113671,.330896,.317226,.883397,-.120303,.330545,.341068,.884987,-.12667,.330068,.365613,.886789,-.133118,.329418,.390807,.889311,-.139024,.328683,.416494,.891995,-.144971,.327729,.442618,.895106,-.150747,.326521,.469131,.899527,-.156283,.325229,.495921,.90504,-.161707,.32378,.523162,.909875,-.165661,.32122,.55092,.91561,-.168755,.317942,.579928,.921225,-.171193,.313983,.608539,.927308,-.17319,.309636,.636854,.933077,-.174819,.304262,.66523,.938766,-.175002,.297563,.693609,.943667,-.173946,.289613,.722157,.949033,-.172221,.281227,.750021,.953765,-.169869,.271545,.777466,.95804,-.166578,.261034,.804853,.962302,-.161761,.249434,.831569,.966544,-.156636,.237484,.857779,.969372,-.150784,.224395,.883051,.972486,-.143672,.210786,.907864,.975853,-.135772,.196556,.931223,.977975,-.127942,.182307,.954061,.979122,-.118347,.167607,.97531,.980719,-.109112,.152739,.995666,.981223,-.0991789,.137932,1.01475,.98216,-.0883553,.122692,1.03253,.983379,-.0780825,.107493,1.04917,.985434,-.0665646,.0917791,1.06464,.987332,-.0557714,.0764949,1.07896,.990004,-.0442805,.060721,1.09199,.992975,-.0331676,.0452284,1.10393,.995811,-.0219547,.0297934,1.11476,.9982,-.0107613,.0146415,1.12484,1.00002,248678e-9,-14555e-8,1.13413,.859519,-693595e-11,.347264,171673e-10,.859843,-17503e-8,.347394,433219e-9,.859656,-700076e-9,.347319,.00173277,.859671,-.00157517,.347325,.00389875,.859669,-.00280028,.347324,.00693112,.85967,-.0043754,.347324,.01083,.859665,-.00630049,.347321,.0155954,.859685,-.0085755,.347328,.0212278,.859694,-.0112003,.347329,.0277273,.859718,-.0141747,.347336,.0350946,.85976,-.0174988,.347348,.0433314,.85982,-.0211722,.347366,.0524384,.859892,-.0251941,.347387,.0624168,.860006,-.0295649,.347422,.0732708,.860122,-.0342825,.347453,.0849999,.860282,-.0393462,.347499,.0976102,.860482,-.0447513,.347554,.111104,.860719,-.0504775,.347614,.125479,.860998,-.0563577,.347666,.140703,.861322,-.0619473,.347662,.156681,.861724,-.0681277,.347684,.173597,.862198,-.0746567,.347709,.191371,.862733,-.0815234,.347727,.209976,.863371,-.0886643,.347744,.229351,.86414,-.0957908,.347734,.24934,.865138,-.102912,.34772,.269797,.866182,-.110924,.3478,.290654,.867436,-.119223,.347911,.312074,.869087,-.126197,.347649,.335438,.870859,-.133145,.347222,.359732,.872997,-.139869,.346645,.38467,.875939,-.146089,.345935,.41019,.879012,-.152334,.345012,.436218,.883353,-.15821,.343924,.462641,.888362,-.164097,.342636,.489449,.895026,-.169528,.341351,.516629,.900753,-.174408,.339115,.544109,.906814,-.17751,.335809,.572857,.912855,-.180101,.331597,.601554,.919438,-.182116,.32698,.630198,.925962,-.183494,.321449,.658404,.931734,-.184159,.314595,.686625,.93762,-.18304,.306462,.71531,.943858,-.181323,.297514,.744272,.948662,-.178683,.287447,.771462,.953299,-.175379,.276166,.798593,.957346,-.170395,.263758,.8256,.962565,-.165042,.251019,.852575,.966075,-.158655,.237011,.878316,.969048,-.151707,.222518,.90329,.972423,-.143271,.207848,.927745,.975833,-.134824,.192463,.950859,.977629,-.125444,.1768,.972947,.978995,-.114949,.161033,.993263,.980533,-.104936,.145523,1.01337,.980745,-.0935577,.129799,1.03128,.981814,-.0822956,.113486,1.04825,.983943,-.0710082,.0972925,1.06405,.986141,-.0587931,.0808138,1.0785,.988878,-.0472755,.0644915,1.09204,.992132,-.0349128,.0478128,1.10413,.9953,-.0232407,.031621,1.11527,.998117,-.0112713,.0154935,1.12551,1.00003,339743e-9,-195763e-9,1.13504,.845441,-729126e-11,.364305,169208e-10,.843588,-183164e-9,.363506,425067e-9,.843412,-73253e-8,.36343,.00169999,.843401,-.00164818,.363426,.00382495,.843399,-.00293008,.363425,.00679993,.843401,-.00457822,.363425,.010625,.843394,-.00659249,.363421,.0153002,.843398,-.00897282,.363421,.0208258,.843415,-.0117191,.363426,.0272024,.843438,-.0148312,.363432,.0344305,.843483,-.018309,.363447,.0425116,.84356,-.0221521,.363472,.0514471,.843646,-.0263597,.363499,.061238,.843743,-.0309315,.363527,.0718873,.84388,-.0358658,.363569,.0833969,.844079,-.0411624,.363631,.0957742,.844279,-.0468128,.363688,.109015,.844549,-.0527923,.363761,.123124,.844858,-.0588204,.363817,.138044,.84522,-.0647573,.36383,.153755,.845669,-.0713181,.363879,.170394,.846155,-.0781697,.363908,.187861,.846789,-.0853913,.363969,.206176,.847502,-.0928086,.363999,.225244,.8484,-.10005,.363997,.244926,.849461,-.107615,.364008,.265188,.850562,-.115814,.364055,.28587,.851962,-.124334,.364179,.306926,.854326,-.131995,.364233,.329605,.856295,-.139338,.363856,.35359,.858857,-.146346,.363347,.37831,.862428,-.152994,.362807,.403722,.866203,-.159463,.361963,.429537,.871629,-.165623,.36112,.456,.877365,-.171649,.359917,.482773,.883744,-.177151,.35848,.509705,.890693,-.182381,.356523,.537215,.897278,-.186076,.3533,.565493,.903958,-.188602,.349095,.594293,.910908,-.190755,.344215,.623165,.918117,-.192063,.338606,.651573,.924644,-.192758,.331544,.679869,.931054,-.192238,.323163,.708668,.937303,-.190035,.313529,.737201,.943387,-.187162,.303152,.764977,.948494,-.183876,.29146,.792683,.952546,-.178901,.277917,.819228,.958077,-.173173,.264753,.846559,.962462,-.16645,.25002,.872962,.966569,-.159452,.234873,.898729,.969108,-.15074,.218752,.923126,.973072,-.141523,.202673,.947278,.975452,-.132075,.186326,.969938,.977784,-.121257,.169396,.991325,.97899,-.110182,.153044,1.01123,.979777,-.0989634,.136485,1.0299,.980865,-.0865894,.119343,1.04727,.982432,-.0746115,.102452,1.06341,.984935,-.0621822,.0852423,1.07834,.987776,-.0495694,.0678546,1.092,.99103,-.0372386,.0506917,1.1043,.99474,-.0244353,.0333316,1.11576,.997768,-.0121448,.0164348,1.12617,1.00003,31774e-8,-169504e-9,1.13598,.825551,-756799e-11,.378425,165099e-10,.82664,-190922e-9,.378923,416504e-9,.826323,-763495e-9,.378779,.0016656,.826359,-.00171789,.378795,.00374768,.82636,-.00305402,.378795,.00666259,.826368,-.00477185,.378798,.0104104,.826364,-.00687131,.378795,.0149912,.826368,-.00935232,.378795,.0204054,.826376,-.0122146,.378797,.0266532,.826399,-.0154581,.378803,.0337355,.82646,-.0190825,.378824,.0416537,.826525,-.0230873,.378846,.0504091,.826614,-.0274719,.378876,.0600032,.82674,-.0322355,.378917,.0704393,.826888,-.0373766,.378964,.0817195,.827078,-.0428936,.379024,.0938492,.827318,-.0487778,.379099,.106828,.82764,-.0549935,.379199,.120659,.827926,-.0611058,.379227,.13526,.828325,-.0675054,.379275,.150713,.828801,-.0743455,.379332,.167034,.8294,-.0815523,.379415,.184209,.830094,-.0890779,.379495,.202203,.8309,-.096736,.379555,.220945,.831943,-.104135,.379577,.240306,.833037,-.112106,.379604,.260317,.834278,-.120554,.379668,.2808,.836192,-.129128,.3799,.301654,.838671,-.137541,.380109,.323502,.840939,-.14523,.379809,.347176,.844575,-.15248,.379593,.371706,.848379,-.159607,.37909,.39688,.853616,-.166267,.378617,.422702,.858921,-.172698,.377746,.448919,.865324,-.178823,.376749,.475661,.872207,-.184542,.375363,.502599,.880018,-.189836,.373657,.529914,.88694,-.194294,.370673,.557683,.894779,-.197022,.36662,.586848,.902242,-.199108,.36138,.615831,.909914,-.200398,.355434,.644478,.917088,-.20094,.348173,.672905,.923888,-.200671,.339482,.701327,.930495,-.198773,.32956,.730101,.937247,-.195394,.318363,.758383,.943108,-.191956,.306323,.786539,.948296,-.187227,.292576,.813637,.953472,-.181165,.278234,.840793,.958485,-.174119,.263054,.867712,.962714,-.166564,.246756,.893635,.966185,-.158181,.229945,.919028,.970146,-.148275,.212633,.943413,.973491,-.138157,.195229,.966627,.975741,-.127574,.178048,.988817,.977238,-.11554,.160312,1.00924,.978411,-.10364,.142857,1.02845,.979811,-.0913122,.125317,1.04648,.98116,-.0782558,.107627,1.06284,.983543,-.0655957,.0895862,1.07798,.986789,-.0520411,.0713756,1.092,.990292,-.0389727,.053228,1.10484,.994187,-.025808,.0351945,1.11642,.997499,-.0126071,.0173198,1.12703,.999999,275604e-9,-148602e-9,1.13674,.81075,-78735e-10,.394456,161829e-10,.808692,-198293e-9,.393453,407564e-9,.80846,-792877e-9,.39334,.00162965,.808595,-.00178416,.393407,.00366711,.808597,-.00317182,.393408,.00651934,.808598,-.00495589,.393408,.0101866,.808591,-.00713627,.393403,.0146689,.808592,-.00971285,.393402,.0199667,.80861,-.0126855,.393407,.0260803,.808633,-.0160538,.393413,.0330107,.80868,-.0198175,.393429,.0407589,.808748,-.0239758,.393453,.0493264,.808854,-.0285286,.39349,.0587161,.808992,-.0334748,.39354,.0689304,.809141,-.0388116,.393588,.0799707,.809352,-.0445375,.39366,.0918432,.809608,-.0506427,.393742,.104549,.809915,-.0570708,.393834,.118085,.810253,-.0633526,.393885,.132377,.810687,-.0700966,.393953,.147537,.811233,-.0772274,.394047,.163543,.811865,-.0847629,.394148,.180394,.812648,-.0925663,.394265,.198051,.813583,-.100416,.394363,.216443,.814683,-.108119,.394402,.235502,.815948,-.11644,.394489,.255242,.817278,-.125036,.394542,.275441,.819605,-.133655,.39486,.296094,.822256,-.142682,.395248,.317309,.825349,-.150756,.395241,.340516,.829605,-.158392,.395285,.364819,.83391,-.165801,.394922,.389736,.839808,-.172677,.394691,.415409,.845708,-.179448,.394006,.441546,.853025,-.185746,.393279,.46832,.859666,-.191684,.391655,.495302,.86789,-.197146,.390068,.52262,.875845,-.201904,.38727,.550336,.882634,-.205023,.382688,.578825,.891076,-.207098,.377543,.608103,.900589,-.208474,.371752,.63723,.90791,-.209068,.364016,.665769,.915971,-.208655,.355593,.694428,.923455,-.20729,.345439,.723224,.931514,-.203821,.334099,.751925,.937885,-.19986,.321069,.780249,.943136,-.194993,.306571,.8077,.948818,-.189132,.291556,.83497,.954433,-.181617,.275745,.86188,.959078,-.173595,.258695,.888562,.962705,-.164855,.240825,.914008,.966753,-.155129,.22268,.939145,.970704,-.144241,.204542,.963393,.973367,-.133188,.185927,.985983,.975984,-.121146,.167743,1.00704,.976994,-.108366,.149218,1.02715,.978485,-.0956746,.13131,1.0455,.980074,-.0820733,.112513,1.06221,.98225,-.0684061,.0938323,1.07782,.98553,-.0549503,.0749508,1.09199,.989529,-.0407857,.055848,1.10508,.993536,-.0271978,.0368581,1.11684,.997247,-.0132716,.0181845,1.12789,1,431817e-9,-198809e-9,1.13792,.785886,-812608e-11,.405036,157669e-10,.790388,-205278e-9,.407355,398297e-9,.790145,-820824e-9,.407231,.00159263,.790135,-.00184681,.407226,.00358336,.790119,-.00328316,.407218,.00637039,.790126,-.00512988,.40722,.0099539,.79013,-.00738684,.407221,.0143339,.790135,-.0100538,.407221,.0195107,.790134,-.0131306,.407217,.0254848,.79016,-.0166169,.407224,.0322572,.790197,-.020512,.407236,.0398284,.790273,-.0248157,.407263,.0482014,.790381,-.029527,.407304,.0573777,.790521,-.0346446,.407355,.0673602,.790704,-.0401665,.40742,.0781522,.790925,-.0460896,.407499,.0897582,.791195,-.0524017,.407589,.10218,.791522,-.0590121,.407691,.11541,.791878,-.0654876,.407748,.12939,.792361,-.0725207,.407849,.144237,.792942,-.0799844,.407963,.159924,.79362,-.0877896,.408087,.176425,.794529,-.0958451,.408259,.193733,.795521,-.103827,.408362,.211756,.796778,-.111937,.408482,.230524,.798027,-.120521,.408547,.249967,.799813,-.129242,.408721,.269926,.802387,-.138048,.409148,.290338,.805279,-.147301,.409641,.311193,.809251,-.155895,.410154,.333611,.813733,-.163942,.410297,.357615,.819081,-.171666,.410373,.382339,.825427,-.178905,.410348,.407828,.83172,-.185812,.409486,.434034,.83877,-.192318,.408776,.460493,.845817,-.198249,.407176,.487346,.854664,-.204034,.405719,.514832,.863495,-.208908,.403282,.542401,.871883,-.212765,.399293,.570683,.88065,-.214911,.393803,.599947,.89004,-.216214,.387536,.62932,.898476,-.216745,.379846,.658319,.906738,-.216387,.370625,.687138,.914844,-.215053,.360139,.71601,.923877,-.212007,.348849,.745124,.931925,-.207481,.335639,.773366,.938054,-.202418,.320798,.801636,.943895,-.196507,.304772,.829055,.949468,-.189009,.288033,.856097,.955152,-.180539,.270532,.88301,.959403,-.171437,.251639,.909296,.963309,-.161661,.232563,.934868,.967399,-.150425,.213231,.959662,.972009,-.138659,.194247,.98302,.97433,-.126595,.174718,1.00517,.975823,-.113205,.155518,1.02566,.976371,-.0996096,.136709,1.04418,.978705,-.0860754,.117571,1.06146,.981477,-.0714438,.0980046,1.07777,.984263,-.0572304,.0782181,1.09214,.988423,-.0428875,.0584052,1.10553,.993,-.0282442,.038522,1.11758,.99704,-.0140183,.0190148,1.12864,.999913,369494e-9,-145203e-9,1.13901,.777662,-84153e-10,.423844,154403e-10,.770458,-211714e-9,.419915,38845e-8,.770716,-846888e-9,.420055,.00155386,.770982,-.00190567,.420202,.00349653,.770981,-.00338782,.420201,.00621606,.77098,-.00529338,.4202,.00971274,.770983,-.00762223,.4202,.0139867,.770985,-.0103741,.420198,.0190381,.770996,-.0135489,.4202,.0248677,.771029,-.0171461,.420212,.0314764,.771052,-.0211647,.420215,.0388648,.771131,-.0256048,.420245,.047036,.771235,-.0304647,.420284,.0559911,.771383,-.0357436,.420341,.0657346,.771591,-.0414392,.420423,.0762694,.771819,-.0475462,.420506,.0875984,.772123,-.0540506,.420617,.099727,.772464,-.060797,.42072,.112637,.772855,-.0675393,.420799,.126313,.773317,-.0748323,.420893,.140824,.773981,-.0825681,.421058,.15617,.774746,-.0906307,.421226,.172322,.77566,-.0988982,.421397,.189253,.776837,-.106994,.421569,.206912,.778097,-.115528,.421704,.225359,.779588,-.124317,.421849,.24447,.781574,-.133139,.422097,.264156,.784451,-.142179,.422615,.284318,.787682,-.15165,.423269,.304902,.792433,-.160771,.424396,.3265,.797359,-.169166,.424772,.35014,.803986,-.177149,.425475,.374768,.809504,-.184745,.424996,.399928,.815885,-.19173,.424247,.425796,.823513,-.198525,.423515,.452287,.832549,-.204709,.422787,.479321,.841653,-.210447,.421187,.506718,.850401,-.215501,.418519,.53432,.859854,-.219752,.414715,.56242,.869364,-.222305,.409462,.591558,.878837,-.223744,.402926,.621074,.888636,-.224065,.395043,.650538,.898132,-.223742,.38564,.679538,.907181,-.222308,.375378,.708674,.915621,-.219837,.363212,.737714,.9239,-.215233,.349313,.767014,.931644,-.209592,.334162,.795133,.938887,-.203644,.317943,.823228,.945282,-.196349,.300581,.850822,.950758,-.18742,.282195,.877594,.956146,-.177879,.262481,.904564,.960355,-.167643,.242487,.930741,.965256,-.156671,.222668,.955868,.968029,-.144123,.201907,.979869,.97251,-.131305,.18202,1.00291,.974925,-.118335,.161909,1.02392,.975402,-.103714,.142129,1.0433,.976987,-.089415,.122447,1.06089,.979677,-.0748858,.102248,1.07713,.983184,-.0596086,.0814851,1.09218,.987466,-.0447671,.0609484,1.10585,.992348,-.0295217,.0401835,1.11829,.996674,-.0143917,.0198163,1.12966,1.00003,321364e-9,-149983e-9,1.1402,.757901,-869074e-11,.436176,151011e-10,.751195,-217848e-9,.432317,378533e-9,.751178,-871373e-9,.432307,.0015141,.751195,-.00196061,.432317,.0034068,.751198,-.00348552,.432318,.00605659,.751195,-.00544599,.432315,.00946353,.751207,-.00784203,.43232,.013628,.751213,-.0106732,.43232,.0185499,.751221,-.0139393,.432319,.0242302,.751244,-.0176398,.432325,.0306694,.7513,-.0217743,.432348,.0378698,.751358,-.0263412,.432367,.0458321,.751458,-.0313396,.432404,.0545587,.751608,-.0367682,.432464,.0640543,.7518,-.0426246,.43254,.0743222,.752065,-.0489031,.432645,.0853668,.752376,-.0555828,.432762,.0971911,.752715,-.0623861,.432859,.109768,.753137,-.069415,.432958,.123126,.753676,-.0770039,.433099,.137308,.754345,-.084971,.433272,.15229,.755235,-.0932681,.433504,.168075,.756186,-.10171,.433693,.184625,.757363,-.110019,.433857,.201897,.75884,-.11887,.434102,.220014,.760467,-.127881,.434306,.238778,.762969,-.136766,.434751,.258172,.765823,-.14612,.43529,.278062,.769676,-.15566,.436236,.298437,.774909,-.165177,.437754,.319532,.77994,-.17402,.438343,.342505,.785757,-.182201,.438609,.366693,.792487,-.190104,.438762,.391668,.80038,-.197438,.438795,.417494,.808494,-.204365,.438226,.443933,.817695,-.210714,.437283,.470929,.828111,-.216651,.436087,.498569,.837901,-.221804,.433717,.526165,.847813,-.226318,.430133,.554155,.858314,-.229297,.425213,.582822,.868891,-.230999,.418576,.612847,.878941,-.231155,.410405,.642445,.888809,-.230935,.400544,.672024,.898089,-.229343,.389613,.701366,.908081,-.226886,.377197,.730763,.916819,-.222676,.363397,.759642,.924968,-.216835,.347437,.788775,.932906,-.210245,.32995,.817135,.940025,-.202992,.312262,.844912,.946101,-.19436,.293313,.872164,.952835,-.184125,.273638,.899443,.957347,-.173657,.252385,.926389,.961434,-.162204,.231038,.951947,.965522,-.14979,.209834,.976751,.969412,-.136307,.188821,1.00022,.973902,-.122527,.168013,1.02229,.974045,-.108213,.147634,1.04199,.975775,-.0927397,.12705,1.06019,.978383,-.0778212,.106309,1.07711,.98211,-.0621216,.0849279,1.09245,.986517,-.0463847,.0633519,1.10651,.991696,-.0309353,.0419698,1.11903,.996349,-.0150914,.0206272,1.13073,1.00003,442449e-9,-231396e-9,1.14146,.727498,-885074e-11,.441528,145832e-10,.730897,-223525e-9,.443589,368298e-9,.730796,-893996e-9,.443528,.00147303,.730805,-.00201149,.443533,.00331433,.730814,-.00357596,.443538,.00589222,.730815,-.00558734,.443538,.00920678,.730822,-.00804544,.44354,.0132582,.730836,-.0109501,.443545,.0180468,.730848,-.0143008,.443546,.0235732,.730871,-.0180969,.443552,.0298382,.730915,-.022338,.443567,.0368438,.730982,-.0270225,.443591,.044591,.731076,-.0321491,.443627,.0530831,.731245,-.0377166,.443699,.0623243,.73144,-.0437216,.443777,.0723181,.7317,-.0501576,.443881,.0830691,.732034,-.0569942,.444014,.0945809,.732388,-.0638756,.444113,.106825,.732853,-.071203,.444247,.119859,.733473,-.0790076,.444442,.13369,.734195,-.0871937,.444645,.148304,.735069,-.095696,.444877,.163702,.736169,-.10426,.445133,.179861,.73747,-.112853,.44537,.196778,.738991,-.12199,.445651,.214496,.740865,-.131153,.445958,.232913,.743637,-.140245,.446548,.251977,.746797,-.149722,.447246,.271551,.751517,-.159341,.448656,.291774,.756156,-.169106,.449866,.312455,.761519,-.178436,.450919,.334552,.768295,-.186904,.451776,.358491,.776613,-.195117,.452832,.383446,.783966,-.202695,.45249,.408945,.793542,-.20985,.452587,.435364,.803192,-.216403,.451852,.462336,.813892,-.22251,.450708,.48987,.824968,-.227676,.4486,.517697,.835859,-.232443,.445156,.545975,.846825,-.235775,.440351,.574483,.858085,-.237897,.433641,.604246,.868825,-.238074,.425354,.634101,.879638,-.237661,.415383,.664201,.889966,-.236186,.404136,.693918,.899479,-.233599,.390917,.723481,.908769,-.229737,.376352,.75258,.917966,-.223836,.360372,.781764,.926304,-.217067,.342551,.811139,.934626,-.209309,.324238,.839585,.941841,-.20071,.304484,.867044,.94789,-.190602,.283607,.894579,.954196,-.179253,.262205,.921743,.958383,-.167646,.239847,.948026,.963119,-.155073,.218078,.973296,.966941,-.141426,.195899,.998135,.970836,-.126849,.174121,1.02021,.973301,-.112296,.153052,1.04085,.97448,-.0964965,.131733,1.05946,.977045,-.080489,.10997,1.07693,.980751,-.064844,.0881657,1.09254,.985475,-.0481938,.0657987,1.10697,.991089,-.0319185,.0435215,1.12004,.996122,-.0158088,.0214779,1.13173,1.00001,372455e-9,-200295e-9,1.14291,.708622,-907597e-11,.45304,141962e-10,.711162,-228911e-9,.454662,358052e-9,.709812,-914446e-9,.453797,.00143034,.709865,-.00205819,.453834,.00321935,.709864,-.00365894,.453833,.00572331,.709855,-.00571692,.453826,.00894278,.709862,-.00823201,.453828,.012878,.709875,-.011204,.453832,.0175295,.709896,-.0146323,.453839,.0228978,.709925,-.0185163,.453847,.0289839,.709974,-.0228551,.453866,.0357894,.710045,-.0276473,.453892,.0433161,.710133,-.032891,.453924,.0515665,.710292,-.0385851,.453992,.0605458,.710485,-.0447254,.45407,.0702574,.710769,-.0513051,.454192,.0807077,.711106,-.0582733,.454329,.091896,.711516,-.0652866,.45446,.103814,.712071,-.0728426,.454653,.116508,.712676,-.0808307,.45484,.129968,.713476,-.0892216,.455096,.144206,.714377,-.0979047,.455346,.159212,.715579,-.106531,.455647,.174973,.716977,-.115492,.455961,.191504,.71862,-.124821,.456315,.208835,.72084,-.134079,.4568,.226869,.723786,-.143427,.457521,.245582,.727464,-.153061,.458475,.264957,.732771,-.162768,.460239,.284948,.736515,-.172627,.460899,.30522,.743519,-.182487,.463225,.326717,.750041,-.191295,.464027,.350113,.758589,-.199746,.465227,.374782,.767703,-.207584,.465877,.400226,.777484,-.214973,.465996,.426442,.788792,-.221796,.466019,.453688,.800194,-.228038,.465083,.481246,.811234,-.233346,.462506,.509086,.822859,-.238073,.459257,.537338,.835082,-.241764,.454863,.566108,.846332,-.244241,.448163,.595126,.858355,-.244736,.439709,.625574,.87034,-.244278,.429837,.65617,.881027,-.24255,.418002,.686029,.891007,-.239912,.404325,.716039,.900874,-.236133,.389222,.745518,.911072,-.230672,.373269,.775026,.920359,-.22356,.355083,.804521,.928604,-.215591,.335533,.834045,.937175,-.206503,.315278,.861612,.942825,-.196684,.293653,.889131,.949805,-.185116,.271503,.916853,.955535,-.172703,.248821,.943541,.959843,-.159978,.225591,.970132,.964393,-.146375,.202719,.994709,.968008,-.131269,.179928,1.0186,.971013,-.11569,.158007,1.03928,.973334,-.1003,.13624,1.05887,.975775,-.0833352,.1138,1.07652,.979579,-.0668981,.0913141,1.09297,.984323,-.0500902,.0683051,1.10734,.990351,-.0332377,.0451771,1.12084,.995823,-.0161491,.0221705,1.13296,1.0001,234083e-9,-108712e-9,1.14441,.683895,-924677e-11,.46015,137429e-10,.68833,-233383e-9,.463134,346865e-9,.688368,-933547e-9,.463159,.00138748,.688367,-.00210049,.463159,.00312187,.688369,-.00373415,.463159,.00555004,.688377,-.00583449,.463163,.00867216,.688386,-.00840128,.463166,.0124884,.688398,-.0114343,.463169,.0169993,.688418,-.0149329,.463175,.0222054,.688453,-.0188964,.463188,.028108,.688515,-.0233239,.463214,.0347085,.68857,-.0282136,.463231,.0420091,.688679,-.033564,.463276,.0500132,.688854,-.0393733,.463356,.0587255,.689038,-.0456354,.46343,.0681476,.689321,-.0523433,.463553,.0782897,.689662,-.059412,.463693,.0891501,.690188,-.0665736,.4639,.100735,.690755,-.0743106,.464107,.113074,.691405,-.0824722,.464329,.126161,.692198,-.0910484,.464585,.140007,.693196,-.0998778,.464893,.154612,.69454,-.108651,.465285,.169984,.695921,-.117855,.465596,.186106,.697749,-.12734,.466056,.203034,.700375,-.136714,.466771,.220703,.703395,-.146386,.467579,.239062,.707904,-.156096,.469067,.258188,.711673,-.165904,.469851,.277759,.717489,-.175812,.471815,.297935,.724051,-.185931,.47389,.318916,.731965,-.195238,.47587,.341591,.741151,-.204021,.477523,.366062,.751416,-.212113,.478881,.391396,.761848,-.21979,.479226,.417599,.771886,-.2267,.478495,.444401,.783998,-.232991,.477622,.472084,.796523,-.238645,.475833,.500193,.808851,-.243396,.472568,.52865,.821191,-.247226,.467857,.557362,.834261,-.250102,.461871,.586768,.846762,-.251056,.453543,.617085,.859867,-.250604,.443494,.647659,.871948,-.248783,.431711,.678119,.882967,-.245855,.417911,.708399,.892826,-.242168,.401993,.738256,.90332,-.237062,.385371,.767999,.913633,-.22997,.366837,.798191,.922774,-.221687,.346372,.827756,.931371,-.212345,.325682,.856425,.938929,-.20206,.303665,.884299,.944821,-.190981,.280786,.912023,.951792,-.178065,.2573,.939669,.957712,-.164634,.233448,.96655,.961912,-.150863,.209504,.992366,.966382,-.13577,.18597,1.01633,.969588,-.119593,.162905,1.03843,.971777,-.103203,.14053,1.05841,.97433,-.0865888,.117909,1.07632,.978686,-.0690829,.0944101,1.09326,.983281,-.0516568,.0705671,1.10796,.989562,-.034558,.0468592,1.12182,.995465,-.0167808,.0229846,1.1342,.999991,373016e-9,-235606e-9,1.1459,.662251,-939016e-11,.468575,132714e-10,.666634,-237624e-9,.471675,335842e-9,.666411,-950385e-9,.471516,.00134321,.666399,-.00213833,.471509,.00302221,.666386,-.0038014,.471499,.00537283,.666405,-.00593958,.471511,.00839533,.666406,-.00855253,.471508,.0120898,.666428,-.0116401,.471519,.0164569,.666444,-.0152015,.471522,.0214971,.66649,-.0192362,.471543,.027212,.666537,-.0237428,.471558,.033603,.666617,-.0287198,.471591,.0406728,.666718,-.0341647,.471631,.0484238,.666889,-.0400759,.47171,.0568621,.667104,-.0464479,.471805,.0659915,.667374,-.0532677,.471923,.0758178,.667772,-.0603805,.472098,.0863425,.668371,-.0677392,.472363,.0975917,.668971,-.0756028,.472596,.109567,.669696,-.0839293,.472869,.122272,.670481,-.0926683,.473126,.135718,.6715,-.1016,.473442,.149914,.672911,-.110566,.47389,.164882,.674512,-.119984,.474354,.180602,.67651,-.129574,.474922,.19711,.679292,-.139106,.475764,.214371,.682798,-.148993,.476886,.232405,.686955,-.158737,.478179,.251153,.691406,-.168754,.479432,.270436,.697438,-.178703,.481481,.290374,.704761,-.188955,.484143,.311044,.713599,-.198814,.487007,.333003,.723194,-.207869,.488962,.357144,.732601,-.216189,.489815,.382169,.744193,-.22398,.490888,.408227,.754907,-.231156,.490355,.434928,.767403,-.23747,.489548,.462599,.78107,-.243503,.488274,.490908,.793893,-.248114,.484843,.519421,.807296,-.25222,.4803,.548561,.820529,-.255265,.474097,.577772,.833716,-.256741,.466041,.607782,.848403,-.25637,.456547,.638807,.860755,-.254804,.443946,.670058,.874012,-.251834,.430852,.700749,.885619,-.247867,.414903,.731446,.896069,-.242634,.397276,.761191,.906266,-.236093,.378535,.791053,.916759,-.227543,.358038,.821298,.92523,-.21783,.335705,.850747,.93436,-.207534,.313797,.879258,.941631,-.195983,.289671,.907734,.947564,-.183567,.265319,.935206,.953681,-.169345,.240815,.962739,.960008,-.154909,.216119,.989227,.964145,-.140161,.192096,1.01465,.968171,-.123411,.167855,1.03737,.969859,-.106525,.144817,1.05767,.972666,-.0891023,.12149,1.0761,.977055,-.0718094,.0975306,1.09336,.982527,-.0534213,.0730217,1.10878,.989001,-.0355579,.0483366,1.12285,.99512,-.0176383,.023938,1.13548,1.00007,368831e-9,-211581e-9,1.14744,.651047,-960845e-11,.484101,12922e-9,.644145,-241347e-9,.478968,324578e-9,.64396,-965142e-9,.478831,.00129798,.64396,-.00217154,.47883,.00292046,.643968,-.00386049,.478835,.00519202,.643974,-.00603186,.478838,.0081128,.643977,-.0086854,.478836,.011683,.643982,-.0118207,.478834,.0159031,.644024,-.0154374,.478856,.0207743,.644059,-.0195343,.478868,.0262975,.644122,-.0241103,.478896,.0324747,.644207,-.0291638,.478933,.039309,.64432,-.0346919,.478981,.0468029,.644481,-.0406919,.479053,.0549614,.644722,-.047159,.479169,.0637909,.645013,-.0540748,.479302,.0732974,.645503,-.0612001,.479541,.0834898,.646117,-.0687303,.479829,.0943873,.646707,-.0767846,.480061,.105991,.647431,-.0852465,.480343,.11831,.64831,-.0940719,.48066,.131348,.649486,-.103056,.481083,.14514,.650864,-.112261,.481528,.159676,.652604,-.121852,.482102,.174979,.654825,-.131505,.482813,.191079,.657876,-.141189,.483876,.207927,.661339,-.151239,.48499,.225586,.665463,-.161091,.486279,.243947,.670542,-.171235,.487968,.262957,.677361,-.181347,.49053,.282781,.685672,-.191679,.493862,.303311,.694551,-.201781,.49699,.324607,.703753,-.211164,.498884,.347916,.713703,-.219675,.500086,.372628,.725911,-.227836,.501554,.398694,.73862,-.23533,.502193,.425529,.752118,-.241786,.501811,.453209,.76579,-.247865,.500185,.481381,.779568,-.252696,.497159,.51011,.793991,-.256802,.492765,.539322,.808182,-.259942,.486827,.569078,.821698,-.261703,.478386,.598818,.836009,-.262006,.468772,.629762,.849824,-.260333,.456352,.661366,.863888,-.257398,.442533,.69295,.876585,-.253264,.426573,.723608,.888665,-.248026,.408964,.754378,.899537,-.241487,.389677,.784761,.9094,-.233463,.368516,.814688,.920166,-.223397,.346624,.845009,.928899,-.21255,.322717,.874431,.937156,-.200869,.298698,.902922,.943861,-.188387,.273491,.931356,.949557,-.174341,.247866,.958854,.955862,-.158994,.222496,.986098,.961721,-.143664,.197522,1.01229,.965976,-.127412,.17302,1.03571,.968652,-.109798,.148954,1.05699,.971084,-.0916787,.125044,1.07587,.975584,-.0739634,.100577,1.09372,.98122,-.055322,.0753666,1.10948,.988253,-.0366825,.0498899,1.12394,.99482,-.0180389,.024611,1.13694,1.00001,229839e-9,-188283e-9,1.14919,.613867,-964198e-11,.479449,123452e-10,.621485,-244534e-9,.485399,313091e-9,.621429,-978202e-9,.485353,.00125245,.62112,-.00220004,.485114,.00281687,.621119,-.0039111,.485112,.00500783,.621122,-.00611091,.485112,.00782498,.621133,-.00879922,.485117,.0112687,.621152,-.0119756,.485125,.0153394,.621183,-.0156396,.485139,.0200382,.621227,-.0197898,.485158,.0253663,.621298,-.0244253,.485192,.0313261,.621388,-.0295441,.485233,.0379204,.621507,-.0351432,.485286,.0451523,.621693,-.0412198,.485378,.0530277,.621933,-.0477673,.485495,.0615522,.622232,-.0547574,.485635,.0707316,.622809,-.0619417,.485943,.0805883,.623407,-.069625,.486232,.0911267,.62406,-.077796,.486516,.102354,.624835,-.0863731,.486838,.114279,.625758,-.095251,.487188,.126902,.627043,-.104299,.487695,.140285,.628438,-.113724,.488163,.154397,.630325,-.123417,.488858,.169267,.632801,-.133137,.489754,.184941,.635784,-.143052,.490815,.20136,.639406,-.153132,.492048,.218643,.643872,-.163143,.49363,.236615,.6499,-.17333,.496009,.255449,.657201,-.183622,.498994,.275006,.666221,-.194019,.502888,.295354,.674419,-.204192,.505459,.316244,.683729,-.21406,.507771,.33849,.695584,-.222854,.510245,.363166,.708583,-.231315,.512293,.389071,.721233,-.238911,.512747,.415737,.735134,-.245657,.512482,.443331,.750179,-.251879,.511526,.471891,.765073,-.256911,.508935,.500892,.779794,-.261144,.504341,.530294,.794801,-.264316,.498515,.560144,.810339,-.266276,.491015,.590213,.824818,-.266981,.481126,.620865,.839375,-.265778,.468685,.652687,.853043,-.262748,.453925,.684759,.867335,-.258474,.437912,.716209,.88037,-.253187,.419648,.747508,.891711,-.246476,.39982,.77797,.902896,-.238735,.37879,.808586,.913601,-.22885,.355891,.838843,.923019,-.217656,.331773,.869014,.933432,-.205539,.307356,.898512,.939691,-.192595,.281321,.9269,.946938,-.178945,.255441,.955297,.952372,-.163587,.229013,.983231,.95909,-.147214,.203179,1.00971,.963675,-.13064,.17792,1.03438,.968247,-.113121,.152898,1.05625,.97001,-.0945824,.128712,1.07598,.974458,-.0755648,.103349,1.094,.980168,-.0571998,.0776731,1.1104,.987295,-.0377994,.0514445,1.12491,.994432,-.0186417,.025429,1.13851,.999975,542714e-9,-282356e-9,1.15108,.592656,-980249e-11,.486018,119532e-10,.598467,-247275e-9,.490781,301531e-9,.597934,-988317e-9,.490343,.00120517,.597903,-.00222366,.490319,.0027116,.597913,-.00395315,.490327,.00482077,.597919,-.00617653,.490329,.00753264,.597936,-.00889375,.490339,.0108478,.597956,-.0121043,.490347,.0147668,.597992,-.0158073,.490365,.0192905,.598032,-.0200017,.490382,.0244204,.598109,-.0246865,.49042,.0301593,.598215,-.0298594,.490474,.03651,.59833,-.0355167,.490524,.0434757,.598525,-.0416559,.490624,.0510629,.598778,-.0482692,.490753,.0592781,.599135,-.0553114,.49094,.0681304,.599802,-.062542,.491328,.0776467,.600361,-.0703638,.491598,.0878184,.60101,-.0786256,.491882,.0986573,.601811,-.0872962,.492232,.11018,.602861,-.0962284,.492684,.1224,.604167,-.10538,.493213,.135354,.605693,-.114896,.493799,.149034,.607682,-.124654,.494576,.163469,.610672,-.13456,.4959,.178747,.613313,-.144581,.496713,.194723,.617603,-.154703,.498499,.211617,.622174,-.16489,.500188,.229183,.628855,-.175164,.503072,.247786,.636963,-.185565,.506798,.267116,.644866,-.195911,.509719,.28702,.653741,-.206104,.512776,.307763,.664942,-.216447,.516812,.329631,.67633,-.22552,.519181,.353515,.690012,-.234316,.521681,.379226,.704243,-.242032,.523129,.405901,.719396,-.249172,.523768,.433585,.734471,-.255543,.522541,.462085,.750539,-.260697,.520217,.491233,.766365,-.26501,.516293,.521094,.781677,-.268409,.509708,.551014,.797132,-.270399,.501944,.581463,.812655,-.271247,.492025,.612402,.828592,-.270708,.480424,.643798,.844044,-.268085,.465955,.67682,.857305,-.263459,.448425,.708496,.87114,-.258151,.430243,.74046,.884936,-.251171,.410578,.771583,.895772,-.243305,.38862,.802234,.906961,-.234037,.365214,.833179,.917775,-.222714,.34116,.86353,.927883,-.210175,.31572,.893557,.936617,-.196925,.289159,.922976,.943384,-.182788,.261996,.951606,.949713,-.167965,.235324,.979958,.955818,-.151109,.208408,1.00765,.961344,-.133834,.182591,1.03329,.965469,-.115987,.156958,1.0557,.968693,-.09746,.132239,1.07583,.973165,-.0778514,.106195,1.09451,.979387,-.0585067,.0797669,1.11137,.98671,-.0390409,.0530263,1.12643,.994093,-.019408,.0263163,1.14016,1.00002,540029e-9,-194487e-9,1.15299,.574483,-989066e-11,.494533,114896e-10,.574478,-249127e-9,.494528,289403e-9,.574607,-996811e-9,.494637,.00115797,.574396,-.00224241,.494458,.00260498,.574377,-.00398632,.49444,.00463102,.574386,-.00622836,.494445,.00723623,.574401,-.0089683,.494453,.010421,.574419,-.0122056,.49446,.0141859,.574459,-.0159396,.494481,.0185322,.574525,-.0201692,.49452,.0234617,.574587,-.0248924,.494547,.0289762,.574697,-.0301074,.494604,.0350797,.574853,-.0358114,.494688,.0417767,.575027,-.041999,.494772,.0490718,.575294,-.0486618,.494915,.0569728,.575733,-.0557148,.495173,.0654955,.576356,-.0630489,.495537,.0746612,.576944,-.0709285,.495836,.0844615,.57765,-.0792723,.496177,.0949142,.578491,-.0880167,.496563,.10603,.579639,-.0969462,.497096,.117841,.580989,-.10622,.497684,.130367,.582587,-.115861,.498337,.143609,.584951,-.125605,.499414,.157625,.587602,-.135608,.500518,.172413,.59076,-.145742,.501767,.187999,.594992,-.155934,.503542,.20445,.600656,-.166303,.506135,.221764,.607816,-.176681,.509542,.24002,.61522,-.187071,.51263,.258992,.623702,-.197465,.516021,.278773,.634192,-.207816,.520422,.299377,.644936,-.218183,.524073,.320802,.657888,-.2278,.528049,.34384,.670666,-.236747,.52986,.36916,.685626,-.24484,.531892,.395867,.701304,-.252071,.532727,.423488,.717727,-.258714,.532146,.452201,.733914,-.264211,.529883,.481579,.750529,-.26859,.5259,.511558,.76747,-.272046,.51999,.542042,.785189,-.274225,.513083,.572799,.800954,-.275189,.502936,.603816,.816962,-.274946,.490921,.635461,.83336,-.272695,.47684,.6676,.848143,-.268223,.459405,.70051,.861818,-.262768,.440319,.732902,.876828,-.255872,.420123,.765084,.889312,-.247703,.398379,.796391,.900412,-.238381,.374496,.827333,.912251,-.227783,.349874,.858385,.921792,-.214832,.323181,.888652,.931273,-.200949,.296624,.917763,.940295,-.186537,.269211,.947878,.946812,-.171538,.241447,.977016,.953588,-.155254,.213829,1.00501,.958841,-.137156,.186807,1.03179,.963746,-.118699,.160706,1.05502,.966468,-.0998358,.135504,1.07568,.971178,-.0805186,.109131,1.09479,.97831,-.0599348,.0818293,1.1123,.985886,-.0399661,.0545872,1.12771,.994021,-.0198682,.0269405,1.14186,1.00009,271022e-9,-12989e-8,1.15514,.538716,-990918e-11,.486732,109675e-10,.550656,-250642e-9,.497518,277412e-9,.55057,-.00100265,.497441,.00110974,.550903,-.00225672,.497733,.00249779,.550568,-.00401046,.497438,.00443906,.550574,-.00626613,.49744,.00693637,.550591,-.0090226,.497449,.00998921,.550623,-.0122795,.497469,.0135984,.550667,-.0160361,.497495,.0177654,.550724,-.0202908,.497526,.0224915,.550792,-.0250421,.497557,.0277795,.550918,-.0302878,.49763,.0336334,.551058,-.0360241,.497701,.0400573,.551276,-.0422473,.497824,.0470585,.551551,-.0489441,.497977,.0546433,.552074,-.0559596,.498312,.0628367,.552681,-.0633978,.498679,.071646,.553324,-.0713176,.499031,.0810746,.554011,-.0797268,.499365,.091129,.55488,-.0885238,.499779,.101837,.556171,-.0974417,.500444,.113239,.557498,-.106841,.501025,.125316,.559299,-.116533,.501864,.138128,.561647,-.126298,.502967,.151695,.564347,-.136388,.504129,.16604,.567863,-.146576,.505713,.181207,.572569,-.156832,.507953,.197259,.578919,-.167323,.511186,.214258,.585387,-.177712,.514042,.232038,.593134,-.188184,.517484,.250733,.603295,-.198717,.522345,.270454,.613854,-.209177,.526751,.290807,.626092,-.219644,.531595,.312202,.637868,-.229494,.534721,.334435,.652458,-.238718,.538304,.359184,.666985,-.247061,.539875,.385637,.683301,-.254652,.541042,.41328,.69998,-.261376,.540735,.441903,.717824,-.267085,.539139,.471609,.734617,-.271465,.534958,.501446,.753663,-.27528,.53032,.532571,.770512,-.277617,.522134,.563641,.787356,-.278525,.51206,.595067,.806252,-.278512,.50119,.627226,.822061,-.277023,.486791,.659402,.838959,-.273175,.470467,.692874,.85379,-.267238,.450688,.725702,.868268,-.260327,.429741,.75832,.881994,-.251946,.407223,.790189,.893885,-.242432,.383214,.821625,.905118,-.231904,.357297,.853011,.916045,-.219545,.330733,.883773,.927614,-.205378,.303916,.914435,.936005,-.190388,.275941,.944502,.944533,-.1749,.247493,.974439,.950758,-.158588,.218996,1.00286,.957078,-.141027,.191559,1.0304,.962448,-.121507,.164457,1.05466,.964993,-.102068,.138636,1.0761,.970017,-.0822598,.111861,1.09541,.97661,-.062033,.0843438,1.11317,.985073,-.0409832,.0558496,1.12911,.993515,-.020146,.0275331,1.1438,1.00006,27329e-8,-107883e-9,1.15736,.525324,-999341e-11,.498153,105385e-10,.526513,-251605e-9,.499277,265329e-9,.526517,-.00100641,.499282,.0010613,.526588,-.00226466,.499337,.00238823,.526539,-.0040255,.499302,.00424535,.526547,-.00628954,.499306,.00663364,.526561,-.00905628,.499313,.00955337,.526593,-.0123253,.499334,.0130054,.526642,-.0160957,.499365,.0169911,.5267,-.0203661,.499396,.0215122,.526792,-.0251347,.499451,.0265718,.526904,-.0303985,.499511,.0321732,.527079,-.0361554,.499617,.0383231,.527285,-.0423982,.499731,.045026,.527602,-.0491121,.499924,.0522936,.528166,-.0561127,.500306,.0601528,.52879,-.0635988,.5007,.0686059,.529421,-.071581,.501048,.0776518,.530144,-.0799854,.501421,.0873148,.531062,-.0888032,.501884,.0976084,.532374,-.0977643,.50259,.108588,.533828,-.107197,.50329,.120234,.53581,-.116887,.504312,.132602,.538063,-.126755,.505365,.145721,.5409,-.136819,.506668,.159617,.544882,-.147117,.508731,.174369,.550238,-.157446,.511601,.190028,.556038,-.167988,.514431,.206587,.563031,-.178364,.517808,.224046,.571543,-.189007,.521937,.242503,.582255,-.199546,.527415,.261977,.59272,-.210084,.531682,.282162,.605648,-.220448,.537123,.303426,.61785,-.230593,.540664,.325323,.632223,-.240238,.544467,.348993,.648819,-.24887,.547594,.375462,.665825,-.256657,.54912,.403024,.683389,-.263711,.549294,.431773,.701495,-.269666,.547649,.461494,.719197,-.274169,.543786,.491623,.737906,-.278124,.538644,.522994,.756652,-.280632,.531057,.554775,.775279,-.281741,.521972,.586441,.792688,-.281652,.509613,.618596,.811894,-.280345,.496497,.651462,.827938,-.277128,.47968,.684023,.844837,-.271646,.460688,.718024,.859239,-.264397,.438872,.751207,.874088,-.256144,.41577,.784232,.887693,-.246311,.391369,.816191,.899402,-.235497,.365872,.847828,.910973,-.223631,.338618,.87934,.92204,-.209874,.310803,.910325,.930987,-.194265,.281802,.940695,.94,-.178125,.252836,.970958,.948018,-.161479,.224239,1.00078,.955141,-.144038,.195857,1.0288,.960513,-.124915,.168487,1.05371,.963964,-.104284,.141495,1.07596,.968713,-.0838732,.114437,1.09628,.975524,-.0635579,.0863105,1.11448,.98431,-.042291,.0574774,1.13069,.992916,-.0209131,.0284343,1.14568,.999926,743097e-9,-379265e-9,1.15955,.501042,-998428e-11,.498726,100306e-10,.502992,-252112e-9,.500665,253283e-9,.502417,-.00100791,.500092,.00101259,.502965,-.00226919,.500621,.00227978,.502318,-.00403109,.499994,.00405011,.502333,-.00629832,.500005,.00632868,.502362,-.00906907,.500027,.00911446,.502369,-.0123423,.500023,.0124078,.50243,-.0161178,.500066,.016211,.502493,-.0203937,.500103,.0205256,.502592,-.0251684,.500166,.0253548,.502707,-.0304389,.50023,.0307029,.502881,-.0362015,.500335,.0365753,.503124,-.0424507,.500488,.0429798,.503443,-.0491582,.500686,.0499268,.504083,-.0561476,.501155,.0574541,.504668,-.0636846,.501524,.0655408,.505319,-.0716834,.501904,.0742072,.50609,-.0800925,.502321,.0834699,.507122,-.0888425,.502896,.0933603,.508414,-.097855,.503603,.10391,.509955,-.107304,.504416,.115113,.512061,-.116921,.505565,.127054,.514419,-.12689,.506732,.139709,.517529,-.136934,.508338,.153173,.522085,-.147327,.510987,.167528,.526986,-.157612,.513527,.182708,.533122,-.168213,.516717,.198881,.540807,-.178688,.520832,.215986,.550687,-.189511,.52632,.234335,.560567,-.199998,.531009,.253375,.571698,-.210652,.535839,.273499,.584364,-.220917,.541091,.294355,.599066,-.23137,.546875,.316525,.614148,-.241206,.551306,.339671,.631157,-.250379,.555187,.36531,.647919,-.258397,.556595,.392767,.666112,-.265528,.556949,.421397,.686158,-.271827,.556617,.451433,.704838,-.27674,.552975,.482131,.723957,-.280733,.547814,.513458,.74262,-.283359,.53997,.545446,.762009,-.284541,.530422,.57775,.781314,-.284507,.518546,.610434,.799116,-.283309,.504178,.643178,.817604,-.280378,.48843,.676248,.83459,-.275619,.469457,.709698,.850974,-.26856,.447698,.744245,.866747,-.260094,.424791,.777695,.881412,-.249929,.399913,.810392,.8936,-.239137,.37308,.842872,.905943,-.226818,.345705,.874677,.916408,-.213699,.31706,.906257,.927215,-.198428,.288444,.936881,.935625,-.181643,.258329,.96795,.944076,-.164386,.228488,.998216,.951229,-.146339,.199763,1.02689,.958793,-.127709,.172153,1.0535,.963219,-.107244,.144989,1.07646,.967562,-.0857764,.11685,1.09675,.974866,-.0645377,.0880571,1.11576,.983353,-.0431732,.0587352,1.13227,.992503,-.0218356,.0294181,1.1478,1.00003,605203e-9,-231013e-9,1.16207,.482935,-101177e-10,.504695,968142e-11,.477554,-251521e-9,.499071,240676e-9,.477904,-.00100683,.499436,96342e-8,.478368,-.00226636,.499899,.0021687,.477977,-.00402719,.499513,.00385384,.477993,-.00629226,.499525,.0060221,.478011,-.00906011,.499536,.00867289,.478051,-.0123305,.499566,.0118074,.478089,-.016102,.499587,.0154269,.478171,-.0203736,.499645,.0195341,.478254,-.025143,.499692,.0241318,.47839,-.0304071,.499779,.0292247,.478588,-.0361631,.499911,.0348196,.478812,-.0424023,.500046,.0409231,.479208,-.0490724,.500326,.047552,.479841,-.0560722,.500805,.0547377,.480392,-.0636125,.501152,.0624607,.481068,-.0716134,.501561,.0707473,.481898,-.0800062,.502054,.0796118,.483022,-.0886568,.502728,.0890974,.484332,-.0977553,.503479,.0992099,.486126,-.107173,.504546,.10999,.488066,-.11677,.50557,.121476,.490521,-.126725,.506849,.133672,.494232,-.136793,.50911,.146731,.498302,-.147116,.511345,.160577,.503565,-.157446,.514344,.175335,.510902,-.168121,.518824,.191207,.519263,-.178799,.523666,.208058,.528204,-.189407,.528296,.225875,.538854,-.200145,.533724,.244782,.551278,-.210701,.539833,.264753,.565222,-.221303,.546131,.285745,.579403,-.231688,.551496,.307592,.595469,-.241718,.556809,.330582,.610929,-.250992,.559641,.354995,.629433,-.259602,.562379,.382471,.648504,-.267038,.563676,.411126,.66756,-.273388,.562092,.440924,.689143,-.278788,.560807,.472118,.709056,-.282783,.555701,.503774,.729855,-.285836,.548698,.536364,.748954,-.287078,.538544,.56895,.768373,-.287133,.526711,.601991,.78827,-.285839,.512511,.635403,.807465,-.283238,.496323,.668797,.825194,-.27906,.477638,.702584,.842203,-.272286,.456253,.736393,.857749,-.263854,.432412,.77096,.874799,-.253943,.407806,.80489,.887497,-.24237,.38033,.83771,.89966,-.230278,.352446,.870376,.911753,-.21646,.323268,.902256,.923011,-.202071,.294314,.933306,.932375,-.185519,.264104,.965177,.940537,-.167604,.234035,.996303,.948904,-.149068,.20412,1.0261,.955263,-.129539,.175431,1.05304,.960303,-.109932,.148116,1.07617,.965512,-.0880572,.119693,1.09742,.973466,-.0660548,.0901619,1.11721,.98284,-.0439228,.0599875,1.13436,.992216,-.0219588,.0298975,1.15006,.999946,119402e-9,-208547e-10,1.16471,.447827,-100414e-10,.491543,914833e-11,.454778,-251257e-9,.499172,22891e-8,.453519,-.00100342,.497787,914184e-9,.45357,-.00225776,.497847,.00205701,.453578,-.00401371,.497855,.00365705,.45357,-.00627107,.497841,.00571453,.453598,-.00902968,.497864,.00823019,.453627,-.0122888,.497882,.0112049,.453684,-.0160475,.497923,.0146405,.453764,-.0203044,.49798,.0185394,.453866,-.0250576,.498049,.0229054,.453996,-.0303028,.49813,.0277424,.454196,-.0360379,.498267,.0330587,.454457,-.0422521,.498445,.0388613,.454926,-.0488393,.498812,.0451767,.455525,-.0558653,.499272,.0520153,.456074,-.0633772,.499625,.0593754,.456752,-.0713606,.500049,.0672751,.457648,-.07971,.500615,.0757447,.458849,-.0883032,.501399,.0848231,.46029,-.0974095,.502293,.0945135,.462,-.106729,.503301,.104848,.464121,-.116354,.504533,.115884,.466889,-.126214,.506172,.127652,.470744,-.136324,.508667,.14024,.47488,-.146595,.510995,.153673,.480845,-.157027,.514832,.168053,.488262,-.167658,.519506,.183508,.496547,-.178343,.524347,.199948,.506254,-.188916,.52983,.217503,.517961,-.199975,.536357,.236272,.531484,-.210624,.543641,.256096,.545496,-.221227,.550048,.277085,.559497,-.231568,.555076,.298615,.575752,-.241698,.560541,.321547,.591999,-.251172,.564156,.345602,.610654,-.260178,.567607,.371851,.630484,-.268094,.56923,.40076,.651807,-.274661,.569779,.430801,.67239,-.280331,.566791,.461939,.693024,-.284501,.562007,.493854,.715473,-.287852,.555791,.526992,.736323,-.28929,.546345,.560102,.755771,-.289405,.534,.593543,.775424,-.2881,.519114,.627256,.795447,-.285562,.502543,.661464,.815319,-.281416,.484773,.695206,.831769,-.275523,.463445,.729044,.849464,-.267516,.440269,.764069,.866775,-.257584,.415049,.799089,.881252,-.245817,.388049,.831948,.894209,-.233127,.35889,.865526,.906922,-.219579,.329915,.89818,.919686,-.204491,.300441,.930013,.929044,-.188962,.269445,.962061,.938393,-.171079,.238402,.994214,.94661,-.15199,.208204,1.02533,.953095,-.131953,.178653,1.0529,.958644,-.111233,.150684,1.0771,.963925,-.0903098,.122359,1.09855,.971995,-.0680505,.0923342,1.11874,.981658,-.0448512,.0614195,1.13635,.991649,-.0221931,.0303582,1.15238,.999985,393403e-9,-111086e-9,1.16772,.396806,-971563e-11,.457671,842355e-11,.429186,-249421e-9,.495017,21625e-8,.429324,-998052e-9,.495173,865322e-9,.429175,-.00224487,.494999,.00194637,.429129,-.00399041,.494952,.00346004,.429153,-.00623476,.494974,.00540684,.429168,-.0089773,.494983,.00778714,.429207,-.0122175,.495012,.0106022,.429257,-.0159542,.495047,.0138535,.429338,-.0201864,.495106,.0175443,.429431,-.0249104,.495165,.0216774,.429587,-.0301252,.495279,.0262594,.429796,-.0358249,.495432,.0312968,.430065,-.0419972,.495621,.0367985,.430588,-.0485144,.496061,.042798,.43113,-.0555028,.496472,.0492914,.431743,-.0629852,.496904,.0562907,.432448,-.0709256,.497369,.0638056,.433414,-.0791942,.498032,.071885,.434638,-.0877346,.498854,.0805517,.43611,-.0968056,.499812,.0898047,.437859,-.106002,.500891,.0997142,.440017,-.115648,.502198,.110289,.443236,-.125427,.504389,.121644,.44697,-.135492,.506809,.133769,.451689,-.145746,.509858,.146787,.45811,-.156219,.514247,.160793,.465305,-.166834,.518816,.175791,.474085,-.177546,.524331,.191906,.484808,-.188262,.53104,.209199,.49732,-.199346,.538511,.227825,.509693,-.209951,.544554,.247269,.524367,-.220533,.551616,.267978,.539228,-.231082,.557368,.289672,.55644,-.241342,.563782,.31268,.574204,-.250964,.568851,.33651,.593388,-.260306,.57312,.362219,.613358,-.268667,.574916,.390322,.634512,-.275591,.575053,.420478,.65563,-.281328,.572404,.451614,.678265,-.285948,.568893,.484112,.70011,-.289408,.561878,.517348,.723005,-.291328,.55359,.551355,.743744,-.291418,.541099,.585109,.763949,-.290252,.526489,.619487,.784186,-.287648,.509496,.65404,.804304,-.283782,.491484,.688649,.823629,-.278067,.470517,.723133,.84094,-.270588,.44705,.757163,.857852,-.261188,.421252,.792816,.874934,-.249313,.394191,.827248,.888709,-.236492,.365359,.861074,.902589,-.222185,.336016,.894417,.914201,-.207314,.30527,.926825,.925978,-.191146,.274532,.9595,.93512,-.174135,.243393,.991583,.943656,-.155231,.212414,1.02356,.951719,-.134403,.182005,1.05239,.957164,-.113023,.153043,1.07754,.962656,-.0914493,.124186,1.09984,.970695,-.0694179,.0941654,1.12,.980749,-.0466199,.0629671,1.13849,.991205,-.0227032,.0311146,1.15494,.999884,632388e-9,-254483e-9,1.1706,.379821,-957289e-11,.460637,789337e-11,.405188,-247483e-9,.491396,204064e-9,.404796,-989434e-9,.490914,815853e-9,.40483,-.00222607,.490949,.00183559,.40473,-.00395723,.49084,.00326332,.404731,-.00618287,.490836,.00509945,.404768,-.00890258,.490871,.00734463,.404791,-.0121156,.490883,.00999992,.404857,-.0158214,.490938,.0130676,.404943,-.0200178,.491004,.0165503,.405059,-.0247027,.491093,.0204521,.405213,-.0298729,.491205,.0247788,.405399,-.0355226,.491333,.0295373,.405731,-.0416352,.491604,.034741,.406303,-.0480807,.492116,.0404255,.406814,-.0550458,.492506,.0465732,.407404,-.0624652,.492926,.0532058,.408149,-.0702958,.493442,.0603442,.409128,-.0784623,.494136,.0680297,.410408,-.087007,.495054,.0762786,.411813,-.0959639,.495962,.0851046,.413735,-.105075,.497257,.0945878,.416137,-.114646,.498882,.104725,.41934,-.124394,.501132,.11563,.423326,-.134328,.503883,.127325,.428419,-.14458,.50747,.139911,.43484,-.154979,.511964,.153481,.442641,-.165628,.517328,.168114,.452511,-.176365,.524258,.183995,.463473,-.187298,.531248,.200953,.475564,-.198244,.538367,.219176,.488664,-.208938,.545175,.238514,.504073,-.219599,.553227,.259129,.520832,-.230378,.560653,.280997,.538455,-.240703,.567523,.303821,.55709,-.250548,.573287,.327948,.576646,-.259964,.577795,.353362,.596705,-.268721,.580077,.380336,.618053,-.276054,.58018,.4101,.640303,-.282176,.578747,.44161,.662365,-.286931,.574294,.474106,.684542,-.290521,.567035,.507549,.707984,-.292672,.558687,.541853,.730913,-.293189,.547606,.576581,.752948,-.292199,.533471,.61172,.773452,-.289508,.516395,.646339,.794715,-.285716,.497873,.682131,.814251,-.280051,.476845,.716396,.833057,-.272873,.453449,.751503,.84959,-.263982,.427857,.786085,.867022,-.252745,.400335,.821355,.882277,-.239655,.371304,.85646,.895375,-.225386,.340397,.890828,.909347,-.209587,.310005,.923532,.921885,-.193433,.2796,.956419,.932127,-.176135,.247276,.989445,.941869,-.157872,.216186,1.02221,.949735,-.137577,.185602,1.05195,.956617,-.115285,.155767,1.07822,.961974,-.0928418,.126103,1.10149,.96972,-.0700592,.0956758,1.12207,.98012,-.0474671,.0643269,1.1408,.990825,-.0238113,.0320863,1.1577,.999876,381574e-9,-812203e-10,1.17403,.367636,-961342e-11,.469176,753287e-11,.380377,-244772e-9,.485434,191797e-9,.380416,-978857e-9,.485475,767015e-9,.380376,-.00220165,.485435,.00172522,.380419,-.00391408,.485487,.00306734,.380438,-.00611549,.485505,.00479332,.380462,-.00880558,.485525,.00690391,.380496,-.0119837,.485551,.00940039,.38056,-.0156487,.485605,.0122848,.38064,-.0197988,.485666,.0155601,.380767,-.0244324,.48577,.0192313,.380909,-.0295444,.485871,.0233032,.381142,-.0351321,.48606,.0277861,.381472,-.0411535,.486336,.0326939,.382015,-.0475408,.486833,.0380565,.382523,-.0544395,.487231,.0438615,.383129,-.061784,.487683,.0501332,.383952,-.0695085,.488313,.0568996,.38498,-.0775819,.489077,.0641952,.386331,-.0860443,.490113,.0720324,.387788,-.0948406,.491099,.0804379,.389808,-.103899,.492566,.0894899,.39252,-.113313,.494601,.0992098,.395493,-.123007,.496619,.109641,.399826,-.132859,.499912,.120919,.405341,-.143077,.504061,.133107,.411932,-.153465,.508905,.146263,.420591,-.164108,.515482,.160544,.43101,-.174893,.523191,.176123,.441881,-.185839,.53026,.192757,.453919,-.196633,.537295,.210535,.468715,-.207611,.546156,.229886,.485182,-.218517,.555173,.250543,.501926,-.229249,.562728,.27221,.51785,-.239481,.567494,.294892,.536947,-.249395,.573889,.318987,.557115,-.259,.578831,.344348,.577966,-.268075,.582055,.371223,.599489,-.276115,.583307,.399834,.62479,-.282523,.583902,.431415,.647504,-.287663,.57953,.464301,.670601,-.291538,.573103,.498123,.693539,-.293842,.563731,.532662,.717385,-.294681,.553169,.567925,.741533,-.293717,.539908,.603502,.762142,-.291156,.521902,.639074,.783014,-.28719,.502815,.674439,.805158,-.281773,.482598,.710497,.823646,-.274682,.458949,.7456,.841879,-.266184,.433129,.781085,.859515,-.255682,.406064,.816,.875335,-.242849,.376509,.851074,.890147,-.228329,.345502,.886473,.903144,-.212491,.31428,.920751,.916618,-.195695,.282994,.954606,.927953,-.178267,.251091,.988402,.937414,-.159549,.219107,1.02141,.946823,-.140022,.18896,1.05167,.954651,-.118154,.158667,1.07819,.959955,-.0946636,.128808,1.1025,.96858,-.0711792,.0973787,1.12391,.97938,-.0475046,.0650965,1.14322,.990498,-.024059,.0326267,1.16077,.999844,-512408e-10,112444e-9,1.17727,.316912,-934977e-11,.425996,695559e-11,.356423,-241372e-9,.479108,179562e-9,.356272,-965292e-9,.478897,71811e-8,.356262,-.00217182,.478894,.00161574,.356265,-.00386092,.478895,.00287261,.356278,-.0060324,.478905,.00448907,.356293,-.00868565,.478914,.00646572,.356346,-.0118207,.478965,.00880438,.356395,-.0154355,.479001,.0115066,.356484,-.019529,.479075,.0145762,.356609,-.0240991,.47918,.018018,.356766,-.0291413,.479305,.0218379,.357009,-.0346498,.479512,.0260454,.357424,-.0405462,.479909,.0306657,.357899,-.0468825,.480337,.0357054,.358424,-.0536887,.480771,.0411728,.359041,-.0609416,.481242,.0470841,.359903,-.0685239,.481943,.0534831,.360932,-.0764883,.482741,.0603795,.362196,-.0848364,.483688,.0678028,.363847,-.0935002,.484947,.0758086,.365972,-.102471,.486588,.0844173,.368741,-.111751,.488787,.0937199,.372146,-.121334,.491405,.103732,.377114,-.131147,.495604,.114608,.38226,-.141213,.499436,.126345,.389609,-.151632,.505334,.139116,.397925,-.162073,.51168,.152995,.407824,-.172819,.518876,.168071,.420014,-.183929,.527639,.184495,.434266,-.195032,.537588,.20232,.447352,-.205792,.544379,.221189,.463726,-.216704,.553422,.241616,.481406,-.227531,.562074,.263298,.498707,-.238017,.568227,.286116,.518039,-.247936,.574473,.3101,.538277,-.257437,.579191,.335401,.561166,-.266829,.584807,.362246,.583189,-.275329,.586476,.390609,.606024,-.28234,.585578,.420998,.632419,-.287924,.584496,.454357,.656128,-.291972,.577766,.488233,.679953,-.29456,.56875,.523248,.704654,-.295816,.558388,.559168,.729016,-.295157,.544826,.595326,.752062,-.292779,.528273,.631864,.773138,-.288681,.508482,.667793,.794869,-.283358,.487341,.704035,.815101,-.27608,.46354,.739925,.834212,-.26767,.438672,.775539,.852368,-.257397,.411239,.810895,.870207,-.245689,.3829,.846472,.884063,-.231452,.351496,.881788,.898284,-.215561,.31895,.917438,.912964,-.198208,.287367,.952422,.924666,-.180426,.254487,.987551,.934429,-.161525,.222226,1.02142,.943485,-.141197,.191143,1.05218,.9521,-.120085,.161112,1.07937,.957876,-.0975881,.130982,1.10403,.966943,-.0726842,.0990553,1.12616,.978313,-.0483705,.0662818,1.14619,.990048,-.0239072,.0329243,1.16413,.999984,461885e-9,-772859e-10,1.18099,.321287,-935049e-11,.455413,659662e-11,.332595,-237513e-9,.471437,167562e-9,.332729,-949964e-9,.471618,670192e-9,.332305,-.00213618,.471028,.00150712,.332326,-.00379765,.471055,.00267959,.332344,-.00593353,.471072,.00418751,.332356,-.00854349,.471077,.00603172,.332403,-.0116268,.471121,.00821362,.332461,-.0151824,.47117,.0107357,.332552,-.0192088,.471251,.0136014,.332657,-.0237024,.47133,.0168152,.332835,-.0286615,.471487,.0203853,.333083,-.0340765,.471708,.0243212,.333547,-.0398563,.47219,.0286518,.333989,-.0460916,.472587,.0333763,.334532,-.0527897,.473054,.0385084,.335167,-.0599284,.473568,.0440638,.33608,-.0673514,.474362,.0500962,.337146,-.0752237,.475231,.0566022,.338462,-.083418,.476282,.0636272,.34014,-.0919382,.477615,.0712153,.342341,-.100741,.479404,.079417,.345088,-.109905,.481618,.0882631,.349049,-.119369,.485081,.0978851,.353939,-.129033,.489317,.108336,.359893,-.139038,.494309,.119698,.366945,-.149411,.499983,.132024,.375814,-.159843,.507185,.145558,.387112,-.170664,.516392,.160433,.40023,-.181897,.526519,.176648,.412555,-.192785,.53423,.193922,.427023,-.203663,.542741,.212662,.443685,-.214695,.552066,.232944,.461499,-.225561,.560762,.254495,.480975,-.236257,.569421,.277531,.501,-.24639,.576101,.301724,.521691,-.256101,.581493,.327112,.543478,-.265289,.585221,.353917,.566094,-.273938,.587614,.381941,.589578,-.281679,.587991,.41172,.614583,-.287655,.585928,.444148,.641813,-.292228,.582092,.478617,.666189,-.295172,.57398,.51397,.690475,-.29648,.561676,.550118,.715543,-.296203,.548758,.586933,.740405,-.293999,.532792,.62384,.762183,-.28998,.512735,.660723,.786069,-.28478,.492402,.69807,.806812,-.277568,.469058,.734422,.826987,-.268951,.443017,.770946,.844588,-.259049,.415501,.80699,.863725,-.2471,.387328,.842107,.879137,-.234157,.356108,.878078,.894634,-.218719,.324315,.914058,.909162,-.201293,.291813,.949922,.92072,-.18267,.258474,.985337,.93158,-.163212,.225593,1.0205,.941238,-.142771,.193986,1.05273,.949293,-.120956,.163392,1.08075,.956226,-.0985743,.132934,1.10559,.96546,-.075118,.101255,1.12823,.977403,-.0497921,.0675441,1.149,.989648,-.0241574,.0334681,1.16765,1.00001,5762e-7,-184807e-9,1.18519,.303474,-916603e-11,.4542,61243e-10,.308894,-232869e-9,.462306,155592e-9,.309426,-931661e-9,.463093,622499e-9,.308643,-.0020949,.461933,.00139979,.308651,-.0037242,.461941,.00248874,.308662,-.00581873,.46195,.00388933,.308687,-.00837818,.461974,.00560247,.308728,-.0114016,.462011,.00762948,.308789,-.0148884,.462067,.00997326,.308882,-.0188369,.462151,.0126375,.309007,-.0232436,.462263,.0156271,.30918,-.0281054,.462417,.0189498,.309442,-.0334065,.462667,.0226167,.309901,-.0390589,.463162,.0266614,.310331,-.0452042,.463555,.0310715,.310858,-.0517735,.464019,.0358698,.311576,-.0587359,.464669,.0410848,.312436,-.0660383,.465406,.0467453,.313526,-.0737266,.466339,.0528718,.314903,-.0817574,.467504,.0595039,.316814,-.090167,.469226,.0666888,.318965,-.0987555,.470981,.0744658,.322077,-.107792,.473814,.082912,.325947,-.117098,.477241,.0920846,.331008,-.126602,.48184,.102137,.337893,-.136619,.488334,.113135,.345106,-.146838,.494415,.12511,.355111,-.157357,.503275,.138356,.365095,-.167955,.510966,.152686,.378344,-.179157,.521508,.16856,.391599,-.190143,.530455,.18561,.407786,-.20123,.541275,.204308,.425294,-.212456,.551784,.224623,.444021,-.223568,.561493,.246172,.463418,-.234154,.569886,.268979,.484077,-.244546,.577116,.293411,.505513,-.254301,.582914,.318936,.527672,-.263564,.587208,.345856,.550565,-.272332,.589277,.374054,.573656,-.280011,.588426,.403276,.59827,-.286924,.587504,.43474,.624731,-.291994,.583401,.468767,.652396,-.295159,.576997,.504411,.67732,-.296954,.565863,.54114,.703147,-.296877,.552316,.57816,.728715,-.295147,.536773,.616124,.752448,-.291275,.51771,.653885,.775169,-.285905,.496087,.691537,.799307,-.279064,.474232,.729251,.819482,-.270294,.447676,.766267,.837659,-.260032,.419656,.802616,.856903,-.248497,.391328,.838583,.873325,-.235252,.360285,.874711,.889788,-.221126,.329215,.91077,.904486,-.204304,.296392,.94653,.917711,-.185562,.262159,.983828,.928969,-.165635,.229142,1.01955,.939707,-.14442,.19673,1.05317,.948167,-.122147,.165095,1.0823,.955222,-.099098,.13451,1.10791,.964401,-.0755332,.102476,1.1312,.976605,-.0513817,.0689667,1.15218,.989085,-.0258499,.034506,1.17129,.999908,617773e-9,-271268e-9,1.18961,.285803,-905752e-11,.452348,572272e-11,.284689,-22732e-8,.450581,143626e-9,.285263,-910214e-9,.451482,575099e-9,.285302,-.00204784,.451553,.00129395,.285318,-.00364057,.451574,.0023006,.28533,-.00568813,.451585,.00359547,.285361,-.00819001,.451618,.00517934,.285397,-.0111458,.45165,.007054,.285447,-.0145536,.451688,.00922167,.285527,-.0184127,.451758,.0116869,.285688,-.0227207,.451929,.0144555,.28584,-.0274712,.452055,.0175341,.286136,-.0326278,.452369,.0209406,.286574,-.0381792,.452853,.0246965,.287012,-.0441879,.453272,.0287996,.287542,-.0506096,.453752,.033268,.288299,-.0573634,.454488,.0381504,.289186,-.0645458,.455294,.0434447,.290302,-.0720405,.456301,.0491973,.291776,-.0799046,.457648,.0554453,.29372,-.088117,.459483,.0622311,.296052,-.0965328,.461571,.0695992,.299563,-.105409,.465085,.077658,.30335,-.114553,.468506,.0864176,.309167,-.123917,.474423,.0961078,.31529,-.13381,.47995,.106643,.324163,-.144021,.488592,.118322,.333272,-.154382,.496461,.131133,.344224,-.165015,.50562,.145208,.357733,-.176168,.516719,.16073,.373046,-.187468,.528513,.177807,.38788,-.198488,.537713,.196072,.405133,-.209545,.547999,.21605,.423845,-.220724,.55759,.237484,.443777,-.231518,.566246,.26039,.464824,-.242035,.574326,.284835,.486635,-.251898,.58037,.310518,.51012,-.261304,.58568,.337678,.535301,-.270384,.590197,.366242,.559193,-.27841,.590569,.395873,.583544,-.285325,.588161,.426857,.608834,-.291113,.584249,.459477,.635753,-.294882,.57763,.494734,.664367,-.297088,.569479,.532023,.689688,-.297364,.555064,.569629,.715732,-.295949,.539522,.608124,.741307,-.292259,.521613,.646231,.764949,-.287063,.49969,.684938,.788599,-.28012,.476747,.723548,.81048,-.27153,.45116,.761135,.831372,-.261289,.424101,.798916,.850092,-.249559,.39443,.835952,.867777,-.236348,.363849,.871606,.884632,-.221569,.332477,.907843,.90047,-.20618,.300667,.944187,.914524,-.188771,.266552,.981371,.926892,-.168362,.232349,1.01841,.937951,-.146761,.199359,1.05308,.947236,-.123813,.1675,1.0839,.954367,-.099984,.136166,1.11047,.963907,-.0759278,.103808,1.13414,.976218,-.0511367,.0697061,1.15575,.988772,-.0267415,.0352529,1.17531,.999888,-520778e-9,289926e-9,1.19389,.263546,-883274e-11,.441896,526783e-11,.262352,-221849e-9,.439889,132311e-9,.262325,-886683e-9,.439848,528824e-9,.26228,-.00199476,.439765,.00118975,.262372,-.00354671,.439922,.00211568,.26239,-.00554141,.439941,.00330652,.262412,-.00797888,.439961,.00476346,.262453,-.0108584,.440002,.00648818,.262528,-.0141788,.440085,.0084835,.262615,-.017938,.440166,.0107533,.262744,-.0221346,.440291,.0133044,.262939,-.026762,.440493,.0161445,.263277,-.0317573,.440889,.0192974,.26368,-.0371832,.441338,.0227699,.264106,-.0430371,.441753,.0265698,.264624,-.0493035,.442227,.0307178,.265378,-.0558669,.442985,.0352616,.266253,-.0628718,.443795,.0401968,.267478,-.0701569,.445008,.04559,.269062,-.077845,.446599,.0514539,.270926,-.0857941,.448349,.0578382,.273693,-.0940773,.451221,.0648363,.276746,-.102704,.454097,.0724389,.281693,-.111735,.459517,.0808744,.287335,-.121004,.46531,.0901551,.29448,-.130734,.472605,.100371,.30257,-.140777,.480251,.111644,.312465,-.15111,.489444,.124111,.324856,-.16189,.500919,.137979,.33774,-.172946,.511317,.153163,.35255,-.184152,.522684,.169817,.367786,-.19522,.53248,.187886,.385474,-.20632,.543326,.207634,.404976,-.217744,.554109,.229165,.425203,-.228691,.563395,.252068,.446704,-.239299,.571565,.276471,.468951,-.249348,.577935,.302323,.493487,-.258933,.584309,.329882,.517861,-.268009,.58773,.358525,.543309,-.276238,.589612,.388585,.569704,-.28356,.589294,.419787,.594871,-.289497,.585137,.452114,.622555,-.294452,.580356,.486466,.651167,-.296918,.57185,.523079,.677332,-.297647,.558428,.5611,.703718,-.296321,.542232,.599592,.730262,-.293339,.524541,.639138,.754304,-.288036,.502691,.677978,.778051,-.281018,.479212,.716537,.801557,-.272414,.454071,.75586,.822559,-.262419,.425952,.794477,.843051,-.250702,.397313,.832664,.86232,-.237264,.366534,.869876,.879044,-.222716,.334816,.906973,.896362,-.206827,.303143,.943558,.910342,-.189659,.269699,.979759,.924119,-.171108,.236411,1.01718,.935374,-.149579,.202224,1.05289,.944295,-.126295,.16989,1.08496,.952227,-.101511,.138089,1.11256,.962041,-.0766392,.105053,1.1375,.97528,-.0511967,.070329,1.15983,.988476,-.025463,.0351268,1.17987,.999962,286808e-10,145564e-10,1.19901,.227089,-841413e-11,.404216,472707e-11,.239725,-215083e-9,.426708,120833e-9,.239904,-860718e-9,.427028,483555e-9,.239911,-.00193661,.427039,.00108806,.239914,-.00344276,.42704,.00193457,.239933,-.00537907,.427064,.00302363,.239944,-.00774482,.427065,.00435604,.239993,-.01054,.427122,.00593398,.240052,-.0137626,.427179,.00775987,.240148,-.0174115,.427279,.00983854,.240278,-.021484,.42741,.0121763,.240472,-.0259729,.427618,.0147827,.240839,-.0308131,.428086,.0176837,.241201,-.0360893,.428482,.0208775,.241626,-.0417723,.428907,.0243821,.242207,-.0478337,.42952,.0282228,.24298,-.0542199,.430332,.0324333,.243881,-.0610015,.431222,.0370252,.245123,-.0680874,.432512,.0420535,.24667,-.0755482,.434088,.0475414,.248779,-.0832873,.436323,.0535542,.251665,-.0913546,.439509,.0601716,.255305,-.0998489,.443478,.0674282,.260049,-.108576,.448713,.0754673,.266192,-.117754,.455524,.084339,.273158,-.127294,.4627,.0941683,.282131,-.137311,.472068,.10515,.293332,-.147736,.483565,.117402,.304667,-.158357,.493702,.130824,.317785,-.169274,.504708,.145724,.333245,-.180595,.517107,.16215,.349843,-.191892,.528849,.180149,.367944,-.203168,.540301,.199746,.387579,-.214443,.551514,.221047,.408247,-.225624,.560906,.243981,.43014,-.236422,.56959,.268513,.452669,-.24654,.576098,.294409,.476196,-.256157,.580925,.322002,.501157,-.265289,.584839,.351052,.527632,-.273671,.587614,.3812,.555754,-.281254,.589119,.412994,.581682,-.287448,.585204,.445498,.608196,-.292614,.579006,.479505,.635661,-.296068,.571297,.514643,.664999,-.297395,.560855,.552213,.691039,-.296645,.544525,.591365,.7179,-.293785,.526535,.630883,.744059,-.289089,.50545,.670932,.76863,-.282239,.482514,.710904,.793273,-.273688,.457246,.750259,.814731,-.26328,.428872,.78948,.835603,-.251526,.399384,.828597,.85489,-.238339,.368811,.866892,.872828,-.223607,.336617,.90563,.889462,-.207538,.303997,.943538,.904929,-.190297,.270812,.980591,.919101,-.172034,.237453,1.01935,.930536,-.152058,.204431,1.05498,.941223,-.129515,.172495,1.08717,.94982,-.104263,.140175,1.11551,.960592,-.0781944,.106465,1.14098,.974629,-.051688,.0711592,1.16418,.98811,-.0253929,.0354432,1.18465,1.00004,804378e-9,-330876e-9,1.20462,.214668,-821282e-11,.406619,433582e-11,.218053,-208144e-9,.413025,109887e-9,.217987,-832212e-9,.412901,439362e-9,.217971,-.00187246,.412876,988623e-9,.217968,-.00332855,.41286,.00175772,.217985,-.00520055,.412882,.00274729,.218014,-.00748814,.412916,.00395842,.218054,-.0101901,.412957,.00539274,.218106,-.0133057,.413005,.00705348,.218217,-.0168342,.413139,.00894581,.218338,-.0207707,.413258,.0110754,.21855,-.0251001,.413509,.0134551,.218913,-.0297861,.413992,.0161081,.219265,-.0348956,.414383,.0190307,.219696,-.0403909,.414839,.0222458,.220329,-.0462003,.415567,.025792,.220989,-.0524208,.41621,.0296637,.222027,-.058948,.417385,.0339323,.223301,-.0658208,.418779,.0386055,.224988,-.0730347,.420665,.0437355,.227211,-.0805274,.423198,.0493844,.230131,-.088395,.426566,.0556135,.233908,-.0966208,.43091,.0624829,.239092,-.105223,.437148,.0701636,.245315,-.11424,.444302,.0786949,.253166,-.12368,.453262,.0882382,.262374,-.133569,.463211,.0988682,.273145,-.143836,.474271,.110727,.285512,-.154577,.4863,.123945,.299512,-.165501,.498817,.138581,.314287,-.176698,.510341,.154676,.331083,-.188066,.522583,.172459,.349615,-.199597,.534879,.191979,.369318,-.210843,.546083,.21309,.390377,-.222068,.5562,.235998,.412411,-.233059,.564704,.260518,.435715,-.24357,.572314,.286795,.461196,-.253356,.579395,.314559,.485587,-.262362,.581985,.343581,.511908,-.270895,.584347,.374367,.539798,-.278452,.58505,.406015,.567974,-.284877,.583344,.439168,.594303,-.290124,.577348,.473005,.622951,-.294183,.570751,.508534,.652404,-.296389,.561541,.544764,.679291,-.296605,.546426,.582927,.706437,-.294095,.528599,.622681,.734485,-.28978,.508676,.663567,.758841,-.283363,.484768,.704092,.78537,-.275015,.460434,.745101,.807315,-.264689,.432166,.784712,.8271,-.252597,.401807,.824241,.849191,-.239154,.371458,.863803,.867046,-.224451,.338873,.903063,.8852,-.208342,.306175,.942763,.901771,-.190684,.272759,.981559,.915958,-.172105,.239306,1.02048,.928046,-.152214,.206071,1.05765,.939961,-.130247,.17367,1.08999,.948711,-.10672,.142201,1.11829,.959305,-.0808688,.108454,1.14467,.973009,-.0539145,.0728109,1.16839,.987631,-.0262947,.0360625,1.19004,.999978,.00132758,-559424e-9,1.21058,.193925,-793421e-11,.391974,392537e-11,.196746,-200315e-9,.397675,991033e-10,.19667,-801099e-9,.397521,396342e-9,.196633,-.00180246,.397445,891829e-9,.196654,-.00320443,.397482,.00158582,.196659,-.00500647,.39748,.00247867,.196683,-.0072086,.397506,.00357167,.196728,-.00981001,.397562,.00486675,.196792,-.0128096,.397633,.00636707,.19689,-.0162055,.397746,.00807752,.197017,-.0199943,.397884,.0100052,.19729,-.024139,.39827,.0121691,.197583,-.0286671,.398639,.0145755,.197927,-.0335858,.399034,.0172355,.198383,-.0388806,.399554,.0201718,.199002,-.0444736,.400289,.0234194,.199739,-.0504583,.401111,.026984,.200784,-.056729,.402349,.0309217,.202075,-.0633643,.403841,.0352496,.203898,-.0703247,.406076,.0400313,.206199,-.0775565,.408841,.0453282,.209252,-.085184,.41259,.0511794,.213638,-.0931994,.418288,.0577459,.21881,-.101617,.424681,.0650508,.225642,-.11052,.433429,.0732759,.233717,-.119772,.442897,.0824683,.242823,-.129505,.452888,.0927484,.254772,-.139906,.466407,.104417,.266603,-.150402,.477413,.117211,.28073,-.161395,.490519,.131598,.295399,-.172465,.50201,.147407,.312705,-.183982,.515311,.165031,.331335,-.195532,.52786,.184336,.351037,-.206971,.5392,.205361,.372175,-.218117,.54941,.228043,.394548,-.229327,.558642,.25267,.419598,-.240052,.567861,.279071,.443922,-.249937,.573332,.306882,.471495,-.259407,.58013,.33661,.496769,-.267749,.580564,.367328,.524951,-.275524,.581696,.399753,.55318,-.282148,.579885,.433134,.581577,-.287533,.575471,.467534,.609231,-.291612,.567445,.502943,.637478,-.293911,.557657,.53871,.667795,-.295096,.546535,.576568,.694272,-.294073,.529561,.614929,.722937,-.290386,.510561,.655909,.749682,-.284481,.487846,.697663,.774754,-.276188,.462487,.738515,.799301,-.266215,.43481,.779802,.820762,-.254116,.404879,.820045,.843231,-.240393,.374559,.860294,.861857,-.225503,.341582,.900965,.880815,-.209382,.308778,.941727,.89766,-.19155,.275232,.980916,.912926,-.172346,.240938,1.02162,.926391,-.151799,.207223,1.0597,.938429,-.129968,.17484,1.09291,.947834,-.10651,.142984,1.12248,.958432,-.0824098,.109902,1.149,.972402,-.0565242,.0744454,1.1733,.987191,-.028427,.0373794,1.19538,.999975,385685e-10,-4203e-8,1.21676,.178114,-766075e-11,.385418,354027e-11,.176074,-191966e-9,.381002,887135e-10,.17601,-767549e-9,.380861,354715e-9,.17598,-.00172696,.380798,798168e-9,.175994,-.00307012,.380824,.00141928,.176017,-.00479684,.380858,.00221859,.176019,-.00690648,.380839,.00319714,.176072,-.00939888,.380913,.0043572,.176131,-.0122726,.380979,.005702,.176239,-.0155264,.38112,.00723689,.176371,-.0191551,.381272,.00896907,.176638,-.023117,.381669,.0109194,.176912,-.0274633,.382015,.0130903,.177279,-.032173,.382476,.0154949,.17774,-.0372219,.383041,.0181669,.178344,-.0426132,.38378,.0211209,.179153,-.0483309,.384773,.0243899,.180197,-.0543447,.386076,.0280062,.181581,-.0607122,.387809,.032004,.18344,-.0673855,.390205,.036453,.186139,-.0743989,.393944,.0414162,.189432,-.0817731,.39832,.0469394,.193795,-.0895464,.404188,.0531442,.199641,-.0978264,.4121,.0601374,.206679,-.106499,.421425,.0680078,.214865,-.115654,.431504,.076919,.224406,-.125268,.442526,.0868835,.235876,-.135475,.455465,.0981875,.248335,-.146023,.4681,.110759,.262868,-.157016,.482069,.124885,.278962,-.168245,.496182,.140645,.295082,-.17958,.507401,.157838,.313738,-.191227,.520252,.17695,.333573,-.202718,.531708,.197817,.356433,-.214424,.544509,.220785,.378853,-.225492,.55373,.245306,.402717,-.236236,.561348,.271593,.428375,-.246568,.568538,.299776,.454724,-.255941,.573462,.329433,.482291,-.264511,.576356,.360598,.509706,-.272129,.576446,.393204,.538805,-.278979,.575298,.427227,.568919,-.284528,.572154,.462157,.596804,-.288801,.564691,.497997,.625987,-.291334,.555134,.534467,.656414,-.292722,.545051,.571736,.683916,-.292185,.528813,.610158,.711809,-.290043,.51106,.649061,.739547,-.285246,.490103,.690081,.766914,-.277647,.465523,.732554,.791375,-.267603,.437718,.773982,.814772,-.256109,.40882,.81609,.836691,-.242281,.377823,.856849,.856984,-.227155,.34496,.898363,.876332,-.210395,.311335,.939471,.894988,-.192612,.277703,.980799,.911113,-.173236,.243019,1.02215,.924092,-.152258,.209037,1.06139,.936828,-.129575,.175909,1.09635,.946869,-.10594,.143852,1.12707,.958284,-.081318,.110289,1.15419,.972325,-.0556133,.0747232,1.17909,.986878,-.0297899,.0383149,1.20163,.999936,-.00197169,912402e-9,1.22338,.151174,-720365e-11,.351531,309789e-11,.155594,-18279e-8,.361806,78608e-9,.156099,-731569e-9,.362982,314615e-9,.156053,-.00164578,.362869,707845e-9,.156093,-.0029261,.362961,.00125884,.156099,-.00457155,.362959,.00196783,.15612,-.00658224,.362982,.00283622,.156168,-.00895774,.363048,.00386625,.156221,-.0116962,.363101,.00506109,.156324,-.0147973,.363241,.00642675,.156476,-.0182503,.363448,.00797175,.156731,-.0220266,.36384,.00971484,.156994,-.026176,.364179,.0116575,.157341,-.0306701,.36462,.0138207,.157867,-.0354591,.365364,.0162356,.15846,-.0406141,.366111,.0189092,.159308,-.0460519,.367248,.021885,.160426,-.0518096,.368767,.0252004,.161877,-.0578906,.370745,.0288825,.163995,-.0642812,.373831,.0330139,.16655,-.0710067,.377366,.0376283,.170237,-.0781522,.382799,.0428493,.175096,-.0857172,.389915,.0487324,.181069,-.0938025,.398487,.0554214,.188487,-.102363,.408799,.0630189,.197029,-.111343,.419991,.071634,.206684,-.120812,.431455,.0812797,.218698,-.131033,.445746,.0923651,.230726,-.141373,.457471,.104545,.245516,-.152387,.472388,.118449,.261551,-.163628,.486671,.133923,.277437,-.174814,.49762,.150849,.296662,-.186713,.51162,.169924,.31795,-.198513,.525435,.190848,.339422,-.210119,.536267,.213504,.362143,-.221354,.545982,.237947,.387198,-.23224,.555364,.264427,.412349,-.24257,.561489,.292519,.439274,-.252284,.566903,.322561,.466779,-.261023,.569614,.353952,.496011,-.26899,.571589,.387278,.524964,-.275498,.570325,.421356,.556518,-.281449,.568792,.457314,.584363,-.285526,.560268,.493199,.614214,-.28844,.55205,.530276,.645684,-.289777,.541906,.56855,.673446,-.289722,.526464,.606927,.701924,-.287792,.509872,.645945,.73037,-.284315,.490649,.685564,.757405,-.278804,.467964,.726511,.784025,-.269543,.441468,.768601,.808255,-.258117,.41216,.811321,.830739,-.244728,.380606,.853496,.851914,-.229428,.348111,.895374,.872586,-.212508,.314732,.937674,.891581,-.194025,.280338,.979869,.907641,-.174711,.245203,1.02253,.922233,-.153509,.21077,1.06371,.935878,-.130418,.177399,1.09972,.946338,-.105558,.144507,1.13124,.957265,-.080059,.110508,1.15973,.971668,-.0539766,.0742311,1.18515,.9866,-.0277101,.0375224,1.20858,1.00021,-515531e-9,135226e-9,1.23135,.137468,-686011e-11,.345041,273315e-11,.13703,-173378e-9,.343936,690761e-10,.136986,-693048e-9,.34383,276126e-9,.136964,-.00155931,.343761,621337e-9,.137003,-.00277211,.343863,.00110494,.137012,-.00433103,.343868,.00172744,.137043,-.00623606,.343916,.00249022,.13709,-.0084868,.343986,.00339559,.137145,-.0110814,.344045,.00444687,.137242,-.0140187,.344177,.00565007,.137431,-.0172713,.344491,.00701868,.137644,-.0208605,.344805,.00856042,.13791,-.024792,.345172,.0102863,.138295,-.0290461,.345734,.0122185,.138764,-.0335957,.346371,.0143771,.139415,-.038467,.347298,.0167894,.140272,-.0436176,.348527,.0194895,.141457,-.0491016,.350276,.0225043,.14303,-.0548764,.352646,.0258962,.145289,-.0610096,.356206,.0297168,.148502,-.0674777,.361488,.0340562,.152188,-.074345,.367103,.0389534,.157359,-.0817442,.375247,.0445541,.16379,-.0896334,.385064,.0509535,.171376,-.098005,.396082,.0582611,.179901,-.106817,.407418,.06654,.189892,-.116239,.420031,.075994,.201838,-.12627,.434321,.0867239,.214311,-.136701,.447631,.0987517,.228902,-.147616,.462046,.112353,.245107,-.158871,.476942,.127605,.262292,-.170261,.490285,.144469,.281215,-.182017,.503783,.163282,.301058,-.193729,.515505,.183873,.322752,-.205512,.52682,.206466,.347547,-.217214,.539473,.231194,.370969,-.227966,.546625,.257288,.397533,-.238555,.55472,.285789,.42398,-.248278,.559468,.315746,.452928,-.257422,.564095,.347724,.482121,-.265306,.565426,.380922,.510438,-.272043,.563205,.415639,.541188,-.277614,.561087,.451702,.571667,-.281927,.554922,.48845,.602432,-.285015,.546838,.526442,.634126,-.286512,.537415,.564896,.662816,-.286388,.522906,.604037,.692411,-.284734,.507003,.643795,.720946,-.281297,.488398,.68298,.748293,-.276262,.466353,.723466,.776931,-.269978,.443573,.764565,.801065,-.260305,.415279,.805838,.825843,-.247426,.384773,.849985,.84807,-.232437,.352555,.893174,.869122,-.215806,.318642,.936564,.888963,-.197307,.28381,.980253,.905547,-.177203,.247888,1.02463,.918554,-.155542,.212904,1.06714,.931395,-.131948,.1787,1.10451,.941749,-.106723,.145902,1.13694,.954551,-.0804939,.111193,1.1666,.970279,-.0534239,.0744697,1.19249,.986117,-.0257452,.0368788,1.21665,.999938,.00190634,-.0010291,1.23981,.118493,-647439e-11,.32272,23772e-10,.118765,-163023e-9,.323456,598573e-10,.118772,-65212e-8,.323477,239447e-9,.118843,-.00146741,.323657,538881e-9,.118804,-.00260846,.323553,95826e-8,.118826,-.00407576,.323595,.00149845,.118846,-.00586826,.323617,.00216047,.118886,-.00798578,.32367,.00294679,.118947,-.0104273,.323753,.00386124,.119055,-.0131909,.323922,.00490999,.119241,-.0162444,.324251,.00610804,.11944,-.0196339,.324544,.00745805,.119739,-.0233378,.325026,.00897805,.12011,-.0273179,.325586,.0106895,.120571,-.0316143,.326231,.0126073,.12124,-.0361939,.327264,.0147654,.122162,-.0410511,.328733,.0172001,.123378,-.0462233,.330659,.0199375,.125183,-.0517109,.333754,.0230498,.127832,-.0575652,.338507,.026597,.130909,-.0637441,.343666,.0306345,.135221,-.0704302,.351063,.035273,.14082,-.0776364,.360604,.0406137,.146781,-.0852293,.369638,.0466788,.155121,-.0935351,.3827,.0537628,.16398,-.102234,.39522,.0617985,.173926,-.111465,.40793,.07097,.185137,-.121296,.42105,.0813426,.19826,-.13169,.435735,.0931596,.212938,-.142614,.450932,.106547,.229046,-.153884,.465726,.121575,.246246,-.165382,.479461,.138286,.264637,-.176806,.492106,.15666,.284959,-.188793,.504774,.17728,.308157,-.200763,.518805,.19988,.330951,-.21239,.528231,.224293,.3549,-.223521,.536376,.250541,.381502,-.234169,.544846,.278902,.409529,-.244077,.551717,.309227,.437523,-.253363,.55517,.341426,.467624,-.261659,.557772,.37518,.497268,-.268498,.556442,.41007,.528294,-.274018,.553915,.446445,.559053,-.278169,.549153,.483779,.589329,-.281229,.539878,.522249,.622503,-.282902,.53162,.561754,.652382,-.282815,.518119,.601544,.681847,-.281247,.502187,.641574,.712285,-.277986,.484824,.682633,.740094,-.273017,.463483,.723426,.768478,-.266692,.441299,.763747,.794556,-.258358,.415238,.805565,.819408,-.248807,.386912,.847254,.843411,-.236214,.356165,.891091,.862397,-.219794,.320562,.936174,.883113,-.201768,.285322,.982562,.90023,-.181672,.249713,1.02862,.915192,-.159279,.214546,1.07163,.928458,-.134725,.180285,1.10995,.94069,-.10913,.147119,1.14354,.953409,-.0821315,.112492,1.17372,.969537,-.0542677,.0752014,1.20043,.985612,-.0259096,.0370361,1.22528,.999835,.00298198,-.00151801,1.24959,.10097,-602574e-11,.300277,202619e-11,.101577,-152164e-9,.302077,511662e-10,.101572,-608889e-9,.302066,204751e-9,.101566,-.00136997,.302047,460753e-9,.101592,-.00243557,.302114,819497e-9,.101608,-.0038053,.30214,.00128154,.101627,-.00547906,.30216,.0018483,.101669,-.00745647,.302224,.00252223,.101732,-.00973615,.302318,.00330716,.101844,-.0123097,.302513,.00421061,.102025,-.0151681,.30285,.00524481,.102224,-.0183334,.303166,.0064154,.102515,-.0217819,.303654,.00774063,.102886,-.0255067,.304243,.0092398,.103395,-.029514,.305089,.0109339,.104109,-.0337912,.306301,.0128561,.105074,-.0383565,.30798,.0150338,.10654,-.0432132,.310726,.0175228,.108478,-.0484244,.314351,.0203648,.111015,-.0539339,.319032,.0236325,.114682,-.0598885,.32605,.0274188,.11911,-.0663375,.334109,.0317905,.124736,-.0733011,.344013,.0368502,.131479,-.0807744,.355358,.0427104,.139283,-.0888204,.367614,.0494788,.148054,-.0973394,.380072,.0572367,.159037,-.10665,.395678,.0662704,.169794,-.116221,.40795,.0763192,.18314,-.126632,.423546,.087956,.197515,-.137383,.438213,.101042,.213514,-.148641,.453248,.115827,.23065,-.160117,.46688,.132283,.249148,-.171807,.479962,.150644,.270219,-.183695,.494618,.171073,.292338,-.195574,.506937,.193378,.314999,-.207205,.516463,.217585,.340991,-.218955,.528123,.24428,.367982,-.229917,.537025,.272784,.39432,-.239737,.541627,.302742,.423364,-.249048,.546466,.335112,.453751,-.257329,.549466,.369032,.48416,-.264623,.549503,.404577,.515262,-.270411,.547008,.441337,.547036,-.274581,.542249,.479162,.576614,-.277266,.533015,.517904,.611143,-.279144,.525512,.558508,.640989,-.279001,.51154,.598995,.671182,-.277324,.495641,.639935,.700848,-.273908,.477526,.681017,.729862,-.269063,.457955,.722764,.758273,-.262282,.434846,.764349,.784121,-.254281,.409203,.806206,.809798,-.24505,.382694,.848617,.834953,-.233861,.354034,.892445,.856817,-.221308,.321764,.936263,.877609,-.205996,.288118,.982401,.897489,-.186702,.253277,1.02975,.913792,-.164618,.217963,1.07488,.92785,-.140023,.183221,1.11487,.940378,-.11328,.149385,1.14947,.95273,-.0853958,.114152,1.1807,.969059,-.0568698,.0769845,1.20912,.985574,-.0276502,.0381186,1.23498,.999943,.00239052,-.00126861,1.25987,.0852715,-560067e-11,.279021,171162e-11,.0854143,-140871e-9,.279483,430516e-10,.0854191,-563385e-9,.2795,172184e-9,.0854188,-.00126753,.279493,387464e-9,.0854229,-.00225337,.279501,68918e-8,.0854443,-.00352086,.279549,.00107803,.0854697,-.00506962,.279591,.00155536,.0855093,-.00689873,.279652,.00212354,.0855724,-.00900821,.279752,.00278703,.0856991,-.0113799,.280011,.0035551,.085855,-.0140314,.280297,.00443449,.0860682,-.016963,.280682,.00543636,.086344,-.0201438,.281159,.0065788,.0867426,-.0235999,.281886,.00787977,.087239,-.0273069,.282745,.0093606,.0879815,-.031269,.284139,.011056,.0891258,-.035531,.28647,.0130065,.0906909,-.0400947,.289708,.0152495,.0927624,-.0449638,.293904,.0178454,.0958376,-.0502427,.300471,.0208915,.0995827,-.0559514,.30806,.0244247,.104526,-.0622152,.317874,.0285721,.110532,-.0690046,.329332,.0334227,.117385,-.0763068,.341217,.0390466,.12522,-.084184,.353968,.0455786,.134037,-.0925248,.366797,.0530773,.144014,-.101487,.380209,.0617424,.156013,-.111273,.395956,.071777,.168872,-.121431,.41053,.0830905,.183089,-.132105,.425073,.0959341,.198763,-.143286,.439833,.110448,.216159,-.154841,.454507,.126769,.234859,-.166588,.468368,.14495,.255879,-.178626,.482846,.165233,.27677,-.190218,.493489,.187217,.301184,-.202227,.506549,.211659,.325852,-.213764,.5158,.237922,.352824,-.22487,.525442,.26632,.380882,-.235246,.532487,.296691,.410137,-.244847,.537703,.329179,.439787,-.253122,.540361,.363135,.472291,-.260517,.542734,.399222,.501856,-.266519,.538826,.436352,.534816,-.270905,.535152,.474505,.565069,-.273826,.525979,.513988,.597154,-.275333,.516394,.554852,.630473,-.275314,.506206,.596592,.660574,-.273323,.489769,.638117,.692015,-.270008,.472578,.680457,.720647,-.265001,.452134,.723008,.750528,-.258311,.430344,.765954,.777568,-.250046,.405624,.809012,.80387,-.240114,.378339,.852425,.828439,-.228737,.349877,.895346,.851472,-.216632,.318968,.940695,.873906,-.202782,.287489,.987235,.89467,-.187059,.254394,1.03348,.912281,-.168818,.221294,1.07812,.927358,-.146494,.18675,1.11928,.940385,-.120009,.152322,1.15609,.952672,-.0917183,.117514,1.18875,.968496,-.0620321,.0797405,1.21821,.985236,-.0314945,.0402383,1.24523,.99998,-575153e-9,110644e-9,1.27133,.0702429,-512222e-11,.255273,140947e-11,.0702981,-128826e-9,.255469,354488e-10,.0703691,-515562e-9,.255727,141874e-9,.0703805,-.00116,.255754,31929e-8,.0703961,-.00206224,.255813,567999e-9,.0704102,-.00322223,.255839,88871e-8,.0704298,-.00463928,.255863,.00128272,.0704759,-.00631375,.255953,.00175283,.0705434,-.00824317,.256079,.00230342,.0706693,-.010412,.25636,.0029443,.0708189,-.0128439,.256647,.00368031,.0710364,-.0155177,.257084,.00452614,.0713223,-.0184374,.257637,.00549706,.0717182,-.0216002,.258416,.00661246,.072321,-.0249966,.259699,.00790147,.0731446,-.0286566,.261475,.0093884,.0743352,-.0325888,.264132,.0111186,.0760676,-.036843,.26815,.013145,.078454,-.0414292,.273636,.0155251,.0818618,-.0464634,.281653,.0183525,.0857382,-.0519478,.289992,.0216642,.0908131,-.0579836,.30066,.0255956,.0967512,-.0645124,.312204,.0301954,.103717,-.0716505,.325001,.0356017,.111596,-.0793232,.338129,.041896,.120933,-.087645,.352853,.0492447,.130787,-.096492,.366192,.0576749,.142311,-.105973,.380864,.0673969,.155344,-.116182,.396575,.0785899,.169535,-.126815,.411443,.0912377,.185173,-.138015,.426256,.105607,.201755,-.149325,.439607,.121551,.221334,-.161207,.455467,.139608,.241461,-.173162,.469096,.159591,.26294,-.18504,.481014,.18156,.286776,-.196881,.493291,.205781,.311596,-.208311,.503556,.231819,.338667,-.219671,.513268,.260274,.366021,-.230451,.519414,.290862,.395875,-.240131,.526766,.323196,.425564,-.248566,.52905,.357071,.457094,-.256195,.530796,.393262,.488286,-.262331,.528703,.430797,.522291,-.267141,.52727,.470231,.554172,-.270411,.519848,.510477,.586427,-.271986,.510307,.551594,.619638,-.27192,.499158,.593849,.650656,-.269817,.483852,.636314,.68284,-.266267,.467515,.679679,.714356,-.26113,.44931,.723884,.742717,-.254067,.425789,.767245,.770894,-.245652,.401144,.811819,.797358,-.235554,.374224,.856315,.823377,-.223896,.346167,.901077,.847456,-.210865,.316056,.946502,.870697,-.196574,.284503,.993711,.891068,-.180814,.251628,1.04134,.909267,-.163314,.219065,1.08609,.925653,-.143304,.186446,1.12702,.940017,-.121322,.153416,1.16371,.952398,-.0973872,.120334,1.19712,.967568,-.0698785,.08352,1.22791,.984772,-.0390031,.0439209,1.25672,1.00026,-.0070087,.00315668,1.28428,.0556653,-459654e-11,.227325,112556e-11,.0565238,-116382e-9,.230826,284985e-10,.0565717,-465666e-9,.231026,114036e-9,.0565859,-.00104773,.231079,256656e-9,.0565761,-.00186255,.231025,45663e-8,.0565913,-.00291002,.231058,714664e-9,.0566108,-.00418998,.231085,.00103224,.0566532,-.00570206,.231169,.00141202,.0567473,-.00743666,.231417,.00186018,.0568567,-.00940298,.231661,.00238264,.0569859,-.0115991,.231895,.00298699,.0572221,-.0140096,.232456,.00368957,.057519,-.0166508,.233096,.00450303,.0579534,-.01951,.234094,.00544945,.0585922,-.0225991,.235629,.00655564,.0595647,-.0259416,.238106,.00785724,.0609109,-.0295661,.241557,.00939127,.0628751,-.0335126,.246652,.0112198,.0656908,-.0378604,.254091,.0134168,.0691347,-.0426543,.262666,.0160374,.0732165,-.0478967,.272029,.0191514,.0782863,-.0536716,.283007,.0228597,.0843973,-.0600683,.295732,.0272829,.0913598,-.0670095,.308779,.032484,.0994407,-.0745516,.322886,.0385886,.108189,-.082712,.336408,.0457133,.118574,-.0914927,.351692,.0539832,.129989,-.100854,.366502,.0635162,.142722,-.110837,.381675,.0744386,.156654,-.121353,.3963,.0868483,.172151,-.132414,.411477,.100963,.188712,-.143809,.42508,.116795,.208093,-.155765,.441328,.134715,.227936,-.167608,.454328,.154396,.249495,-.179579,.467235,.176179,.27362,-.191488,.480248,.200193,.296371,-.202618,.487886,.225775,.324234,-.214133,.499632,.25441,.353049,-.225212,.509532,.285077,.381785,-.234875,.514265,.317047,.414038,-.244205,.521282,.351874,.445251,-.252145,.522931,.388279,.476819,-.258433,.520947,.425825,.509209,-.263411,.517669,.465104,.542759,-.266732,.512841,.505741,.574822,-.268263,.503317,.547611,.609324,-.268489,.493035,.590953,.641772,-.266941,.478816,.63488,.674049,-.263297,.462863,.679072,.705071,-.257618,.442931,.723487,.734709,-.250625,.421299,.768708,.763704,-.24179,.397085,.814375,.791818,-.231115,.370577,.859907,.817439,-.21922,.34232,.906715,.843202,-.205658,.312627,.953943,.866639,-.190563,.280933,1.00185,.888129,-.173978,.248393,1.05105,.907239,-.155485,.216007,1.09704,.923893,-.134782,.183233,1.13857,.938882,-.11249,.150376,1.17539,.952464,-.0890706,.117177,1.20924,.968529,-.0646523,.0813095,1.24055,.984763,-.038606,.0439378,1.27018,1.00053,-.01238,.00598668,1.29873,.0437928,-409594e-11,.204012,879224e-12,.0440166,-103395e-9,.205049,221946e-10,.0440529,-413633e-9,.205225,887981e-10,.0440493,-930594e-9,.2052,199858e-9,.0439884,-.00165352,.204901,355495e-9,.0440716,-.0025849,.205255,556983e-9,.0440968,-.00372222,.205311,805326e-9,.0441359,-.00506478,.205391,.00110333,.0442231,-.00660384,.205638,.00145768,.0443254,-.00835246,.205877,.00187275,.0444832,-.0102992,.20627,.00235938,.0447001,-.0124449,.206796,.0029299,.0450168,-.0147935,.207593,.0036005,.0454816,-.017336,.208819,.00439246,.0462446,-.0201156,.211036,.00533864,.0473694,-.0231568,.214388,.00646984,.0490191,-.0264941,.219357,.00783856,.0512776,-.030184,.226061,.00950182,.0541279,-.0342661,.234094,.0115156,.0578989,-.0388539,.244297,.0139687,.0620835,-.0438735,.254457,.0169015,.0673497,-.04951,.266706,.0204554,.0731759,-.0556263,.278753,.0246606,.0803937,-.0624585,.29309,.0297126,.0879287,-.0697556,.305856,.0355868,.0970669,-.0778795,.321059,.0425768,.106508,-.0863541,.333873,.05056,.11776,-.0955935,.349008,.0598972,.130081,-.105438,.363776,.0706314,.144454,-.115899,.380112,.0828822,.1596,-.126827,.394843,.0967611,.176097,-.138161,.409033,.112381,.194726,-.149904,.424257,.129952,.213944,-.161675,.436945,.149333,.235516,-.173659,.450176,.170892,.260564,-.185963,.466305,.194984,.285183,-.197582,.477328,.220805,.311095,-.208697,.486566,.248694,.338924,-.219519,.494811,.279015,.369757,-.229766,.504065,.311725,.3996,-.238879,.507909,.345844,.430484,-.246802,.509805,.381749,.46413,-.253924,.511436,.420251,.497077,-.259319,.508787,.459957,.530434,-.263297,.50394,.501356,.565725,-.265619,.49804,.544252,.599254,-.265842,.487346,.587856,.631251,-.263978,.472975,.631969,.663972,-.26043,.457135,.677471,.697724,-.255358,.439844,.723744,.727725,-.248308,.417872,.770653,.756417,-.239181,.39273,.817357,.785419,-.22814,.367839,.864221,.81266,-.215681,.339449,.912701,.839391,-.201623,.309279,.962419,.86366,-.185624,.278029,1.0122,.885028,-.16797,.245294,1.06186,.904639,-.148336,.212689,1.10934,.922048,-.12637,.179616,1.15063,.936952,-.102928,.146749,1.18885,.951895,-.0785268,.112733,1.22352,.967198,-.0530153,.0760056,1.25681,.984405,-.02649,.0383183,1.28762,1.00021,70019e-8,-20039e-8,1.31656,.0325964,-355447e-11,.176706,655682e-12,.0329333,-899174e-10,.178527,165869e-10,.0329181,-359637e-9,.178453,663498e-10,.0329085,-808991e-9,.178383,149332e-9,.0329181,-.00143826,.178394,265873e-9,.0329425,-.00224678,.178517,416597e-9,.0329511,-.00323575,.17849,603299e-9,.033011,-.00439875,.178695,829422e-9,.0330733,-.00574059,.178843,.00109908,.0331857,-.00725896,.179176,.00141933,.0333445,-.00895289,.179618,.0017999,.0335674,-.0108219,.180238,.00225316,.033939,-.0128687,.181417,.00279765,.0345239,-.015114,.183395,.0034564,.0354458,-.017596,.186616,.00425864,.0368313,-.0203524,.191547,.00524936,.0386115,-.0234105,.197508,.00647033,.0410303,-.0268509,.205395,.00798121,.0442245,-.0307481,.215365,.0098557,.0478659,-.0350863,.225595,.0121417,.0522416,-.0399506,.236946,.0149385,.0574513,-.045357,.249442,.0183189,.0631208,-.0512863,.261222,.0223644,.0701124,-.0579273,.275418,.0272418,.0777331,-.0650652,.288989,.0329458,.0862709,-.0728813,.302546,.0396819,.096103,-.081363,.317164,.04757,.106976,-.0904463,.331733,.0567012,.119175,-.100105,.34661,.067202,.132919,-.110375,.362249,.0792588,.147727,-.121115,.376978,.0928672,.163618,-.132299,.390681,.108228,.182234,-.143887,.406571,.125502,.201809,-.155827,.42042,.144836,.225041,-.168357,.438411,.166706,.247621,-.18004,.450368,.189909,.27097,-.191536,.460083,.215251,.296658,-.203024,.469765,.243164,.325892,-.214056,.481837,.273388,.35406,-.224104,.487474,.305344,.384372,-.233489,.492773,.339741,.41749,-.241874,.498451,.376287,.45013,-.248834,.499632,.414195,.481285,-.254658,.495233,.454077,.519183,-.259367,.496401,.496352,.551544,-.261818,.487686,.538798,.587349,-.262964,.479453,.583626,.621679,-.262128,.467709,.629451,.654991,-.258998,.452123,.67566,.686873,-.254119,.433495,.723248,.719801,-.246946,.413657,.771156,.750355,-.237709,.390366,.81989,.780033,-.226549,.364947,.868601,.809254,-.214186,.337256,.920034,.836576,-.199639,.307395,.971706,.861774,-.183169,.275431,1.02479,.885707,-.165111,.243431,1.07837,.904742,-.144363,.210921,1.12783,.915604,-.121305,.17647,1.17254,.930959,-.0962119,.143106,1.21012,.948404,-.069969,.108112,1.24474,.967012,-.0427586,.0708478,1.27718,.984183,-.0147043,.032335,1.3083,.999577,.0142165,-.00726867,1.3382,.0229227,-299799e-11,.148623,462391e-12,.0232194,-758796e-10,.15054,117033e-10,.0232315,-303636e-9,.15063,468397e-10,.0232354,-683189e-9,.150624,105472e-9,.0232092,-.0012136,.150445,187744e-9,.0232523,-.00189765,.150679,294847e-9,.0232828,-.00273247,.150789,428013e-9,.0233371,-.00371287,.150995,591134e-9,.0234015,-.00484794,.15118,787642e-9,.023514,-.00612877,.151562,.00102547,.023679,-.00756125,.152116,.00131351,.0239559,-.00914651,.153162,.00166594,.0244334,-.010904,.155133,.00210182,.025139,-.0128615,.158035,.00264406,.0262598,-.0150628,.162751,.00332923,.0277875,-.0175532,.168944,.00419773,.0298472,-.0203981,.176835,.00530034,.0325444,-.023655,.186686,.00669777,.0355581,-.0272982,.196248,.00842661,.0392841,-.0314457,.207352,.0105854,.0436815,-.0361157,.219279,.0132458,.0485272,-.0412932,.230728,.0164736,.0541574,-.0470337,.242994,.0203715,.0609479,-.0535002,.257042,.0250953,.0685228,-.0605409,.27102,.0306856,.0768042,-.0680553,.28406,.037193,.0864844,-.0765011,.299186,.0449795,.0969415,-.0852674,.3132,.0538316,.108478,-.0947333,.327138,.0641149,.121705,-.10481,.342345,.0759185,.136743,-.115474,.358472,.0894116,.152986,-.126536,.374067,.104562,.170397,-.138061,.388267,.121632,.191392,-.150203,.406467,.140996,.211566,-.161751,.418641,.161696,.233567,-.173407,.430418,.184557,.257769,-.185397,.44277,.210092,.28531,-.197048,.457191,.237827,.311726,-.20784,.464712,.267253,.340537,-.218345,.472539,.299332,.372921,-.228306,.482331,.333988,.402924,-.236665,.484378,.369722,.434475,-.244097,.484717,.407836,.469736,-.250547,.487093,.448465,.505045,-.25511,.485575,.490263,.540262,-.258444,.481225,.534495,.576347,-.259903,.473481,.579451,.608656,-.259572,.4603,.625604,.646679,-.257908,.450341,.674511,.679902,-.253663,.431561,.723269,.714159,-.247419,.412684,.773263,.745345,-.239122,.389388,.824182,.778248,-.228837,.365361,.876634,.807208,-.216197,.337667,.92945,.835019,-.201772,.307197,.985261,.860261,-.185291,.274205,1.04299,.877601,-.165809,.240178,1.09816,.898211,-.143897,.207571,1.14694,.915789,-.119513,.174904,1.19008,.931831,-.0932919,.141423,1.2297,.949244,-.0656528,.105603,1.26553,.967527,-.0370262,.0679551,1.29986,.984139,-.00730117,.0283133,1.33252,.999713,.0234648,-.0121785,1.36397,.0152135,-245447e-11,.122795,304092e-12,.0151652,-615778e-10,.122399,76292e-10,.0151181,-245948e-9,.122023,304802e-10,.0151203,-553394e-9,.12203,686634e-10,.015125,-983841e-9,.122037,122463e-9,.0151427,-.00153774,.12214,192706e-9,.0151708,-.0022103,.122237,281219e-9,.0152115,-.00300741,.12238,390804e-9,.0152877,-.00392494,.1227,526317e-9,.015412,-.00496597,.123244,69443e-8,.0156201,-.00613314,.124228,90547e-8,.0159658,-.00744113,.125945,.0011732,.0165674,-.00892546,.129098,.00151888,.017487,-.010627,.133865,.00197007,.018839,-.0126043,.140682,.0025637,.020554,-.0148814,.148534,.00333637,.0226727,-.0175123,.157381,.00433738,.0251879,-.0205266,.166685,.00561664,.0283635,-.0240319,.177796,.00725563,.0318694,-.0279432,.188251,.00928811,.0361044,-.0324313,.200038,.011835,.0406656,-.0373527,.210685,.0149146,.0463846,-.0430132,.224182,.0187254,.0525696,-.0491013,.23634,.0232283,.0598083,-.0559175,.250013,.0286521,.0679437,-.0633657,.263981,.0350634,.0771181,-.0714602,.278072,.0425882,.0881273,-.0803502,.29511,.0514487,.0996628,-.0896903,.309976,.0615766,.112702,-.099644,.325611,.0732139,.126488,-.109829,.339321,.0862324,.142625,-.120859,.35574,.101275,.15953,-.131956,.369845,.117892,.176991,-.143145,.38146,.136205,.199715,-.155292,.40052,.157252,.220787,-.167066,.412055,.179966,.243697,-.178396,.423133,.204418,.272106,-.190433,.439524,.232141,.297637,-.201265,.447041,.261109,.325273,-.211834,.454488,.292627,.357219,-.221889,.465004,.326669,.387362,-.230729,.468527,.362426,.423131,-.23924,.475836,.401533,.45543,-.246067,.475017,.441902,.493393,-.251557,.478017,.484239,.526253,-.255571,.4709,.528586,.560554,-.257752,.463167,.574346,.599306,-.258076,.456452,.621655,.634541,-.256471,.443725,.670492,.668907,-.253283,.428719,.721943,.705619,-.247562,.411348,.772477,.739034,-.240626,.388939,.8264,.771408,-.231493,.36425,.881702,.803312,-.220125,.337321,.9385,.828457,-.206645,.305364,.997437,.854819,-.190664,.273715,1.05693,.878666,-.171429,.242218,1.11251,.898404,-.149235,.209556,1.16398,.917416,-.12435,.176863,1.21014,.933133,-.0972703,.142775,1.25178,.95066,-.0683607,.106735,1.29028,.968589,-.0378724,.0681609,1.32703,.984776,-.00605712,.0273966,1.36158,.99994,.0263276,-.0138124,1.3943,.00867437,-186005e-11,.0928979,173682e-12,.00864003,-466389e-10,.0925237,435505e-11,.00864593,-186594e-9,.0925806,174322e-10,.00864095,-419639e-9,.0924903,392862e-10,.00863851,-746272e-9,.0924589,702598e-10,.00868531,-.00116456,.0929,111188e-9,.00869667,-.00167711,.0928529,163867e-9,.00874332,-.00228051,.0930914,23104e-8,.00882709,-.00297864,.0935679,31741e-8,.00898874,-.00377557,.0946165,430186e-9,.00929346,-.00469247,.0967406,580383e-9,.00978271,-.00575491,.100084,783529e-9,.0105746,-.00701514,.105447,.00106304,.0116949,-.00851797,.112494,.00144685,.0130419,-.0102757,.119876,.00196439,.0148375,-.012381,.129034,.00266433,.0168725,-.01482,.137812,.00358364,.0193689,-.0176563,.147696,.00478132,.0222691,-.0209211,.157795,.00631721,.0256891,-.0246655,.168431,.00826346,.0294686,-.0288597,.178587,.0106714,.0340412,-.0336441,.190251,.0136629,.0393918,-.039033,.202999,.0173272,.0453947,-.0450087,.215655,.0217448,.0521936,-.0515461,.228686,.0269941,.0600279,-.058817,.242838,.033272,.0692398,-.0667228,.258145,.0406457,.0793832,-.0752401,.273565,.0492239,.0902297,-.0841851,.287735,.0590105,.102014,-.0936479,.301161,.0702021,.116054,-.103967,.317438,.0832001,.13191,-.114622,.334166,.0977951,.148239,-.125452,.348192,.113985,.165809,-.136453,.361094,.131928,.184616,-.147648,.373534,.151811,.207491,-.159607,.39101,.174476,.230106,-.171119,.402504,.198798,.257036,-.182906,.418032,.225796,.281172,-.193605,.425468,.254027,.312034,-.204771,.440379,.285713,.340402,-.214988,.445406,.319196,.370231,-.224711,.44968,.35537,.407105,-.233516,.460747,.393838,.439037,-.240801,.460624,.433747,.47781,-.24762,.465957,.477234,.510655,-.251823,.460054,.52044,.550584,-.255552,.459172,.567853,.585872,-.257036,.450311,.615943,.620466,-.257535,.437763,.667693,.660496,-.255248,.426639,.718988,.695578,-.251141,.409185,.772503,.732176,-.244718,.39015,.827023,.760782,-.236782,.362594,.885651,.79422,-.225923,.33711,.943756,.824521,-.213855,.308272,1.00874,.854964,-.197723,.278529,1.06764,.878065,-.179209,.246208,1.12836,.899834,-.157569,.21329,1.18318,.918815,-.133206,.181038,1.23161,.934934,-.106545,.146993,1.27644,.952115,-.0780574,.111175,1.31842,.96906,-.0478279,.0728553,1.35839,.985178,-.0160014,.032579,1.39697,1.00039,.0173126,-.0095256,1.43312,.00384146,-124311e-11,.0613583,778271e-13,.00390023,-314043e-10,.0622919,196626e-11,.00389971,-125622e-9,.0622632,787379e-11,.00389491,-282352e-9,.0620659,1778e-8,.00391618,-502512e-9,.0624687,320918e-10,.00392662,-784458e-9,.0625113,515573e-10,.00396053,-.00112907,.0628175,778668e-10,.00401911,-.00153821,.0633286,113811e-9,.00414994,-.0020208,.0646443,16445e-8,.00441223,-.00260007,.0673886,237734e-9,.00484427,-.0033097,.0716528,345929e-9,.00549109,-.00418966,.0774998,505987e-9,.00636293,-.00527331,.0844758,739208e-9,.00746566,-.00660428,.0921325,.00107347,.00876625,-.00818826,.0997067,.00153691,.0103125,-.0100811,.107433,.00217153,.0123309,-.0123643,.117088,.00303427,.0146274,-.0150007,.126438,.00416018,.0172295,-.0180531,.135672,.00561513,.0204248,-.0215962,.146244,.007478,.0241597,-.0256234,.157481,.00981046,.0284693,-.0302209,.169125,.0127148,.033445,-.0353333,.181659,.0162453,.0391251,-.0410845,.1944,.0205417,.0454721,-.0473451,.207082,.0256333,.0530983,-.0542858,.221656,.0317036,.0615356,-.0618384,.236036,.0388319,.0703363,-.0697631,.248398,.046974,.0810391,-.0784757,.263611,.0565246,.0920144,-.0873488,.275857,.0671724,.105584,-.0973652,.292555,.0798105,.119506,-.107271,.306333,.0935945,.134434,-.117608,.318888,.109106,.153399,-.128938,.337552,.127074,.171258,-.139944,.349955,.14643,.191059,-.151288,.361545,.168,.215069,-.163018,.378421,.192082,.237838,-.174226,.38879,.217838,.266965,-.186063,.405857,.246931,.292827,-.196909,.414146,.277505,.324352,-.207473,.426955,.310711,.354427,-.217713,.433429,.346794,.389854,-.227183,.443966,.385237,.420749,-.235131,.44471,.424955,.459597,-.242786,.451729,.468446,.495316,-.248767,.45072,.513422,.534903,-.253351,.450924,.560618,.572369,-.256277,.445266,.609677,.612383,-.2576,.438798,.660995,.644037,-.256931,.421693,.713807,.686749,-.254036,.4109,.767616,.719814,-.249785,.390151,.82533,.754719,-.244283,.367847,.888311,.792022,-.235076,.345013,.948177,.822404,-.225061,.316193,1.01661,.853084,-.211113,.287013,1.08075,.879871,-.19449,.255424,1.14501,.901655,-.174023,.222879,1.20203,.919957,-.1509,.18989,1.25698,.938412,-.124923,.15606,1.30588,.953471,-.0968139,.120512,1.3529,.970451,-.066734,.0828515,1.3986,.985522,-.034734,.0424458,1.44148,1.00099,-.00102222,678929e-9,1.48398,965494e-9,-627338e-12,.0306409,197672e-13,99168e-8,-158573e-10,.0314638,499803e-12,991068e-9,-634012e-10,.031363,200682e-11,974567e-9,-14144e-8,.03036,457312e-11,998079e-9,-252812e-9,.031496,860131e-11,.00102243,-396506e-9,.0319955,148288e-10,.00107877,-577593e-9,.0331376,249141e-10,.00121622,-816816e-9,.0359396,423011e-10,.0014455,-.00113761,.0399652,724613e-10,.00178791,-.00156959,.0450556,123929e-9,.00225668,-.00214064,.0508025,208531e-9,.00285627,-.00287655,.0568443,341969e-9,.0035991,-.00380271,.0630892,544158e-9,.00455524,-.00496264,.0702204,842423e-9,.00569143,-.0063793,.0773426,.00126704,.00716928,-.00813531,.0860839,.00186642,.00885307,-.0101946,.0944079,.00267014,.0109316,-.0126386,.103951,.00374033,.0133704,-.0154876,.113786,.0051304,.0161525,-.0187317,.123477,.00688858,.0194267,-.0224652,.133986,.00910557,.0230967,-.0265976,.143979,.0118074,.0273627,-.0312848,.154645,.0151266,.0323898,-.0365949,.166765,.0191791,.0379225,-.0422914,.177932,.0239236,.0447501,-.0487469,.19167,.0296568,.0519391,-.0556398,.203224,.0362924,.0599464,-.0631646,.215652,.0440585,.0702427,-.0714308,.232089,.0531619,.0806902,-.0800605,.245258,.0634564,.0923194,-.0892815,.258609,.0752481,.106938,-.09931,.276654,.0888914,.121238,-.109575,.289847,.104055,.138817,-.120461,.307566,.121266,.15595,-.131209,.320117,.139944,.178418,-.143049,.339677,.161591,.197875,-.154074,.349886,.184303,.224368,-.166307,.369352,.210669,.252213,-.178051,.386242,.238895,.277321,-.189335,.395294,.269182,.310332,-.200683,.412148,.302508,.338809,-.210856,.418266,.337264,.372678,-.220655,.428723,.374881,.405632,-.230053,.433887,.415656,.442293,-.237993,.439911,.457982,.477256,-.244897,.440175,.502831,.515592,-.250657,.441079,.550277,.550969,-.255459,.435219,.601102,.592883,-.257696,.432882,.651785,.629092,-.259894,.421054,.708961,.672033,-.258592,.41177,.763806,.709147,-.256525,.395267,.824249,.745367,-.254677,.375013,.8951,.784715,-.247892,.353906,.959317,.818107,-.240162,.327801,1.03153,.847895,-.229741,.298821,1.10601,.879603,-.213084,.269115,1.164,.902605,-.195242,.236606,1.22854,.922788,-.174505,.203442,1.29017,.944831,-.150169,.169594,1.34157,.959656,-.124099,.135909,1.3956,.972399,-.0960626,.0990563,1.45128,.986549,-.0657097,.0602348,1.50312,1.00013,-.0333558,.0186694,1.55364,619747e-11,-1e-7,.00778326,796756e-16,237499e-13,-999999e-13,282592e-10,114596e-15,100292e-11,-166369e-11,250354e-9,677492e-14,350752e-11,-637769e-11,357289e-9,631655e-13,826445e-11,-174689e-10,516179e-9,31851e-11,242481e-10,-450868e-10,.0010223,130577e-11,455631e-10,-89044e-9,.00144302,374587e-11,971222e-10,-178311e-9,.00241912,102584e-10,171403e-9,-313976e-9,.00354938,236481e-10,292747e-9,-520026e-9,.00513765,496014e-10,789827e-9,-.00118187,.0238621,139056e-9,.00114093,-.00171827,.0286691,244093e-9,.00176119,-.00249667,.0368565,420623e-9,.0022233,-.00333742,.0400469,65673e-8,.00343382,-.00481976,.0535751,.00109323,.00427602,-.00600755,.057099,.00155268,.00461435,-.00737637,.0551084,.00215031,.00695698,-.00971401,.0715767,.00316529,.00867619,-.0120943,.0793314,.00436995,.0106694,-.0148202,.0869391,.0058959,.0140351,-.0183501,.101572,.00798757,.0168939,-.022006,.11018,.0104233,.020197,-.0261568,.119041,.0134167,.0254702,-.0312778,.135404,.0173009,.0298384,-.0362469,.1437,.0215428,.035159,-.042237,.15512,.0268882,.0427685,-.0488711,.17128,.033235,.0494848,-.0557997,.181813,.0404443,.0592394,-.0635578,.198745,.0490043,.0681463,-.071838,.210497,.0588239,.0804753,-.0809297,.228864,.0702835,.0942205,-.0906488,.247008,.0834012,.106777,-.100216,.258812,.0975952,.124471,-.110827,.278617,.114162,.138389,-.121193,.287049,.131983,.159543,-.13253,.307151,.152541,.176432,-.143611,.31564,.174673,.201723,-.15548,.33538,.199842,.229721,-.167166,.355256,.227097,.250206,-.178238,.360047,.256014,.282118,-.189905,.378761,.28855,.312821,-.201033,.39181,.323348,.341482,-.211584,.397716,.360564,.377368,-.221314,.410141,.400004,.418229,-.230474,.423485,.442371,.444881,-.239443,.418874,.488796,.488899,-.245987,.427545,.535012,.520317,-.253948,.422147,.589678,.568566,-.256616,.42719,.637683,.599607,-.26376,.415114,.703363,.64222,-.268687,.408715,.771363,.685698,-.2694,.399722,.83574,.732327,-.266642,.388651,.897764,.769873,-.267712,.369198,.983312,.806733,-.263479,.346802,1.06222,.843466,-.254575,.321368,1.13477,.873008,-.242749,.29211,1.20712,.908438,-.22725,.262143,1.27465,.936321,-.207621,.228876,1.33203,.950353,-.187932,.19484,1.40439,.96442,-.165154,.163178,1.4732,.979856,-.139302,.127531,1.53574,.982561,-.11134,.0903457,1.59982,.996389,-.0808124,.0489007,1.6577],t=[1,0,0,0,1,791421e-36,0,0,1,104392e-29,0,0,1,349405e-26,0,0,1,109923e-23,0,0,1,947414e-22,0,0,1,359627e-20,0,0,1,772053e-19,0,0,1,108799e-17,0,0,1,110655e-16,0,0,1,865818e-16,0,0,.999998,545037e-15,0,0,.999994,285095e-14,0,0,.999989,126931e-13,0,0,.999973,489938e-13,0,0,.999947,166347e-12,0,0,.999894,502694e-12,0,0,.999798,136532e-11,0,0,.999617,335898e-11,0,0,.999234,752126e-11,0,0,.998258,152586e-10,0,0,.99504,266207e-10,0,0,.980816,236802e-10,0,0,.967553,207684e-11,0,0,.966877,403733e-11,0,0,.965752,741174e-11,0,0,.96382,127746e-10,0,0,.960306,202792e-10,0,0,.953619,280232e-10,0,0,.941103,278816e-10,0,0,.926619,160221e-10,0,0,.920983,235164e-10,0,0,.912293,311924e-10,0,.0158731,.899277,348118e-10,0,.0476191,.880884,26041e-9,0,.0793651,.870399,338726e-10,0,.111111,.856138,392906e-10,0,.142857,.837436,372874e-10,0,.174603,.820973,392558e-10,0,.206349,.803583,434658e-10,0,.238095,.782168,40256e-9,0,.269841,.764107,448159e-10,0,.301587,.743092,457627e-10,0,.333333,.721626,455314e-10,0,.365079,.700375,477335e-10,0,.396825,.677334,461072e-10,0,.428571,.655702,484393e-10,0,.460317,.632059,464583e-10,0,.492064,.610125,483923e-10,0,.52381,.58653,464342e-10,0,.555556,.564508,477033e-10,0,.587302,.541405,459263e-10,0,.619048,.519556,46412e-9,0,.650794,.497292,448913e-10,0,.68254,.475898,445789e-10,0,.714286,.454722,433496e-10,0,.746032,.434042,423054e-10,0,.777778,.414126,413737e-10,0,.809524,.394387,397265e-10,0,.84127,.375841,390709e-10,0,.873016,.357219,369938e-10,0,.904762,.340084,365618e-10,0,.936508,.322714,342533e-10,0,.968254,.306974,339596e-10,0,1,1,101524e-23,0,0,1,10292e-22,0,0,1,130908e-23,0,0,1,473331e-23,0,0,1,625319e-22,0,0,1,107932e-20,0,0,1,163779e-19,0,0,1,203198e-18,0,0,1,204717e-17,0,0,.999999,168995e-16,0,0,.999998,115855e-15,0,0,.999996,66947e-14,0,0,.999991,330863e-14,0,0,.999983,141737e-13,0,0,.999968,532626e-13,0,0,.99994,177431e-12,0,0,.999891,528835e-12,0,0,.999797,142169e-11,0,0,.999617,347057e-11,0,0,.999227,77231e-10,0,0,.998239,155753e-10,0,0,.994937,268495e-10,0,0,.980225,213742e-10,0,0,.967549,21631e-10,0,0,.966865,417989e-11,0,0,.965739,763341e-11,0,0,.963794,130892e-10,0,0,.960244,206456e-10,0,0,.953495,282016e-10,0,148105e-9,.940876,271581e-10,0,.002454,.926569,164159e-10,0,.00867491,.920905,239521e-10,0,.01956,.912169,315127e-10,0,.035433,.899095,346626e-10,0,.056294,.882209,290223e-10,0,.0818191,.870272,342992e-10,0,.111259,.855977,394164e-10,0,.142857,.837431,372343e-10,0,.174603,.820826,396691e-10,0,.206349,.803408,435395e-10,0,.238095,.782838,419579e-10,0,.269841,.763941,450953e-10,0,.301587,.742904,455847e-10,0,.333333,.721463,458833e-10,0,.365079,.700197,477159e-10,0,.396825,.677501,470641e-10,0,.428571,.655527,484732e-10,0,.460317,.6324,476834e-10,0,.492064,.609964,484213e-10,0,.52381,.586839,475541e-10,0,.555556,.564353,476951e-10,0,.587302,.541589,467611e-10,0,.619048,.519413,463493e-10,0,.650794,.497337,453994e-10,0,.68254,.475797,445308e-10,0,.714286,.454659,435787e-10,0,.746032,.434065,424839e-10,0,.777778,.414018,41436e-9,0,.809524,.39455,401902e-10,0,.84127,.375742,390813e-10,0,.873016,.357501,377116e-10,0,.904762,.339996,36535e-9,0,.936508,.323069,351265e-10,0,.968254,.306897,339112e-10,0,1,1,10396e-19,0,0,1,104326e-20,0,0,1,110153e-20,0,0,1,144668e-20,0,0,1,34528e-19,0,0,1,175958e-19,0,0,1,12627e-17,0,0,1,936074e-18,0,0,1,645742e-17,0,0,.999998,401228e-16,0,0,.999997,222338e-15,0,0,.999995,10967e-13,0,0,.999991,482132e-14,0,0,.999981,189434e-13,0,0,.999967,667716e-13,0,0,.999938,212066e-12,0,0,.999886,60977e-11,0,0,.999792,159504e-11,0,0,.999608,381191e-11,0,0,.999209,833727e-11,0,0,.998179,165288e-10,0,0,.994605,274387e-10,0,0,.979468,167316e-10,0,0,.967529,242877e-11,0,0,.966836,461696e-11,0,0,.96569,830977e-11,0,0,.963706,140427e-10,0,244659e-11,.960063,217353e-10,0,760774e-9,.953113,286606e-10,0,.00367261,.940192,247691e-10,0,.00940263,.927731,195814e-10,0,.018333,.920669,252531e-10,0,.0306825,.911799,324277e-10,0,.0465556,.89857,340982e-10,0,.0659521,.883283,319622e-10,0,.0887677,.86989,35548e-9,0,.114784,.855483,397143e-10,0,.143618,.837987,391665e-10,0,.174606,.820546,411306e-10,0,.206349,.802878,436753e-10,0,.238095,.783402,444e-7,0,.269841,.763439,458726e-10,0,.301587,.742925,467097e-10,0,.333333,.721633,478887e-10,0,.365079,.69985,481251e-10,0,.396825,.67783,491811e-10,0,.428571,.655126,488199e-10,0,.460318,.632697,496025e-10,0,.492064,.609613,48829e-9,0,.52381,.587098,492754e-10,0,.555556,.564119,482625e-10,0,.587302,.541813,482807e-10,0,.619048,.519342,471552e-10,0,.650794,.497514,466765e-10,0,.68254,.475879,455582e-10,0,.714286,.454789,446007e-10,0,.746032,.434217,435382e-10,0,.777778,.414086,421753e-10,0,.809524,.394744,412093e-10,0,.84127,.375782,396634e-10,0,.873016,.357707,386419e-10,0,.904762,.340038,370345e-10,0,.936508,.323284,359725e-10,0,.968254,.306954,3436e-8,0,1,1,599567e-19,0,0,1,600497e-19,0,0,1,614839e-19,0,0,1,686641e-19,0,0,1,972658e-19,0,0,1,221271e-18,0,0,1,833195e-18,0,0,1,403601e-17,0,0,.999999,206001e-16,0,0,.999998,101739e-15,0,0,.999997,470132e-15,0,0,.999993,200436e-14,0,0,.999988,783682e-14,0,0,.999979,280338e-13,0,0,.999962,917033e-13,0,0,.999933,274514e-12,0,0,.999881,753201e-12,0,0,.999783,189826e-11,0,0,.999594,440279e-11,0,0,.999178,93898e-10,0,0,.998073,181265e-10,0,0,.993993,280487e-10,0,0,.979982,149422e-10,0,0,.968145,378481e-11,0,0,.966786,53771e-10,0,0,.965611,947508e-11,0,388934e-10,.963557,156616e-10,0,9693e-7,.959752,235144e-10,0,.00370329,.952461,291568e-10,0,.00868428,.940193,240102e-10,0,.0161889,.929042,231235e-10,0,.0263948,.920266,273968e-10,0,.0394088,.911178,337915e-10,0,.0552818,.897873,333629e-10,0,.0740138,.884053,351405e-10,0,.0955539,.869455,378034e-10,0,.119795,.854655,399378e-10,0,.14656,.838347,419108e-10,0,.175573,.820693,440831e-10,0,.206388,.802277,445599e-10,0,.238095,.783634,472691e-10,0,.269841,.763159,476984e-10,0,.301587,.742914,491487e-10,0,.333333,.721662,502312e-10,0,.365079,.699668,502817e-10,0,.396825,.677839,51406e-9,0,.428571,.655091,511095e-10,0,.460317,.632665,516067e-10,0,.492064,.609734,512255e-10,0,.52381,.587043,510263e-10,0,.555556,.564298,50565e-9,0,.587302,.541769,497951e-10,0,.619048,.519529,492698e-10,0,.650794,.497574,482066e-10,0,.68254,.476028,473689e-10,0,.714286,.454961,461941e-10,0,.746032,.434341,450618e-10,0,.777778,.414364,438355e-10,0,.809524,.394832,424196e-10,0,.84127,.376109,412563e-10,0,.873016,.35779,396226e-10,0,.904762,.340379,384886e-10,0,.936508,.323385,368214e-10,0,.968254,.307295,356636e-10,0,1,1,106465e-17,0,0,1,106555e-17,0,0,1,107966e-17,0,0,1,114601e-17,0,0,1,137123e-17,0,0,1,21243e-16,0,0,.999999,489653e-17,0,0,.999999,160283e-16,0,0,.999998,62269e-15,0,0,.999997,251859e-15,0,0,.999996,996192e-15,0,0,.999992,374531e-14,0,0,.999986,132022e-13,0,0,.999975,433315e-13,0,0,.999959,131956e-12,0,0,.999927,372249e-12,0,0,.999871,972461e-12,0,0,.999771,235343e-11,0,0,.999572,52768e-10,0,0,.999133,109237e-10,0,0,.997912,203675e-10,0,0,.993008,279396e-10,0,0,.980645,139604e-10,0,0,.970057,646596e-11,0,0,.966717,65089e-10,0,474145e-10,.965497,111863e-10,0,89544e-8,.96334,179857e-10,0,.0032647,.959294,259045e-10,0,.0075144,.951519,292327e-10,0,.0138734,.940517,249769e-10,0,.0224952,.93014,26803e-9,0,.0334828,.91972,303656e-10,0,.0468973,.910294,353323e-10,0,.0627703,.897701,351002e-10,0,.0811019,.884522,388104e-10,0,.10186,.869489,412932e-10,0,.124985,.853983,415781e-10,0,.150372,.838425,454066e-10,0,.177868,.820656,471624e-10,0,.207245,.801875,475243e-10,0,.238143,.783521,505621e-10,0,.269841,.763131,50721e-9,0,.301587,.74261,523293e-10,0,.333333,.72148,528699e-10,0,.365079,.699696,538677e-10,0,.396825,.677592,539255e-10,0,.428571,.65525,546367e-10,0,.460317,.632452,541348e-10,0,.492064,.609903,544976e-10,0,.52381,.586928,536201e-10,0,.555556,.564464,535185e-10,0,.587302,.541801,524949e-10,0,.619048,.519681,51812e-9,0,.650794,.497685,507687e-10,0,.68254,.47622,496243e-10,0,.714286,.455135,485714e-10,0,.746032,.4346,471847e-10,0,.777778,.414564,459294e-10,0,.809524,.395165,444705e-10,0,.84127,.376333,430772e-10,0,.873016,.358197,416229e-10,0,.904762,.34064,401019e-10,0,.936508,.323816,386623e-10,0,.968254,.307581,370933e-10,0,1,1,991541e-17,0,0,1,992077e-17,0,0,1,100041e-16,0,0,1,10385e-15,0,0,1,115777e-16,0,0,1,150215e-16,0,0,.999999,254738e-16,0,0,.999999,598822e-16,0,0,.999998,179597e-15,0,0,.999997,602367e-15,0,0,.999994,206835e-14,0,0,.99999,694952e-14,0,0,.999984,223363e-13,0,0,.999972,678578e-13,0,0,.999952,193571e-12,0,0,.999919,516594e-12,0,0,.99986,128739e-11,0,0,.999753,299298e-11,0,0,.999546,648258e-11,0,0,.999074,129985e-10,0,0,.997671,232176e-10,0,0,.991504,256701e-10,0,0,.981148,131141e-10,0,0,.971965,869048e-11,0,280182e-10,.966624,808301e-11,0,695475e-9,.965344,135235e-10,0,.00265522,.963048,210592e-10,0,.00622975,.958673,287473e-10,0,.0116234,.950262,281379e-10,0,.018976,.940836,271089e-10,0,.0283844,.930996,30926e-9,0,.0399151,.919848,348359e-10,0,.0536063,.909136,366092e-10,0,.0694793,.897554,384162e-10,0,.0875342,.884691,430971e-10,0,.107749,.869414,447803e-10,0,.130087,.853462,452858e-10,0,.154481,.838187,495769e-10,0,.180833,.820381,502709e-10,0,.209005,.801844,522713e-10,0,.238791,.783061,541505e-10,0,.269869,.763205,553712e-10,0,.301587,.742362,564909e-10,0,.333333,.721393,572646e-10,0,.365079,.699676,581012e-10,0,.396825,.677395,58096e-9,0,.428571,.655208,585766e-10,0,.460317,.632451,583602e-10,0,.492064,.609839,580234e-10,0,.52381,.587093,577161e-10,0,.555556,.564467,568447e-10,0,.587302,.542043,563166e-10,0,.619048,.519826,55156e-9,0,.650794,.497952,541682e-10,0,.68254,.476477,528971e-10,0,.714286,.455412,514952e-10,0,.746032,.434926,502222e-10,0,.777778,.4149,485779e-10,0,.809524,.395552,472242e-10,0,.84127,.376712,454891e-10,0,.873016,.358622,440924e-10,0,.904762,.341048,422984e-10,0,.936508,.324262,408582e-10,0,.968254,.308013,390839e-10,0,1,1,613913e-16,0,0,1,614145e-16,0,0,1,617708e-16,0,0,1,633717e-16,0,0,1,681648e-16,0,0,1,808291e-16,0,0,1,114608e-15,0,0,.999998,210507e-15,0,0,.999997,499595e-15,0,0,.999995,139897e-14,0,0,.999994,419818e-14,0,0,.999988,127042e-13,0,0,.999979,375153e-13,0,0,.999965,106206e-12,0,0,.999945,285381e-12,0,0,.999908,723611e-12,0,0,.999846,17255e-10,0,0,.999733,386104e-11,0,0,.999511,808493e-11,0,0,.998993,156884e-10,0,0,.997326,265538e-10,0,0,.989706,206466e-10,0,0,.981713,130756e-10,0,70005e-10,.973636,106473e-10,0,464797e-9,.966509,10194e-9,0,.00201743,.965149,165881e-10,0,.00497549,.962669,249147e-10,0,.00953262,.95786,317449e-10,0,.0158211,.949334,281045e-10,0,.0239343,.941041,303263e-10,0,.0339372,.931575,356754e-10,0,.0458738,.920102,397075e-10,0,.059772,.908002,384886e-10,0,.075645,.897269,43027e-9,0,.0934929,.884559,479925e-10,0,.113302,.869161,48246e-9,0,.135045,.853342,509505e-10,0,.158678,.837633,542846e-10,0,.184136,.820252,554139e-10,0,.211325,.801872,581412e-10,0,.240113,.782418,585535e-10,0,.270306,.7631,610923e-10,0,.301594,.742183,613678e-10,0,.333333,.721098,627275e-10,0,.365079,.699512,629413e-10,0,.396825,.677372,636351e-10,0,.428571,.655059,633555e-10,0,.460317,.632567,636513e-10,0,.492064,.609784,628965e-10,0,.52381,.587237,625546e-10,0,.555556,.564525,615825e-10,0,.587302,.542181,605048e-10,0,.619048,.520017,596329e-10,0,.650794,.498204,581516e-10,0,.68254,.476742,569186e-10,0,.714286,.455803,553833e-10,0,.746032,.435251,537807e-10,0,.777778,.415374,522025e-10,0,.809524,.395921,503421e-10,0,.84127,.377253,488211e-10,0,.873016,.359021,468234e-10,0,.904762,.341637,453269e-10,0,.936508,.3247,433014e-10,0,.968254,.308625,418007e-10,0,1,1,286798e-15,0,0,1,286877e-15,0,0,1,288094e-15,0,0,1,293506e-15,0,0,1,309262e-15,0,0,.999999,348593e-15,0,0,.999999,444582e-15,0,0,.999998,688591e-15,0,0,.999996,134391e-14,0,0,.999993,317438e-14,0,0,.999989,835609e-14,0,0,.999983,228677e-13,0,0,.999974,623361e-13,0,0,.999959,165225e-12,0,0,.999936,419983e-12,0,0,.999896,101546e-11,0,0,.99983,232376e-11,0,0,.999709,50156e-10,0,0,.999469,10167e-9,0,0,.998886,190775e-10,0,0,.996819,300511e-10,0,0,.988837,185092e-10,0,168222e-12,.982178,134622e-10,0,259622e-9,.975017,125961e-10,0,.00142595,.967101,13507e-9,0,.00382273,.964905,205003e-10,0,.00764164,.96218,29546e-9,0,.0130121,.956821,343738e-10,0,.0200253,.948829,305063e-10,0,.0287452,.941092,346487e-10,0,.039218,.931883,412061e-10,0,.0514748,.920211,444651e-10,0,.0655351,.907307,431252e-10,0,.0814082,.89684,490382e-10,0,.0990939,.884119,53334e-9,0,.118583,.869148,54114e-9,0,.139856,.853377,578536e-10,0,.162882,.836753,592285e-10,0,.187615,.820063,622787e-10,0,.213991,.801694,645492e-10,0,.241918,.782116,65353e-9,0,.271267,.762673,674344e-10,0,.301847,.742133,682788e-10,0,.333333,.720779,691959e-10,0,.365079,.699386,696817e-10,0,.396826,.67732,699583e-10,0,.428572,.654888,698447e-10,0,.460318,.632499,694063e-10,0,.492064,.609825,691612e-10,0,.52381,.587287,681576e-10,0,.555556,.564743,674138e-10,0,.587302,.542409,661617e-10,0,.619048,.520282,647785e-10,0,.650794,.498506,633836e-10,0,.68254,.477102,615905e-10,0,.714286,.456167,601013e-10,0,.746032,.435728,581457e-10,0,.777778,.415809,564215e-10,0,.809524,.396517,544997e-10,0,.84127,.377737,525061e-10,0,.873016,.359698,506831e-10,0,.904762,.342164,48568e-9,0,.936508,.325417,467826e-10,0,.968254,.309186,446736e-10,0,1,1,109018e-14,0,0,1,10904e-13,0,0,1,109393e-14,0,0,1,11095e-13,0,0,1,1154e-12,0,0,1,126089e-14,0,0,.999999,15059e-13,0,0,.999997,207899e-14,0,0,.999994,348164e-14,0,0,.999993,705728e-14,0,0,.999987,163692e-13,0,0,.999981,406033e-13,0,0,.999969,10245e-11,0,0,.999953,255023e-12,0,0,.999925,61511e-11,0,0,.999881,142218e-11,0,0,.99981,313086e-11,0,0,.99968,653119e-11,0,0,.999418,12832e-9,0,0,.998748,232497e-10,0,0,.996066,329522e-10,0,0,.988379,179613e-10,0,108799e-9,.982567,143715e-10,0,921302e-9,.976097,148096e-10,0,.00280738,.968475,178905e-10,0,.00596622,.964606,253921e-10,0,.0105284,.961564,348623e-10,0,.0165848,.955517,357612e-10,0,.0242,.948381,343493e-10,0,.03342,.941095,405849e-10,0,.0442777,.931923,475394e-10,0,.0567958,.91996,484328e-10,0,.0709879,.907419,502146e-10,0,.086861,.89618,561654e-10,0,.104415,.88337,587612e-10,0,.123643,.869046,618057e-10,0,.144531,.853278,657392e-10,0,.167057,.836091,66303e-9,0,.191188,.819644,704445e-10,0,.216878,.801246,714071e-10,0,.244062,.782031,740093e-10,0,.272649,.762066,74685e-9,0,.302509,.741964,766647e-10,0,.333442,.720554,766328e-10,0,.365079,.699098,777857e-10,0,.396826,.677189,774633e-10,0,.428572,.65484,776235e-10,0,.460318,.632496,770316e-10,0,.492064,.609908,762669e-10,0,.52381,.587312,753972e-10,0,.555556,.564938,739994e-10,0,.587302,.542577,728382e-10,0,.619048,.52062,71112e-9,0,.650794,.498819,694004e-10,0,.68254,.477555,675575e-10,0,.714286,.456568,653449e-10,0,.746032,.436278,636068e-10,0,.777778,.41637,613466e-10,0,.809524,.397144,594177e-10,0,.84127,.378412,570987e-10,0,.873016,.360376,550419e-10,0,.904762,.342906,527422e-10,0,.936508,.326136,506544e-10,0,.968254,.30997,484307e-10,0,1,1,354014e-14,0,0,1,354073e-14,0,0,1,354972e-14,0,0,1,358929e-14,0,0,1,370093e-14,0,0,.999999,396194e-14,0,0,.999998,453352e-14,0,0,.999997,578828e-14,0,0,.999994,863812e-14,0,0,.999991,153622e-13,0,0,.999985,316356e-13,0,0,.999977,712781e-13,0,0,.999964,166725e-12,0,0,.999945,390501e-12,0,0,.999912,895622e-12,0,0,.999866,198428e-11,0,0,.999786,421038e-11,0,0,.999647,850239e-11,0,0,.999356,162059e-10,0,0,.998563,282652e-10,0,0,.994928,336309e-10,0,244244e-10,.987999,178458e-10,0,523891e-9,.982893,159162e-10,0,.00194729,.977044,178056e-10,0,.00451099,.969972,230624e-10,0,.00835132,.964237,313922e-10,0,.013561,.960791,406145e-10,0,.0202056,.954292,372796e-10,0,.0283321,.948052,403199e-10,0,.0379739,.940938,479537e-10,0,.0491551,.931689,545292e-10,0,.0618918,.91987,54038e-9,0,.0761941,.907665,589909e-10,0,.0920672,.895281,642651e-10,0,.109511,.882621,659707e-10,0,.12852,.86873,709973e-10,0,.149085,.853008,742221e-10,0,.171189,.835944,761754e-10,0,.194809,.818949,797052e-10,0,.21991,.800951,812434e-10,0,.246447,.781847,838075e-10,0,.274352,.761649,84501e-9,0,.303535,.74152,860258e-10,0,.333857,.720495,866233e-10,0,.365104,.698742,868326e-10,0,.396826,.677096,87133e-9,0,.428572,.654782,863497e-10,0,.460318,.632335,860206e-10,0,.492064,.610031,849337e-10,0,.52381,.587457,838279e-10,0,.555556,.56513,82309e-9,0,.587302,.542877,803542e-10,0,.619048,.5209,786928e-10,0,.650794,.499291,765171e-10,0,.68254,.477971,744753e-10,0,.714286,.457221,72209e-9,0,.746032,.436803,697448e-10,0,.777778,.417083,675333e-10,0,.809524,.397749,648058e-10,0,.84127,.379177,625759e-10,0,.873016,.361061,598584e-10,0,.904762,.343713,575797e-10,0,.936508,.326894,549999e-10,0,.968254,.310816,527482e-10,0,1,1,10153e-12,0,0,1,101544e-13,0,0,1,101751e-13,0,0,1,102662e-13,0,0,1,10521e-12,0,0,.999999,111049e-13,0,0,.999999,123408e-13,0,0,.999996,14924e-12,0,0,.999992,204471e-13,0,0,.999989,326539e-13,0,0,.99998,603559e-13,0,0,.999971,123936e-12,0,0,.999955,269058e-12,0,0,.999933,593604e-12,0,0,.999901,129633e-11,0,0,.999847,275621e-11,0,0,.999761,564494e-11,0,0,.999607,110485e-10,0,0,.999282,204388e-10,0,0,.99831,341084e-10,0,22038e-11,.993288,294949e-10,0,242388e-9,.987855,192736e-10,0,.0012503,.983167,182383e-10,0,.0032745,.977908,218633e-10,0,.00646321,.971194,290662e-10,0,.0109133,.963867,386401e-10,0,.0166927,.95982,462827e-10,0,.0238494,.953497,420705e-10,0,.0324178,.947621,477743e-10,0,.0424225,.940611,568258e-10,0,.0538808,.931174,618061e-10,0,.0668047,.919919,627098e-10,0,.0812014,.907856,694714e-10,0,.0970745,.894509,735008e-10,0,.114424,.881954,763369e-10,0,.133246,.868309,821896e-10,0,.153534,.852511,83769e-9,0,.175275,.835821,881615e-10,0,.198453,.817981,896368e-10,0,.223042,.800504,930906e-10,0,.249009,.78141,945056e-10,0,.276304,.761427,963605e-10,0,.304862,.74094,968088e-10,0,.334584,.720233,981481e-10,0,.365322,.698592,979122e-10,0,.396826,.676763,981057e-10,0,.428571,.654808,973956e-10,0,.460318,.632326,962619e-10,0,.492064,.610049,952996e-10,0,.52381,.58763,933334e-10,0,.555556,.565261,917573e-10,0,.587302,.543244,896636e-10,0,.619048,.521273,873304e-10,0,.650794,.499818,852648e-10,0,.68254,.478536,823961e-10,0,.714286,.457826,79939e-9,0,.746032,.437549,77126e-9,0,.777778,.41776,743043e-10,0,.809524,.39863,716426e-10,0,.84127,.379954,686456e-10,0,.873016,.362025,660514e-10,0,.904762,.344581,630755e-10,0,.936508,.327909,605439e-10,0,.968254,.311736,576345e-10,0,1,1,263344e-13,0,0,1,263373e-13,0,0,1,263815e-13,0,0,1,265753e-13,0,0,1,271132e-13,0,0,.999999,283279e-13,0,0,.999997,30833e-12,0,0,.999995,358711e-13,0,0,.999992,461266e-13,0,0,.999985,67574e-12,0,0,.999977,11358e-11,0,0,.999966,213657e-12,0,0,.999948,431151e-12,0,0,.999923,896656e-12,0,0,.999884,186603e-11,0,0,.999826,381115e-11,0,0,.999732,754184e-11,0,0,.999561,143192e-10,0,0,.999191,257061e-10,0,0,.997955,405724e-10,0,744132e-10,.992228,276537e-10,0,716477e-9,.987638,208885e-10,0,.0022524,.983395,215226e-10,0,.00484816,.978614,270795e-10,0,.00860962,.972389,365282e-10,0,.0136083,.964392,474747e-10,0,.0198941,.95861,509141e-10,0,.0275023,.952806,48963e-9,0,.0364584,.94712,571119e-10,0,.04678,.940104,671704e-10,0,.0584799,.930398,687586e-10,0,.0715665,.919866,738161e-10,0,.086045,.907853,813235e-10,0,.101918,.894078,834582e-10,0,.119186,.881177,892093e-10,0,.137845,.867575,944548e-10,0,.157891,.852107,969607e-10,0,.179316,.835502,101456e-9,0,.202106,.81756,103256e-9,0,.226243,.79984,106954e-9,0,.251704,.780998,108066e-9,0,.278451,.761132,110111e-9,0,.306436,.740429,110459e-9,0,.335586,.719836,111219e-9,0,.365796,.698467,11145e-8,0,.3969,.676446,110393e-9,0,.428571,.654635,110035e-9,0,.460318,.632411,108548e-9,0,.492064,.609986,106963e-9,0,.52381,.587872,105238e-9,0,.555556,.565528,102665e-9,0,.587302,.543563,100543e-9,0,.619048,.52176,976182e-10,0,.650794,.500188,947099e-10,0,.68254,.479204,919929e-10,0,.714286,.458413,886139e-10,0,.746032,.438314,857839e-10,0,.777778,.418573,82411e-9,0,.809524,.39947,792211e-10,0,.84127,.380892,759546e-10,0,.873016,.362953,727571e-10,0,.904762,.345601,695738e-10,0,.936508,.328895,664907e-10,0,.968254,.312808,634277e-10,0,1,1,628647e-13,0,0,1,628705e-13,0,0,1,629587e-13,0,0,1,633441e-13,0,0,.999999,644087e-13,0,0,.999998,667856e-13,0,0,.999997,715889e-13,0,0,.999995,809577e-13,0,0,.999989,992764e-13,0,0,.999983,135834e-12,0,0,.999974,210482e-12,0,0,.999959,365215e-12,0,0,.999939,686693e-12,0,0,.999911,13472e-10,0,0,.999868,26731e-10,0,0,.999804,524756e-11,0,0,.9997,100403e-10,0,0,.99951,185019e-10,0,0,.999078,322036e-10,0,620676e-11,.997428,470002e-10,0,341552e-9,.99162,287123e-10,0,.00143727,.987479,234706e-10,0,.00349201,.983582,260083e-10,0,.0066242,.979186,337927e-10,0,.0109113,.97325,454689e-10,0,.0164064,.965221,573759e-10,0,.0231463,.957262,544114e-10,0,.0311571,.952211,587006e-10,0,.0404572,.946631,692256e-10,0,.0510592,.939391,787819e-10,0,.0629723,.929795,792368e-10,0,.0762025,.91965,875075e-10,0,.090753,.907737,950903e-10,0,.106626,.893899,972963e-10,0,.123822,.880239,10459e-8,0,.142337,.866562,107689e-9,0,.16217,.85164,113081e-9,0,.183314,.835021,116636e-9,0,.20576,.817311,120074e-9,0,.229496,.798845,121921e-9,0,.254502,.780479,12475e-8,0,.280753,.760694,125255e-9,0,.308212,.740142,126719e-9,0,.336825,.719248,12636e-8,0,.366517,.698209,126712e-9,0,.397167,.676398,125769e-9,0,.428578,.654378,124432e-9,0,.460318,.632484,123272e-9,0,.492064,.610113,12085e-8,0,.52381,.587931,118411e-9,0,.555556,.565872,11569e-8,0,.587302,.543814,112521e-9,0,.619048,.522265,109737e-9,0,.650794,.500835,106228e-9,0,.68254,.479818,102591e-9,0,.714286,.459258,991288e-10,0,.746032,.439061,952325e-10,0,.777778,.419552,91895e-9,0,.809524,.400399,879051e-10,0,.84127,.381976,844775e-10,0,.873016,.364009,806316e-10,0,.904762,.346761,771848e-10,0,.936508,.330049,735429e-10,0,.968254,.314018,702103e-10,0,1,1,139968e-12,0,0,1,139979e-12,0,0,1,140145e-12,0,0,1,14087e-11,0,0,.999999,142865e-12,0,0,.999998,147279e-12,0,0,.999997,156057e-12,0,0,.999992,17276e-11,0,0,.999989,204352e-12,0,0,.99998,26494e-11,0,0,.999969,383435e-12,0,0,.999953,618641e-12,0,0,.999929,108755e-11,0,0,.999898,201497e-11,0,0,.999849,381346e-11,0,0,.999778,719815e-11,0,0,.999661,133215e-10,0,0,.999451,238313e-10,0,0,.998936,401343e-10,0,113724e-9,.99662,517346e-10,0,820171e-9,.991094,304323e-10,0,.00238143,.987487,281757e-10,0,.00493527,.983731,320048e-10,0,.00856859,.979647,423905e-10,0,.0133393,.973837,562935e-10,0,.0192863,.96584,677442e-10,0,.0264369,.956309,623073e-10,0,.03481,.951523,704131e-10,0,.0444184,.946003,836594e-10,0,.0552713,.938454,911736e-10,0,.0673749,.929279,938264e-10,0,.0807329,.919239,103754e-9,0,.0953479,.907293,109928e-9,0,.111221,.893936,115257e-9,0,.128352,.879674,122265e-9,0,.14674,.865668,125733e-9,0,.166382,.850998,132305e-9,0,.187276,.834498,134844e-9,0,.209413,.816903,139276e-9,0,.232786,.798235,140984e-9,0,.257382,.779724,14378e-8,0,.283181,.760251,144623e-9,0,.310156,.739808,145228e-9,0,.338269,.718762,14539e-8,0,.367461,.697815,144432e-9,0,.397646,.67631,143893e-9,0,.428685,.654278,141846e-9,0,.460318,.632347,13935e-8,0,.492064,.610296,137138e-9,0,.52381,.588039,133806e-9,0,.555556,.566218,130755e-9,0,.587302,.544346,127128e-9,0,.619048,.522701,123002e-9,0,.650794,.501542,119443e-9,0,.68254,.480508,115055e-9,0,.714286,.460092,111032e-9,0,.746032,.440021,106635e-9,0,.777778,.420446,102162e-9,0,.809524,.401512,98184e-9,0,.84127,.38299,936497e-10,0,.873016,.365232,89813e-9,0,.904762,.347865,853073e-10,0,.936508,.331342,817068e-10,0,.968254,.315202,773818e-10,0,1,1,29368e-11,0,0,1,2937e-10,0,0,1,293998e-12,0,0,1,295298e-12,0,0,.999999,298865e-12,0,0,.999998,3067e-10,0,0,.999995,322082e-12,0,0,.999992,350767e-12,0,0,.999986,403538e-12,0,0,.999976,501372e-12,0,0,.999964,68562e-11,0,0,.999945,10374e-10,0,0,.999919,171269e-11,0,0,.999882,300175e-11,0,0,.999829,542144e-11,0,0,.999749,984182e-11,0,0,.99962,176213e-10,0,0,.999382,305995e-10,0,138418e-10,.998751,496686e-10,0,389844e-9,.995344,510733e-10,0,.00150343,.990768,345829e-10,0,.00352451,.987464,342841e-10,0,.00655379,.983846,399072e-10,0,.0106554,.980007,533219e-10,0,.0158723,.974494,696992e-10,0,.0222333,.96622,776754e-10,0,.029758,.956273,747718e-10,0,.0384596,.950952,864611e-10,0,.0483473,.945215,100464e-9,0,.0594266,.937287,103729e-9,0,.0717019,.928649,111665e-9,0,.0851752,.918791,12353e-8,0,.0998479,.906685,127115e-9,0,.115721,.893706,13628e-8,0,.132794,.879248,142427e-9,0,.151067,.864685,148091e-9,0,.170538,.850032,153517e-9,0,.191204,.833853,157322e-9,0,.213063,.816353,161086e-9,0,.236107,.797834,164111e-9,0,.260329,.778831,165446e-9,0,.285714,.759756,167492e-9,0,.312243,.739419,166928e-9,0,.339887,.718491,167e-6,0,.368604,.697392,165674e-9,0,.398329,.676102,163815e-9,0,.428961,.654243,162003e-9,0,.460331,.632176,158831e-9,0,.492064,.610407,155463e-9,0,.52381,.588394,152062e-9,0,.555556,.56645,147665e-9,0,.587302,.5449,14375e-8,0,.619048,.523276,138905e-9,0,.650794,.502179,134189e-9,0,.68254,.481359,129392e-9,0,.714286,.46092,124556e-9,0,.746032,.441084,11957e-8,0,.777778,.421517,114652e-9,0,.809524,.402721,109688e-9,0,.84127,.384222,104667e-9,0,.873016,.366534,999633e-10,0,.904762,.349205,950177e-10,0,.936508,.332702,907301e-10,0,.968254,.316599,859769e-10,0,1,1,585473e-12,0,0,1,585507e-12,0,0,1,58602e-11,0,0,.999999,588259e-12,0,0,.999999,594381e-12,0,0,.999998,607754e-12,0,0,.999995,633729e-12,0,0,.99999,68137e-11,0,0,.999984,767003e-12,0,0,.999973,921212e-12,0,0,.999959,120218e-11,0,0,.999936,172024e-11,0,0,.999907,268088e-11,0,0,.999866,445512e-11,0,0,.999806,768481e-11,0,0,.999716,1342e-8,0,0,.999576,232473e-10,0,0,.9993,391694e-10,0,129917e-9,.998498,608429e-10,0,845035e-9,.994132,489743e-10,0,.00237616,.99031,384644e-10,0,.00484456,.987409,421768e-10,0,.00832472,.983981,504854e-10,0,.0128643,.980268,671028e-10,0,.0184947,.974875,852749e-10,0,.025237,.966063,85531e-9,0,.0331046,.956779,900588e-10,0,.0421067,.950259,10577e-8,0,.0522487,.944239,119458e-9,0,.0635343,.936341,122164e-9,0,.0759654,.928047,134929e-9,0,.0895434,.918065,145544e-9,0,.104269,.906267,150531e-9,0,.120142,.893419,161652e-9,0,.137163,.878758,16593e-8,0,.15533,.863699,174014e-9,0,.174645,.848876,177877e-9,0,.195106,.833032,184049e-9,0,.21671,.815557,186088e-9,0,.239454,.797323,19054e-8,0,.263332,.778124,191765e-9,0,.288336,.758929,192535e-9,0,.314451,.738979,192688e-9,0,.341658,.718213,191522e-9,0,.369924,.696947,190491e-9,0,.399202,.675807,187913e-9,0,.429416,.654147,184451e-9,0,.460447,.63229,181442e-9,0,.492064,.610499,177139e-9,0,.523809,.588747,172596e-9,0,.555555,.566783,167457e-9,0,.587301,.545359,162518e-9,0,.619048,.523984,156818e-9,0,.650794,.502917,151884e-9,0,.68254,.482294,145514e-9,0,.714286,.461945,140199e-9,0,.746032,.442133,134101e-9,0,.777778,.422705,128374e-9,0,.809524,.403916,122996e-9,0,.84127,.38554,116808e-9,0,.873016,.367909,111973e-9,0,.904762,.350651,105938e-9,0,.936508,.334208,101355e-9,0,.968254,.318123,957629e-10,0,1,1,111633e-11,0,0,1,111639e-11,0,0,1,111725e-11,0,0,1,112096e-11,0,0,.999999,11311e-10,0,0,.999997,115315e-11,0,0,.999995,11956e-10,0,0,.999989,127239e-11,0,0,.999981,140772e-11,0,0,.999969,164541e-11,0,0,.999952,206607e-11,0,0,.999928,281783e-11,0,0,.999895,416835e-11,0,0,.999848,658728e-11,0,0,.999781,108648e-10,0,0,.999682,182579e-10,0,0,.999523,306003e-10,0,159122e-10,.999205,499862e-10,0,391184e-9,.998131,73306e-9,0,.00147534,.993334,513229e-10,0,.0034227,.99016,467783e-10,0,.00632232,.987321,523413e-10,0,.0102295,.984099,64267e-9,0,.0151794,.980432,843042e-10,0,.0211947,.974976,102819e-9,0,.0282899,.966429,996234e-10,0,.0364739,.957633,111074e-9,0,.0457522,.949422,128644e-9,0,.0561278,.943045,140076e-9,0,.0676023,.935448,146349e-9,0,.0801762,.927225,161854e-9,0,.0938499,.917033,169135e-9,0,.108623,.905762,179987e-9,0,.124496,.892879,189832e-9,0,.141469,.878435,195881e-9,0,.159541,.863114,20466e-8,0,.178713,.84776,209473e-9,0,.198985,.832084,214861e-9,0,.220355,.814915,217695e-9,0,.242823,.796711,220313e-9,0,.266385,.777603,22313e-8,0,.291036,.757991,222471e-9,0,.316767,.738371,222869e-9,0,.343563,.717872,221243e-9,0,.371402,.696619,218089e-9,0,.400248,.675379,21562e-8,0,.430047,.65411,21169e-8,0,.460709,.63241,206947e-9,0,.492079,.61046,201709e-9,0,.52381,.58903,196753e-9,0,.555556,.567267,189637e-9,0,.587302,.545886,184735e-9,0,.619048,.524714,177257e-9,0,.650794,.503789,171424e-9,0,.68254,.483204,164688e-9,0,.714286,.462976,157172e-9,0,.746032,.443294,151341e-9,0,.777778,.423988,143737e-9,0,.809524,.405325,138098e-9,0,.84127,.386981,130698e-9,0,.873016,.369436,125276e-9,0,.904762,.35219,118349e-9,0,.936508,.335804,11312e-8,0,.968254,.319749,106687e-9,0,1,1,204685e-11,0,0,1,204694e-11,0,0,1,204831e-11,0,0,.999999,205428e-11,0,0,.999999,207056e-11,0,0,.999997,210581e-11,0,0,.999993,21732e-10,0,0,.999987,229365e-11,0,0,.999979,250243e-11,0,0,.999965,286127e-11,0,0,.999947,348028e-11,0,0,.999918,455588e-11,0,0,.999881,643303e-11,0,0,.999828,970064e-11,0,0,.999753,153233e-10,0,0,.999642,24793e-9,0,0,.999464,402032e-10,0,122947e-9,.999089,635852e-10,0,807414e-9,.997567,857026e-10,0,.00227206,.992903,594912e-10,0,.00462812,.990011,578515e-10,0,.00794162,.987192,65399e-9,0,.0122534,.98418,819675e-10,0,.0175888,.980491,105514e-9,0,.0239635,.974779,121532e-9,0,.031387,.96675,119144e-9,0,.0398644,.958248,136125e-9,0,.0493982,.948884,155408e-9,0,.0599896,.941673,162281e-9,0,.0716382,.934521,176754e-9,0,.0843437,.926205,192873e-9,0,.0981056,.916089,200038e-9,0,.112923,.904963,213624e-9,0,.128796,.892089,221834e-9,0,.145725,.878028,232619e-9,0,.163709,.86249,238632e-9,0,.182749,.846587,247002e-9,0,.202847,.830988,250702e-9,0,.224001,.814165,255562e-9,0,.246214,.796135,257505e-9,0,.269482,.777052,258625e-9,0,.293805,.757201,258398e-9,0,.319176,.737655,256714e-9,0,.345587,.717477,255187e-9,0,.373021,.696433,251792e-9,0,.401454,.675084,247223e-9,0,.430844,.653907,242213e-9,0,.461125,.632561,237397e-9,0,.492187,.610658,229313e-9,0,.52381,.589322,224402e-9,0,.555556,.567857,216116e-9,0,.587302,.54652,209124e-9,0,.619048,.525433,201601e-9,0,.650794,.504679,192957e-9,0,.68254,.484203,186052e-9,0,.714286,.464203,177672e-9,0,.746032,.444549,170005e-9,0,.777778,.425346,162401e-9,0,.809524,.406706,1544e-7,0,.84127,.388576,147437e-9,0,.873016,.37094,139493e-9,0,.904762,.353996,133219e-9,0,.936508,.337391,125573e-9,0,.968254,.321648,119867e-9,0,1,1,362511e-11,0,0,1,362525e-11,0,0,1,362739e-11,0,0,.999999,363673e-11,0,0,.999998,366214e-11,0,0,.999996,371698e-11,0,0,.999992,382116e-11,0,0,.999986,400554e-11,0,0,.999976,432058e-11,0,0,.999961,485194e-11,0,0,.999938,574808e-11,0,0,.999908,726643e-11,0,0,.999865,984707e-11,0,0,.999807,142217e-10,0,0,.999723,215581e-10,0,0,.999602,336114e-10,0,119113e-10,.999398,527353e-10,0,355813e-9,.998946,805809e-10,0,.00137768,.996647,942908e-10,0,.00322469,.992298,668733e-10,0,.00597897,.989802,716564e-10,0,.00968903,.987019,821355e-10,0,.0143845,.984219,104555e-9,0,.0200831,.980425,131245e-9,0,.0267948,.974241,139613e-9,0,.034525,.967006,145931e-9,0,.0432757,.95893,167153e-9,0,.0530471,.949157,188146e-9,0,.0638386,.94062,194625e-9,0,.0756487,.933509,213721e-9,0,.0884762,.925088,229616e-9,0,.10232,.915178,239638e-9,0,.117178,.904093,254814e-9,0,.133051,.891337,263685e-9,0,.149939,.877326,274789e-9,0,.167841,.861794,280534e-9,0,.18676,.845758,289534e-9,0,.206696,.829792,294446e-9,0,.22765,.813037,296877e-9,0,.249625,.795285,300217e-9,0,.27262,.776323,299826e-9,0,.296636,.756673,299787e-9,0,.321671,.736856,297867e-9,0,.347718,.716883,294052e-9,0,.374768,.696089,289462e-9,0,.402804,.67505,285212e-9,0,.431796,.653509,27653e-8,0,.461695,.63258,271759e-9,0,.49242,.61104,262811e-9,0,.523822,.589567,255151e-9,0,.555556,.568322,246434e-9,0,.587302,.547235,237061e-9,0,.619048,.52616,228343e-9,0,.650794,.505716,219236e-9,0,.68254,.485274,209595e-9,0,.714286,.465411,201011e-9,0,.746032,.445854,19109e-8,0,.777778,.426911,182897e-9,0,.809524,.408222,173569e-9,0,.84127,.390307,165496e-9,0,.873016,.372624,156799e-9,0,.904762,.355804,14917e-8,0,.936508,.33924,140907e-9,0,.968254,.323534,134062e-9,0,1,1,622487e-11,0,0,1,62251e-10,0,0,1,622837e-11,0,0,.999999,624259e-11,0,0,.999998,628127e-11,0,0,.999996,636451e-11,0,0,.999991,65218e-10,0,0,.999984,679782e-11,0,0,.999973,726361e-11,0,0,.999955,803644e-11,0,0,.999931,931397e-11,0,0,.999896,114299e-10,0,0,.999847,149402e-10,0,0,.999784,207461e-10,0,0,.999692,302493e-10,0,0,.999554,454957e-10,0,997275e-10,.999326,690762e-10,0,724813e-9,.998757,101605e-9,0,.0020972,.995367,958745e-10,0,.00432324,.99209,832808e-10,0,.00746347,.989517,887601e-10,0,.0115534,.987008,10564e-8,0,.0166134,.98421,133179e-9,0,.0226552,.98021,161746e-9,0,.0296838,.973676,161821e-9,0,.0377016,.967052,178635e-9,0,.0467079,.959385,206765e-9,0,.0567013,.949461,22476e-8,0,.0676796,.939578,23574e-8,0,.0796403,.932416,25893e-8,0,.0925812,.923759,271228e-9,0,.106501,.914223,289165e-9,0,.121397,.902942,301156e-9,0,.13727,.890419,313852e-9,0,.15412,.876639,324408e-9,0,.171946,.861316,33249e-8,0,.190751,.84496,338497e-9,0,.210537,.828427,345861e-9,0,.231305,.811871,347863e-9,0,.253057,.794397,350225e-9,0,.275797,.775726,349915e-9,0,.299525,.75617,347297e-9,0,.324242,.736091,344232e-9,0,.349947,.716213,340835e-9,0,.376633,.695736,332369e-9,0,.404289,.674961,327943e-9,0,.432895,.653518,318533e-9,0,.462415,.632574,310391e-9,0,.492788,.61134,300755e-9,0,.523909,.590017,290506e-9,0,.555556,.568752,280446e-9,0,.587302,.548061,269902e-9,0,.619048,.52711,258815e-9,0,.650794,.506682,248481e-9,0,.68254,.486524,237141e-9,0,.714286,.466812,226872e-9,0,.746032,.44732,216037e-9,0,.777778,.428473,205629e-9,0,.809524,.409921,195691e-9,0,.84127,.392028,185457e-9,0,.873016,.374606,176436e-9,0,.904762,.357601,166508e-9,0,.936508,.341348,158385e-9,0,.968254,.32542,149203e-9,0,1,1,103967e-10,0,0,1,10397e-9,0,0,1,104019e-10,0,0,.999999,104231e-10,0,0,.999998,104806e-10,0,0,.999995,106042e-10,0,0,.999991,108366e-10,0,0,.999982,112415e-10,0,0,.999968,119174e-10,0,0,.99995,130227e-10,0,0,.999922,148176e-10,0,0,.999884,177303e-10,0,0,.99983,224564e-10,0,0,.999758,300966e-10,0,0,.999654,423193e-10,0,549083e-11,.999503,614848e-10,0,296087e-9,.999237,903576e-10,0,.00123144,.998491,1271e-7,0,.00295954,.994594,107754e-9,0,.00555829,.99178,103025e-9,0,.00907209,.989265,11154e-8,0,.0135257,.986998,136296e-9,0,.0189327,.984137,169154e-9,0,.0252993,.979798,196671e-9,0,.0326272,.97337,196678e-9,0,.0409157,.967239,223121e-9,0,.0501623,.959543,253809e-9,0,.0603638,.949466,265972e-9,0,.0715171,.939074,288372e-9,0,.0836187,.931118,310983e-9,0,.0966657,.922525,325561e-9,0,.110656,.912983,345725e-9,0,.125588,.901617,3556e-7,0,.141461,.889487,374012e-9,0,.158275,.875787,383445e-9,0,.176031,.860654,393972e-9,0,.19473,.844417,400311e-9,0,.214374,.82741,405004e-9,0,.234967,.810545,407378e-9,0,.256512,.793312,407351e-9,0,.279011,.774847,406563e-9,0,.302468,.755621,404903e-9,0,.326887,.735511,397486e-9,0,.352266,.715435,39357e-8,0,.378605,.695403,384739e-9,0,.405897,.674681,376108e-9,0,.43413,.65359,365997e-9,0,.463277,.632471,354957e-9,0,.493295,.61151,343593e-9,0,.524106,.59064,331841e-9,0,.555561,.569386,318891e-9,0,.587302,.548785,3072e-7,0,.619048,.528146,29361e-8,0,.650794,.507872,281709e-9,0,.68254,.487805,268627e-9,0,.714286,.468196,255887e-9,0,.746032,.448922,243997e-9,0,.777778,.430093,231662e-9,0,.809524,.411845,220339e-9,0,.84127,.393808,208694e-9,0,.873016,.376615,198045e-9,0,.904762,.359655,187375e-9,0,.936508,.343452,177371e-9,0,.968254,.32765,167525e-9,0,1,1,169351e-10,0,0,1,169356e-10,0,0,1,169427e-10,0,0,.999999,169736e-10,0,0,.999998,170575e-10,0,0,.999995,172372e-10,0,0,.99999,175739e-10,0,0,.999979,181568e-10,0,0,.999966,191206e-10,0,0,.999944,20677e-9,0,0,.999912,231644e-10,0,0,.999869,271268e-10,0,0,.999811,334272e-10,0,0,.99973,433979e-10,0,0,.999617,590083e-10,0,680315e-10,.999445,829497e-10,0,612796e-9,.999138,118019e-9,0,.00187408,.998095,156712e-9,0,.00395791,.993919,125054e-9,0,.00692144,.991333,126091e-9,0,.0107962,.989226,144912e-9,0,.0155986,.986954,175737e-9,0,.0213364,.983982,213883e-9,0,.0280114,.979128,234526e-9,0,.0356226,.973327,243725e-9,0,.0441668,.967416,2773e-7,0,.0536399,.959729,308799e-9,0,.0640376,.949758,322447e-9,0,.0753554,.939173,350021e-9,0,.0875893,.9296,370089e-9,0,.100736,.921181,391365e-9,0,.114793,.91164,413636e-9,0,.129759,.900435,427068e-9,0,.145632,.888183,441046e-9,0,.162412,.874772,454968e-9,0,.180101,.859566,461882e-9,0,.1987,.843579,471556e-9,0,.218213,.826453,474335e-9,0,.238641,.809164,477078e-9,0,.259989,.792179,47755e-8,0,.282262,.773866,472573e-9,0,.305464,.754944,469765e-9,0,.329599,.735133,462371e-9,0,.35467,.714858,453674e-9,0,.380678,.694829,443888e-9,0,.407622,.674453,432052e-9,0,.435493,.653685,420315e-9,0,.464275,.632666,406829e-9,0,.493938,.611676,392234e-9,0,.524422,.591193,379208e-9,0,.555624,.570145,36319e-8,0,.587302,.549566,349111e-9,0,.619048,.529278,334166e-9,0,.650794,.509026,318456e-9,0,.68254,.489186,30449e-8,0,.714286,.469662,289051e-9,0,.746032,.450691,275494e-9,0,.777778,.431841,261437e-9,0,.809524,.413752,247846e-9,0,.84127,.395951,235085e-9,0,.873016,.378633,222245e-9,0,.904762,.36194,210533e-9,0,.936508,.345599,198494e-9,0,.968254,.329999,188133e-9,0,1,1,269663e-10,0,0,1,26967e-9,0,0,1,269772e-10,0,0,.999999,270214e-10,0,0,.999998,271415e-10,0,0,.999994,27398e-9,0,0,.999988,278771e-10,0,0,.999977,287019e-10,0,0,.999961,300544e-10,0,0,.999937,322138e-10,0,0,.999904,356163e-10,0,0,.999854,409465e-10,0,0,.99979,492651e-10,0,0,.999699,621722e-10,0,88288e-11,.999572,819715e-10,0,223369e-9,.999381,111689e-9,0,.00105414,.999016,153862e-9,0,.0026493,.997437,187667e-9,0,.00508608,.993545,155672e-9,0,.00840554,.991135,161455e-9,0,.012629,.989157,188241e-9,0,.0177661,.986874,226229e-9,0,.0238198,.983714,268668e-9,0,.0307887,.978301,277109e-9,0,.0386688,.973227,303446e-9,0,.0474554,.967317,341851e-9,0,.0571428,.959477,370885e-9,0,.0677256,.950012,392753e-9,0,.0791988,.939484,42781e-8,0,.0915576,.928135,443866e-9,0,.104798,.919819,472959e-9,0,.118918,.910049,491551e-9,0,.133915,.899181,512616e-9,0,.149788,.886881,523563e-9,0,.166537,.87359,540183e-9,0,.184164,.858613,547386e-9,0,.202669,.842809,554809e-9,0,.222056,.825727,558316e-9,0,.242329,.808086,557824e-9,0,.263492,.790728,556346e-9,0,.285551,.772987,552672e-9,0,.30851,.7541,543738e-9,0,.332376,.734669,536107e-9,0,.357153,.714411,523342e-9,0,.382845,.694196,512238e-9,0,.409454,.674252,497465e-9,0,.436977,.65357,481096e-9,0,.465404,.632999,467054e-9,0,.494713,.611994,448771e-9,0,.524864,.591604,431889e-9,0,.555779,.571134,415238e-9,0,.587302,.550528,396369e-9,0,.619048,.530292,379477e-9,0,.650794,.510364,361488e-9,0,.68254,.490749,343787e-9,0,.714286,.471266,327822e-9,0,.746032,.452462,310626e-9,0,.777778,.433907,295352e-9,0,.809524,.415659,279179e-9,0,.84127,.398138,264685e-9,0,.873016,.380833,249905e-9,0,.904762,.364247,236282e-9,0,.936508,.348041,222905e-9,0,.968254,.332389,210522e-9,0,1,1,420604e-10,0,0,1,420614e-10,0,0,1,420757e-10,0,0,.999999,42138e-9,0,0,.999997,423067e-10,0,0,.999993,426668e-10,0,0,.999986,433372e-10,0,0,.999974,444857e-10,0,0,.999956,463554e-10,0,0,.99993,493105e-10,0,0,.999892,539077e-10,0,0,.999838,610005e-10,0,0,.999767,718822e-10,0,0,.999666,884581e-10,0,365471e-10,.999525,113398e-9,0,485623e-9,.999311,150043e-9,0,.00162096,.998865,200063e-9,0,.00355319,.996278,211014e-9,0,.00633818,.992956,189672e-9,0,.0100043,.991017,210262e-9,0,.0145648,.989055,244292e-9,0,.0200237,.986741,290481e-9,0,.0263798,.983288,334303e-9,0,.033629,.977784,340307e-9,0,.0417652,.973037,377864e-9,0,.0507821,.967181,4239e-7,0,.060673,.958971,443854e-9,0,.0714314,.950093,483039e-9,0,.0830518,.939552,517934e-9,0,.0955288,.927678,539449e-9,0,.108859,.918278,568604e-9,0,.123038,.908449,588505e-9,0,.138065,.897713,612473e-9,0,.153938,.885533,625575e-9,0,.170657,.872131,63854e-8,0,.188224,.857517,647034e-9,0,.20664,.841796,65209e-8,0,.225909,.824726,6544e-7,0,.246035,.807297,655744e-9,0,.267022,.789058,646716e-9,0,.288878,.77189,643898e-9,0,.311607,.753082,629973e-9,0,.335216,.7341,621564e-9,0,.359713,.714094,605171e-9,0,.385103,.693839,588752e-9,0,.41139,.673891,573294e-9,0,.438576,.653565,552682e-9,0,.466656,.633326,533446e-9,0,.495617,.612582,514635e-9,0,.525431,.59205,49303e-8,0,.556041,.571918,471842e-9,0,.587338,.551572,451713e-9,0,.619048,.531553,430049e-9,0,.650794,.51175,410445e-9,0,.68254,.49238,390098e-9,0,.714286,.473143,370033e-9,0,.746032,.45423,351205e-9,0,.777778,.435963,332049e-9,0,.809524,.41787,315021e-9,0,.84127,.400387,297315e-9,0,.873016,.383332,281385e-9,0,.904762,.366665,265397e-9,0,.936508,.350633,250601e-9,0,.968254,.334964,23589e-8,0,1,1,643736e-10,0,0,1,64375e-9,0,0,1,643947e-10,0,0,.999999,64481e-9,0,0,.999997,647143e-10,0,0,.999994,652119e-10,0,0,.999985,661359e-10,0,0,.999972,677116e-10,0,0,.999952,702599e-10,0,0,.999922,742517e-10,0,0,.99988,803906e-10,0,0,.99982,897315e-10,0,0,.999741,103838e-9,0,0,.999629,12496e-8,0,149024e-9,.999474,156161e-9,0,861027e-9,.999229,201034e-9,0,.00231198,.998662,259069e-9,0,.00458147,.995299,245439e-9,0,.00770895,.992732,24498e-8,0,.0117126,.990847,273211e-9,0,.0165989,.988911,316492e-9,0,.0223674,.98654,37161e-8,0,.0290135,.982636,410352e-9,0,.0365309,.977346,421756e-9,0,.0449117,.972909,475578e-9,0,.0541481,.966821,522482e-9,0,.0642326,.958686,545008e-9,0,.075158,.949754,589286e-9,0,.0869181,.939184,619995e-9,0,.0995074,.927505,654266e-9,0,.112922,.916606,682362e-9,0,.127157,.906707,704286e-9,0,.142212,.895937,725909e-9,0,.158085,.883913,743939e-9,0,.174776,.870642,755157e-9,0,.192287,.856241,764387e-9,0,.210619,.84069,771032e-9,0,.229775,.823728,765906e-9,0,.249761,.806481,767604e-9,0,.270582,.787924,754385e-9,0,.292243,.770588,749668e-9,0,.314753,.751991,731613e-9,0,.338118,.733407,717655e-9,0,.362347,.713688,700604e-9,0,.387447,.693595,678765e-9,0,.413424,.673426,657042e-9,0,.440284,.65359,635892e-9,0,.468027,.633576,611569e-9,0,.496645,.613144,586011e-9,0,.526122,.592711,563111e-9,0,.556417,.572722,537699e-9,0,.587451,.552762,512556e-9,0,.619048,.532985,489757e-9,0,.650794,.513219,464139e-9,0,.68254,.493992,442193e-9,0,.714286,.47509,418629e-9,0,.746032,.456287,397045e-9,0,.777778,.438152,375504e-9,0,.809524,.420294,35492e-8,0,.84127,.402749,335327e-9,0,.873016,.385879,316422e-9,0,.904762,.369352,298333e-9,0,.936508,.353301,281417e-9,0,.968254,.337781,265203e-9,0,1,1,968267e-10,0,0,1,968284e-10,0,0,1,968556e-10,0,0,.999999,969733e-10,0,0,.999997,972913e-10,0,0,.999993,979688e-10,0,0,.999984,992239e-10,0,0,.999969,101356e-9,0,0,.999946,104784e-9,0,0,.999913,110111e-9,0,0,.999868,118217e-9,0,0,.999801,130396e-9,0,0,.999712,148523e-9,0,124907e-10,.999589,175233e-9,0,355405e-9,.999416,213999e-9,0,.0013528,.999136,268529e-9,0,.00312557,.998367,333088e-9,0,.00573045,.994701,304757e-9,0,.00919397,.992497,318031e-9,0,.0135261,.990608,353863e-9,0,.0187278,.988715,409044e-9,0,.0247947,.986241,472967e-9,0,.0317196,.981696,495104e-9,0,.039494,.977097,532873e-9,0,.0481087,.972583,594447e-9,0,.0575549,.966142,636867e-9,0,.0678242,.95823,669899e-9,0,.0789089,.949677,719499e-9,0,.0908023,.939226,750584e-9,0,.103499,.927501,793183e-9,0,.116993,.915199,81995e-8,0,.131282,.90498,847654e-9,0,.146364,.894243,868929e-9,0,.162237,.882154,884278e-9,0,.178902,.869161,898108e-9,0,.196358,.854751,901254e-9,0,.21461,.839368,90679e-8,0,.23366,.822874,901541e-9,0,.253512,.805514,897297e-9,0,.274174,.78716,881856e-9,0,.29565,.769061,870032e-9,0,.31795,.751,851719e-9,0,.341081,.732614,830671e-9,0,.365053,.713171,806569e-9,0,.389874,.693472,78338e-8,0,.415553,.673528,756404e-9,0,.442098,.653397,726872e-9,0,.469512,.633781,700494e-9,0,.497794,.613877,67105e-8,0,.526935,.593506,640361e-9,0,.556908,.573667,613502e-9,0,.587657,.553932,583177e-9,0,.61906,.534345,554375e-9,0,.650794,.515042,527811e-9,0,.68254,.495674,499367e-9,0,.714286,.477132,47429e-8,0,.746032,.458609,447726e-9,0,.777778,.440354,424205e-9,0,.809524,.422765,399549e-9,0,.84127,.405472,378315e-9,0,.873016,.388482,355327e-9,0,.904762,.372191,336122e-9,0,.936508,.356099,315247e-9,0,.968254,.340737,29794e-8,0,1,1,143327e-9,0,0,1,14333e-8,0,0,1,143366e-9,0,0,.999999,143524e-9,0,0,.999996,143952e-9,0,0,.999991,144862e-9,0,0,.999981,146544e-9,0,0,.999966,149391e-9,0,0,.999941,153946e-9,0,0,.999905,160971e-9,0,0,.999852,171562e-9,0,0,.99978,18729e-8,0,0,.999681,210386e-9,0,826239e-10,.999546,243906e-9,0,664807e-9,.999352,291739e-9,0,.00196192,.999027,357419e-9,0,.00405941,.997886,422349e-9,0,.00699664,.99419,385008e-9,0,.0107896,.99214,409775e-9,0,.0154415,.990274,456418e-9,0,.0209488,.988455,527008e-9,0,.0273037,.985804,597685e-9,0,.0344969,.98103,613124e-9,0,.0425183,.976674,668321e-9,0,.0513575,.972021,736985e-9,0,.0610046,.965274,773789e-9,0,.0714508,.958046,830852e-9,0,.0826877,.949333,875766e-9,0,.0947085,.939135,917088e-9,0,.107507,.927119,952244e-9,0,.121078,.91469,990626e-9,0,.135419,.903006,.00101304,0,.150526,.892368,.00103834,0,.166399,.880231,.00105002,0,.183038,.867432,.00106331,0,.200443,.853208,.00106783,0,.218618,.837956,.00106458,0,.237566,.821772,.00105945,0,.257291,.804328,.00104685,0,.2778,.786465,.00103178,0,.2991,.768004,.00101077,0,.321199,.74972,985504e-9,0,.344106,.731682,962893e-9,0,.36783,.712813,932146e-9,0,.392383,.693139,89871e-8,0,.417774,.673566,869678e-9,0,.444013,.653483,835525e-9,0,.471107,.633891,799853e-9,0,.49906,.614433,766838e-9,0,.527869,.594586,732227e-9,0,.557517,.574769,696442e-9,0,.587966,.555149,663935e-9,0,.61913,.535898,629826e-9,0,.650794,.516753,596486e-9,0,.68254,.497816,567078e-9,0,.714286,.479034,534399e-9,0,.746032,.460975,507013e-9,0,.777778,.442935,477421e-9,0,.809524,.425263,451101e-9,0,.84127,.408248,424964e-9,0,.873016,.391339,39993e-8,0,.904762,.37513,377619e-9,0,.936508,.359172,354418e-9,0,.968254,.343876,334823e-9,0,1,1,209042e-9,0,0,1,209045e-9,0,0,1,209093e-9,0,0,.999999,209304e-9,0,0,.999996,209871e-9,0,0,.999991,211078e-9,0,0,.999979,213304e-9,0,0,.999963,217061e-9,0,0,.999933,223042e-9,0,0,.999894,232206e-9,0,0,.999837,245901e-9,0,0,.999756,266023e-9,0,102927e-11,.999648,295204e-9,0,233468e-9,.999499,336958e-9,0,.00108237,.999283,395563e-9,0,.00268832,.998896,473785e-9,0,.00511138,.997006,520008e-9,0,.00837705,.993819,497261e-9,0,.0124928,.991632,523722e-9,0,.0174561,.989875,587258e-9,0,.0232596,.988109,676329e-9,0,.0298932,.985155,747701e-9,0,.0373453,.980479,768803e-9,0,.0456045,.976271,841054e-9,0,.0546593,.971347,911469e-9,0,.0644994,.964528,953057e-9,0,.0751152,.957632,.00102221,0,.0864981,.948681,.00106122,0,.0986407,.938716,.00111857,0,.111537,.926629,.00114762,0,.125182,.914025,.00118995,0,.139571,.901026,.00121228,0,.154703,.890358,.00123946,0,.170576,.878283,.0012527,0,.18719,.865459,.00125536,0,.204547,.851407,.00126134,0,.222648,.836276,.00124759,0,.241498,.820436,.00124443,0,.261101,.803253,.00122071,0,.281465,.785562,.00120107,0,.302595,.76718,.00117762,0,.324501,.748551,.00114289,0,.347192,.730564,.00110872,0,.370679,.712253,.00107636,0,.394973,.692867,.00103646,0,.420085,.673695,996793e-9,0,.446027,.653912,95675e-8,0,.47281,.634129,916739e-9,0,.500441,.615004,874401e-9,0,.528921,.595587,833411e-9,0,.558244,.575965,794556e-9,0,.588384,.5566,75196e-8,0,.619281,.537428,716381e-9,0,.650795,.518623,676558e-9,0,.68254,.499964,64074e-8,0,.714286,.481356,605984e-9,0,.746032,.463279,570256e-9,0,.777778,.445673,540138e-9,0,.809524,.428032,507299e-9,0,.84127,.411112,479553e-9,0,.873016,.394444,450737e-9,0,.904762,.378247,424269e-9,0,.936508,.362415,399111e-9,0,.968254,.347103,375274e-9,0,1,1,300729e-9,0,0,1,300733e-9,0,0,1,300797e-9,0,0,.999998,301072e-9,0,0,.999996,301817e-9,0,0,.999989,303398e-9,0,0,.999977,306309e-9,0,0,.999958,311209e-9,0,0,.999927,318975e-9,0,0,.999884,330804e-9,0,0,.99982,34834e-8,0,0,.999733,373854e-9,0,326995e-10,.999613,410424e-9,0,477174e-9,.999447,462047e-9,0,.00161099,.999204,533322e-9,0,.00353153,.998725,624964e-9,0,.00627965,.995871,631786e-9,0,.0098693,.993194,632017e-9,0,.0143011,.991541,68923e-8,0,.019568,.989773,766892e-9,0,.0256593,.987647,863668e-9,0,.0325625,.984193,922089e-9,0,.0402647,.980016,970749e-9,0,.0487532,.975859,.00106027,0,.058016,.970514,.00112239,0,.0680419,.963625,.00117212,0,.0788208,.956959,.00125211,0,.0903439,.947956,.00129411,0,.102604,.93809,.00135879,0,.115594,.92659,.00139309,0,.129309,.913829,.00143253,0,.143745,.90005,.00145809,0,.158901,.888129,.0014748,0,.174774,.87607,.00148756,0,.191365,.863461,.00148714,0,.208674,.849594,.00148892,0,.226705,.834531,.00146496,0,.245461,.81903,.0014579,0,.264947,.802122,.00143039,0,.28517,.78445,.00139717,0,.306137,.766434,.00136312,0,.327857,.747816,.00132597,0,.350341,.729519,.00128323,0,.373598,.711454,.00123803,0,.397642,.692699,.00119097,0,.422485,.673723,.00114565,0,.448139,.654386,.00109552,0,.474619,.634673,.00104553,0,.501933,.615554,99985e-8,0,.530089,.596462,948207e-9,0,.559087,.577385,902299e-9,0,.588913,.558257,856448e-9,0,.619525,.5392,810395e-9,0,.650826,.520543,768558e-9,0,.68254,.502206,7239e-7,0,.714286,.48402,685794e-9,0,.746032,.465779,64471e-8,0,.777778,.448455,609583e-9,0,.809524,.431091,57227e-8,0,.84127,.414147,54042e-8,0,.873016,.39765,506545e-9,0,.904762,.381576,477635e-9,0,.936508,.365881,448446e-9,0,.968254,.350582,421424e-9,0,1,1,427144e-9,0,0,1,427151e-9,0,0,1,427232e-9,0,0,.999998,42759e-8,0,0,.999995,428555e-9,0,0,.999988,430603e-9,0,0,.999976,434368e-9,0,0,.999952,440688e-9,0,0,.999919,450667e-9,0,0,.999871,46578e-8,0,0,.999801,488024e-9,0,0,.999704,520092e-9,0,129791e-9,.999572,565553e-9,0,821056e-9,.999389,628906e-9,0,.00225241,.999114,714911e-9,0,.00449109,.998488,819218e-9,0,.00756249,.995234,80415e-8,0,.0114716,.993021,830181e-9,0,.0162131,.991407,902645e-9,0,.021776,.989625,996934e-9,0,.0281471,.987064,.00109707,0,.0353118,.983265,.00114353,0,.0432562,.979535,.0012272,0,.0519665,.975224,.00132642,0,.0614298,.969574,.00138092,0,.0716348,.963021,.00145896,0,.0825709,.956046,.00152834,0,.094229,.947136,.00158217,0,.106602,.937313,.0016347,0,.119682,.926073,.00168383,0,.133465,.913121,.00171627,0,.147947,.899165,.00174229,0,.163125,.885891,.00176137,0,.178998,.873783,.00176406,0,.195566,.861331,.00176156,0,.21283,.847569,.00175346,0,.230793,.832785,.00172753,0,.249459,.817442,.00170204,0,.268832,.800613,.00166576,0,.28892,.783597,.00162909,0,.30973,.76571,.0015826,0,.331271,.747021,.00153106,0,.353554,.728593,.00148036,0,.37659,.710661,.00142808,0,.400391,.692426,.00136906,0,.424973,.673623,.00131066,0,.450347,.65494,.00125569,0,.476531,.635448,.00119517,0,.503535,.616221,.00113828,0,.531372,.597531,.0010816,0,.560047,.578795,.00102673,0,.589554,.559892,970985e-9,0,.619869,.541307,919773e-9,0,.650923,.522608,868479e-9,0,.68254,.504484,82137e-8,0,.714286,.486603,772916e-9,0,.746032,.468802,730353e-9,0,.777778,.451172,684955e-9,0,.809524,.434348,647565e-9,0,.84127,.417445,605863e-9,0,.873016,.401077,571885e-9,0,.904762,.385039,536034e-9,0,.936508,.369483,504227e-9,0,.968254,.354272,473165e-9,0,1,1,599525e-9,0,0,1,599533e-9,0,0,1,599639e-9,0,0,.999998,600097e-9,0,0,.999994,601336e-9,0,0,.999987,603958e-9,0,0,.999972,608775e-9,0,0,.999949,616842e-9,0,0,.999912,629534e-9,0,0,.999857,648658e-9,0,0,.999781,676615e-9,0,538873e-11,.999674,716574e-9,0,308602e-9,.999528,772641e-9,0,.00127003,.999326,849806e-9,0,.00300783,.999009,952682e-9,0,.00556637,.998112,.00106394,0,.00895889,.994496,.00102228,0,.0131827,.992806,.00108586,0,.0182277,.991211,.0011759,0,.0240795,.989415,.00128955,0,.030723,.986499,.00139038,0,.0381418,.982679,.00144539,0,.046321,.978839,.00153954,0,.0552459,.974295,.00164417,0,.0649034,.968784,.00171517,0,.0752814,.962324,.00180282,0,.0863693,.954956,.00186387,0,.0981578,.94624,.00193817,0,.110639,.936517,.00198156,0,.123806,.925186,.00203042,0,.137655,.91252,.0020664,0,.15218,.898441,.00207822,0,.16738,.884394,.0020992,0,.183253,.871273,.00208748,0,.199799,.859057,.00208686,0,.21702,.845243,.00205519,0,.234918,.830723,.00202868,0,.253496,.815801,.00199501,0,.272761,.79914,.00194193,0,.292719,.782372,.00188824,0,.313377,.76482,.00183695,0,.334745,.746586,.00177418,0,.356833,.7281,.00170628,0,.379654,.709842,.00164063,0,.403221,.692019,.00157355,0,.427548,.67364,.00150262,0,.452651,.655277,.00143473,0,.478545,.636438,.00136371,0,.505246,.617364,.00129911,0,.532768,.598603,.00123014,0,.561122,.580195,.00116587,0,.590309,.561786,.00110398,0,.620318,.543377,.00104148,0,.651102,.525093,983984e-9,0,.682545,.506791,92667e-8,0,.714286,.489291,874326e-9,0,.746032,.471811,821734e-9,0,.777778,.454435,774698e-9,0,.809524,.437493,727302e-9,0,.84127,.420977,684039e-9,0,.873016,.404729,64373e-8,0,.904762,.388756,60285e-8,0,.936508,.373344,56765e-8,0,.968254,.358191,531929e-9,0,1,1,832169e-9,0,0,1,832178e-9,0,0,1,83231e-8,0,0,.999998,832893e-9,0,0,.999995,834465e-9,0,0,.999985,837791e-9,0,0,.999969,843893e-9,0,0,.999944,854086e-9,0,0,.999903,870071e-9,0,0,.999843,894042e-9,0,0,.999759,928865e-9,0,531805e-10,.999643,978242e-9,0,579365e-9,.99948,.00104684,0,.00182774,.999255,.00114012,0,.00387804,.998885,.00126188,0,.00675709,.997405,.00135888,0,.010468,.99424,.00133626,0,.0150018,.992458,.00140905,0,.0203443,.990929,.00152305,0,.0264786,.989116,.00165882,0,.0333875,.985624,.00174128,0,.0410536,.982003,.00182108,0,.0494609,.978336,.00194498,0,.0585941,.973184,.00202708,0,.0684396,.9678,.00212166,0,.0789851,.961348,.00221366,0,.0902199,.953841,.00228219,0,.102134,.94534,.00235662,0,.114721,.935552,.00240572,0,.127972,.924064,.00244405,0,.141884,.911827,.00247557,0,.156451,.897731,.00248374,0,.171672,.883409,.00249863,0,.187545,.868625,.00246688,0,.20407,.856529,.00246523,0,.221249,.842999,.00242368,0,.239083,.828505,.00237354,0,.257578,.813825,.00232588,0,.276738,.797813,.00226731,0,.296569,.781097,.00219704,0,.31708,.764038,.00212394,0,.338281,.746067,.00204786,0,.360181,.727687,.00196728,0,.382794,.709571,.00188779,0,.406133,.691503,.00180532,0,.430213,.673673,.00171849,0,.45505,.655732,.00164147,0,.480662,.637399,.00155858,0,.507065,.618616,.00147641,0,.534278,.60005,.00140125,0,.562313,.581713,.00132441,0,.59118,.563546,.00125014,0,.620875,.545605,.00118249,0,.651373,.527559,.0011116,0,.682593,.509764,.00104979,0,.714286,.49193,985977e-9,0,.746032,.475011,928592e-9,0,.777778,.457878,873466e-9,0,.809524,.440979,819585e-9,0,.84127,.424613,772365e-9,0,.873016,.408549,722195e-9,0,.904762,.392771,680014e-9,0,.936508,.377317,636797e-9,0,.968254,.362352,598318e-9,0,1,1,.00114313,0,0,1,.00114314,0,0,.999999,.00114331,0,0,.999998,.00114404,0,0,.999994,.00114601,0,0,.999984,.00115019,0,0,.999967,.00115784,0,0,.999937,.0011706,0,0,.999894,.00119054,0,0,.999828,.00122031,0,0,.999735,.00126331,0,169263e-9,.999606,.00132382,0,949167e-9,.999426,.0014071,0,.00249668,.999173,.00151895,0,.00486392,.99873,.00166102,0,.00806323,.996243,.0017023,0,.0120895,.993779,.00172782,0,.0169288,.9919,.0018108,0,.0225633,.990524,.00196028,0,.028974,.98868,.00212014,0,.036142,.984663,.00217598,0,.044049,.981457,.00230563,0,.0526781,.977608,.00243966,0,.0620137,.972215,.00251336,0,.0720418,.966798,.0026285,0,.0827499,.960241,.00271409,0,.0941271,.952489,.00278381,0,.106164,.944127,.00285399,0,.118852,.934282,.00290994,0,.132185,.923271,.00294558,0,.146157,.910803,.00296269,0,.160766,.896705,.00296803,0,.176007,.88238,.00296637,0,.19188,.867116,.00293163,0,.208385,.853636,.00289418,0,.225523,.840469,.00284663,0,.243296,.82639,.00278594,0,.261709,.811759,.00271618,0,.280767,.796113,.00263187,0,.300476,.779518,.00254589,0,.320845,.763142,.00246003,0,.341883,.745464,.00236529,0,.363601,.727491,.00226536,0,.386011,.709414,.00216375,0,.409128,.691396,.00207127,0,.432967,.67368,.00197106,0,.457545,.656049,.00187022,0,.482881,.638188,.00177605,0,.508992,.620177,.00168482,0,.535899,.601506,.00158909,0,.563619,.58362,.00150583,0,.592165,.565496,.00141791,0,.621544,.54789,.00133693,0,.651743,.530323,.00126038,0,.682709,.512795,.00118556,0,.714286,.495199,.00111527,0,.746032,.478101,.0010489,0,.777778,.461511,984264e-9,0,.809524,.444879,92591e-8,0,.84127,.428424,866582e-9,0,.873016,.412495,814463e-9,0,.904762,.396975,764498e-9,0,.936508,.381614,715967e-9,0,.968254,.366732,672483e-9,0,1,1,.00155501,0,0,1,.00155503,0,0,1,.00155524,0,0,.999998,.00155615,0,0,.999994,.0015586,0,0,.999983,.00156379,0,0,.999963,.0015733,0,0,.999932,.00158911,0,0,.999882,.00161376,0,0,.99981,.00165041,0,100875e-10,.999708,.00170304,0,367658e-9,.999565,.00177658,0,.0014234,.999368,.00187688,0,.00327939,.999081,.00200989,0,.00596629,.99852,.00217177,0,.0094852,.99549,.0021745,0,.013824,.993252,.00222357,0,.0189642,.991727,.00235022,0,.0248856,.989951,.00250561,0,.0315669,.988029,.00268829,0,.0389882,.984029,.0027496,0,.0471302,.980683,.00289793,0,.0559754,.976554,.00303315,0,.0655081,.97139,.00313257,0,.0757138,.965544,.00323656,0,.08658,.95912,.00333432,0,.0980954,.951183,.0034039,0,.110251,.942974,.00347515,0,.123038,.932642,.00350381,0,.13645,.922158,.00354519,0,.150482,.909404,.00353851,0,.165129,.896071,.0035435,0,.18039,.881206,.00349936,0,.196263,.866077,.00347256,0,.212748,.85093,.003415,0,.229847,.837703,.00333367,0,.247561,.823878,.003249,0,.265895,.809449,.00316347,0,.284854,.794379,.00306351,0,.304445,.778138,.0029499,0,.324675,.761997,.00284099,0,.345555,.744938,.00272104,0,.367095,.727212,.00260715,0,.389309,.709549,.00248855,0,.41221,.691704,.00236783,0,.435814,.673689,.00225178,0,.460138,.656453,.00213765,0,.485203,.639128,.00202178,0,.511028,.621512,.00191443,0,.537634,.603598,.00180977,0,.565041,.58559,.00170456,0,.593268,.567852,.00160927,0,.622327,.5503,.00151395,0,.652217,.533033,.00142499,0,.682907,.515942,.00133955,0,.714296,.498814,.0012602,0,.746032,.481595,.00118188,0,.777778,.465117,.00111171,0,.809524,.448865,.00104091,0,.84127,.432711,976618e-9,0,.873016,.416822,91859e-8,0,.904762,.401272,857704e-9,0,.936508,.386226,807172e-9,0,.968254,.371321,75464e-8,0,1,1,.00209596,0,0,1,.00209598,0,0,1,.00209624,0,0,.999997,.00209736,0,0,.999991,.00210039,0,0,.999979,.00210678,0,0,.999959,.00211847,0,0,.999925,.0021379,0,0,.99987,.00216809,0,0,.999791,.00221281,0,681487e-10,.999677,.00227669,0,658161e-9,.999521,.00236533,0,.00200635,.999301,.00248514,0,.0041779,.998977,.00264185,0,.00718648,.998191,.00281695,0,.0110239,.994801,.00278518,0,.015672,.993091,.00288774,0,.0211091,.991571,.00303931,0,.0273123,.9897,.00321643,0,.034259,.987023,.00337332,0,.0419282,.983289,.00346146,0,.0502998,.979892,.00363704,0,.0593562,.975111,.00373601,0,.069081,.970351,.0038842,0,.0794598,.964131,.00397053,0,.0904798,.957747,.00408078,0,.10213,.949536,.00413533,0,.1144,.941372,.00420305,0,.127284,.931049,.00422815,0,.140772,.920647,.00425048,0,.154862,.908033,.0042281,0,.169548,.895028,.00422026,0,.184828,.879968,.00415042,0,.200701,.864875,.00408821,0,.217167,.84918,.00400909,0,.234227,.834934,.00391178,0,.251884,.821397,.00380066,0,.270141,.807135,.00367974,0,.289004,.792363,.00355172,0,.308479,.776661,.003411,0,.328575,.760705,.00328123,0,.349301,.744408,.00314003,0,.370668,.726994,.0029906,0,.392689,.709598,.00285034,0,.415379,.692112,.00271179,0,.438754,.674435,.00257185,0,.46283,.65676,.00243425,0,.48763,.639982,.00230351,0,.513173,.622983,.0021777,0,.539482,.605471,.00204991,0,.566579,.58796,.00193759,0,.594488,.570463,.00181976,0,.623226,.553058,.00171497,0,.6528,.535894,.00161109,0,.683198,.519089,.00151394,0,.714354,.502454,.00142122,0,.746032,.485681,.00133488,0,.777778,.468935,.00124975,0,.809524,.452951,.00117309,0,.84127,.437139,.00110155,0,.873016,.421446,.00103124,0,.904762,.405951,966387e-9,0,.936508,.391003,908119e-9,0,.968254,.376198,848057e-9,0,1,1,.00280076,0,0,1,.00280078,0,0,.999999,.00280109,0,0,.999997,.00280246,0,0,.999992,.00280616,0,0,.999979,.00281396,0,0,.999956,.00282822,0,0,.999916,.00285186,0,0,.999857,.0028885,0,0,.999768,.00294259,0,196026e-9,.999645,.00301946,0,.00104842,.99947,.00312541,0,.00270199,.999229,.00326733,0,.00519449,.998852,.00344992,0,.00852602,.997558,.00361052,0,.0126804,.994417,.0035898,0,.017635,.992824,.00372393,0,.023365,.991344,.00390695,0,.0298456,.989337,.00410392,0,.0370529,.985811,.00420987,0,.0449651,.982772,.00437488,0,.0535615,.979001,.00455069,0,.0628243,.974102,.00464462,0,.0727368,.969197,.00480577,0,.0832844,.962759,.00487818,0,.0944545,.956207,.00498176,0,.106236,.947909,.00503392,0,.118619,.939596,.00507474,0,.131595,.929642,.00509798,0,.145159,.918807,.00508476,0,.159305,.906921,.00505634,0,.174028,.893312,.00498845,0,.189327,.878933,.0049133,0,.2052,.863986,.0048259,0,.221647,.847936,.00470848,0,.23867,.832253,.00456889,0,.25627,.818619,.00442726,0,.274453,.804788,.00427677,0,.293222,.790241,.00411906,0,.312585,.775162,.00394833,0,.33255,.759463,.00377366,0,.353126,.743598,.00361026,0,.374324,.72697,.00343627,0,.396158,.709646,.00326422,0,.418641,.69277,.00309717,0,.44179,.675371,.0029356,0,.465624,.657863,.00277712,0,.490163,.640772,.00261738,0,.515429,.624441,.0024737,0,.541445,.607497,.00233125,0,.568236,.590438,.00218994,0,.595828,.573224,.0020664,0,.624242,.556168,.00193526,0,.653496,.539232,.00182463,0,.683588,.522352,.00170735,0,.714482,.506172,.00160555,0,.746032,.489842,.00150451,0,.777778,.473463,.00140938,0,.809524,.457266,.00132568,0,.84127,.441609,.0012376,0,.873016,.426348,.00116265,0,.904762,.411002,.00108935,0,.936508,.396045,.00101946,0,.968254,.381448,955665e-9,0,1,1,.0037121,0,0,1,.00371213,0,0,1,.00371251,0,0,.999997,.00371417,0,0,.99999,.00371863,0,0,.999977,.00372807,0,0,.99995,.00374529,0,0,.999908,.0037738,0,0,.999843,.00381789,0,123596e-10,.999745,.00388273,0,407442e-9,.999608,.00397443,0,.0015447,.999415,.00409998,0,.00351385,.999143,.00426662,0,.0063316,.9987,.00447625,0,.00998679,.996363,.00455323,0,.0144569,.994021,.00461052,0,.0197151,.992372,.00476359,0,.0257344,.991007,.00499101,0,.0324882,.988767,.0051972,0,.0399517,.984872,.00528407,0,.0481022,.982004,.00548926,0,.0569191,.977714,.00564385,0,.0663839,.973076,.0057693,0,.0764801,.967565,.0058924,0,.0871928,.961384,.00599629,0,.0985095,.954435,.00605998,0,.110419,.946303,.0061133,0,.122912,.937662,.00612028,0,.13598,.927867,.00612209,0,.149617,.916475,.00604813,0,.163817,.90541,.00603088,0,.178577,.891591,.00592218,0,.193894,.877573,.00578854,0,.209767,.862511,.00566648,0,.226196,.846861,.00551481,0,.243182,.83068,.00533754,0,.260728,.815725,.00515487,0,.278837,.802321,.0049655,0,.297515,.787826,.00475421,0,.316768,.773454,.00456002,0,.336605,.758224,.00434727,0,.357034,.74265,.00414444,0,.378067,.726729,.00393738,0,.399717,.710155,.00373575,0,.421998,.693312,.00353736,0,.444928,.67653,.00334368,0,.468523,.659444,.00315981,0,.492806,.642051,.00297809,0,.517798,.625758,.00280592,0,.543525,.609615,.00264254,0,.570012,.592919,.00248459,0,.597288,.576298,.00233327,0,.625379,.559489,.00219519,0,.654307,.542891,.00205441,0,.684084,.526255,.00193385,0,.714693,.509853,.00180745,0,.746044,.494131,.00169817,0,.777778,.478114,.0015913,0,.809524,.462274,.00148981,0,.84127,.446412,.00139537,0,.873016,.431274,.00130984,0,.904762,.41635,.00122403,0,.936508,.401476,.00114809,0,.968254,.386993,.00107563,0,1,1,.00488216,0,0,1,.0048822,0,0,1,.00488265,0,0,.999997,.00488463,0,0,.999988,.00488999,0,0,.999974,.00490129,0,0,.999946,.00492191,0,0,.999897,.00495598,0,0,.999825,.00500855,0,744791e-10,.999718,.00508559,0,712744e-9,.999565,.005194,0,.00215249,.999352,.00534147,0,.00444576,.999046,.00553523,0,.00759218,.998492,.00577016,0,.0115714,.995564,.00578487,0,.0163557,.993339,.00586414,0,.021915,.991834,.00606002,0,.0282201,.990496,.00633312,0,.0352433,.987826,.00651941,0,.042959,.98383,.00660842,0,.0513439,.98109,.00685523,0,.0603772,.976131,.00695778,0,.0700402,.971922,.00714236,0,.0803163,.965901,.00721437,0,.0911908,.959606,.00732017,0,.102651,.952504,.00735788,0,.114686,.944365,.00738493,0,.127286,.935652,.00737969,0,.140443,.925813,.00733612,0,.154151,.914397,.00723094,0,.168405,.903257,.00714002,0,.183201,.890015,.00700149,0,.198536,.876014,.00682813,0,.214409,.861436,.00665567,0,.23082,.845752,.00644526,0,.24777,.829169,.00621635,0,.265263,.813435,.00597789,0,.283301,.799701,.00575694,0,.301889,.785726,.00549866,0,.321035,.77152,.0052503,0,.340746,.75683,.00499619,0,.361032,.741951,.0047543,0,.381904,.726367,.0045084,0,.403374,.710537,.00426784,0,.425457,.693965,.00403487,0,.448169,.677724,.0038075,0,.47153,.66117,.00359431,0,.495561,.644274,.00338354,0,.520284,.627449,.00318163,0,.545725,.611645,.00299672,0,.571911,.595614,.00281016,0,.598873,.579426,.00264252,0,.62664,.563016,.00247509,0,.655239,.546728,.00232647,0,.684692,.530539,.00217803,0,.714999,.514164,.00204216,0,.746106,.498344,.00191403,0,.777778,.482957,.00179203,0,.809524,.467336,.00167695,0,.84127,.451994,.00157567,0,.873016,.436514,.00147113,0,.904762,.42178,.00138034,0,.936508,.407271,.00129219,0,.968254,.392822,.0012098,0,1,1,.00637427,0,0,1,.00637431,0,0,.999999,.00637485,0,0,.999996,.00637721,0,0,.999987,.00638357,0,0,.999971,.006397,0,0,.999939,.00642142,0,0,.999888,.00646177,0,0,.999807,.00652387,0,207916e-9,.999689,.00661454,0,.00112051,.99952,.00674155,0,.00287719,.999283,.00691313,0,.00550145,.998936,.00713598,0,.00897928,.998165,.00738501,0,.0132829,.994847,.00734388,0,.01838,.993182,.00749991,0,.0242381,.991665,.0077246,0,.030826,.989708,.00797579,0,.0381152,.986663,.00813011,0,.0460794,.983288,.00830365,0,.0546951,.980104,.00853496,0,.0639411,.974855,.00861045,0,.0737988,.97045,.00879133,0,.0842516,.964509,.00886377,0,.0952848,.957594,.00890346,0,.106886,.950546,.00893289,0,.119044,.942225,.00890074,0,.131749,.933365,.00886826,0,.144994,.923202,.0087316,0,.158772,.912605,.00863082,0,.173078,.901099,.00847403,0,.187908,.888177,.00825838,0,.203261,.873955,.00801834,0,.219134,.860091,.00779026,0,.235527,.84434,.00752478,0,.252443,.828517,.00724074,0,.269883,.81239,.00693769,0,.287851,.79721,.00664817,0,.306352,.783489,.00634763,0,.325393,.769514,.00604221,0,.344981,.755419,.00573568,0,.365126,.741083,.00544359,0,.385839,.726059,.00515515,0,.407132,.710809,.00487139,0,.42902,.695052,.00459846,0,.45152,.678886,.00433412,0,.474651,.663042,.00407981,0,.498433,.646634,.00384264,0,.52289,.630117,.00360897,0,.548048,.613804,.00338863,0,.573936,.598338,.00318486,0,.600584,.582687,.00298377,0,.628027,.566809,.00280082,0,.656295,.550817,.00262255,0,.685417,.534937,.00245835,0,.715406,.519151,.00230574,0,.74624,.503118,.0021549,0,.777778,.487723,.00202008,0,.809524,.472725,.00189355,0,.84127,.457599,.00177108,0,.873016,.442558,.00165843,0,.904762,.427624,.00155494,0,.936508,.413171,.00145273,0,.968254,.399122,.00136454,0,1,1,.00826496,0,0,1,.00826499,0,0,1,.00826564,0,0,.999996,.00826842,0,0,.999987,.00827589,0,0,.999967,.00829167,0,0,.999933,.00832037,0,0,.999876,.00836768,0,109338e-10,.999786,.00844031,0,427145e-9,.999655,.00854603,0,.0016384,.999468,.00869337,0,.00372392,.999203,.008891,0,.00668513,.998803,.00914387,0,.0104968,.99748,.00935838,0,.015125,.994446,.00933309,0,.0205338,.99292,.00953084,0,.0266884,.991414,.0097893,0,.0335565,.989049,.0100228,0,.0411086,.98582,.0101664,0,.0493181,.982441,.0103582,0,.0581613,.978595,.0105292,0,.0676169,.973495,.0106274,0,.0776661,.968405,.0107261,0,.0882926,.962717,.0108234,0,.0994817,.955478,.0108102,0,.111221,.948275,.0107914,0,.123499,.940006,.0107161,0,.136308,.930831,.0106309,0,.149639,.920648,.0104083,0,.163485,.910205,.0102312,0,.177843,.898445,.0100051,0,.192707,.885986,.00971928,0,.208077,.872204,.00940747,0,.22395,.858436,.0091085,0,.240326,.843454,.00876595,0,.257208,.827437,.00839794,0,.274596,.811488,.00803692,0,.292496,.796039,.00767352,0,.310911,.781083,.0073097,0,.329849,.767642,.00694032,0,.349316,.753901,.00657476,0,.369323,.740131,.00622699,0,.38988,.725845,.0058838,0,.410999,.710991,.00555586,0,.432696,.696002,.00523089,0,.454987,.680461,.00492494,0,.47789,.664875,.00463464,0,.501426,.649273,.00435422,0,.52562,.63302,.0040875,0,.550498,.61705,.00384075,0,.576089,.601154,.00359557,0,.602427,.586008,.00337636,0,.629544,.570699,.00316019,0,.657479,.555166,.00296033,0,.686264,.539645,.00277552,0,.715924,.524159,.00259499,0,.746459,.508682,.00243257,0,.777789,.493163,.00227851,0,.809524,.478004,.00213083,0,.84127,.46347,.00199502,0,.873016,.448778,.00186967,0,.904762,.434105,.00174732,0,.936508,.419576,.00163861,0,.968254,.405541,.00153341,0,1,1,.0106462,0,0,1,.0106462,0,0,.999999,.010647,0,0,.999995,.0106502,0,0,.999985,.0106589,0,0,.999964,.0106773,0,0,.999925,.0107106,0,0,.999861,.0107655,0,712986e-10,.999763,.0108497,0,743959e-9,.999616,.0109716,0,.00227361,.999408,.0111408,0,.0046983,.999112,.0113659,0,.00800158,.998637,.0116475,0,.0121493,.996223,.0117231,0,.0171023,.994006,.0118064,0,.0228218,.992444,.0120254,0,.0292711,.991028,.0123314,0,.036417,.98803,.0124954,0,.0442295,.984816,.0126538,0,.0526815,.981399,.0128537,0,.0617492,.977085,.0129694,0,.0714114,.972154,.013091,0,.0816495,.966617,.0131166,0,.0924472,.960628,.0131583,0,.10379,.953295,.0131094,0,.115665,.94575,.0129966,0,.128062,.937654,.0128796,0,.140972,.927716,.0126477,0,.154387,.917932,.0123889,0,.168301,.907719,.012131,0,.182709,.89584,.0118013,0,.197608,.883526,.0114145,0,.212994,.870301,.0110075,0,.228867,.856272,.0106019,0,.245227,.842251,.0101938,0,.262074,.826466,.00973254,0,.279412,.810859,.0092846,0,.297244,.795051,.00883304,0,.315575,.780053,.00840272,0,.334412,.76575,.00796438,0,.35376,.752298,.00752526,0,.373631,.739153,.00711486,0,.394034,.725514,.00670361,0,.414983,.711473,.00632656,0,.436491,.696936,.00595206,0,.458575,.682126,.00559191,0,.481253,.667027,.00525362,0,.504547,.651875,.00493805,0,.528481,.636463,.00462848,0,.553081,.620641,.00433936,0,.578377,.604931,.00407,0,.604404,.589549,.00380864,0,.631197,.574712,.00357049,0,.658795,.559775,.00334466,0,.687238,.544514,.00312505,0,.716559,.529555,.00293199,0,.746776,.514402,.00274204,0,.777849,.499302,.00256647,0,.809524,.484114,.00239901,0,.84127,.469308,.00225148,0,.873016,.455133,.00210178,0,.904762,.440939,.0019727,0,.936508,.426627,.00184382,0,.968254,.412509,.00172548,0,1,1,.013628,0,0,1,.0136281,0,0,.999999,.0136289,0,0,.999995,.0136327,0,0,.999983,.0136427,0,0,.99996,.0136638,0,0,.999917,.0137022,0,0,.999846,.0137652,0,204597e-9,.999736,.0138615,0,.00116837,.999573,.0140007,0,.00303325,.99934,.0141927,0,.00580613,.999004,.0144457,0,.00945626,.998407,.0147489,0,.0139421,.995464,.014731,0,.0192202,.993328,.0148283,0,.0252495,.991799,.0150797,0,.0319921,.990397,.0154316,0,.0394138,.986835,.0155005,0,.0474843,.983938,.0157308,0,.0561763,.980154,.0158753,0,.0654661,.975659,.0159581,0,.0753326,.970171,.0159832,0,.0857571,.964803,.0160084,0,.0967236,.958366,.0159484,0,.108218,.950613,.0158001,0,.120227,.942874,.0155845,0,.132741,.935005,.0154292,0,.145751,.924991,.0150742,0,.159249,.914814,.0146757,0,.17323,.904743,.0143097,0,.187687,.893216,.0138695,0,.202619,.880769,.0133706,0,.218021,.868136,.0128606,0,.233894,.85469,.0123403,0,.250238,.840593,.0118091,0,.267052,.825808,.011253,0,.284341,.81009,.0107099,0,.302106,.79504,.0101636,0,.320354,.779757,.00964041,0,.33909,.764697,.00911896,0,.358322,.750913,.00859533,0,.378059,.738175,.00811592,0,.398311,.725242,.00764504,0,.41909,.711864,.00718885,0,.440412,.698009,.00675843,0,.462292,.683841,.00634984,0,.484748,.669391,.00595502,0,.507802,.654731,.00558671,0,.531477,.639805,.00523578,0,.555802,.624789,.00490834,0,.580805,.609325,.00459448,0,.606522,.593975,.00430342,0,.63299,.578983,.00403019,0,.66025,.564442,.0037707,0,.688346,.549835,.0035316,0,.717319,.535039,.00330255,0,.7472,.520403,.00308932,0,.777982,.505687,.00289335,0,.809524,.490939,.00270818,0,.84127,.476233,.0025343,0,.873016,.461624,.00237097,0,.904762,.447833,.00222065,0,.936508,.433992,.00207561,0,.968254,.420147,.00194955,0,1,1,.0173415,0,0,1,.0173416,0,0,.999999,.0173426,0,0,.999995,.0173468,0,0,.999983,.0173582,0,0,.999954,.0173822,0,0,.999908,.0174258,0,669501e-11,.999828,.0174973,0,427399e-9,.999705,.0176063,0,.00171019,.999524,.0177631,0,.0039248,.999263,.0179781,0,.00705382,.998878,.018258,0,.0110552,.998012,.0185551,0,.0158812,.994614,.0184264,0,.0214852,.993132,.0186385,0,.0278239,.991563,.0189067,0,.0348585,.989298,.0191577,0,.0425544,.986036,.0192522,0,.050881,.982558,.0194063,0,.059811,.978531,.019486,0,.0693209,.974198,.0195847,0,.0793895,.968148,.0194749,0,.0899984,.962565,.0194277,0,.101132,.956041,.0192991,0,.112775,.947749,.0189893,0,.124917,.94018,.018704,0,.137547,.93165,.0183458,0,.150655,.921798,.0178775,0,.164236,.911573,.0173618,0,.178281,.901569,.0168482,0,.192788,.890341,.016265,0,.207752,.877835,.0156199,0,.223171,.865472,.0149516,0,.239044,.852905,.0143274,0,.255371,.838906,.0136643,0,.272153,.824888,.0129903,0,.289393,.809977,.0123218,0,.307093,.794697,.0116572,0,.325259,.780028,.0110307,0,.343896,.765124,.0104236,0,.363012,.750411,.0098219,0,.382617,.737264,.00924397,0,.402719,.724799,.00868719,0,.423332,.712253,.00816476,0,.444469,.699267,.00767262,0,.466146,.685618,.00719746,0,.488383,.671736,.00673916,0,.511199,.657777,.00631937,0,.534618,.643497,.00592411,0,.558668,.62889,.00553928,0,.58338,.614299,.0051934,0,.608787,.599197,.00485985,0,.634929,.584175,.00454357,0,.661849,.569541,.00425787,0,.689594,.555193,.00397905,0,.718211,.540947,.00372364,0,.747742,.526593,.00348599,0,.778205,.512335,.00326103,0,.80953,.498017,.00305137,0,.84127,.483609,.00285485,0,.873016,.469368,.00267472,0,.904762,.455037,.00249945,0,.936508,.441493,.00234792,0,.968254,.428147,.00219936,0,1,1,.0219422,0,0,1,.0219423,0,0,.999998,.0219434,0,0,.999993,.0219481,0,0,.999981,.021961,0,0,.999949,.0219879,0,0,.999896,.0220367,0,593194e-10,.999808,.0221167,0,75364e-8,.99967,.0222383,0,.00237884,.999466,.0224125,0,.00495612,.999174,.0226495,0,.00844887,.998725,.0229525,0,.0128058,.996979,.0231123,0,.0179742,.994317,.0230742,0,.0239047,.992781,.0232895,0,.0305526,.991191,.0235734,0,.0378786,.987787,.0236152,0,.0458475,.985092,.0237994,0,.0544287,.981121,.0238553,0,.0635952,.976924,.0238706,0,.0733233,.97218,.0238704,0,.0835922,.965956,.0236598,0,.0943839,.959998,.0234735,0,.105682,.953245,.0232277,0,.117474,.944445,.0226973,0,.129747,.937087,.0223527,0,.142491,.928341,.0218144,0,.155697,.9184,.0211516,0,.169358,.907959,.0204553,0,.183469,.89808,.0197673,0,.198024,.887047,.0189915,0,.21302,.875221,.0182082,0,.228455,.86269,.0173584,0,.244329,.850735,.0165718,0,.260639,.837545,.0157524,0,.277389,.823639,.0149482,0,.29458,.809699,.0141431,0,.312216,.794797,.0133527,0,.3303,.780578,.0126193,0,.34884,.766019,.0118914,0,.367842,.751447,.0111839,0,.387315,.737275,.010514,0,.40727,.724545,.00987277,0,.427717,.712644,.00926569,0,.448671,.700432,.00869029,0,.470149,.687664,.00814691,0,.492167,.674288,.00763012,0,.514746,.660966,.00714437,0,.537911,.647264,.00668457,0,.561688,.633431,.00626581,0,.586108,.619133,.00585593,0,.611206,.604935,.00548188,0,.637022,.590236,.00513288,0,.663599,.575473,.0047906,0,.690989,.561228,.00448895,0,.719242,.547054,.00420233,0,.748411,.533175,.00392869,0,.778531,.519163,.00367445,0,.809583,.505328,.00344097,0,.84127,.491446,.00322003,0,.873016,.477356,.00301283,0,.904762,.46356,.00282592,0,.936508,.449623,.00264956,0,.968254,.436068,.00246956,0,1,1,.0276135,0,0,1,.0276136,0,0,.999998,.0276148,0,0,.999993,.0276201,0,0,.999976,.0276342,0,0,.999945,.027664,0,0,.999884,.0277179,0,18679e-8,.999784,.027806,0,.00119607,.99963,.0279394,0,.00318407,.999401,.0281295,0,.00613601,.999066,.0283858,0,.00999963,.998524,.0287027,0,.0147164,.995702,.0286256,0,.0202295,.993593,.0286733,0,.0264876,.992067,.0288989,0,.0334452,.990548,.0292135,0,.0410621,.986775,.0291296,0,.0493032,.984054,.0293099,0,.0581381,.979481,.0291881,0,.0675397,.975297,.0291598,0,.0774848,.96981,.028954,0,.0879528,.963524,.028628,0,.0989258,.957398,.0283135,0,.110388,.950088,.0278469,0,.122327,.941538,.0271798,0,.134729,.933332,.0265388,0,.147587,.924392,.0257776,0,.160889,.914581,.024916,0,.174631,.904347,.0240242,0,.188806,.894324,.0231229,0,.203409,.883724,.022153,0,.218437,.872207,.0211355,0,.233888,.859927,.0201048,0,.249761,.848373,.0191263,0,.266056,.836023,.0181306,0,.282774,.82289,.0171718,0,.299917,.809324,.0162196,0,.317488,.795361,.0152622,0,.335493,.781253,.01439,0,.353936,.767338,.013533,0,.372825,.753156,.0127244,0,.392168,.739122,.0119454,0,.411976,.725358,.0112054,0,.432259,.712949,.010487,0,.453032,.701621,.00984032,0,.47431,.689703,.00921495,0,.496111,.677216,.00862492,0,.518456,.664217,.00806882,0,.541367,.65137,.00755922,0,.564872,.638,.00705705,0,.589001,.62453,.00661266,0,.613789,.610601,.00618432,0,.639277,.59676,.00578033,0,.66551,.582433,.00540927,0,.692539,.568026,.00506104,0,.720422,.55414,.0047353,0,.749216,.540178,.00442889,0,.778974,.526513,.00414363,0,.809711,.512954,.00388237,0,.84127,.499403,.00362875,0,.873016,.486026,.00340827,0,.904762,.472345,.00318598,0,.936508,.458828,.00297635,0,.968254,.445379,.00279447,0,1,1,.0345716,0,0,1,.0345717,0,0,.999999,.034573,0,0,.999991,.0345787,0,0,.999974,.0345941,0,0,.999937,.0346263,0,188589e-11,.999869,.0346847,0,409238e-9,.999757,.0347798,0,.0017674,.999582,.0349233,0,.00413658,.999322,.0351265,0,.00747408,.998939,.0353967,0,.0117157,.998219,.0357018,0,.0167966,.994974,.0354726,0,.0226572,.993201,.0355621,0,.0292445,.991573,.0357641,0,.0365123,.989301,.0359252,0,.0444203,.985712,.0358017,0,.0529334,.982411,.0358353,0,.0620214,.977827,.035617,0,.0716574,.973278,.0354398,0,.0818186,.967397,.0350483,0,.0924846,.960696,.0344795,0,.103638,.954349,.0339861,0,.115263,.946066,.0331323,0,.127348,.938012,.032359,0,.13988,.929413,.0314413,0,.152849,.920355,.0304103,0,.166248,.910586,.0292785,0,.18007,.900609,.0281391,0,.194308,.890093,.0269103,0,.208958,.880013,.0257269,0,.224018,.869001,.0244671,0,.239485,.85751,.0232252,0,.255359,.84582,.0220117,0,.271638,.834383,.0208274,0,.288324,.822158,.0196628,0,.305419,.809056,.0185306,0,.322927,.795832,.0174174,0,.340851,.782547,.0163758,0,.359199,.7689,.015391,0,.377975,.755526,.0144488,0,.397189,.741681,.0135372,0,.416851,.728178,.0126957,0,.436971,.714642,.0118812,0,.457564,.702756,.0111165,0,.478644,.69175,.0104145,0,.500229,.680159,.00974439,0,.522339,.668073,.00911926,0,.544997,.655405,.00851393,0,.56823,.642921,.00797637,0,.592068,.629993,.00745119,0,.616546,.616828,.00696972,0,.641705,.603305,.00652425,0,.66759,.589833,.00610188,0,.694255,.575945,.00570834,0,.72176,.561745,.00533384,0,.750168,.548277,.00500001,0,.779545,.534467,.00467582,0,.809933,.521032,.00438092,0,.841272,.507877,.00410348,0,.873016,.494654,.00383618,0,.904762,.481592,.00358699,0,.936508,.468509,.00337281,0,.968254,.455293,.00316196,0,1,1,.0430698,0,0,1,.0430699,0,0,.999998,.0430713,0,0,.999991,.0430773,0,0,.99997,.0430936,0,0,.999928,.0431277,0,406396e-10,.999852,.0431893,0,744376e-9,.999724,.0432895,0,.0024806,.999527,.0434397,0,.00524779,.99923,.0436507,0,.00898164,.998783,.0439255,0,.0136083,.997507,.0441104,0,.0190582,.994418,.0438225,0,.0252694,.992864,.0439396,0,.0321879,.991127,.0440962,0,.039767,.987331,.0438408,0,.0479667,.984819,.0438991,0,.056752,.980384,.0435906,0,.0660929,.975846,.0432543,0,.075963,.970748,.0428293,0,.0863398,.964303,.042153,0,.0972035,.95772,.0414111,0,.108537,.950747,.0405893,0,.120325,.942533,.0394887,0,.132554,.934045,.0383544,0,.145215,.924942,.037057,0,.158296,.915811,.0356993,0,.17179,.90612,.0342401,0,.185691,.896434,.0328078,0,.199993,.886021,.031288,0,.214691,.876081,.0297776,0,.229782,.865608,.0282334,0,.245265,.854924,.026749,0,.261138,.843607,.02526,0,.277401,.832456,.0238214,0,.294056,.821342,.0224682,0,.311104,.809303,.0211297,0,.328548,.796468,.0198387,0,.346394,.784046,.0186227,0,.364645,.771262,.0174561,0,.38331,.758118,.0163806,0,.402396,.745075,.0153287,0,.421912,.731926,.0143647,0,.44187,.71863,.0134363,0,.462283,.705414,.0125603,0,.483165,.693792,.0117508,0,.504535,.683108,.0110016,0,.52641,.67183,.0102757,0,.548816,.66015,.00962044,0,.571776,.647907,.00898031,0,.595323,.635734,.00840811,0,.619489,.623208,.00786211,0,.644317,.610438,.00734953,0,.669852,.597345,.00687688,0,.696148,.584138,.00643469,0,.723267,.5707,.00602236,0,.75128,.556966,.0056324,0,.780258,.543607,.00528277,0,.810268,.530213,.00493999,0,.841311,.516912,.00462265,0,.873016,.503916,.0043307,0,.904762,.491146,.00406858,0,.936508,.478439,.00381436,0,.968254,.465834,.00358003,0,1,1,.0534039,0,0,1,.053404,0,0,.999998,.0534055,0,0,.999989,.0534116,0,0,.999968,.0534283,0,0,.999918,.0534633,0,155895e-9,.99983,.0535262,0,.00120914,.999685,.0536281,0,.00334944,.999461,.0537799,0,.00653077,.999119,.0539902,0,.0106718,.998582,.0542524,0,.0156907,.995919,.0540318,0,.0215147,.993735,.0538914,0,.0280801,.992126,.0539557,0,.0353323,.990266,.0540401,0,.0432247,.986317,.0536064,0,.0517172,.983213,.0534425,0,.0607754,.978303,.0528622,0,.0703698,.973665,.0523363,0,.0804742,.968091,.0516165,0,.0910667,.961026,.0505434,0,.102128,.954333,.049523,0,.113641,.946372,.0481698,0,.125591,.938254,.0467674,0,.137965,.929516,.0452341,0,.150754,.920106,.0435083,0,.163947,.910899,.0417399,0,.177537,.901532,.0399389,0,.191516,.891919,.0380901,0,.205881,.882006,.0362341,0,.220626,.871965,.0343444,0,.235749,.862145,.0324832,0,.251248,.852058,.0306681,0,.267121,.84161,.0289097,0,.283368,.830806,.0272079,0,.299992,.820476,.0256089,0,.316992,.809514,.0240394,0,.334374,.797865,.0225379,0,.35214,.785621,.0211235,0,.370296,.773765,.0197908,0,.388849,.761629,.0185235,0,.407807,.748891,.0173358,0,.427178,.736437,.0162305,0,.446974,.723707,.0151778,0,.467207,.710606,.0141791,0,.487892,.698019,.0132592,0,.509046,.686203,.0123887,0,.530687,.675692,.0115976,0,.552839,.664826,.0108325,0,.575527,.65349,.0101348,0,.59878,.641774,.00947756,0,.622634,.629794,.00886058,0,.647128,.617647,.00828526,0,.672308,.60534,.00775312,0,.698231,.592718,.00726033,0,.724958,.579746,.00679731,0,.752563,.566763,.00636111,0,.781127,.553515,.00595228,0,.810733,.540118,.00556876,0,.841426,.527325,.00523051,0,.873016,.514265,.00490712,0,.904762,.501406,.00460297,0,.936508,.488922,.00431247,0,.968254,.476541,.0040472,0,1,1,.0659184,0,0,1,.0659185,0,0,.999998,.06592,0,0,.999988,.0659259,0,0,.999963,.0659423,0,0,.999907,.0659764,0,374198e-9,.999806,.0660376,0,.00182071,.999639,.0661361,0,.0043894,.999378,.0662814,0,.00800055,.998985,.0664779,0,.0125594,.998285,.0666914,0,.0179786,.995071,.0661989,0,.0241822,.993172,.0660454,0,.031106,.991438,.0660105,0,.0386952,.988428,.0656875,0,.0469032,.985218,.0652913,0,.0556905,.981128,.0647107,0,.065023,.976015,.0638491,0,.0748717,.97097,.062993,0,.0852112,.964582,.0617927,0,.0960199,.957383,.0603626,0,.107279,.949969,.0588128,0,.118971,.941843,.0570274,0,.131084,.933624,.0551885,0,.143604,.924543,.053122,0,.156521,.914919,.0508897,0,.169825,.905773,.0486418,0,.18351,.896434,.0463364,0,.197569,.887195,.0440623,0,.211997,.877706,.0417799,0,.226789,.867719,.03945,0,.241944,.858587,.037243,0,.257458,.849317,.0350956,0,.273331,.839585,.0329852,0,.289563,.829856,.0310028,0,.306154,.819589,.0290953,0,.323108,.809714,.0272738,0,.340426,.79934,.0255631,0,.358113,.788224,.0239175,0,.376175,.776619,.0223831,0,.394616,.76521,.0209298,0,.413445,.753716,.0195786,0,.432671,.741564,.0183001,0,.452305,.729413,.0171259,0,.472358,.717146,.0159933,0,.492845,.70436,.0149495,0,.513783,.69219,.0139681,0,.535189,.680289,.0130577,0,.557087,.669611,.0122198,0,.5795,.659113,.0114174,0,.602459,.648148,.0106729,0,.625997,.636905,.00998997,0,.650154,.625154,.00934313,0,.674976,.613481,.00874839,0,.700518,.60154,.00818265,0,.726845,.58943,.00766889,0,.754032,.576828,.00717153,0,.782167,.564194,.00672696,0,.811344,.551501,.00630863,0,.841644,.538635,.00592177,0,.873016,.525724,.00554888,0,.904762,.513209,.00520225,0,.936508,.500457,.00488231,0,.968254,.48799,.00457153,0,1,1,.0810131,0,0,1,.0810133,0,0,.999997,.0810145,0,0,.999985,.08102,0,0,.999956,.0810347,0,195026e-10,.999893,.0810656,0,719316e-9,.999777,.0811205,0,.00259774,.999583,.081208,0,.00561807,.999281,.0813343,0,.00967472,.998813,.0814969,0,.0146627,.997597,.0815217,0,.0204902,.994379,.0808502,0,.0270802,.992744,.0806792,0,.0343674,.990745,.0804589,0,.0422974,.986646,.0796107,0,.0508242,.983611,.0790913,0,.0599087,.978869,.0780746,0,.0695175,.973475,.0768218,0,.0796223,.967845,.0754926,0,.0901983,.960778,.0737063,0,.101224,.953333,.0718052,0,.112682,.945274,.0695946,0,.124555,.936955,.0672492,0,.136831,.928319,.0647732,0,.149496,.919075,.0620947,0,.162542,.909114,.0591816,0,.175958,.900137,.0563917,0,.189739,.891069,.0535392,0,.203877,.882262,.0507642,0,.218368,.873232,.0479793,0,.233208,.864042,.045226,0,.248393,.855002,.0425413,0,.263923,.846569,.0400126,0,.279796,.837714,.0375269,0,.296012,.828918,.0352027,0,.312573,.819783,.0330011,0,.329479,.810129,.0308908,0,.346734,.800866,.0289112,0,.364342,.79093,.0270255,0,.382307,.780593,.0252758,0,.400637,.769511,.0236178,0,.419337,.758558,.0220652,0,.438418,.747632,.0206289,0,.457889,.736146,.0192873,0,.477761,.724093,.0180333,0,.49805,.71234,.0168264,0,.51877,.700201,.015746,0,.53994,.687949,.0147027,0,.561581,.676163,.0137512,0,.583718,.665001,.0128655,0,.60638,.65472,.0120366,0,.629599,.644213,.0112604,0,.653415,.633382,.0105413,0,.677874,.62212,.00986498,0,.70303,.610631,.00923308,0,.728948,.599078,.00864206,0,.755706,.587519,.00811784,0,.783396,.575505,.00761237,0,.812121,.563148,.00713949,0,.841989,.550828,.00668379,0,.873035,.538458,.00627715,0,.904762,.525905,.00588336,0,.936508,.513517,.00552687,0,.968254,.501395,.00519681,0,1,1,.0991506,0,0,1,.0991504,0,0,.999996,.0991515,0,0,.999984,.0991558,0,0,.999947,.0991672,0,114389e-9,.999874,.0991912,0,.00121503,.999739,.0992331,0,.00356108,.999514,.0992983,0,.00705578,.999159,.0993877,0,.011574,.998586,.0994837,0,.017003,.995731,.0988425,0,.0232484,.993384,.098276,0,.0302318,.991615,.0979269,0,.0378884,.989029,.0973432,0,.0461641,.985373,.0963539,0,.0550136,.981278,.0952306,0,.0643988,.975777,.0936233,0,.0742868,.970526,.0920219,0,.0846501,.963755,.0898912,0,.0954644,.956676,.0876064,0,.106709,.948099,.0847751,0,.118367,.939718,.0818638,0,.130423,.931305,.078857,0,.142862,.922342,.0756127,0,.155674,.912842,.0721473,0,.168849,.903304,.0686195,0,.182378,.89411,.0650589,0,.196255,.885512,.0616022,0,.210473,.877193,.0582434,0,.225027,.86877,.0548979,0,.239915,.860267,.0516095,0,.255132,.851915,.048468,0,.270678,.843912,.0454447,0,.286551,.83604,.0425612,0,.302751,.828245,.0398752,0,.31928,.820159,.0373198,0,.336138,.81167,.034916,0,.35333,.802659,.0326402,0,.370858,.793921,.0304901,0,.388728,.784713,.0284857,0,.406944,.774946,.0266186,0,.425515,.76448,.0248593,0,.444449,.753793,.0232114,0,.463756,.743506,.0217039,0,.483447,.732555,.0202841,0,.503535,.720965,.0189648,0,.524036,.709422,.0177189,0,.544968,.697756,.0165626,0,.56635,.685565,.015483,0,.588208,.673987,.0144892,0,.610569,.66244,.0135607,0,.633466,.651675,.0126956,0,.656936,.641598,.0118788,0,.681025,.63121,.0111261,0,.705788,.620514,.010437,0,.731289,.609366,.00978747,0,.757606,.598137,.00917257,0,.784834,.586966,.00859778,0,.813085,.575549,.00806803,0,.842485,.563797,.00757294,0,.87313,.551758,.00710592,0,.904762,.539894,.0066841,0,.936508,.527901,.00627901,0,.968254,.515819,.00590506,0,1,1,.120864,0,0,1,.120864,0,0,.999996,.120864,0,0,.99998,.120867,0,0,.99994,.120872,0,323781e-9,.999852,.120884,0,.00188693,.999693,.120903,0,.00473489,.999426,.120929,0,.00872704,.999002,.120955,0,.0137237,.998235,.120918,0,.0196068,.994608,.119764,0,.0262803,.992997,.119265,0,.0336657,.990968,.11863,0,.0416987,.987002,.117261,0,.0503261,.983524,.116009,0,.0595035,.97875,.114252,0,.0691935,.972652,.11193,0,.0793645,.966613,.109555,0,.0899894,.959275,.106612,0,.101045,.951272,.103375,0,.112512,.942323,.0996594,0,.124372,.933679,.0958841,0,.136611,.924822,.0919265,0,.149216,.915742,.0878061,0,.162176,.906348,.0834894,0,.175482,.896883,.079085,0,.189125,.88774,.0746745,0,.203098,.87986,.0705773,0,.217396,.871998,.0665005,0,.232015,.864325,.0625413,0,.24695,.856685,.0586781,0,.2622,.84925,.0550063,0,.277761,.841719,.0514727,0,.293634,.834755,.0481398,0,.309819,.827853,.0450172,0,.326315,.820888,.0420969,0,.343126,.813616,.0393702,0,.360254,.805767,.0367771,0,.377701,.797338,.0343274,0,.395474,.789122,.0320529,0,.413577,.780601,.0299485,0,.432018,.771424,.0279812,0,.450804,.761502,.0261054,0,.469944,.751166,.0243942,0,.489451,.741276,.0228087,0,.509337,.730898,.0213265,0,.529617,.719878,.0199307,0,.550307,.708379,.0186574,0,.571428,.697165,.0174446,0,.593003,.685554,.0163144,0,.615059,.673631,.015276,0,.637628,.662385,.0143003,0,.660746,.651059,.0134112,0,.68446,.640451,.0125794,0,.70882,.630536,.011793,0,.733893,.620316,.0110547,0,.759756,.609722,.0103668,0,.786505,.598804,.00973009,0,.814259,.587871,.00912812,0,.843157,.577121,.00858916,0,.87334,.566019,.00807333,0,.904762,.554664,.00759687,0,.936508,.543101,.00714759,0,.968254,.531558,.00673418,0,1,1,.146767,0,0,1,.146767,0,0,.999997,.146767,0,0,.999977,.146765,0,320658e-11,.999929,.146762,0,682576e-9,.999823,.146753,0,.00276402,.999633,.146735,0,.00614771,.999314,.146699,0,.0106613,.998796,.14662,0,.0161546,.997124,.146107,0,.0225063,.994062,.144857,0,.0296198,.992154,.144011,0,.037417,.989186,.142712,0,.0458348,.985279,.140926,0,.0548211,.980826,.13885,0,.0643326,.975056,.136168,0,.074333,.969005,.133217,0,.0847917,.961554,.12959,0,.0956828,.954206,.125886,0,.106984,.945046,.121335,0,.118675,.935678,.116492,0,.130741,.926748,.111635,0,.143166,.917764,.106625,0,.155939,.908358,.101325,0,.169049,.899219,.0960249,0,.182487,.890089,.0906527,0,.196245,.881488,.0853905,0,.210317,.874031,.0804177,0,.224697,.866932,.0756005,0,.23938,.859976,.0709019,0,.254364,.853375,.0664391,0,.269646,.846971,.0622012,0,.285223,.840483,.058129,0,.301096,.833969,.0542762,0,.317265,.82806,.0507042,0,.333729,.822128,.047368,0,.350491,.815989,.044272,0,.367554,.809336,.0413444,0,.38492,.802177,.038601,0,.402594,.79441,.0360227,0,.420582,.786573,.0336383,0,.438891,.778619,.0314321,0,.457527,.77,.029362,0,.476499,.760698,.0274102,0,.49582,.750932,.0256146,0,.5155,.740993,.023974,0,.535555,.731159,.0224182,0,.556,.720836,.0209889,0,.576855,.709913,.0196411,0,.598143,.698415,.0183824,0,.619888,.68745,.0172222,0,.642123,.676154,.0161509,0,.664883,.664383,.0151397,0,.688211,.6533,.0141873,0,.71216,.642072,.0133105,0,.736792,.631412,.0124932,0,.762186,.621622,.0117408,0,.788439,.611681,.0110358,0,.815672,.60142,.0103775,0,.844034,.59083,.00975623,0,.873699,.580254,.00918084,0,.904765,.569841,.00864721,0,.936508,.559224,.00815731,0,.968254,.548315,.00767924,0,1,1,.177563,0,0,1,.177563,0,0,.999994,.177562,0,0,.999972,.177555,0,664171e-10,.999914,.177536,0,.0012276,.999787,.177496,0,.00388025,.999556,.17742,0,.00783463,.999165,.177285,0,.0128953,.9985,.177037,0,.0189053,.995388,.175634,0,.025742,.993102,.174375,0,.033309,.990992,.173121,0,.0415298,.986932,.170896,0,.0503425,.982786,.16847,0,.0596964,.977592,.165455,0,.0695498,.971075,.161676,0,.0798676,.963967,.157458,0,.0906201,.956397,.152836,0,.101783,.947489,.147467,0,.113333,.937564,.14145,0,.125254,.928182,.135383,0,.137529,.919027,.129212,0,.150144,.909618,.12276,0,.163088,.900492,.116273,0,.176351,.891671,.1098,0,.189924,.883146,.103362,0,.203799,.875151,.0970799,0,.21797,.868338,.0911732,0,.232433,.862033,.0854966,0,.247182,.856107,.0800691,0,.262216,.850644,.0749618,0,.27753,.845261,.070079,0,.293124,.839885,.0654321,0,.308997,.834609,.0610975,0,.325149,.829083,.0569741,0,.341581,.82404,.0531736,0,.358294,.818968,.049665,0,.37529,.813496,.0463856,0,.392573,.807533,.0433217,0,.410148,.80099,.0404402,0,.428019,.793891,.0377578,0,.446192,.786281,.0352616,0,.464676,.778773,.0329577,0,.483478,.770737,.030808,0,.502608,.762094,.0287964,0,.522079,.752898,.0269254,0,.541905,.743306,.0251926,0,.5621,.733416,.023595,0,.582684,.723742,.0221155,0,.603677,.713542,.0207435,0,.625106,.702755,.019434,0,.646998,.691484,.0182046,0,.66939,.680531,.0170771,0,.692324,.66953,.0160339,0,.715849,.658126,.0150677,0,.740028,.646933,.0141551,0,.764937,.636107,.0133179,0,.790673,.625271,.0125284,0,.817358,.615225,.0117937,0,.84515,.605678,.0111181,0,.874244,.59583,.0104759,0,.904828,.585704,.00986672,0,.936508,.575413,.00929712,0,.968254,.565373,.00876713,0,1,1,.214058,0,0,.999999,.214058,0,0,.999994,.214055,0,0,.999966,.214039,0,259642e-9,.999893,.213998,0,.00200075,.999737,.21391,0,.00527775,.999449,.213745,0,.00983959,.99896,.213458,0,.0154755,.9979,.212855,0,.0220249,.994278,.210779,0,.0293654,.992254,.20926,0,.0374021,.98881,.206908,0,.0460604,.984715,.204009,0,.0552802,.979738,.200471,0,.0650127,.972884,.195813,0,.0752175,.965996,.190856,0,.0858612,.957974,.185077,0,.0969155,.949155,.17868,0,.108356,.939288,.171513,0,.120163,.928996,.163838,0,.132319,.919563,.156246,0,.144808,.910004,.148359,0,.157618,.900791,.140417,0,.170737,.892135,.132569,0,.184155,.883803,.124741,0,.197866,.876034,.117091,0,.211861,.869219,.109835,0,.226134,.863062,.102859,0,.240682,.857795,.0962928,0,.255499,.853009,.0900725,0,.270583,.848603,.0842101,0,.285931,.844335,.0786527,0,.301542,.840208,.0734397,0,.317415,.836035,.0685334,0,.33355,.83172,.0639275,0,.349948,.827135,.0595909,0,.36661,.822797,.0556204,0,.383539,.818387,.0519394,0,.400738,.813565,.0485317,0,.41821,.808142,.0453138,0,.435961,.802212,.0423354,0,.453997,.79573,.0395553,0,.472324,.788741,.036988,0,.490951,.781093,.0345688,0,.509887,.773597,.0323297,0,.529144,.765622,.0302719,0,.548735,.757083,.0283477,0,.568674,.747992,.0265562,0,.588979,.738591,.0248844,0,.609671,.728719,.0233342,0,.630773,.719146,.0219081,0,.652314,.709165,.0205711,0,.674328,.69875,.0193248,0,.696854,.687884,.0181582,0,.719942,.676818,.0170746,0,.743651,.666247,.0160718,0,.768057,.655284,.0151262,0,.793253,.64401,.0142561,0,.819363,.633353,.0134327,0,.846547,.622674,.012653,0,.875017,.612265,.0119354,0,.905021,.602455,.0112533,0,.936508,.593147,.0106234,0,.968254,.583592,.0100213,0,1,1,.25717,0,0,1,.25717,0,0,.999992,.257164,0,0,.999958,.257135,0,641715e-9,.999864,.25706,0,.00305314,.999666,.256897,0,.00700975,.999302,.256596,0,.0122194,.998663,.25607,0,.0184622,.995607,.254123,0,.0255773,.993094,.252081,0,.0334439,.9907,.249867,0,.0419696,.98594,.246118,0,.0510823,.981214,.242049,0,.0607242,.974966,.236869,0,.0708486,.967589,.230724,0,.081417,.95915,.223635,0,.0923974,.950257,.21596,0,.103763,.940165,.207296,0,.115491,.929396,.197901,0,.127562,.919288,.188437,0,.13996,.909428,.178762,0,.15267,.900105,.169072,0,.165679,.891418,.159478,0,.178979,.883347,.15002,0,.192558,.875992,.140813,0,.20641,.869466,.13196,0,.220529,.863699,.123501,0,.234907,.858553,.115436,0,.249542,.854379,.107901,0,.264428,.850894,.10088,0,.279564,.847632,.0942296,0,.294947,.844571,.0879861,0,.310575,.84163,.0821534,0,.326448,.838542,.0766409,0,.342566,.835412,.0715322,0,.358929,.831899,.0666883,0,.37554,.828177,.0622175,0,.392399,.82416,.0580452,0,.409511,.820393,.054267,0,.426878,.816068,.0507172,0,.444506,.811201,.0474041,0,.4624,.805785,.0443174,0,.480566,.799878,.0414562,0,.499013,.793469,.0388147,0,.517749,.786473,.0363453,0,.536785,.778874,.0340225,0,.556134,.771277,.0318599,0,.575809,.763426,.0298859,0,.595827,.755044,.0280357,0,.616207,.746161,.0262979,0,.636973,.737124,.0247295,0,.65815,.72761,.0232514,0,.679772,.717822,.0218755,0,.701876,.708279,.0205942,0,.724509,.698333,.0193947,0,.74773,.68802,.0182717,0,.771609,.677321,.0172044,0,.79624,.666504,.0162122,0,.821743,.656184,.0152924,0,.84828,.64556,.0144326,0,.876069,.634636,.0136157,0,.905404,.624124,.0128612,0,.936508,.613914,.0121435,0,.968254,.603589,.0114887,0,1,1,.307946,0,0,.999999,.307945,0,0,.999988,.307934,0,204479e-10,.999944,.307886,0,.00127833,.999824,.307756,0,.00445047,.999565,.30748,0,.00914673,.999085,.306966,0,.0150498,.998103,.306004,0,.0219367,.994249,.303028,0,.0296485,.991807,.300435,0,.038068,.987773,.296554,0,.0471062,.982673,.2916,0,.0566942,.976623,.285641,0,.0667768,.968757,.27815,0,.0773099,.959849,.269529,0,.088257,.950663,.260248,0,.0995879,.940129,.249704,0,.111277,.92895,.238291,0,.123304,.917996,.226501,0,.13565,.907813,.214669,0,.148299,.898305,.202835,0,.161237,.889626,.191158,0,.174455,.88175,.179695,0,.187941,.874715,.168548,0,.201687,.868746,.15792,0,.215687,.863703,.147807,0,.229933,.859315,.138149,0,.24442,.855538,.128993,0,.259145,.852428,.120414,0,.274103,.850168,.112498,0,.289293,.848132,.105054,0,.304711,.846291,.0981087,0,.320357,.844431,.0915942,0,.33623,.842493,.0855056,0,.35233,.840368,.0798204,0,.368658,.83798,.0745097,0,.385214,.83523,.0695424,0,.402002,.832091,.0649092,0,.419023,.828667,.0606291,0,.436282,.824805,.0566523,0,.453782,.820988,.0530229,0,.471529,.816635,.0496364,0,.489528,.811725,.0464658,0,.507788,.806316,.0435082,0,.526317,.800469,.0407873,0,.545124,.794107,.038255,0,.564221,.787218,.0358825,0,.583621,.779872,.0336785,0,.603341,.772097,.0316379,0,.623397,.764484,.0297379,0,.643812,.756428,.0279581,0,.664611,.748022,.0263153,0,.685824,.739268,.0247799,0,.707488,.73024,.0233385,0,.729646,.720893,.0220035,0,.752354,.71119,.0207555,0,.77568,.701791,.0195843,0,.799715,.692184,.0184891,0,.824574,.682258,.0174541,0,.850417,.67206,.0164873,0,.877466,.661717,.0155959,0,.90604,.651462,.0147519,0,.936528,.641467,.0139727,0,.968254,.631229,.0132363,0,1,1,.367573,0,0,.999999,.367571,0,0,.999984,.367553,0,183382e-9,.999925,.367473,0,.00225254,.999759,.367259,0,.00628165,.99941,.366801,0,.0117858,.998739,.365946,0,.0184359,.995529,.363191,0,.0260114,.992875,.360171,0,.0343581,.989135,.355981,0,.0433637,.984166,.350401,0,.0529438,.977871,.343348,0,.0630334,.96951,.334341,0,.0735805,.959964,.323862,0,.0845437,.950162,.312521,0,.095889,.938882,.299577,0,.107588,.926992,.285573,0,.119617,.915589,.271212,0,.131957,.904791,.256611,0,.144591,.895177,.242224,0,.157503,.886403,.227952,0,.170682,.878957,.214192,0,.184117,.872418,.200795,0,.197799,.867029,.188015,0,.21172,.862835,.175975,0,.225873,.859411,.164526,0,.240253,.856655,.153693,0,.254854,.854519,.14352,0,.269673,.852828,.13397,0,.284707,.851412,.124984,0,.299953,.850609,.116748,0,.315408,.849855,.10905,0,.331073,.849017,.101839,0,.346946,.848079,.0951359,0,.363028,.846911,.0888774,0,.379318,.845445,.0830375,0,.395818,.84362,.0775844,0,.41253,.841411,.0725054,0,.429457,.838768,.0677691,0,.446602,.835801,.0634016,0,.463968,.832341,.0593095,0,.481561,.828424,.0555121,0,.499386,.824312,.052024,0,.51745,.819918,.0487865,0,.535761,.815072,.0457801,0,.554328,.809863,.0430184,0,.573162,.804164,.0404245,0,.592275,.798034,.0380146,0,.611681,.791436,.0357436,0,.631398,.784498,.0336475,0,.651445,.777125,.0316666,0,.671845,.769365,.0298122,0,.692628,.761579,.0281001,0,.713827,.753746,.0265049,0,.735484,.745573,.0250067,0,.75765,.737083,.0236026,0,.78039,.728545,.0223302,0,.803789,.719691,.0211243,0,.82796,.710569,.0199983,0,.853056,.701216,.0189569,0,.879298,.692094,.0179702,0,.907014,.682909,.0170418,0,.936691,.673509,.0161732,0,.968254,.663863,.0153406,0,1,1,.437395,0,0,.999998,.437394,0,0,.99998,.437363,0,616704e-9,.999891,.437232,0,.00367925,.999656,.436877,0,.00867446,.999148,.436121,0,.0150679,.997959,.434564,0,.022531,.993464,.430134,0,.0308507,.990606,.426077,0,.0398805,.985027,.419397,0,.0495148,.978491,.41118,0,.0596749,.969643,.40048,0,.0703001,.959189,.38769,0,.0813427,.948223,.373575,0,.0927641,.935955,.357622,0,.104533,.923237,.34043,0,.116624,.911074,.322735,0,.129015,.899724,.30479,0,.141687,.890189,.287392,0,.154626,.881796,.270248,0,.167818,.874781,.253659,0,.181252,.869166,.237786,0,.194918,.864725,.222618,0,.208807,.861565,.208356,0,.222913,.859284,.194867,0,.237229,.857677,.18212,0,.25175,.856714,.17018,0,.266473,.856155,.158969,0,.281392,.8558,.148413,0,.296505,.855672,.138578,0,.311811,.855538,.129345,0,.327306,.855689,.120861,0,.342991,.855767,.112969,0,.358864,.855618,.105593,0,.374925,.85525,.0987451,0,.391176,.854583,.0923727,0,.407616,.853534,.0864143,0,.424249,.852061,.0808338,0,.441076,.850253,.0756771,0,.4581,.848004,.0708612,0,.475324,.845333,.0663784,0,.492754,.842376,.0622631,0,.510394,.838956,.0584112,0,.528251,.835121,.0548328,0,.546331,.830842,.0514838,0,.564644,.826212,.048355,0,.583198,.821522,.0454714,0,.602005,.816551,.0428263,0,.621078,.811211,.0403612,0,.640434,.805479,.038039,0,.660089,.799409,.0358739,0,.680066,.79306,.0338727,0,.70039,.786395,.0319985,0,.721094,.779416,.030241,0,.742215,.77214,.0285951,0,.7638,.764636,.0270747,0,.785912,.756836,.0256354,0,.808628,.749315,.0243027,0,.832055,.741561,.0230497,0,.856338,.733589,.0218801,0,.88169,.725479,.020784,0,.908441,.717255,.0197702,0,.937125,.708829,.0188168,0,.968254,.700191,.0179113,0,1,1,.518937,0,0,.999998,.518933,0,0,.999967,.518883,0,.00147741,.999832,.51866,0,.00573221,.999466,.518057,0,.011826,.998644,.516752,0,.0192116,.994458,.512347,0,.027573,.991223,.507675,0,.0367099,.985515,.500188,0,.046487,.978308,.490408,0,.0568071,.968359,.477357,0,.0675984,.95682,.461752,0,.0788059,.943929,.443796,0,.090386,.930224,.423893,0,.102304,.916514,.402682,0,.114532,.903653,.380914,0,.127047,.892315,.359212,0,.139828,.882942,.338102,0,.152861,.875438,.31773,0,.16613,.869642,.298186,0,.179624,.865304,.279491,0,.193332,.862382,.261804,0,.207247,.860666,.245146,0,.22136,.859788,.229406,0,.235666,.859608,.214605,0,.250158,.859912,.200691,0,.264832,.86053,.187623,0,.279684,.861368,.17539,0,.294711,.862237,.163901,0,.309911,.863127,.153175,0,.32528,.863923,.143147,0,.340819,.864567,.133781,0,.356524,.865013,.125042,0,.372397,.86539,.116952,0,.388438,.865591,.109476,0,.404645,.865517,.102542,0,.421022,.865084,.0960688,0,.437569,.864309,.0900499,0,.454287,.863151,.0844328,0,.471181,.861649,.0792218,0,.488253,.859742,.0743482,0,.505507,.857446,.0697963,0,.522947,.854757,.0655364,0,.54058,.851783,.061608,0,.558412,.848516,.0579701,0,.576449,.844897,.0545742,0,.594701,.840956,.0514167,0,.613178,.836676,.0484598,0,.631892,.832075,.0456934,0,.650856,.827191,.0431178,0,.670088,.822295,.0407718,0,.689606,.817294,.0386032,0,.709434,.812013,.0365675,0,.7296,.806465,.0346547,0,.750138,.800691,.0328717,0,.771093,.794709,.031211,0,.792519,.788493,.0296504,0,.814488,.782049,.0281782,0,.837097,.775403,.0267965,0,.860481,.76857,.0255002,0,.884842,.761536,.0242759,0,.910494,.754303,.0231142,0,.937985,.74692,.0220305,0,.968254,.739745,.0210192,0,1,1,.613914,0,0,.999996,.613907,0,963597e-10,.999942,.613814,0,.00301247,.999704,.613407,0,.00870385,.999046,.612302,0,.0160714,.995516,.608266,0,.0245899,.991726,.602863,0,.0339681,.985157,.593956,0,.0440254,.97642,.581748,0,.0546409,.964404,.565183,0,.0657284,.950601,.545273,0,.0772246,.935158,.522129,0,.0890812,.919364,.496782,0,.10126,.904754,.470571,0,.113731,.89176,.444037,0,.126469,.881492,.418322,0,.139454,.873656,.393522,0,.15267,.868053,.369795,0,.166101,.864336,.347171,0,.179736,.862259,.325737,0,.193565,.861556,.305532,0,.207578,.861776,.286416,0,.221769,.862661,.268355,0,.23613,.864015,.251334,0,.250656,.865711,.235352,0,.265343,.867519,.220302,0,.280187,.869351,.206161,0,.295183,.871144,.192908,0,.31033,.872839,.180505,0,.325624,.874307,.168848,0,.341065,.875667,.158021,0,.35665,.876758,.147877,0,.37238,.87764,.138441,0,.388253,.878237,.129627,0,.404269,.878563,.121415,0,.42043,.878572,.113741,0,.436735,.87842,.106652,0,.453187,.878057,.100097,0,.469786,.877413,.0940128,0,.486536,.87646,.0883462,0,.503439,.875233,.0830924,0,.520498,.8737,.0781975,0,.537717,.871873,.07364,0,.555102,.86978,.0694103,0,.572657,.867405,.0654696,0,.59039,.864751,.0617914,0,.608307,.861818,.0583491,0,.626419,.858645,.0551443,0,.644733,.855307,.0521894,0,.663264,.851736,.0494334,0,.682025,.847927,.0468504,0,.701032,.843888,.0444261,0,.720308,.839629,.0421497,0,.739875,.835158,.0400082,0,.759764,.830509,.0380076,0,.780014,.825714,.0361488,0,.800673,.820729,.0343956,0,.821803,.815751,.0327781,0,.843492,.810752,.031275,0,.86586,.805587,.0298542,0,.889087,.800317,.0285397,0,.913466,.79489,.0272948,0,.93952,.789314,.0261139,0,.96835,.783593,.0249938,0,1,1,.724258,0,0,.999992,.724243,0,726889e-9,.99987,.724044,0,.00569574,.999336,.72317,0,.0131702,.996271,.719432,0,.0220738,.991159,.712576,0,.0319405,.982465,.700927,0,.0425202,.97049,.684297,0,.0536599,.953973,.661244,0,.065258,.935546,.633804,0,.0772427,.916596,.603071,0,.0895616,.899353,.57105,0,.102175,.885216,.539206,0,.11505,.875076,.508714,0,.128164,.868334,.479571,0,.141495,.864414,.451796,0,.155026,.862678,.425328,0,.168745,.862835,.400352,0,.182639,.864067,.376532,0,.196699,.866086,.35391,0,.210915,.868557,.332424,0,.225282,.871271,.312053,0,.239792,.874058,.292764,0,.25444,.8768,.27453,0,.269223,.87939,.257297,0,.284135,.8819,.24114,0,.299174,.884187,.225934,0,.314337,.886262,.211669,0,.329622,.888119,.198311,0,.345026,.889709,.185783,0,.360549,.891054,.174063,0,.376189,.892196,.163143,0,.391946,.893101,.152952,0,.407819,.893803,.143475,0,.423808,.894277,.134647,0,.439914,.894532,.126434,0,.456137,.894576,.1188,0,.472479,.894393,.111694,0,.48894,.893976,.105069,0,.505523,.893346,.0989077,0,.52223,.892502,.0931724,0,.539064,.891441,.0878276,0,.556028,.890276,.082903,0,.573125,.888972,.0783505,0,.590361,.887469,.0741083,0,.607741,.885785,.0701633,0,.62527,.883914,.0664835,0,.642957,.881872,.0630567,0,.660809,.879651,.0598527,0,.678836,.877267,.0568615,0,.69705,.874717,.05406,0,.715465,.872012,.0514378,0,.734098,.869157,.0489805,0,.752968,.866155,.0466727,0,.772101,.863014,.0445056,0,.791529,.859748,.0424733,0,.81129,.856416,.0405957,0,.831438,.852958,.0388273,0,.852044,.849382,.0371619,0,.87321,.845694,.0355959,0,.89509,.841893,.0341155,0,.917932,.837981,.0327141,0,.942204,.833963,.0313856,0,.968981,.829847,.0301275,0,1,1,.85214,0,0,.999969,.852095,0,.00279627,.999483,.851408,0,.0107635,.994545,.84579,0,.0206454,.986188,.835231,0,.0315756,.969847,.814687,0,.0432021,.945951,.783735,0,.0553396,.91917,.746074,0,.0678766,.895488,.706938,0,.0807395,.878232,.669534,0,.0938767,.868252,.635168,0,.10725,.863873,.603069,0,.120832,.863369,.572514,0,.134598,.86545,.543169,0,.148533,.868803,.514578,0,.16262,.872794,.486762,0,.176849,.87702,.459811,0,.19121,.881054,.433654,0,.205694,.884974,.408574,0,.220294,.888587,.384525,0,.235005,.891877,.36156,0,.24982,.894793,.339661,0,.264737,.89743,.318913,0,.279751,.899796,.299302,0,.294859,.901943,.280843,0,.310058,.903858,.263481,0,.325346,.905574,.247197,0,.340721,.907069,.231915,0,.356181,.908379,.217614,0,.371725,.90952,.20425,0,.387353,.910483,.191758,0,.403063,.91128,.180092,0,.418854,.911936,.169222,0,.434727,.912454,.159098,0,.450682,.912835,.149668,0,.466718,.913078,.140884,0,.482837,.913192,.132709,0,.499038,.913175,.125095,0,.515324,.91304,.118012,0,.531695,.912781,.111417,0,.548153,.91241,.105281,0,.5647,.911924,.0995691,0,.581338,.911331,.0942531,0,.59807,.910637,.0893076,0,.6149,.90984,.0846998,0,.63183,.908941,.0804044,0,.648865,.907944,.0763984,0,.666011,.906857,.0726638,0,.683273,.90568,.0691783,0,.700659,.904416,.0659222,0,.718176,.903067,.0628782,0,.735834,.901637,.0600307,0,.753646,.900128,.0573647,0,.771625,.898544,.0548668,0,.78979,.89689,.052527,0,.808162,.895165,.0503306,0,.826771,.893371,.0482668,0,.845654,.891572,.0463605,0,.864863,.889763,.0445998,0,.884472,.887894,.0429451,0,.904592,.885967,.0413884,0,.925407,.883984,.0399225,0,.947271,.881945,.0385405,0,.97105,.879854,.0372362,0,1,.999804,.995833,0,0,.938155,.933611,0,.0158731,.864755,.854311,0,.0317461,.888594,.865264,0,.0476191,.905575,.863922,0,.0634921,.915125,.850558,0,.0793651,.920665,.829254,0,.0952381,.924073,.802578,0,.111111,.926304,.772211,0,.126984,.927829,.739366,0,.142857,.928924,.705033,0,.15873,.92973,.670019,0,.174603,.930339,.634993,0,.190476,.930811,.600485,0,.206349,.931191,.566897,0,.222222,.93149,.534485,0,.238095,.931737,.503429,0,.253968,.931939,.473811,0,.269841,.932108,.445668,0,.285714,.93225,.418993,0,.301587,.932371,.393762,0,.31746,.932474,.369939,0,.333333,.932562,.347479,0,.349206,.932638,.326336,0,.365079,.932703,.306462,0,.380952,.93276,.287805,0,.396825,.932809,.270313,0,.412698,.932851,.253933,0,.428571,.932887,.23861,0,.444444,.932917,.224289,0,.460317,.932943,.210917,0,.47619,.932965,.19844,0,.492063,.932982,.186807,0,.507937,.932995,.175966,0,.52381,.933005,.165869,0,.539683,.933011,.156468,0,.555556,.933013,.147719,0,.571429,.933013,.139579,0,.587302,.93301,.132007,0,.603175,.933004,.124965,0,.619048,.932994,.118416,0,.634921,.932982,.112326,0,.650794,.932968,.106663,0,.666667,.93295,.101397,0,.68254,.932931,.0964993,0,.698413,.932908,.0919438,0,.714286,.932883,.0877057,0,.730159,.932856,.0837623,0,.746032,.932827,.0800921,0,.761905,.932796,.0766754,0,.777778,.932762,.0734936,0,.793651,.932727,.0705296,0,.809524,.932689,.0677676,0,.825397,.93265,.0651929,0,.84127,.932609,.0627917,0,.857143,.932565,.0605515,0,.873016,.932521,.0584606,0,.888889,.932474,.0565082,0,.904762,.932427,.0546841,0,.920635,.932377,.0529793,0,.936508,.932326,.0513851,0,.952381,.932274,.0498936,0,.968254,.93222,.0484975,0,.984127,.932164,.0471899,0,1],n=new Float32Array(e),r=new Float32Array(t);Oe.LTC_FLOAT_1=new ud(n,64,64,wi,Oo,Pp,ji,ji,pi,ui,1),Oe.LTC_FLOAT_2=new ud(r,64,64,wi,Oo,Pp,ji,ji,pi,ui,1);const s=new Uint16Array(e.length);e.forEach(function(a,l){s[l]=rF.toHalfFloat(a)});const o=new Uint16Array(t.length);t.forEach(function(a,l){o[l]=rF.toHalfFloat(a)}),Oe.LTC_HALF_1=new ud(s,64,64,wi,Mu,Pp,ji,ji,pi,ui,1),Oe.LTC_HALF_2=new ud(o,64,64,wi,Mu,Pp,ji,ji,pi,ui,1)}}class yXe extends qu{constructor(e,t){const n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new ze;r.setAttribute("position",new Le(n,3)),r.computeBoundingSphere();const s=new Bs({fog:!1});super(r,s),this.light=e,this.color=t,this.type="RectAreaLightHelper";const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new ze;a.setAttribute("position",new Le(o,3)),a.computeBoundingSphere(),this.add(new Cn(a,new os({side:Nn,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}class xXe extends bm{constructor(e,t={}){const n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ze;const r=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class _Xe extends ta{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Tm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){let l;try{l=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),l=JSON.parse(a.substring(65,a.length-2))}const c=s.parse(l);t&&t(c)},n,r)}parse(e){return new Cte(e)}}class Cte{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=bXe(e,t,this.data);for(let s=0,o=r.length;s<o;s++)Array.prototype.push.apply(n,r[s].toShapes());return n}}function bXe(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<n.length;c++){const h=n[c];if(h===`
`)a=0,l-=s;else{const u=wXe(h,r,a,l,t);a+=u.offsetX,o.push(u.path)}}return o}function wXe(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const o=new x6e;let a,l,c,h,u,d,f,p;if(s.o){const m=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,g=m.length;y<g;)switch(m[y++]){case"m":a=m[y++]*e+t,l=m[y++]*e+n,o.moveTo(a,l);break;case"l":a=m[y++]*e+t,l=m[y++]*e+n,o.lineTo(a,l);break;case"q":c=m[y++]*e+t,h=m[y++]*e+n,u=m[y++]*e+t,d=m[y++]*e+n,o.quadraticCurveTo(u,d,c,h);break;case"b":c=m[y++]*e+t,h=m[y++]*e+n,u=m[y++]*e+t,d=m[y++]*e+n,f=m[y++]*e+t,p=m[y++]*e+n,o.bezierCurveTo(u,d,f,p,c,h);break}}return{offsetX:s.ha*e,path:o}}Cte.prototype.isFont=!0;class SXe extends ta{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new EXe(t)}),this.register(function(t){return new OXe(t)}),this.register(function(t){return new RXe(t)}),this.register(function(t){return new CXe(t)}),this.register(function(t){return new DXe(t)}),this.register(function(t){return new PXe(t)}),this.register(function(t){return new LXe(t)}),this.register(function(t){return new IXe(t)}),this.register(function(t){return new TXe(t)}),this.register(function(t){return new NXe(t)})}load(e,t,n,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Oa.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Tm(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(Oa.decodeText(new Uint8Array(e,0,4))===Dte){try{o[kt.KHR_BINARY_GLTF]=new FXe(e)}catch(u){r&&r(u);return}s=o[kt.KHR_BINARY_GLTF].content}else s=Oa.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new XXe(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const u=l.extensionsUsed[h],d=l.extensionsRequired||[];switch(u){case kt.KHR_MATERIALS_UNLIT:o[u]=new MXe;break;case kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new BXe;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[u]=new zXe(l,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[u]=new kXe;break;case kt.KHR_MESH_QUANTIZATION:o[u]=new UXe;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}}function AXe(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class TXe{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Pe(16777215);l.color!==void 0&&h.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Hd(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new G1(h),c.distance=u;break;case"spot":c=new jd(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class MXe{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return os}extendParams(e,t,n){const r=[];e.color=new Pe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(r)}}class EXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ae(a,a)}return Promise.all(s)}}class CXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Pe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class DXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class PXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Pe(a[0],a[1],a[2]),Promise.all(s)}}class LXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class IXe{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:sh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Pe(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(l){l.encoding=Fr})),Promise.all(s)}}class OXe{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.images[s.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class RXe{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NXe{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,u=r.byteStride,d=new ArrayBuffer(h*u),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(d),h,u,f,r.mode,r.filter),d})}else return null}}const Dte="glTF",t2=12,AV={JSON:1313821514,BIN:5130562};class FXe{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,t2);if(this.header={magic:Oa.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Dte)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-t2,r=new DataView(e,t2);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===AV.JSON){const l=new Uint8Array(e,t2+s,o);this.content=Oa.decodeText(l)}else if(a===AV.BIN){const l=t2+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zXe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const u=IM[h]||h.toLowerCase();a[u]=o[h]}for(const h in e.attributes){const u=IM[h]||h.toLowerCase();if(o[h]!==void 0){const d=n.accessors[e.attributes[h]],f=b3[d.componentType];c[u]=f,l[u]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(u){r.decodeDracoFile(h,function(d){for(const f in d.attributes){const p=d.attributes[f],m=l[f];m!==void 0&&(p.normalized=m)}u(d)},a,c)})})}}class kXe{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class LM extends wm{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Pe().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class BXe{constructor(){this.name=kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return LM}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new Pe(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new Pe(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new Pe(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",o)),s.push(n.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new LM(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=of,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class UXe{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class Qd extends tc{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}}Qd.prototype.beforeStart_=Qd.prototype.copySampleValue_;Qd.prototype.afterEnd_=Qd.prototype.copySampleValue_;Qd.prototype.interpolate_=function(i,e,t,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,c=n-e,h=(t-e)/c,u=h*h,d=u*h,f=i*l,p=f-l,m=-2*d+3*u,y=d-u,g=1-m,v=y-u+h;for(let x=0;x!==o;x++){const _=s[p+x+o],w=s[p+x+a]*c,b=s[f+x+o],S=s[f+x]*c;r[x]=g*_+v*w+m*b+y*S}return r};const VXe=new Yi;class GXe extends Qd{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return VXe.fromArray(s).normalize().toArray(s),s}}const Sl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},b3={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TV={9728:ui,9729:pi,9984:EA,9985:hX,9986:CA,9987:sf},MV={33071:ji,33648:A6,10497:j0},EV={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},IM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},jXe={CUBICSPLINE:void 0,LINEAR:F1,STEP:qv},Jw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function HXe(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new wm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:N1})),i.DefaultMaterial}function i2(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Wh(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function WXe(i,e,t){let n=!1,r=!1;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(c.POSITION!==void 0&&(n=!0),c.NORMAL!==void 0&&(r=!0),n&&r)break}if(!n&&!r)return Promise.resolve(i);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];if(n){const h=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):i.attributes.position;s.push(h)}if(r){const h=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):i.attributes.normal;o.push(h)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const l=a[0],c=a[1];return n&&(i.morphAttributes.position=l),r&&(i.morphAttributes.normal=c),i.morphTargetsRelative=!0,i})}function $Xe(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qXe(i){const e=i.extensions&&i.extensions[kt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+CV(e.attributes):t=i.indices+":"+CV(i.attributes)+":"+i.mode,t}function CV(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function OM(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class XXe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new AXe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap<"u"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new RY(this.options.manager):this.textureLoader=new lf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tm(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};i2(s,a,r),Wh(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Oa.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=EV[r.type],c=b3[r.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=r.byteOffset||0,f=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,y;if(f&&f!==u){const g=Math.floor(d/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let x=t.cache.get(v);x||(m=new c(a,g*f,r.count*f/h),x=new af(m,f/h),t.cache.add(v,x)),y=new $u(x,l,d%f/h,p)}else a===null?m=new c(r.count*l):m=new c(a,d,r.count*l),y=new at(m,l,p);if(r.sparse!==void 0){const g=EV.SCALAR,v=b3[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,_=r.sparse.values.byteOffset||0,w=new v(o[1],x,r.sparse.count*g),b=new c(o[2],_,r.sparse.count*l);a!==null&&(y=new at(y.array.slice(),y.itemSize,y.normalized));for(let S=0,A=w.length;S<A;S++){const E=w[S];if(y.setX(E,b[S*l]),l>=2&&y.setY(E,b[S*l+1]),l>=3&&y.setZ(E,b[S*l+2]),l>=4&&y.setW(E,b[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],s=t.images[r.source];let o=this.textureLoader;if(s.uri){const a=n.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const r=this,s=this.json,o=this.options,a=s.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let h=t.uri||"",u=!1;if(t.bufferView!==void 0)h=r.getDependency("bufferView",t.bufferView).then(function(f){u=!0;const p=new Blob([f],{type:t.mimeType});return h=c.createObjectURL(p),h});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(h).then(function(f){return new Promise(function(p,m){let y=p;n.isImageBitmapLoader===!0&&(y=function(g){const v=new Zi(g);v.needsUpdate=!0,p(v)}),n.load(Oa.resolveURL(f,o.path),y,void 0,m)})}).then(function(f){u===!0&&c.revokeObjectURL(h),f.flipY=!1,a.name&&(f.name=a.name);const m=(s.samplers||{})[a.sampler]||{};return f.magFilter=TV[m.magFilter]||pi,f.minFilter=TV[m.minFilter]||sf,f.wrapS=MV[m.wrapS]||j0,f.wrapT=MV[m.wrapT]||j0,r.associations.set(f,{textures:e}),f}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null});return this.textureCache[l]=d,d}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then(function(s){if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[kt.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=r.associations.get(s);s=r.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),r.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Qx,Zn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Bs,Zn.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return wm}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=r[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,s,t))}else if(l[kt.KHR_MATERIALS_UNLIT]){const u=r[kt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Pe(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ju);const h=s.alphaMode||Jw.OPAQUE;if(h===Jw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.format=R0,a.transparent=!1,h===Jw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==os&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ae(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==os&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==os&&(a.emissive=new Pe().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==os&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(c).then(function(){let u;return o===LM?u=r[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),u.map&&(u.map.encoding=Fr),u.emissiveMap&&(u.emissiveMap.encoding=Fr),Wh(u,s),t.associations.set(u,{materials:e}),s.extensions&&i2(r,u,s),u})}createUniqueName(e){const t=Vt.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return DV(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=qXe(c),u=r[h];if(u)o.push(u.promise);else{let d;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=DV(new ze,c,t),r[h]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?HXe(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let f=0,p=h.length;f<p;f++){const m=h[f],y=o[f];let g;const v=c[f];if(y.mode===Sl.TRIANGLES||y.mode===Sl.TRIANGLE_STRIP||y.mode===Sl.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new Yx(m,v):new Cn(m,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),y.mode===Sl.TRIANGLE_STRIP?g.geometry=PV(g.geometry,rve):y.mode===Sl.TRIANGLE_FAN&&(g.geometry=PV(g.geometry,fX));else if(y.mode===Sl.LINES)g=new dc(m,v);else if(y.mode===Sl.LINE_STRIP)g=new qu(m,v);else if(y.mode===Sl.LINE_LOOP)g=new jX(m,v);else if(y.mode===Sl.POINTS)g=new ZC(m,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&$Xe(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Wh(g,s),y.extensions&&i2(r,g,y),t.assignFinalMaterial(g),u.push(g)}for(let f=0,p=u.length;f<p;f++)t.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const d=new Js;t.associations.set(d,{meshes:e});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new or(hi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new H0(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Wh(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return n.inverseBindMatrices=r,n})}loadAnimation(e){const n=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,h=n.channels.length;c<h;c++){const u=n.channels[c],d=n.samplers[u.sampler],f=u.target,p=f.node!==void 0?f.node:f.id,m=n.parameters!==void 0?n.parameters[d.input]:d.input,y=n.parameters!==void 0?n.parameters[d.output]:d.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",y)),a.push(d),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2],f=c[3],p=c[4],m=[];for(let g=0,v=h.length;g<v;g++){const x=h[g],_=u[g],w=d[g],b=f[g],S=p[g];if(x===void 0)continue;x.updateMatrix(),x.matrixAutoUpdate=!0;let A;switch(Bc[S.path]){case Bc.weights:A=B1;break;case Bc.rotation:A=Yu;break;case Bc.position:case Bc.scale:default:A=U1;break}const E=x.name?x.name:x.uuid,T=b.interpolation!==void 0?jXe[b.interpolation]:F1,M=[];Bc[S.path]===Bc.weights?x.traverse(function(D){D.isMesh===!0&&D.morphTargetInfluences&&M.push(D.name?D.name:D.uuid)}):M.push(E);let C=w.array;if(w.normalized){const D=OM(C.constructor),P=new Float32Array(C.length);for(let I=0,k=C.length;I<k;I++)P[I]=C[I]*D;C=P}for(let D=0,P=M.length;D<P;D++){const I=new A(M[D]+"."+Bc[S.path],_.array,C,T);b.interpolation==="CUBICSPLINE"&&(I.createInterpolant=function(G){const U=this instanceof Yu?GXe:Qd;return new U(this.times,this.values,this.getValueSize()/3,G)},I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(I)}}const y=n.name?n.name:"animation_"+e;return new D6(y,void 0,m)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,n=this.extensions,r=this,s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Zv:a.length>1?l=new Js:a.length===1?l=a[0]:l=new Pt,l!==a[0])for(let c=0,h=a.length;c<h;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),Wh(l,s),s.extensions&&i2(n,l,s),s.matrix!==void 0){const c=new Ce;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],s=this,o=new Js;r.name&&(o.name=s.createUniqueName(r.name)),Wh(o,r),r.extensions&&i2(n,o,r);const a=r.nodes||[],l=[];for(let c=0,h=a.length;c<h;c++)l.push(Pte(a[c],o,t,s));return Promise.all(l).then(function(){const c=h=>{const u=new Map;for(const[d,f]of s.associations)(d instanceof Zn||d instanceof Zi)&&u.set(d,f);return h.traverse(d=>{const f=s.associations.get(d);f!=null&&u.set(d,f)}),u};return s.associations=c(o),o})}}function Pte(i,e,t,n){const r=t.nodes[i];return n.getDependency("node",i).then(function(s){if(r.skin===void 0)return s;let o;return n.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,h=o.joints.length;c<h;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],h=[];for(let u=0,d=a.length;u<d;u++){const f=a[u];if(f){c.push(f);const p=new Ce;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,u*16),h.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new Zx(c,h),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++){const h=a[l];o.push(Pte(h,s,t,n))}}return Promise.all(o)})}function YXe(i,e,t){const n=e.attributes,r=new er;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new R(l[0],l[1],l[2]),new R(c[0],c[1],c[2])),a.normalized){const h=OM(b3[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new R,l=new R;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const d=t.json.accessors[u.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const m=OM(b3[d.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new Fs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function DV(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=IM[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Wh(i,e),YXe(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?WXe(i,e.targets,t):i})}function PV(i,e){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===fX)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var LV={},RM=function(i){return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Lte=function(i){return new Worker(i)};try{URL.revokeObjectURL(RM(""))}catch{RM=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},Lte=function(e){return new Worker(e,{type:"module"})}}var ZXe=function(i,e,t,n,r){var s=Lte(LV[e]||(LV[e]=RM(i)));return s.onerror=function(o){return r(o.error,null)},s.onmessage=function(o){return r(null,o.data)},s.postMessage(t,n),s},Ft=Uint8Array,cr=Uint16Array,ac=Uint32Array,$m=new Ft([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qm=new Ft([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w3=new Ft([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ite=function(i,e){for(var t=new cr(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new ac(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},Ote=Ite($m,2),_L=Ote[0],z8=Ote[1];_L[28]=258,z8[258]=28;var Rte=Ite(qm,0),Nte=Rte[0],NM=Rte[1],S3=new cr(32768);for(var Bi=0;Bi<32768;++Bi){var Uc=(Bi&43690)>>>1|(Bi&21845)<<1;Uc=(Uc&52428)>>>2|(Uc&13107)<<2,Uc=(Uc&61680)>>>4|(Uc&3855)<<4,S3[Bi]=((Uc&65280)>>>8|(Uc&255)<<8)>>>1}var Xo=function(i,e,t){for(var n=i.length,r=0,s=new cr(e);r<n;++r)++s[i[r]-1];var o=new cr(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new cr(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var c=r<<4|i[r],h=e-i[r],u=o[i[r]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)a[S3[u]>>>l]=c}else for(a=new cr(n),r=0;r<n;++r)i[r]&&(a[r]=S3[o[i[r]-1]++]>>>15-i[r]);return a},lc=new Ft(288);for(var Bi=0;Bi<144;++Bi)lc[Bi]=8;for(var Bi=144;Bi<256;++Bi)lc[Bi]=9;for(var Bi=256;Bi<280;++Bi)lc[Bi]=7;for(var Bi=280;Bi<288;++Bi)lc[Bi]=8;var rm=new Ft(32);for(var Bi=0;Bi<32;++Bi)rm[Bi]=5;var Fte=Xo(lc,9,0),zte=Xo(lc,9,1),kte=Xo(rm,5,0),Bte=Xo(rm,5,1),R5=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},yo=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},N5=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},vy=function(i){return(i/8|0)+(i&7&&1)},Yo=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof cr?cr:i instanceof ac?ac:Ft)(t-e);return n.set(i.subarray(e,t)),n},yy=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Ft(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ft(n*3));var o=function(B){var q=e.length;if(B>q){var K=new Ft(Math.max(q*2,B));K.set(e),e=K}},a=t.f||0,l=t.p||0,c=t.b||0,h=t.l,u=t.d,d=t.m,f=t.n,p=n*8;do{if(!h){t.f=a=yo(i,l,1);var m=yo(i,l+1,3);if(l+=3,m)if(m==1)h=zte,u=Bte,d=9,f=5;else if(m==2){var x=yo(i,l,31)+257,_=yo(i,l+10,15)+4,w=x+yo(i,l+5,31)+1;l+=14;for(var b=new Ft(w),S=new Ft(19),A=0;A<_;++A)S[w3[A]]=yo(i,l+A*3,7);l+=_*3;for(var E=R5(S),T=(1<<E)-1,M=Xo(S,E,1),A=0;A<w;){var C=M[yo(i,l,T)];l+=C&15;var y=C>>>4;if(y<16)b[A++]=y;else{var D=0,P=0;for(y==16?(P=3+yo(i,l,3),l+=2,D=b[A-1]):y==17?(P=3+yo(i,l,7),l+=3):y==18&&(P=11+yo(i,l,127),l+=7);P--;)b[A++]=D}}var I=b.subarray(0,x),k=b.subarray(x);d=R5(I),f=R5(k),h=Xo(I,d,1),u=Xo(k,f,1)}else throw"invalid block type";else{var y=vy(l)+4,g=i[y-4]|i[y-3]<<8,v=y+g;if(v>n){if(s)throw"unexpected EOF";break}r&&o(c+g),e.set(i.subarray(y,v),c),t.b=c+=g,t.p=l=v*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var G=(1<<d)-1,U=(1<<f)-1,Z=l;;Z=l){var D=h[N5(i,l)&G],$=D>>>4;if(l+=D&15,l>p){if(s)throw"unexpected EOF";break}if(!D)throw"invalid length/literal";if($<256)e[c++]=$;else if($==256){Z=l,h=null;break}else{var W=$-254;if($>264){var A=$-257,X=$m[A];W=yo(i,l,(1<<X)-1)+_L[A],l+=X}var j=u[N5(i,l)&U],H=j>>>4;if(!j)throw"invalid distance";l+=j&15;var k=Nte[H];if(H>3){var X=qm[H];k+=N5(i,l)&(1<<X)-1,l+=X}if(l>p){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var V=c+W;c<V;c+=4)e[c]=e[c-k],e[c+1]=e[c+1-k],e[c+2]=e[c+2-k],e[c+3]=e[c+3-k];c=V}}t.l=h,t.p=Z,t.b=c,h&&(a=1,t.m=d,t.d=u,t.n=f)}while(!a);return c==e.length?e:Yo(e,0,c)},l0=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>>8},Ap=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>>8,i[n+2]|=t>>>16},F5=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var r=t.length,s=t.slice();if(!r)return[Bl,0];if(r==1){var o=new Ft(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(w,b){return w.f-b.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,h=1,u=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=r-1;)a=t[t[c].f<t[u].f?c++:u++],l=t[c!=h&&t[c].f<t[u].f?c++:u++],t[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=s[0].s,n=1;n<r;++n)s[n].s>d&&(d=s[n].s);var f=new cr(d+1),p=k8(t[h-1],f,0);if(p>e){var n=0,m=0,y=p-e,g=1<<y;for(s.sort(function(b,S){return f[S.s]-f[b.s]||b.f-S.f});n<r;++n){var v=s[n].s;if(f[v]>e)m+=g-(1<<p-f[v]),f[v]=e;else break}for(m>>>=y;m>0;){var x=s[n].s;f[x]<e?m-=1<<e-f[x]++-1:++n}for(;n>=0&&m;--n){var _=s[n].s;f[_]==e&&(--f[_],++m)}p=e}return[new Ft(f),p]},k8=function(i,e,t){return i.s==-1?Math.max(k8(i.l,e,t+1),k8(i.r,e,t+1)):e[i.s]=t},FM=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new cr(++e),n=0,r=i[0],s=1,o=function(l){t[n++]=l},a=1;a<=e;++a)if(i[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=i[a]}return[t.subarray(0,n),e]},Tp=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},gv=function(i,e,t){var n=t.length,r=vy(e+2);i[r]=n&255,i[r+1]=n>>>8,i[r+2]=i[r]^255,i[r+3]=i[r+1]^255;for(var s=0;s<n;++s)i[r+s+4]=t[s];return(r+4+n)*8},zM=function(i,e,t,n,r,s,o,a,l,c,h){l0(e,h++,t),++r[256];for(var u=F5(r,15),d=u[0],f=u[1],p=F5(s,15),m=p[0],y=p[1],g=FM(d),v=g[0],x=g[1],_=FM(m),w=_[0],b=_[1],S=new cr(19),A=0;A<v.length;++A)S[v[A]&31]++;for(var A=0;A<w.length;++A)S[w[A]&31]++;for(var E=F5(S,7),T=E[0],M=E[1],C=19;C>4&&!T[w3[C-1]];--C);var D=c+5<<3,P=Tp(r,lc)+Tp(s,rm)+o,I=Tp(r,d)+Tp(s,m)+o+14+3*C+Tp(S,T)+(2*S[16]+3*S[17]+7*S[18]);if(D<=P&&D<=I)return gv(e,h,i.subarray(l,l+c));var k,G,U,Z;if(l0(e,h,1+(I<P)),h+=2,I<P){k=Xo(d,f,0),G=d,U=Xo(m,y,0),Z=m;var $=Xo(T,M,0);l0(e,h,x-257),l0(e,h+5,b-1),l0(e,h+10,C-4),h+=14;for(var A=0;A<C;++A)l0(e,h+3*A,T[w3[A]]);h+=3*C;for(var W=[v,w],X=0;X<2;++X)for(var j=W[X],A=0;A<j.length;++A){var H=j[A]&31;l0(e,h,$[H]),h+=T[H],H>15&&(l0(e,h,j[A]>>>5&127),h+=j[A]>>>12)}}else k=Fte,G=lc,U=kte,Z=rm;for(var A=0;A<a;++A)if(n[A]>255){var H=n[A]>>>18&31;Ap(e,h,k[H+257]),h+=G[H+257],H>7&&(l0(e,h,n[A]>>>23&31),h+=$m[H]);var V=n[A]&31;Ap(e,h,U[V]),h+=Z[V],V>3&&(Ap(e,h,n[A]>>>5&8191),h+=qm[V])}else Ap(e,h,k[n[A]]),h+=G[n[A]];return Ap(e,h,k[256]),h+G[256]},Ute=new ac([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bl=new Ft(0),Vte=function(i,e,t,n,r,s){var o=i.length,a=new Ft(n+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(n,a.length-r),c=0;if(!e||o<8)for(var h=0;h<=o;h+=65535){var u=h+65535;u<o?c=gv(l,c,i.subarray(h,u)):(l[h]=s,c=gv(l,c,i.subarray(h,o)))}else{for(var d=Ute[e-1],f=d>>>13,p=d&8191,m=(1<<t)-1,y=new cr(32768),g=new cr(m+1),v=Math.ceil(t/3),x=2*v,_=function(Y){return(i[Y]^i[Y+1]<<v^i[Y+2]<<x)&m},w=new ac(25e3),b=new cr(288),S=new cr(32),A=0,E=0,h=0,T=0,M=0,C=0;h<o;++h){var D=_(h),P=h&32767,I=g[D];if(y[P]=I,g[D]=P,M<=h){var k=o-h;if((A>7e3||T>24576)&&k>423){c=zM(i,l,0,w,b,S,E,T,C,h-C,c),T=A=E=0,C=h;for(var G=0;G<286;++G)b[G]=0;for(var G=0;G<30;++G)S[G]=0}var U=2,Z=0,$=p,W=P-I&32767;if(k>2&&D==_(h-W))for(var X=Math.min(f,k)-1,j=Math.min(32767,h),H=Math.min(258,k);W<=j&&--$&&P!=I;){if(i[h+U]==i[h+U-W]){for(var V=0;V<H&&i[h+V]==i[h+V-W];++V);if(V>U){if(U=V,Z=W,V>X)break;for(var B=Math.min(W,V-2),q=0,G=0;G<B;++G){var K=h-W+G+32768&32767,Q=y[K],oe=K-Q+32768&32767;oe>q&&(q=oe,I=K)}}}P=I,I=y[P],W+=P-I+32768&32767}if(Z){w[T++]=268435456|z8[U]<<18|NM[Z];var ne=z8[U]&31,L=NM[Z]&31;E+=$m[ne]+qm[L],++b[257+ne],++S[L],M=h+U,++A}else w[T++]=i[h],++b[i[h]]}}c=zM(i,l,s,w,b,S,E,T,C,h-C,c),!s&&c&7&&(c=gv(l,c+1,Bl))}return Yo(a,0,n+vy(c)+r)},Gte=function(){for(var i=new ac(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&3988292384)^t>>>1;i[e]=t}return i}(),Xm=function(){var i=-1;return{p:function(e){for(var t=i,n=0;n<e.length;++n)t=Gte[t&255^e[n]]^t>>>8;i=t},d:function(){return~i}}},bL=function(){var i=1,e=0;return{p:function(t){for(var n=i,r=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=n+=t[o];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}i=n,e=r},d:function(){return i%=65521,e%=65521,(i&255)<<24|i>>>8<<16|(e&255)<<8|e>>>8}}},_f=function(i,e,t,n,r){return Vte(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,n,!r)},xy=function(i,e){var t={};for(var n in i)t[n]=i[n];for(var n in e)t[n]=e[n];return t},IV=function(i,e,t){for(var n=i(),r=i.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<n.length;++o){var a=n[o],l=s[o];if(typeof a=="function"){e+=";"+l+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var h=c.indexOf(" ",8)+1;e+=c.slice(h,c.indexOf("(",h))}else{e+=c;for(var u in a.prototype)e+=";"+l+".prototype."+u+"="+a.prototype[u].toString()}else e+=c}else t[l]=a}return[e,t]},j4=[],QXe=function(i){var e=[];for(var t in i)(i[t]instanceof Ft||i[t]instanceof cr||i[t]instanceof ac)&&e.push((i[t]=new i[t].constructor(i[t])).buffer);return e},jte=function(i,e,t,n){var r;if(!j4[t]){for(var s="",o={},a=i.length-1,l=0;l<a;++l)r=IV(i[l],s,o),s=r[0],o=r[1];j4[t]=IV(i[a],s,o)}var c=xy({},j4[t][1]);return ZXe(j4[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,QXe(c),n)},Ym=function(){return[Ft,cr,ac,$m,qm,w3,_L,Nte,zte,Bte,S3,Xo,R5,yo,N5,vy,Yo,yy,Jm,uh,wL]},Zm=function(){return[Ft,cr,ac,$m,qm,w3,z8,NM,Fte,lc,kte,rm,S3,Ute,Bl,Xo,l0,Ap,F5,k8,FM,Tp,gv,zM,vy,Yo,Vte,_f,_y,uh]},Hte=function(){return[SL,TL,ii,Xm,Gte]},Wte=function(){return[AL,Xte]},$te=function(){return[ML,ii,bL]},qte=function(){return[Yte]},uh=function(i){return postMessage(i,[i.buffer])},wL=function(i){return i&&i.size&&new Ft(i.size)},Qm=function(i,e,t,n,r,s){var o=jte(t,n,r,function(a,l){o.terminate(),s(a,l)});return o.postMessage([i,e],e.consume?[i.buffer]:[]),function(){o.terminate()}},ea=function(i){return i.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return i.push(e.data[0],e.data[1])}},Km=function(i,e,t,n,r){var s,o=jte(i,n,r,function(a,l){a?(o.terminate(),e.ondata.call(e,a)):(l[1]&&o.terminate(),e.ondata.call(e,a,l[0],l[1]))});o.postMessage(t),e.push=function(a,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=l],[a.buffer])},e.terminate=function(){o.terminate()}},ns=function(i,e){return i[e]|i[e+1]<<8},Mn=function(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24)>>>0},eS=function(i,e){return Mn(i,e)+Mn(i,e+4)*4294967296},ii=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},SL=function(i,e){var t=e.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=e.level<2?4:e.level==9?2:0,i[9]=3,e.mtime!=0&&ii(i,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){i[3]=8;for(var n=0;n<=t.length;++n)i[n+10]=t.charCodeAt(n)}},AL=function(i){if(i[0]!=31||i[1]!=139||i[2]!=8)throw"invalid gzip data";var e=i[3],t=10;e&4&&(t+=i[10]|(i[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!i[t++]);return t+(e&2)},Xte=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},TL=function(i){return 10+(i.filename&&i.filename.length+1||0)},ML=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=n<<6|(n?32-2*n:1)},Yte=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function EL(i,e){return!e&&typeof i=="function"&&(e=i,i={}),this.ondata=e,i}var X0=function(){function i(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return i.prototype.p=function(e,t){this.ondata(_f(e,this.o,0,0,!t),t)},i.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},i}(),Zte=function(){function i(e,t){Km([Zm,function(){return[ea,X0]}],this,EL.call(this,e,t),function(n){var r=new X0(n.data);onmessage=ea(r)},6)}return i}();function Qte(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Zm],function(n){return uh(_y(n.data[0],n.data[1]))},0,t)}function _y(i,e){return _f(i,e||{},0,0)}var Rs=function(){function i(e){this.s={},this.p=new Ft(0),this.ondata=e}return i.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new Ft(t+e.length);n.set(this.p),n.set(e,t),this.p=n},i.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=yy(this.p,this.o,this.s);this.ondata(Yo(n,t,this.s.b),this.d),this.o=Yo(n,this.s.b-32768),this.s.b=this.o.length,this.p=Yo(this.p,this.s.p/8|0),this.s.p&=7},i.prototype.push=function(e,t){this.e(e),this.c(t)},i}(),CL=function(){function i(e){this.ondata=e,Km([Ym,function(){return[ea,Rs]}],this,0,function(){var t=new Rs;onmessage=ea(t)},7)}return i}();function DL(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Ym],function(n){return uh(Jm(n.data[0],wL(n.data[1])))},1,t)}function Jm(i,e){return yy(i,e)}var B8=function(){function i(e,t){this.c=Xm(),this.l=0,this.v=1,X0.call(this,e,t)}return i.prototype.push=function(e,t){X0.prototype.push.call(this,e,t)},i.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=_f(e,this.o,this.v&&TL(this.o),t&&8,!t);this.v&&(SL(n,this.o),this.v=0),t&&(ii(n,n.length-8,this.c.d()),ii(n,n.length-4,this.l)),this.ondata(n,t)},i}(),OV=function(){function i(e,t){Km([Zm,Hte,function(){return[ea,X0,B8]}],this,EL.call(this,e,t),function(n){var r=new B8(n.data);onmessage=ea(r)},8)}return i}();function RV(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Zm,Hte,function(){return[U8]}],function(n){return uh(U8(n.data[0],n.data[1]))},2,t)}function U8(i,e){e||(e={});var t=Xm(),n=i.length;t.p(i);var r=_f(i,e,TL(e),8),s=r.length;return SL(r,e),ii(r,s-8,t.d()),ii(r,s-4,n),r}var V8=function(){function i(e){this.v=1,Rs.call(this,e)}return i.prototype.push=function(e,t){if(Rs.prototype.e.call(this,e),this.v){var n=this.p.length>3?AL(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Rs.prototype.c.call(this,t)},i}(),Kte=function(){function i(e){this.ondata=e,Km([Ym,Wte,function(){return[ea,Rs,V8]}],this,0,function(){var t=new V8;onmessage=ea(t)},9)}return i}();function Jte(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Ym,Wte,function(){return[G8]}],function(n){return uh(G8(n.data[0]))},3,t)}function G8(i,e){return yy(i.subarray(AL(i),-8),e||new Ft(Xte(i)))}var kM=function(){function i(e,t){this.c=bL(),this.v=1,X0.call(this,e,t)}return i.prototype.push=function(e,t){X0.prototype.push.call(this,e,t)},i.prototype.p=function(e,t){this.c.p(e);var n=_f(e,this.o,this.v&&2,t&&4,!t);this.v&&(ML(n,this.o),this.v=0),t&&ii(n,n.length-4,this.c.d()),this.ondata(n,t)},i}(),KXe=function(){function i(e,t){Km([Zm,$te,function(){return[ea,X0,kM]}],this,EL.call(this,e,t),function(n){var r=new kM(n.data);onmessage=ea(r)},10)}return i}();function JXe(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Zm,$te,function(){return[BM]}],function(n){return uh(BM(n.data[0],n.data[1]))},4,t)}function BM(i,e){e||(e={});var t=bL();t.p(i);var n=_f(i,e,2,4);return ML(n,e),ii(n,n.length-4,t.d()),n}var j8=function(){function i(e){this.v=1,Rs.call(this,e)}return i.prototype.push=function(e,t){if(Rs.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Rs.prototype.c.call(this,t)},i}(),eie=function(){function i(e){this.ondata=e,Km([Ym,qte,function(){return[ea,Rs,j8]}],this,0,function(){var t=new j8;onmessage=ea(t)},11)}return i}();function tie(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Qm(i,e,[Ym,qte,function(){return[A3]}],function(n){return uh(A3(n.data[0],wL(n.data[1])))},5,t)}function A3(i,e){return yy((Yte(i),i.subarray(2,-4)),e)}var iie=function(){function i(e){this.G=V8,this.I=Rs,this.Z=j8,this.ondata=e}return i.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new Ft(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},i}(),eYe=function(){function i(e){this.G=Kte,this.I=CL,this.Z=eie,this.ondata=e}return i.prototype.push=function(e,t){iie.prototype.push.call(this,e,t)},i}();function tYe(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return i[0]==31&&i[1]==139&&i[2]==8?Jte(i,e,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?DL(i,e,t):tie(i,e,t)}function iYe(i,e){return i[0]==31&&i[1]==139&&i[2]==8?G8(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?Jm(i,e):A3(i,e)}var PL=function(i,e,t,n){for(var r in i){var s=i[r],o=e+r;s instanceof Ft?t[o]=[s,n]:Array.isArray(s)?t[o]=[s[0],xy(n,s[1])]:PL(s,o+"/",t,n)}},NV=typeof TextEncoder<"u"&&new TextEncoder,UM=typeof TextDecoder<"u"&&new TextDecoder,nie=0;try{UM.decode(Bl,{stream:!0}),nie=1}catch{}var rie=function(i){for(var e="",t=0;;){var n=i[t++],r=(n>127)+(n>223)+(n>239);if(t+r>i.length)return[e,Yo(i,t-1)];r?r==3?(n=((n&15)<<18|(i[t++]&63)<<12|(i[t++]&63)<<6|i[t++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):r&1?e+=String.fromCharCode((n&31)<<6|i[t++]&63):e+=String.fromCharCode((n&15)<<12|(i[t++]&63)<<6|i[t++]&63):e+=String.fromCharCode(n)}},nYe=function(){function i(e){this.ondata=e,nie?this.t=new TextDecoder:this.p=Bl}return i.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var n=new Ft(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=rie(n),s=r[0],o=r[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)},i}(),rYe=function(){function i(e){this.ondata=e}return i.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(eh(e),this.d=t||!1)},i}();function eh(i,e){if(e){for(var t=new Ft(i.length),n=0;n<i.length;++n)t[n]=i.charCodeAt(n);return t}if(NV)return NV.encode(i);for(var r=i.length,s=new Ft(i.length+(i.length>>1)),o=0,a=function(h){s[o++]=h},n=0;n<r;++n){if(o+5>s.length){var l=new Ft(o+8+(r-n<<1));l.set(s),s=l}var c=i.charCodeAt(n);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|c&63)):c>55295&&c<57344?(c=65536+(c&1023<<10)|i.charCodeAt(++n)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63)):(a(224|c>>12),a(128|c>>6&63),a(128|c&63))}return Yo(s,0,o)}function LL(i,e){if(e){for(var t="",n=0;n<i.length;n+=16384)t+=String.fromCharCode.apply(null,i.subarray(n,n+16384));return t}else{if(UM)return UM.decode(i);var r=rie(i),s=r[0],o=r[1];if(o.length)throw"invalid utf-8 data";return s}}var sie=function(i){return i==1?3:i<6?2:i==9?1:0},oie=function(i,e){return e+30+ns(i,e+26)+ns(i,e+28)},aie=function(i,e,t){var n=ns(i,e+28),r=LL(i.subarray(e+46,e+46+n),!(ns(i,e+8)&2048)),s=e+46+n,o=Mn(i,e+20),a=t&&o==4294967295?lie(i,s):[o,Mn(i,e+24),Mn(i,e+42)],l=a[0],c=a[1],h=a[2];return[ns(i,e+10),l,c,r,s+ns(i,e+30)+ns(i,e+32),h]},lie=function(i,e){for(;ns(i,e)!=1;e+=4+ns(i,e+2));return[eS(i,e+12),eS(i,e+4),eS(i,e+20)]},Ou=function(i){var e=0;if(i)for(var t in i){var n=i[t].length;if(n>65535)throw"extra field too long";e+=n+4}return e},sm=function(i,e,t,n,r,s,o,a){var l=n.length,c=t.extra,h=a&&a.length,u=Ou(c);ii(i,e,o!=null?33639248:67324752),e+=4,o!=null&&(i[e++]=20,i[e++]=t.os),i[e]=20,e+=2,i[e++]=t.flag<<1|(s==null&&8),i[e++]=r&&8,i[e++]=t.compression&255,i[e++]=t.compression>>8;var d=new Date(t.mtime==null?Date.now():t.mtime),f=d.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(ii(i,e,f<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),e+=4,s!=null&&(ii(i,e,t.crc),ii(i,e+4,s),ii(i,e+8,t.size)),ii(i,e+12,l),ii(i,e+14,u),e+=16,o!=null&&(ii(i,e,h),ii(i,e+6,t.attrs),ii(i,e+10,o),e+=14),i.set(n,e),e+=l,u)for(var p in c){var m=c[p],y=m.length;ii(i,e,+p),ii(i,e+2,y),i.set(m,e+4),e+=4+y}return h&&(i.set(a,e),e+=h),e},IL=function(i,e,t,n,r){ii(i,e,101010256),ii(i,e+8,t),ii(i,e+10,t),ii(i,e+12,n),ii(i,e+16,r)},T3=function(){function i(e){this.filename=e,this.c=Xm(),this.size=0,this.compression=0}return i.prototype.process=function(e,t){this.ondata(null,e,t)},i.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},i}(),sYe=function(){function i(e,t){var n=this;t||(t={}),T3.call(this,e),this.d=new X0(t,function(r,s){n.ondata(null,r,s)}),this.compression=8,this.flag=sie(t.level)}return i.prototype.process=function(e,t){try{this.d.push(e,t)}catch(n){this.ondata(n,null,t)}},i.prototype.push=function(e,t){T3.prototype.push.call(this,e,t)},i}(),oYe=function(){function i(e,t){var n=this;t||(t={}),T3.call(this,e),this.d=new Zte(t,function(r,s,o){n.ondata(r,s,o)}),this.compression=8,this.flag=sie(t.level),this.terminate=this.d.terminate}return i.prototype.process=function(e,t){this.d.push(e,t)},i.prototype.push=function(e,t){T3.prototype.push.call(this,e,t)},i}(),aYe=function(){function i(e){this.ondata=e,this.u=[],this.d=1}return i.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var n=eh(e.filename),r=n.length,s=e.comment,o=s&&eh(s),a=r!=e.filename.length||o&&s.length!=o.length,l=r+Ou(e.extra)+30;if(r>65535)throw"filename too long";var c=new Ft(l);sm(c,0,e,n,a);var h=[c],u=function(){for(var y=0,g=h;y<g.length;y++){var v=g[y];t.ondata(null,v,!1)}h=[]},d=this.d;this.d=0;var f=this.u.length,p=xy(e,{f:n,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),d){var y=t.u[f+1];y?y.r():t.d=1}d=1}}),m=0;e.ondata=function(y,g,v){if(y)t.ondata(y,g,v),t.terminate();else if(m+=g.length,h.push(g),v){var x=new Ft(16);ii(x,0,134695760),ii(x,4,e.crc),ii(x,8,m),ii(x,12,e.size),h.push(x),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,d&&p.r(),d=1}else d&&u()},this.u.push(p)},i.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},i.prototype.e=function(){for(var e=0,t=0,n=0,r=0,s=this.u;r<s.length;r++){var o=s[r];n+=46+o.f.length+Ou(o.extra)+(o.o?o.o.length:0)}for(var a=new Ft(n+22),l=0,c=this.u;l<c.length;l++){var o=c[l];sm(a,e,o,o.f,o.u,o.c,t,o.o),e+=46+o.f.length+Ou(o.extra)+(o.o?o.o.length:0),t+=o.b}IL(a,e,this.u.length,n,t),this.ondata(null,a,!0),this.d=2},i.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},i}();function lYe(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var n={};PL(i,"",n,e);var r=Object.keys(n),s=r.length,o=0,a=0,l=s,c=new Array(s),h=[],u=function(){for(var m=0;m<h.length;++m)h[m]()},d=function(){var m=new Ft(a+22),y=o,g=a-o;a=0;for(var v=0;v<l;++v){var x=c[v];try{var _=x.c.length;sm(m,a,x,x.f,x.u,_);var w=30+x.f.length+Ou(x.extra),b=a+w;m.set(x.c,b),sm(m,o,x,x.f,x.u,_,a,x.m),o+=16+w+(x.m?x.m.length:0),a=b+_}catch(S){return t(S,null)}}IL(m,o,c.length,g,y),t(null,m)};s||d();for(var f=function(m){var y=r[m],g=n[y],v=g[0],x=g[1],_=Xm(),w=v.length;_.p(v);var b=eh(y),S=b.length,A=x.comment,E=A&&eh(A),T=E&&E.length,M=Ou(x.extra),C=x.level==0?0:8,D=function(P,I){if(P)u(),t(P,null);else{var k=I.length;c[m]=xy(x,{size:w,crc:_.d(),c:I,f:b,m:E,u:S!=y.length||E&&A.length!=T,compression:C}),o+=30+S+M+k,a+=76+2*(S+M)+(T||0)+k,--s||d()}};if(S>65535&&D("filename too long",null),!C)D(null,v);else if(w<16e4)try{D(null,_y(v,x))}catch(P){D(P,null)}else h.push(Qte(v,x,D))},p=0;p<l;++p)f(p);return u}function cYe(i,e){e||(e={});var t={},n=[];PL(i,"",t,e);var r=0,s=0;for(var o in t){var a=t[o],l=a[0],c=a[1],h=c.level==0?0:8,u=eh(o),d=u.length,f=c.comment,p=f&&eh(f),m=p&&p.length,y=Ou(c.extra);if(d>65535)throw"filename too long";var g=h?_y(l,c):l,v=g.length,x=Xm();x.p(l),n.push(xy(c,{size:l.length,crc:x.d(),c:g,f:u,m:p,u:d!=o.length||p&&f.length!=m,o:r,compression:h})),r+=30+d+y+v,s+=76+2*(d+y)+(m||0)+v}for(var _=new Ft(s+22),w=r,b=s-r,S=0;S<n.length;++S){var u=n[S];sm(_,u.o,u,u.f,u.u,u.c.length);var A=30+u.f.length+Ou(u.extra);_.set(u.c,u.o+A),sm(_,r,u,u.f,u.u,u.c.length,u.o,u.m),r+=16+A+(u.m?u.m.length:0)}return IL(_,r,n.length,b,w),_}var cie=function(){function i(){}return i.prototype.push=function(e,t){this.ondata(null,e,t)},i.compression=0,i}(),uYe=function(){function i(){var e=this;this.i=new Rs(function(t,n){e.ondata(null,t,n)})}return i.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},i.compression=8,i}(),hYe=function(){function i(e,t){var n=this;t<32e4?this.i=new Rs(function(r,s){n.ondata(null,r,s)}):(this.i=new CL(function(r,s,o){n.ondata(r,s,o)}),this.terminate=this.i.terminate)}return i.prototype.push=function(e,t){this.i.terminate&&(e=Yo(e,0)),this.i.push(e,t)},i.compression=8,i}(),dYe=function(){function i(e){this.onfile=e,this.k=[],this.o={0:cie},this.p=Bl}return i.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(r),e.length)return this.push(e,t)}else{var o=0,a=0,l=void 0,c=void 0;this.p.length?e.length?(c=new Ft(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var h=c.length,u=this.c,d=u&&this.d,f=function(){var g,v=Mn(c,a);if(v==67324752){o=1,l=a,p.d=null,p.c=0;var x=ns(c,a+6),_=ns(c,a+8),w=x&2048,b=x&8,S=ns(c,a+26),A=ns(c,a+28);if(h>a+30+S+A){var E=[];p.k.unshift(E),o=2;var T=Mn(c,a+18),M=Mn(c,a+22),C=LL(c.subarray(a+30,a+=30+S),!w);T==4294967295?(g=b?[-2]:lie(c,a),T=g[0],M=g[1]):b&&(T=-1),a+=A,p.c=T;var D,P={name:C,compression:_,start:function(){if(!P.ondata)throw"no callback";if(!T)P.ondata(null,Bl,!0);else{var I=n.o[_];if(!I)throw"unknown compression type "+_;D=T<0?new I(C):new I(C,T,M),D.ondata=function(Z,$,W){P.ondata(Z,$,W)};for(var k=0,G=E;k<G.length;k++){var U=G[k];D.push(U,!1)}n.k[0]==E&&n.c?n.d=D:D.push(Bl,!0)}},terminate:function(){D&&D.terminate&&D.terminate()}};T>=0&&(P.size=T,P.originalSize=M),p.onfile(P)}return"break"}else if(u){if(v==134695760)return l=a+=12+(u==-2&&8),o=3,p.c=0,"break";if(v==33639248)return l=a-=4,o=3,p.c=0,"break"}},p=this;a<h-4;++a){var m=f();if(m==="break")break}if(this.p=Bl,u<0){var y=o?c.subarray(0,l-12-(u==-2&&8)-(Mn(c,l-16)==134695760&&4)):c.subarray(0,a);d?d.push(y,!!o):this.k[+(o==2)].push(y)}if(o&2)return this.push(c.subarray(a),t);this.p=c.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},i.prototype.register=function(e){this.o[e.compression]=e},i}();function fYe(i,e){if(typeof e!="function")throw"no callback";for(var t=[],n=function(){for(var d=0;d<t.length;++d)t[d]()},r={},s=i.length-22;Mn(i,s)!=101010256;--s)if(!s||i.length-s>65558){e("invalid zip file",null);return}var o=ns(i,s+8);o||e(null,{});var a=o,l=Mn(i,s+16),c=l==4294967295;if(c){if(s=Mn(i,s-12),Mn(i,s)!=101075792){e("invalid zip file",null);return}a=o=Mn(i,s+32),l=Mn(i,s+48)}for(var h=function(d){var f=aie(i,l,c),p=f[0],m=f[1],y=f[2],g=f[3],v=f[4],x=f[5],_=oie(i,x);l=v;var w=function(S,A){S?(n(),e(S,null)):(r[g]=A,--o||e(null,r))};if(!p)w(null,Yo(i,_,_+m));else if(p==8){var b=i.subarray(_,_+m);if(m<32e4)try{w(null,Jm(b,new Ft(y)))}catch(S){w(S,null)}else t.push(DL(b,{size:y},w))}else w("unknown compression type "+p,null)},u=0;u<a;++u)h();return n}function pYe(i){for(var e={},t=i.length-22;Mn(i,t)!=101010256;--t)if(!t||i.length-t>65558)throw"invalid zip file";var n=ns(i,t+8);if(!n)return{};var r=Mn(i,t+16),s=r==4294967295;if(s){if(t=Mn(i,t-12),Mn(i,t)!=101075792)throw"invalid zip file";n=Mn(i,t+32),r=Mn(i,t+48)}for(var o=0;o<n;++o){var a=aie(i,r,s),l=a[0],c=a[1],h=a[2],u=a[3],d=a[4],f=a[5],p=oie(i,f);if(r=d,!l)e[u]=Yo(i,p,p+c);else if(l==8)e[u]=Jm(i.subarray(p,p+c),new Ft(h));else throw"unknown compression type "+l}return e}const mYe=Object.freeze(Object.defineProperty({__proto__:null,AsyncCompress:OV,AsyncDecompress:eYe,AsyncDeflate:Zte,AsyncGunzip:Kte,AsyncGzip:OV,AsyncInflate:CL,AsyncUnzipInflate:hYe,AsyncUnzlib:eie,AsyncZipDeflate:oYe,AsyncZlib:KXe,Compress:B8,DecodeUTF8:nYe,Decompress:iie,Deflate:X0,EncodeUTF8:rYe,Gunzip:V8,Gzip:B8,Inflate:Rs,Unzip:dYe,UnzipInflate:uYe,UnzipPassThrough:cie,Unzlib:j8,Zip:aYe,ZipDeflate:sYe,ZipPassThrough:T3,Zlib:kM,compress:RV,compressSync:U8,decompress:tYe,decompressSync:iYe,deflate:Qte,deflateSync:_y,gunzip:Jte,gunzipSync:G8,gzip:RV,gzipSync:U8,inflate:DL,inflateSync:Jm,strFromU8:LL,strToU8:eh,unzip:fYe,unzipSync:pYe,unzlib:tie,unzlibSync:A3,zip:lYe,zipSync:cYe,zlib:JXe,zlibSync:BM},Symbol.toStringTag,{value:"Module"}));function uie(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let r=i,s=n,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function gYe(i,e,t,n){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let c=0;c<a;++c){const h=o[c+1],u=s[a-c],d=r[c]/(h+u);r[c]=l+h*d,l=u*d}r[a]=l}return r}function vYe(i,e,t,n){const r=uie(i,n,e),s=gYe(r,n,i,e),o=new xt(0,0,0,0);for(let a=0;a<=i;++a){const l=t[r-i+a],c=s[a],h=l.w*c;o.x+=l.x*h,o.y+=l.y*h,o.z+=l.z*h,o.w+=l.w*c}return o}function yYe(i,e,t,n,r){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=n;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let u=1;u<=t;++u){l[u]=e-r[i+1-u],c[u]=r[i+u]-e;let d=0;for(let f=0;f<u;++f){const p=c[f+1],m=l[u-f];a[u][f]=p+m;const y=a[f][u-1]/a[u][f];a[f][u]=d+p*y,d=m*y}a[u][u]=d}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let d=0,f=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=n;++m){let y=0;const g=u-m,v=t-m;u>=m&&(p[f][0]=p[d][0]/a[v+1][g],y=p[f][0]*a[g][v]);const x=g>=-1?1:-g,_=u-1<=v?m-1:t-u;for(let b=x;b<=_;++b)p[f][b]=(p[d][b]-p[d][b-1])/a[v+1][g+b],y+=p[f][b]*a[g+b][v];u<=v&&(p[f][m]=-p[d][m-1]/a[v+1][u],y+=p[f][m]*a[u][v]),o[m][u]=y;const w=d;d=f,f=w}}let h=t;for(let u=1;u<=n;++u){for(let d=0;d<=t;++d)o[u][d]*=h;h*=t-u}return o}function xYe(i,e,t,n,r){const s=r<i?r:i,o=[],a=uie(i,n,e),l=yYe(a,n,i,s,e),c=[];for(let h=0;h<t.length;++h){const u=t[h].clone(),d=u.w;u.x*=d,u.y*=d,u.z*=d,c[h]=u}for(let h=0;h<=s;++h){const u=c[a-i].clone().multiplyScalar(l[h][0]);for(let d=1;d<=i;++d)u.add(c[a-i+d].clone().multiplyScalar(l[h][d]));o[h]=u}for(let h=s+1;h<=r+1;++h)o[h]=new xt(0,0,0);return o}function _Ye(i,e){let t=1;for(let r=2;r<=i;++r)t*=r;let n=1;for(let r=2;r<=e;++r)n*=r;for(let r=2;r<=i-e;++r)n*=r;return t/n}function bYe(i){const e=i.length,t=[],n=[];for(let s=0;s<e;++s){const o=i[s];t[s]=new R(o.x,o.y,o.z),n[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(_Ye(s,a)*n[a]));r[s]=o.divideScalar(n[0])}return r}function wYe(i,e,t,n,r){const s=xYe(i,e,t,n,r);return bYe(s)}class FV extends zs{constructor(e,t,n,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new xt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new R){const n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=vYe(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new R){const n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=wYe(this.degree,this.knots,this.controlPoints,r,1);return n.copy(s[1]).normalize(),n}}let It,An,ms;class SYe extends ta{constructor(e){super(e)}load(e,t,n,r){const s=this,o=s.path===""?Oa.extractUrlBase(e):s.path,a=new Tm(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e,t){if(DYe(e))It=new CYe().parse(e);else{const r=pie(e);if(!PYe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(kV(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+kV(r));It=new EYe().parse(r)}const n=new lf(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new AYe(n,this.manager).parse(It)}}class AYe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){An=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),s=new TYe().parse(r);return this.parseScene(r,s,n),ms}parseConnections(){const e=new Map;return"Connections"in It&&It.Connections.connections.forEach(function(n){const r=n[0],s=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in It.Objects){const n=It.Objects.Video;for(const r in n){const s=n[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(n[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const n in e){const r=e[n];t[r]!==void 0?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in It.Objects){const n=It.Objects.Texture;for(const r in n){const s=this.parseTexture(n[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(n.wrapS=o===0?j0:ji,n.wrapT=a===0?j0:ji,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,s=An.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Zi):(l.setPath(this.textureLoader.path),o=l.load(n))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Zi):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in It.Objects){const n=It.Objects.Material;for(const r in n){const s=this.parseMaterial(n[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!An.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new K2;break;case"lambert":a=new nD;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new K2;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new Pe().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new Pe().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new Pe().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new Pe().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new Pe().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new Pe().fromArray(e.SpecularColor.value));const s=this;return An.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&(r.map.encoding=Fr);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Fr);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=S6,r.envMap.encoding=Fr);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Fr);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in It.Objects&&t in It.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=An.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in It.Objects){const n=It.Objects.Deformer;for(const r in n){const s=n[r],o=An.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,n),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Ce().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=An.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){ms=new Js;const r=this.parseModels(e.skeletons,t,n),s=It.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),An.get(l.ID).parents.forEach(function(u){const d=r.get(u.ID);d!==void 0&&d.add(l)}),l.parent===null&&ms.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),ms.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=die(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new MYe().parse();ms.children.length===1&&ms.children[0].isGroup&&(ms.children[0].animations=a,ms=ms.children[0]),ms.animations=a}parseModels(e,t,n){const r=new Map,s=It.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=An.get(a);let h=this.buildSkeleton(c,e,a,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(c);break;case"Light":h=this.createLight(c);break;case"Mesh":h=this.createMesh(c,t,n);break;case"NurbsCurve":h=this.createCurve(c,t);break;case"LimbNode":case"Root":h=new Zv;break;case"Null":default:h=new Js;break}h.name=l.attrName?Vt.sanitizeNodeName(l.attrName):"",h.ID=a}this.getTransformData(h,l),r.set(a,h)}return r}buildSkeleton(e,t,n,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,h){if(c.ID===o.ID){const u=s;s=new Zv,s.matrixWorld.copy(c.transformLink),s.name=r?Vt.sanitizeNodeName(r):"",s.ID=n,l.bones[h]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(r){const s=It.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Pt;else{let r=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(r=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const c=a/l;let h=45;n.FieldOfView!==void 0&&(h=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new or(h,c,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new H0(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Pt;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(r){const s=It.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Pt;else{let r;n.LightType===void 0?r=0:r=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new Pe().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new G1(s,o,a,l);break;case 1:t=new Hd(s,o);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=hi.degToRad(n.InnerAngle.value));let h=0;n.OuterAngle!==void 0&&(h=hi.degToRad(n.OuterAngle.value),h=Math.max(h,1)),t=new jd(s,o,a,c,h,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new G1(s,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new K2({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new Yx(s,o),r.normalizeSkinWeights()):r=new Cn(s,o),r}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new Bs({color:3342591,linewidth:1});return new qu(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=fie(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&An.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=It.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),ms.add(e.target)):e.lookAt(new R().fromArray(o))}}})}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const s in e){const o=e[s];An.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;An.get(c).parents.forEach(function(u){n.has(u.ID)&&n.get(u.ID).bind(new Zx(o.bones),r[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in It.Objects){const t=It.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Ce().fromArray(s.Matrix.a)}):e[r.Node]=new Ce().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in It&&"AmbientColor"in It.GlobalSettings){const e=It.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(t!==0||n!==0||r!==0){const s=new Pe(t,n,r);ms.add(new oD(s,1))}}}}class TYe{parse(e){const t=new Map;if("Geometry"in It.Objects){const n=It.Objects.Geometry;for(const r in n){const s=An.get(parseInt(r)),o=this.parseGeometry(s,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,s=[],o=e.parents.map(function(u){return It.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,d){return r[d.ID]!==void 0&&(u=r[d.ID]),u},null);e.children.forEach(function(u){n.morphTargets[u.ID]!==void 0&&s.push(n.morphTargets[u.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=fie(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const h=die(c);return this.genGeometry(t,a,s,h)}genGeometry(e,t,n,r){const s=new ze;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Le(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Le(a.colors,3)),t&&(s.setAttribute("skinIndex",new jC(a.weightsIndices,4)),s.setAttribute("skinWeight",new Le(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new hn().getNormalMatrix(r),h=new Le(a.normal,3);h.applyNormalMatrix(c),s.setAttribute("normal",h)}if(a.uvs.forEach(function(c,h){let u="uv"+(h+1).toString();h===0&&(u="uv"),s.setAttribute(u,new Le(a.uvs[h],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],h=0;if(a.materialIndex.forEach(function(u,d){u!==c&&(s.addGroup(h,d-h,c),c=u,h=d)}),s.groups.length>0){const u=s.groups[s.groups.length-1],d=u.start+u.count;d!==a.materialIndex.length&&s.addGroup(d,a.materialIndex.length-d,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,r),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:r.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,s=!1,o=[],a=[],l=[],c=[],h=[],u=[];const d=this;return e.vertexIndices.forEach(function(f,p){let m,y=!1;f<0&&(f=f^-1,y=!0);let g=[],v=[];if(o.push(f*3,f*3+1,f*3+2),e.color){const x=H4(p,n,f,e.color);l.push(x[0],x[1],x[2])}if(e.skeleton){if(e.weightTable[f]!==void 0&&e.weightTable[f].forEach(function(x){v.push(x.weight),g.push(x.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const x=[0,0,0,0],_=[0,0,0,0];v.forEach(function(w,b){let S=w,A=g[b];_.forEach(function(E,T,M){if(S>E){M[T]=S,S=E;const C=x[T];x[T]=A,A=C}})}),g=x,v=_}for(;v.length<4;)v.push(0),g.push(0);for(let x=0;x<4;++x)h.push(v[x]),u.push(g[x])}if(e.normal){const x=H4(p,n,f,e.normal);a.push(x[0],x[1],x[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=H4(p,n,f,e.material)[0]),e.uv&&e.uv.forEach(function(x,_){const w=H4(p,n,f,x);c[_]===void 0&&(c[_]=[]),c[_].push(w[0]),c[_].push(w[1])}),r++,y&&(d.genFace(t,e,o,m,a,l,c,h,u,r),n++,r=0,o=[],a=[],l=[],c=[],h=[],u=[])}),t}genFace(e,t,n,r,s,o,a,l,c,h){for(let u=2;u<h;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(u-1)*3]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[n[u*3]]),e.vertex.push(t.vertexPositions[n[u*3+1]]),e.vertex.push(t.vertexPositions[n[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(u-1)*4]),e.weightsIndices.push(c[(u-1)*4+1]),e.weightsIndices.push(c[(u-1)*4+2]),e.weightsIndices.push(c[(u-1)*4+3]),e.weightsIndices.push(c[u*4]),e.weightsIndices.push(c[u*4+1]),e.weightsIndices.push(c[u*4+2]),e.weightsIndices.push(c[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(d,f){e.uvs[f]===void 0&&(e.uvs[f]=[]),e.uvs[f].push(a[f][0]),e.uvs[f].push(a[f][1]),e.uvs[f].push(a[f][(u-1)*2]),e.uvs[f].push(a[f][(u-1)*2+1]),e.uvs[f].push(a[f][u*2]),e.uvs[f].push(a[f][u*2+1])})}addMorphTargets(e,t,n,r){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const l=It.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,n,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=n.Vertices!==void 0?n.Vertices.a:[],l=n.Indexes!==void 0?n.Indexes.a:[],c=e.attributes.position.count*3,h=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;h[m]=a[p*3],h[m+1]=a[p*3+1],h[m+2]=a[p*3+2]}const u={vertexIndices:o,vertexPositions:h},d=this.genBuffers(u),f=new Le(d.vertex,3);f.name=s||n.attrName,f.applyMatrix4(r),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let s=[];return n==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(FV===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ze;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ze;const n=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,d=o.length;u<d;u+=4)s.push(new xt().fromArray(o,u));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=n,l=r.length-1-a;for(let u=0;u<n;++u)s.push(s[u])}const h=new FV(n,r,s,a,l).getPoints(s.length*12);return new ze().setFromPoints(h)}}class MYe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const r=t[n],s=this.addClip(r);e.push(s)}return e}parseClips(){if(It.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=It.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=It.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(LYe),values:t[n].KeyValueFloat.a},s=An.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=It.Objects.AnimationLayer,n=new Map;for(const r in t){const s=[],o=An.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const h=e.get(l.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(s[c]===void 0){const u=An.get(l.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(u!==void 0){const d=It.Objects.Model[u.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const f={modelName:d.attrName?Vt.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ms.traverse(function(p){p.ID===d.id&&(f.transform=p.matrix,p.userData.transformData&&(f.eulerOrder=p.userData.transformData.eulerOrder))}),f.transform||(f.transform=new Ce),"PreRotation"in d&&(f.preRotation=d.PreRotation.value),"PostRotation"in d&&(f.postRotation=d.PostRotation.value),s[c]=f}}s[c]&&(s[c][h.attr]=h)}else if(h.curves.morph!==void 0){if(s[c]===void 0){const u=An.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,d=An.get(u).parents[0].ID,f=An.get(d).parents[0].ID,p=An.get(f).parents[0].ID,m=It.Objects.Model[p],y={modelName:m.attrName?Vt.sanitizeNodeName(m.attrName):"",morphName:It.Objects.Deformer[u].attrName};s[c]=y}s[c][h.attr]=h}}}),n.set(parseInt(r),s))}return n}parseAnimStacks(e){const t=It.Objects.AnimationStack,n={};for(const r in t){const s=An.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(r){t=t.concat(n.generateTracks(r))}),new D6(e.name,-1,t)}generateTracks(e){const t=[];let n=new R,r=new Yi,s=new R;if(e.transform&&e.transform.decompose(n,r,s),n=n.toArray(),r=new ss().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new U1(e+"."+r,s,o)}generateRotationTrack(e,t,n,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(hi.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(hi.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(hi.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);r!==void 0&&(r=r.map(hi.degToRad),r.push(o),r=new ss().fromArray(r),r=new Yi().setFromEuler(r)),s!==void 0&&(s=s.map(hi.degToRad),s.push(o),s=new ss().fromArray(s),s=new Yi().setFromEuler(s).invert());const c=new Yi,h=new ss,u=[];for(let d=0;d<l.length;d+=3)h.set(l[d],l[d+1],l[d+2],o),c.setFromEuler(h),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(u,d/3*4);return new Yu(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),r=ms.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new B1(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,r){return n-r}),t.length>1){let n=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[n]=o,r=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const r=n,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const h=t.x.values[o];s.push(h),r[0]=h}else s.push(r[0]);if(a!==-1){const h=t.y.values[a];s.push(h),r[1]=h}else s.push(r[1]);if(l!==-1){const h=t.z.values[l];s.push(h),r[2]=h}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=n+a;const c=e.times[t-1],u=(e.times[t]-c)/o;let d=c+u;const f=[],p=[];for(;d<e.times[t];)f.push(d),d+=u,p.push(l),l+=a;e.times=BV(e.times,t,f),e.values=BV(e.values,t,p)}}}}class EYe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new hie,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,n[++s]):h?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in a?(n==="PoseNode"?a.PoseNode.push(s):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=s)):typeof o.id=="number"?(a[n]={},a[n][o.id]=s):n!=="Properties70"&&(n==="PoseNode"?a[n]=[s]:a[n]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),h=parseInt(l[1]);let u=s.split(",").slice(3);u=u.map(function(d){return d.trim().replace(/^"/,"")}),r="connections",s=[c,h],OYe(s,u),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=iS(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=iS(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=iS(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class CYe{parse(e){const t=new zV(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new hie;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let d=0;d<s;d++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",h=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(n.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const d=this.parseNode(e,t);d!==null&&this.parseSubNode(a,n,d)}return n.propertyList=l,typeof c=="number"&&(n.id=c),h!==""&&(n.attrName=h),u!==""&&(n.attrType=u),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if(e==="Connections"&&n.name==="C"){const r=[];n.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let r=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof mYe>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=A3(new Uint8Array(e.getArrayBuffer(o))),l=new zV(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class zV{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),Oa.decodeText(new Uint8Array(t))}}class hie{add(e,t){this[e]=t}}function DYe(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===pie(i,0,e.length)}function PYe(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(r){const s=i[r-1];return i=i.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(n(1)===e[r])return!1;return!0}function kV(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function LYe(i){return i/46186158e3}const IYe=[];function H4(i,e,t,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(r=n.indices[r]);const s=r*n.dataSize,o=s+n.dataSize;return RYe(IYe,n.buffer,s,o)}const tS=new ss,dp=new R;function die(i){const e=new Ce,t=new Ce,n=new Ce,r=new Ce,s=new Ce,o=new Ce,a=new Ce,l=new Ce,c=new Ce,h=new Ce,u=new Ce,d=new Ce,f=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(dp.fromArray(i.translation)),i.preRotation){const T=i.preRotation.map(hi.degToRad);T.push(i.eulerOrder),t.makeRotationFromEuler(tS.fromArray(T))}if(i.rotation){const T=i.rotation.map(hi.degToRad);T.push(i.eulerOrder),n.makeRotationFromEuler(tS.fromArray(T))}if(i.postRotation){const T=i.postRotation.map(hi.degToRad);T.push(i.eulerOrder),r.makeRotationFromEuler(tS.fromArray(T)),r.invert()}i.scale&&s.scale(dp.fromArray(i.scale)),i.scalingOffset&&a.setPosition(dp.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(dp.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(dp.fromArray(i.rotationOffset)),i.rotationPivot&&c.setPosition(dp.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(u.copy(i.parentMatrix),h.copy(i.parentMatrixWorld));const p=t.clone().multiply(n).multiply(r),m=new Ce;m.extractRotation(h);const y=new Ce;y.copyPosition(h);const g=y.clone().invert().multiply(h),v=m.clone().invert().multiply(g),x=s,_=new Ce;if(f===0)_.copy(m).multiply(p).multiply(v).multiply(x);else if(f===1)_.copy(m).multiply(v).multiply(p).multiply(x);else{const M=new Ce().scale(new R().setFromMatrixScale(u)).clone().invert(),C=v.clone().multiply(M);_.copy(m).multiply(p).multiply(C).multiply(x)}const w=c.clone().invert(),b=o.clone().invert();let S=e.clone().multiply(l).multiply(c).multiply(t).multiply(n).multiply(r).multiply(w).multiply(a).multiply(o).multiply(s).multiply(b);const A=new Ce().copyPosition(S),E=h.clone().multiply(A);return d.copyPosition(E),S=d.clone().multiply(_),S.premultiply(h.invert()),S}function fie(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function iS(i){return i.split(",").map(function(t){return parseFloat(t)})}function pie(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),Oa.decodeText(new Uint8Array(i,e,t))}function OYe(i,e){for(let t=0,n=i.length,r=e.length;t<r;t++,n++)i[n]=e[t]}function RYe(i,e,t,n){for(let r=t,s=0;r<n;r++,s++)i[s]=e[r];return i}function BV(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}var Rd={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;

		}`};class nl{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const NYe=new H0(-1,1,1,-1,0,1),OL=new ze;OL.setAttribute("position",new Le([-1,3,0,-1,-1,0,3,-1,0],3));OL.setAttribute("uv",new Le([0,2,0,0,2,0],2));class bf{constructor(e){this._mesh=new Cn(OL,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,NYe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class om extends nl{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Si?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Dn.clone(e.uniforms),this.material=new Si({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new bf(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class UV extends nl{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class FYe extends nl{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}let zYe=class{constructor(e,t){if(this.renderer=e,t===void 0){const n={minFilter:pi,magFilter:pi,format:wi},r=e.getSize(new ae);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new jn(this._width*this._pixelRatio,this._height*this._pixelRatio,n),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Rd===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),om===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new om(Rd),this.clock=new K5e}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}UV!==void 0&&(o instanceof UV?n=!0:o instanceof FYe&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new ae);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}};new H0(-1,1,1,-1,0,1);const mie=new ze;mie.setAttribute("position",new Le([-1,3,0,-1,-1,0,3,-1,0],3));mie.setAttribute("uv",new Le([0,2,0,0,2,0],2));let kYe=class extends nl{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Pe}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}};const VV={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		uniform sampler2D tColor;
		uniform sampler2D tDepth;

		uniform float maxblur; // max blur amount
		uniform float aperture; // aperture - bigger values for shallower depth of field

		uniform float nearClip;
		uniform float farClip;

		uniform float focus;
		uniform float aspect;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, nearClip, farClip );
			#else
			return orthographicDepthToViewZ( depth, nearClip, farClip );
			#endif
		}


		void main() {

			vec2 aspectcorrect = vec2( 1.0, aspect );

			float viewZ = getViewZ( getDepth( vUv ) );

			float factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation

			vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );

			vec2 dofblur9 = dofblur * 0.9;
			vec2 dofblur7 = dofblur * 0.7;
			vec2 dofblur4 = dofblur * 0.4;

			vec4 col = vec4( 0.0 );

			col += texture2D( tColor, vUv.xy );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );

			gl_FragColor = col / 41.0;
			gl_FragColor.a = 1.0;

		}`};let BYe=class extends nl{constructor(e,t,n){super(),this.scene=e,this.camera=t;const r=n.focus!==void 0?n.focus:1,s=n.aspect!==void 0?n.aspect:t.aspect,o=n.aperture!==void 0?n.aperture:.025,a=n.maxblur!==void 0?n.maxblur:1,l=n.width||window.innerWidth||1,c=n.height||window.innerHeight||1;this.renderTargetDepth=new jn(l,c,{minFilter:ui,magFilter:ui}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new XC,this.materialDepth.depthPacking=vX,this.materialDepth.blending=vr,VV===void 0&&console.error("THREE.BokehPass relies on BokehShader");const h=VV,u=Dn.clone(h.uniforms);u.tDepth.value=this.renderTargetDepth.texture,u.focus.value=r,u.aspect.value=s,u.aperture.value=o,u.maxblur.value=a,u.nearClip.value=t.near,u.farClip.value=t.far,this.materialBokeh=new Si({defines:Object.assign({},h.defines),uniforms:u,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}),this.uniforms=u,this.needsSwap=!1,this.fsQuad=new bf(this.materialBokeh),this._oldClearColor=new Pe}render(e,t,n){this.scene.overrideMaterial=this.materialDepth,e.getClearColor(this._oldClearColor);const r=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.setRenderTarget(this.renderTargetDepth),e.clear(),e.render(this.scene,this.camera),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),this.scene.overrideMaterial=null,e.setClearColor(this._oldClearColor),e.setClearAlpha(r),e.autoClear=s}};const GV={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		// control parameter
		uniform float time;

		uniform bool grayscale;

		// noise effect intensity value (0 = no effect, 1 = full effect)
		uniform float nIntensity;

		// scanlines effect intensity value (0 = no effect, 1 = full effect)
		uniform float sIntensity;

		// scanlines effect count value (0 = no effect, 4096 = full effect)
		uniform float sCount;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

		// sample the source
			vec4 cTextureScreen = texture2D( tDiffuse, vUv );

		// make some noise
			float dx = rand( vUv + time );

		// add noise
			vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );

		// get us a sine and cosine
			vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );

		// add scanlines
			cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;

		// interpolate between source and result by intensity
			cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );

		// convert to grayscale if desired
			if( grayscale ) {

				cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );

			}

			gl_FragColor =  vec4( cResult, cTextureScreen.a );

		}`};let UYe=class extends nl{constructor(e,t,n,r){super(),GV===void 0&&console.error("THREE.FilmPass relies on FilmShader");const s=GV;this.uniforms=Dn.clone(s.uniforms),this.material=new Si({uniforms:this.uniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}),r!==void 0&&(this.uniforms.grayscale.value=r),e!==void 0&&(this.uniforms.nIntensity.value=e),t!==void 0&&(this.uniforms.sIntensity.value=t),n!==void 0&&(this.uniforms.sCount.value=n),this.fsQuad=new bf(this.material)}render(e,t,n,r){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}};const VYe={uniforms:{tDiffuse:{value:null},resolution:{value:new ae(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		#define FXAA_PC 1
		#define FXAA_GLSL_100 1
		#define FXAA_QUALITY_PRESET 12

		#define FXAA_GREEN_AS_LUMA 1

		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_PC_CONSOLE
				//
				// The console algorithm for PC is included
				// for developers targeting really low spec machines.
				// Likely better to just run FXAA_PC, and use a really low preset.
				//
				#define FXAA_PC_CONSOLE 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_GLSL_120
				#define FXAA_GLSL_120 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_GLSL_130
				#define FXAA_GLSL_130 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_HLSL_3
				#define FXAA_HLSL_3 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_HLSL_4
				#define FXAA_HLSL_4 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_HLSL_5
				#define FXAA_HLSL_5 0
		#endif
		/*==========================================================================*/
		#ifndef FXAA_GREEN_AS_LUMA
				//
				// For those using non-linear color,
				// and either not able to get luma in alpha, or not wanting to,
				// this enables FXAA to run using green as a proxy for luma.
				// So with this enabled, no need to pack luma in alpha.
				//
				// This will turn off AA on anything which lacks some amount of green.
				// Pure red and blue or combination of only R and B, will get no AA.
				//
				// Might want to lower the settings for both,
				//		fxaaConsoleEdgeThresholdMin
				//		fxaaQualityEdgeThresholdMin
				// In order to insure AA does not get turned off on colors
				// which contain a minor amount of green.
				//
				// 1 = On.
				// 0 = Off.
				//
				#define FXAA_GREEN_AS_LUMA 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_EARLY_EXIT
				//
				// Controls algorithm's early exit path.
				// On PS3 turning this ON adds 2 cycles to the shader.
				// On 360 turning this OFF adds 10ths of a millisecond to the shader.
				// Turning this off on console will result in a more blurry image.
				// So this defaults to on.
				//
				// 1 = On.
				// 0 = Off.
				//
				#define FXAA_EARLY_EXIT 1
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_DISCARD
				//
				// Only valid for PC OpenGL currently.
				// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
				//
				// 1 = Use discard on pixels which don't need AA.
				//		 For APIs which enable concurrent TEX+ROP from same surface.
				// 0 = Return unchanged color on pixels which don't need AA.
				//
				#define FXAA_DISCARD 0
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_FAST_PIXEL_OFFSET
				//
				// Used for GLSL 120 only.
				//
				// 1 = GL API supports fast pixel offsets
				// 0 = do not use fast pixel offsets
				//
				#ifdef GL_EXT_gpu_shader4
						#define FXAA_FAST_PIXEL_OFFSET 1
				#endif
				#ifdef GL_NV_gpu_shader5
						#define FXAA_FAST_PIXEL_OFFSET 1
				#endif
				#ifdef GL_ARB_gpu_shader5
						#define FXAA_FAST_PIXEL_OFFSET 1
				#endif
				#ifndef FXAA_FAST_PIXEL_OFFSET
						#define FXAA_FAST_PIXEL_OFFSET 0
				#endif
		#endif
		/*--------------------------------------------------------------------------*/
		#ifndef FXAA_GATHER4_ALPHA
				//
				// 1 = API supports gather4 on alpha channel.
				// 0 = API does not support gather4 on alpha channel.
				//
				#if (FXAA_HLSL_5 == 1)
						#define FXAA_GATHER4_ALPHA 1
				#endif
				#ifdef GL_ARB_gpu_shader5
						#define FXAA_GATHER4_ALPHA 1
				#endif
				#ifdef GL_NV_gpu_shader5
						#define FXAA_GATHER4_ALPHA 1
				#endif
				#ifndef FXAA_GATHER4_ALPHA
						#define FXAA_GATHER4_ALPHA 0
				#endif
		#endif


		/*============================================================================
														FXAA QUALITY - TUNING KNOBS
		------------------------------------------------------------------------------
		NOTE the other tuning knobs are now in the shader function inputs!
		============================================================================*/
		#ifndef FXAA_QUALITY_PRESET
				//
				// Choose the quality preset.
				// This needs to be compiled into the shader as it effects code.
				// Best option to include multiple presets is to
				// in each shader define the preset, then include this file.
				//
				// OPTIONS
				// -----------------------------------------------------------------------
				// 10 to 15 - default medium dither (10=fastest, 15=highest quality)
				// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)
				// 39			 - no dither, very expensive
				//
				// NOTES
				// -----------------------------------------------------------------------
				// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)
				// 13 = about same speed as FXAA 3.9 and better than 12
				// 23 = closest to FXAA 3.9 visually and performance wise
				//	_ = the lowest digit is directly related to performance
				// _	= the highest digit is directly related to style
				//
				#define FXAA_QUALITY_PRESET 12
		#endif


		/*============================================================================

															 FXAA QUALITY - PRESETS

		============================================================================*/

		/*============================================================================
												 FXAA QUALITY - MEDIUM DITHER PRESETS
		============================================================================*/
		#if (FXAA_QUALITY_PRESET == 10)
				#define FXAA_QUALITY_PS 3
				#define FXAA_QUALITY_P0 1.5
				#define FXAA_QUALITY_P1 3.0
				#define FXAA_QUALITY_P2 12.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 11)
				#define FXAA_QUALITY_PS 4
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 3.0
				#define FXAA_QUALITY_P3 12.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 12)
				#define FXAA_QUALITY_PS 5
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 4.0
				#define FXAA_QUALITY_P4 12.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 13)
				#define FXAA_QUALITY_PS 6
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 4.0
				#define FXAA_QUALITY_P5 12.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 14)
				#define FXAA_QUALITY_PS 7
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 4.0
				#define FXAA_QUALITY_P6 12.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 15)
				#define FXAA_QUALITY_PS 8
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 4.0
				#define FXAA_QUALITY_P7 12.0
		#endif

		/*============================================================================
												 FXAA QUALITY - LOW DITHER PRESETS
		============================================================================*/
		#if (FXAA_QUALITY_PRESET == 20)
				#define FXAA_QUALITY_PS 3
				#define FXAA_QUALITY_P0 1.5
				#define FXAA_QUALITY_P1 2.0
				#define FXAA_QUALITY_P2 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 21)
				#define FXAA_QUALITY_PS 4
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 22)
				#define FXAA_QUALITY_PS 5
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 23)
				#define FXAA_QUALITY_PS 6
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 24)
				#define FXAA_QUALITY_PS 7
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 3.0
				#define FXAA_QUALITY_P6 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 25)
				#define FXAA_QUALITY_PS 8
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 4.0
				#define FXAA_QUALITY_P7 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 26)
				#define FXAA_QUALITY_PS 9
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 2.0
				#define FXAA_QUALITY_P7 4.0
				#define FXAA_QUALITY_P8 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 27)
				#define FXAA_QUALITY_PS 10
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 2.0
				#define FXAA_QUALITY_P7 2.0
				#define FXAA_QUALITY_P8 4.0
				#define FXAA_QUALITY_P9 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 28)
				#define FXAA_QUALITY_PS 11
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 2.0
				#define FXAA_QUALITY_P7 2.0
				#define FXAA_QUALITY_P8 2.0
				#define FXAA_QUALITY_P9 4.0
				#define FXAA_QUALITY_P10 8.0
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_QUALITY_PRESET == 29)
				#define FXAA_QUALITY_PS 12
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.5
				#define FXAA_QUALITY_P2 2.0
				#define FXAA_QUALITY_P3 2.0
				#define FXAA_QUALITY_P4 2.0
				#define FXAA_QUALITY_P5 2.0
				#define FXAA_QUALITY_P6 2.0
				#define FXAA_QUALITY_P7 2.0
				#define FXAA_QUALITY_P8 2.0
				#define FXAA_QUALITY_P9 2.0
				#define FXAA_QUALITY_P10 4.0
				#define FXAA_QUALITY_P11 8.0
		#endif

		/*============================================================================
												 FXAA QUALITY - EXTREME QUALITY
		============================================================================*/
		#if (FXAA_QUALITY_PRESET == 39)
				#define FXAA_QUALITY_PS 12
				#define FXAA_QUALITY_P0 1.0
				#define FXAA_QUALITY_P1 1.0
				#define FXAA_QUALITY_P2 1.0
				#define FXAA_QUALITY_P3 1.0
				#define FXAA_QUALITY_P4 1.0
				#define FXAA_QUALITY_P5 1.5
				#define FXAA_QUALITY_P6 2.0
				#define FXAA_QUALITY_P7 2.0
				#define FXAA_QUALITY_P8 2.0
				#define FXAA_QUALITY_P9 2.0
				#define FXAA_QUALITY_P10 4.0
				#define FXAA_QUALITY_P11 8.0
		#endif



		/*============================================================================

																		API PORTING

		============================================================================*/
		#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)
				#define FxaaBool bool
				#define FxaaDiscard discard
				#define FxaaFloat float
				#define FxaaFloat2 vec2
				#define FxaaFloat3 vec3
				#define FxaaFloat4 vec4
				#define FxaaHalf float
				#define FxaaHalf2 vec2
				#define FxaaHalf3 vec3
				#define FxaaHalf4 vec4
				#define FxaaInt2 ivec2
				#define FxaaSat(x) clamp(x, 0.0, 1.0)
				#define FxaaTex sampler2D
		#else
				#define FxaaBool bool
				#define FxaaDiscard clip(-1)
				#define FxaaFloat float
				#define FxaaFloat2 float2
				#define FxaaFloat3 float3
				#define FxaaFloat4 float4
				#define FxaaHalf half
				#define FxaaHalf2 half2
				#define FxaaHalf3 half3
				#define FxaaHalf4 half4
				#define FxaaSat(x) saturate(x)
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_GLSL_100 == 1)
			#define FxaaTexTop(t, p) texture2D(t, p, 0.0)
			#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_GLSL_120 == 1)
				// Requires,
				//	#version 120
				// And at least,
				//	#extension GL_EXT_gpu_shader4 : enable
				//	(or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)
				#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)
				#if (FXAA_FAST_PIXEL_OFFSET == 1)
						#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)
				#else
						#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)
				#endif
				#if (FXAA_GATHER4_ALPHA == 1)
						// use #extension GL_ARB_gpu_shader5 : enable
						#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)
						#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)
						#define FxaaTexGreen4(t, p) textureGather(t, p, 1)
						#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)
				#endif
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_GLSL_130 == 1)
				// Requires "#version 130" or better
				#define FxaaTexTop(t, p) textureLod(t, p, 0.0)
				#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)
				#if (FXAA_GATHER4_ALPHA == 1)
						// use #extension GL_ARB_gpu_shader5 : enable
						#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)
						#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)
						#define FxaaTexGreen4(t, p) textureGather(t, p, 1)
						#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)
				#endif
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_HLSL_3 == 1)
				#define FxaaInt2 float2
				#define FxaaTex sampler2D
				#define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))
				#define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_HLSL_4 == 1)
				#define FxaaInt2 int2
				struct FxaaTex { SamplerState smpl; Texture2D tex; };
				#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)
				#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)
		#endif
		/*--------------------------------------------------------------------------*/
		#if (FXAA_HLSL_5 == 1)
				#define FxaaInt2 int2
				struct FxaaTex { SamplerState smpl; Texture2D tex; };
				#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)
				#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)
				#define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)
				#define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)
				#define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)
				#define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)
		#endif


		/*============================================================================
											 GREEN AS LUMA OPTION SUPPORT FUNCTION
		============================================================================*/
		#if (FXAA_GREEN_AS_LUMA == 0)
				FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }
		#else
				FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }
		#endif




		/*============================================================================

																 FXAA3 QUALITY - PC

		============================================================================*/
		#if (FXAA_PC == 1)
		/*--------------------------------------------------------------------------*/
		FxaaFloat4 FxaaPixelShader(
				//
				// Use noperspective interpolation here (turn off perspective interpolation).
				// {xy} = center of pixel
				FxaaFloat2 pos,
				//
				// Used only for FXAA Console, and not used on the 360 version.
				// Use noperspective interpolation here (turn off perspective interpolation).
				// {xy_} = upper left of pixel
				// {_zw} = lower right of pixel
				FxaaFloat4 fxaaConsolePosPos,
				//
				// Input color texture.
				// {rgb_} = color in linear or perceptual color space
				// if (FXAA_GREEN_AS_LUMA == 0)
				//		 {__a} = luma in perceptual color space (not linear)
				FxaaTex tex,
				//
				// Only used on the optimized 360 version of FXAA Console.
				// For everything but 360, just use the same input here as for "tex".
				// For 360, same texture, just alias with a 2nd sampler.
				// This sampler needs to have an exponent bias of -1.
				FxaaTex fxaaConsole360TexExpBiasNegOne,
				//
				// Only used on the optimized 360 version of FXAA Console.
				// For everything but 360, just use the same input here as for "tex".
				// For 360, same texture, just alias with a 3nd sampler.
				// This sampler needs to have an exponent bias of -2.
				FxaaTex fxaaConsole360TexExpBiasNegTwo,
				//
				// Only used on FXAA Quality.
				// This must be from a constant/uniform.
				// {x_} = 1.0/screenWidthInPixels
				// {_y} = 1.0/screenHeightInPixels
				FxaaFloat2 fxaaQualityRcpFrame,
				//
				// Only used on FXAA Console.
				// This must be from a constant/uniform.
				// This effects sub-pixel AA quality and inversely sharpness.
				//	 Where N ranges between,
				//		 N = 0.50 (default)
				//		 N = 0.33 (sharper)
				// {x__} = -N/screenWidthInPixels
				// {_y_} = -N/screenHeightInPixels
				// {_z_} =	N/screenWidthInPixels
				// {__w} =	N/screenHeightInPixels
				FxaaFloat4 fxaaConsoleRcpFrameOpt,
				//
				// Only used on FXAA Console.
				// Not used on 360, but used on PS3 and PC.
				// This must be from a constant/uniform.
				// {x__} = -2.0/screenWidthInPixels
				// {_y_} = -2.0/screenHeightInPixels
				// {_z_} =	2.0/screenWidthInPixels
				// {__w} =	2.0/screenHeightInPixels
				FxaaFloat4 fxaaConsoleRcpFrameOpt2,
				//
				// Only used on FXAA Console.
				// Only used on 360 in place of fxaaConsoleRcpFrameOpt2.
				// This must be from a constant/uniform.
				// {x__} =	8.0/screenWidthInPixels
				// {_y_} =	8.0/screenHeightInPixels
				// {_z_} = -4.0/screenWidthInPixels
				// {__w} = -4.0/screenHeightInPixels
				FxaaFloat4 fxaaConsole360RcpFrameOpt2,
				//
				// Only used on FXAA Quality.
				// This used to be the FXAA_QUALITY_SUBPIX define.
				// It is here now to allow easier tuning.
				// Choose the amount of sub-pixel aliasing removal.
				// This can effect sharpness.
				//	 1.00 - upper limit (softer)
				//	 0.75 - default amount of filtering
				//	 0.50 - lower limit (sharper, less sub-pixel aliasing removal)
				//	 0.25 - almost off
				//	 0.00 - completely off
				FxaaFloat fxaaQualitySubpix,
				//
				// Only used on FXAA Quality.
				// This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.
				// It is here now to allow easier tuning.
				// The minimum amount of local contrast required to apply algorithm.
				//	 0.333 - too little (faster)
				//	 0.250 - low quality
				//	 0.166 - default
				//	 0.125 - high quality
				//	 0.063 - overkill (slower)
				FxaaFloat fxaaQualityEdgeThreshold,
				//
				// Only used on FXAA Quality.
				// This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.
				// It is here now to allow easier tuning.
				// Trims the algorithm from processing darks.
				//	 0.0833 - upper limit (default, the start of visible unfiltered edges)
				//	 0.0625 - high quality (faster)
				//	 0.0312 - visible limit (slower)
				// Special notes when using FXAA_GREEN_AS_LUMA,
				//	 Likely want to set this to zero.
				//	 As colors that are mostly not-green
				//	 will appear very dark in the green channel!
				//	 Tune by looking at mostly non-green content,
				//	 then start at zero and increase until aliasing is a problem.
				FxaaFloat fxaaQualityEdgeThresholdMin,
				//
				// Only used on FXAA Console.
				// This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.
				// It is here now to allow easier tuning.
				// This does not effect PS3, as this needs to be compiled in.
				//	 Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.
				//	 Due to the PS3 being ALU bound,
				//	 there are only three safe values here: 2 and 4 and 8.
				//	 These options use the shaders ability to a free *|/ by 2|4|8.
				// For all other platforms can be a non-power of two.
				//	 8.0 is sharper (default!!!)
				//	 4.0 is softer
				//	 2.0 is really soft (good only for vector graphics inputs)
				FxaaFloat fxaaConsoleEdgeSharpness,
				//
				// Only used on FXAA Console.
				// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.
				// It is here now to allow easier tuning.
				// This does not effect PS3, as this needs to be compiled in.
				//	 Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.
				//	 Due to the PS3 being ALU bound,
				//	 there are only two safe values here: 1/4 and 1/8.
				//	 These options use the shaders ability to a free *|/ by 2|4|8.
				// The console setting has a different mapping than the quality setting.
				// Other platforms can use other values.
				//	 0.125 leaves less aliasing, but is softer (default!!!)
				//	 0.25 leaves more aliasing, and is sharper
				FxaaFloat fxaaConsoleEdgeThreshold,
				//
				// Only used on FXAA Console.
				// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.
				// It is here now to allow easier tuning.
				// Trims the algorithm from processing darks.
				// The console setting has a different mapping than the quality setting.
				// This only applies when FXAA_EARLY_EXIT is 1.
				// This does not apply to PS3,
				// PS3 was simplified to avoid more shader instructions.
				//	 0.06 - faster but more aliasing in darks
				//	 0.05 - default
				//	 0.04 - slower and less aliasing in darks
				// Special notes when using FXAA_GREEN_AS_LUMA,
				//	 Likely want to set this to zero.
				//	 As colors that are mostly not-green
				//	 will appear very dark in the green channel!
				//	 Tune by looking at mostly non-green content,
				//	 then start at zero and increase until aliasing is a problem.
				FxaaFloat fxaaConsoleEdgeThresholdMin,
				//
				// Extra constants for 360 FXAA Console only.
				// Use zeros or anything else for other platforms.
				// These must be in physical constant registers and NOT immediates.
				// Immediates will result in compiler un-optimizing.
				// {xyzw} = float4(1.0, -1.0, 0.25, -0.25)
				FxaaFloat4 fxaaConsole360ConstDir
		) {
		/*--------------------------------------------------------------------------*/
				FxaaFloat2 posM;
				posM.x = pos.x;
				posM.y = pos.y;
				#if (FXAA_GATHER4_ALPHA == 1)
						#if (FXAA_DISCARD == 0)
								FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);
								#if (FXAA_GREEN_AS_LUMA == 0)
										#define lumaM rgbyM.w
								#else
										#define lumaM rgbyM.y
								#endif
						#endif
						#if (FXAA_GREEN_AS_LUMA == 0)
								FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);
								FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));
						#else
								FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);
								FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));
						#endif
						#if (FXAA_DISCARD == 1)
								#define lumaM luma4A.w
						#endif
						#define lumaE luma4A.z
						#define lumaS luma4A.x
						#define lumaSE luma4A.y
						#define lumaNW luma4B.w
						#define lumaN luma4B.z
						#define lumaW luma4B.x
				#else
						FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);
						#if (FXAA_GREEN_AS_LUMA == 0)
								#define lumaM rgbyM.w
						#else
								#define lumaM rgbyM.y
						#endif
						#if (FXAA_GLSL_100 == 1)
							FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));
						#else
							FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));
						#endif
				#endif
		/*--------------------------------------------------------------------------*/
				FxaaFloat maxSM = max(lumaS, lumaM);
				FxaaFloat minSM = min(lumaS, lumaM);
				FxaaFloat maxESM = max(lumaE, maxSM);
				FxaaFloat minESM = min(lumaE, minSM);
				FxaaFloat maxWN = max(lumaN, lumaW);
				FxaaFloat minWN = min(lumaN, lumaW);
				FxaaFloat rangeMax = max(maxWN, maxESM);
				FxaaFloat rangeMin = min(minWN, minESM);
				FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;
				FxaaFloat range = rangeMax - rangeMin;
				FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);
				FxaaBool earlyExit = range < rangeMaxClamped;
		/*--------------------------------------------------------------------------*/
				if(earlyExit)
						#if (FXAA_DISCARD == 1)
								FxaaDiscard;
						#else
								return rgbyM;
						#endif
		/*--------------------------------------------------------------------------*/
				#if (FXAA_GATHER4_ALPHA == 0)
						#if (FXAA_GLSL_100 == 1)
							FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));
						#else
							FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));
							FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));
						#endif
				#else
						FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));
						FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));
				#endif
		/*--------------------------------------------------------------------------*/
				FxaaFloat lumaNS = lumaN + lumaS;
				FxaaFloat lumaWE = lumaW + lumaE;
				FxaaFloat subpixRcpRange = 1.0/range;
				FxaaFloat subpixNSWE = lumaNS + lumaWE;
				FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;
				FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;
		/*--------------------------------------------------------------------------*/
				FxaaFloat lumaNESE = lumaNE + lumaSE;
				FxaaFloat lumaNWNE = lumaNW + lumaNE;
				FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;
				FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;
		/*--------------------------------------------------------------------------*/
				FxaaFloat lumaNWSW = lumaNW + lumaSW;
				FxaaFloat lumaSWSE = lumaSW + lumaSE;
				FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);
				FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);
				FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;
				FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;
				FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;
				FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;
		/*--------------------------------------------------------------------------*/
				FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;
				FxaaFloat lengthSign = fxaaQualityRcpFrame.x;
				FxaaBool horzSpan = edgeHorz >= edgeVert;
				FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;
		/*--------------------------------------------------------------------------*/
				if(!horzSpan) lumaN = lumaW;
				if(!horzSpan) lumaS = lumaE;
				if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;
				FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;
		/*--------------------------------------------------------------------------*/
				FxaaFloat gradientN = lumaN - lumaM;
				FxaaFloat gradientS = lumaS - lumaM;
				FxaaFloat lumaNN = lumaN + lumaM;
				FxaaFloat lumaSS = lumaS + lumaM;
				FxaaBool pairN = abs(gradientN) >= abs(gradientS);
				FxaaFloat gradient = max(abs(gradientN), abs(gradientS));
				if(pairN) lengthSign = -lengthSign;
				FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);
		/*--------------------------------------------------------------------------*/
				FxaaFloat2 posB;
				posB.x = posM.x;
				posB.y = posM.y;
				FxaaFloat2 offNP;
				offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
				offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;
				if(!horzSpan) posB.x += lengthSign * 0.5;
				if( horzSpan) posB.y += lengthSign * 0.5;
		/*--------------------------------------------------------------------------*/
				FxaaFloat2 posN;
				posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;
				posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;
				FxaaFloat2 posP;
				posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;
				posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;
				FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;
				FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));
				FxaaFloat subpixE = subpixC * subpixC;
				FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));
		/*--------------------------------------------------------------------------*/
				if(!pairN) lumaNN = lumaSS;
				FxaaFloat gradientScaled = gradient * 1.0/4.0;
				FxaaFloat lumaMM = lumaM - lumaNN * 0.5;
				FxaaFloat subpixF = subpixD * subpixE;
				FxaaBool lumaMLTZero = lumaMM < 0.0;
		/*--------------------------------------------------------------------------*/
				lumaEndN -= lumaNN * 0.5;
				lumaEndP -= lumaNN * 0.5;
				FxaaBool doneN = abs(lumaEndN) >= gradientScaled;
				FxaaBool doneP = abs(lumaEndP) >= gradientScaled;
				if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;
				if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;
				FxaaBool doneNP = (!doneN) || (!doneP);
				if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;
				if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;
		/*--------------------------------------------------------------------------*/
				if(doneNP) {
						if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
						if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
						if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
						if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
						doneN = abs(lumaEndN) >= gradientScaled;
						doneP = abs(lumaEndP) >= gradientScaled;
						if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;
						if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;
						doneNP = (!doneN) || (!doneP);
						if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;
						if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;
		/*--------------------------------------------------------------------------*/
						#if (FXAA_QUALITY_PS > 3)
						if(doneNP) {
								if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
								if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
								if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
								if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
								doneN = abs(lumaEndN) >= gradientScaled;
								doneP = abs(lumaEndP) >= gradientScaled;
								if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;
								if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;
								doneNP = (!doneN) || (!doneP);
								if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;
								if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;
		/*--------------------------------------------------------------------------*/
								#if (FXAA_QUALITY_PS > 4)
								if(doneNP) {
										if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
										if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
										if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
										if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
										doneN = abs(lumaEndN) >= gradientScaled;
										doneP = abs(lumaEndP) >= gradientScaled;
										if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;
										if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;
										doneNP = (!doneN) || (!doneP);
										if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;
										if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;
		/*--------------------------------------------------------------------------*/
										#if (FXAA_QUALITY_PS > 5)
										if(doneNP) {
												if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
												if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
												if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
												if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
												doneN = abs(lumaEndN) >= gradientScaled;
												doneP = abs(lumaEndP) >= gradientScaled;
												if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;
												if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;
												doneNP = (!doneN) || (!doneP);
												if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;
												if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;
		/*--------------------------------------------------------------------------*/
												#if (FXAA_QUALITY_PS > 6)
												if(doneNP) {
														if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
														if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
														if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
														if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
														doneN = abs(lumaEndN) >= gradientScaled;
														doneP = abs(lumaEndP) >= gradientScaled;
														if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;
														if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;
														doneNP = (!doneN) || (!doneP);
														if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;
														if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;
		/*--------------------------------------------------------------------------*/
														#if (FXAA_QUALITY_PS > 7)
														if(doneNP) {
																if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
																if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
																if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
																if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
																doneN = abs(lumaEndN) >= gradientScaled;
																doneP = abs(lumaEndP) >= gradientScaled;
																if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;
																if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;
																doneNP = (!doneN) || (!doneP);
																if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;
																if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;
		/*--------------------------------------------------------------------------*/
				#if (FXAA_QUALITY_PS > 8)
				if(doneNP) {
						if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
						if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
						if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
						if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
						doneN = abs(lumaEndN) >= gradientScaled;
						doneP = abs(lumaEndP) >= gradientScaled;
						if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;
						if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;
						doneNP = (!doneN) || (!doneP);
						if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;
						if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;
		/*--------------------------------------------------------------------------*/
						#if (FXAA_QUALITY_PS > 9)
						if(doneNP) {
								if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
								if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
								if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
								if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
								doneN = abs(lumaEndN) >= gradientScaled;
								doneP = abs(lumaEndP) >= gradientScaled;
								if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;
								if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;
								doneNP = (!doneN) || (!doneP);
								if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;
								if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;
		/*--------------------------------------------------------------------------*/
								#if (FXAA_QUALITY_PS > 10)
								if(doneNP) {
										if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
										if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
										if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
										if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
										doneN = abs(lumaEndN) >= gradientScaled;
										doneP = abs(lumaEndP) >= gradientScaled;
										if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;
										if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;
										doneNP = (!doneN) || (!doneP);
										if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;
										if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;
		/*--------------------------------------------------------------------------*/
										#if (FXAA_QUALITY_PS > 11)
										if(doneNP) {
												if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
												if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
												if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
												if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
												doneN = abs(lumaEndN) >= gradientScaled;
												doneP = abs(lumaEndP) >= gradientScaled;
												if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;
												if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;
												doneNP = (!doneN) || (!doneP);
												if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;
												if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;
		/*--------------------------------------------------------------------------*/
												#if (FXAA_QUALITY_PS > 12)
												if(doneNP) {
														if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));
														if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));
														if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;
														if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;
														doneN = abs(lumaEndN) >= gradientScaled;
														doneP = abs(lumaEndP) >= gradientScaled;
														if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;
														if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;
														doneNP = (!doneN) || (!doneP);
														if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;
														if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;
		/*--------------------------------------------------------------------------*/
												}
												#endif
		/*--------------------------------------------------------------------------*/
										}
										#endif
		/*--------------------------------------------------------------------------*/
								}
								#endif
		/*--------------------------------------------------------------------------*/
						}
						#endif
		/*--------------------------------------------------------------------------*/
				}
				#endif
		/*--------------------------------------------------------------------------*/
														}
														#endif
		/*--------------------------------------------------------------------------*/
												}
												#endif
		/*--------------------------------------------------------------------------*/
										}
										#endif
		/*--------------------------------------------------------------------------*/
								}
								#endif
		/*--------------------------------------------------------------------------*/
						}
						#endif
		/*--------------------------------------------------------------------------*/
				}
		/*--------------------------------------------------------------------------*/
				FxaaFloat dstN = posM.x - posN.x;
				FxaaFloat dstP = posP.x - posM.x;
				if(!horzSpan) dstN = posM.y - posN.y;
				if(!horzSpan) dstP = posP.y - posM.y;
		/*--------------------------------------------------------------------------*/
				FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;
				FxaaFloat spanLength = (dstP + dstN);
				FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;
				FxaaFloat spanLengthRcp = 1.0/spanLength;
		/*--------------------------------------------------------------------------*/
				FxaaBool directionN = dstN < dstP;
				FxaaFloat dst = min(dstN, dstP);
				FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;
				FxaaFloat subpixG = subpixF * subpixF;
				FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;
				FxaaFloat subpixH = subpixG * fxaaQualitySubpix;
		/*--------------------------------------------------------------------------*/
				FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;
				FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);
				if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;
				if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;
				#if (FXAA_DISCARD == 1)
						return FxaaTexTop(tex, posM);
				#else
						return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);
				#endif
		}
		/*==========================================================================*/
		#endif

		void main() {
			gl_FragColor = FxaaPixelShader(
				vUv,
				vec4(0.0),
				tDiffuse,
				tDiffuse,
				tDiffuse,
				resolution,
				vec4(0.0),
				vec4(0.0),
				vec4(0.0),
				0.75,
				0.166,
				0.0833,
				0.0,
				0.0,
				0.0,
				vec4(0.0)
			);

			// TODO avoid querying texture twice for same texel
			gl_FragColor.a = texture2D(tDiffuse, vUv).a;
		}`},W4={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:4},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:0},width:{value:1},height:{value:1},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:`

		varying vec2 vUV;

		void main() {

			vUV = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

		}`,fragmentShader:`

		#define SQRT2_MINUS_ONE 0.41421356
		#define SQRT2_HALF_MINUS_ONE 0.20710678
		#define PI2 6.28318531
		#define SHAPE_DOT 1
		#define SHAPE_ELLIPSE 2
		#define SHAPE_LINE 3
		#define SHAPE_SQUARE 4
		#define BLENDING_LINEAR 1
		#define BLENDING_MULTIPLY 2
		#define BLENDING_ADD 3
		#define BLENDING_LIGHTER 4
		#define BLENDING_DARKER 5
		uniform sampler2D tDiffuse;
		uniform float radius;
		uniform float rotateR;
		uniform float rotateG;
		uniform float rotateB;
		uniform float scatter;
		uniform float width;
		uniform float height;
		uniform int shape;
		uniform bool disable;
		uniform float blending;
		uniform int blendingMode;
		varying vec2 vUV;
		uniform bool greyscale;
		const int samples = 8;

		float blend( float a, float b, float t ) {

		// linear blend
			return a * ( 1.0 - t ) + b * t;

		}

		float hypot( float x, float y ) {

		// vector magnitude
			return sqrt( x * x + y * y );

		}

		float rand( vec2 seed ){

		// get pseudo-random number
			return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );

		}

		float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {

		// apply shape-specific transforms
			float dist = hypot( coord.x - p.x, coord.y - p.y );
			float rad = channel;

			if ( shape == SHAPE_DOT ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

			} else if ( shape == SHAPE_ELLIPSE ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

				if ( dist != 0.0 ) {
					float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );
					dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;
				}

			} else if ( shape == SHAPE_LINE ) {

				rad = pow( abs( rad ), 1.5) * rad_max;
				float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;
				dist = hypot( normal.x * dot_p, normal.y * dot_p );

			} else if ( shape == SHAPE_SQUARE ) {

				float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;
				float sin_t = abs( sin( theta ) );
				float cos_t = abs( cos( theta ) );
				rad = pow( abs( rad ), 1.4 );
				rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );

			}

			return rad - dist;

		}

		struct Cell {

		// grid sample positions
			vec2 normal;
			vec2 p1;
			vec2 p2;
			vec2 p3;
			vec2 p4;
			float samp2;
			float samp1;
			float samp3;
			float samp4;

		};

		vec4 getSample( vec2 point ) {

		// multi-sampled point
			vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );
			float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;
			float step = PI2 / float( samples );
			float dist = radius * 0.66;

			for ( int i = 0; i < samples; ++i ) {

				float r = base + step * float( i );
				vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );
				tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );

			}

			tex /= float( samples ) + 1.0;
			return tex;

		}

		float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {

		// get colour for given point
			float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;

			if ( channel == 0 ) {

				c.samp1 = getSample( c.p1 ).r;
				c.samp2 = getSample( c.p2 ).r;
				c.samp3 = getSample( c.p3 ).r;
				c.samp4 = getSample( c.p4 ).r;

			} else if (channel == 1) {

				c.samp1 = getSample( c.p1 ).g;
				c.samp2 = getSample( c.p2 ).g;
				c.samp3 = getSample( c.p3 ).g;
				c.samp4 = getSample( c.p4 ).g;

			} else {

				c.samp1 = getSample( c.p1 ).b;
				c.samp3 = getSample( c.p3 ).b;
				c.samp2 = getSample( c.p2 ).b;
				c.samp4 = getSample( c.p4 ).b;

			}

			dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );
			dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );
			dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );
			dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );
			res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;
			res = clamp( res, 0.0, 1.0 );

			return res;

		}

		Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {

		// get containing cell
			Cell c;

		// calc grid
			vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );
			float threshold = step * 0.5;
			float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );
			float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );
			vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );
			float offset_normal = mod( hypot( offset.x, offset.y ), step );
			float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;
			float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;
			float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );
			float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;
			float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;

		// get closest corner
			c.normal = n;
			c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;
			c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;

		// scatter
			if ( scatter != 0.0 ) {

				float off_mag = scatter * threshold * 0.5;
				float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;
				c.p1.x += cos( off_angle ) * off_mag;
				c.p1.y += sin( off_angle ) * off_mag;

			}

		// find corners
			float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );
			float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );
			c.p2.x = c.p1.x - n.x * normal_step;
			c.p2.y = c.p1.y - n.y * normal_step;
			c.p3.x = c.p1.x + n.y * line_step;
			c.p3.y = c.p1.y - n.x * line_step;
			c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;
			c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;

			return c;

		}

		float blendColour( float a, float b, float t ) {

		// blend colours
			if ( blendingMode == BLENDING_LINEAR ) {
				return blend( a, b, 1.0 - t );
			} else if ( blendingMode == BLENDING_ADD ) {
				return blend( a, min( 1.0, a + b ), t );
			} else if ( blendingMode == BLENDING_MULTIPLY ) {
				return blend( a, max( 0.0, a * b ), t );
			} else if ( blendingMode == BLENDING_LIGHTER ) {
				return blend( a, max( a, b ), t );
			} else if ( blendingMode == BLENDING_DARKER ) {
				return blend( a, min( a, b ), t );
			} else {
				return blend( a, b, 1.0 - t );
			}

		}

		void main() {

			if ( ! disable ) {

		// setup
				vec2 p = vec2( vUV.x * width, vUV.y * height );
				vec2 origin = vec2( 0, 0 );
				float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;

		// get channel samples
				Cell cell_r = getReferenceCell( p, origin, rotateR, radius );
				Cell cell_g = getReferenceCell( p, origin, rotateG, radius );
				Cell cell_b = getReferenceCell( p, origin, rotateB, radius );
				float r = getDotColour( cell_r, p, 0, rotateR, aa );
				float g = getDotColour( cell_g, p, 1, rotateG, aa );
				float b = getDotColour( cell_b, p, 2, rotateB, aa );

		// blend with original
				vec4 colour = texture2D( tDiffuse, vUV );
				r = blendColour( r, colour.r, blending );
				g = blendColour( g, colour.g, blending );
				b = blendColour( b, colour.b, blending );

				if ( greyscale ) {
					r = g = b = (r + b + g) / 3.0;
				}

				gl_FragColor = vec4( r, g, b, 1.0 );

			} else {

				gl_FragColor = texture2D( tDiffuse, vUV );

			}

		}`};let GYe=class extends nl{constructor(e,t,n){super(),W4===void 0&&console.error("THREE.HalftonePass requires HalftoneShader"),this.uniforms=Dn.clone(W4.uniforms),this.material=new Si({uniforms:this.uniforms,fragmentShader:W4.fragmentShader,vertexShader:W4.vertexShader}),this.uniforms.width.value=e,this.uniforms.height.value=t;for(const r in n)n.hasOwnProperty(r)&&this.uniforms.hasOwnProperty(r)&&(this.uniforms[r].value=n[r]);this.fsQuad=new bf(this.material)}render(e,t,n){this.material.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.uniforms.width.value=e,this.uniforms.height.value=t}};const n2={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new ae(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},$4={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new ae(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},nS={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new ae(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};let jYe=class extends nl{constructor(e,t){super(),this.edgesRT=new jn(e,t,{depthBuffer:!1,generateMipmaps:!1,minFilter:pi,format:R0}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new jn(e,t,{depthBuffer:!1,generateMipmaps:!1,minFilter:pi,format:wi}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new Zi,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.format=R0,this.areaTexture.minFilter=pi,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const s=new Image;s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new Zi,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=ui,this.searchTexture.minFilter=ui,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,n2===void 0&&console.error("THREE.SMAAPass relies on SMAAShader"),this.uniformsEdges=Dn.clone(n2.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new Si({defines:Object.assign({},n2.defines),uniforms:this.uniformsEdges,vertexShader:n2.vertexShader,fragmentShader:n2.fragmentShader}),this.uniformsWeights=Dn.clone($4.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new Si({defines:Object.assign({},$4.defines),uniforms:this.uniformsWeights,vertexShader:$4.vertexShader,fragmentShader:$4.fragmentShader}),this.uniformsBlend=Dn.clone(nS.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new Si({uniforms:this.uniformsBlend,vertexShader:nS.vertexShader,fragmentShader:nS.fragmentShader}),this.needsSwap=!1,this.fsQuad=new bf(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}};class jV{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[t&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,n){return e[0]*t+e[1]*n}dot3(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r}dot4(e,t,n,r,s){return e[0]*t+e[1]*n+e[2]*r+e[3]*s}noise(e,t){let n,r,s;const o=.5*(Math.sqrt(3)-1),a=(e+t)*o,l=Math.floor(e+a),c=Math.floor(t+a),h=(3-Math.sqrt(3))/6,u=(l+c)*h,d=l-u,f=c-u,p=e-d,m=t-f;let y,g;p>m?(y=1,g=0):(y=0,g=1);const v=p-y+h,x=m-g+h,_=p-1+2*h,w=m-1+2*h,b=l&255,S=c&255,A=this.perm[b+this.perm[S]]%12,E=this.perm[b+y+this.perm[S+g]]%12,T=this.perm[b+1+this.perm[S+1]]%12;let M=.5-p*p-m*m;M<0?n=0:(M*=M,n=M*M*this.dot(this.grad3[A],p,m));let C=.5-v*v-x*x;C<0?r=0:(C*=C,r=C*C*this.dot(this.grad3[E],v,x));let D=.5-_*_-w*w;return D<0?s=0:(D*=D,s=D*D*this.dot(this.grad3[T],_,w)),70*(n+r+s)}noise3d(e,t,n){let r,s,o,a;const l=.3333333333333333,c=(e+t+n)*l,h=Math.floor(e+c),u=Math.floor(t+c),d=Math.floor(n+c),f=1/6,p=(h+u+d)*f,m=h-p,y=u-p,g=d-p,v=e-m,x=t-y,_=n-g;let w,b,S,A,E,T;v>=x?x>=_?(w=1,b=0,S=0,A=1,E=1,T=0):v>=_?(w=1,b=0,S=0,A=1,E=0,T=1):(w=0,b=0,S=1,A=1,E=0,T=1):x<_?(w=0,b=0,S=1,A=0,E=1,T=1):v<_?(w=0,b=1,S=0,A=0,E=1,T=1):(w=0,b=1,S=0,A=1,E=1,T=0);const M=v-w+f,C=x-b+f,D=_-S+f,P=v-A+2*f,I=x-E+2*f,k=_-T+2*f,G=v-1+3*f,U=x-1+3*f,Z=_-1+3*f,$=h&255,W=u&255,X=d&255,j=this.perm[$+this.perm[W+this.perm[X]]]%12,H=this.perm[$+w+this.perm[W+b+this.perm[X+S]]]%12,V=this.perm[$+A+this.perm[W+E+this.perm[X+T]]]%12,B=this.perm[$+1+this.perm[W+1+this.perm[X+1]]]%12;let q=.6-v*v-x*x-_*_;q<0?r=0:(q*=q,r=q*q*this.dot3(this.grad3[j],v,x,_));let K=.6-M*M-C*C-D*D;K<0?s=0:(K*=K,s=K*K*this.dot3(this.grad3[H],M,C,D));let Q=.6-P*P-I*I-k*k;Q<0?o=0:(Q*=Q,o=Q*Q*this.dot3(this.grad3[V],P,I,k));let oe=.6-G*G-U*U-Z*Z;return oe<0?a=0:(oe*=oe,a=oe*oe*this.dot3(this.grad3[B],G,U,Z)),32*(r+s+o+a)}noise4d(e,t,n,r){const s=this.grad4,o=this.simplex,a=this.perm,l=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;let h,u,d,f,p;const m=(e+t+n+r)*l,y=Math.floor(e+m),g=Math.floor(t+m),v=Math.floor(n+m),x=Math.floor(r+m),_=(y+g+v+x)*c,w=y-_,b=g-_,S=v-_,A=x-_,E=e-w,T=t-b,M=n-S,C=r-A,D=E>T?32:0,P=E>M?16:0,I=T>M?8:0,k=E>C?4:0,G=T>C?2:0,U=M>C?1:0,Z=D+P+I+k+G+U,$=o[Z][0]>=3?1:0,W=o[Z][1]>=3?1:0,X=o[Z][2]>=3?1:0,j=o[Z][3]>=3?1:0,H=o[Z][0]>=2?1:0,V=o[Z][1]>=2?1:0,B=o[Z][2]>=2?1:0,q=o[Z][3]>=2?1:0,K=o[Z][0]>=1?1:0,Q=o[Z][1]>=1?1:0,oe=o[Z][2]>=1?1:0,ne=o[Z][3]>=1?1:0,L=E-$+c,z=T-W+c,Y=M-X+c,J=C-j+c,ee=E-H+2*c,F=T-V+2*c,N=M-B+2*c,te=C-q+2*c,le=E-K+3*c,re=T-Q+3*c,ue=M-oe+3*c,pe=C-ne+3*c,xe=E-1+4*c,Se=T-1+4*c,we=M-1+4*c,ce=C-1+4*c,Ee=y&255,ve=g&255,Re=v&255,se=x&255,be=a[Ee+a[ve+a[Re+a[se]]]]%32,Ge=a[Ee+$+a[ve+W+a[Re+X+a[se+j]]]]%32,et=a[Ee+H+a[ve+V+a[Re+B+a[se+q]]]]%32,Mt=a[Ee+K+a[ve+Q+a[Re+oe+a[se+ne]]]]%32,mt=a[Ee+1+a[ve+1+a[Re+1+a[se+1]]]]%32;let yi=.6-E*E-T*T-M*M-C*C;yi<0?h=0:(yi*=yi,h=yi*yi*this.dot4(s[be],E,T,M,C));let Vi=.6-L*L-z*z-Y*Y-J*J;Vi<0?u=0:(Vi*=Vi,u=Vi*Vi*this.dot4(s[Ge],L,z,Y,J));let gn=.6-ee*ee-F*F-N*N-te*te;gn<0?d=0:(gn*=gn,d=gn*gn*this.dot4(s[et],ee,F,N,te));let Jt=.6-le*le-re*re-ue*ue-pe*pe;Jt<0?f=0:(Jt*=Jt,f=Jt*Jt*this.dot4(s[Mt],le,re,ue,pe));let vn=.6-xe*xe-Se*Se-we*we-ce*ce;return vn<0?p=0:(vn*=vn,p=vn*vn*this.dot4(s[mt],xe,Se,we,ce)),27*(h+u+d+f+p)}}const r2={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new ae},cameraProjectionMatrix:{value:new Ce},cameraInverseProjectionMatrix:{value:new Ce},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tNormal;
		uniform sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );

			vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
			vec3 viewNormal = getViewNormal( vUv );

			vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
			vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;

			// compute matrix used to reorient a kernel vector

			vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
			vec3 bitangent = cross( viewNormal, tangent );
			mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

		 float occlusion = 0.0;

		 for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

				vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
				vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

				vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
				samplePointNDC /= samplePointNDC.w;

				vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

				float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
				float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
				float delta = sampleDepth - realDepth;

				if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

					occlusion += 1.0;

				}

			}

			occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

			gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

		}`},q4={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},X4={uniforms:{tDiffuse:{value:null},resolution:{value:new ae}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};let gie=class $h extends nl{constructor(e,t,n,r){super(),this.width=n!==void 0?n:512,this.height=r!==void 0?r:512,this.clear=!0,this.camera=t,this.scene=e,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const s=new HX;s.type=Wv,this.beautyRenderTarget=new jn(this.width,this.height,{minFilter:pi,magFilter:pi,format:wi}),this.normalRenderTarget=new jn(this.width,this.height,{minFilter:ui,magFilter:ui,format:wi,depthTexture:s}),this.ssaoRenderTarget=new jn(this.width,this.height,{minFilter:pi,magFilter:pi,format:wi}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),r2===void 0&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new Si({defines:Object.assign({},r2.defines),uniforms:Dn.clone(r2.uniforms),vertexShader:r2.vertexShader,fragmentShader:r2.fragmentShader,blending:vr}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new bY,this.normalMaterial.blending=vr,this.blurMaterial=new Si({defines:Object.assign({},X4.defines),uniforms:Dn.clone(X4.uniforms),vertexShader:X4.vertexShader,fragmentShader:X4.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Si({defines:Object.assign({},q4.defines),uniforms:Dn.clone(q4.uniforms),vertexShader:q4.vertexShader,fragmentShader:q4.fragmentShader,blending:vr}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Si({uniforms:Dn.clone(Rd.uniforms),vertexShader:Rd.vertexShader,fragmentShader:Rd.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:uX,blendDst:AA,blendEquation:Zc,blendSrcAlpha:cX,blendDstAlpha:AA,blendEquationAlpha:Zc}),this.fsQuad=new bf(null),this.originalClearColor=new Pe}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,t){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case $h.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=vr,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case $h.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=vr,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case $h.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=vr,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case $h.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case $h.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=vr,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case $h.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=vr,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=oX,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(e,t,n,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderOverride(e,t,n,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,s=t.clearAlpha||s,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}setSize(e,t){this.width=e,this.height=t,this.beautyRenderTarget.setSize(e,t),this.ssaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.ssaoMaterial.uniforms.resolution.value.set(e,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t)}generateSampleKernel(){const e=this.kernelSize,t=this.kernel;for(let n=0;n<e;n++){const r=new R;r.x=Math.random()*2-1,r.y=Math.random()*2-1,r.z=Math.random(),r.normalize();let s=n/e;s=hi.lerp(.1,1,s*s),r.multiplyScalar(s),t.push(r)}}generateRandomKernelRotations(){jV===void 0&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const n=new jV,r=4*4,s=new Float32Array(r*4);for(let o=0;o<r;o++){const a=o*4,l=Math.random()*2-1,c=Math.random()*2-1,h=0,u=n.noise3d(l,c,h);s[a]=u,s[a+1]=u,s[a+2]=u,s[a+3]=1}this.noiseTexture=new ud(s,4,4,wi,Oo),this.noiseTexture.wrapS=j0,this.noiseTexture.wrapT=j0}overrideVisibility(){const e=this.scene,t=this._visibilityCache;e.traverse(function(n){t.set(n,n.visible),(n.isPoints||n.isLine)&&(n.visible=!1)})}restoreVisibility(){const e=this.scene,t=this._visibilityCache;e.traverse(function(n){const r=t.get(n);n.visible=r}),t.clear()}};gie.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5};const HV={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Pe(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};let RL=class VM extends nl{constructor(e,t,n,r){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=r,this.resolution=e!==void 0?new ae(e.x,e.y):new ae(256,256),this.clearColor=new Pe(0,0,0);const s={minFilter:pi,magFilter:pi,format:wi};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new jn(o,a,s),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const f=new jn(o,a,s);f.texture.name="UnrealBloomPass.h"+d,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const p=new jn(o,a,s);p.texture.name="UnrealBloomPass.v"+d,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),o=Math.round(o/2),a=Math.round(a/2)}HV===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const l=HV;this.highPassUniforms=Dn.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Si({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[d])),this.separableBlurMaterials[d].uniforms.texSize.value=new ae(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,Rd===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const u=Rd;this.copyUniforms=Dn.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Si({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:SA,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Pe,this.oldClearAlpha=1,this.basic=new os,this.fsQuad=new bf(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,r),this.renderTargetsVertical[s].setSize(n,r),this.separableBlurMaterials[s].uniforms.texSize.value=new ae(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=VM.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=VM.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new Si({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new ae(.5,.5)},direction:{value:new ae(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Si({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform sampler2D dirtTexture;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};RL.BlurDirectionX=new ae(1,0);RL.BlurDirectionY=new ae(0,1);function M3(i,e,t){e instanceof Object&&Object.entries(e).forEach(([n,r])=>{t?t(i,n,r):i[n]=r})}function hh(i,e,t,n=!0,r){n&&M3(t,i[e],r);const s=_G(i,e);return Zt(s,o=>{M3(t,o,r)})}function HYe(i,e,t=!0,n){t&&M3(e,i,n);const r=Ul(i);return Zt(r,s=>{M3(e,s,n)},{deep:!0})}function E3(i,e){e instanceof Object&&Object.entries(e).forEach(([t,n])=>{i[t]=n})}function WYe(i,e,t){e.forEach(n=>{lr(i,n,t,n)})}function lr(i,e,t,n){const r=n||e,s=_G(i,e);s.value instanceof Object?(E3(t[r],s.value),Zt(s,o=>{E3(t[r],o)},{deep:!0})):(s.value!==void 0&&(t[r]=i[e]),Zt(s,o=>{t[r]=o}))}function F7(i,e=[]){const t={};return Object.entries(i).forEach(([n,r])=>{(!e||!e.includes(n))&&(t[n]=r)}),t}function $Ye(i,e,t){return t=t<0?0:t,t=t>1?1:t,i+(e-i)*t}function qYe(i,e,t){return i<e?e:i>t?t:i}const XYe="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d",YYe="0404E8_0404B5_0404CB_3333FC";function vie(i=YYe,e=1024){const t=`${i}${ZYe(e)}.png`;return`${XYe}/${e}/${t}`}function ZYe(i){switch(i){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}function QYe(i){const{camera:e,resetPosition:t=new R(0,0,0)}=i,n=new NY,r=t.clone(),s=new va(new R(0,0,1),0);return{position:r,updatePosition:l=>{n.setFromCamera(l,e),e.getWorldDirection(s.normal),n.ray.intersectPlane(s,r)},intersect:(l,c,h=!1)=>(n.setFromCamera(l,e),n.intersectObjects(c,h))}}function yie(i){const{camera:e,domElement:t,intersectObjects:n,intersectRecursive:r=!1,touch:s=!0,resetOnEnd:o=!1,onEnter:a=()=>{},onMove:l=()=>{},onLeave:c=()=>{},onClick:h=()=>{},onIntersectEnter:u=()=>{},onIntersectOver:d=()=>{},onIntersectMove:f=()=>{},onIntersectLeave:p=()=>{},onIntersectClick:m=()=>{}}=i,y=new ae(0,0),g=new ae(0,0),v=QYe({camera:e}),x=v.position,_={position:y,positionN:g,positionV3:x,intersectObjects:n,listeners:!1,addListeners:P,removeListeners:I,intersect:S};return _;function w(){y.set(0,0),g.set(0,0),x.set(0,0,0)}function b(k){let G,U;k.touches&&k.touches.length>0?(G=k.touches[0].clientX,U=k.touches[0].clientY):(G=k.clientX,U=k.clientY);const Z=t.getBoundingClientRect();y.x=G-Z.left,y.y=U-Z.top,g.x=y.x/Z.width*2-1,g.y=-(y.y/Z.height)*2+1,v.updatePosition(g)}function S(){const k=D();if(k.length){const G=v.intersect(g,k,r),U=[...k],Z=[];G.forEach($=>{var W,X,j;const{object:H}=$,V=C(H);if(H instanceof C6){if(Z.indexOf(H)!==-1)return;Z.push(H)}if(!H.userData.over){H.userData.over=!0;const q={type:"pointerover",over:!0,component:V,intersect:$},K={...q,type:"pointerenter"};d(q),u(K),(W=V==null?void 0:V.onPointerOver)==null||W.call(V,q),(X=V==null?void 0:V.onPointerEnter)==null||X.call(V,K)}const B={type:"pointermove",component:V,intersect:$};f(B),(j=V==null?void 0:V.onPointerMove)==null||j.call(V,B),U.splice(U.indexOf(H),1)}),U.forEach($=>{var W,X;const j=C($);if($.userData.over){$.userData.over=!1;const H={type:"pointerover",over:!1,component:j},V={...H,type:"pointerleave"};d(H),p(V),(W=j==null?void 0:j.onPointerOver)==null||W.call(j,H),(X=j==null?void 0:j.onPointerLeave)==null||X.call(j,V)}})}}function A(k){b(k),a({type:"pointerenter",position:y,positionN:g,positionV3:x})}function E(k){b(k),l({type:"pointermove",position:y,positionN:g,positionV3:x}),S()}function T(k){b(k);const G=D();if(G.length){const U=v.intersect(g,G,r),Z=[];U.forEach($=>{var W;const{object:X}=$,j=C(X);if(X instanceof C6){if(Z.indexOf(X)!==-1)return;Z.push(X)}const H={type:"click",component:j,intersect:$};m(H),(W=j==null?void 0:j.onClick)==null||W.call(j,H)})}h({type:"click",position:y,positionN:g,positionV3:x})}function M(){o&&w(),c({type:"pointerleave"})}function C(k){if(k.userData.component)return k.userData.component;let G=k.parent;for(;G;){if(G.userData.component)return G.userData.component;G=G.parent}}function D(){return typeof n=="function"?n():n}function P(){t.addEventListener("mouseenter",A),t.addEventListener("mousemove",E),t.addEventListener("mouseleave",M),t.addEventListener("click",T),s&&(t.addEventListener("touchstart",A),t.addEventListener("touchmove",E),t.addEventListener("touchend",M)),_.listeners=!0}function I(){t.removeEventListener("mouseenter",A),t.removeEventListener("mousemove",E),t.removeEventListener("mouseleave",M),t.removeEventListener("click",T),t.removeEventListener("touchstart",A),t.removeEventListener("touchmove",E),t.removeEventListener("touchend",M),_.listeners=!1}}function KYe(i){const e={antialias:!0,alpha:!1,autoClear:!0,orbitCtrl:!1,pointer:!1,resize:!1,width:300,height:150};i&&Object.entries(i).forEach(([x,_])=>{e[x]=_});const t={width:1,height:1,wWidth:1,wHeight:1,ratio:1},n=[],r=[],s=a(),o={config:e,renderer:s,size:t,init:l,dispose:m,render:u,renderC:d,setSize:g,addIntersectObject:f,removeIntersectObject:p};return o;function a(){const x=new mi({canvas:e.canvas,antialias:e.antialias,alpha:e.alpha,...e.params});return x.autoClear=e.autoClear,x}function l(){if(!o.scene)return console.error("Missing Scene"),!1;if(!o.camera)return console.error("Missing Camera"),!1;if(e.resize?(y(),window.addEventListener("resize",y)):e.width&&e.height&&g(e.width,e.height),c(),e.orbitCtrl){const x=new WNe(o.camera,o.renderer.domElement);e.orbitCtrl instanceof Object&&Object.entries(e.orbitCtrl).forEach(([_,w])=>{x[_]=w}),h(()=>{x.update()}),o.cameraCtrl=x}return!0}function c(){let x={camera:o.camera,domElement:o.renderer.domElement,intersectObjects:r};e.pointer&&e.pointer instanceof Object&&(x={...x,...e.pointer});const _=o.pointer=yie(x);(e.pointer||r.length)&&(_.addListeners(),x.intersectMode==="frame"&&h(_.intersect))}function h(x){n.push(x)}function u(){n.forEach(x=>x()),o.renderer.render(o.scene,o.camera)}function d(){n.forEach(x=>x()),o.composer.render()}function f(x){r.indexOf(x)===-1&&r.push(x),o.pointer&&!o.pointer.listeners&&o.pointer.addListeners()}function p(x){const _=r.indexOf(x);_!==-1&&r.splice(_,1),o.pointer&&!e.pointer&&r.length===0&&o.pointer.removeListeners()}function m(){window.removeEventListener("resize",y),o.pointer&&o.pointer.removeListeners(),o.cameraCtrl&&o.cameraCtrl.dispose(),o.renderer&&o.renderer.dispose()}function y(){var x;if(e.resize==="window")g(window.innerWidth,window.innerHeight);else{const _=o.renderer.domElement.parentNode;_&&g(_.clientWidth,_.clientHeight)}(x=e.onResize)==null||x.call(e,t)}function g(x,_){t.width=x,t.height=_,t.ratio=x/_,o.renderer.setSize(x,_,!1);const w=o.camera;if(w.type==="PerspectiveCamera"){const b=w;b.aspect=t.ratio,b.updateProjectionMatrix()}if(w.type==="OrthographicCamera"){const b=w;t.wWidth=b.right-b.left,t.wHeight=b.top-b.bottom}else{const b=v();t.wWidth=b[0],t.wHeight=b[1]}}function v(){const x=o.camera,_=x.fov*Math.PI/180,w=2*Math.tan(_/2)*Math.abs(x.position.z);return[w*x.aspect,w]}}const rl=Symbol("Renderer");var JYe=st({name:"Renderer",props:{params:{type:Object,default:()=>({})},antialias:Boolean,alpha:Boolean,autoClear:{type:Boolean,default:!0},orbitCtrl:{type:[Boolean,Object],default:!1},pointer:{type:[Boolean,Object],default:!1},resize:{type:[Boolean,String],default:!1},shadow:Boolean,width:String,height:String,pixelRatio:Number,xr:Boolean,props:{type:Object,default:()=>({})},onReady:Function},inheritAttrs:!1,setup(i,{attrs:e}){const t=[],n=[],r=[],s=[],o=[],a=document.createElement("canvas");Object.entries(e).forEach(([u,d])=>{const f=u.match(/^on([A-Z][a-zA-Z]*)$/);f?a.addEventListener(f[1].toLowerCase(),d):a.setAttribute(u,d)});const l={canvas:a,params:i.params,antialias:i.antialias,alpha:i.alpha,autoClear:i.autoClear,orbitCtrl:i.orbitCtrl,pointer:i.pointer,resize:i.resize};i.width&&(l.width=parseInt(i.width)),i.height&&(l.height=parseInt(i.height));const c=KYe(l);hh(i,"props",c.renderer),DG(()=>{i.pixelRatio&&c.renderer.setPixelRatio(i.pixelRatio)});const h=()=>{};return{canvas:a,three:c,renderer:c.renderer,size:c.size,renderFn:h,raf:!0,initCallbacks:t,mountedCallbacks:n,beforeRenderCallbacks:r,afterRenderCallbacks:s,resizeCallbacks:o}},computed:{camera:{get:function(){return this.three.camera},set:function(i){this.three.camera=i}},scene:{get:function(){return this.three.scene},set:function(i){this.three.scene=i}},composer:{get:function(){return this.three.composer},set:function(i){this.three.composer=i}}},provide(){return{[rl]:this}},mounted(){var i;this.$el.parentNode.insertBefore(this.canvas,this.$el),this.three.init()&&(this.three.pointer&&(this.$pointer=this.three.pointer),this.three.config.onResize=e=>{this.resizeCallbacks.forEach(t=>t({type:"resize",renderer:this,size:e}))},this.shadow&&(this.renderer.shadowMap.enabled=!0),this.renderFn=this.three.composer?this.three.renderC:this.three.render,this.initCallbacks.forEach(e=>e({type:"init",renderer:this})),(i=this.onReady)==null||i.call(this,this),this.xr?(this.renderer.xr.enabled=!0,this.renderer.setAnimationLoop(this.render)):requestAnimationFrame(this.renderLoop)),this.mountedCallbacks.forEach(e=>e({type:"mounted",renderer:this}))},beforeUnmount(){this.canvas.remove(),this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[],this.raf=!1,this.three.dispose()},methods:{onInit(i){this.addListener("init",i)},onMounted(i){this.addListener("mounted",i)},onBeforeRender(i){this.addListener("beforerender",i)},offBeforeRender(i){this.removeListener("beforerender",i)},onAfterRender(i){this.addListener("afterrender",i)},offAfterRender(i){this.removeListener("afterrender",i)},onResize(i){this.addListener("resize",i)},offResize(i){this.removeListener("resize",i)},addListener(i,e){this.getCallbacks(i).push(e)},removeListener(i,e){const t=this.getCallbacks(i),n=t.indexOf(e);n!==-1&&t.splice(n,1)},getCallbacks(i){return i==="init"?this.initCallbacks:i==="mounted"?this.mountedCallbacks:i==="beforerender"?this.beforeRenderCallbacks:i==="afterrender"?this.afterRenderCallbacks:this.resizeCallbacks},render(i){this.beforeRenderCallbacks.forEach(e=>e({type:"beforerender",renderer:this,time:i})),this.renderFn({renderer:this,time:i}),this.afterRenderCallbacks.forEach(e=>e({type:"afterrender",renderer:this,time:i}))},renderLoop(i){this.raf&&requestAnimationFrame(this.renderLoop),this.render(i)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Renderer"}),xie=st({props:{props:{type:Object,default:()=>({})}},render(){return this.$slots.default?this.$slots.default():[]}});function H8(i,e,t,n=!0){i[e]=t,n&&i.updateProjectionMatrix()}var eZe=st({extends:xie,name:"OrthographicCamera",props:{left:{type:Number,default:-1},right:{type:Number,default:1},top:{type:Number,default:1},bottom:{type:Number,default:-1},near:{type:Number,default:.1},far:{type:Number,default:2e3},zoom:{type:Number,default:1},position:{type:Object,default:()=>({x:0,y:0,z:0})}},setup(i){const e=zr(rl);if(!e){console.error("Renderer not found");return}const t=new H0(i.left,i.right,i.top,i.bottom,i.near,i.far);return e.camera=t,lr(i,"position",t),hh(i,"props",t,!0,H8),["left","right","top","bottom","near","far","zoom"].forEach(n=>{Zt(()=>i[n],r=>{H8(t,n,r)})}),{renderer:e,camera:t}},__hmrId:"OrthographicCamera"}),WV=st({extends:xie,name:"PerspectiveCamera",props:{aspect:{type:Number,default:1},far:{type:Number,default:2e3},fov:{type:Number,default:50},near:{type:Number,default:.1},position:{type:Object,default:()=>({x:0,y:0,z:0})},lookAt:{type:Object,default:null}},setup(i){var e;const t=zr(rl);if(!t){console.error("Renderer not found");return}const n=new or(i.fov,i.aspect,i.near,i.far);return t.camera=n,lr(i,"position",n),i.lookAt&&n.lookAt((e=i.lookAt.x)!=null?e:0,i.lookAt.y,i.lookAt.z),Zt(()=>i.lookAt,r=>{var s;n.lookAt((s=r.x)!=null?s:0,r.y,r.z)},{deep:!0}),hh(i,"props",n,!0,H8),["aspect","far","fov","near"].forEach(r=>{Zt(()=>i[r],s=>{H8(n,r,s)})}),{renderer:t,camera:n}},__hmrId:"PerspectiveCamera"});const NL=Symbol("Scene");var tZe=st({name:"Scene",props:{background:[String,Number,Object]},setup(i){const e=zr(rl),t=new Xx;if(!e){console.error("Renderer not found");return}e.scene=t,D2(NL,t);const n=o=>{o&&(typeof o=="string"||typeof o=="number"?t.background instanceof Pe?t.background.set(o):t.background=new Pe(o):o instanceof Zi&&(t.background=o))};return n(i.background),Zt(()=>i.background,n),{scene:t,add:o=>{t.add(o)},remove:o=>{t.remove(o)}}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Scene"});const iZe={onPointerEnter:Function,onPointerOver:Function,onPointerMove:Function,onPointerLeave:Function,onPointerDown:Function,onPointerUp:Function,onClick:Function};var dh=st({name:"Object3D",inject:{renderer:rl,scene:NL},emits:["created","ready"],props:{position:{type:Object,default:()=>({x:0,y:0,z:0})},rotation:{type:Object,default:()=>({x:0,y:0,z:0})},scale:{type:Object,default:()=>({x:1,y:1,z:1,order:"XYZ"})},lookAt:{type:Object,default:null},userData:{type:Object,default:()=>({})},visible:{type:Boolean,default:!0},props:{type:Object,default:()=>({})},disableAdd:{type:Boolean,default:!1},disableRemove:{type:Boolean,default:!1},...iZe},setup(){return{}},created(){this.renderer||console.error("Missing parent Renderer"),this.scene||console.error("Missing parent Scene")},unmounted(){this.disableRemove||this.removeFromParent(),this.o3d&&this.renderer&&this.renderer.three.removeIntersectObject(this.o3d)},methods:{initObject3D(i){var e;this.o3d=i,i.userData.component=this,(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer&&this.renderer.three.addIntersectObject(i),lr(this,"position",i),lr(this,"rotation",i),lr(this,"scale",i),lr(this,"userData",i.userData),lr(this,"visible",i),hh(this,"props",i),this.$emit("created",i),this.lookAt&&i.lookAt((e=this.lookAt.x)!=null?e:0,this.lookAt.y,this.lookAt.z),Zt(()=>this.lookAt,t=>{var n;i.lookAt((n=t.x)!=null?n:0,t.y,t.z)},{deep:!0}),this.parent=this.getParent(),this.disableAdd||(this.addToParent()?this.$emit("ready",this):console.error("Missing parent (Scene, Group...)"))},getParent(){let i=this.$parent;if(!i){const e=YG();e&&e.parent&&(i=e.parent.ctx)}for(;i;){if(i.add)return i;i=i.$parent}},addToParent(i){const e=i||this.o3d;return this.parent?(this.parent.add(e),!0):!1},removeFromParent(i){const e=i||this.o3d;return this.parent?(this.parent.remove(e),!0):!1},add(i){var e;(e=this.o3d)==null||e.add(i)},remove(i){var e;(e=this.o3d)==null||e.remove(i)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Object3D"}),nZe=st({name:"Group",extends:dh,setup(){return{group:new Js}},created(){this.initObject3D(this.group)},__hmrId:"Group"});const s2=()=>{};var rZe=st({name:"Raycaster",props:{onPointerEnter:{type:Function,default:s2},onPointerOver:{type:Function,default:s2},onPointerMove:{type:Function,default:s2},onPointerLeave:{type:Function,default:s2},onClick:{type:Function,default:s2},intersectMode:{type:String,default:"move"},intersectRecursive:{type:Boolean,default:!1}},setup(){return{renderer:zr(rl)}},mounted(){if(!this.renderer){console.error("Renderer not found");return}const i=this.renderer;this.renderer.onMounted(()=>{i.camera&&(this.pointer=yie({camera:i.camera,domElement:i.canvas,intersectObjects:()=>i.scene?i.scene.children:[],intersectRecursive:this.intersectRecursive,onIntersectEnter:this.onPointerEnter,onIntersectOver:this.onPointerOver,onIntersectMove:this.onPointerMove,onIntersectLeave:this.onPointerLeave,onIntersectClick:this.onClick}),this.pointer.addListeners(),this.intersectMode==="frame"&&i.onBeforeRender(this.pointer.intersect))})},unmounted(){var i;this.pointer&&(this.pointer.removeListeners(),(i=this.renderer)==null||i.offBeforeRender(this.pointer.intersect))},render(){return[]},__hmrId:"Raycaster"}),sZe=st({extends:dh,props:{cubeRTSize:{type:Number,default:256},cubeCameraNear:{type:Number,default:.1},cubeCameraFar:{type:Number,default:2e3},autoUpdate:Boolean,hideMeshes:{type:Array,default:()=>[]}},setup(i){const e=zr(rl);if(!e||!e.scene)return console.error("Missing Renderer / Scene"),{};const t=e.renderer,n=e.scene,r=new HC(i.cubeRTSize,{format:R0,generateMipmaps:!0,minFilter:sf}),s=new Hx(i.cubeCameraNear,i.cubeCameraFar,r),o=()=>{i.hideMeshes.forEach(a=>{a.visible=!1}),s.update(t,n),i.hideMeshes.forEach(a=>{a.visible=!0})};return i.autoUpdate?(e.onBeforeRender(o),sE(()=>{e.offBeforeRender(o)})):e.onMounted(o),{cubeRT:r,cubeCamera:s,updateRT:o}},created(){this.cubeCamera&&this.initObject3D(this.cubeCamera)},render(){return[]},__hmrId:"CubeCamera"});const by=Symbol("Mesh"),eg=st({name:"Mesh",extends:dh,props:{castShadow:Boolean,receiveShadow:Boolean},setup(){return{}},provide(){return{[by]:this}},mounted(){!this.mesh&&!this.loading&&this.initMesh()},methods:{initMesh(){const i=new Cn(this.geometry,this.material);lr(this,"castShadow",i),lr(this,"receiveShadow",i),this.mesh=i,this.initObject3D(i)},createGeometry(){},addGeometryWatchers(i){Object.keys(i).forEach(e=>{Zt(()=>this[e],()=>{this.refreshGeometry()})})},setGeometry(i){this.geometry=i,this.mesh&&(this.mesh.geometry=i)},setMaterial(i){this.material=i,this.mesh&&(this.mesh.material=i)},refreshGeometry(){const i=this.geometry;this.createGeometry(),this.mesh&&this.geometry&&(this.mesh.geometry=this.geometry),i==null||i.dispose()}},unmounted(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose()},__hmrId:"Mesh"});function fs(i,e,t){return st({name:i,extends:eg,props:e,created(){this.createGeometry(),this.addGeometryWatchers(e)},methods:{createGeometry(){this.geometry=t(this)}}})}const FL=st({emits:["created"],props:{rotateX:Number,rotateY:Number,rotateZ:Number,attributes:{type:Array,default:()=>[]}},inject:{mesh:by},setup(){return{}},created(){if(!this.mesh){console.error("Missing parent Mesh");return}this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh.setGeometry(this.geometry),Object.keys(this.$props).forEach(i=>{Zt(()=>this[i],this.refreshGeometry)})},unmounted(){var i;(i=this.geometry)==null||i.dispose()},methods:{createGeometry(){const i={},e=new ze;this.attributes.forEach(t=>{if(t.name&&t.itemSize&&t.array){const n=i[t.name]=new at(t.array,t.itemSize,t.normalized);e.setAttribute(t.name,n)}}),e.computeBoundingBox(),e.userData.component=this,this.geometry=e,this.$emit("created",e)},rotateGeometry(){this.geometry&&(this.rotateX&&this.geometry.rotateX(this.rotateX),this.rotateY&&this.geometry.rotateY(this.rotateY),this.rotateZ&&this.geometry.rotateZ(this.rotateZ))},refreshGeometry(){const i=this.geometry;this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh&&this.mesh.setGeometry(this.geometry),i==null||i.dispose()}},render(){return[]}});function Mr(i,e,t){return st({name:i,extends:FL,props:e,methods:{createGeometry(){this.geometry=t(this),this.geometry.userData.component=this,this.$emit("created",this.geometry)}}})}const _ie={size:Number,width:{type:Number,default:1},height:{type:Number,default:1},depth:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},depthSegments:{type:Number,default:1}};function bie(i){return i.size?new Va(i.size,i.size,i.size,i.widthSegments,i.heightSegments,i.depthSegments):new Va(i.width,i.height,i.depth,i.widthSegments,i.heightSegments,i.depthSegments)}var oZe=Mr("BoxGeometry",_ie,bie);const wie={radius:{type:Number,default:1},segments:{type:Number,default:8},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Sie(i){return new a5e(i.radius,i.segments,i.thetaStart,i.thetaLength)}var aZe=Mr("CircleGeometry",wie,Sie);const Aie={radius:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Tie(i){return new qX(i.radius,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength)}var lZe=Mr("ConeGeometry",Aie,Tie);const Mie={radiusTop:{type:Number,default:1},radiusBottom:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Eie(i){return new KC(i.radiusTop,i.radiusBottom,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength)}var cZe=Mr("CylinderGeometry",Mie,Eie);const Cie={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Die(i){return new ZX(i.radius,i.detail)}var uZe=Mr("DodecahedronGeometry",Cie,Die);const hZe={shapes:{type:[Object,Array]},options:{type:Object}};function dZe(i){return new bm(i.shapes,i.options)}var fZe=Mr("ExtrudeGeometry",hZe,dZe);const Pie={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Lie(i){return new sY(i.radius,i.detail)}var pZe=Mr("IcosahedronGeometry",Pie,Lie);const Iie={points:Array,segments:{type:Number,default:12},phiStart:{type:Number,default:0},phiLength:{type:Number,default:Math.PI*2}};function Oie(i){return new aY(i.points,i.segments,i.phiStart,i.phiLength)}var mZe=Mr("LatheGeometry",Iie,Oie);const Rie={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Nie(i){return new R5e(i.radius,i.detail)}var gZe=Mr("OctahedronGeometry",Rie,Nie);const Fie={width:{type:Number,default:1},height:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1}};function zie(i){return new iy(i.width,i.height,i.widthSegments,i.heightSegments)}var vZe=Mr("PlaneGeometry",Fie,zie);const kie={vertices:Array,indices:Array,radius:{type:Number,default:1},detail:{type:Number,default:0}};function Bie(i){return new ny(i.vertices,i.indices,i.radius,i.detail)}var yZe=Mr("PolyhedronGeometry",kie,Bie);const Uie={innerRadius:{type:Number,default:.5},outerRadius:{type:Number,default:1},thetaSegments:{type:Number,default:8},phiSegments:{type:Number,default:1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Vie(i){return new N5e(i.innerRadius,i.outerRadius,i.thetaSegments,i.phiSegments,i.thetaStart,i.thetaLength)}var xZe=Mr("RingGeometry",Uie,Vie);const Gie={radius:{type:Number,default:1},widthSegments:{type:Number,default:12},heightSegments:{type:Number,default:12},phiStart:{type:Number,default:0},phiLength:{type:Number,default:Math.PI*2},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI}};function jie(i){return new iD(i.radius,i.widthSegments,i.heightSegments,i.phiStart,i.phiLength,i.thetaStart,i.thetaLength)}var _Ze=Mr("SphereGeometry",Gie,jie);const bZe={shapes:{type:[Object,Array]},curveSegments:{type:Number}};function wZe(i){return new hY(i.shapes,i.curveSegments)}var SZe=Mr("ShapeGeometry",bZe,wZe);const Hie={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Wie(i){return new z5e(i.radius,i.detail)}var AZe=Mr("TetrahedronGeometry",Hie,Wie);const $ie={radius:{type:Number,default:1},tube:{type:Number,default:.4},radialSegments:{type:Number,default:8},tubularSegments:{type:Number,default:6},arc:{type:Number,default:Math.PI*2}};function qie(i){return new k5e(i.radius,i.tube,i.radialSegments,i.tubularSegments,i.arc)}var TZe=Mr("TorusGeometry",$ie,qie);const Xie={radius:{type:Number,default:1},tube:{type:Number,default:.4},tubularSegments:{type:Number,default:64},radialSegments:{type:Number,default:8},p:{type:Number,default:2},q:{type:Number,default:3}};function Yie(i){return new gY(i.radius,i.tube,i.tubularSegments,i.radialSegments,i.p,i.q)}var MZe=Mr("TorusKnotGeometry",Xie,Yie);const GM={points:Array,path:zs,tubularSegments:{type:Number,default:64},radius:{type:Number,default:1},radialSegments:{type:Number,default:8},closed:{type:Boolean,default:!1}};function Zie(i){let e;return i.points?e=new Kx(i.points):i.path?e=i.path:console.error("Missing path curve or points."),new B5e(e,i.tubularSegments,i.radius,i.radiusSegments,i.closed)}var EZe=st({extends:FL,props:GM,methods:{createGeometry(){this.geometry=Zie(this)},updatePoints(i){Qie(this.geometry,i)}}});function Qie(i,e){const t=new Kx(e),{radialSegments:n,radius:r,tubularSegments:s,closed:o}=i.parameters,a=t.computeFrenetFrames(s,o);i.tangents=a.tangents,i.normals=a.normals,i.binormals=a.binormals,i.parameters.path=t;const l=i.getAttribute("position"),c=i.getAttribute("normal"),h=new R,u=new R;for(let f=0;f<s;f++)d(f);d(s),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0;function d(f){t.getPointAt(f/s,u);const p=a.normals[f],m=a.binormals[f];for(let y=0;y<=n;y++){const g=y/n*Math.PI*2,v=Math.sin(g),x=-Math.cos(g);h.x=x*p.x+v*m.x,h.y=x*p.y+v*m.y,h.z=x*p.z+v*m.z,h.normalize();const _=f*(n+1)+y;c.setXYZ(_,h.x,h.y,h.z),l.setXYZ(_,u.x+r*h.x,u.y+r*h.y,u.z+r*h.z)}}}var tg=st({extends:dh,name:"Light",props:{color:{type:String,default:"#ffffff"},intensity:{type:Number,default:1},castShadow:{type:Boolean,default:!1},shadowMapSize:{type:Object,default:()=>({x:512,y:512})},shadowCamera:{type:Object,default:()=>({})}},setup(){return{}},unmounted(){(this.light instanceof jd||this.light instanceof Hd)&&this.removeFromParent(this.light.target)},methods:{initLight(i){this.light=i,i.shadow&&(i.castShadow=this.castShadow,E3(i.shadow.mapSize,this.shadowMapSize),E3(i.shadow.camera,this.shadowCamera)),["color","intensity","castShadow"].forEach(e=>{Zt(()=>this[e],t=>{e==="color"?i.color.set(t):i[e]=t})}),this.initObject3D(i),(i instanceof jd||i instanceof Hd)&&(lr(this,"target",i.target,"position"),this.addToParent(i.target))}},__hmrId:"Light"}),CZe=st({extends:tg,created(){this.initLight(new oD(this.color,this.intensity))},__hmrId:"AmbientLight"}),DZe=st({extends:tg,props:{target:{type:Object,default:()=>({x:0,y:0,z:0})}},created(){this.initLight(new Hd(this.color,this.intensity))},__hmrId:"DirectionalLight"}),PZe=st({extends:tg,props:{groundColor:{type:String,default:"#444444"}},created(){const i=new rD(this.color,this.groundColor,this.intensity);Zt(()=>this.groundColor,e=>{i.groundColor.set(e)}),this.initLight(i)},__hmrId:"HemisphereLight"}),LZe=st({extends:tg,props:{distance:{type:Number,default:0},decay:{type:Number,default:1}},created(){this.initLight(new G1(this.color,this.intensity,this.distance,this.decay))},__hmrId:"PointLight"}),IZe=st({extends:tg,props:{width:{type:Number,default:10},height:{type:Number,default:10},helper:Boolean},created(){vXe.init();const i=new PY(this.color,this.intensity,this.width,this.height);if(["width","height"].forEach(t=>{Zt(()=>this[t],n=>{i[t]=n})}),this.helper){const t=new yXe(i);i.add(t)}this.initLight(i)},__hmrId:"RectAreaLight"}),OZe=st({extends:tg,props:{angle:{type:Number,default:Math.PI/3},decay:{type:Number,default:1},distance:{type:Number,default:0},penumbra:{type:Number,default:0},target:Object},created(){const i=new jd(this.color,this.intensity,this.distance,this.angle,this.penumbra,this.decay);["angle","decay","distance","penumbra"].forEach(t=>{Zt(()=>this[t],n=>{i[t]=n})}),this.initLight(i)},__hmrId:"SpotLight"});const zL=Symbol("Material"),kL=st({emits:["created"],props:{color:{type:String,default:"#ffffff"},props:{type:Object,default:()=>({})}},inject:{mesh:by},setup(){return{}},provide(){return{[zL]:this}},created(){if(!this.mesh){console.error("Missing parent Mesh");return}if(this.createMaterial){const i=this.material=this.createMaterial();Zt(()=>this.color,e=>{i.color.set(e)}),hh(this,"props",i,!1,this.setProp),this.$emit("created",i),this.mesh.setMaterial(i)}},unmounted(){var i;(i=this.material)==null||i.dispose()},methods:{getMaterialParams(){return{...F7(this.$props,["props"]),...this.props}},setProp(i,e,t,n=!1){const r=i[e];r instanceof Pe?r.set(t):i[e]=t,i.needsUpdate=n},setTexture(i,e="map"){this.setProp(this.material,e,i,!0)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Material"});function sl(i,e,t){return st({name:i,extends:kL,props:e,methods:{createMaterial(){return t(this.getMaterialParams())}}})}const RZe=sl("BasicMaterial",{props:{type:Object,default:()=>({})}},i=>new os(i)),NZe=sl("LambertMaterial",{props:{type:Object,default:()=>({})}},i=>new nD(i)),FZe=sl("PhongMaterial",{props:{type:Object,default:()=>({})}},i=>new K2(i)),zZe=sl("PhysicalMaterial",{props:{type:Object,default:()=>({})}},i=>new sh(i)),kZe=sl("PointsMaterial",{props:{type:Object,default:()=>({})}},i=>new Qx(i)),BZe=sl("ShadowMaterial",{color:{type:String,default:"#000000"},props:{type:Object,default:()=>({})}},i=>new xY(i)),UZe=sl("StandardMaterial",{props:{type:Object,default:()=>({})}},i=>new wm(i)),VZe=sl("ToonMaterial",{props:{type:Object,default:()=>({})}},i=>new _Y(i));var GZe=sl("MatcapMaterial",{src:String,name:{type:String,default:"0404E8_0404B5_0404CB_3333FC"}},i=>{const e=i.src?i.src:vie(i.name),t=F7(i,["src","name"]);return t.matcap=new lf().load(e),new wY(t)});const jZe=`
  varying vec2 vUv;
  void main(){
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
  }
`,HZe=`
  varying vec2 vUv;
  void main() {
    gl_FragColor = vec4(vUv.x, vUv.y, 0., 1.0);
  }
`;var WZe=sl("ShaderMaterial",{props:{type:Object,default:()=>({uniforms:{},vertexShader:jZe,fragmentShader:HZe})}},i=>new Si(F7(i,["color"])));function $Ze(i,e,t){return i.split(e).join(t)}const qZe=wt.meshphong_frag.slice(0,wt.meshphong_frag.indexOf("void main() {")),XZe=wt.meshphong_frag.slice(wt.meshphong_frag.indexOf("void main() {")),YZe={uniforms:Dn.merge([ya.phong.uniforms,{thicknessColor:{value:new Pe(16777215)},thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),vertexShader:`
    #define USE_UV
    ${wt.meshphong_vert}
  `,fragmentShader:`
    #define USE_UV
    #define SUBSURFACE

    ${qZe}

    uniform float thicknessPower;
    uniform float thicknessScale;
    uniform float thicknessDistortion;
    uniform float thicknessAmbient;
    uniform float thicknessAttenuation;
    uniform vec3 thicknessColor;

    void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {
      #ifdef USE_COLOR
        vec3 thickness = vColor * thicknessColor;
      #else
        vec3 thickness = thicknessColor;
      #endif
      vec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));
      float scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;
      vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;
      reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;
    }
  `+XZe.replace("#include <lights_fragment_begin>",$Ze(wt.lights_fragment_begin,"RE_Direct( directLight, geometry, material, reflectedLight );",`
        RE_Direct( directLight, geometry, material, reflectedLight );
        #if defined( SUBSURFACE ) && defined( USE_UV )
          RE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);
        #endif
      `))};var ZZe=st({extends:kL,props:{uniforms:{type:Object,default:()=>({diffuse:"#ffffff",thicknessColor:"#ffffff",thicknessDistortion:.4,thicknessAmbient:.01,thicknessAttenuation:.7,thicknessPower:2,thicknessScale:4})}},methods:{createMaterial(){const i=YZe,e=Dn.clone(i.uniforms);return hh(this,"uniforms",e,!0,(n,r,s)=>{const o=n[r].value;o instanceof Pe?o.set(s):n[r].value=s}),new Si({...i,lights:!0,...this.props,uniforms:e})}}}),BL=st({inject:{material:zL},props:{name:{type:String,default:"map"},uniform:String,src:String,onLoad:Function,onProgress:Function,onError:Function,props:{type:Object,default:()=>({})}},setup(){return{}},created(){this.refreshTexture(),Zt(()=>this.src,this.refreshTexture)},unmounted(){var i,e;(i=this.material)==null||i.setTexture(null,this.name),(e=this.texture)==null||e.dispose()},methods:{createTexture(){if(this.src)return new lf().load(this.src,this.onLoaded,this.onProgress,this.onError)},initTexture(){this.texture&&(hh(this,"props",this.texture),this.material&&(this.material.setTexture(this.texture,this.name),this.material.material instanceof Si&&this.uniform&&(this.material.material.uniforms[this.uniform]={value:this.texture})))},refreshTexture(){var i;(i=this.texture)==null||i.dispose(),this.texture=this.createTexture(),this.initTexture()},onLoaded(i){var e;(e=this.onLoad)==null||e.call(this,i)}},render(){return[]}}),QZe=st({extends:BL,props:{name:{type:String,default:"envMap"},path:{type:String,required:!0},urls:{type:Array,default:()=>["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"]},props:{type:Object,default:()=>({mapping:rf})}},created(){Zt(()=>this.path,this.refreshTexture),Zt(()=>this.urls,this.refreshTexture)},methods:{createTexture(){return new MY().setPath(this.path).load(this.urls,this.onLoaded,this.onProgress,this.onError)}}}),KZe=st({extends:BL,props:{videoId:{type:String,required:!0}},created(){Zt(()=>this.videoId,this.refreshTexture)},methods:{createTexture(){const i=document.getElementById(this.videoId);return new QC(i)}}}),JZe=fs("Box",_ie,bie),eQe=fs("Circle",wie,Sie),tQe=fs("Cone",Aie,Tie),iQe=fs("Cylinder",Mie,Eie),nQe=fs("Dodecahedron",Cie,Die),rQe=fs("Icosahedron",Pie,Lie),sQe=fs("Lathe",Iie,Oie),oQe=fs("Octahedron",Rie,Nie),aQe=fs("Plane",Fie,zie),lQe=fs("Polyhedron",kie,Bie),cQe=fs("Ring",Uie,Vie),uQe=fs("Sphere",Gie,jie),hQe=fs("Tetrahedron",Hie,Wie);const dQe={text:{type:String,required:!0,default:"Text"},fontSrc:{type:String,required:!0},size:{type:Number,default:80},height:{type:Number,default:5},depth:{type:Number,default:1},curveSegments:{type:Number,default:12},bevelEnabled:{type:Boolean,default:!1},bevelThickness:{type:Number,default:10},bevelSize:{type:Number,default:8},bevelOffset:{type:Number,default:0},bevelSegments:{type:Number,default:5},align:{type:[Boolean,String],default:!1}};var fQe=st({extends:eg,props:dQe,setup(){return{}},created(){if(!this.fontSrc){console.error('Missing required prop: "font-src"');return}["text","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","align"].forEach(t=>{Zt(()=>this[t],()=>{this.font&&this.refreshGeometry()})});const e=new _Xe;this.loading=!0,e.load(this.fontSrc,t=>{this.loading=!1,this.font=t,this.createGeometry(),this.initMesh()})},methods:{createGeometry(){this.geometry=new xXe(this.text,{font:this.font,size:this.size,height:this.height,depth:this.depth,curveSegments:this.curveSegments,bevelEnabled:this.bevelEnabled,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelOffset:this.bevelOffset,bevelSegments:this.bevelSegments}),this.align==="center"&&this.geometry.center()}}}),pQe=fs("Torus",$ie,qie),mQe=fs("TorusKnot",Xie,Yie),gQe=st({extends:eg,props:GM,created(){this.createGeometry(),this.addGeometryWatchers(GM)},methods:{createGeometry(){this.geometry=Zie(this)},updatePoints(i){Qie(this.geometry,i)}},__hmrId:"Tube"}),vQe=st({emits:["loaded"],extends:eg,props:{src:{type:String,required:!0},width:Number,height:Number,widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},keepSize:Boolean},setup(){return{}},created(){this.renderer&&(this.geometry=new iy(1,1,this.widthSegments,this.heightSegments),this.material=new os({side:ju,map:this.loadTexture()}),Zt(()=>this.src,this.refreshTexture),["width","height"].forEach(i=>{Zt(()=>this[i],this.resize)}),this.resize(),this.keepSize&&this.renderer.onResize(this.resize))},unmounted(){var i;(i=this.renderer)==null||i.offResize(this.resize)},methods:{loadTexture(){return new lf().load(this.src,this.onLoaded)},refreshTexture(){var i;(i=this.texture)==null||i.dispose(),this.material&&(this.material.map=this.loadTexture(),this.material.needsUpdate=!0)},onLoaded(i){this.texture=i,this.resize(),this.$emit("loaded",i)},resize(){if(!this.renderer||!this.texture)return;const i=this.renderer.size,e=this.texture.image.width,t=this.texture.image.height,n=e/t;let r=1,s=1;this.width&&this.height?(r=this.width*i.wWidth/i.width,s=this.height*i.wHeight/i.height):this.width?(r=this.width*i.wWidth/i.width,s=r/n):this.height?(s=this.height*i.wHeight/i.height,r=s*n):n>1?r=s*n:s=r/n,this.mesh&&(this.mesh.scale.x=r,this.mesh.scale.y=s)}},__hmrId:"Image"}),yQe=st({extends:eg,props:{count:{type:Number,required:!0}},methods:{initMesh(){if(this.renderer){if(!this.geometry||!this.material)return console.error("Missing geometry and/or material"),!1;this.mesh=new C6(this.geometry,this.material,this.count),this.mesh.userData.component=this,lr(this,"castShadow",this.mesh),lr(this,"receiveShadow",this.mesh),(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer.three.addIntersectObject(this.mesh),this.initObject3D(this.mesh)}}},__hmrId:"InstancedMesh"}),xQe=st({extends:dh,emits:["loaded"],props:{src:{type:String,required:!0}},setup(){return{}},created(){this.texture=new lf().load(this.src,this.onLoaded),this.material=new YC({map:this.texture}),this.sprite=new GX(this.material),this.initObject3D(this.sprite)},unmounted(){var i,e;(i=this.texture)==null||i.dispose(),(e=this.material)==null||e.dispose()},methods:{onLoaded(){this.updateUV(),this.$emit("loaded")},updateUV(){if(!this.texture||!this.sprite)return;const i=this.texture.image.width,e=this.texture.image.height,t=i/e;let n=.5,r=.5;t>1?n=.5*t:r=.5/t;const s=this.sprite.geometry.attributes.position.array;s[0]=-n,s[1]=-r,s[5]=n,s[6]=-r,s[10]=n,s[11]=r,s[15]=-n,s[16]=r,this.sprite.geometry.attributes.position.needsUpdate=!0}},__hmrId:"Sprite"}),_Qe=st({extends:dh,setup(){return{}},provide(){return{[by]:this}},mounted(){this.mesh=this.points=new ZC(this.geometry,this.material),this.initObject3D(this.mesh)},methods:{setGeometry(i){this.geometry=i,this.mesh&&(this.mesh.geometry=i)},setMaterial(i){this.material=i,this.mesh&&(this.mesh.material=i)}}}),Kie=st({extends:dh,emits:["before-load","load","progress","error"],props:{src:{type:String,required:!0}},data(){return{progress:0}},methods:{onLoad(i){this.$emit("load",i)},onProgress(i){this.progress=i.loaded/i.total,this.$emit("progress",i)},onError(i){this.$emit("error",i)}}}),bQe=st({extends:Kie,created(){const i=new SXe;this.$emit("before-load",i),i.load(this.src,e=>{this.onLoad(e),this.initObject3D(e.scene)},this.onProgress,this.onError)}}),wQe=st({extends:Kie,created(){const i=new SYe;this.$emit("before-load",i),i.load(this.src,e=>{this.onLoad(e),this.initObject3D(e)},this.onProgress,this.onError)}});const UL=Symbol("Composer");var SQe=st({setup(){return{renderer:zr(rl)}},provide(){return{[UL]:this}},created(){if(!this.renderer){console.error("Renderer not found");return}const i=this.renderer,e=new zYe(this.renderer.renderer);this.composer=e,this.renderer.composer=e,i.addListener("init",()=>{i.renderer.autoClear=!1,this.resize(),i.addListener("resize",this.resize)})},unmounted(){var i;(i=this.renderer)==null||i.removeListener("resize",this.resize)},methods:{addPass(i){var e;(e=this.composer)==null||e.addPass(i)},removePass(i){var e;(e=this.composer)==null||e.removePass(i)},resize(){this.composer&&this.renderer&&this.composer.setSize(this.renderer.size.width,this.renderer.size.height)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"EffectComposer"}),ja=st({inject:{renderer:rl,composer:UL},emits:["ready"],setup(){return{}},created(){this.composer||console.error("Missing parent EffectComposer"),this.renderer||console.error("Missing parent Renderer")},unmounted(){var i,e,t;this.pass&&((i=this.composer)==null||i.removePass(this.pass),(t=(e=this.pass).dispose)==null||t.call(e))},methods:{initEffectPass(i){var e;this.pass=i,(e=this.composer)==null||e.addPass(i),this.$emit("ready",i)}},render(){return[]},__hmrId:"EffectPass"}),AQe=st({extends:ja,created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const i=new kYe(this.renderer.scene,this.renderer.camera);this.initEffectPass(i)},__hmrId:"RenderPass"});const $V={focus:{type:Number,default:1},aperture:{type:Number,default:.025},maxblur:{type:Number,default:.01}};var TQe=st({extends:ja,props:$V,created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const i={focus:this.focus,aperture:this.aperture,maxblur:this.maxblur,width:this.renderer.size.width,height:this.renderer.size.height},e=new BYe(this.renderer.scene,this.renderer.camera,i);Object.keys($V).forEach(t=>{Zt(()=>this[t],n=>{e.uniforms[t].value=n})}),this.initEffectPass(e)},__hmrId:"BokehPass"});const qV={noiseIntensity:{type:Number,default:.5},scanlinesIntensity:{type:Number,default:.05},scanlinesCount:{type:Number,default:4096},grayscale:{type:Number,default:0}};var MQe=st({extends:ja,props:qV,created(){const i=new UYe(this.noiseIntensity,this.scanlinesIntensity,this.scanlinesCount,this.grayscale);Object.keys(qV).forEach(e=>{Zt(()=>this[e],t=>{i.uniforms[e].value=t})}),this.initEffectPass(i)},__hmrId:"FilmPass"}),EQe=st({extends:ja,created(){var i;const e=new om(VYe);(i=this.renderer)==null||i.addListener("resize",this.resize),this.initEffectPass(e)},unmounted(){var i;(i=this.renderer)==null||i.removeListener("resize",this.resize)},methods:{resize({size:i}){if(this.pass){const{resolution:e}=this.pass.material.uniforms;e.value.x=1/i.width,e.value.y=1/i.height}}},__hmrId:"FXAAPass"});const XV={shape:{type:Number,default:1},radius:{type:Number,default:4},rotateR:{type:Number,default:Math.PI/12*1},rotateG:{type:Number,default:Math.PI/12*2},rotateB:{type:Number,default:Math.PI/12*3},scatter:{type:Number,default:0}};var CQe=st({extends:ja,props:XV,created(){if(!this.renderer)return;const i=new GYe(this.renderer.size.width,this.renderer.size.height,{});Object.keys(XV).forEach(e=>{i.uniforms[e].value=this[e],Zt(()=>this[e],t=>{i.uniforms[e].value=t})}),this.initEffectPass(i)},__hmrId:"HalftonePass"}),DQe=st({extends:ja,created(){if(!this.renderer)return;const i=new jYe(this.renderer.size.width,this.renderer.size.height);this.initEffectPass(i)},__hmrId:"SMAAPass"}),PQe=st({extends:ja,props:{options:{type:Object,default:()=>({})}},created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const i=new gie(this.renderer.scene,this.renderer.camera,this.renderer.size.width,this.renderer.size.height);Object.keys(this.options).forEach(e=>{i[e]=this.options[e]}),this.initEffectPass(i)},__hmrId:"SSAOPass"}),Jie={uniforms:{},vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    varying vec2 vUv;
    void main() {
      gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
    }
  `},YV={uniforms:{tDiffuse:{value:null},blurRadius:{value:0},gradientRadius:{value:0},start:{value:new ae},end:{value:new ae},delta:{value:new ae},texSize:{value:new ae}},vertexShader:Jie.vertexShader,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float blurRadius;
    uniform float gradientRadius;
    uniform vec2 start;
    uniform vec2 end;
    uniform vec2 delta;
    uniform vec2 texSize;
    varying vec2 vUv;

    float random(vec3 scale, float seed) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
    }

    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;

      /* randomize the lookup values to hide the fixed number of samples */
      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);

      vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
      float radius = smoothstep(0.0, 1.0, abs(dot(vUv * texSize - start, normal)) / gradientRadius) * blurRadius;
      for (float t = -30.0; t <= 30.0; t++) {
          float percent = (t + offset - 0.5) / 30.0;
          float weight = 1.0 - abs(percent);
          vec4 texel = texture2D(tDiffuse, vUv + delta / texSize * percent * radius);
          // vec4 texel2 = texture2D(tDiffuse, vUv + vec2(-delta.y, delta.x) / texSize * percent * radius);

          /* switch to pre-multiplied alpha to correctly blur transparent images */
          texel.rgb *= texel.a;
          // texel2.rgb *= texel2.a;

          color += texel * weight;
          total += 2.0 * weight;
      }

      gl_FragColor = color / total;

      /* switch back from pre-multiplied alpha */
      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
    }
  `};const LQe={blurRadius:{type:Number,default:10},gradientRadius:{type:Number,default:100},start:{type:Object,default:()=>({x:0,y:100})},end:{type:Object,default:()=>({x:10,y:100})}};var IQe=st({extends:ja,props:LQe,setup(){return{uniforms1:{},uniforms2:{}}},created(){if(!this.composer)return;this.pass1=new om(YV),this.pass2=new om(YV);const i=this.uniforms1=this.pass1.uniforms,e=this.uniforms2=this.pass2.uniforms;e.blurRadius=i.blurRadius,e.gradientRadius=i.gradientRadius,e.start=i.start,e.end=i.end,e.texSize=i.texSize,lr(this,"blurRadius",i.blurRadius,"value"),lr(this,"gradientRadius",i.gradientRadius,"value"),this.updateFocusLine(),["start","end"].forEach(t=>{Zt(()=>this[t],this.updateFocusLine,{deep:!0})}),this.pass1.setSize=(t,n)=>{i.texSize.value.set(t,n)},this.initEffectPass(this.pass1),this.composer.addPass(this.pass2)},unmounted(){this.composer&&this.pass2&&this.composer.removePass(this.pass2)},methods:{updateFocusLine(){this.uniforms1.start.value.copy(this.start),this.uniforms1.end.value.copy(this.end);const i=new ae().copy(this.end).sub(this.start).normalize();this.uniforms1.delta.value.copy(i),this.uniforms2.delta.value.set(-i.y,i.x)}},__hmrId:"TiltShiftPass"});const ZV={strength:{type:Number,default:1.5},radius:{type:Number,default:0},threshold:{type:Number,default:0}};var OQe=st({extends:ja,props:ZV,created(){if(!this.renderer)return;const i=new ae(this.renderer.size.width,this.renderer.size.height),e=new RL(i,this.strength,this.radius,this.threshold);Object.keys(ZV).forEach(t=>{Zt(()=>this[t],n=>{e.uniforms[t].value=n})}),this.initEffectPass(e)},__hmrId:"UnrealBloomPass"}),RQe={uniforms:{tDiffuse:{value:null},center:{value:new ae(.5,.5)},strength:{value:0}},vertexShader:Jie.vertexShader,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform vec2 center;
    uniform float strength;
    varying vec2 vUv;

    float random(vec3 scale, float seed) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
    }
    
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      vec2 toCenter = center - vUv;
      
      /* randomize the lookup values to hide the fixed number of samples */
      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
      
      for (float t = 0.0; t <= 40.0; t++) {
        float percent = (t + offset) / 40.0;
        float weight = 4.0 * (percent - percent * percent);
        vec4 texel = texture2D(tDiffuse, vUv + toCenter * percent * strength);

        /* switch to pre-multiplied alpha to correctly blur transparent images */
        texel.rgb *= texel.a;

        color += texel * weight;
        total += weight;
      }

      gl_FragColor = color / total;

      /* switch back from pre-multiplied alpha */
      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
    }
  `},NQe=st({extends:ja,props:{center:{type:Object,default:()=>({x:.5,y:.5})},strength:{type:Number,default:.5}},created(){const i=new om(RQe);lr(this,"center",i.uniforms.center,"value"),lr(this,"strength",i.uniforms.strength,"value"),this.initEffectPass(i)},__hmrId:"ZoomBlurPass"}),FQe=Object.freeze({__proto__:null,Renderer:JYe,RendererInjectionKey:rl,OrthographicCamera:eZe,PerspectiveCamera:WV,Camera:WV,Group:nZe,Scene:tZe,SceneInjectionKey:NL,Object3D:dh,Raycaster:rZe,CubeCamera:sZe,BufferGeometry:FL,BoxGeometry:oZe,CircleGeometry:aZe,ConeGeometry:lZe,CylinderGeometry:cZe,DodecahedronGeometry:uZe,ExtrudeGeometry:fZe,IcosahedronGeometry:pZe,LatheGeometry:mZe,OctahedronGeometry:gZe,PlaneGeometry:vZe,PolyhedronGeometry:yZe,RingGeometry:xZe,SphereGeometry:_Ze,ShapeGeometry:SZe,TetrahedronGeometry:AZe,TorusGeometry:TZe,TorusKnotGeometry:MZe,TubeGeometry:EZe,AmbientLight:CZe,DirectionalLight:DZe,HemisphereLight:PZe,PointLight:LZe,RectAreaLight:IZe,SpotLight:OZe,Material:kL,BasicMaterial:RZe,LambertMaterial:NZe,PhongMaterial:FZe,PhysicalMaterial:zZe,PointsMaterial:kZe,ShadowMaterial:BZe,StandardMaterial:UZe,ToonMaterial:VZe,MaterialInjectionKey:zL,MatcapMaterial:GZe,ShaderMaterial:WZe,SubSurfaceMaterial:ZZe,Texture:BL,CubeTexture:QZe,VideoTexture:KZe,Mesh:eg,MeshInjectionKey:by,Box:JZe,Circle:eQe,Cone:tQe,Cylinder:iQe,Dodecahedron:nQe,Icosahedron:rQe,Lathe:sQe,Octahedron:oQe,Plane:aQe,Polyhedron:lQe,Ring:cQe,Sphere:uQe,Tetrahedron:hQe,Text:fQe,Torus:pQe,TorusKnot:mQe,Tube:gQe,Image:vQe,InstancedMesh:yQe,Sprite:xQe,Points:_Qe,GltfModel:bQe,FbxModel:wQe,EffectComposer:SQe,ComposerInjectionKey:UL,RenderPass:AQe,EffectPass:ja,BokehPass:TQe,FilmPass:MQe,FXAAPass:EQe,HalftonePass:CQe,SMAAPass:DQe,SSAOPass:PQe,TiltShiftPass:IQe,UnrealBloomPass:OQe,ZoomBlurPass:NQe,applyObjectProps:M3,bindObjectProp:hh,bindObjectProps:HYe,setFromProp:E3,bindProps:WYe,bindProp:lr,propsValues:F7,lerp:$Ye,limit:qYe,getMatcapUrl:vie});const zQe={install(i){["Camera","OrthographicCamera","PerspectiveCamera","Raycaster","Renderer","Scene","Group","CubeCamera","AmbientLight","DirectionalLight","HemisphereLight","PointLight","RectAreaLight","SpotLight","BasicMaterial","LambertMaterial","MatcapMaterial","PhongMaterial","PhysicalMaterial","PointsMaterial","ShaderMaterial","StandardMaterial","SubSurfaceMaterial","ToonMaterial","Texture","CubeTexture","BufferGeometry","Mesh","Box","BoxGeometry","Circle","CircleGeometry","Cone","ConeGeometry","Cylinder","CylinderGeometry","Dodecahedron","DodecahedronGeometry","Icosahedron","IcosahedronGeometry","Lathe","LatheGeometry","Octahedron","OctahedronGeometry","Plane","PlaneGeometry","Polyhedron","PolyhedronGeometry","Ring","RingGeometry","Sphere","SphereGeometry","Tetrahedron","TetrahedronGeometry","Text","Torus","TorusGeometry","TorusKnot","TorusKnotGeometry","Tube","TubeGeometry","Image","InstancedMesh","Points","Sprite","FbxModel","GltfModel","BokehPass","EffectComposer","FilmPass","FXAAPass","HalftonePass","RenderPass","SAOPass","SMAAPass","SSAOPass","TiltShiftPass","UnrealBloomPass","ZoomBlurPass"].forEach(t=>{i.component(t,FQe[t])})}};const z7=Ose(gXe);z7.use(zse());z7.use(xL);z7.use(zQe);z7.mount("#app");export{Lde as A,kde as B,zde as C,wJe as D,jJe as E,is as F,GJe as K,Kue as T,VJe as U,hme as _,Gt as a,Be as b,wr as c,Nge as d,VQe as e,oE as f,vs as g,UQe as h,kQe as i,$re as j,So as k,HJe as l,K3 as m,y1 as n,ur as o,zx as p,Uqe as q,Ul as r,WJe as s,wa as t,yu as u,BQe as v,V5 as w,cm as x,bhe as y,Pde as z};
